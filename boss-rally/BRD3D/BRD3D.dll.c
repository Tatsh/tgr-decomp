/* This file was generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2020 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <defs.h>
#include <math.h>
#include <windows.h>

//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

int __cdecl CalculateChecksum(unsigned int seed, unsigned __int8 *buf, unsigned int elementSize);
// _DWORD *__thiscall unknown_libname_1(_DWORD *this);
int __thiscall meth_unk00334_setField0Validate(unk00334 *this, unk0008C *a2); // idb
int __thiscall meth_unk000334_10001160(unk00334 *this);                       // idb
int returnZeroWrapper();
int sub_10001190();
void __thiscall meth_100011F0(float *this, float a2, int a3);
float *__thiscall meth_100015D0(#479 * this, float a2, float a3);
int __thiscall meth_10001760(void *this);
float *__thiscall meth_10001890(_DWORD *this, float a2);
float *__thiscall meth_10001970(#481 * this);
int __thiscall meth_100019D0(#479 * this); // idb
int __thiscall meth_10001FF0(#482 * this); // idb
long double __cdecl cos_(float a1);
int __cdecl CreateMinuteSecondsString(char *outBuffer, float totalSeconds); // idb
CarPart *sub_10002140();
long double __cdecl sin_(float a1);
long double __cdecl sqrt_(float a1);
int pm_sub_10002260();
int pm_sub_10002440();
int getWPARAM();
BOOL pm_sub_10002510();
MCIERROR __cdecl pm_mciPlayOrClose(DWORD_PTR callback, unsigned __int8 positionToPlayFrom); // idb
int __cdecl pm_sub_100025C0(HWND hWnd);                                                     // idb
int __cdecl pm_sub_100025F0(HWND hWnd);                                                     // idb
int __cdecl pm_sub_10002660(HWND a1);
int __cdecl pm_sub_100027C0(int a1);
int __cdecl pm_sub_100027F0(int a1);
int __cdecl pm_sub_10002870(int a1);
int pm_sub_100028D0();
DWORD pm_sub_10002910();
int pm_sub_10002930();
int pm_sub_10002970();
int pm_sub_100029B0();
int __cdecl pm_sub_100029F0(int a1);
int __cdecl pm_sub_10002A20(unsigned __int8 a1);
int __cdecl sub_10002A80(char a1);
int pm_sub_10002AE0();
int pm_sub_10002B40();
int pm_sub_10002B70();
int pm_sub_10002BD0();
BOOL pm_sub_10002C30();
int pm_sub_10002CF0();
int __cdecl sub_10002DE0(float, float); // idb
int __cdecl sub_10002E90(int a1, int a2);
__int16 __cdecl sub_10002EF0(unsigned __int16 *a1);
__int16 __cdecl sub_10002F40(unsigned __int16 *a1);
DWORD __stdcall CHK_GetFileSize(CHK_File *cFile, void *_unused);
CHK_File *__cdecl CHK_FReadOpen(const char *filename);
size_t __cdecl CHK_FRead0(void *buffer,
                          size_t elementSize,
                          size_t elementCount,
                          CHK_File *fp); // idb
void *__cdecl CHK_FReadReportError(void *buffer,
                                   size_t elementSize,
                                   size_t elementCount,
                                   CHK_File *fp);                    // idb
char *__cdecl CHK_ReadLine(char *outBuff, int maxBytes, FILE **pfp); // idb
void __cdecl CHK_FClose(CHK_File *cFile);                            // idb
BOOL __cdecl CHK_FileExists(char *filename);
void *__cdecl CHK_AllocateMemory(size_t size, const char *debugName);
void *__cdecl CHK_ReAllocateMemory0(void *ptr, size_t size, char *debugName); // idb
unsigned int sub_10003460();
int __cdecl sub_100034A0(int a1, int a2, int a3, unsigned int a4);
BOOL __cdecl np_sub_10003530(const char *a1);
void __cdecl np_sub_10003580(int a1, int a2, int a3, int a4);
int __cdecl sub_10004590(int a1, char a2, char a3, char a4, char a5, int a6, char a7);
int __cdecl sub_100046D0(_DWORD *a1, unk00214 *u214); // idb
int __cdecl sub_10004760(
    _DWORD *a1, char a2, char a3, char a4, char a5, char a6, int a7, int a8, char a9, char a10);
BOOL __cdecl sub_100048D0(unk00214 *a1); // idb
int __cdecl sub_10004910(_DWORD *a1, int a2);
int sub_100049C0();
int __cdecl atomic_sub_10004A10(int mutexIndex); // idb
BOOL __cdecl atomic_sub_10004A50(int a1, int a2);
BOOL np_sub_10004A90();
int atomic_sub_10004BB0();
int atomic_sub_10004BE0();
int atomic_sub_10004C20();
int __cdecl sub_10004C60(void *a1);
int __cdecl sub_10004DD0(_DWORD *a1, unk00214 *a2); // idb
int __cdecl sub_10004E50(float *a1, float *a3);     // idb
int np_sub_10004FC0();
int np_sub_10005090();
int __cdecl sub_10005130(float *a1);
int np_sub_100053F0();
int sub_10005470();
int __cdecl sub_100054A0(float *a1, int a2);
void __cdecl sub_100058D0(float *a1);
void __cdecl Clamp0To2048(float *a1);
void __cdecl Clamp256(float *a1);
int atomic_sub_10005960();
int sub_10005B10();
BOOL np_sub_10005BE0();
int __cdecl atomic_sub_10005CF0(int mutexMult); // idb
int sub_10005D30();
int atomic_sub_10005D40();
int atomic_sub_10005D90();
int __cdecl atomic_sub_10005DE0(int mutexMult, _BYTE *a2, _BYTE *a3, _BYTE *a4); // idb
int __cdecl atomic_sub_10005E40(int a1);
char *__cdecl atomic_sub_10005E70(int mutexMult); // idb
BOOL __cdecl np_sub_10005EE0(int a1, const char *a2);
int __cdecl atomic_sub_10005F40(int mutexMult); // idb
int __cdecl atomic_sub_10005F90(int mutexMult); // idb
int __cdecl np_sub_10005FE0(int a1);
BOOL atomic_sub_10006090();
BOOL atomic_sub_100060C0();
BOOL atomic_sub_100060F0();
BOOL np_sub_10006160();
int __cdecl math_100061A0(unk00214 *u214, float a2[40]);
int __cdecl math_ClampFloor32Int(float);      // idb
int __cdecl math_ClampFloor32768Int(float x); // idb
int __cdecl math_ClampFloor255(float);        // idb
int __cdecl math_ClampFloor63(float);         // idb
char __cdecl math_100066A0(float a1);
__int64 __cdecl math_ClampFloor1677215(float a1);
int __cdecl math_ClampFloor8388607(float);                           // idb
int __cdecl math_ClampFloorNeg128(float);                            // idb
int __cdecl math_ClampFloor32768(float);                             // idb
int __cdecl math_ClampFloor128(float);                               // idb
int __cdecl s_unk00214_10006830(unk00214 *a1, float *a2, float *a3); // idb
char __cdecl math_10006BD0(int a1, float a2[40]);
unsigned int __cdecl math_10006EC0(int a1, int *a2);
double __cdecl math_10007250(char a1);
double __cdecl math_mult_neg_1_32_32_32(__int16 a1);
double __cdecl math_100072A0(unsigned __int8 a1);
double __cdecl math_100072C0(unsigned __int8 a1);
double __cdecl math_100072E0(char); // weak
double __cdecl math_mult_1_32_32_8(unsigned int a1);
double __cdecl math_10007340(int a1);
double __cdecl math_mult_1_128(__int16 a1);
double __cdecl math_mult_1_256(__int16 a1);
double __cdecl math_mult_1_8(char a1);
unsigned int __cdecl math_100073E0(float *a1, float *a2, int *a3);
int __cdecl math_10007730(int a1, int a2);
int __cdecl math_100079E0(int, float, int, int); // idb
int CheckPreviousApp();
void SetupGMemoryStatus();
void __cdecl ReadSettingsParseCmdLine(char *cmdLine); // idb
Pod *__thiscall meth_Pod_100085C0(Pod *this, char a2);
void __thiscall meth_Pod_SetVtbl(Pod *this); // idb
char __thiscall meth_Pod_CleanupName(Pod *this, const char *a1, char *buff);
int __thiscall meth_Pod_10008670(Pod *this, int a2);                                         // idb
int __thiscall meth_Pod_GetNumForNameWrapper(Pod *this, char *ArgList);                      // idb
int __thiscall meth_Pod_GetPodLength(Pod *this, unsigned int argList);                       // idb
size_t __thiscall meth_Pod_ReadPod(Pod *this, unsigned int argList, void *buffer);           // idb
int __thiscall meth_Pod_LoadPod(Pod *this, unsigned int ArgList);                            // idb
int __thiscall meth_Pod_LoadPod0(Pod *this, unsigned int argList, int a3);                   // idb
int __thiscall meth_Pod_10008890(Pod *this, int a2);                                         // idb
int __thiscall meth_Pod_100088B0(Pod *this, int a2, int a3);                                 // idb
size_t __thiscall meth_Pod_ReadPodFile(Pod *this);                                           // idb
int __thiscall meth_Pod_CleanUpPod(Pod *this);                                               // idb
int __stdcall meth_Pod_100089C0(char *FileName);                                             // idb
size_t __thiscall meth_Pod_Add(Pod *this, const char *a2, int a3, int a4, char a5, char a6); // idb
int __thiscall meth_Pod_10008AA0(Pod *this);                                                 // idb
void __thiscall meth_Pod_SetPodFilename(Pod *this, const char *a2);                          // idb
// Iostream_init *__thiscall Iostream_init::Iostream_init(Iostream_init *this);
void __thiscall meth_DebugPrint(void *);                      // idb
unsigned int __stdcall basename(const char *path, char *out); // idb
FILE *__stdcall fopenWriteBinary(char *FileName);
FILE *__stdcall fopenReadBinary(char *FileName);
size_t __stdcall freadLockHandleError(FILE *fp, void *buffer, size_t elementCount); // idb
size_t __stdcall fwriteLockHandleError(FILE *Stream, void *Buffer, size_t ElementCount);
void __noreturn s_noreturn_writeToBufferExit(char *format, ...); // idb
void __cdecl __noreturn s_noreturn_10008CF0(char *message);      // idb
HRESULT __cdecl SetupGDevCaps(IDirect3DDevice2 *dev2);           // idb
int s_thunk_10008DF0();
int sub_10008E00();
HRESULT __stdcall ShowStaticImage(unk0008C *u8C, char *filename, int checksum);
int __stdcall D3DEnumTextureFormatsCallback(DDSURFACEDESC *a1, void *context); // idb
int __cdecl sub_10009640(int a1);
char *__cdecl sub_10009660(_WORD *arg0, unsigned __int8 *a2, int a3, int a1, int *a5);
DDPIXELFORMAT *__cdecl GetDDPixelFormatPtr(int a1);
int __cdecl math_PopCount(unsigned int a1);
int __cdecl math_MinBits(unsigned int bitMask);                                          // idb
char *__cdecl graphics_100098A0(_WORD *out_a1, unsigned __int8 *out_a2, int a3, int a4); // idb
// char __usercall sub_10009A50@<al>(unsigned int checksumOrZero@<eax>, _BYTE *a2, _WORD *a3, int size); idb
unsigned __int8 *__cdecl sub_10009AD0(char *filename,
                                      int expectedChecksum,
                                      char **outFilename,
                                      int *outBuff); // idb
HRESULT __cdecl graphics_EnumTextureFormatsSomething(IDirect3DDevice2 *dev2);
IDirectDraw2 *__thiscall meth_10009C40(void *this,
                                       IDirect3DDevice2 *dev,
                                       unsigned __int8 *a3,
                                       DWORD dwWidth,
                                       DWORD dwHeight,
                                       int a6,
                                       DWORD dwColorKeyValue);
IDirectDraw2 *__cdecl ReleaseDeviceDD2(IDirect3DDevice2 *dev); // idb
IDirectDraw2 *__thiscall meth_10009EA0(
    void *this, IDirect3DDevice2 *dev2, unsigned __int8 *a3, int a4, int a5, int a6);
BOOL __thiscall meth_graphics_10009ED0(void *this,
                                       char *a2,
                                       LONG rectRight,
                                       LONG rectBottom); // idb
BOOL __thiscall meth_graphics_1000A020(#511 * this);     // idb
int __thiscall meth_1000A0B0(void *this);
unk0005C *__thiscall meth_unk0005C_1000A100(unk0005C *this,
                                            IDirect3D2 *d3d2,
                                            IDirect3DDevice2 *d3dDevice2); // idb
HRESULT __thiscall meth_unk0008C_SafeReleaseDirect3DMaterial2(unk0008C *this);
unk0008C *__thiscall meth_unk0008C_init(unk0008C *this);
int __thiscall meth_unk0008C_Release(unk0008C *this); // idb
HRESULT __thiscall meth_unk0008C_np_1000A1E0(
    unk0008C *this, HWND hWnd, int a3, int a4, int a5, int a6, int a7, int a8, int a9); // idb
HRESULT __thiscall meth_unk0008C_1000A2C0(unk0008C *this);                              // idb
int __thiscall meth_unk0008C_ReleaseDDrawD3D(unk0008C *this);                           // idb
HRESULT __thiscall meth_unk0008C_1000A390(unk0008C *this);                              // idb
int __thiscall meth_unk0008C_1000A480(unk0008C *this);                                  // idb
int __thiscall meth_unk0008C_ReleaseD3D2DDraw2DDraw(unk0008C *this);                    // idb
int __thiscall meth_unk0008C_SetCooperativeLevel(unk0008C *this);                       // idb
int __thiscall meth_unk0008C_1000A5D0(unk0008C *this);                                  // idb
int __thiscall meth_unk0008C_RestoreDisplayMode(unk0008C *this);                        // idb
HRESULT __thiscall meth_unk0008C_1000A820(unk0008C *this);                              // idb
int __thiscall meth_unk0008C_ReleaseDDraw2Surface(unk0008C *this);                      // idb
HRESULT __thiscall meth_unk0008C_1000A8D0(unk0008C *this);
int __thiscall meth_unk0008C_ResetPalette(unk0008C *this);        // idb
HRESULT __thiscall meth_unk0008C_1000AB70(unk0008C *this);        // idb
int __thiscall meth_unk0008C_ReleaseDDrawSurface(unk0008C *this); // idb
HRESULT __thiscall meth_unk0008C_1000ADF0(unk0008C *this);        // idb
int __thiscall meth_unk0008C_1000AEA0(unk0008C *this);            // idb
HRESULT __thiscall meth_unk0008C_FlipSurfaces(unk0008C *this);    // idb
HRESULT __thiscall meth_unk0008C_1000AFB0(unk0008C *this);        // idb
HRESULT __thiscall meth_unk0008C_1000B150(unk0008C *this);        // idb
HRESULT __thiscall meth_unk00334_1000B170(unk00334 *this);
HRESULT __thiscall meth_unk00334_1000B1F0(unk00334 *this);
HRESULT __thiscall meth_unk00334_1000B220(unk00334 *this, int a2);   // idb
int __thiscall meth_unk0008C_1000B280(unk0008C *this, unk00334 *a2); // idb
int __thiscall meth_unk0008C_1000B2C0(unk0008C *this);               // idb
int __thiscall meth_unk00334_1000B350(unk00334 *this, _DWORD *a2);   // idb
HRESULT __thiscall meth_unk0008C_1000B390(unk0008C *this,
                                          CLSID *guidOrRefreshRate,
                                          unk00334 *a3,
                                          int a4);                                         // idb
HRESULT __thiscall meth_unk0008C_1000B4D0(unk0008C *this, int a2, int a3, int a4, int a5); // idb
IDirectDrawSurface *__cdecl DDrawCreateSurface(
    IDirectDraw2 *ddraw2, LPCSTR filepath, int cx_, int cy, LPDDSURFACEDESC a5);
HRESULT __cdecl DDCopyBitmap(IDirectDrawSurface *ddSurface, LPCSTR name); // idb
HRESULT __cdecl graphics_1000B820(
    IDirectDrawSurface *ddSurface, HGDIOBJ hGDIOBJ, int xSrc, int ySrc, int wSrc, int hSrc); // idb
int __cdecl graphics_CalcColorSpaceValue(LPDIRECTDRAWSURFACE surface, COLORREF color);       // idb
HRESULT __cdecl graphics_1000BA40(LPDIRECTDRAWSURFACE surface, COLORREF color);              // idb
void sub_1000BA70();
void __cdecl np_sub_1000BAF0(SIZE_T *a1, int a2, int a3, int a4);
void __cdecl np_sub_1000BEA0(int a1, int *a2);
void __cdecl np_sub_1000C000(int a1, int *a2);
void __cdecl np_sub_1000C170(int a1, _DWORD *a2);
int __cdecl sub_1000C350(int a1);
void __stdcall __noreturn StartAddress(LPVOID lpThreadParameter);
int sub_1000C4A0();
int __cdecl sub_1000C4D0(int a1, int a2, int a3, int a4, int a5, int a6);
int __cdecl sub_1000C510(HANDLE *a1);
int __cdecl sub_1000C5D0(int, LPVOID lpParameter); // idb
int sub_1000C670();
int sub_1000C6D0();
int __cdecl sub_1000C6E0(int a1);
int __cdecl sub_1000CA90(int a1);
int __cdecl sub_1000CBE0(float, int); // idb
int __cdecl sub_1000E950(float);      // idb
__int16 __fastcall sub_1000EF80(int a1, int a2, float *a3, int a4);
int *sub_1000F460();
void __cdecl sub_1000F480(int a1, int a2, int a3, _WORD *a4, _WORD *a5);
char *sub_1000F5C0();
int sub_1000F620();
int __cdecl sub_1000F640(int a1, int a2, int a3, int a4, int a5);
int *__cdecl sub_100106A0(int a1, int a2, int a3, _DWORD *a4, _DWORD *a5, _DWORD *a6, int a7);
double __cdecl sub_10010960(int a1);
double __cdecl sub_10010970(int a1);
double __cdecl sub_10010980(int a1);
double __cdecl sub_10010990(int a1);
int *__cdecl sub_100109A0(int a1, double(__cdecl *a2)(_DWORD *));
int __cdecl sub_10010B00(int, int, float); // idb
void __cdecl sub_10010BF0(int a1, int a2, int a3, int a4, int a5, float a6, float a7, int a8);
float *__cdecl sub_10010D10(float *a1);
int __cdecl qsort_10010D90(const void *, const void *); // idb
int __cdecl sub_10010DC0(int a1, int a2, int a3);
int __cdecl sub_10011590(int a1, int a2, int a3, int a4);
_WORD *__cdecl sub_10013A10(_WORD *a1);
_DWORD *__cdecl sub_10013A40(int a1);
__int16 __cdecl sub_10013D90(int a1, int a2, int a3, unsigned __int8 a4, unsigned __int8 a5);
_DWORD *__cdecl sub_100140E0(int a1);
_DWORD *__cdecl sub_10014450(int a1, int a2);
void j_nullsub_2();
_DWORD *sub_100147B0();
_DWORD *sub_10014930();
int __cdecl sub_10014A30(int a1);
char (*__cdecl sub_10015BD0(int *a1))[8];
int __cdecl sub_10015C70(int a1);
int *sub_10016910();
int sub_10016990();
int sub_100169B0();
int sub_10016A50();
int *__cdecl sub_10016A60(int a1, int a2, int a3, int a4, int a5);
char __cdecl sub_10016B40(int a1);
_DWORD *__cdecl sub_100171F0(int a1, int a2, float a3, int a4, int a5);
_DWORD *__cdecl sub_10017290(int a1);
void __cdecl sub_100173F0(_DWORD *a1);
_DWORD *__cdecl sub_10017690(int a1);
void sub_10017740();
_DWORD *__cdecl sub_10017790(int a1);
int __cdecl sub_10017890(_DWORD *a1, int a2);
char *__cdecl sub_10017C80(int a1, float a2);
double __cdecl sub_10017CD0(int a1, int a2);
_DWORD *__cdecl sub_10017D90(int a1);
int __cdecl sub_10017F30(int a1);
_DWORD *__cdecl text_10017FE0(int a1, int a2, float a3, int a4, int a5);
BOOL sub_10018070();
_DWORD *__cdecl sub_100180B0(int a1);
_DWORD *__cdecl text_10018590(char *message); // idb
void sub_10019240();
void sub_10019250();
void sub_10019260();
void Set_byte_104B035C_To2();
void Set_byte_104B035C_To0();
void Set_byte_104B035C_To1();
int __cdecl sub_100192A0(int a1, int a2, int a3, int a4, int a5, int a6);
int __cdecl sub_100192F0(int a1);
_DWORD *__cdecl text_10019300(char *text, int x, int y); // idb
int __cdecl sub_100193C0(char *a1, int a2);
int sub_10019490();
int __thiscall meth_100194E0(void *this);
void __thiscall meth_10019620(void *this);
int __thiscall meth_100196D0(void *this);
int sub_10019B50();
int *__cdecl sub_1001A4B0(int a1);
int __cdecl sub_1001A4D0(int a1, int a2, int a3, int a4);
unk00334 *__cdecl sub_1001A550(CLSID *a1);
unk00334 *__cdecl meth_unk00334_1001A570(
    unk00334 *a1, int width, int height, int bitDepth, unk00334 *a5, unk00228 *a6); // idb
CLSID *__cdecl sub_1001A5D0(unk00334 *a1, CLSID *clsid, unk00334 *a3);
int __cdecl sub_1001A610(int a1, int a2, _DWORD *a3, int *a4);
int __cdecl s_unk00334_1001A6E0(unk00334 *a1,
                                int a2,
                                int width,
                                int height,
                                int bitDepth,
                                int a5,
                                _DWORD *a7,
                                _DWORD *a8); // idb
HRESULT __cdecl sub_1001A790(int a1,
                             int width,
                             int height,
                             int bitDepth,
                             int a5,
                             int a6,
                             int a7,
                             unk00334 *a8,
                             unk00334 *a9,
                             unk00334 *a10); // idb
unsigned int __cdecl graphics_1001A870(unsigned int a1);
int __cdecl graphics_BitDepthTo(int bitDepth); // idb
HRESULT __cdecl graphics_1001A950(DDPIXELFORMAT *pixelFormat);
BOOL __stdcall graphics_ddrawEnumerateCallback(GUID *lpGUID,
                                               LPSTR a2,
                                               LPSTR Source,
                                               int *a4); // idb
HRESULT __stdcall graphics_enumModesCallback(DDSURFACEDESC *a1, int *context);
int __stdcall graphics_enumTextureFormatsCallback(LPDDSURFACEDESC lpSurfaceDesc, LPVOID ctx); // idb
int __stdcall graphics_Direct3D2EnumDevicesCallback(GUID *a2,
                                                    LPSTR lpDeviceDescription,
                                                    LPSTR deviceName,
                                                    LPD3DDEVICEDESC desc,
                                                    LPD3DDEVICEDESC a6,
                                                    LPVOID userArg); // idb
int __thiscall meth_unk00334_GetBitDepth(unk00334 *this);
int __thiscall meth_unk00334_1001AC80(
    unk00334 *this, int *width, int *height, int *bitDepth, int *a5);
BOOL __thiscall meth_unk00334_1001ACF0(unk00334 *this, unk00228 *u228); // idb
BOOL __thiscall meth_unk00334_MatchesWidthHeightBitDepth(unk00334 *this,
                                                         int width,
                                                         int height,
                                                         int bitDepth); // idb
BOOL __thiscall meth_unk00228_DeviceDescHasDCMColorModel(unk00228 *this);
int __thiscall meth_unk00228_MatchesGUID(unk00228 *this, CLSID *clsid);
MACRO_DDERR __thiscall meth_unk00228_1001ADE0(unk00228 *this,
                                              GUID *guid,
                                              char *source,
                                              char *source2,
                                              D3DDEVICEDESC *deviceDesc0,
                                              D3DDEVICEDESC *deviceDesc1);
void __thiscall meth_unk00228_1001AEE0(unk00228 *this);                          // idb
HRESULT __thiscall meth_unk00334_1001AF20(unk00334 *a1, IDirect3DDevice2 *dev2); // idb
int __thiscall meth_unk00228_1001AFB0(unk00228 *this);                           // idb
int __thiscall meth_1001B030(_DWORD *this, unk00074 *a2);                        // idb
HRESULT __thiscall meth_unk00334_1001B090(unk00334 *this,
                                          GUID *lpGUID,
                                          char *Source,
                                          char *a4);    // idb
char __thiscall meth_unk00334_1001B280(unk00334 *this); // idb
BOOL __thiscall meth_unk00334_MatchesGUID(unk00334 *this, CLSID *a2);
HRESULT __thiscall meth_unk00334_1001B320(unk00334 *this, IDirectDraw2 *ddraw); // idb
int __thiscall meth_unk00334_1001B3B0(unk00334 *this);                          // idb
MACRO_DDERR __thiscall meth_unk00334_1001B430(unk00334 *this, unk00074 *a2);
unk00334 *__thiscall meth_unk00334_1001B490(unk00334 *this,
                                            int width,
                                            int height,
                                            int bitDepth,
                                            unk00334 *a5,
                                            unk00334 **a6,
                                            unk00334 *a7); // idb
HRESULT __thiscall meth_unk00334_1001B510(unk00334 *this, IDirect3D2 *a2);
int __thiscall meth_unk00334_1001B5A0(unk00334 *this); // idb
MACRO_DDERR __thiscall meth_unk00334_1001B630(unk00334 *this, unk00228 *a2);
int __thiscall meth_unk00334_1001B690(unk00334 *this, CLSID *a2, _DWORD *a3, unk00334 *a4);
int __thiscall meth_unk00334_1001B7C0(
    unk00334 *this, CLSID *clsid, unk00334 *a3, unk00228 *a4, unk00228 *a5);
unk00334 *__thiscall meth_unk00334_1001B880(unk00334 *this,
                                            int width,
                                            int height,
                                            int bitDepth,
                                            unk00334 *a5,
                                            unk00228 *a2,
                                            _DWORD *a7,
                                            unk00334 *u0_1); // idb
GUID *__thiscall meth_unk00334_GetDirectDrawGUID(unk00334 *this);
HRESULT graphics_1001B970();
HRESULT graphics_ddrawEnum();
// _DWORD *__thiscall meth_unknown_libname_2(_DWORD *this);
int __cdecl s_unk00334_1001BA10(unk00334 *a1);                             // idb
unk00334 *__cdecl s_clsid_1001BA70(CLSID *a1, unk00334 *a2, unk00334 *a3); // idb
int graphics_1001BAD0();                                                   // weak
int graphics_1001BAE0();
int __cdecl graphics_1001BB00(int a1, int a2, int a3, int a4); // idb
int thunk_1001BB90();
int graphics_1001BB90();
int thunk_1001BBA0();
int graphics_1001BBB0();
int thunk_1001BBC0();
int graphics_1001BBD0();
int thunk_1001BBF0();
int graphics_1001BC00();
int thunk_1001BC20();
int graphics_1001BC30();
int thunk_1001BC50();
int graphics_1001BC60();
void thunk_j_nullsub_2_0();
int __cdecl graphics_1001BC90(unsigned int a1);
_DWORD *__cdecl graphics_1001BD70(_DWORD *a1);
_DWORD *__cdecl sub_1001BE10(_DWORD *a1);
_DWORD *__cdecl graphics_1001BE30(_DWORD *a1);
HRESULT __cdecl graphics_1001BE90(int a1, int a2, int a3, int a4);
int __thiscall meth_1001C620(_DWORD *this);
int graphics_1001C640();
int __cdecl graphics_1001C690(unsigned int a1);
_DWORD *__cdecl graphics_1001C7A0(_DWORD *a1);
int *__cdecl graphics_1001C7F0(int *a1);
int(__cdecl *__cdecl graphics_1001C820(int a1, int a2))(int);
int __cdecl graphics_1001CA10(float *a1);
int __cdecl graphics_1001CA90(float *a1);
int __cdecl sub_1001CB40(int a1);
int __cdecl sub_1001CC00(int a1);
int __cdecl graphics_1001CC70(int a1);
int __cdecl sub_1001CCA0(int a1);
int __cdecl sub_1001CD60(int a1);
int __cdecl sub_1001CD80(int a1);
unsigned int *__cdecl graphics_1001CDA0(unsigned int *a1);
unsigned int *__cdecl graphics_1001CE70(unsigned int *a1);
_DWORD *__cdecl sub_1001CF30(_DWORD *a1);
unsigned __int8 *__cdecl graphics_1001CFF0(unsigned __int8 *a1);
void graphics_1001D3A0();
int *__cdecl graphics_1001D420(int a1, int a2, int a3);
int *__cdecl sub_1001D810(int a1);
float *__cdecl sub_1001D940(int a1, int a2, float a3);
int *__cdecl sub_1001D9F0(int a1);
int *__cdecl sub_1001DB30(int a1);
int *__cdecl sub_1001DC70(int a1);
int *__cdecl sub_1001DDB0(int a1);
int *__cdecl sub_1001DEF0(int a1);
int *__cdecl sub_1001E030(int a1);
unsigned __int8 *__cdecl graphics_1001E170(unsigned __int8 *a1);
int __cdecl sub_1001E4B0(int a1, int a2);
int __cdecl graphics_1001E4E0(int a1, int a2, int a3);
int __cdecl graphics_1001E5D0(int a1, int a2, int a3);
int __cdecl sub_1001E790(int a1);
char sub_1001E7C0();
unsigned __int8 *__cdecl graphics_1001E980(unsigned __int8 *a1);
float *__cdecl graphics_1001EC20(int a1, int a2, int a3);
float *__cdecl graphics_1001EEB0(int a1, int a2, int a3, int a4, int a5, int a6);
unsigned __int8 *__cdecl graphics_1001F2B0(unsigned __int8 *a1);
float *__cdecl graphics_1001F550(int a1, int a2, int a3);
float *__cdecl graphics_1001F7E0(int a1, int a2, int a3, int a4, int a5, int a6);
unsigned __int8 *__cdecl graphics_1001FBE0(unsigned __int8 *a1);
int *__cdecl graphics_1001FF90(int a1, int a2, int a3);
unsigned __int8 *__cdecl graphics_10020380(unsigned __int8 *a1);
unsigned __int8 *__cdecl graphics_100205F0(unsigned __int8 *a1);
unsigned __int8 *__cdecl graphics_10020860(unsigned __int8 *a1);
int __cdecl graphics_10020BA0(int a1, int a2, int a3);
int __cdecl sub_10020D60(_DWORD *a1);
int sub_10020DA0();
int *__cdecl sub_10020DC0(int *a1);
int __cdecl sub_10020EF0(int a1);
int __cdecl sub_10020F20(int a1);
_DWORD *__cdecl sub_10020F50(_DWORD *a1);
int __cdecl sub_10020F80(int a1);
char __cdecl sub_10020FA0(int a1);
_DWORD *__cdecl sub_10021510(_DWORD *a1);
int *__cdecl graphics_10021560(unsigned int a1, unsigned int a2, int a3, int a4);
_DWORD *__cdecl sub_10021B80(_DWORD *a1);
int *__cdecl sub_10021BD0(int *a1);
_DWORD *__cdecl sub_10021E80(_DWORD *a1);
int __cdecl sub_100222D0(int a1, float *a2, int a3, int a4, int a5);
int __cdecl sub_10022350(float *a1, float *a2);
_DWORD *__cdecl sub_10022480(_DWORD *a1);
_DWORD *__cdecl sub_100228F0(_DWORD *a1);
int __cdecl sub_10022DC0(float *a1);
int __cdecl sub_10022E70(float *a1, int a2);
_DWORD *__cdecl sub_100231D0(_DWORD *a1);
int __cdecl sub_100236A0(float *a1, int a2);
_DWORD *__cdecl sub_10023A10(_DWORD *a1);
_DWORD *__cdecl sub_10023CC0(_DWORD *a1);
int __cdecl sub_10024150(int a1);
int __cdecl sub_10024240(int a1);
int __cdecl sub_10024260(int a1);
_DWORD *__cdecl sub_100242F0(_DWORD *a1);
int __cdecl sub_100243D0(int a1);
HRESULT sub_100243E0();
_DWORD *sub_10024460();
HRESULT sub_100244E0();
int __cdecl sub_10024550(int); // weak
int sub_10024850();
int __cdecl sub_10024A90(int a1);
void *__cdecl sub_10024AB0(int a1, int a2);
int __cdecl sub_10024AE0(int a1);
int sub_10024B60();
int sub_10024BB0();
int __cdecl car_10024BF0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __cdecl math_pow2ExponentToAdd(DWORD *outExponent, int a2, int a3); // idb
int __cdecl math_10025350(int a1, int a2, int a3, float a4, int a5, int a6);
char __cdecl math_100254F0(int a1, int a2, int a3, int a4, int a5, float a6, float a7);
// int __cdecl _RTC_NumErrors();
int __cdecl sub_10025800(int a1, int a2);
char *__cdecl graphics_10025830(_WORD *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
char __cdecl sub_10025AB0(_DWORD *a1,
                          int a2,
                          int a3,
                          int a4,
                          int a5,
                          int a6,
                          int a7,
                          int a8,
                          int a9,
                          int a10,
                          _DWORD *a11,
                          char a12,
                          int a13,
                          unsigned __int8 a14,
                          unsigned __int8 a15,
                          unsigned __int8 a16,
                          char a17,
                          unsigned __int8 a18,
                          unsigned __int8 a19,
                          unsigned __int8 a20,
                          char a21,
                          int a22);
unsigned int __cdecl sub_10027B10(unsigned __int16 a1);
int __cdecl sub_10027B90(int a1, int a2, int a3);
int __cdecl sub_10027C00(int a1);
int __cdecl tex_sub_10027C60(unsigned __int8 *a1,
                             int a2,
                             int a3,
                             int a4,
                             int a5,
                             int a6,
                             int a7,
                             int a8,
                             int a9,
                             int a10,
                             int a11,
                             int a12,
                             int a13,
                             int a14,
                             int a15);
int __cdecl sub_10028200(_DWORD *a1, int a2, int a3);
int __cdecl graphics_TIDFromTextureAppend(_DWORD *a1, int a2); // idb
int __cdecl sub_100284A0(_DWORD *a1, int a2);
int __cdecl sub_10028630(int a1);
int *__cdecl sub_10028720(int *a1, int *a2, int a3, int a4);
unsigned __int8 *__cdecl sub_10028860(#506 * a1); // idb
int __cdecl sub_10028A10(int a1, int *a2);
int __cdecl sub_10028B20(int, float, int); // idb
int __cdecl graphics_10028BF0(int a1,
                              int a2,
                              int a3,
                              int a4,
                              int a5,
                              int a6,
                              int a7,
                              int a8,
                              int a9,
                              int a10,
                              int a11,
                              int a12,
                              int a13,
                              int a14);
int __cdecl sub_10028C70(int a1);
void *__cdecl graphics_10028CA0(int a1);
BOOL __cdecl sub_10028E00(LONG a1, char *a2);
unsigned __int8 *__cdecl sub_10028E70(int a1, _DWORD *a2);
int __cdecl sub_10029060(int); // weak
int *__cdecl sub_100290A0(int *a1, int *a2, int a3);
void __cdecl sub_100290E0(_DWORD *a1);
int __cdecl sub_10029410(int a1);
int sub_10029470();
int __cdecl sub_10029E10(int a1, int a2, int a3);
int __cdecl sub_10029E60(int a1);
_DWORD *__cdecl sub_10029E80(_DWORD *a1);
_DWORD *__cdecl sub_10029EB0(_DWORD *a1);
void __cdecl sub_10029F10(_DWORD *a1);
void sub_10029F80();
void __cdecl sub_10029FA0(_DWORD *a1);
int sub_1002A000();
int sub_1002A020();
int __cdecl sub_1002A040(_DWORD *a1);
int __cdecl sub_1002A140(_DWORD *a1);
unsigned int __cdecl sub_1002A1A0(_DWORD *a1);
int __cdecl sub_1002A210(_DWORD *a1);
int __cdecl sub_1002A250(int a1);
void __cdecl sub_1002A280(int a1, int a2);
int __cdecl sub_1002A350(int a1, unsigned __int8 *a2, int a3);
int __cdecl sub_1002A430(int, int); // weak
int sub_1002A5A0();
HANDLE sub_1002A640();
int sub_1002A740();
void sub_1002A7A0();
HMODULE __cdecl pm_loadEARDLL(int useEarpdsDll); // idb
int __cdecl pm_setupEAR(HWND hWnd);              // idb
int sub_1002AEA0();
int sub_1002AEC0();
int sub_1002AED0();
void sub_1002AEF0();
void __cdecl sub_1002AF10(int a1, float a2);
void __cdecl sub_1002B130(float a1, float a2);
void __cdecl sub_1002B1C0(float a1, float a2);
void __cdecl sub_1002B220(float a1, float a2);
int __cdecl sub_1002B280(int a1);
BOOL sub_1002B2A0();
BOOL sub_1002B2D0();
BOOL sub_1002B300();
void sub_1002B340();
__int64 sub_1002B670();
__int64 __cdecl sub_1002B920(float a1);
void __cdecl qmemcpy32(void *a1, const void *a2);
void sub_1002B950();
int __cdecl sub_1002B970(int *a1);
int __cdecl sub_1002B9A0(int a1, int a2);
int sub_1002B9C0();
int __cdecl sub_1002B9D0(int a1);
void __cdecl sub_1002B9E0(_BYTE *a1, int a2);
_BYTE *__cdecl sub_1002BA00(_BYTE *a1, int a2);
_BYTE *__cdecl sub_1002BA20(_BYTE *a1);
_BYTE *__cdecl sub_1002BA60(_BYTE *a1, int a2);
int __cdecl sub_1002BA80(int a1, int a2);
int __cdecl sub_1002BAA0(int a1);
void __cdecl sub_1002BC90(_BYTE *a1);
void __cdecl sub_1002BD50(__int16 **a1, int a2);
void __cdecl sub_1002BDD0(_BYTE *a1, int a2);
void *__cdecl sub_1002BE30(__int16 *a1, int a2);
int __cdecl sub_1002BF00(int a1, int a2, int a3);
int __cdecl sub_1002BF40(int a1);
int __cdecl sub_1002BF80(int a1);
void __cdecl sub_1002C150(int a1);
_BYTE *__cdecl sub_1002C190(_BYTE *a1);
_BYTE *__cdecl sub_1002C1B0(_BYTE *a1);
int __cdecl sub_1002C1F0(int a1);
_DWORD *__thiscall meth_1002C210(void *this);
int sub_1002C290();
// LARGE_INTEGER *unknown_libname_3();
// void __cdecl unknown_libname_4(); idb
int __thiscall meth_1002C2D0(void *this);
void __thiscall meth_1002C320(void *this);
int sub_1002C390();
char (*sub_1002C3C0())[8];
char (*sub_1002C410())[8];
void __cdecl sub_1002C430(int a1);
int sub_1002C4A0();
unsigned int sub_1002C4D0();
// int __usercall sub_1002C500@<eax>(double a1@<st0>);
int __cdecl sub_1002F130(int a1);
int __cdecl sub_1002F230(int a1);
int sub_1002F2A0();
int sub_1002F320();
int sub_1002F460();
int sub_1002F4C0();
void sub_1002F690();
int sub_1002F8F0();
int __cdecl sub_1002F900(unsigned int *a1,
                         int a2,
                         int a3,
                         int a4,
                         int a5,
                         int a6,
                         int a7,
                         int a8,
                         int a9,
                         int a10,
                         int a11,
                         int a12,
                         int a13,
                         int a14,
                         int a15,
                         int a16,
                         int a17);
int __cdecl sub_1002FAC0(int a1);
int __cdecl sub_1002FAF0(int a1);
_DWORD *__cdecl sub_1002FB20(unsigned int a1, int a2);
void __cdecl GetDirectXVersion(_DWORD *dxVersion, _DWORD *out_b); // idb
double __cdecl sub_100305B0(double *a1);
long double __cdecl sub_100305F0(double *a1);
double *__cdecl sub_10030600(double *a1);
double __cdecl sub_10030640(double *a1, double *a2);
double *__cdecl sub_10030670(double *a1, double *a2, double *a3);
float *__cdecl sub_100306C0(float *a1, float *a2, float *a3);
_DWORD *__cdecl sub_100307A0(float *a1, _DWORD *a2); // idb
_DWORD *__cdecl sub_100307D0(_DWORD *a1);
float *__cdecl maybe_guFrustumF(
    float *a1, float a2, float a3, float a4, float a5, float a6, float a7);
WORD *__cdecl sub_10030930(float *a1, WORD *a2, float a3, float a4, float a5, float a7);
int __cdecl sub_100309A0(int, float, float, float, float, float, float, float, float, float); // idb
__int64 __cdecl sub_10030B50(int a1,
                             int a2,
                             int a3,
                             float a4,
                             float a5,
                             float a6,
                             float a7,
                             float a8,
                             float a9,
                             float a10,
                             float a11,
                             float a12,
                             float a13,
                             float a14,
                             float a15,
                             float a16,
                             float a17,
                             float a18,
                             int a19,
                             int a20);
int __cdecl sub_10030DE0(double); // idb
int __cdecl sub_10030E20(
    int, int, float, float, float, float, float, float, float, float, float); // idb
float *__cdecl sub_10030EE0(int a1, float a2, float a3, float a4, float a5);
int __cdecl sub_100310F0(int, float, int, int); // idb
_DWORD *__cdecl sub_10031140(_DWORD *a1, int a2, int a3, int a4);
char *__thiscall sub_10031190(unk06594 *this);
int sub_10031227();
int sub_10031282();
int sub_1003128C();
double __cdecl sub_100312A7(float *a1);
void sub_10031342();
int __cdecl sub_10031481(int a1, int a2);
void sub_100314DE();
void sub_100314E3();
_DWORD *__cdecl sub_100314E8(__int16 a1, __int16 a2, int a3);
_DWORD *__cdecl sub_10031688(int a1, int a2, int a3, int a4, __int16 a5, __int16 a6, int a7);
char sub_10031866();
double __cdecl sub_10031D3F(float *a1);
int sub_10031DCF();
void __cdecl sub_100322E6(_DWORD *a1, void *a2);
void __cdecl sub_10032873(_DWORD *a1);
int __cdecl sub_1003289F(int a1, int a2, int a3, int a4);
int __cdecl sub_10032A42(int a1, int a2, int a3, int a4, int a5);
int __cdecl sub_10032C38(int a1, int a2, int a3, int a4, int a5);
int sub_10032DF2();
void sub_10032E58();
int __cdecl sub_10032E5D(__int16 a1, __int16 a2, __int16 a3, __int16 a4);
void sub_1003348E();
int sub_10033498();
int __thiscall sub_10033780(unk06594 *this);
int __thiscall sub_100337AE(unk06594 *this);
int __thiscall meth_100337E9(void *this);
int sub_10033838();
int __cdecl sub_10033CB1(int, float, float, float, float);                    // idb
_DWORD *__cdecl sub_10033E83(int a1, float a2, float a3, float a4, float a5); // idb
int __cdecl sub_1003407D(float a1, float a2);
int __cdecl sub_100341B3(_DWORD *a1, int a2);
int __cdecl sub_1003445A(int a1);
int sub_100344D7();
void __thiscall __noreturn meth_1003467F(void *this);
void __thiscall __noreturn meth_100346E9(void *this);
void __cdecl sub_100347BA(int a1, float a2);
HANDLE __thiscall meth_CreateMutexWrapper(void *this);
void sub_10034A85();
// int _cfltcvt_init();
// int sub_10034AD5();
void sub_10034C32();
BOOL __cdecl sub_10034C51(int (*a1)(void));
int __cdecl sub_10034C66(int callback); // idb
int sub_10034C73();
void sub_10034C7E();
void sub_10034C83();
_DWORD *__cdecl sub_10035060(_DWORD *a1, unsigned int a2, unsigned int a3, int a4);
// _WORD *__usercall sub_100350EE@<eax>(_WORD *result@<eax>, int a2, __int16 a3, __int16 a4, __int16 a5);
void sub_1003551B();
int __cdecl LoadCar(int a1, int carIndex, int a3); // idb
// int unknown_libname_5();
int __cdecl sub_10035585(int a1, __int16 a2, int a3);
// int __cdecl _ismbbkprint(unsigned int C);
void __cdecl sub_1003563A(int a1);
// int unknown_libname_6();
void __noreturn sub_10035BA7();
void __cdecl __noreturn sub_10035BBA(int a1);
CarPart *sub_10035BD1();
_DWORD *__cdecl sub_10035C70(_DWORD *a1, _DWORD *a2);
_BYTE *__thiscall meth_10035CA0(_BYTE *this, char a2, char a3, char a4);
void __thiscall meth_10035CE0(int *this);
int __thiscall meth_10035FA0(int *this, int a2);
int __thiscall meth_10035FC0(_DWORD *this);
char *__thiscall meth_10035FE0(char *this);
void sub_10036020();
int __cdecl sub_10036030(HANDLE a1);
void __cdecl sub_100360F0(int a1, int a2, int a3, void *a4);
int __cdecl sub_10036BD0(int a1, int a2);
__int16 __cdecl sub_10036C00(int a1);
int __cdecl sub_10037030(int a1);
int __cdecl sub_10037070(int a1);
int __cdecl sub_100370D0(char *outBuffer);                        // idb
int __cdecl ReadCarFileIntoBuffer(char *outBuffer, int carIndex); // idb
void __cdecl ReadFilenameToBuffer(void *outBuffer, char *filename, int elementCount);
int __cdecl sub_10037930(int a1, _DWORD *a2, _DWORD *a3);
int __cdecl ParseHNDFile(char *hndFilepath);       // idb
int __cdecl ParseHNDFileFromIndex(int trackIndex); // idb
int __cdecl LoadTrack(int trackIndex);
int __cdecl sub_10037E10(_DWORD *a1);
int __cdecl sub_10037FA0(_DWORD *a1);
int __cdecl sub_10037FE0(int a1);
int __cdecl sub_10038010(_BYTE *a1);
int __cdecl sub_10038250(int a1);
unsigned __int16 __cdecl sub_100382A0(char *a1);
char __cdecl sub_10038380(_BYTE *a1);
_BYTE *__cdecl sub_100383C0(_BYTE *a1);
int __cdecl sub_10038410(int a1);
void __cdecl sub_10038450(int a1, int a2);
int __cdecl ParseTrackHeader(int outBuffer, CHK_File *fp);
int __cdecl sub_10038B20(_BYTE *a1);
HRESULT __cdecl SetupDirectPlayPlayer(#503 * u1); // idb
int sub_10038E80();
// Pod *unknown_libname_7();
// void __cdecl unknown_libname_8(); idb
int sub_10038EC0();
void __cdecl __noreturn cleanUpAndExitWithCode(int Code); // idb
int sub_10039000();                                       // weak
void __thiscall meth_10039020(int this);
int __thiscall meth_10039200(int this);
int sub_100397C0();
void __thiscall meth_10039F20(int this);
void sub_1003A200();
int sub_1003A340();
_WORD *sub_1003A4D0();
int sub_1003A530();
_WORD *__cdecl sub_1003A610(_WORD *a1);
int __cdecl sub_1003A660(int a1, int a2);
void __cdecl sub_1003A6B0(float a1, float a2, float a3, float a4);
BOOL __cdecl sub_1003A910(int a1, int a2);
BOOL __cdecl sub_1003A950(float a1, float a2);
int sub_1003A990();
float *__cdecl sub_1003AC30(float *a1, float *a2, float *a3);
double __cdecl sub_1003AC90(float *a1, float *a2);
float *__cdecl sub_1003ACC0(float *a1, float *a2);
int __cdecl sub_1003ACE0(int, int, float); // idb
int __cdecl sub_1003AD10(int, float);      // idb
int __cdecl sub_1003AD40(int, int, float); // idb
int __cdecl sub_1003AD70(int, float);      // idb
float *__cdecl sub_1003ADA0(float *a1, float *a2, float *a3);
void __cdecl sub_1003AE50(float *a1);
float *__cdecl sub_1003AEE0(float *a1, float *a2, float *a3);
float *__cdecl sub_1003AF10(float *a1, float *a2);
float *__cdecl sub_1003AF40(float *a1, float *a2, float *a3);
float *__cdecl sub_1003AF70(float *a1, float *a2);
int __cdecl sub_1003AFA0(int, int, int, float); // idb
int __cdecl sub_1003AFE0(int, int, int, float); // idb
int __cdecl sub_1003B020(int, int, float);      // idb
float *__cdecl sub_1003B050(float *a1, float *a2, float *a3);
_DWORD *__cdecl sub_1003B090(_DWORD *a1);
double __cdecl sub_1003B0A0(float *a1, float *a2);
double __cdecl sub_1003B0E0(float *a1, float *a2);
double __cdecl sub_1003B130(float *a1, float *a2);
double __cdecl sub_1003B170(float *a1);
double __cdecl sub_1003B1C0(float *a1);
float *__cdecl sub_1003B1F0(float *a1, float *a2, float *a3);
float *__cdecl sub_1003B2A0(float *a1, float *a2, float *a3);
float *__cdecl sub_1003B340(float *a1, float *a2, float *a3);
float *__cdecl sub_1003B3F0(float *a1, float *a2, float *a3);
int __cdecl sub_1003B470(char *a1, float *a2, float *a3);
int __cdecl sub_1003B4F0(int a1, float *a2);
double __cdecl sub_1003B7B0(float a1, float a2);
BOOL __cdecl sub_1003B940(float *a1, float *a2, float *a3, float *a4, int a5);
int __cdecl sub_1003BA70(float *a1, float *a2, float *a3, float *a4);
int __cdecl sub_1003BC90(float *a1, float *a2, float *a3, float *a4);
int __cdecl sub_1003BD40(int a1);
int sub_1003BD50();
int sub_1003BD80();
int sub_1003BF60();
int sub_1003BFD0();
HANDLE np_sub_1003C020();
int sub_1003C150();
int sub_1003C1E0();
int sub_1003C230();
int sub_1003C260();
int __stdcall sub_1003C3A0(HWND a1, int a2, int a3, char *pMem);                      // idb
int __stdcall sub_1003C430(IID *iid, int a2, SIZE_T dwBytes, int a4, int a5, int a6); // idb
HRESULT __cdecl sub_1003C520(LPVOID *a1);
int sub_1003C550();
int __cdecl sub_1003C5C0(int *a1, int a2, int *a3);
int __cdecl sub_1003C740(SIZE_T dwBytes, int, int, int); // idb
int sub_1003C9B0();
int __cdecl sub_1003C9F0(int a1);
int *sub_1003CA70();
int __stdcall sub_1003CAA0(int a1, int a2, int a3, __int16 a4, int a5);
int __cdecl sub_1003CB10(int a1, int a2, int a3, int a4);
int __stdcall sub_1003CB90(int a1, int a2, _DWORD *a3, int a4);
int __cdecl sub_1003CC70(int a1);
int sub_1003CDA0();
int sub_1003CE80();
int __cdecl sub_1003CFC0(_DWORD *a1);
void sub_1003CFE0();
int __cdecl sub_1003D030(_DWORD *a1);
int sub_1003D070();
int __cdecl sub_1003D0B0(SIZE_T dwBytes, LPDWORD a2); // idb
unsigned int __cdecl sub_1003D130(_DWORD *a1);
int __cdecl sub_1003D180(SIZE_T dwBytes, int, int); // idb
int __cdecl sub_1003D210(HWND hWnd, int, int);      // idb
SIZE_T __cdecl sub_1003D3A0(SIZE_T dwBytes, int a2, LPCSTR lpString, int a4, int a5);
int __cdecl sub_1003D480(_DWORD *a1, SIZE_T *a2);
int __cdecl sub_1003D7B0(_DWORD *a1);
int __stdcall sub_1003D850(int, int, LPCSTR lpString, int); // idb
int __cdecl sub_1003D8A0(int a1, int a2);
int __cdecl sub_1003D950(int *a1, int a2);
int __cdecl sub_1003D9A0(int *a1, int a2);
int __cdecl sub_1003D9F0(int *a1);
int __cdecl sub_1003DA40(int *a1, int a2);
int __cdecl sub_1003DA90(int *a1, int a2);
int sub_1003DAE0();
int __cdecl sub_1003DB00(int *a1, int a2);
int __cdecl sub_1003DB50(_DWORD *a1, int a2, int a3);
int __cdecl showMessageBox(LPCSTR format, int errno); // idb
char *__cdecl errorString(int a1);
int __cdecl sub_1003DFC0();
int sub_1003E020();
int sub_1003E050();
// int unknown_libname_9();
BOOL sub_1003E080();
BOOL sub_1003E0E0();
BOOL __cdecl IsBossRallyCDROM(int driveNumber); // idb
int sub_1003E1D0();
int sub_1003E220();
void __cdecl sub_1003E260(int a1);
unk00334 *__stdcall sub_1003E2C0();
int sub_1003E310();
int sub_1003E3A0();
int sub_1003E510();
int __cdecl sub_1003E680();
int __cdecl sub_1003E7A0(int a1);
int __cdecl sub_1003E840(int a1);
int sub_1003E8B0();            // weak
int sub_1003E8C0();            // weak
int __cdecl sub_1003E8D0(int); // weak
int __cdecl sub_1003E920(int); // weak
int __cdecl sub_1003E950(int a1);
int __cdecl sub_1003E980(float *a1);
int __cdecl sub_1003E9E0(float *a1);
int __cdecl sub_1003EA40(int a1);
int __cdecl sub_1003EA90(int); // weak
int __cdecl sub_1003EAE0(int a1);
int __cdecl sub_1003EB10(int a1);
int __cdecl sub_1003EB60(int); // weak
int __cdecl sub_1003EB90(int a1);
int __cdecl sub_1003EBC0(int); // weak
int __cdecl sub_1003EBE0(int); // weak
int __cdecl sub_1003EC30(int a1);
int __cdecl sub_1003EC80(int a1);
int __cdecl s_unk1E214_1003ECB0(unk1E214 *a1); // idb
int __cdecl sub_1003ED10(int a1);
int __cdecl s_unk1E214_1003ED40(unk1E214 *a1); // idb
int __cdecl sub_1003EDF0(int a1);
int __cdecl sub_1003EE20(int a1);
int __cdecl sub_1003EE50(int a1, __int16 a2);
int __cdecl sub_1003EEF0(int a1);
int __cdecl sub_1003EF60(int a1);
int __cdecl sub_1003EF90(int a1);
int __cdecl sub_1003F020(int a1);
int __cdecl sub_1003F050(int a1);
int __cdecl sub_1003F0B0(int a1);
int __cdecl sub_1003F110(int); // weak
int __cdecl sub_1003F170(int a1);
int __cdecl sub_1003F210(int a1);
int __cdecl sub_1003F280(int a1);
int __cdecl sub_1003F2B0(int a1);
int __cdecl sub_1003F320(int a1);
int __cdecl sub_1003F440(int); // weak
int __cdecl sub_1003F540(int); // weak
int __cdecl sub_1003F5E0(int a1);
int __cdecl sub_1003F680(int a1);
int __cdecl sub_1003F720(int); // weak
int __cdecl sub_1003F760(int); // weak
int __cdecl sub_1003F7F0(int); // weak
int __cdecl sub_1003F860(int); // weak
int __cdecl sub_1003F8D0(int a1);
int __cdecl sub_1003F990(int); // weak
int __cdecl sub_1003FA00(int); // weak
int __cdecl sub_1003FC40(int a1);
int __cdecl sub_1003FCB0(int a1);
int __cdecl sub_1003FD30(int a1);
int __cdecl sub_1003FDA0(int a1);
int __cdecl sub_1003FE10(int a1);
int __cdecl sub_1003FE80(int); // weak
int __cdecl sub_1003FFD0(int a1);
int __cdecl sub_10040040(int a1, int a2);
int __cdecl sub_100400E0(int a1);
int __cdecl sub_10040330(int a1);
int sub_10040450();
int sub_10040680();
int sub_100406C0();
int __cdecl sub_10040730(int); // weak
int __cdecl sub_100407A0(int a1);
int __cdecl sub_100407E0(int); // weak
int __cdecl sub_10040870(int); // weak
int __cdecl sub_10040890(int); // weak
int __cdecl sub_100408B0(int); // weak
int __cdecl sub_100408D0(int a1);
int __cdecl sub_10040930(int a1);
int __cdecl sub_10040950(int a1);
int __cdecl sub_10040990(int a1);
int __cdecl sub_100409B0(int a1);
int __cdecl sub_100409D0(int a1);
int sub_100409F0(); // weak
int sub_10040A20(); // weak
int __cdecl sub_10040A50(int a1);
int __cdecl sub_10040AC0(int a1);
int __cdecl sub_10040B30(int a1);
int __cdecl sub_10040C00(int a1);
int __cdecl sub_10040D70(int a1);
int __cdecl sub_10040EE0(int a1);
int __cdecl sub_10041040(int a1);
int __cdecl sub_10041180(int a1);
int sub_100412C0();
int sub_100412D0();
int sub_100412E0();
int sub_100412F0();
int __cdecl sub_10041300(int); // weak
int __cdecl sub_100413B0(int); // weak
int __cdecl sub_100414B0(int a1);
int __cdecl sub_100415A0(int a1);
int __cdecl sub_10041670(int a1);
int __cdecl sub_10041710(int a1);
int __cdecl sub_100417B0(int a1);
int __cdecl sub_10041870(int a1);
int __cdecl sub_10041890(int a1);
int __cdecl sub_100418D0(int a1);
int __cdecl sub_100418F0(int a1);
int sub_10041930();
int __cdecl sub_10041970(int a1);
void __cdecl sub_100419D0(LPCSTR a1);
int __cdecl sub_10041A00(int a1);
int __cdecl sub_10041AC0(unk1E214 *a1); // idb
void sub_10041B50();
FILE *sub_10041BD0();
int __cdecl sub_10041DF0(char *a1, int a2); // idb
int __cdecl sub_10042020(int a1, int *a2);
int __cdecl sub_10042170(int a1, int *a2);
int __cdecl sub_10042410(unk1E214 *a1);     // idb
int __cdecl sub_100424D0(unk1E214 *a1);     // idb
int __cdecl sub_10042560(char *a1, int a2); // idb
int __cdecl sub_10042740(int a1, int *a2);
int __cdecl sub_10042880(int a1, int *a2);
int __cdecl sub_10042A90(int a1);
int __cdecl sub_10042AC0(int a1);
int __thiscall meth_unk1A5E0_3(unk06594 *this);
int __cdecl sub_10042B00(int a1);
int sub_10042B30(); // weak
int sub_10042C80(); // weak
int sub_10042CF0();
int sub_10042D60();
int sub_10042DC0(); // weak
int sub_10042E20(); // weak
int sub_10042E80(); // weak
int sub_10042EE0();
int sub_100430B0();
int sub_10043180();
int __stdcall sub_10043260();
unk000C8 *sub_10043330();
int sub_10043400();
unk000C8 *sub_100434C0();
int sub_10043590();
int sub_100435F0();
int sub_10043650();
int sub_100436B0();
void __cdecl __noreturn sub_10043710(int a1);
int __cdecl sub_10043760(int); // weak
int sub_100437B0();            // weak
int __cdecl sub_100437D0(int a1);
int __cdecl sub_10043810(LPCVOID pMem); // idb
int sub_10043A00();
int __stdcall sub_10043BF0();
int __stdcall sub_10043CD0();
int sub_10043DA0();
unk000C8 *sub_10043E70();
int __cdecl sub_10043F50(int a1);
int __cdecl sub_10043FA0(int); // weak
int __cdecl sub_10043FC0(int a1);
int __cdecl sub_10044010();
int __cdecl sub_10044030(int a1);
int __cdecl sub_10044050();
int __cdecl sub_10044070(int a1);
int __cdecl sub_10044090();
int __cdecl sub_100440B0(int a1);
int sub_100440D0();
int __thiscall meth_100441A0(void *this);
int sub_10044280();
int sub_100443E0();
int __cdecl sub_100444C0(int a1);
int sub_10044540();
int sub_10044600();
unk000C8 *__thiscall meth_unk000C8_100446D0(unk000C8 *this); // idb
int sub_100447D0();
int __cdecl sub_10044970(int); // weak
int __cdecl sub_10044A30(int); // weak
int __cdecl sub_10044AE0(int a1);
int __cdecl sub_10044B40(int a1);
int sub_10044B90();
int __cdecl sub_10044C70(int a1);
int __cdecl sub_10044CB0(int a1);
int sub_10044D00();
int __cdecl sub_10044DE0(int a1);
unk000C8 *sub_10044E20();
int __cdecl sub_10044F00(int a1);
int __thiscall meth_10044F50(void *this);
int __cdecl sub_10045050();
int __cdecl sub_10045090();
int __cdecl sub_100450C0();
int __cdecl sub_100450F0(int a1);
int sub_10045110();
int __stdcall sub_100451E0();
int __stdcall sub_100452C0();
int __stdcall sub_10045390();
int sub_10045460();
int sub_10045520();
int sub_100455E0();
int sub_100456B0();
int sub_10045780();
int sub_100457A0();
int sub_100457C0();
int sub_100457E0();
int sub_10045800();
int sub_10045820();
int sub_10045840();
int sub_10045860();
int sub_10045880();
int sub_100458A0();
int sub_100458C0();
int sub_100458E0();
int __thiscall meth_10045900(void *this);
BOOL __stdcall IsBossRallyCDROMPresent();
int sub_10045AA0();
unk000C8 *sub_10045AF0();
int sub_10045BC0();
unk000C8 *sub_10045C90();
int sub_10045DC0();
int sub_10045EA0();
unk000C8 *sub_10045F70();
int __stdcall sub_100460A0();
unk000C8 *sub_10046170();
int sub_10046260();
int sub_10046380();
int __cdecl sub_100463C0(unk1E214 *a1);        // idb
int __cdecl sub_10046400(unk1E214 *a1);        // idb
int __cdecl sub_10046450(unk1E214 *a1);        // idb
int __cdecl sub_100464A0(unk1E214 *a1);        // idb
int __cdecl sub_100464E0(unk1E214 *a1);        // idb
int __cdecl sub_10046520(unk1E214 *a1);        // idb
int __cdecl sub_10046560(unk1E214 *a1);        // idb
int __cdecl sub_100465A0(unk1E214 *a1);        // idb
int __cdecl sub_100465E0(unk1E214 *a1);        // idb
int __cdecl s_unk1E214_10046620(unk1E214 *a1); // idb
int __cdecl s_unk1E214_10046670(unk1E214 *a1); // idb
int __cdecl sub_100466C0(unk1E214 *a1);        // idb
int __cdecl sub_10046710(unk1E214 *a1);        // idb
int __cdecl sub_10046750(unk1E214 *a1);        // idb
int __cdecl sub_10046790(unk1E214 *a1);        // idb
int __cdecl sub_10046830(unk1E214 *a1);        // idb
int __cdecl sub_10046870(unk1E214 *a1);        // idb
int __cdecl sub_10046910(unk1E214 *a1);        // idb
int __cdecl sub_10046950(unk1E214 *a1);        // idb
int __cdecl sub_100469F0(unk1E214 *a1);        // idb
int __cdecl sub_10046A30(unk1E214 *a1);        // idb
int __cdecl sub_10046AD0(unk1E214 *a1);        // idb
int __cdecl sub_10046B10(unk1E214 *a1);        // idb
int __cdecl sub_10046BB0(unk1E214 *a1);        // idb
int __cdecl sub_10046BF0(unk1E214 *a1);        // idb
int __cdecl sub_10046C90(unk1E214 *a1);        // idb
int __cdecl sub_10046CD0(unk1E214 *a1);        // idb
int __cdecl sub_10046D20(unk1E214 *a1);        // idb
int __cdecl sub_10046D70(unk1E214 *a1);        // idb
int __cdecl sub_10046DC0(unk1E214 *a1);        // idb
int __cdecl sub_10046E10(unk1E214 *a1);        // idb
int __cdecl sub_10046EB0(unk1E214 *a1);        // idb
int sub_10046F50();
int __cdecl sub_10046F60(unk1E214 *a1); // idb
int sub_10046FC0();
int __cdecl sub_10046FD0(unk1E214 *a1); // idb
int sub_10047050();
int __cdecl sub_10047060(unk1E214 *a1); // idb
int __cdecl sub_100470A0(unk1E214 *a1); // idb
int __cdecl sub_100470E0(unk1E214 *a1); // idb
int __cdecl sub_10047120(unk1E214 *a1); // idb
int __cdecl sub_100471B0(unk1E214 *a1); // idb
int __cdecl sub_100471F0(unk1E214 *a1);
int __cdecl sub_10047210(int a1);
int __cdecl sub_10047250(unk1E214 *a1); // idb
int __cdecl sub_10047290(unk1E214 *a1); // idb
int sub_10047340();
int __cdecl sub_10047360(int a1);
int __cdecl sub_100474B0(int a1);
BOOL sub_100474D0();
BOOL sub_10047500();
BOOL sub_10047530();
BOOL sub_10047560();
BOOL sub_10047590();
BOOL sub_100475C0();
int __cdecl sub_100475F0(int a1);
int sub_10047610();
// int __usercall sub_10047660@<eax>(int result@<eax>);
unk1E214 *__thiscall meth_unk1E214_init(unk1E214 *this);
unk1E214 *__thiscall meth_1E214_0(unk1E214 *this, char a2); // idb
void __thiscall meth_unk1E214_100478C0(unk1E214 *this);     // idb
int __thiscall meth_unk1E214_7(unk1E214 *this);             // idb
int __thiscall meth_unk1E214_6(unk1E214 *this, int *a2);    // idb
int __thiscall meth_unk1E214_5(unk1E214 *this, int a2, int a3);
int __thiscall meth_unk1E214_4(unk1E214 *this);             // idb
int __thiscall meth_unk1E214_8(unk1E214 *this);             // idb
int __thiscall meth_unk1E214_9(unk1E214 *this, int a2);     // idb
double __thiscall meth_unk1E214_10(unk1E214 *this, int a2); // idb
int __thiscall meth_unk1E214_11(unk1E214 *this);            // idb
int __thiscall meth_unk1E214_12(unk1E214 *this);            // idb
__int16 __thiscall meth_unk1E214_13(int this, const char *a2, int a3, char a4, _DWORD *a5);
__int16 __thiscall meth_unk1E214_14(
    unk1E214 *this, int a2, int flags, int a4, int a5, int a6, int a7, int a8, __int16 a9); // idb
int __thiscall meth_unk1E214_2(unk1E214 *this);                                             // idb
int __thiscall meth_unk1E214_15(unk1E214 *this);                                            // idb
int __thiscall meth_unk1E214_1(unk1E214 *this);                                             // idb
int __thiscall meth_unk1E214_3(unk1E214 *this);                                             // idb
unk00348 *__thiscall meth_unk00348_10048470(unk00348 *this);
unk00348 *__thiscall meth_unk00348_0(unk00348 *this, char a2); // idb
void __thiscall meth_unk00348_100484E0(unk00348 *this);        // idb
int __thiscall meth_unk00348_100484F0(unk00348 *this);         // idb
int __thiscall meth_unk00348_1(unk00348 *this);                // idb
unk000C8 *__thiscall meth_unk000C8_10048710(unk000C8 *this);
void *__thiscall meth_unk000C8_0(void *Block, char a2);
int __thiscall meth_unk000C8_10048870(unk000C8 *this); // idb
int __thiscall meth_unk000C8_1(unk000C8 *this);        // idb
int __thiscall meth_unk000C8_2(unk000C8 *this);        // idb
HRESULT __thiscall meth_unk000C8_5(unk000C8 *);
int __thiscall meth_unk000C8_3(unk000C8 *this); // idb
int __thiscall meth_unk000C8_7(unk000C8 *this); // idb
void __thiscall meth_unk000C8_6(unk000C8 *this, int a1);
int __cdecl s_unk000C8_100491B0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10049C20(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10049F40(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004A260(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004A580(int a1);
int __cdecl s_unk000C8_1004B430(int);          // weak
int __cdecl s_unk000C8_1004BDC0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004C4A0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004CAC0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004D1F0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004D640(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004DB00(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004DFC0(unk000C8 *a1); // idb
int __cdecl pm_sub_1004E810(int a1, _DWORD *a2);
int __cdecl s_unk000C8_1004E830(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004F2B0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_1004F700(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10050060(unk000C8 *a1); // idb
int __cdecl s_unk000C8_100509F0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10051990(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10051D30(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10052030(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10052F50(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10053CF0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10054B50(unk000C8 *a1); // idb
int __cdecl s_unk000C8_100558A0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_100563E0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10056A10(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10056FF0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_100575F0(unk000C8 *a1); // idb
int __cdecl s_unk000C8_10057C10(unk000C8 *a1); // idb
int *__cdecl sub_100586A0();
int __cdecl sub_100586D0(int a1);
int sub_10058700();
int __cdecl s_unk000C8_10058750(unk000C8 *a1);  // idb
int __cdecl s_unk000C8_10059760(unk000C8 *a1);  // idb
int __cdecl s_unk000C8_10059BB0(unk000C8 *a1);  // idb
int __cdecl s_unk000C8_1005A6E0(unk000C8 *a1);  // idb
int __thiscall meth_unk000C8_4(unk000C8 *this); // idb
int meth_unk000C8_8();
void __thiscall meth_unk00438_init(unk00438 *this); // idb
unk00438 *__thiscall meth_unk00438_0(unk00438 *Block, char a2);
void __thiscall meth_unk00438_deinit(unk00438 *this); // idb
void __thiscall meth_unk00438_1(unk00438 *this, int unusedA2);
void __thiscall meth_unk00438_2(unk00438 *this, int a2);
double __thiscall meth_unk00438_10(unk00438 *this);                   // idb
DWORD __thiscall meth_unk00438_9(unk00438 *this, float a2, float a3); // idb
int __thiscall meth_unk00438_4(unk00438 *this);                       // idb
int __thiscall meth_unk00438_3(unk00438 *this, float a2, int a3);     // idb
int __thiscall meth_unk00438_11(unk00438 *this);                      // idb
char __cdecl car_1005B540(int a1);
char __thiscall meth_unk00438_5(unk00438 *this);                                        // idb
int __thiscall meth_unk00438_6(unk00438 *this, __int16 a2, float a3, float a4, int a5); // idb
int __thiscall meth_unk00438_8(unk00438 *this, float a2, float a3, int a4);
int __thiscall meth_unk00438_7(unk00438 *this, int a2, int a3);
unk1A5E0 *__thiscall meth_unk1A5E0_init(unk1A5E0 *this);
unk1A5E0 *__thiscall meth_unk1A5E0_0(unk1A5E0 *this, char a2); // idb
void __thiscall meth_unk1A5E0_1005B8F0(unk1A5E0 *this);        // idb
int __thiscall meth_unk1A5E0_5(
    unk1A5E0 *this, int a2, int *a3, __int16 a4, __int16 a5, __int16 a6);                     // idb
int __thiscall meth_unk1A5E0_9(unk1A5E0 *this, int a2);                                       // idb
int __thiscall meth_unk1A5E0_4(unk1A5E0 *this, char *Source, int a3, int a4, int a5, int a6); // idb
int __thiscall meth_unk1A5E0_11(unk1A5E0 *this, int a2);                                      // idb
int __thiscall meth_unk1A5E0_10(unk1A5E0 *this, char *a2, size_t Size, int a4);               // idb
int __thiscall meth_unk1A5E0_1(unk1A5E0 *this, float a2, float a3);
int __thiscall meth_unk1A5E0_2(unk1A5E0 *this, int index);  // idb
int __thiscall meth_unk1A5E0_6(unk1A5E0 *this, _DWORD *a2); // idb
int __thiscall meth_unk1A5E0_7(unk1A5E0 *this, int *a2);    // idb
int __thiscall meth_unk1A5E0_8(unk1A5E0 *this, int index);  // idb
unk06594 *__thiscall meth_unk06594_init(unk06594 *this);
unk06594 *__thiscall meth_unk06594_0(unk06594 *Block, char a2);
void __thiscall meth_unk06594_SetVtbl(unk06594 *this); // idb
int __thiscall meth_unk06594_4(unk06594 *this);
int __thiscall meth_unk06594_5(unk06594 *this, __int16 a1);
int __thiscall meth_unk06594_6(unk06594 *this, const char *a2);
int __thiscall meth_unk06594_1(unk06594 *this, char *lpFileName); // idb
int __thiscall meth_unk06594_2(unk06594 *, LPCSTR lpFileName);
int __thiscall meth_unk06594_3(unk06594 *this, char *Str1, int a3); // idb
int graphics_1005D440();
int graphics_1005F4E0();
IDirectDraw2 *graphics_1005F530();
void __noreturn graphics_1005F580();
int __cdecl graphics_1005F5A0(int a1, int a2, unsigned __int16 a3, int *a4, int a5);
int DDrawDoInit();
int sub_1005F800();
int sub_1005F940();
int __cdecl sub_1005FBC0(int a1);
int sub_1005FCF0();
int sub_1005FDB0();
int sub_1005FF30();
int sub_1005FF60();
HRESULT sub_1005FFB0();
int sub_1005FFD0();
int sub_1005FFF0();
int __cdecl ShowMessageBoxAA(HWND hWnd, HRESULT hr, LPCSTR lpText); // idb
LRESULT __stdcall s_IostreamInit_10060060(
    Iostream_init *iostreamInit, HWND hWnd, int a3, WPARAM wParam, LPARAM lParam); // idb
int __stdcall sub_10060210(HWND a1);                                               // idb
LPDIRECTINPUTDEVICEA sub_10060260();
unk00054 *__thiscall meth_unk00054_init(unk00054 *this);
LPDIRECTINPUTDEVICEA __thiscall meth_unk00054_100602B0(unk00054 *this);            // idb
int __thiscall meth_unk00054_DICreateMouseDevice(unk00054 *this, HWND hWnd);       // idb
LPDIRECTINPUTDEVICEA __thiscall meth_unk00054_100603A0(unk00054 *this, HWND hwnd); // idb
LPDIRECTINPUTDEVICEA __thiscall meth_unk00054_10060750(unk00054 *this, int a2);    // idb
// __int16 __usercall sub_10060780@<ax>(int a1@<ebx>, char *a2, unsigned int a3, char a4);
int __cdecl sub_100607B0(int a1, int a2);
int __cdecl sub_100609E0(int a1);
float *__cdecl sub_10060A10(int a1, int a2);
// int __usercall sub_10060CC0@<eax>(double st7_0@<st0>, int a1, int a2);
char sub_10060D50();
char sub_10060D70();
int sub_10060D90();
char sub_10060DC0();
char sub_10060DE0();
int __cdecl sub_10060E00(int a1);
__int64 thunk_10060E90(void);
char *__cdecl graphics_ConvertBitmapIf24Bit(PBITMAP pBitmap);
char *__cdecl graphics_Convert24BitBitmap(
    char *mem, LPVOID bmBits, LONG bmWidth, LONG bmHeight, LONG bmWidthBytes);
int __cdecl car_10060F70(int a1, int a2, int a3);
int *__cdecl car_10060FB0(int a1, int a2, _DWORD *a3, _DWORD *a4, _DWORD *a5, int *a6);
int car_10061000();
int __cdecl car_LoadCarPaint(int carIndex, int bSomething); // idb
char *__cdecl car_LoadImageWrapper(LPCSTR name);
unsigned int __cdecl car_10061210(char *imageData,
                                  int bmHeight_1,
                                  int bmHeight,
                                  unsigned __int8 *mem);         // idb
int __cdecl car_10061290(int a1, int a2, int width, int height); // idb
CarPart *car_100613B0();
char *thunk_LoadDamageBitmaps(void);
char *car_LoadPaintDamageBitmaps();
int __cdecl car_10061460(int a1, int a2, int damgePtrsMaxAddress); // idb
int __cdecl car_10061480(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
int __cdecl sub_100615B0(_BYTE *a1, int a2, int a3, int a4, int a5);
void car_10061620();
void __cdecl sub_10061660(int a1);
int __cdecl sub_100616C0(int *a1);
int sub_10061700();
void __thiscall meth_10061720(_DWORD *this); // idb
// void __usercall sub_10061BE0(double a1@<st0>, _DWORD *a2);
// float *__usercall sub_10061C60@<eax>(int a1@<ecx>, double a2@<st0>);
void __thiscall meth_10061F70(_DWORD *this); // idb
void __thiscall meth_10062C50(_DWORD *this); // idb
void thunk_nullsub_2_1();
void **sub_100633E0();
enum MACRO_GAME_MODE __thiscall meth_10063420(_DWORD *this);
enum MACRO_GAME_MODE __thiscall meth_100634F0(_DWORD *this);
void __thiscall meth_10063660(_DWORD *this); // idb
void __cdecl sub_10063FE0(int a1);
int __thiscall meth_10063FF0(_DWORD *this, int a2, int a3, int a4); // idb
void __thiscall meth_10064350(_DWORD *this);                        // idb
void __thiscall meth_10064700(_DWORD *this);                        // idb
void __cdecl sub_10065620(int a1);
int __thiscall meth_10065630(_DWORD *this); // idb
int __thiscall meth_10065710(_DWORD *this); // idb
int __thiscall meth_10065740(_DWORD *this); // idb
__int16 __cdecl sub_10065B20(int a1, float a2);
void __cdecl sub_10065C80(int a1, int a2, float a3, float a4);
int __cdecl car_MakeEnemyCarColorPanels0(size_t size); // idb
int __cdecl sub_100661B0(int a1, int a2);
int __thiscall meth_100662A0(_DWORD *this);  // idb
void __thiscall meth_100664C0(_DWORD *this); // idb
void sub_10066510();
int __cdecl sub_10066620(const void *, const void *); // idb
int *__thiscall meth_10066650(_DWORD *this);          // idb
void __thiscall meth_10066E90(_DWORD *this);          // idb
char *__cdecl sub_10067880(const void **a1, char *a2, int a3);
void **__cdecl sub_10067900(void **a1, char *a2);
char *__cdecl sub_10067940(int a1);
void **__cdecl sub_10067960(int a1);
char *sub_10067980();
void **sub_100679A0();
char *__thiscall meth_100679C0(_DWORD *this);
double __cdecl sub_10067AE0(int a1, int a2, float a3, int a4);
__int64 __cdecl sub_10067BC0(float *a1, float *a2, float *a3, float *a4, _DWORD *a5, int a6);
int __cdecl sub_10067D40(int a1);
int sub_10067D80();
int sub_10067D90();
int sub_10067DA0();
int sub_10067DC0();
void __cdecl sub_10067E50(int a1, int a2, int a3, float a4, int *a5, int a6);
int sub_10067ED0();
void __cdecl sub_10068180(int a1, int *a2, int a3);
void __cdecl sub_10068210(int a1, int *a2, int a3);
size_t __cdecl sub_10068260(int a1, int a2);
size_t car_MakeEnemyCarColorPanels();
void __thiscall meth_100683C0(_DWORD *this);
int sub_100683D0();
int __thiscall meth_10068400(_DWORD *this);  // idb
void __thiscall meth_10068EF0(_DWORD *this); // idb
// int __usercall sub_10069330@<eax>(int a1@<ecx>, double a2@<st0>);
int __thiscall meth_10069370(_DWORD *this); // idb
char *sub_10069490();
char *sub_100694E0();
char *sub_10069530();
int sub_10069580();
int __cdecl sub_100695A0(int a1, int a2);
int __cdecl sub_100695D0(int a1, int a2);
int __cdecl sub_10069740(int a1);
int __cdecl sub_100697C0(int a1);
int __cdecl sub_100697E0(int a1);
char *sub_10069800();
void sub_10069840();
int sub_10069A50();
BossRallyConfig *sub_10069A60();
// void __cdecl debug_10069A80(); idb
BossRallyConfig *__thiscall meth_BossRallyConfig_10069A90(BossRallyConfig *this);
int __thiscall meth_BossRallyConfig_10069AA0(BossRallyConfig *this, int nPlayers); // idb
int __thiscall meth_BossRallyConfig_10069B10(
    BossRallyConfig *this, int a2, int a3, __int16 a4, char a5);                      // idb
int __thiscall meth_BossRallyConfig_10069BC0(BossRallyConfig *this, int a2, int a3);  // idb
char __thiscall meth_BossRallyConfig_10069C30(BossRallyConfig *this, int a2, int a3); // idb
int __thiscall meth_BossRallyConfig_10069C90(BossRallyConfig *this);                  // idb
BossRallyConfig *__thiscall meth_BossRallyConfig_10069DE0(BossRallyConfig *this,
                                                          BossRallyConfig *otherConfig);      // idb
int __thiscall meth_BossRallyConfig_ReadCfg(BossRallyConfig *this, const char *cfgFilename);  // idb
FILE *__thiscall meth_BossRallyConfig_WriteConfigFile(BossRallyConfig *this, char *FileName); // idb
unsigned int ReadInstallDirectory();
int sub_1006A980();
int __cdecl sub_1006A990(int a1);
void __cdecl sub_1006A9C0(int a1, int a2, int a3, int a4, int a5);
void __cdecl sub_1006AA20(int a1);
int sub_1006AA50();
// void __setargv_0();
int sub_1006AAA0();
char __cdecl sub_1006AAB0(int a1);
int *sub_1006AB20();
void *sub_1006AB90();
int sub_1006ABA0();
int sub_1006ABB0();
int __cdecl sub_1006ABD0(int a1, int a2);
int __cdecl sub_1006ACF0(int a1);
int sub_1006AD10();
void *sub_1006ADF0();
unsigned int __cdecl sub_1006AE00(unsigned int a1);
_DWORD *sub_1006AE20();
void __cdecl sub_1006AEB0(int a1);
float *__cdecl sub_1006AFF0(float *a1, int a2);
float *__cdecl sub_1006B170(int a1);
float *__cdecl sub_1006B260(int a1);
float *__cdecl sub_1006B340(int a1, int a2, int a3);
float *__cdecl sub_1006B430(float *a1, float *a2, float *a3);
float *__cdecl sub_1006B510(float *a1, float *a2, int *a3);
void __cdecl sub_1006B5F0(int a1, float a2, int a3, int a4, int a5, int a6);
void __cdecl sub_1006C1F0(int a1, int a2, int a3, int a4, float a5);
__int16 __cdecl sub_1006C740(int a1, int a2);
double __cdecl sub_1006C9A0(int a1, float a2, int a3);
int __cdecl sub_1006C9D0(int a1, float *a2, int a3, int a4);
int __cdecl sub_1006CCD0(int, int, int, int, float); // idb
_DWORD *__cdecl sub_1006D280(int a1);
int __cdecl sub_1006D2B0(int a1);
int __cdecl sub_1006D540(float *a1, char a2);
int __cdecl sub_1006D660(int a1, float *a2, int a3);
int __cdecl sub_1006D850(float *a1, float *a2);
int __cdecl sub_1006D9A0(float *a1, float *a2);
int __cdecl sub_1006DAF0(float *a1, float *a2);
int __cdecl sub_1006DB20(int a1, float *a2);
int __cdecl sub_1006DDC0(int a1);
int __cdecl sub_1006E4C0(int, int, float, int, int); // idb
int __cdecl sub_1006E760(int a1, float *a2);
int __cdecl sub_1006EC80(int a1, int a2);
void __cdecl sub_1006EF80(int a1, float *a2);
double __cdecl sub_1006F0C0(int a2, int a3);
double __cdecl sub_1006F310(float *a2);
// void __usercall sub_1006F4A0(double a1@<st0>, _DWORD *a2);
int __cdecl sub_1006F540(int a1);
void __cdecl sub_1006F650(int a1);
__int16 __cdecl sub_1006F720(float a1, float a2);
int __cdecl sub_1006F950(float *a1, float *a2, float *a3, float *a4);
void sub_1006FFD0();
int __cdecl sub_10070580(int trackIndex);                           // idb
char __cdecl sub_10070610(enum MACRO_UNK10071130 a1, FILE *Stream); // idb
char sub_100709A0();
bool __cdecl sub_10070AF0(char *filename, BOOL b); // idb
bool __cdecl sub_10070E60(int a1);
char sub_10070E80();
CarPart *sub_10071120();
char __cdecl sub_10071130(enum MACRO_UNK10071130 a1, FILE *Stream);
DWORD sub_100713A0();
int sub_100713B0(void); // weak
BOOL sub_100713C0();
BOOL __cdecl sub_10071480(int a1);
int __cdecl sub_100714D0(int a1);
int __cdecl sub_10071510(int a1);
int sub_10071550();
BOOL sub_10071560();
int sub_100715D0();
void sub_100715E0();
void __cdecl sub_10071610(); // idb
HANDLE sub_10071630();
void __stdcall __noreturn sub_10071680(LPVOID lpThreadParameter);
BOOL sub_100716E0();
int *sub_10071870();
BOOL __cdecl sub_10071B60(const void *a1, const void *a2);
BOOL sub_10071B80();
int __cdecl sub_10071BF0(_DWORD *a1);
int sub_10071C10();
int __cdecl sub_10071F40(
    _DWORD *a1, char a2, char a3, char a4, char a5, char a6, char a7, int a8, int a9);
int __cdecl sub_10072030(_DWORD *a1, char a2, int a3, __int16 a4);
int __cdecl sub_10072080(_DWORD *a1, char a2);
int __cdecl sub_10072110(_DWORD *a1, char a2);
int __cdecl sub_10072170(_DWORD *a1);
int sub_10072270();
int __cdecl sub_100722D0(int *a1);
int __cdecl sub_10072450(int a1, int a2);
int __cdecl sub_10072490(int a1);
int __cdecl sub_100724B0(int a1);
int __cdecl sub_100724D0(int a1);
int __cdecl sub_10072520(int a1);
int __cdecl sub_10072550(int a1);
BOOL __cdecl sub_10072580(int a1);
BOOL __cdecl sub_100725C0(int a1, int a2);
int __cdecl sub_10072640(int a1, int a2);
int __cdecl sub_10072680(int a1, __int64 a2);
int __cdecl sub_10072700(int a1, int a2);
BOOL __cdecl sub_10072750(int a1, int a2, float a3);
BOOL __cdecl sub_10072770(int a1, int a2, int a3);
int __cdecl sub_100727C0(int a1, unsigned int a2);
int __cdecl sub_10072820(int a1, unsigned int a2);
int __cdecl sub_10072910(int a1, int a2, int a3);
int __cdecl sub_100729E0(int a1, int a2);
int __cdecl sub_10072A00(int a1);
BOOL __cdecl sub_10072A70(int a1, unsigned int a2, int a3);
BOOL __cdecl sub_10072A90(int a1, int a2, unsigned int a3, int a4);
BOOL __cdecl sub_10072AF0(int a1, unsigned int a2);
BOOL __cdecl sub_10072B10(int a1, int a2, unsigned int a3);
BOOL __cdecl sub_10072B30(int a1, int a2, unsigned int a3);
BOOL __cdecl sub_10072B80(int a1, int a2, unsigned int a3);
BOOL __cdecl sub_10072BA0(int a1, int a2);
int __cdecl sub_10072BF0(int a1);
int __cdecl sub_10072C20(int a1);
HMMIO __cdecl sub_10072CA0(LPSTR pszFileName);
int sub_10072E00();
int sub_10072E60();
BOOL __cdecl pm_sub_10072FE0(int a1);
BOOL __cdecl sub_10073020(int a1);
int *sub_10073060();
int __cdecl sub_10073080(int a1, int a2);
int __cdecl sub_100730A0(int a1);
int __cdecl pm_sub_10073320(int a1);
int sub_100734F0();
int ReleaseDirectSound();
int sub_100737E0();
int sub_10073820();
int sub_10073950();
int sub_10073980();
int sub_100739B0();
int sub_100739E0();
void *sub_10073AC0();
void *sub_10073B00();
void __thiscall meth_unk00214_10073B40_init(unk00214 *this); // idb
_DWORD *__thiscall meth_10073B60(_DWORD *this, int a2, int a3);
int __thiscall meth_unk00214_10073B80(unk00214 *this); // idb
// int __thiscall Concurrency::details::StructuredWorkStealingQueue<Concurrency::details::_UnrealizedChore,Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(_DWORD); weak
int __thiscall meth_10073BA0(_DWORD *this, int a2);
char __thiscall meth_10073BC0(_DWORD *this);
int __thiscall meth_10073BE0(_DWORD *this);
int __thiscall meth_10073C10(_DWORD *this);
int __thiscall meth_10073C40(_DWORD *this);
unsigned int __thiscall meth_10073C90(int *this, int a2);
int __thiscall meth_10073D20(_DWORD *this);
BOOL __thiscall meth_10073D40(_DWORD *this);
int __thiscall meth_unk00214_10073D60(unk00214 *this, char a2);
int __thiscall meth_unk00214_10073D80(unk00214 *this, __int16 a2); // idb
int __thiscall meth_unk00214_10073DC0(unk00214 *this, int a2);     // idb
int __thiscall meth_unk00214_10073E10(unk00214 *this, int a2);     // idb
int __thiscall meth_unk00214_10073E70(_DWORD *this, int a2, int a3);
int __thiscall meth_unk00214_10073F20(unk00214 *this); // idb
int __thiscall meth_unk00214_10073F40(unk00214 *this); // idb
int *__thiscall meth_unk00214_GetField10(unk00214 *this);
HMODULE LoadBrstringDll();
LPCSTR __cdecl GetStringWithIndex(unsigned int index);
void ReleaseBRString();
float *__cdecl math_10074090(float *a1, float *a2, float *a3);
void __cdecl math_100741B0(float *a1);
void __cdecl math_10074250(float *a1);
float *__cdecl math_100742D0(float *a1);
int __cdecl math_100743A0(int, int, float); // idb
void __cdecl math_10074450(float *a1, float *a2);
int __cdecl math_100745F0(int, int, float); // idb
_DWORD *__cdecl sub_100746E0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
float *__cdecl sub_10074720(float *a1, float *a2, float *a3);
float *__cdecl sub_10074770(float *a1, int a2, float *a3);
float *__cdecl sub_100747C0(float *a1, float *a2, float *a3);
float *__cdecl sub_10074830(float *a1, float *a2, float *a3);
void __cdecl sub_10074870(int a1);
int __cdecl sub_100749D0(int a1, int a2);
int __cdecl sub_10074A10(float *a1, int a2, float *a3);
int *__cdecl sub_10074A50(_DWORD *a1, int *a2);
_DWORD *__cdecl sub_10074A90(_DWORD *a1, int *a2);
float *__cdecl sub_10074AC0(int a1, int a2, int a3);
float *__cdecl sub_10074B20(int a1, int a2, float *a3);
float *__cdecl sub_10074B70(float *a1, int a2, int a3);
float *__cdecl sub_10074C10(float *a1, float *a2, float *a3);
int __cdecl sub_10074DC0(int a1);
int sub_10074DD0();
int sub_10074E00();
_DWORD *__cdecl sub_10074E20(_DWORD *a1);
int __cdecl sub_10074E40(int a1, int a2, int a3);
int __cdecl sub_10074ED0(int a1, int a2, int a3);
HANDLE sub_10074F20();
BOOL sub_10074F40();
BOOL __cdecl sub_10074F70(int a1, int a2);
BOOL sub_10074FC0();
DWORD getTicks();
int sub_100750F0();
DWORD sub_10075100();
int sub_10075150();
DWORD __thiscall meth_10075190(int this);
int __cdecl time_10075260(__int16 a1, int a2, int a3, int a4, int a5);
int __cdecl time_100752D0(__int16 a1, int a2, int a3, int a4);
// size_t __cdecl strftime(char *Buffer, size_t SizeInBytes, const char *Format, const struct tm *Tm);
void j_nullsub_2_2();
void nullsub_2();
int __thiscall meth_10075340(_DWORD *this);
int __thiscall meth_10075360(int this);
void __thiscall meth_10075780(int this);
void __thiscall meth_10075810(int this);
void __thiscall meth_100758A0(_DWORD *this);
int __thiscall meth_10075960(int this);
int __cdecl sub_100759D0(int, int, int, int, int, float, int, int, int); // idb
void __thiscall meth_10075F10(int this);
void __thiscall meth_10076420(float *this, int a2, int a3, int a4);
void __thiscall meth_100764C0(float *this, float a2);
void __cdecl math_100765E0(float *a1, float *a2);
void __thiscall meth_10076700(int this, void *a2);
int __thiscall meth_100767A0(_DWORD *this, int a2, int a3, int a4);
int __thiscall meth_10076820(_DWORD *this, float a2, float a3, float a4);
int __thiscall meth_100769A0(_DWORD *this, int a2, int a3, int a4);
void __thiscall meth_10076A00(int this);
void __thiscall meth_10076A40(_DWORD *this, int index); // idb
void __thiscall meth_10076A70(unsigned __int8 *this, int a2, int a3);
int __thiscall meth_10076AE0(_DWORD *this, int carIndex); // idb
int __thiscall meth_10076B20(_DWORD *this);
_DWORD *__thiscall meth_10076C90(char *this);
MMRESULT __cdecl mm_10076CE0(LPSTR pszFileName, int a2, int a3, LPMMCKINFO pmmcki);
MMRESULT __cdecl mm_10076E90(int a1, LPMMCKINFO pmmcki, MMCKINFO *pmmckiParent);
int __cdecl mm_10076ED0(HMMIO hmmio, int, int, int, int); // idb
MMRESULT __cdecl mm_10076FA0(LPSTR pszFileName, int a2, int a3, int a4, HMMIO hmmio);
void __cdecl sub_10077090(unsigned int a1);
int sub_100770C0();
int input_100770F0();
HRESULT __cdecl input_100771B0(void *a1);
int __cdecl input_10077200(_DWORD *a1);
int input_10077310();
BOOL input_100773D0();
int __cdecl input_100773F0(int *a1, int *a2);
char __cdecl input_10078420(int a1);
char __cdecl input_100786E0(int a1);
LPDIRECTINPUTDEVICEA input_10078BC0();
__int64 sub_10078C10();
int __cdecl input_DISetProperty2(
    IDirectInputDevice2A *diDevice2A, GUID *guid, int dwObj, int dwHow, int unusedA5, int unusedA6);
HRESULT __cdecl input_DISetProperty(
    IDirectInputDevice2A *dev2a, GUID *guid, DWORD dwObj, DWORD dwHow, int unusedA5); // idb
int input_10078CD0();
int input_10078DB0();
int __cdecl input_10078E10(int a1);
DWORD input_10078E50();
DWORD input_10078E90();
HRESULT input_10078ED0();
int __cdecl input_10078F20(int a1, int a2, int a3);
HRESULT __cdecl input_100790B0(int a1);
HRESULT __stdcall input_diEnumDevicesCallback(LPDIRECTINPUTDEVICEA deviceInstance, LPVOID userData);
int input_100791D0();
HRESULT __cdecl input_DICreateEffects(int a1, int unusedA2); // idb
int input_10079550();
int input_100795D0();
int input_10079670();
// _DWORD *unknown_libname_11();
// void __cdecl unknown_libname_12(); idb
HINSTANCE main_100796B0();
BOOL main_UnregisterClass();
int __cdecl main_10079740(int argc, const char **argv, const char **envp);
int __cdecl main_RallyMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine); // idb
int main_100798F0();
HRESULT __cdecl main_RallyCreateWindow(DWORD dwExStyle,
                                       LPCSTR lpClassName,
                                       LPCSTR lpWindowName,
                                       DWORD dwStyle,
                                       int X,
                                       int Y,
                                       int nWidth,
                                       int nHeight,
                                       HWND hWndParent,
                                       HMENU hMenu,
                                       HINSTANCE hInstance,
                                       LPVOID lpParam,
                                       int a3,
                                       int a14,
                                       HWND *wnd2,
                                       unk00334 *a16);
int main_DestroyWindow_gUnk8C();
LONG __stdcall main_windowProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_ACTIVATE(HWND hWnd, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_ACTIVATEAPP(HWND hWnd, WPARAM wParam, LPARAM lParam);
int __cdecl main_DestroyWindowWrapper(HWND hWnd); // idb
LRESULT __cdecl events_handle_WM_COMMAND(HWND hWnd, WPARAM wParam, LPARAM lParam);
int ReturnZero();
void __noreturn noreturn_1007A1D0();
int __cdecl events_handle_WM_DISPLAYCHANGE(HWND hWnd); // idb
LRESULT __cdecl events_handle_WM_ERASEBKGND(HWND hWnd, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_ENTERMENULOOP(HWND hWnd, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_EXITMENULOOP(HWND hWnd, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_GETMINMAXINFO(HWND hWnd, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_MOVE(HWND hWnd, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_NCPAINT(HWND hWnd, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_SETCURSOR(HWND hWnd, WPARAM wParam, LPARAM lParam);
int __cdecl events_handle_WM_SIZE(HWND hWnd, WPARAM wParam, LPARAM lParam); // idb
LRESULT __cdecl events_handle_WM_SYSCOMMAND(HWND hWnd, WPARAM wParam, LPARAM lParam);
LRESULT __cdecl events_handle_WM_WINDOWPOSCHANGING(HWND hWnd, WPARAM wParam, LPARAM lParam);
int __cdecl main_1007A6A0(HWND hWnd, intptr_t dwNewLong);                                    // idb
int __cdecl main_ResetWindowLong_USERDATA(HWND hWnd);                                        // idb
int __cdecl s_unk00334_QSortCompareFn(unk00334 *u334aOrBitDepth, unk00334 **u334OrBitDepth); // idb
unk00334 *__cdecl s_CLSID_1007A7D0(CLSID *a1);                                               // idb
int __stdcall graphics_1007A840();
int graphics_1007A940();
int graphics_1007AC00();
BOOL __cdecl graphics_1007AC20(int width, int height, int bitDepth, unk00334 *a5); // idb
// HRESULT __stdcall DirectPlayLobbyCreateA(LPGUID, LPDIRECTPLAYLOBBYA *, IUnknown *, LPVOID, DWORD);
// int __stdcall DirectInputCreateA(HINSTANCE hInst, DWORD version, IDirectInputA **a3, IUnknown *a4);
// HRESULT __stdcall DirectDrawCreate(GUID *lpGUID, LPDIRECTDRAW *lplpDD, IUnknown *pUnkOuter);
// HRESULT __stdcall DirectDrawEnumerateA(LPDDENUMCALLBACKA lpCallback, LPVOID lpContext);
// MMRESULT __stdcall acmMetrics(HACMOBJ hao, UINT uMetric, LPVOID pMetric);
// int _fpmath();
// int (__cdecl *_cfltcvt_init_0())(int, void *Src, int, int, int);
// int sprintf(char *const Buffer, const char *const Format, ...);
// void __cdecl srand(unsigned int Seed);
// int __cdecl rand();
// int __cdecl fseek(FILE *Stream, int Offset, int Origin);
// int __cdecl ftell(FILE *Stream);
// void _cinit();
// void __cdecl __noreturn exit(int Code);
// void __cdecl _cexit();
// void __cdecl _initterm(_PVFV *First, _PVFV *Last);
// int __cdecl fclose(FILE *Stream);
// int fprintf(FILE *const Stream, const char *const Format, ...);
// FILE *__cdecl _fsopen(const char *FileName, const char *Mode, int ShFlag);
// FILE *__cdecl fopen(const char *FileName, const char *Mode);
// int __cdecl getc(FILE *Stream);
size_t __cdecl filesystem_freadLock(void *buffer,
                                    size_t elementSize,
                                    size_t elementCount,
                                    FILE *fp); // idb
// size_t __cdecl fread(void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
// int __cdecl ungetc(int Character, FILE *Stream);
size_t __cdecl filesystem_fwriteLock(void *Buffer,
                                     size_t ElementSize,
                                     size_t ElementCount,
                                     FILE *Stream);
// size_t __cdecl fwrite(const void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
// void __cdecl free(void *Block);
// void *__cdecl malloc(size_t Size);
// int __cdecl _nh_malloc(size_t Size, int); idb
// _DWORD __cdecl _heap_alloc(_DWORD); weak
// void *__cdecl realloc(void *Block, size_t Size);
// char __endstdio();
// int __cdecl sub_1007D6F0(int a1, int a2);
// void __stdcall _UnwindNestedFrames(PVOID TargetFrame, PEXCEPTION_RECORD ExceptionRecord); idb
// void *__cdecl _CallCatchBlock2(struct EHRegistrationNode *, const struct _s_FuncInfo *, void *, int, unsigned int); idb
// int __cdecl CatchGuardHandler(PEXCEPTION_RECORD ExceptionRecord, PVOID TargetFrame, struct _CONTEXT *context); idb
// int __cdecl _CallSETranslator(struct EHExceptionRecord *, struct EHRegistrationNode *, void *, void *, const struct _s_FuncInfo *, int, struct EHRegistrationNode *); idb
// int __cdecl TranslatorGuardHandler(PEXCEPTION_RECORD ExceptionRecord, PVOID TargetFrame, struct _CONTEXT *a3);
// const struct _s_TryBlockMapEntry *__cdecl _GetRangeOfTrysToCheck(const struct _s_FuncInfo *, int, int, unsigned int *, unsigned int *); idb
// int __cdecl _abnormal_termination();
// double __cdecl floor(double X);
// char *__cdecl strchr(const char *Str, int Val);
// char *__cdecl strstr(const char *Str, const char *SubStr);
// int __cdecl atoi(const char *String);
// int __cdecl strncmp(const char *Str1, const char *Str2, size_t MaxCount);
// void __cdecl operator delete(void *Block); idb
// int __cdecl toupper(int C);
// int __cdecl operator new(size_t Size);
// char *__cdecl strerror(int ErrorMessage);
// _DWORD __cdecl _dosmaperr(_DWORD); weak
// int *__cdecl _errno();
// unsigned int *__cdecl __doserrno();
// int __cdecl vsprintf(char *const Buffer, const char *const Format, va_list ArgList);
// char *__cdecl strncpy(char *Destination, const char *Source, size_t Count);
// int __cdecl qsort(_DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl shortsort(_DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl swap(_DWORD, _DWORD, _DWORD); weak
// int sscanf(const char *const Buffer, const char *const Format, ...);
_DWORD __cdecl math_1007E54D(_DWORD);         // weak
_DWORD __cdecl math_1007E5FD(_DWORD);         // weak
_DWORD __cdecl math_1007E6AD(_DWORD, _DWORD); // weak
// double __cdecl asin(double X);
// _DWORD __cdecl sub_1007E76D(_DWORD, _DWORD); weak
// int __cdecl atexit(void (__cdecl *)());
// void *__cdecl memcpy(void *, const void *Src, size_t Size);
// int printf(const char *const Format, ...);
// void *__cdecl memcpy_0(void *, const void *Src, size_t Size);
// char *__cdecl strrchr(const char *Str, int Ch);
// int __cdecl _chdir(const char *Path);
// int __cdecl _getdrive();
// int __cdecl _chdrive(int Drive);
// char *__cdecl _strupr(char *String);
char *__cdecl getcwd(char *buffer, int maxlen); // idb
// char *__cdecl _getdcwd_lk(int RootPathName, char *a2, int a3); idb
// int __cdecl _validdrive(CHAR RootPathName); idb
// void __stdcall `eh vector destructor iterator'(void *, unsigned int, int, void (__thiscall *)(void *)); idb
// void __stdcall __ArrayUnwind(void *, unsigned int, int, void (__thiscall *)(void *)); idb
// void __stdcall `eh vector constructor iterator'(void *, unsigned int, int, void (__thiscall *)(void *), void (__thiscall *)(void *)); idb
// int __cdecl _findfirst(LPCSTR lpFileName, int); idb
// int __cdecl _findnext(HANDLE hFindFile, int); idb
// int __cdecl _findclose(intptr_t FindHandle);
// int __cdecl __timet_from_ft(FILETIME *lpFileTime); idb
// _DWORD __cdecl sub_1007FA52(_DWORD, _DWORD, __int16, _DWORD, __int16); weak
// int __usercall sub_1007FC25@<eax>(double@<st0>); weak
// int __cdecl _finite(double X);
// int __stdcall _CRT_INIT(HINSTANCE a1, int a2, int a3); idb
// BOOL __stdcall DllEntryPoint(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved);
// void __cdecl __noreturn _amsg_exit(int a1);
// int _setdefaultprecision(void); weak
// int _ms_p5_mp_test_fdiv(void); weak
// int __cdecl _forcdecpt(int); weak
// int _cropzeros(); weak
// int __cdecl _positive(int); weak
// int __cdecl _fassign(int a1, int *a2, int a3);
// int __cdecl _cfltcvt(int, void *Src, int, int, int); idb
// int __cdecl _flsbuf(int Ch, FILE *File);
// int __cdecl _output(FILE *File, int, int); idb
// int __cdecl write_char(int, FILE *File, int); idb
// int __cdecl write_multi_char(int, int, FILE *File, int); idb
// int _mtinit(void); weak
// int _mtterm(void); weak
// int _getptd(void); weak
// int __cdecl _freeptd(void *Block); idb
// void __cdecl _lock(int offset); idb
// void __cdecl _unlock(int offset); idb
// void __cdecl _lock_file(FILE *Stream);
// _DWORD __cdecl _lock_file2(_DWORD, _DWORD); weak
// void __cdecl _unlock_file(FILE *Stream);
// _DWORD __cdecl _unlock_file2(_DWORD, _DWORD); weak
// int __cdecl _lseek_lk(int FileHandle, LONG lDistanceToMove, DWORD dwMoveMethod); idb
// int __cdecl _flushall();
// int _ioinit(void); weak
// int _ioterm(void); weak
// _DWORD *_getstream();
// int __cdecl _filbuf(FILE *File);
// int __cdecl _read(int FileHandle, void *DstBuf, unsigned int MaxCharCount);
// int __cdecl _write_lk(int FileHandle, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite); idb
// int _heap_init(void); weak
// int _heap_term(void); weak
// _DWORD __cdecl __sbh_find_block(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl __sbh_alloc_block(_DWORD); weak
// int __cdecl _callnewh(size_t Size);
// void *__cdecl calloc(size_t Count, size_t Size);
// int __cdecl _fcloseall();
// int __cdecl __InternalCxxFrameHandler(PEXCEPTION_RECORD ExceptionRecord, struct EHRegistrationNode *, struct _CONTEXT *, void *, struct _s_FuncInfo *, int, PVOID TargetFrame, char); idb
// void __cdecl FindHandler(PEXCEPTION_RECORD ExceptionRecord, struct EHRegistrationNode *, struct _CONTEXT *, void *, const struct _s_FuncInfo *, char, int, PVOID TargetFrame); idb
// void __cdecl FindHandlerForForeignException(PEXCEPTION_RECORD ExceptionRecord, struct EHRegistrationNode *, struct _CONTEXT *, void *, const struct _s_FuncInfo *, int, int, PVOID TargetFrame); idb
// void __cdecl CatchIt(PEXCEPTION_RECORD ExceptionRecord, struct EHRegistrationNode *, struct _CONTEXT *, void *, const struct _s_FuncInfo *, const struct _s_HandlerType *, const struct _s_CatchableType *, const struct _s_TryBlockMapEntry *, int, PVOID TargetFrame); idb
// void *__cdecl CallCatchBlock(struct EHExceptionRecord *, struct EHRegistrationNode *, struct _CONTEXT *, const struct _s_FuncInfo *, void *, int, unsigned int); idb
// BOOL __cdecl ExFilterRethrow(struct _EXCEPTION_POINTERS *a1);
// void __cdecl BuildCatchObject(struct EHExceptionRecord *, struct EHRegistrationNode *, const struct _s_HandlerType *, const struct _s_CatchableType *); idb
// void __cdecl _DestructExceptionObject(struct EHExceptionRecord *, char); idb
// char *__cdecl AdjustPointer(void *a1, const struct PMD *a2);
// void __cdecl __noreturn terminate(); idb
void __noreturn noreturn_10083B50();
// ULONG_PTR __cdecl _raise_exc(ULONG_PTR Arguments, int a2, char a3, int a4, int a5, int a6);
// BOOL __cdecl _handle_exc(char a1, double *a2, __int16 a3);
// int __cdecl _decomp(double, int); idb
// int _statfp(void); weak
// int _clrfp(void); weak
// int __fastcall _ctrlfp(__int16 a1);
// _DWORD __cdecl _set_statfp(_DWORD); weak
// int __cdecl _isctype(int C, int Type);
// void _rttosnpop();
// int _rttosnpopde(void); weak
// void chsifnegret();
// double _twoToTOS(); weak
// double __cdecl _load_CW(_DWORD); weak
// double __usercall _convertTOStoQNaN@<st0>(int a1@<eax>, double result@<st0>);
// int __fastcall _fload_withFB(_DWORD, _DWORD); weak
// _DWORD _check_range_exit(); weak
// double __cdecl _startTwoArgErrorHandling(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// double __cdecl _startOneArgErrorHandling(__int16, _DWORD, _DWORD, _DWORD); weak
// size_t __cdecl _msize(void *Block);
// int __cdecl __loctotime_t(int a1, int a2, int a3, int a4, int a5, int a6, int a7);
// void __usercall fFYTOX(char a1@<ch>, int a2@<ebp>, long double a3@<st1>, long double a4@<st0>);
// void zerotoxdone();
// void expbigret();
// int _ffexpm1(void); weak
// int isintTOS(void); weak
// void isintTOSret();
// void noerror();
// int __cdecl _powhlp(double, double X, int); idb
// int _setenvp(void); weak
// int _setargv(void); weak
// int __cdecl _setmbcp(int CodePage);
// UINT __cdecl getSystemCP(UINT a1);
// int __cdecl CPtoLCID(int a1);
// int setSBCS(void); weak
// int __initmbctable(void); weak
// CHAR *__crtGetEnvironmentStringsA();
int __cdecl sub_10086B80(int a1);
// BOOL __stdcall DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved);
// int _FF_MSGBANNER(void); weak
// int *__cdecl _NMSG_WRITE(int a1);
// _DWORD *__cdecl _CopyMan(int a1, _DWORD *a2);
// _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD); weak
int __cdecl sub_10087540(int a1, int a2);
int __cdecl ld12cvt_(int a1, int a2);
int __cdecl sub_10087580(int a1, int a2);
int __cdecl sub_100875C0(int a1, int a2);
// int __cdecl _ValidateRead(const void *lp, UINT_PTR ucb); idb
// int __cdecl _ValidateWrite(void *lp, UINT_PTR ucb); idb
// int __cdecl _ValidateExecute(FARPROC lpfn); idb
// void __cdecl __noreturn abort();
// int __cdecl storeTimeFmt(void *Block, int); idb
// int __tzset(void); weak
// BOOL __cdecl _isindst(_DWORD *a1);
BOOL __cdecl time_10089B40(_DWORD *a1);
// _DWORD __cdecl cvtdate(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// double __cdecl unknown_libname_13(_TBYTE a1, _TBYTE a2);
// int __usercall unknown_libname_15@<eax>(double a1@<st1>, double a2@<st0>);
// int __usercall unknown_libname_16@<eax>(double a1@<st1>, double a2@<st0>);
// void __usercall __spoils<edx,ecx,st0> unknown_libname_26(double a1@<st1>, double a2@<st0>);
// unsigned int __usercall unknown_libname_27@<eax>(char a1@<dl>, __int128 a2, int a3, int a4, __int128 a5);
// unsigned int __usercall __spoils<ecx,st0> unknown_libname_28@<eax>(double a1@<st1>, double a2@<st0>);
// unsigned int __usercall unknown_libname_29@<eax>(char a1@<dl>, __int128 a2, int a3, int a4, __int128 a5);
// int __spoils<ecx> unknown_libname_30();
// _DWORD __cdecl __crtMessageBoxA(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl __addl(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl __add_12(_DWORD, _DWORD); weak
// _DWORD __cdecl __shl_12(_DWORD); weak
// _DWORD __cdecl __shr_12(_DWORD); weak
// _DWORD __cdecl __mtold12(_DWORD, _DWORD, _DWORD); weak
// int __cdecl __strgtold12(int a1, char **a2, char *a3, int a4, int a5, int a6, int a7);
// int __cdecl _I10_OUTPUT(unsigned int a1, __int64 a2, int a3, char a4, int a5);
// int __cdecl __getlocaleinfo(UINT CodePage, LCID Locale, LCTYPE LCType, int); idb
// char *__cdecl _itoa(int Value, char *Buffer, int Radix);
// int __cdecl _strcmpi(const char *String1, const char *String2);
// int __cdecl __ld12mul(int a1, int a2);
// void __cdecl __multtenpow12(_WORD *a1, int a2, int a3);
// void __stdcall RtlUnwind(PVOID TargetFrame, PVOID TargetIp, PEXCEPTION_RECORD ExceptionRecord, PVOID ReturnValue);
// int __stdcall RegCloseKey(_DWORD); weak
// int __stdcall RegQueryValueExA(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// BOOL __stdcall GetUserNameA(LPSTR lpBuffer, LPDWORD pcbBuffer);
// int __stdcall RegOpenKeyExA(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// HRESULT __stdcall DirectDrawCreate(GUID *lpGUID, LPDIRECTDRAW *lplpDD, IUnknown *pUnkOuter);
// HRESULT __stdcall DirectDrawEnumerateA(LPDDENUMCALLBACKA lpCallback, LPVOID lpContext);
// HRESULT __stdcall DirectInputCreateA(HINSTANCE hinst, DWORD dwVersion, LPDIRECTINPUTA *ppDI, LPUNKNOWN punkOuter);
// HRESULT __stdcall DirectPlayLobbyCreateA(LPGUID, LPDIRECTPLAYLOBBYA *, IUnknown *, LPVOID, DWORD);
// BOOL __stdcall DeleteDC(HDC hdc);
// HGDIOBJ __stdcall SelectObject(HDC hdc, HGDIOBJ h);
// HDC __stdcall CreateCompatibleDC(HDC hdc);
// int __stdcall GetObjectA(HANDLE h, int c, LPVOID pv);
// UINT __stdcall GetSystemPaletteEntries(HDC hdc, UINT iStart, UINT cEntries, LPPALETTEENTRY pPalEntries);
// int __stdcall GetDeviceCaps(HDC hdc, int index);
// BOOL __stdcall DeleteObject(HGDIOBJ ho);
// BOOL __stdcall StretchBlt(HDC hdcDest, int xDest, int yDest, int wDest, int hDest, HDC hdcSrc, int xSrc, int ySrc, int wSrc, int hSrc, DWORD rop);
// COLORREF __stdcall SetPixel(HDC hdc, int x, int y, COLORREF color);
// COLORREF __stdcall GetPixel(HDC hdc, int x, int y);
// HGDIOBJ __stdcall GetStockObject(int i);
// void __stdcall InitializeCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// FARPROC __stdcall GetProcAddress(HMODULE hModule, LPCSTR lpProcName);
// HMODULE __stdcall LoadLibraryA(LPCSTR lpLibFileName);
// BOOL __stdcall FreeLibrary(HMODULE hLibModule);
// HANDLE __stdcall CreateEventA(LPSECURITY_ATTRIBUTES lpEventAttributes, BOOL bManualReset, BOOL bInitialState, LPCSTR lpName);
// void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// HANDLE __stdcall CreateThread(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPTHREAD_START_ROUTINE lpStartAddress, LPVOID lpParameter, DWORD dwCreationFlags, LPDWORD lpThreadId);
// BOOL __stdcall GetVolumeInformationA(LPCSTR lpRootPathName, LPSTR lpVolumeNameBuffer, DWORD nVolumeNameSize, LPDWORD lpVolumeSerialNumber, LPDWORD lpMaximumComponentLength, LPDWORD lpFileSystemFlags, LPSTR lpFileSystemNameBuffer, DWORD nFileSystemNameSize);
// UINT __stdcall GetDriveTypeA(LPCSTR lpRootPathName);
// BOOL __stdcall QueryPerformanceFrequency(LARGE_INTEGER *lpFrequency);
// BOOL __stdcall QueryPerformanceCounter(LARGE_INTEGER *lpPerformanceCount);
// int __stdcall lstrlenA(LPCSTR lpString);
// BOOL __stdcall SetEvent(HANDLE hEvent);
// void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall __noreturn ExitThread(DWORD dwExitCode);
// HGLOBAL __stdcall GlobalAlloc(UINT uFlags, SIZE_T dwBytes);
// LPVOID __stdcall GlobalLock(HGLOBAL hMem);
// HGLOBAL __stdcall GlobalHandle(LPCVOID pMem);
// BOOL __stdcall GlobalUnlock(HGLOBAL hMem);
// HGLOBAL __stdcall GlobalFree(HGLOBAL hMem);
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
// LPSTR __stdcall lstrcpyA(LPSTR lpString1, LPCSTR lpString2);
// BOOL __stdcall GetVersionExA(LPOSVERSIONINFOA lpVersionInformation);
// DWORD __stdcall WaitForSingleObject(HANDLE hHandle, DWORD dwMilliseconds);
// LPWCH __stdcall GetEnvironmentStringsW();
// LPCH __stdcall GetEnvironmentStrings();
// BOOL __stdcall FreeEnvironmentStringsW(LPWCH penv);
// BOOL __stdcall FreeEnvironmentStringsA(LPCH penv);
// UINT __stdcall GetOEMCP();
// UINT __stdcall GetACP();
// BOOL __stdcall GetCPInfo(UINT CodePage, LPCPINFO lpCPInfo);
// DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// SIZE_T __stdcall HeapSize(HANDLE hHeap, DWORD dwFlags, LPCVOID lpMem);
// int __stdcall WideCharToMultiByte(UINT CodePage, DWORD dwFlags, LPCWCH lpWideCharStr, int cchWideChar, LPSTR lpMultiByteStr, int cbMultiByte, LPCCH lpDefaultChar, LPBOOL lpUsedDefaultChar);
// void __stdcall RaiseException(DWORD dwExceptionCode, DWORD dwExceptionFlags, DWORD nNumberOfArguments, const ULONG_PTR *lpArguments);
// BOOL __stdcall WriteFile(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
// HANDLE __stdcall GetStdHandle(DWORD nStdHandle);
// DWORD __stdcall GetVersion();
// LPSTR __stdcall GetCommandLineA();
// BOOL __stdcall FileTimeToLocalFileTime(const FILETIME *lpFileTime, LPFILETIME lpLocalFileTime);
// BOOL __stdcall FileTimeToSystemTime(const FILETIME *lpFileTime, LPSYSTEMTIME lpSystemTime);
// BOOL __stdcall CloseHandle(HANDLE hObject);
// HANDLE __stdcall CreateMutexA(LPSECURITY_ATTRIBUTES lpMutexAttributes, BOOL bInitialOwner, LPCSTR lpName);
// DWORD __stdcall WaitForMultipleObjects(DWORD nCount, const HANDLE *lpHandles, BOOL bWaitAll, DWORD dwMilliseconds);
// void __stdcall Sleep(DWORD dwMilliseconds);
// void __stdcall GlobalMemoryStatus(LPMEMORYSTATUS lpBuffer);
// BOOL __stdcall ReleaseMutex(HANDLE hMutex);
// void __stdcall OutputDebugStringA(LPCSTR lpOutputString);
// DWORD __stdcall GetFullPathNameA(LPCSTR lpFileName, DWORD nBufferLength, LPSTR lpBuffer, LPSTR *lpFilePart);
// DWORD __stdcall GetCurrentDirectoryA(DWORD nBufferLength, LPSTR lpBuffer);
// DWORD __stdcall GetLastError();
// LPVOID __stdcall HeapAlloc(HANDLE hHeap, DWORD dwFlags, SIZE_T dwBytes);
// void __stdcall RtlUnwind(PVOID TargetFrame, PVOID TargetIp, PEXCEPTION_RECORD ExceptionRecord, PVOID ReturnValue);
// MMRESULT __stdcall acmMetrics(HACMOBJ hao, UINT uMetric, LPVOID pMetric);
// int __stdcall ReleaseDC(HWND hWnd, HDC hDC);
// int wsprintfA(LPSTR, LPCSTR, ...);
// BOOL __stdcall PostMessageA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// int __stdcall MessageBoxA(HWND hWnd, LPCSTR lpText, LPCSTR lpCaption, UINT uType);
// BOOL __stdcall RedrawWindow(HWND hWnd, const RECT *lprcUpdate, HRGN hrgnUpdate, UINT flags);
// BOOL __stdcall SetForegroundWindow(HWND hWnd);
// BOOL __stdcall BringWindowToTop(HWND hWnd);
// BOOL __stdcall ShowWindow(HWND hWnd, int nCmdShow);
// HWND __stdcall GetLastActivePopup(HWND hWnd);
// BOOL __stdcall IsIconic(HWND hWnd);
// DWORD __stdcall GetWindowThreadProcessId(HWND hWnd, LPDWORD lpdwProcessId);
// HWND __stdcall GetForegroundWindow();
// HWND __stdcall FindWindowA(LPCSTR lpClassName, LPCSTR lpWindowName);
// SHORT __stdcall GetAsyncKeyState(int vKey);
// LRESULT __stdcall SendMessageA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// BOOL __stdcall IsWindow(HWND hWnd);
// LONG __stdcall SetWindowLongA(HWND hWnd, int nIndex, LONG dwNewLong);
// BOOL __stdcall GetWindowRect(HWND hWnd, LPRECT lpRect);
// HCURSOR __stdcall SetCursor(HCURSOR hCursor);
// BOOL __stdcall InvalidateRect(HWND hWnd, const RECT *lpRect, BOOL bErase);
// LONG __stdcall GetWindowLongA(HWND hWnd, int nIndex);
// HWND __stdcall CreateWindowExA(DWORD dwExStyle, LPCSTR lpClassName, LPCSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam);
// BOOL __stdcall UpdateWindow(HWND hWnd);
// BOOL __stdcall DestroyWindow(HWND hWnd);
// HCURSOR __stdcall LoadCursorA(HINSTANCE hInstance, LPCSTR lpCursorName);
// HICON __stdcall LoadIconA(HINSTANCE hInstance, LPCSTR lpIconName);
// ATOM __stdcall RegisterClassA(const WNDCLASSA *lpWndClass);
// HACCEL __stdcall LoadAcceleratorsA(HINSTANCE hInstance, LPCSTR lpTableName);
// BOOL __stdcall PeekMessageA(LPMSG lpMsg, HWND hWnd, UINT wMsgFilterMin, UINT wMsgFilterMax, UINT wRemoveMsg);
// int __stdcall TranslateAcceleratorA(HWND hWnd, HACCEL hAccTable, LPMSG lpMsg);
// BOOL __stdcall TranslateMessage(const MSG *lpMsg);
// LRESULT __stdcall DispatchMessageA(const MSG *lpMsg);
// BOOL __stdcall UnregisterClassA(LPCSTR lpClassName, HINSTANCE hInstance);
// int __stdcall LoadStringA(HINSTANCE hInstance, UINT uID, LPSTR lpBuffer, int cchBufferMax);
// LRESULT __stdcall DefWindowProcA(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// HWND __stdcall GetActiveWindow();
// BOOL __stdcall KillTimer(HWND hWnd, UINT_PTR uIDEvent);
// UINT_PTR __stdcall SetTimer(HWND hWnd, UINT_PTR nIDEvent, UINT uElapse, TIMERPROC lpTimerFunc);
// UINT __stdcall RegisterWindowMessageA(LPCSTR lpString);
// HWND __stdcall GetDesktopWindow();
// HANDLE __stdcall LoadImageA(HINSTANCE hInst, LPCSTR name, UINT type, int cx, int cy, UINT fuLoad);
// BOOL __stdcall DrawMenuBar(HWND hWnd);
// HDC __stdcall GetDC(HWND hWnd);
// LONG __stdcall mmioRead(HMMIO hmmio, HPSTR pch, LONG cch);
// MMRESULT __stdcall mmioAdvance(HMMIO hmmio, LPMMIOINFO pmmioinfo, UINT fuAdvance);
// MMRESULT __stdcall mmioSetInfo(HMMIO hmmio, LPCMMIOINFO pmmioinfo, UINT fuInfo);
// LONG __stdcall mmioSeek(HMMIO hmmio, LONG lOffset, int iOrigin);
// HMMIO __stdcall mmioOpenA(LPSTR pszFileName, LPMMIOINFO pmmioinfo, DWORD fdwOpen);
// MMRESULT __stdcall mmioDescend(HMMIO hmmio, LPMMCKINFO pmmcki, const MMCKINFO *pmmckiParent, UINT fuDescend);
// MMRESULT __stdcall mmioAscend(HMMIO hmmio, LPMMCKINFO pmmcki, UINT fuAscend);
// MMRESULT __stdcall mmioClose(HMMIO hmmio, UINT fuClose);
// MMRESULT __stdcall timeEndPeriod(UINT uPeriod);
// MMRESULT __stdcall timeBeginPeriod(UINT uPeriod);
// DWORD __stdcall timeGetTime();
// MCIERROR __stdcall mciSendCommandA(MCIDEVICEID mciId, UINT uMsg, DWORD_PTR dwParam1, DWORD_PTR dwParam2);
// MMRESULT __stdcall mmioGetInfo(HMMIO hmmio, LPMMIOINFO pmmioinfo, UINT fuInfo);
// HRESULT __stdcall CoInitialize(LPVOID pvReserved);
// void __stdcall CoUninitialize();
// HRESULT __stdcall CoCreateInstance(const IID *const rclsid, LPUNKNOWN pUnkOuter, DWORD dwClsContext, const IID *const riid, LPVOID *ppv);

//-------------------------------------------------------------------------
// Data declarations

DIDATAFORMAT g_diMouseDataFormat = {24u, 16u, 2u, 16u, 7u, &off_1007ACB0};
DIDATAFORMAT g_lpcDiDataFormat = {24u, 16u, 2u, 256u, 256u, &off_1007AD40};
DIDATAFORMAT g_diDataFormat = {24u, 16u, 1u, 272u, 164u, &off_1007BD60};
PodVtbl gPodVtbl = {&meth_Pod_100085C0,
                    &meth_Pod_CleanupName,
                    &meth_Pod_10008670,
                    &meth_Pod_GetNumForNameWrapper,
                    &meth_Pod_GetPodLength,
                    &meth_Pod_ReadPod,
                    &meth_Pod_100088B0,
                    &meth_Pod_LoadPod0,
                    &meth_Pod_10008890,
                    &meth_Pod_LoadPod,
                    &meth_Pod_ReadPodFile,
                    &meth_Pod_100089C0,
                    &meth_Pod_Add,
                    &meth_Pod_10008AA0,
                    &meth_Pod_CleanUpPod};
int dword_1008F538 = -1363573792; // weak
unk1E214Vtbl gUnk1E214Vtbl1 = {&meth_1E214_0,
                               &meth_unk1E214_1,
                               &meth_unk1E214_2,
                               &meth_unk1E214_3,
                               &meth_unk1E214_4,
                               &meth_unk1E214_5,
                               &meth_unk1E214_6,
                               &meth_unk1E214_7,
                               &meth_unk1E214_8,
                               &meth_unk1E214_9,
                               &meth_unk1E214_10,
                               &meth_unk1E214_11,
                               &meth_unk1E214_12,
                               &meth_unk1E214_13,
                               &meth_unk1E214_14,
                               &meth_unk1E214_15};
unk00348Vtbl gUnk00348Vtbl = {&meth_unk00348_0, &meth_unk00348_1};
unk000C8Vtbl gUnkC8Vtbl = {&meth_unk000C8_0,
                           &meth_unk000C8_1,
                           &meth_unk000C8_2,
                           &meth_unk000C8_3,
                           &meth_unk000C8_4,
                           &meth_unk000C8_5,
                           &meth_unk000C8_6,
                           &meth_unk000C8_7,
                           &meth_unk000C8_8};
unk00438Vtbl gUnk00438Vtbl = {&meth_unk00438_0,
                              &meth_unk00438_1,
                              &meth_unk00438_2,
                              &meth_unk00438_3,
                              &meth_unk00438_4,
                              &meth_unk00438_5,
                              &meth_unk00438_6,
                              &meth_unk00438_7,
                              &meth_unk00438_8,
                              &meth_unk00438_9,
                              &meth_unk00438_10,
                              &meth_unk00438_11};
unk1A5E0Vtbl gUnk1A5E0Vtbl = {&meth_unk1A5E0_0,
                              &meth_unk1A5E0_1,
                              &meth_unk1A5E0_2,
                              &meth_unk1A5E0_3,
                              &meth_unk1A5E0_4,
                              &meth_unk1A5E0_5,
                              &meth_unk1A5E0_6,
                              &meth_unk1A5E0_7,
                              &meth_unk1A5E0_8,
                              &meth_unk1A5E0_9,
                              &meth_unk1A5E0_10,
                              &meth_unk1A5E0_11};
unk06594Vtbl gUnk06594Vtbl = {&meth_unk06594_0,
                              &meth_unk06594_1,
                              &meth_unk06594_2,
                              &meth_unk06594_3,
                              &meth_unk06594_4,
                              &meth_unk06594_5,
                              &meth_unk06594_6};
_UNKNOWN unk_1008FA64; // weak
GUID CLSID_IDirectDraw2 = {
    3014063072u, 11075u, 4559u, {162u, 222u, 0u, 170u, 0u, 185u, 51u, 86u}}; // idb
GUID CLSID_IDirectDrawSurface2 = {
    1468029061u, 28396u, 4559u, {148u, 65u, 168u, 35u, 3u, 193u, 14u, 39u}}; // idb
GUID CLSID_IDirect3D2 = {
    1789796033u, 26154u, 4560u, {136u, 157u, 0u, 170u, 0u, 187u, 183u, 106u}}; // idb
GUID CLSID_IDirect3DRGBDevice = {
    2758171744u, 9843u, 4559u, {163u, 26u, 0u, 170u, 0u, 185u, 51u, 86u}}; // idb
GUID CLSID_IDirect3DMMXDevice = {
    2283358625u, 55027u, 4560u, {137u, 171u, 0u, 160u, 201u, 5u, 65u, 41u}}; // idb
GUID CLSID_IDirect3DTexture2 = {
    2468877570u, 36088u, 4560u, {137u, 171u, 0u, 160u, 201u, 5u, 65u, 41u}}; // idb
GUID CLSID_GUID_SysMouse = {
    1864182624u, 54688u, 4559u, {191u, 199u, 68u, 69u, 83u, 84u, 0u, 0u}}; // idb
GUID CLSID_GUID_SysKeyboard = {
    1864182625u, 54688u, 4559u, {191u, 199u, 68u, 69u, 83u, 84u, 0u, 0u}}; // idb
const IID IID_IDirectPlay3A = {
    322895425u, 13020u, 4560u, {156u, 251u, 0u, 160u, 201u, 10u, 67u, 203u}}; // idb
IID IID_IDirectPlay4A = {
    179422513u, 18245u, 4561u, {167u, 161u, 0u, 0u, 248u, 3u, 171u, 252u}}; // weak
const IID CLSID_DirectPlay = {
    3521867040u, 35107u, 4560u, {157u, 151u, 0u, 160u, 201u, 10u, 67u, 203u}}; // idb
IID IID_IDirectPlay2 = {
    1750844416u, 40236u, 4559u, {169u, 205u, 0u, 170u, 0u, 104u, 134u, 227u}}; // weak
IID IID_IDirectPlay2A = {
    921263840u, 34167u, 4559u, {150u, 12u, 0u, 128u, 199u, 83u, 78u, 130u}}; // weak
IID DPSPGUID_SERIAL = {
    253585504u, 35033u, 4559u, {156u, 78u, 0u, 160u, 201u, 5u, 66u, 94u}}; // weak
IID DPSPGUID_MODEM = {
    1156228960u, 52072u, 4559u, {156u, 78u, 0u, 160u, 201u, 5u, 66u, 94u}}; // weak
IID IID_IDirectPlayLobby2A = {
    464826240u, 41731u, 4560u, {156u, 79u, 0u, 160u, 201u, 5u, 66u, 94u}}; // weak
const IID IID_IDirectPlayLobby3A = {
    766977169u, 25900u, 4561u, {167u, 168u, 0u, 0u, 248u, 3u, 171u, 252u}}; // idb
const IID CLSID_DirectPlayLobby = {
    803797008u, 45733u, 4560u, {167u, 135u, 0u, 0u, 248u, 3u, 171u, 252u}}; // idb
int dword_100909E0 = -153304576;                                            // weak
int gPlayMusic = 2;                                                         // weak
_DWORD dword_100940A8 = 100;                                                // idb
char aCdaudio[8] = "cdaudio";                                               // weak
char kFilepathErrorLog[] = "c:\\RallyError.txt";                            // idb
char kFileModeWrite[] = "w";                                                // idb
char kFileModeReadBinary[] = "rb";                                          // idb
char aChkFreadopenSz[] = "CHK_FReadOpen():szName";                          // idb
char aChkFreadopenPf[] = "CHK_FReadOpen():pfil";                            // idb
int dword_10094294 = -1;                                                    // weak
int dword_10094298 = -1;                                                    // weak
CHAR aReturnedToRace[] = " returned to race lobby.";                        // idb
CHAR aLeftTheRace[] = " left the race.";                                    // idb
char aBootedYouFromT[27] = " booted you from the game.";                    // weak
char asc_10094334[3] = ": ";                                                // weak
int gHandlingType = 1;                                                      // weak
int gTransmissionType = 1;                                                  // weak
int gSuspensionType = 1;                                                    // weak
int gTireType = 2;
CHAR kDebugStrCheckPreviousApp[] =
    "CheckPrevious App - Another instance of this app is already running.\n"; // idb
CHAR kClassName[] = "BossRally";                                              // idb
CHAR kWindowName[] = "Boss Rally";                                            // idb
char aBsuspension[] = "bsuspension=";                                         // idb
char aBtire[] = "btire=";                                                     // idb
char aBcar[] = "bcar=";                                                       // idb
char SubStr[] = "cPlayers=";                                                  // idb
char kSZPlayerNameEq[] = "szPlayerName=";                                     // idb
char kD3DInvSrcAlphaEq[] = "D3DInvSrcAlpha=";                                 // idb
char kD3DWaitFlipDoneEq[] = "D3DWaitFlipDone=";                               // idb
char kD3DWaitCanFlipEq[] = "D3DWaitCanFlip=";                                 // idb
char kD3DClearZBufferEq[] = "D3DClearZBuffer=";                               // idb
char kD3DAlwaysSquareTextures[] = "D3DAlwaysSquareTextures=";                 // idb
char kD3DAlphaCompareEq[] = "D3DAlphaCompare=";                               // idb
char kPlaySFXEq[] = "PlaySFX=";                                               // idb
char kPlayMusicEq[] = "PlayMusic=";                                           // idb
char kRunBenchmarkEq[] = "RunBenchmark=";                                     // idb
char kD3DDrawCarShadowEq[] = "D3DDrawCarShadow=";                             // idb
char kSpeedSensitiveEq[] = "SpeedSensitive=";                                 // idb
char kInterpolateEq[] = "Interpolate=";                                       // idb
char kSFXDirEq[] = "SFXDir=";                                                 // idb
char kCarDirEq[] = "CarDir=";                                                 // idb
char kTrackDirEq[] = "TrackDir=";                                             // idb
char kTransmissionTypeEq[] = "TransmissionType=";                             // idb
char kTireTypeEq[] = "TireType=";                                             // idb
char kSuspensionTypeEq[] = "SuspensionType=";                                 // idb
char kHandlingTypeEq[] = "HandlingType=";                                     // idb
char kReadJoystickEq[] = "ReadJoystick=";                                     // idb
char kGameModeeEq[] = "gameMode=";                                            // idb
char kChosenWeatherEq[] = "chosenWeather=";                                   // idb
char kChosenCarEq[] = "chosenCar=";                                           // idb
char kChosenTrackEq[] = "chosenTrack=";                                       // idb
char kNetworkPlayEq[] = "NetworkPlay=";                                       // idb
char kBossRallyIni[14] = "BossRally.ini";                                     // weak
char kErrorMessageCleanupNameNameTooLong[] =
    "CleanupName: Name is greater than 64 bytes. Memory Corrupted!"; // idb
char aPod[] = "POD";                                                 // idb
char aAddNameIsTooLo[] = "Add: Name is too long to be a pod name.";  // idb
char kFileModeWriteBinary[] = "wb";                                  // idb
char aFileReadFailur[] = "File read failure";                        // idb
char byte_100A5FEF[129] = {
    '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',
    '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',
    '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\0',   '\r',   '\x16', '\x0E',
    '\x0F', '\v',   '\x10', '\x15', '\v',   '\v',   '\x18', '\x12', '\n',   '\x11', '\v',   '\x17',
    '\t',   '\0',   '\x01', '\x02', '\x03', '\x04', '\x05', '\x06', '\a',   '\b',   '\x14', '\x13',
    '\v',   '\x19', '\v',   '\f',   '\x1A', '\x1C', '\x1D', '\x1E', '\x1F', ' ',    '!',    '\"',
    '#',    '$',    '%',    '&',    '\'',   '(',    ')',    '*',    '+',    ',',    '-',    '.',
    '/',    '0',    '1',    '2',    '3',    '4',    '5',    '\v',   '\v',   '\v',   '\v',   '\v',
    '\v',   '\x1C', '\x1D', '\x1E', '\x1F', ' ',    '!',    '\"',   '#',    '$',    '%',    '&',
    '\'',   '(',    ')',    '*',    '+',    ',',    '-',    '.',    '/',    '0',    '1',    '2',
    '3',    '4',    '5',    '\v',   '\v',   '\v',   '\v',   '\v',   '\v'}; // idb
int dword_100A6070[] = {0};                                                // weak
int dword_100A60E0[] = {0};                                                // weak
int dword_100A6150[] = {0};                                                // weak
int dword_100A61C0[] = {0};                                                // weak
int dword_100A6230 = 2;                                                    // weak
intptr_t gD3DEnumTextureFormatsContextStart = 0;
int gD3DWaitCanFlip = 1;                                  // weak
int gD3DWaitFlipDone = 1;                                 // weak
CHAR gMessageBoxText[] = "This game requires DirectX 6."; // idb
CHAR gMessageBoxCaption[] = "Boss Rally Error";           // idb
CHAR aDdcopybitmapFa[] = "ddcopybitmap failed\n";         // idb
CHAR aHandleIsNull[] = "handle is null\n";                // idb
CHAR aCreatecompatib[] = "createcompatible dc failed\n";  // idb
int dword_100A6380 = 1;                                   // weak
char aAppmsgBootplay[] = "APPMSG_BOOTPLAYER: received\n"; // idb
char aAppmsgHoststar[] = "APPMSG_HOSTSTARTED: received";  // idb
CHAR aSJoinedTheGame[] = "%s joined the game.\r\n";       // idb
CHAR String[] = "%s left the game.\r\n";                  // idb
char aUnknown[8] = "unknown";                             // weak
void *off_100A6498 = &lutBuffer_0;                        // weak
void *off_100A649C = &ciBuffer_0;                         // weak
void *off_100A64A0 = &ciBuffer_0;                         // weak
char byte_100A64B8[16] = {'\x03',
                          '\x03',
                          '\0',
                          '\x01',
                          '\x02',
                          '\x02',
                          '\0',
                          '\0',
                          '\f',
                          '\0',
                          '\0',
                          '\0',
                          '\0',
                          '\0',
                          '\0',
                          '\0'};                         // idb
void *off_100A64C8 = &unk_10850001;                      // weak
char byte_100A64F8[] = {'\0'};                           // weak
char byte_100A64F9[] = {'\0'};                           // weak
char byte_100A64FA[] = {'\0'};                           // weak
int dword_100A65D8[4] = {2, 1, 3, 0};                    // idb
char aBadVtxDl[11] = "BAD VTX DL";                       // weak
int dword_100A66E8 = 1;                                  // weak
int gInterpolate = 1;                                    // weak
char (*off_100A66FC)[8] = &String2;                      // weak
float flt_100A6CF0 = 30.0;                               // weak
float flt_100A6CF4 = 30.0;                               // weak
int dword_100A6CF8 = 2;                                  // weak
void *dword_100A6CFC = (void *)0xFFFFFFFF;               // idb
char aRy_0[4] = "%ry";                                   // weak
char aY1[4] = "%y1";                                     // weak
int dword_100A73A8[] = {-1};                             // weak
char aWw[4] = "%ww";                                     // weak
char asc_100A73D4[2] = "L";                              // weak
char aRyD[] = "%%ry%d.";                                 // idb
char aY1D[8] = "%%y1%d.";                                // weak
int dword_100A74A8 = 255;                                // weak
int dword_100A74AC = 255;                                // weak
int dword_100A74B0 = 255;                                // weak
float flt_100A79C8 = 0.5;                                // weak
int dword_100A79CC = -1;                                 // weak
char aUnknown_0[8] = "UNKNOWN";                          // weak
int gD3DInvSrcAlpha = 2;                                 // weak
int dword_100A79DC = 1;                                  // weak
float flt_100A79E0 = 0.46000001;                         // weak
float flt_100A79E4 = 0.46000001;                         // weak
int dword_100A79E8 = 1065353216;                         // weak
int(__cdecl *off_100A79EC)(_DWORD) = &graphics_1001BC90; // weak
int(__cdecl *funcs_10024A9E[4])(int) = {
    &sub_100243D0, &sub_10020DC0, &sub_100243D0, &sub_10024150}; // weak
int(__cdecl *off_100A7A00[180])(int) = {
    &sub_10021BD0, &sub_100243D0, &sub_10020D60, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &graphics_1001E170, &sub_100243D0,
    &sub_100243D0, &sub_100243D0, &sub_100243D0, &sub_1001E790,      &sub_10020F20}; // weak
int(__cdecl *off_100A7CB4[7])(int) = {&graphics_1001E170,
                                      &sub_100243D0,
                                      &sub_100243D0,
                                      &sub_100243D0,
                                      &sub_100243D0,
                                      &sub_1001E790,
                                      &sub_10020F20}; // weak
int(__cdecl *off_100A7CEC[65])(int) = {
    &graphics_1001CFF0, &sub_100243D0,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &graphics_1001BD70, &sub_1001BE10,      &sub_1001CD60,
    &sub_1001CD80,      &sub_100243D0,      &graphics_1001C7A0, &graphics_1001CE70,
    &sub_10021B80,      &sub_10021510,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &graphics_1001CDA0, &sub_100243D0,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &sub_1001CF30,
    &sub_100243D0,      &sub_100243D0,      &sub_100243D0,      &graphics_1001BE30,
    &sub_1001CC00,      &graphics_1001CC70, &sub_100243D0,      &sub_1001CCA0,
    &sub_1001CB40,      &graphics_1001C7F0, &sub_100243D0,      &sub_100243D0,
    &sub_100243D0};                                          // weak
void *off_100A7DF0 = &unk_104C59A8;                          // weak
int dword_100A7DF4 = 32;                                     // idb
int dword_100A7DF8 = 32;                                     // idb
int dword_100A7DFC = 64;                                     // weak
int dword_100A7E00 = 64;                                     // weak
int dword_100A7E04 = 32;                                     // weak
int dword_100A7E08 = 32;                                     // weak
char aAppendtextureA[20] = "AppendTexture: atdb";            // weak
char aTidfromtexture[] = "TIDFromTextureAppend: amid";       // idb
CHAR aEarInteractive[] = "EAR Interactive Around-Sound";     // idb
CHAR aEarDllUpdateea[] = "_EAR_DLL_UpdateEar@0";             // idb
CHAR aEarDllShutdown_6[] = "_EAR_DLL_ShutDownTimer@0";       // idb
CHAR aEarDllStarttim[] = "_EAR_DLL_StartTimer@0";            // idb
CHAR aEarDllStarteve[] = "_EAR_DLL_StartEvent@4";            // idb
CHAR aEarDllShutdown_5[] = "_EAR_DLL_ShutDownPreset@4";      // idb
CHAR aEarDllShutdown_4[] = "_EAR_DLL_ShutDownMatrix@4";      // idb
CHAR aEarDllShutdown_3[] = "_EAR_DLL_ShutDownEvent@8";       // idb
CHAR aEarDllShutdown_2[] = "_EAR_DLL_ShutDownEnvironment@4"; // idb
CHAR aEarDllShutdown_1[] = "_EAR_DLL_ShutDownEar@0";         // idb
CHAR aEarDllShutdown_0[] = "_EAR_DLL_ShutDownChannel@4";     // idb
CHAR aEarDllShutdown[] = "_EAR_DLL_ShutDownBank@4";          // idb
CHAR aEarDllShowlast[] = "_EAR_DLL_ShowLastError@0";         // idb
CHAR aEarDllSetuserd[] = "_EAR_DLL_SetUserDistanceUnit@8";   // idb
CHAR aEarDllSetatten[] = "_EAR_DLL_SetAttenuationLevel@8";   // idb
CHAR aEarDllResetear[] = "_EAR_DLL_ResetEar@0";              // idb
CHAR aEarDllRegister_3[] = "_EAR_DLL_RegisterPreset@8";      // idb
CHAR aEarDllRegister_2[] = "_EAR_DLL_RegisterMatrix@4";      // idb
CHAR aEarDllRegister_1[] = "_EAR_DLL_RegisterEnvironment@4"; // idb
CHAR aEarDllRegister_0[] = "_EAR_DLL_RegisterChannel@16";    // idb
CHAR aEarDllRegister[] = "_EAR_DLL_RegisterBank@8";          // idb
CHAR aEarDllMoveeven[] = "_EAR_DLL_MoveEvent@4";             // idb
CHAR aEarDllMixevent[] = "_EAR_DLL_MixEvent@4";              // idb
CHAR aEarDllInitiali[] = "_EAR_DLL_InitializeEar@4";         // idb
CHAR aEarDllGetversi[] = "_EAR_DLL_GetVersion@0";            // idb
CHAR aEarDllGetlaste[] = "_EAR_DLL_GetLastError@0";          // idb
CHAR aEarDllGetevent[] = "_EAR_DLL_GetEventStatus@8";        // idb
CHAR aEarDllEarinact[] = "_EAR_DLL_EarInactive@0";           // idb
CHAR aEarDllClearcha[] = "_EAR_DLL_ClearChannel@8";          // idb
CHAR aEarDllChangech[] = "_EAR_DLL_ChangeChannelControl@8";  // idb
CHAR aEarDllAssignhw[] = "_EAR_DLL_AssignHwnd@4";            // idb
CHAR ProcName[] = "_EAR_DLL_AAA_Validate@4";                 // idb
char aEariasDll[11] = "earias.dll";                          // weak
CHAR aEarpdsDll[] = "earpds.dll";                            // idb
int dword_100A81A8 = 1;                                      // weak
int dword_100A81AC = 1065353216;                             // weak
float flt_100A81B0 = 1.0;                                    // weak
int dword_100A81B4 = 1065353216;                             // weak
float flt_100A81B8 = 1.0;                                    // weak
int dword_100A81BC = 2;                                      // weak
int gWidth = 640;                                            // weak
int gHeight = 480;                                           // weak
void *off_100A81C8 = &unk_10575540;                          // weak
int dword_100AA008 = 5;                                      // weak
int dword_100AA00C = -1;                                     // weak
enum MACRO_GAME_MODE gGameMode = GAME_MODE_1;
char (*off_100AA018)[8] = &String2;                                  // weak
float flt_100AA01C[] = {4.0};                                        // weak
char (*off_100AA020)[8] = &String2;                                  // weak
float flt_100AA1F8[6] = {2.1500001, 1.5, 0.85000002, 0.2, 0.0, 0.0}; // idb
char byte_100AA210[24] = {'\t', '\x06', '\x05', '\x03', '\x02', '\x01', '\0', '\0',
                          '\0', '\0',   '\0',   '\0',   '\0',   '\0',   '\0', '\0',
                          '\0', '\0',   '\0',   '\0',   '\0',   '\0',   '\0', '\0'}; // idb
int dword_100AA228[] = {0};                                                          // weak
float flt_100AA22C[15] = {
    0.0, ? flt, 2.2, ? flt, 2.3, ? flt, 2.0, ? flt, 0.0, ? flt, 2.0, ? flt, 2.0, ? flt, 0.0 }; // idb
int dword_100AA268[3] = {33, 33, 34};                                 // idb
char kRallyIntro2Dat[] = "RallyIntro2.dat";                           // idb
char kRallyIntro1Dat[16] = "RallyIntro1.dat";                         // weak
char aRallycreditsDa[] = "RallyCredits.dat";                          // idb
char kRallyOutroDat[] = "RallyOutro.dat";                             // idb
int dword_100AA5A8 = 1;                                               // weak
char aLoadingImg[12] = "loading.img";                                 // weak
int dword_100AA5D0[4] = {1077952512, -2139062272, -1061109760, -256}; // idb
CHAR aCouldnTCreates[] = "Couldn't CreateSurface\r\n";                // idb
CHAR aCouldnTSetCoop[] = "Couldn't Set coop level\r\n";               // idb
CHAR aCouldnTQiDdraw[] = "Couldn't QI DDraw2\r\n";                    // idb
CHAR aCouldnTCreateD[] = "Couldn't create DDraw\r\n";                 // idb
CHAR aCouldnTLoadlib_0[] = "Couldn't LoadLibrary DDraw\r\n";          // idb
CHAR aDirectdrawcrea[] = "DirectDrawCreate";                          // idb
CHAR LibFileName[] = "DDRAW.DLL";                                     // idb
CHAR aCouldnTGetproc[] = "Couldn't GetProcAddress DInputCreate\r\n";  // idb
CHAR aDirectinputcre[] = "DirectInputCreateA";                        // idb
CHAR aCouldnTLoadlib[] = "Couldn't LoadLibrary DInput\r\n";           // idb
CHAR g_DINPUT_DLL[] = "DINPUT.DLL";                                   // idb
int gD3dalphacompar = 1;                                              // weak
int dword_100AA728 = -2143612928;                                     // weak
int dword_100AA72C = -2143518720;                                     // weak
int dword_100AA87C = 1;                                               // weak
int dword_100AA880 = 1;                                               // weak
int dword_100AA884 = 1;                                               // weak
int dword_100AA888 = 3;                                               // weak
int dword_100AA890 = 1;                                               // weak
int dword_100AA894 = 1;                                               // weak
int dword_100AA89C = -1;                                              // weak
int dword_100AA8A0 = -1;                                              // weak
int g_BitDepth = 16;                                                  // weak
float flt_100AA8AC = 0.52359879;                                      // weak
float flt_100AA8B0 = 400.0;                                           // idb
int dword_100AA8B4 = 1;                                               // weak
int dword_100AA8B8[] = {-65896952};                                   // weak
int dword_100AA8BC[] = {-201329928};                                  // weak
int dword_100AA8C0[] = {-64577532};                                   // weak
int dword_100AA8C4[] = {536646648};                                   // weak
int dword_100AA8C8[] = {-50356220};                                   // weak
int dword_100AA8CC[3] = {-158728, -61800956, 1073607672};             // idb
int dword_100AAB18 = 14;                                              // weak
char aHugeGlistError[17] = "HUGE GLIST ERROR";                        // weak
char aLoadcar[10] = "LoadCar()";                                      // weak
char kRCar[] = "RCar";                                                // idb
char kRCA[5] = ".rca";                                                // weak
char kHND[5] = ".hnd";                                                // weak
char kBossRallyPod[14] = "BossRally.pod";                             // weak
char *gPositionStrings[20] = {"First!", "Second!", "Third!", "Fourth.", "Fifth.", "Sixth.", "7th.",
                              "8th.",   "9th.",    "10th.",  "11th.",   "12th.",  "13th.",  "14th.",
                              "15th.",  "16th.",   "17th.",  "18th.",   "19th.",  "20th."}; // weak
char aSS_1[9] = "%s: %s\r\n";                                                               // weak
CHAR aSS_0[] = "%s%s\r\n";                                                                  // idb
char aDperrLogondeni[18] = "DPERR_LOGONDENIED";                                             // weak
char aDpOk[6] = "DP_OK";                                                                    // weak
char aDperrNotlogged[18] = "DPERR_NOTLOGGEDIN";                                             // weak
char aDperrCantloadc[19] = "DPERR_CANTLOADCAPI";                                            // weak
char aDperrEncryptio_0[29] = "DPERR_ENCRYPTIONNOTSUPPORTED";                                // weak
char aDperrCantloads_0[30] = "DPERR_CANTLOADSECURITYPACKAGE";                               // weak
char aDperrSignfaile[17] = "DPERR_SIGNFAILED";                                              // weak
char aDperrEncryptio[23] = "DPERR_ENCRYPTIONFAILED";                                        // weak
char aDperrCantloads[19] = "DPERR_CANTLOADSSPI";                                            // weak
char aDperrAuthentic[27] = "DPERR_AUTHENTICATIONFAILED";                                    // weak
char aDperrNotregist[20] = "DPERR_NOTREGISTERED";                                           // weak
char aDperrAlreadyre[24] = "DPERR_ALREADYREGISTERED";                                       // weak
char aDperrServicepr[28] = "DPERR_SERVICEPROVIDERLOADED";                                   // weak
char aDperrNotlobbie[17] = "DPERR_NOTLOBBIED";                                              // weak
char aDperrUnknownap[25] = "DPERR_UNKNOWNAPPLICATION";                                      // weak
char aDperrNoservice[24] = "DPERR_NOSERVICEPROVIDER";                                       // weak
char aDperrInvalidin[23] = "DPERR_INVALIDINTERFACE";                                        // weak
char aDperrAppnotsta[20] = "DPERR_APPNOTSTARTED";                                           // weak
char aDperrCantcreat_2[24] = "DPERR_CANTCREATEPROCESS";                                     // weak
char aDperrBuffertoo_0[21] = "DPERR_BUFFERTOOLARGE";                                        // weak
char aDperrConnectin[17] = "DPERR_CONNECTING";                                              // weak
char aDperrInvalidpa_0[22] = "DPERR_INVALIDPASSWORD";                                       // weak
char aDperrNonewplay[19] = "DPERR_NONEWPLAYERS";                                            // weak
char aDperrUninitial[20] = "DPERR_UNINITIALIZED";                                           // weak
char aDperrSessionlo[18] = "DPERR_SESSIONLOST";                                             // weak
char aDperrPlayerlos[17] = "DPERR_PLAYERLOST";                                              // weak
char aDperrCannotcre[25] = "DPERR_CANNOTCREATESERVER";                                      // weak
char aDperrUsercance[17] = "DPERR_USERCANCEL";                                              // weak
char aDperrBusy[11] = "DPERR_BUSY";                                                         // weak
char aDperrUnavailab[18] = "DPERR_UNAVAILABLE";                                             // weak
char aDperrTimeout[14] = "DPERR_TIMEOUT";                                                   // weak
char aDperrSendtoobi[17] = "DPERR_SENDTOOBIG";                                              // weak
char aDperrNosession[17] = "DPERR_NOSESSIONS";                                              // weak
char aDperrNoplayers[16] = "DPERR_NOPLAYERS";                                               // weak
char aDperrNonameser[24] = "DPERR_NONAMESERVERFOUND";                                       // weak
char aDperrNomessage[17] = "DPERR_NOMESSAGES";                                              // weak
char aDperrNoconnect[19] = "DPERR_NOCONNECTION";                                            // weak
char aDperrNocaps[13] = "DPERR_NOCAPS";                                                     // weak
char aDperrInvalidgr[19] = "DPERR_INVALIDGROUP";                                            // weak
char aDperrInvalidpl[20] = "DPERR_INVALIDPLAYER";                                           // weak
char aDperrInvalidob[20] = "DPERR_INVALIDOBJECT";                                           // weak
char aDperrInvalidfl[19] = "DPERR_INVALIDFLAGS";                                            // weak
char aDperrException[16] = "DPERR_EXCEPTION";                                               // weak
char aDperrCapsnotav[26] = "DPERR_CAPSNOTAVAILABLEYET";                                     // weak
char aDperrCantcreat_1[24] = "DPERR_CANTCREATESESSION";                                     // weak
char aDperrCantcreat_0[23] = "DPERR_CANTCREATEPLAYER";                                      // weak
char aDperrCantcreat[22] = "DPERR_CANTCREATEGROUP";                                         // weak
char aDperrCantaddpl[20] = "DPERR_CANTADDPLAYER";                                           // weak
char aDperrBuffertoo[21] = "DPERR_BUFFERTOOSMALL";                                          // weak
char aDperrActivepla[20] = "DPERR_ACTIVEPLAYERS";                                           // weak
char aDperrAccessden[19] = "DPERR_ACCESSDENIED";                                            // weak
char aDperrAlreadyin[25] = "DPERR_ALREADYINITIALIZED";                                      // weak
char aDperrInvalidpa[20] = "DPERR_INVALIDPARAMS";                                           // weak
char aDperrOutofmemo[18] = "DPERR_OUTOFMEMORY";                                             // weak
char aDperrGeneric[14] = "DPERR_GENERIC";                                                   // weak
char aDperrNointerfa[18] = "DPERR_NOINTERFACE";                                             // weak
char aDperrUnsupport[18] = "DPERR_UNSUPPORTED";                                             // weak
char aDperrPending[14] = "DPERR_PENDING";                                                   // weak
char aE_0[2] = "";                                                                         // weak
int dword_100AB334[] = {0};                                                                 // weak
int dword_100AB3D8 = 1;                                                                     // weak
__int16 word_100AB3DC = 1;                                                                  // weak
int dword_100AB3E0 = -1;                                                                    // weak
__int16 word_100AB3E4 = 258;                                                                // weak
int dword_100AB3E8 = 258;                                                                   // weak
int dword_100AB3EC = 36;                                                                    // weak
int Value = -1;                                                                             // idb
int dword_100AB3F8[4] = {484, 10, 621, 96};                                                 // idb
int dword_100AB408[4] = {32, 370, 610, 467};                                                // idb
int dword_100AB418 = 0;                                                                     // weak
int dword_100AB41C = 0;                                                                     // weak
int dword_100AB420 = 200;                                                                   // weak
int dword_100AB424 = 200;                                                                   // weak
int dword_100AB428 = 0;                                                                     // weak
int dword_100AB42C = 380;                                                                   // weak
int dword_100AB430 = 200;                                                                   // weak
int dword_100AB434 = 480;                                                                   // weak
_UNKNOWN unk_100AB438;                                                                      // weak
int dword_100AB448 = 148;                                                                   // weak
int dword_100AB44C = 110;                                                                   // weak
int dword_100AB450 = 358;                                                                   // weak
int dword_100AB454 = 260;                                                                   // weak
_UNKNOWN unk_100AB458;                                                                      // weak
_UNKNOWN unk_100AB468;                                                                      // weak
_UNKNOWN unk_100AB478;                                                                      // weak
_UNKNOWN unk_100AB488;                                                                      // weak
_UNKNOWN unk_100AB498;                                                                      // weak
_UNKNOWN unk_100AB4B8;                                                                      // weak
int dword_100AB4D8[4] = {188, 130, 300, 225};                                               // idb
int dword_100AB4E8[4] = {188, 130, 300, 197};                                               // idb
_UNKNOWN unk_100AB508;                                                                      // weak
int dword_100AB528[4] = {128, 76, 384, 209};                                                // idb
int dword_100AB538[4] = {188, 130, 300, 206};                                               // idb
int dword_100AB548[4] = {162, 130, 318, 206};                                               // idb
__int16 word_100AB568[] = {0};                                                              // weak
int dword_100AB56C[4] = {0, 0, 640, 480};                                                   // idb
int dword_100AB57C[30] = {0, 1,   0,   0, 28, 30, 1, 2,   0,   0, 128, 144, 1, 3,   0,
                          0, 128, 144, 1, 4,  0,  0, 128, 144, 1, 5,   0,   0, 204, 93}; // idb
int dword_100AB5F4 = 0;                                                                  // weak
int dword_100AB9C4 = 16;                                                                 // weak
int dword_100AB9C8 = 16;                                                                 // weak
int dword_100AB9EC = 0;                                                                  // weak
int dword_100AB9F0 = 0;                                                                  // weak
int dword_100AB9F4 = 16;                                                                 // weak
int dword_100AB9F8 = 16;                                                                 // weak
int dword_100AC300 = 1;                                                                  // weak
int dword_100AC304 = 1;                                                                  // weak
unsigned int dword_100AC308[16] = {119u,
                                   120u,
                                   121u,
                                   122u,
                                   123u,
                                   124u,
                                   119u,
                                   120u,
                                   121u,
                                   122u,
                                   123u,
                                   124u,
                                   0u,
                                   125u,
                                   125u,
                                   0u};                  // idb
unsigned int dword_100AC348[4] = {126u, 127u, 128u, 0u}; // idb
unsigned int dword_100AC358[4] = {129u, 127u, 130u, 0u}; // idb
unsigned int dword_100AC368[16] = {141u,
                                   142u,
                                   143u,
                                   144u,
                                   145u,
                                   146u,
                                   147u,
                                   148u,
                                   149u,
                                   150u,
                                   151u,
                                   152u,
                                   153u,
                                   154u,
                                   155u,
                                   156u};                            // idb
unsigned int dword_100AC3A8 = 117u;                                  // idb
unsigned int dword_100AC3B0[6] = {131u, 132u, 133u, 134u, 135u, 0u}; // idb
unsigned int dword_100AC3C8[6] = {157u, 158u, 159u, 160u, 161u, 0u}; // idb
unsigned int dword_100AC3E0[4] = {136u, 137u, 138u, 139u};           // idb
unsigned int dword_100AC3F0[4] = {85u, 86u, 87u, 140u};              // idb
int dword_100AC400[] = {115};                                        // weak
unsigned int dword_100AC408 = 115u;                                  // idb
unsigned int dword_100AC410 = 115u;                                  // idb
unsigned int dword_100AC418 = 115u;                                  // idb
int dword_100AC420[32] = {0,  1,  2,  3,  4,  5,  6,  7,  8,  9,  10, 11, 12, 13, 14, 15,
                          16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31}; // idb
int dword_100AC4A0[4] = {0, 1, 2, 0};                                                      // idb
int dword_100AC4B0[4] = {0, 1, 2, 0};                                                      // idb
int dword_100AC4C0[6] = {0, 1, 2, 3, 4, 0};                                                // idb
int dword_100AC4D8[16] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 0};            // idb
int dword_100AC518[] = {1};                                                                // weak
int dword_100AC520[4] = {0, 1, 2, 3};                                                      // idb
int dword_100AC530[] = {1};                                                                // weak
int dword_100AC538[] = {1};                                                                // weak
int dword_100AC540[] = {1};                                                                // weak
int dword_100AC548[] = {1};                                                                // weak
__int16 word_100AC550[16] = {
    16, 18, 17, 27, 28, 118, 16, 18, 17, 27, 28, 118, 0, 143, 143, 0}; // idb
__int16 word_100AC570[16] = {
    65, 62, 66, 63, 64, 119, 65, 62, 66, 63, 64, 119, 0, 144, 144, 0};              // idb
char byte_100AC590[8] = {'\x17', '\x13', '\x15', '\x16', '\x14', '\0', '\0', '\0'}; // idb
char byte_100AC598[4] = {'\x1D', '\f', '\0', '\0'};                                 // idb
char byte_100AC59C[4] = {'\x1A', '\x19', '\x18', '\0'};                             // idb
char byte_100AC5A0[8] = {'\r', '\x0E', '\x0F', '\0', '\0', '\0', '\0', '\0'};       // idb
__int16 word_100AC5A8[] = {31};                                                     // weak
char byte_100AC628[4] = {'2', '3', '1', '`'};                                       // idb
char byte_100AC62C[4] = {'E', 'D', 'C', 'F'};                                       // idb
char byte_100AC630[] = {'a'};                                                       // weak
char byte_100AC631 = 'f';                                                           // weak
char byte_100AC634[4] = {'c', 'b', '\0', '\0'};                                     // idb
char byte_100AC638[8] = {'e', 'd', '\0', '\0', '\0', '\0', '\0', '\0'};             // idb
__int16 word_100AC640[] = {140};                                                    // weak
int dword_100AC648 = 2;                                                             // weak
int dword_100AC64C = 1;                                                             // weak
int dword_100AC650 = 1;                                                             // weak
int dword_100AC654 = 1;                                                             // weak
int dword_100AC658 = 3;                                                             // weak
int dword_100AC65C = 4;                                                             // weak
int dword_100AC660[] = {1};                                                         // weak
unsigned int dword_100AC664[15] = {
    162u, 1u, 163u, 0u, 164u, 0u, 165u, 1u, 166u, 0u, 167u, 1u, 168u, 1u, 169u}; // idb
int dword_100AC6A0 = -1;                                                         // weak
__int16 word_100AC6A4 = 256;                                                     // weak
char *off_100AC6AC = "madeleine";                                                // weak
__int16 word_100AC6E4[] = {-1};                                                  // weak
__int16 word_100AC6E6[] = {-1};                                                  // weak
__int16 word_100AC6E8[] = {-1};                                                  // weak
__int16 word_100AC9DC = 36;                                                      // weak
__int16 word_100ACB5C[] = {-1};                                                  // weak
__int16 word_100ACB5E[] = {-1};                                                  // weak
__int16 word_100ACB60[] = {-1};                                                  // weak
_UNKNOWN unk_100ACE58;                                                           // weak
char byte_100ACE5C[] = {' '};                                                    // weak
char Mode[2] = "r";                                                              // idb
char a1[2] = "1";                                                                // weak
char a0[2] = "0";                                                                // weak
char kBackslash[] = "\\";                                                        // idb
char asc_100AD300[2] = " ";                                                      // weak
char asc_100AD304[3] = "  ";                                                     // weak
char asc_100AD308[6] = "--:--";                                                  // weak
char aAutosaveBrf[] = "AutoSave.brf";                                            // idb
char aBrf[5] = ".brf";                                                           // weak
char aRallyseason[12] = "RallySeason";                                           // weak
char aGrf[5] = ".grf";                                                           // weak
char aTimeattack[11] = "TimeAttack";                                             // weak
char aRallyseasonBrf[17] = "RallySeason*.BRF";                                   // weak
char aTimeattackGrf[16] = "TimeAttack*.GRF";                                     // weak
char kSeasondescDat[] = "seasondesc.dat";                                        // idb
char aCRallyghostDat[18] = "c:\\RallyGhost.dat";                                 // weak
char kCRallySeasonDatFilepath[19] = "c:\\RallySeason.dat";                       // weak
char aImagesTrakqBmp_0[18] = "images\\trakQ_.bmp";                               // weak
char aImagesTrakqBmp[17] = "images\\trakQ.bmp";                                  // weak
char aImagesListbox2[20] = "images\\listbox2.bmp";                               // weak
char aImagesTire2off[20] = "images\\tire2off.bmp";                               // weak
char aImagesTire2onB[19] = "images\\tire2on.bmp";                                // weak
char aImagesLightgBm[18] = "images\\lightg.bmp";                                 // weak
char aImagesLightrBm[18] = "images\\lightr.bmp";                                 // weak
char aImagesZCarbbBm[19] = "images\\z-carBB.bmp";                                // weak
char aImagesZCarspBm[19] = "images\\z-carSP.bmp";                                // weak
char aImagesZCarrsBm[19] = "images\\z-carRS.bmp";                                // weak
char aImagesZCarpsBm[19] = "images\\z-carPS.bmp";                                // weak
char aImagesZCarpjBm[19] = "images\\z-carPJ.bmp";                                // weak
char aImagesZCarnsBm[19] = "images\\z-carNS.bmp";                                // weak
char aImagesZCarmnBm[19] = "images\\z-carMN.bmp";                                // weak
char aImagesZCarm3Bm[19] = "images\\z-carM3.bmp";                                // weak
char aImagesZCarldBm[19] = "images\\z-carLD.bmp";                                // weak
char aImagesZCaripBm[19] = "images\\z-carIP.bmp";                                // weak
char aImagesZCarfhBm[19] = "images\\z-carFH.bmp";                                // weak
char aImagesZCaresBm[19] = "images\\z-carES.bmp";                                // weak
char aImagesZCarcuBm[19] = "images\\z-carCU.bmp";                                // weak
char aImagesZCarceBm[19] = "images\\z-carCE.bmp";                                // weak
char aImagesZCartrBm[19] = "images\\z-carTR.bmp";                                // weak
char aImagesZCarmtBm[19] = "images\\z-carMT.bmp";                                // weak
char aImagesButSavdB[20] = "images\\but-savd.bmp";                               // weak
char aImagesButSavBm[19] = "images\\but-sav.bmp";                                // weak
char aImagesTrakrace_0[21] = "images\\trakracel.bmp";                            // weak
char aImagesTrakrace[21] = "images\\trakraceb.bmp";                              // weak
char aImagesSndlevl3[20] = "images\\sndlevl3.bmp";                               // weak
char aImagesSndlevl2[20] = "images\\sndlevl2.bmp";                               // weak
char aImagesMtrwdBmp[17] = "images\\mtrwd.bmp";                                  // weak
char aImagesFbrwdBmp[17] = "images\\fbrwd.bmp";                                  // weak
char aImagesCurwdBmp[17] = "images\\curwd.bmp";                                  // weak
char aImagesBbrwdBmp[17] = "images\\bbrwd.bmp";                                  // weak
char aImagesMirrwdBm[18] = "images\\mirrwd.bmp";                                 // weak
char aImagesMnrwdBmp[17] = "images\\mnrwd.bmp";                                  // weak
char aImagesPjrwdBmp[17] = "images\\pjrwd.bmp";                                  // weak
char aImagesTrrwdBmp[17] = "images\\trrwd.bmp";                                  // weak
char aImagesSoundptr[20] = "images\\soundptr.bmp";                               // weak
char aImagesSoundtik[20] = "images\\soundtik.bmp";                               // weak
char aImagesMusicBmp[17] = "images\\music.bmp";                                  // weak
char aImagesEngsound[20] = "images\\engsound.bmp";                               // weak
char aImagesListboxB[19] = "images\\listbox.bmp";                                // weak
char aImagesNoffstik[20] = "images\\noffstik.bmp";                               // weak
char aImagesSpeconBm[18] = "images\\specon.bmp";                                 // weak
char aImagesSpecoffB[19] = "images\\specoff.bmp";                                // weak
char aImagesCarwshad[21] = "images\\carwshad2.bmp";                              // weak
char aImagesCarwnosh[23] = "images\\carwnoshad2.bmp";                            // weak
char aImagesFfstickB[19] = "images\\ffstick.bmp";                                // weak
char aImagesMousinpt[20] = "images\\mousinpt.bmp";                               // weak
char aImagesChatbar2[20] = "images\\chatbar2.bmp";                               // weak
char aImagesCars5bBm[18] = "images\\cars5b.bmp";                                 // weak
char aImagesCars5aBm[18] = "images\\cars5a.bmp";                                 // weak
char aImagesCars4bBm[18] = "images\\cars4b.bmp";                                 // weak
char aImagesCars4aBm[18] = "images\\cars4a.bmp";                                 // weak
char aImagesCars3bBm[18] = "images\\cars3b.bmp";                                 // weak
char aImagesCars3aBm[18] = "images\\cars3a.bmp";                                 // weak
char aImagesCars2bBm[18] = "images\\cars2b.bmp";                                 // weak
char aImagesCars2aBm[18] = "images\\cars2a.bmp";                                 // weak
char aImagesCars1aBm[18] = "images\\cars1a.bmp";                                 // weak
char aImagesButOpdBm[19] = "images\\but-opd.bmp";                                // weak
char aImagesButOpBmp[18] = "images\\but-op.bmp";                                 // weak
char aImagesButMaind[21] = "images\\but-maind.bmp";                              // weak
char aImagesButMainB[20] = "images\\but-main.bmp";                               // weak
char aImagesNoadv2Bm[18] = "images\\noadv2.bmp";                                 // weak
char aImagesNoadv1Bm[18] = "images\\noadv1.bmp";                                 // weak
char aImagesCongratB[19] = "images\\congrat.bmp";                                // weak
char aImagesBgdimBmp[17] = "images\\bgdim.bmp";                                  // weak
char aImagesSeasn5aB[19] = "images\\seasn5a.bmp";                                // weak
char aImagesSeasn4bB[19] = "images\\seasn4b.bmp";                                // weak
char aImagesSeasn4aB[19] = "images\\seasn4a.bmp";                                // weak
char aImagesSeasn3bB[19] = "images\\seasn3b.bmp";                                // weak
char aImagesSeasn3aB[19] = "images\\seasn3a.bmp";                                // weak
char aImagesSeasn2bB[19] = "images\\seasn2b.bmp";                                // weak
char aImagesSeasn2aB[19] = "images\\seasn2a.bmp";                                // weak
char aImagesMpserial[20] = "images\\mpserial.bmp";                               // weak
char aImagesMpipxBmp[17] = "images\\mpipx.bmp";                                  // weak
char aImagesMptcpipB[19] = "images\\mptcpip.bmp";                                // weak
char aImagesMpmodemB[19] = "images\\mpmodem.bmp";                                // weak
char aImagesCoasttrB[20] = "images\\coasttr_.bmp";                               // weak
char aImagesDesrttrB[20] = "images\\desrttr_.bmp";                               // weak
char aImagesTrakeBmp_0[18] = "images\\trake_.bmp";                               // weak
char aImagesTrakdBmp_0[18] = "images\\trakd_.bmp";                               // weak
char aImagesTrakcBmp_0[18] = "images\\trakc_.bmp";                               // weak
char aImagesLboxendB[19] = "images\\lboxend.bmp";                                // weak
char aImagesRboxendB[19] = "images\\rboxend.bmp";                                // weak
char aImagesBoxtile2[20] = "images\\boxtile2.bmp";                               // weak
char aImagesSlidebox[20] = "images\\slidebox.bmp";                               // weak
char aImagesNamebarB[19] = "images\\namebar.bmp";                                // weak
char aImagesMonitrBm[18] = "images\\monitr.bmp";                                 // weak
char aImagesSpkrBmp[16] = "images\\spkr.bmp";                                    // weak
char aImagesSteeradj[20] = "images\\steeradj.bmp";                               // weak
char aImagesSteerarr[20] = "images\\steerarr.bmp";                               // weak
char aImagesTypeYelB[20] = "images\\type_yel.bmp";                               // weak
char aImagesSteerinp[20] = "images\\steerinp.bmp";                               // weak
char aImagesKeybdBmp[17] = "images\\keybd.bmp";                                  // weak
char aImagesJoystkBm[18] = "images\\joystk.bmp";                                 // weak
char aImagesArrowuuB[19] = "images\\arrowuu.bmp";                                // weak
char aImagesArrowudB[19] = "images\\arrowud.bmp";                                // weak
char aImagesArrowduB[19] = "images\\arrowdu.bmp";                                // weak
char aImagesArrowddB[19] = "images\\arrowdd.bmp";                                // weak
char aImagesCarbbBmp[17] = "images\\carBB.bmp";                                  // weak
char aImagesCarspBmp[17] = "images\\carSP.bmp";                                  // weak
char aImagesCarrsBmp[17] = "images\\carRS.bmp";                                  // weak
char aImagesCarpsBmp[17] = "images\\carPS.bmp";                                  // weak
char aImagesCarpjBmp[17] = "images\\carPJ.bmp";                                  // weak
char aImagesCarnsBmp[17] = "images\\carNS.bmp";                                  // weak
char aImagesCarmnBmp[17] = "images\\carMN.bmp";                                  // weak
char aImagesCarm3Bmp[17] = "images\\carM3.bmp";                                  // weak
char aImagesCarldBmp[17] = "images\\carLD.bmp";                                  // weak
char aImagesCaripBmp[17] = "images\\carIP.bmp";                                  // weak
char aImagesCarfhBmp[17] = "images\\carFH.bmp";                                  // weak
char aImagesCaresBmp[17] = "images\\carES.bmp";                                  // weak
char aImagesCarcuBmp[17] = "images\\carCU.bmp";                                  // weak
char aImagesCarceBmp[17] = "images\\carCE.bmp";                                  // weak
char aImagesCartrBmp[17] = "images\\carTR.bmp";                                  // weak
char aImagesAshftBmp[17] = "images\\ashft.bmp";                                  // weak
char aImagesTrakeBmp[17] = "images\\trake.bmp";                                  // weak
char aImagesTrakdBmp[17] = "images\\trakd.bmp";                                  // weak
char aImagesWettireB[19] = "images\\wettire.bmp";                                // weak
char aImagesMedtireB[19] = "images\\medtire.bmp";                                // weak
char aImagesDrytireB[19] = "images\\drytire.bmp";                                // weak
char aImagesSunwethB[19] = "images\\sunweth.bmp";                                // weak
char aImagesSnowBmp[16] = "images\\snow.bmp";                                    // weak
char aImagesRainBmp[16] = "images\\rain.bmp";                                    // weak
char aImagesNiteBmp[16] = "images\\nite.bmp";                                    // weak
char aImagesFogBmp[15] = "images\\fog.bmp";                                      // weak
char aImagesTrakcBmp[17] = "images\\trakc.bmp";                                  // weak
char aImagesCoasttrk[20] = "images\\coasttrk.bmp";                               // weak
char aImagesDesrttrk[20] = "images\\desrttrk.bmp";                               // weak
char aImagesHardshok[20] = "images\\hardshok.bmp";                               // weak
char aImagesMedshokB[19] = "images\\medshok.bmp";                                // weak
char aImagesSoftshok[20] = "images\\softshok.bmp";                               // weak
char aImagesMshftBmp[17] = "images\\mshft.bmp";                                  // weak
char aImagesCarmtBmp[17] = "images\\carmt.bmp";                                  // weak
char aImagesQrBmp[14] = "images\\qr.bmp";                                        // weak
char aImagesOpBmp[14] = "images\\op.bmp";                                        // weak
char aImagesTaBmp[14] = "images\\ta.bmp";                                        // weak
char aImagesMpBmp[14] = "images\\mp.bmp";                                        // weak
char aImagesChampBmp[17] = "images\\champ.bmp";                                  // weak
char aImagesBignumsB[19] = "images\\bignums.bmp";                                // weak
char aImagesTypeMidB[20] = "images\\type_mid.bmp";                               // weak
char aImagesTypeWitB[20] = "images\\type_wit.bmp";                               // weak
char aImagesTypeGryB[20] = "images\\type_gry.bmp";                               // weak
char aImagesCursorBm[18] = "images\\cursor.bmp";                                 // weak
char aImagesWork1aBm[18] = "images\\work1a.bmp";                                 // weak
char aDdrawDoinitLoa[] = "DDraw_DoInit: loading.bmp failed to load!";            // idb
CHAR filepath[] = "images\\loading.bmp";                                         // idb
int dword_100ADF58 = 9;                                                          // weak
int dword_100ADF5C = 9;                                                          // weak
int dword_100ADF60 = 1;                                                          // weak
char byte_100ADF68[] = {'\0'};                                                   // weak
char byte_100ADF90[] = {'\0'};                                                   // weak
int dword_100ADFC8 = 1;                                                          // weak
CarPart gCarPartArray[480] = {{NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ce-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ce-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 0, 64, "ce-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ce-headl.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "ce-back.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "ce-lr.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "ce-rr.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 48, 128, "ce-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 48, 128, "ce-lf.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "ce-rside.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "ce-lside.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "ce-front.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 112, 0, 64, "ce-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 0, 64, "ce-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 0, 64, "ce-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 0, 64, "ce-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "es-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "es-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 96, 24, 64, "es-headl.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "es-tail0.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 48, 128, "es-lside.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 48, 128, "es-rside.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "es-back.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "es-rr.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "es-lr.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 48, 128, "es-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 48, 128, "es-lf.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "es-front.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "es-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "es-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "es-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "es-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ns-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ns-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 4, 64, "ns-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ns-headl.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "ns-front.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 48, 128, "ns-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 48, 128, "ns-lf.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "ns-lr.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "ns-rr.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "ns-back.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "ns-rside.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "ns-lside.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 112, 4, 64, "ns-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 4, 64, "ns-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 4, 64, "ns-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 4, 64, "ns-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "rs-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "rs-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "rs-headl.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 96, 8, 32, "rs-tail0.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "rs-front.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 52, 128, "rs-lf.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 52, 128, "rs-rf.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "rs-lr.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "rs-back.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "rs-rr.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "rs-lside.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "rs-rside.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 96, 8, 32, "rs-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 96, 8, 32, "rs-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 96, 8, 32, "rs-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 96, 8, 32, "rs-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "sp-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "sp-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 112, 20, 64, "sp-headl.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 128, 28, 64, "sp-tail0.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "sp-front.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "sp-back.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "sp-lr.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "sp-rr.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 52, 128, "sp-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 52, 128, "sp-lf.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "sp-rside.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "sp-lside.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 128, 28, 64, "sp-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 128, 28, 64, "sp-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 128, 28, 64, "sp-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 128, 28, 64, "sp-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "ps-front.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ps-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ps-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 28, 20, 64, "ps-headl.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 12, 32, "ps-tail0.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "ps-rside.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "ps-lside.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 48, 128, "ps-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 48, 128, "ps-lf.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "ps-lr.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "ps-rr.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "ps-back.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 64, 12, 32, "ps-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 12, 32, "ps-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 12, 32, "ps-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 12, 32, "ps-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "m3-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "m3-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 100, 16, 64, "m3-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 96, 28, 64, "m3-headl.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "m3-front.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "m3-lr.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "m3-back.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "m3-rr.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 52, 128, "m3-lf.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 52, 128, "m3-rf.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "m3-rside.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "m3-lside.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 100, 16, 64, "m3-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 100, 16, 64, "m3-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 100, 16, 64, "m3-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 100, 16, 64, "m3-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ip-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ip-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ip-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 128, 16, 64, "ip-headl.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "ip-front.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 52, 128, "ip-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 52, 128, "ip-lf.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "ip-lr.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "ip-back.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "ip-rr.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "ip-rside.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "ip-lside.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ip-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ip-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ip-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ip-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ld-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "ld-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 96, 20, 64, "ld-headl.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "ld-tail0.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 48, 128, "ld-lside.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 48, 128, "ld-rside.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "ld-back.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "ld-rr.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "ld-lr.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 48, 128, "ld-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 48, 128, "ld-lf.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "ld-front.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "ld-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "ld-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "ld-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "ld-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 128, 24, 128, "hm-sidet.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "hm-step.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "hm-sideb.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "hm-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 128, 12, 64, "hm-grill.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 0, 0, 0, "hm-back.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 48, 12, 32, "hm-tail0.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 128, 24, 64, "hm-front.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 48, 12, 32, "hm-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 48, 12, 32, "hm-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 48, 12, 32, "hm-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 48, 12, 32, "hm-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "mt-back.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "mt-rr.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "mt-lr.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "mt-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "mt-roof.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 52, 128, "mt-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 52, 128, "mt-lf.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 128, 28, 64, "mt-bumpr.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "mt-front.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "mt-headl.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "mt-tail0.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 48, 128, "mt-lside.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 48, 128, "mt-rside.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "mt-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "mt-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "mt-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "mt-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "pj-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "pj-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 96, 24, 64, "pj-headl.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "pj-tail0.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "pj-lside.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "pj-rside.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "pj-back.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "pj-lr-rr.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 52, 128, "pj-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 52, 128, "pj-lf.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "pj-front.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "pj-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "pj-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "pj-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "pj-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "tr-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "tr-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "tr-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "tr-headl.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "tr-front.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "tr-lr.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "tr-rr.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "tr-back.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 52, 128, "tr-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 52, 128, "tr-lf.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 52, 128, "tr-rside.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 52, 128, "tr-lside.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "tr-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "tr-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "tr-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 64, 32, 64, "tr-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "mn-hood.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, "mn-roof.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 100, 20, 64, "mn-headl.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 32, 88, 128, "mn-tail0.bmp"},
                              {NULL, 0, 0, 0, 2, 0, 160, 48, 128, "mn-lside.bmp"},
                              {NULL, 0, 0, 0, 6, 0, 160, 48, 128, "mn-rside.bmp"},
                              {NULL, 0, 0, 0, 4, 0, 128, 28, 128, "mn-back.bmp"},
                              {NULL, 0, 0, 0, 5, 0, 128, 28, 128, "mn-rr.bmp"},
                              {NULL, 0, 0, 0, 3, 0, 128, 28, 128, "mn-lr.bmp"},
                              {NULL, 0, 0, 0, 7, 0, 128, 52, 128, "mn-rf.bmp"},
                              {NULL, 0, 0, 0, 1, 0, 128, 52, 128, "mn-lf.bmp"},
                              {NULL, 0, 0, 0, 0, 0, 0, 0, 0, "mn-front.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 32, 88, 128, "mn-tail0.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 32, 88, 128, "mn-tail1.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 32, 88, 128, "mn-tail2.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 32, 88, 128, "mn-tail3.bmp"},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL},
                              {NULL, 0, 0, 0, -1, 0, 0, 0, 0, NULL}};
int dword_100B2AD0 = -1;            // weak
int gSpeedSensitive = 1;            // weak
int dword_100B3668 = 1096810496;    // weak
int dword_100B366C = 1008981770;    // weak
float flt_100B3670 = 10.0;          // weak
int dword_100B36F8 = 1;             // weak
int dword_100B36FC = 2;             // weak
void *off_100B3700 = &unk_10AF9B48; // weak
char byte_100B37D0[] = {'\0'};      // weak
char byte_100B37D1[] = {'\x7F'};    // weak
char byte_100B37D2[58] = {
    '\0',   '\xFF', '',    '\0',   '\0',   '\0',   '',  '',  '\0', '\0', '', '\0',
    '',    '\xFF', '\xFF', '\xFF', '\0',   '0',    '\0', '\0', '\0', '\0', '', 'x',
    '\0',   '`',    '0',    '\x10', '',    '\xFF', '',  '',  '',  '',  '', '',
    '\xFF', 'X',    '\0',   'H',    '',    '',    '',  '',  '',  '',  '', '\0',
    'd',    '\0',   '',    '',    '\xFF', '',    '',  '\0', '\0', '@'}; // idb
int gChosenTrack = 2;                                                       // weak
unsigned int dword_100B3810 = 223u;                                         // idb
int dword_100B3814[] = {2};                                                 // weak
int dword_100B3818[] = {10};                                                // weak
char byte_100B381C[2] = {'\x01', '\b'};                                     // idb
__int16 word_100B381E[] = {129};                                            // weak
char byte_100B3820[] = {'\x02'};                                            // weak
char byte_100B3821[107] = {
    '\0',   '\x04', '\0',   '\0',   '\0',   '\0',   '\0',   '',    '\0',   '\0', '\0', '\x03',
    '\0',   '\0',   '\0',   '\x0F', '\0',   '\0',   '\0',   '\0',   '\a',   'P',  '\0', '\0',
    '\0',   '\x02', '\0',   '\x04', '\x02', '\0',   '\0',   '',    '\0',   '\0', '\0', '\x04',
    '\0',   '\0',   '\0',   '\x14', '\0',   '\0',   '\0',   '\x04', '\x06', '\f', '\0', '\x04',
    '\x01', '\0',   '\x01', '\x02', '\x02', '\x01', '\0',   '',    '\0',   '\0', '\0', '\x04',
    '\0',   '\0',   '\0',   '\x14', '\0',   '\0',   '\0',   '\x03', '\x02', ' ',  '\0', '\x04',
    '\x03', '\x01', '\x01', '\x02', '\x04', '\0',   '\x02', '',    '\0',   '\0', '\0', '\x04',
    '\0',   '\0',   '\0',   '\x14', '\0',   '\0',   '\0',   '\x02', '\x05', ' ',  '\0', '\x02',
    '\x03', '\0',   '\x04', '\n',   '\x03', '\x01', '\x02', '',    '\0',   '\0', '\0'}; // idb
int dword_100B388C = 4;                                                                  // weak
float dword_100B38A0[48] = {
    0.99550003, 0.99800003, 0.99550003, 0.99800003, 0.99550003, 0.99800003, 0.99550003,
    0.99800003, 0.99680001, 0.99629998, 0.99650002, 0.99680001, 0.99650002, 0.99550003,
    0.99550003, 0.99849999, 0.995,      0.99739999, 0.99510002, 0.99769998, 0.99349999,
    0.99699998, 0.99349999, 0.99690002, 0.99299997, 0.99540001, 0.99400002, 0.99669999,
    0.995,      0.99779999, 0.99379998, 0.99699998, 0.99299997, 0.99540001, 0.99550003,
    0.99800003, 0.99299997, 0.99540001, 0.99330002, 0.99629998, 0.99519998, 0.99790001,
    0.99440002, 0.9982,     0.99379998, 0.99680001, 0.99360001, 0.9964}; // idb
unsigned int dword_100B3960[20] = {269u, 270u, 271u, 272u, 273u, 274u, 275u, 276u, 277u, 278u, 279u,
                                   280u, 281u, 282u, 283u, 284u, 285u, 286u, 287u, 288u}; // idb
int (*off_100B39B0)[81] = &stru_10ACDEA8;                                                 // weak
int *off_100B3A68 = &dword_10A9BFD0;                                                      // weak
size_t SizeInBytes = 0u;                                                                  // idb
char *Format = NULL;                                                                      // idb
struct tm *Tm = (struct tm *)0xFFFFFFFF;                                                  // idb
char aMakeenemycarco_4[] = "MakeEnemyCarColorPanels: penm->aptex[cptex+3]";               // idb
char aMakeenemycarco_3[] = "MakeEnemyCarColorPanels: penm->aptex[cptex+2]";               // idb
char aMakeenemycarco_2[] = "MakeEnemyCarColorPanels: penm->aptex[cptex+1]";               // idb
char aMakeenemycarco_1[] = "MakeEnemyCarColorPanels: penm->aptex[cptex+0]";               // idb
char aMakeenemycarco_0[] = "MakeEnemyCarColorPanels: penm->aptex[i]";                     // idb
char aMakeenemycarco[] = "MakeEnemyCarColorPanels: penm->aptex";                          // idb
char aRy[] = "%%ry";                                                                      // idb
int dword_100B4050 = 1;                                                                   // weak
char aE[2] = "";                                                                         // weak
char gJoystick1Data[504] = {
    '\0',   '',    'K',  '\0', '',    '\0', '\0',   '\x81', 'M',    '\0', '',    '\0',
    '\0',   '',    'H',  '\0', '',    '\0', '\0',   '',    '\x9D', '\0', '\x1D', '\0',
    '\x03', '\x01', 'P',  '\0', '',    '\0', '\0',   '\x01', '\x1E', '\0', '\x1E', '\0',
    '\x01', '\x01', ',',  '\0', ',',    '\0', '6',    '\0',   '6',    '\0', '*',    '\0',
    '',    '\0',   'S',  '\0', '',    '\0', '',    '\0',   'O',    '\0', '',    '\0',
    '',    '\0',   'Q',  '\0', '',    '\0', '',    '\0',   'R',    '\0', '',    '\0',
    '\0',   '\x01', 'H',  '\0', '',    '\0', '\x01', '\x01', 'P',    '\0', '',    '\0',
    '\0',   '',    '',  '\0', '\x1C', '\0', '\x01', '\0',   '\x01', '\0', '\x01', '\0',
    '9',    '\0',   '9',  '\0', '9',    '\0', ';',    '\0',   ';',    '\0', ';',    '\0',
    '<',    '\0',   '<',  '\0', '<',    '\0', '=',    '\0',   '=',    '\0', '=',    '\0',
    '>',    '\0',   '>',  '\0', '>',    '\0', '\0',   '\0',   '9',    '\0', 'L',    '\0',
    '\0',   '\0',   '',  '\0', 'M',    '\0', '\0',   '\0',   '',    '\0', 'K',    '\0',
    '\0',   '\0',   '',  '\0', 'I',    '\0', '\0',   '\0',   '',    '\0', 'G',    '\0',
    '\0',   '\0',   '\r', '\0', 'N',    '\0', '\0',   '\0',   '\f',   '\0', 'J',    '\0',
    '\0',   '',    'K',  '\0', '',    '\0', '\0',   '\x81', 'M',    '\0', '',    '\0',
    '\0',   '\x01', 'H',  '\0', '',    '\0', '\x01', '\x01', '\x9D', '\0', '\x1D', '\0',
    '\x02', '\x01', 'P',  '\0', '',    '\0', '\x1E', '\0',   '\x1E', '\0', '\x1E', '\0',
    ',',    '\0',   ',',  '\0', ',',    '\0', '6',    '\0',   '6',    '\0', '*',    '\0',
    '',    '\0',   'S',  '\0', '',    '\0', '',    '\0',   'O',    '\0', '',    '\0',
    '',    '\0',   'Q',  '\0', '',    '\0', '',    '\0',   'R',    '\0', '',    '\0',
    '\0',   '',    'H',  '\0', '',    '\0', '\0',   '',    'P',    '\0', '',    '\0',
    '\0',   '\x01', '',  '\0', '\x1C', '\0', '\x01', '\0',   '\x01', '\0', '\x01', '\0',
    '9',    '\0',   '9',  '\0', '9',    '\0', ';',    '\0',   ';',    '\0', ';',    '\0',
    '<',    '\0',   '<',  '\0', '<',    '\0', '=',    '\0',   '=',    '\0', '=',    '\0',
    '>',    '\0',   '>',  '\0', '>',    '\0', '\0',   '\0',   '9',    '\0', 'L',    '\0',
    '\0',   '\0',   '',  '\0', 'M',    '\0', '\0',   '\0',   '',    '\0', 'K',    '\0',
    '\0',   '\0',   '',  '\0', 'I',    '\0', '\0',   '\0',   '',    '\0', 'G',    '\0',
    '\0',   '\0',   '\r', '\0', 'N',    '\0', '\0',   '\0',   '\f',   '\0', 'J',    '\0',
    '\0',   '',    'K',  '\0', '',    '\0', '\0',   '',    'M',    '\0', '',    '\0',
    '\0',   '\x03', 'H',  '\0', '',    '\0', '\x9D', '\0',   '\x9D', '\0', '\x1D', '\0',
    '\x01', '\x03', 'P',  '\0', '',    '\0', '\x1E', '\0',   '\x1E', '\0', '\x1E', '\0',
    ',',    '\0',   ',',  '\0', ',',    '\0', '6',    '\0',   '6',    '\0', '*',    '\0',
    '',    '\0',   'S',  '\0', '',    '\0', '',    '\0',   'O',    '\0', '',    '\0',
    '',    '\0',   'Q',  '\0', '',    '\0', '',    '\0',   'R',    '\0', '',    '\0',
    '',    '\0',   'H',  '\0', '',    '\0', '',    '\0',   'P',    '\0', '',    '\0',
    '\x1C', '\0',   '',  '\0', '\x1C', '\0', '\x01', '\0',   '\x01', '\0', '\x01', '\0',
    '9',    '\0',   '9',  '\0', '9',    '\0', ';',    '\0',   ';',    '\0', ';',    '\0',
    '<',    '\0',   '<',  '\0', '<',    '\0', '=',    '\0',   '=',    '\0', '=',    '\0',
    '>',    '\0',   '>',  '\0', '>',    '\0', '\0',   '\0',   '9',    '\0', 'L',    '\0',
    '\0',   '\0',   '',  '\0', 'M',    '\0', '\0',   '\0',   '',    '\0', 'K',    '\0',
    '\0',   '\0',   '',  '\0', 'I',    '\0', '\0',   '\0',   '',    '\0', 'G',    '\0',
    '\0',   '\0',   '\r', '\0', 'N',    '\0', '\0',   '\0',   '\f',   '\0', 'J',    '\0'};
char gJoystick2Data[504] = {
    '\0',   '',    'K',  '\0', '',    '\0', '\0',   '\x81', 'M',    '\0', '',    '\0',
    '\0',   '\x01', 'H',  '\0', '',    '\0', '\x01', '\x01', '\x9D', '\0', '\x1D', '\0',
    '\x02', '\x01', 'P',  '\0', '',    '\0', '\x1E', '\0',   '\x1E', '\0', '\x1E', '\0',
    ',',    '\0',   ',',  '\0', ',',    '\0', '6',    '\0',   '6',    '\0', '*',    '\0',
    '',    '\0',   'S',  '\0', '',    '\0', '',    '\0',   'O',    '\0', '',    '\0',
    '',    '\0',   'Q',  '\0', '',    '\0', '',    '\0',   'R',    '\0', '',    '\0',
    '\0',   '',    'H',  '\0', '',    '\0', '\0',   '',    'P',    '\0', '',    '\0',
    '\0',   '\x01', '',  '\0', '\x1C', '\0', '\x01', '\0',   '\x01', '\0', '\x01', '\0',
    '9',    '\0',   '9',  '\0', '9',    '\0', ';',    '\0',   ';',    '\0', ';',    '\0',
    '<',    '\0',   '<',  '\0', '<',    '\0', '=',    '\0',   '=',    '\0', '=',    '\0',
    '>',    '\0',   '>',  '\0', '>',    '\0', '\0',   '\0',   '9',    '\0', 'L',    '\0',
    '\0',   '\0',   '',  '\0', 'M',    '\0', '\0',   '\0',   '',    '\0', 'K',    '\0',
    '\0',   '\0',   '',  '\0', 'I',    '\0', '\0',   '\0',   '',    '\0', 'G',    '\0',
    '\0',   '\0',   '\r', '\0', 'N',    '\0', '\0',   '\0',   '\f',   '\0', 'J',    '\0',
    '\0',   '',    'K',  '\0', '',    '\0', '\0',   '',    'M',    '\0', '',    '\0',
    '\0',   '\x03', 'H',  '\0', '',    '\0', '\x9D', '\0',   '\x9D', '\0', '\x1D', '\0',
    '\x01', '\x03', 'P',  '\0', '',    '\0', '\x1E', '\0',   '\x1E', '\0', '\x1E', '\0',
    ',',    '\0',   ',',  '\0', ',',    '\0', '6',    '\0',   '6',    '\0', '*',    '\0',
    '',    '\0',   'S',  '\0', '',    '\0', '',    '\0',   'O',    '\0', '',    '\0',
    '',    '\0',   'Q',  '\0', '',    '\0', '',    '\0',   'R',    '\0', '',    '\0',
    '',    '\0',   'H',  '\0', '',    '\0', '',    '\0',   'P',    '\0', '',    '\0',
    '\x1C', '\0',   '',  '\0', '\x1C', '\0', '\x01', '\0',   '\x01', '\0', '\x01', '\0',
    '9',    '\0',   '9',  '\0', '9',    '\0', ';',    '\0',   ';',    '\0', ';',    '\0',
    '<',    '\0',   '<',  '\0', '<',    '\0', '=',    '\0',   '=',    '\0', '=',    '\0',
    '>',    '\0',   '>',  '\0', '>',    '\0', '\0',   '\0',   '9',    '\0', 'L',    '\0',
    '\0',   '\0',   '',  '\0', 'M',    '\0', '\0',   '\0',   '',    '\0', 'K',    '\0',
    '\0',   '\0',   '',  '\0', 'I',    '\0', '\0',   '\0',   '',    '\0', 'G',    '\0',
    '\0',   '\0',   '\r', '\0', 'N',    '\0', '\0',   '\0',   '\f',   '\0', 'J',    '\0',
    '\x01', '\0',   '\0', '\0', 'E',    'S',  'C',    'A',    'P',    'E',  '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\x02', '\0',   '\0', '\0', '1',    '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\x03', '\0',   '\0', '\0', '2',    '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\x04', '\0',   '\0', '\0', '3',    '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\x05', '\0',   '\0', '\0', '4',    '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0',   '\0',   '\0', '\0',   '\0'};
char gJoystick3Data[504] = {
    '\0',   '',    'K',  '\0', '',    '\0', '\0',   '',  'M',    '\0', '',    '\0',
    '\0',   '\x03', 'H',  '\0', '',    '\0', '\x9D', '\0', '\x9D', '\0', '\x1D', '\0',
    '\x01', '\x03', 'P',  '\0', '',    '\0', '\x1E', '\0', '\x1E', '\0', '\x1E', '\0',
    ',',    '\0',   ',',  '\0', ',',    '\0', '6',    '\0', '6',    '\0', '*',    '\0',
    '',    '\0',   'S',  '\0', '',    '\0', '',    '\0', 'O',    '\0', '',    '\0',
    '',    '\0',   'Q',  '\0', '',    '\0', '',    '\0', 'R',    '\0', '',    '\0',
    '',    '\0',   'H',  '\0', '',    '\0', '',    '\0', 'P',    '\0', '',    '\0',
    '\x1C', '\0',   '',  '\0', '\x1C', '\0', '\x01', '\0', '\x01', '\0', '\x01', '\0',
    '9',    '\0',   '9',  '\0', '9',    '\0', ';',    '\0', ';',    '\0', ';',    '\0',
    '<',    '\0',   '<',  '\0', '<',    '\0', '=',    '\0', '=',    '\0', '=',    '\0',
    '>',    '\0',   '>',  '\0', '>',    '\0', '\0',   '\0', '9',    '\0', 'L',    '\0',
    '\0',   '\0',   '',  '\0', 'M',    '\0', '\0',   '\0', '',    '\0', 'K',    '\0',
    '\0',   '\0',   '',  '\0', 'I',    '\0', '\0',   '\0', '',    '\0', 'G',    '\0',
    '\0',   '\0',   '\r', '\0', 'N',    '\0', '\0',   '\0', '\f',   '\0', 'J',    '\0',
    '\x01', '\0',   '\0', '\0', 'E',    'S',  'C',    'A',  'P',    'E',  '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\x02', '\0',   '\0', '\0', '1',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\x03', '\0',   '\0', '\0', '2',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\x04', '\0',   '\0', '\0', '3',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\x05', '\0',   '\0', '\0', '4',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\x06', '\0',   '\0', '\0', '5',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\a',   '\0',   '\0', '\0', '6',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\b',   '\0',   '\0', '\0', '7',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\t',   '\0',   '\0', '\0', '8',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\0',   '\0',   '\0', '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0',
    '\n',   '\0',   '\0', '\0', '9',    '\0', '\0',   '\0', '\0',   '\0', '\0',   '\0'};
char aEscape[7] = "ESCAPE";                                                // weak
char aRcfg[] = "RCfg";                                                     // idb
int dword_100B5420 = 5;                                                    // weak
int dword_100B5424 = -1;                                                   // weak
int dword_100B5968 = 1065353216;                                           // weak
int dword_100B5970[] = {1161527296};                                       // weak
char aMiscModellight[22] = "misc\\modelLights.blob";                       // weak
__int16 word_100B5D90 = 1;                                                 // weak
char aRsea[] = "RSea";                                                     // idb
char aRgho[] = "RGho";                                                     // idb
char aCRallyconfigDa[] = "c:\\RallyConfig.dat";                            // idb
int gPlaysfx = 1;                                                          // weak
int dword_100B5DF0[16] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}; // idb
int dword_100B5E30[] = {0};                                                // weak
int dword_100B5E34[415] = {1086687360, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1088244736, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1088244736, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1086684160, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                           1087735936};                                 // idb
int dword_100B64B0[15] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}; // idb
_UNKNOWN unk_100B64EC;                                                  // weak
int dword_100B64F8[15] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}; // idb
int dword_100B6540[432] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086687360,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1088244736,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1088244736,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086684160,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936,
                           0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1087735936}; // idb
int dword_100B6C00[15] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};                    // idb
int dword_100B6C48[18] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1086687360};  // idb
char aRWav[6] = "r.wav";                                                                   // weak
char aHWav[6] = "h.wav";                                                                   // weak
char aWav[5] = ".wav";                                                                     // weak
CHAR kBrStringDll[] = "BRString.dll";                                                      // idb
char gTrackDir[] = {'\0'};                                                                 // weak
char kTracksSlash[8] = "tracks/";                                                          // weak
char *gTrackFilenames[15] = {"desert.trk",
                             "mountain.trk",
                             "coast.trk",
                             "mine.trk",
                             "amazon.trk",
                             "race.trk",
                             "desert.trk",
                             "mountain.trk",
                             "coast.trk",
                             "mine.trk",
                             "amazon.trk",
                             "race.trk",
                             "gamewin.trk",
                             "bonus.trk",
                             "bonus.trk"}; // weak
char gCarDir[] = {'\0'};                   // weak
char kCarsSlash[6] = "cars/";              // weak
int dword_100B84F4[] = {0};                // weak
char *gCarNames[16] = {"ce",
                       "es",
                       "ns",
                       "rs",
                       "sp",
                       "ps",
                       "m3",
                       "ip",
                       "ld",
                       "hm",
                       "mt",
                       "cu",
                       "bb",
                       "pj",
                       "tr",
                       "mn"}; // weak
char *gSfxDir = "mn";         // weak
char kSfxSlash[5] = "sfx/";   // weak
_UNKNOWN unk_100B8938;        // weak
_UNKNOWN unk_100B89A0;        // weak
char *off_100B89C8[12] = {"Fear and Loathing",
                          "Alice",
                          "Tre",
                          "Nagasaki",
                          "Chewbaca",
                          "Projectile",
                          "Numb VI",
                          "Gelex",
                          "Three Blind Lice",
                          "10 to 0",
                          "Bottle Rocket",
                          "Fancy Car"};    // weak
char aFancyCar[10] = "Fancy Car";          // weak
int dword_100B8C90 = 1;                    // weak
int (*off_100B8C94)(void) = &sub_1002A640; // weak
int dword_100BBAC8[3] = {33, 33, 34};      // idb
int needToCheckSupportHRPC = 1;            // weak
char byte_100BBAD8 = '';                  // weak
char byte_100BBADC = '\xFF';               // weak
char byte_100BBAE0 = '\xFF';               // weak
char byte_100BBAE4 = '\xFF';               // weak
TrackData *gTrackData[16] = {&gTrackDataDesert,
                             &gTrackDataMountain,
                             &gTrackDataCoastline,
                             &gTrackDataStripMine,
                             &gTrackDataJungle,
                             &gTrackDataRaceTrack,
                             &gTrackDataMirrorDesert,
                             &gTrackDataMirrorMountain,
                             &gTrackDataMirrorCoastline,
                             &gTrackDataMirrorMirrorStripMine,
                             &gTrackDataMirrorMirrorJungle,
                             &gTrackDataMirrorMirrorRaceTrack,
                             &gTrackDataLoadAndGamewin,
                             &gTrackDataMirrorBonusTrack,
                             &gTrackDataBonusTrack,
                             &gTrackDataResetToFirstYear};
int dword_100BD3E0 = 1;                                              // idb
int dword_100BD3E8 = 1;                                              // weak
int dword_100BD3EC = 1;                                              // weak
int dword_100BD3F0 = 1;                                              // weak
int dword_100BD3F4 = 1;                                              // weak
int dword_100BD3F8 = 1;                                              // weak
int dword_100BD3FC = 1;                                              // weak
int dword_100BD400[9] = {803, 618, 475, 366, 281, 216, 166, 128, 1}; // idb
int dword_100BD424 = 10000;                                          // weak
int dword_100BD428 = 2000;                                           // weak
int dword_100BD42C = 10000;                                          // weak
LONG diEffectRglDirection_0 = -1;
int gDIEffectSquareDuration = 125000;                                                    // weak
CHAR aErrorFailedToC_0[] = "Error: Failed to create device.\n";                          // idb
CHAR aErrorFailedToS_0[] = "Error: Failed to set game device data format.\n";            // idb
char aErrorFailedToS[41] = "Error: Failed to set cooperative level.\n";                  // weak
CHAR aErrorFailedToO[] = "Error: Failed to obtain interface.\n";                         // idb
CHAR aErrorIdirectin_0[] = "Error: IDirectInputDevice::SetProperty(DIPH_WORD) FAILED\n"; // idb
CHAR aErrorIdirectin[] = "Error: IDirectInputDevice::SetProperty(DIPH_RANGE) FAILED\n";  // idb
CHAR OutputString[] = "Error: Failed to change device property.\n";                      // idb
LPCSTR lpClassName = "BossRally";                                                        // idb
LPCSTR lpWindowName = "Boss Rally";                                                      // idb
char aSplashImg[11] = "splash.img";                                                      // weak
CHAR aUnableToInitia[] = "Unable to initialize Direct3D accelerated video card.";        // idb
FILE Stream = {NULL, 0, NULL, 2, 2, 0, 0, NULL};                                         // idb
int (*off_100BFC00)(void) = &terminate;                                                  // weak
int dword_100C0378[6] = {1024, -1023, 53, 11, 64, 1023};                                 // idb
int dword_100C0C44 = 1;                                                                  // weak
int dword_100C0CD8 = -1;                                                                 // weak
int dword_100C0CDC = 0;                                                                  // weak
int dword_100C0CE0 = 0;                                                                  // weak
int dword_100C0CE8 = -1;                                                                 // weak
int dword_100C0CEC = 0;                                                                  // weak
int dword_100C0CF0 = 0;                                                                  // weak
int dword_100C129C = 0;                                                                  // weak
char byte_100C12A0[89992] = {
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',
    '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0', '\0',

};                      // weak
_UNKNOWN unk_1020AB98;  // weak
int gGameMode1;         // weak
int dword_10220B24;     // weak
int dword_10220B28;     // weak
int dword_10220B2C;     // weak
int gChosenTrack1;      // weak
int gChosenWeather2;    // weak
int dword_10220B38;     // weak
char byte_10220B3C;     // weak
__int16 word_10220B40;  // weak
int dword_10220B44;     // weak
int playParmsPlayTo;    // weak
int dword_10220C3C;     // weak
MCIDEVICEID mciId;      // idb
int dword_10220C44;     // weak
int dword_10220C48;     // weak
HWND gHwnd0;            // idb
__int16 word_10220C50;  // weak
__int16 word_10220C52;  // weak
int dword_10220C54;     // weak
int gWPARAM;            // weak
__int16 word_10220C5C;  // weak
__int16 word_10220C5E;  // weak
__int16 word_10220C60;  // weak
__int16 word_10220C62;  // weak
int dword_10220C64;     // weak
int dword_10220C68;     // weak
int dword_10220C6C;     // weak
int dword_10220C70;     // weak
int dword_10220C74;     // weak
__int16 word_10220C78;  // weak
__int16 word_10220C7A;  // weak
int dword_10220C7C;     // weak
int dword_10220C80;     // weak
int dword_10220C84;     // weak
int dword_10220C88;     // weak
__int16 word_10220C8C;  // weak
__int16 word_10220C8E;  // weak
__int16 word_10220C90;  // weak
__int16 word_10220C92;  // weak
__int16 word_10220C94;  // weak
__int16 word_10220C96;  // weak
int dword_10220C98;     // weak
__int16 word_10220C9C;  // weak
__int16 word_10220C9E;  // weak
int dword_10220CA0;     // weak
int dword_10220CA4;     // weak
int dword_10220CA8;     // weak
int dword_10220CAC;     // weak
int dword_10220CB0;     // weak
int dword_10220CB4;     // weak
int dword_10220CB8;     // weak
int dword_10220CBC;     // weak
__int16 word_10220CC0;  // weak
__int16 word_10220CC2;  // weak
__int16 word_10220CC4;  // weak
__int16 word_10220CC6;  // weak
__int16 word_10220CC8;  // weak
__int16 word_10220CCA;  // weak
__int16 word_10220CCC;  // weak
int dword_10220CD0;     // weak
int dword_10220CD4;     // weak
int dword_10220CD8;     // weak
char byte_10220CDC;     // weak
int debugOutput;        // weak
HANDLE gMutex8;         // idb
float flt_10220CF0[30]; // idb
float flt_10220D68;     // weak
int dword_10220D90[16]; // idb
int dword_10220DD0;     // weak
int dword_10220DD4;     // weak
int dword_10220DD8;     // weak
HANDLE gMutex6;         // idb
float flt_10220E60;     // weak
float flt_10220E64;     // weak
float flt_10220E68;     // weak
float flt_10220E6C;     // weak
float flt_10220E70;     // weak
float flt_10220E74;     // weak
float flt_10220E78;     // weak
char byte_10220E80;     // weak
int dword_10221280;     // weak
int dword_10221288[16]; // idb
int gCPlayers;          // weak
int dword_102212D0[16]; // idb
int dword_10221310;     // weak
int dword_10221314;     // weak
int dword_10221318;     // weak
HANDLE gMutex7;         // idb
int gBcar;              // weak
HANDLE gMutex3;         // idb
HANDLE gMutexes[];
int unk_1022132C[];       // idb
int unk_10221330[];       // idb
int unk_10221334[8];      // idb
int unk_10221354[];       // idb
int unk_10221358[];       // idb
char unk_1022135C[];      // idb
char unk_1022135D[];      // idb
char unk_1022135E[];      // idb
int dword_10221360[8];    // idb
float unk_10221380[320];  // idb
int dword_10221880[];     // weak
int dword_10221884[];     // weak
int dword_10221888[];     // weak
int dword_1022188C[];     // weak
int dword_10221890[];     // weak
int dword_10221894[];     // weak
char byte_10221898[1024]; // idb
int dword_10221C98[];     // weak
int dword_10221C9C[9091]; // idb
HANDLE gMutexesEnd;
int dword_1022AAB0[];        // weak
int dword_1022AAB4[15];      // idb
int dword_1022AAF4;          // weak
char byte_1022AAF8[1024];    // idb
int dword_1022AEF8;          // weak
int dword_1022AEFC;          // idb
int dword_1022AF00;          // weak
HANDLE gMutex5;              // idb
int dword_1022AF08;          // weak
int gBsuspension;            // weak
int gBtire;                  // weak
int gIsGameMode4;            // weak
int gNetworkPlay;            // weak
int dword_1022AF1C;          // weak
int dword_1022AF20;          // weak
HANDLE gMutex9;              // idb
HANDLE gMutex0;              // idb
HANDLE gMutex1;              // idb
HANDLE gMutex2;              // idb
HANDLE gMutex4;              // idb
int dword_1022AF38;          // weak
int dword_1022AF3C;          // weak
int dword_1022AF40;          // weak
char gBossRallyIniPath[208]; // idb
int gTotalPhys;              // weak
int gChosenCar;              // weak
int gChosenWeather0;         // weak
int dword_10277358;          // weak
FILE *dword_1027735C;        // idb
IDirect3DDevice2 *g_D3DDevice2;
unk0008C *gUnk8C;
int dword_10277370; // weak
int renderState_0;  // weak
int renderState;    // weak
int dword_10277380; // weak
int dword_10277384; // weak
int dword_10277388; // weak
int dword_1027738C; // weak
int dword_10277390; // weak
int dword_10277394; // weak
int dword_10277398; // weak
int dword_1027739C; // weak
int dword_102773A0; // weak
int dword_102773F8; // weak
int dword_102773FC; // weak
int dword_10277400; // weak
int dword_10277404; // weak
int dword_10277408; // weak
int dword_1027740C; // weak
int dword_10277410; // weak
int dword_10277414; // weak
int dword_10277418; // weak
int dword_1027741C; // weak
int dword_10277420; // weak
IDirect3D2 *g_pD3D2;
_D3DDeviceDesc g_HWCaps;
_D3DDeviceDesc g_HELCaps;
DWORD stru_10277680;
int dword_10277B1C;                           // weak
int dword_10277B20;                           // weak
struct _RTL_CRITICAL_SECTION CriticalSection; // idb
SIZE_T unk;                                   // idb
int dword_10277B44;                           // weak
int dword_10277B48;                           // weak
int dword_10277B4C;                           // weak
HANDLE dword_10277B54;                        // idb
DWORD ThreadId;                               // idb
HANDLE hEvent;                                // idb
int dword_10277B60;                           // weak
int dword_10277B68[16];                       // idb
int dword_10277BA8;                           // weak
float flt_10277BAC;                           // weak
float flt_10277BB0;                           // weak
char byte_10277BC8[];                         // weak
char byte_10277BC9[];                         // weak
char byte_10277BCA[366];                      // idb
int dword_10277D38[16];                       // idb
float dword_10277D78;                         // idb
float dword_10277D7C;                         // idb
float dword_10277D80;                         // idb
float flt_10277D88[16];                       // idb
int dword_10277DC8[19];                       // idb
int dword_10277E14;                           // weak
int dword_10277E18[16];                       // idb
int dword_10277E58;                           // weak
int dword_10277E5C;                           // weak
int dword_10277E60[16];                       // idb
int dword_10277EA0;                           // weak
float flt_10277EA8[];                         // weak
float flt_10277EAC[];                         // weak
float flt_10277EB0[];                         // weak
float flt_10277EB4[];                         // weak
float flt_10277EB8[];                         // weak
float flt_10277EBC[];                         // weak
int dword_10277EC0[111994];                   // idb
float flt_102E54A8[3];                        // idb
int dword_102E54B4;                           // weak
int dword_102E54B8;                           // weak
int dword_102E54C0[630];                      // idb
int dword_102E5EC0;                           // weak
int dword_102E5EC4;                           // weak
int dword_102E5EC8;                           // weak
int dword_102E5ECC;                           // weak
int dword_102E5ED0;                           // weak
int dword_102E5ED4;                           // weak
int dword_102E5ED8;                           // weak
int dword_102E5EE0[];                         // weak
int dword_102E5EE4[16];                       // idb
int dword_102E5F24;                           // weak
__int16 word_10362F28[2048];                  // idb
float flt_10363F28[];                         // weak
float dword_10363F2C[15];                     // idb
int dword_10363F68[32];                       // idb
float flt_10363FE8;                           // weak
int dword_10363FEC;                           // weak
int dword_10363FF0;                           // weak
int dword_10363FF4;                           // weak
int dword_10363FF8;                           // weak
int dword_10364000[];                         // weak
int dword_10364304;                           // weak
int dword_10364308[32];                       // idb
int dword_10364388;                           // weak
int dword_1036438C;                           // weak
float flt_10364390;                           // weak
int dword_10364394;                           // weak
int dword_10364398;                           // weak
int dword_1036439C;                           // weak
int dword_103643A0;                           // weak
int dword_103643A4;                           // weak
float flt_103643A8;                           // weak
float flt_103643AC;                           // weak
float flt_103643B0;                           // weak
int dword_103643B4;                           // weak
int dword_103643B8;                           // weak
int dword_103643BC;                           // weak
char byte_1038B4C0[2048];                     // idb
int dword_1039B6C0;                           // weak
int dword_1039B6C4;                           // weak
int gD3dDrawCarShadow;                        // weak
int dword_1039B6CC;                           // weak
float flt_1039B6D0[16];                       // idb
int dword_1039B710;                           // weak
int dword_1039B714;                           // weak
int dword_1039B718;                           // weak
int dword_1039B71C;                           // weak
CHAR String2[8];                              // idb
int dword_1039B728[];                         // weak
int dword_1039B72C;                           // weak
int dword_1039B730;                           // weak
int dword_1039B734;                           // weak
int dword_1039B738;                           // weak
float flt_1039B73C;                           // weak
char Buffer[28];                              // idb
int dword_1039B75C;                           // weak
int dword_1039B760[];                         // weak
_UNKNOWN unk_1039B7C4;                        // weak
float flt_1039C168[];                         // weak
float flt_1039C16C;                           // weak
float flt_1039C170;                           // weak
float flt_1039C178;                           // weak
float flt_1039C17C;                           // weak
float flt_1039C180;                           // weak
float flt_1039C188;                           // weak
float flt_1039C18C;                           // weak
float flt_1039C190;                           // weak
float flt_1039C198;                           // weak
float flt_1039C19C;                           // weak
float flt_1039C1A0;                           // weak
float flt_1039C1D8;                           // weak
float flt_1039C1DC;                           // weak
float flt_1039C1E0;                           // weak
float flt_1039C218;                           // weak
float flt_1039C21C;                           // weak
float flt_1039C220;                           // weak
float flt_1039C258;                           // weak
float flt_1039C25C;                           // weak
float flt_1039C260;                           // weak
float flt_1039C298;                           // weak
float flt_1039C29C;                           // weak
float flt_1039C2A0;                           // weak
int dword_1039E89C;                           // weak
int dword_1039E8A0;                           // weak
float flt_1039E8A4;                           // weak
float flt_1039E8A8;                           // weak
float flt_1039E8AC;                           // weak
float flt_1039E8C4;                           // weak
float flt_1039E8C8;                           // weak
float flt_1039E8CC;                           // weak
float flt_1039E8E4;                           // weak
float flt_1039E8E8;                           // weak
float flt_1039E8EC;                           // weak
float flt_1039E8F0;                           // weak
float flt_1039E918;                           // weak
float flt_1039E91C;                           // weak
float flt_1039E920;                           // weak
float flt_1039E928;                           // weak
float flt_1039E92C;                           // weak
float flt_1039E930;                           // weak
float flt_1039E934;                           // weak
float flt_1039E94C;                           // weak
float flt_1039E950;                           // weak
float flt_1039E954;                           // weak
float flt_1039E96C;                           // weak
float flt_1039E970;                           // weak
float flt_1039E974;                           // weak
float flt_1039E978;                           // weak
float flt_1039E980;                           // weak
float flt_1039E984;                           // weak
float flt_1039E988;                           // weak
float flt_1039E990;                           // weak
float flt_1039E994;                           // weak
float flt_1039E998;                           // weak
float flt_1039E9A0;                           // weak
float flt_1039E9A4;                           // weak
float flt_1039E9A8;                           // weak
float flt_1039E9B0;                           // weak
_UNKNOWN unk_1039E9F8;                        // weak
_UNKNOWN unk_103C77E8;                        // weak
int dword_103C7840[];                         // weak
_WORD word_103C7844[381414];                  // idb
int dword_104ADCF0;                           // weak
int dword_104AFD00;                           // weak
int dword_104AFD04;                           // weak
int dword_104AFD08;                           // weak
int dword_104AFD0C;                           // weak
int dword_104AFD14;                           // weak
int dword_104AFD18;                           // weak
int dword_104AFD1C;                           // weak
_UNKNOWN unk_104AFD20;                        // weak
char byte_104AFF20;                           // weak
char byte_104AFF21[1023];                     // idb
char byte_104B0320[24];                       // idb
int dword_104B0338;                           // weak
int dword_104B033C;                           // weak
int gMessageX;                                // weak
int gMessageY;                                // weak
int dword_104B0348;                           // weak
char byte_104B0358;                           // weak
char byte_104B035C;                           // weak
char byte_104B0360;                           // weak
int dword_104B0364;                           // weak
int dword_104B0368;                           // weak
int dword_104B036C;                           // weak
int dword_104B0370;                           // weak
float flt_104B0378;                           // weak
float flt_104B037C;                           // weak
int dword_104B0380;                           // weak
int dword_104B0688;                           // weak
int dword_104B068C;                           // weak
int dword_104B0690;                           // weak
int dword_104B0694;                           // weak
int dword_104B0698;                           // weak
int dword_104B069C;                           // weak
float flt_104B1F00;                           // weak
int dword_104B2550;                           // weak
int dword_104B2554;                           // weak
int dword_104B2558;                           // weak
float flt_104B255C;                           // weak
float flt_104B2560;                           // weak
float flt_104B2564;                           // weak
int dword_104B2568;                           // weak
float flt_104BBDE8;                           // weak
float flt_104BBDF4;                           // weak
float flt_104BBDF8;                           // weak
int gChosenWeather1;                          // weak
int dword_104BBE0C;                           // weak
int dword_104BBE14;                           // weak
int gHasCalledDDrawEnum;                      // weak
int dword_104BBE1C;                           // weak
unk00334 *gUnk334Ptr1;
int dword_104BBE24;      // weak
int dword_104BBE28;      // weak
float flt_104BBE2C;      // weak
int dword_104BBE30;      // weak
int dword_104BBE38[];    // weak
char byte_104BBE3C[];    // weak
char byte_104BBE3D[];    // weak
char byte_104BBE3E[];    // weak
char byte_104BBE40;      // weak
char byte_104BBE41;      // weak
char byte_104BBE42;      // weak
int dword_104BBE48;      // weak
float flt_104BBEB8;      // weak
float flt_104BBEC0[4];   // idb
char byte_104BBF00;      // weak
float flt_104BBF04;      // weak
float flt_104BBF08;      // weak
int dword_104BC190;      // weak
char byte_104BC194;      // weak
float flt_104BC198;      // weak
_UNKNOWN gVertices;      // weak
int gHeight2;            // weak
int dword_104C01A4;      // weak
int dword_104C01A8[3];   // idb
float flt_104C0BA8;      // weak
float flt_104C0BAC;      // weak
float flt_104C0BB0;      // weak
int dword_104C0BB4;      // weak
float flt_104C0BB8;      // weak
int dword_104C0BBC;      // weak
int dword_104C0BC0[128]; // idb
int dword_104C0DC0;      // weak
float flt_104C15C8;      // weak
char byte_104C15CC;      // weak
float flt_104C15D0;      // weak
float flt_104C15D4;      // weak
float flt_104C15D8;      // weak
float flt_104C15DC;      // weak
float flt_104C15E0;      // weak
float flt_104C15E4;      // weak
float flt_104C15E8;      // weak
float flt_104C15EC;      // weak
float flt_104C15F0;      // weak
float flt_104C1690;      // weak
int dword_104C1694;      // weak
int dword_104C1698;      // weak
int dword_104C169C;      // weak
int dword_104C16A0;      // weak
int dword_104C16A8[10];  // idb
float flt_104C16D0[3];   // idb
int dword_104C16DC[];    // weak
int dword_104C16E0[];    // weak
int dword_104C16E4[];    // weak
int dword_104C170C[];    // weak
float flt_104C1720[];    // weak
float flt_104C1724[];    // weak
int dword_104C172C[];    // weak
int dword_104C1730[];    // weak
int dword_104C1734[];    // weak
float flt_104C4CD0[16];  // idb
float flt_104C4D10;      // weak
float flt_104C4D14;      // weak
float flt_104C4D18;      // weak
float flt_104C4D1C;      // weak
float flt_104C4D20;      // weak
float flt_104C4D24;      // weak
float flt_104C4D28;      // weak
float flt_104C4D2C;      // weak
float flt_104C4D30;      // weak
float flt_104C4D34;      // weak
float flt_104C4D38;      // weak
float flt_104C4D3C;      // weak
float flt_104C4D40;      // weak
float flt_104C4D44;      // weak
float flt_104C4D48;      // weak
float flt_104C4D4C;      // weak
WORD g_indexedPrimitiveIndices;
char byte_104C5150;                                                      // weak
float flt_104C5154;                                                      // weak
int dword_104C5158;                                                      // weak
int dword_104C515C;                                                      // weak
float flt_104C5160;                                                      // weak
int gWidth2;                                                             // weak
int gD3DClearZBuffer;                                                    // weak
int minX;                                                                // weak
int dword_104C5170;                                                      // weak
int dword_104C5174;                                                      // weak
int dword_104C5178;                                                      // weak
int dword_104C517C;                                                      // weak
int dword_104C5180;                                                      // weak
int dword_104C5184;                                                      // weak
int gVertexCount;                                                        // weak
int gIndexedPrimitiveIndexCount;                                         // weak
int dword_104C5190;                                                      // weak
int dword_104C5194;                                                      // weak
int dword_104C5198;                                                      // weak
char byte_104C51A0;                                                      // weak
int dword_104C51A4;                                                      // weak
char byte_104D51A8;                                                      // weak
int dword_104D51AC;                                                      // weak
char byte_104D51B0;                                                      // weak
int dword_104D51B4;                                                      // weak
int dword_104D51B8;                                                      // weak
int dword_104D51BC;                                                      // weak
_UNKNOWN unk_104D51D0;                                                   // weak
char byte_105551D0;                                                      // weak
char byte_105551D4;                                                      // weak
int dword_105551D8[];                                                    // weak
int dword_105551DC[];                                                    // weak
int dword_105551E0;                                                      // weak
int dword_105551E4;                                                      // weak
int dword_105551E8[];                                                    // weak
int dword_105551EC[];                                                    // weak
int dword_105551F0[];                                                    // weak
int dword_105551F4[];                                                    // weak
int dword_105551F8[];                                                    // weak
int dword_105551FC[];                                                    // weak
int dword_10555200;                                                      // weak
int dword_10555204;                                                      // weak
int dword_10555208[];                                                    // weak
int dword_1055520C[];                                                    // weak
int dword_10555210[];                                                    // weak
int dword_10555214[113];                                                 // idb
char byte_105553D8;                                                      // weak
int dword_105553DC;                                                      // weak
int dword_105553E0;                                                      // weak
int dword_105553E4;                                                      // weak
int dword_105553E8;                                                      // weak
int dword_105553EC;                                                      // weak
int dword_105553F0;                                                      // weak
int dword_105553F4;                                                      // weak
int dword_105553F8;                                                      // weak
int dword_105553FC;                                                      // weak
char byte_10555400;                                                      // weak
char byte_10575410;                                                      // weak
int dword_10575414;                                                      // weak
int gD3DAlwaysSquareTextures;                                            // weak
int dword_10575424;                                                      // weak
int dword_10575428;                                                      // weak
void *Block;                                                             // idb
int dword_10575430;                                                      // weak
int dword_10575434;                                                      // weak
int dword_10575438;                                                      // weak
void *dword_1057543C;                                                    // idb
int dword_10575440;                                                      // weak
int dword_10575444;                                                      // weak
int dword_10575448;                                                      // weak
int dword_1057544C;                                                      // weak
int EAR_DLL_GetVersion;                                                  // weak
int(__stdcall *EAR_DLL_SetAttenuationLevel)(_DWORD, _DWORD);             // weak
int EAR_DLL_ShutDownBank;                                                // weak
int EAR_DLL_ShutDownMatrix;                                              // weak
int EAR_DLL_EarInactive;                                                 // weak
HMODULE hModule;                                                         // idb
int EAR_DLL_ShutDownTimer;                                               // weak
int(__stdcall *EAR_DLL_MixEvent)(_DWORD);                                // weak
int(__stdcall *EAR_DLL_ShutDownChannel)(_DWORD);                         // weak
int (*EAR_DLL_ShutDownEar)(void);                                        // weak
int aEarInteractiveMessageID;                                            // weak
int EAR_DLL_StartEvent;                                                  // weak
int(__stdcall *EAR_DLL_ClearChannel)(_DWORD, _DWORD);                    // weak
int(__stdcall *EAR_DLL_ChangeChannelControl)(_DWORD, _DWORD);            // weak
int EAR_DLL_MoveEvent;                                                   // weak
int(__stdcall *EAR_DLL_AssignHwnd)(_DWORD);                              // weak
int EAR_DLL_ShutDownPreset;                                              // weak
int EAR_DLL_ResetEar;                                                    // weak
int EAR_DLL_ShutDownEvent;                                               // weak
int EAR_DLL_StartTimer;                                                  // weak
int(__stdcall *EAR_DLL_RegisterChannel)(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int EAR_DLL_ShutDownEnvironment;                                         // weak
int (*EAR_DLL_ShowLastError)(void);                                      // weak
int EAR_DLL_RegisterEnvironment;                                         // weak
int(__stdcall *EAR_DLL_AAA_Validate)(_DWORD);                            // weak
int EAR_DLL_GetEventStatus;                                              // weak
int EAR_DLL_SetUserDistanceUnit;                                         // weak
int EAR_DLL_UpdateEar;                                                   // weak
int(__stdcall *EAR_DLL_InitializeEar)(_DWORD);                           // weak
int (*EAR_DLL_GetLastError)(void);                                       // weak
int EAR_DLL_RegisterPreset;                                              // weak
int EAR_DLL_RegisterBank;                                                // weak
int(__stdcall *EAR_DLL_RegisterMatrix)(_DWORD);                          // weak
int dword_105754D4;                                                      // weak
int dword_105754D8;                                                      // weak
int dword_105754DC;                                                      // weak
int dword_105754E0;                                                      // weak
int dword_105754E8[];                                                    // weak
int dword_105754F0[];                                                    // weak
float flt_105754F8;                                                      // weak
int dword_105754FC;                                                      // weak
int dword_10575500;                                                      // weak
float flt_10575504;                                                      // weak
int dword_10575508;                                                      // weak
int dword_1057550C;                                                      // weak
int dword_10575510;                                                      // weak
float flt_10575514;                                                      // weak
int dword_10575518;                                                      // weak
float flt_1057551C;                                                      // weak
float flt_10575520;                                                      // weak
int dword_10575524;                                                      // weak
int dword_10575528;                                                      // weak
int dword_1057552C;                                                      // weak
int dword_10575530;                                                      // weak
int dword_10575538;                                                      // weak
int dword_1057553C;                                                      // weak
int dword_10675540;                                                      // weak
int dword_10675548[];                                                    // weak
int dword_1067554C[];                                                    // weak
int dword_10675550[6142];                                                // idb
int dword_1067B548;                                                      // weak
int dword_1067B54C;                                                      // weak
int dword_1067B550[2048];                                                // idb
int dword_1067D550;                                                      // weak
int dword_1067D570;                                                      // weak
int dword_1067D578;                                                      // weak
int dword_1067D57C;                                                      // weak
HWND gHwnd;                                                              // idb
int dword_10680598;                                                      // weak
int dword_1068059C;                                                      // weak
int dword_106805A0;                                                      // weak
int dword_106805A8;                                                      // weak
int dword_106805B0[];                                                    // weak
int dword_106805B8;                                                      // weak
int dword_106805BC;                                                      // weak
int dword_106805C0;                                                      // weak
int dword_106805C4;                                                      // weak
int dword_106805C8[];                                                    // weak
int dword_106805D0[16];                                                  // idb
int dword_10680610;                                                      // weak
void *dword_10680618;                                                    // idb
int dword_1068061C;                                                      // weak
int dword_10680620;                                                      // weak
int dword_10680624;                                                      // weak
int dword_10680628;                                                      // weak
int dword_1068062C;                                                      // weak
float flt_10680630;                                                      // idb
int dword_10680634;                                                      // weak
int dword_10680638;                                                      // weak
int dword_1068063C;                                                      // weak
int dword_10680640;                                                      // weak
int dword_10680644;                                                      // weak
int dword_10680648;                                                      // weak
int dword_1068064C;                                                      // weak
int dword_10680650;                                                      // weak
int dword_10680654;                                                      // weak
int dword_10680658;                                                      // weak
int dword_1068065C;                                                      // weak
int dword_10680660;                                                      // weak
int dword_10680664;                                                      // weak
int dword_10680668;                                                      // weak
int dword_1068066C[17];                                                  // idb
LARGE_INTEGER stru_106806B0[5];                                          // idb
float flt_106806D8;                                                      // weak
int dword_106806DC;                                                      // weak
int dword_106806E0;                                                      // weak
int dword_106806E4[17];                                                  // idb
int dword_10680728[];                                                    // weak
size_t ElementCount;                                                     // idb
int dword_10680734;                                                      // weak
int *dword_10680738[16];
int dword_1068073C;          // weak
int dword_10680740;          // weak
int dword_10680744;          // weak
int dword_10680748[];        // weak
int dword_10680750;          // weak
int dword_10680758[120];     // idb
int dword_10680938;          // weak
int dword_1068093C;          // weak
int dword_10680940;          // weak
unsigned int C;              // idb
int dword_10680948;          // weak
_UNKNOWN unk_10680950;       // weak
int dword_106909B0;          // weak
int dword_106909B4;          // weak
int dword_106909B8;          // weak
int dword_106909BC;          // weak
int dword_106909C8;          // weak
int dword_106909CC;          // weak
int dword_106909D0;          // weak
int dword_106909D4;          // weak
int dword_106909D8;          // weak
int dword_106909E0;          // weak
int dword_106909E4;          // weak
int gTicks;                  // weak
int dword_106909EC;          // weak
int dword_106909F0;          // weak
int gNeedToPlayIntro2;       // weak
int dword_106909F8;          // weak
int dword_106909FC;          // weak
_DWORD bitDepth;             // idb
_DWORD dword_10690A04;       // idb
_DWORD height;               // idb
_DWORD width;                // idb
int dword_10690A10;          // weak
int dword_10690A14;          // weak
int dword_10690A18;          // weak
int dword_10690A1C;          // weak
int (*dword_10690A20)(void); // weak
int (*dword_10690A24)(void); // weak
int (*dword_10690A28)(void); // weak
char byte_10690BE8;          // weak
int dword_10690BEC;          // weak
char byte_10690BF0;          // weak
char byte_10690FF8[];        // weak
char byte_10690FF9;          // weak
char byte_10690FFA;          // weak
char byte_10690FFB;          // weak
unk06594 stru_10691000;      // idb
char byte_106C0200;          // weak
int dword_106C0208;          // weak
int dword_106C020C;          // weak
float flt_106C0210;          // weak
float flt_106C0218[16];      // idb
int dword_106C0258;          // weak
char byte_106C0260;          // weak
int dword_106C0670;          // weak
int dword_106C0674;          // weak
int dword_106C0678;          // weak
WORD word_106C067C;
int dword_106C0680;          // weak
int g_Width1;                // weak
int dword_106C0688;          // weak
float flt_106C0690[3];       // idb
int dword_106C069C;          // weak
char byte_106C06A0[];        // weak
int dword_106C06A4;          // weak
unk06594 *dword_106C06A8;    // idb
float flt_106C0860;          // weak
float flt_106C0864;          // weak
float flt_106C0868;          // weak
float flt_106C086C;          // weak
float flt_106C0870;          // weak
float flt_106C0874;          // weak
float flt_106C0878;          // weak
float flt_106C087C;          // weak
float flt_106C0880;          // weak
float flt_106C0884;          // weak
float flt_106C0888;          // weak
float flt_106C088C;          // weak
float flt_106C0890;          // weak
float flt_106C0894;          // weak
float flt_106C0898;          // weak
void *flt_106C089C;          // idb
float flt_106C08A0;          // weak
float flt_106C08A4;          // weak
int dword_106C08A8;          // weak
int dword_106C08AC;          // weak
float flt_106C08B0;          // weak
float flt_106C08B4;          // weak
int dword_106C08B8;          // weak
int dword_106C08BC;          // weak
int dword_106C08C0;          // weak
int dword_106C08C4;          // weak
int dword_106C08C8;          // weak
int dword_106C08CC;          // weak
int dword_106C08D0;          // weak
int dword_106C08D4;          // weak
int dword_106C08D8;          // weak
int dword_106C08DC;          // weak
float flt_106C08E0[16];      // idb
int dword_106C0920;          // weak
__int16 word_106C0928[];     // weak
char byte_106C092A[];        // weak
char byte_106C092B[13];      // idb
int dword_106C0944;          // weak
int dword_106C0950[];        // weak
char byte_106C0960;          // weak
int (*dword_106C0964)(void); // weak
char byte_106C0968;          // weak
int dword_106C1170;          // weak
int dword_106C1174;          // weak
int dword_106C1178;          // weak
char byte_106C1580;          // weak
int dword_106C1608;          // weak
int dword_106C1610;          // weak
char byte_106C1614;          // weak
int dword_106C1618;          // weak
int dword_106C161C;          // weak
int dword_106C1620;          // weak
_DWORD dword_106C1628[4];    // idb
int dword_106C1638;          // weak
_UNKNOWN unk_106C163C;       // weak
int dword_106C1690;          // weak
__int16 word_106C1788[];     // weak
__int16 word_106C178A[];     // weak
__int16 word_106C178C[];     // weak
__int16 word_106C178E[];     // weak
__int16 word_106C1790[];     // weak
__int16 word_106C1792[];     // weak
__int16 word_106C1794[];     // weak
__int16 word_106C1796[249];  // idb
int dword_106C1988;          // weak
int (*dword_106C198C)(void); // weak
float flt_106C2990[3];       // idb
int g_Height1;               // weak
int dword_106C29A4;          // weak
float flt_106C29A8;          // weak
float flt_106C29AC;          // weak
float flt_106C29B0;          // weak
float flt_106C29B4;          // weak
float flt_106C29B8;          // weak
float flt_106C29BC;          // weak
float flt_106C29C0;          // weak
float flt_106C29C4;          // weak
float flt_106C29C8;          // weak
float flt_106C29CC;          // weak
float flt_106C29D0;          // weak
float flt_106C29D4;          // weak
float flt_106C29D8;          // weak
float flt_106C29DC;          // weak
float flt_106C29E0;          // weak
float flt_106C29E4;          // weak
int dword_106C29E8;          // weak
int dword_106C2CF0;          // weak
int dword_106C2CF4;          // weak
int dword_106C2CF8;          // weak
int dword_106C2CFC;          // weak
int dword_106C32CC;          // weak
int dword_106C32D0;          // weak
int dword_106C3308;          // weak
float dword_106C3310;        // idb
float dword_106C3314;        // idb
float dword_106C331C;        // idb
float dword_106C3320;        // idb
float dword_106C3328;        // idb
float dword_106C332C;        // idb
float dword_106C3334;        // idb
float dword_106C3338;        // idb
float dword_106C3340;        // idb
float dword_106C3344;        // idb
float dword_106C334C;        // idb
float dword_106C3350;        // idb
char byte_106C3358[];        // weak
char byte_106C3359;          // weak
char byte_106C335A;          // weak
char byte_106C335B;          // weak
char byte_106C335C;          // weak
float dword_106C3360;        // idb
int dword_106C3364;          // weak
unk06594 gUnk06594;
int dword_10A99778; // weak
int dword_10A9977C; // weak
Pod gPod;
int dword_10A99BA8;               // weak
int dword_10A99BAC;               // weak
int dword_10A99BB0;               // weak
int dword_10A99BB4;               // weak
float flt_10A99BB8[];             // weak
float flt_10A99BBC[];             // weak
float flt_10A99BC0[];             // weak
float flt_10A99BC4[];             // weak
float flt_10A99BC8[];             // weak
float flt_10A99BCC[];             // weak
float flt_10A99BD0[];             // weak
__int16 word_10A99BD4[];          // weak
char byte_10A99BD6[];             // weak
char byte_10A99BD7[29];           // idb
__int16 word_10A9BBB4;            // weak
int dword_10A9BBB8;               // weak
int dword_10A9BBC0;               // weak
int dword_10A9BBC4;               // weak
int dword_10A9BBC8;               // weak
int dword_10A9BBCC;               // weak
int dword_10A9BBD0[];             // weak
int dword_10A9BCD0[64];           // idb
int dword_10A9BDD0[64];           // idb
int dword_10A9BED0[64];           // idb
int dword_10A9BFD0;               // weak
int dword_10A9BFD8;               // weak
UINT_PTR uIDEvent;                // idb
CHAR byte_10A9BFE0[16];           // idb
int dword_10A9C0C8[];             // weak
int dword_10A9C0CC[];             // weak
CHAR String1[220];                // idb
CHAR byte_10A9CEF8[260];          // idb
int dword_10A9CFFC;               // weak
int dword_10A9D000;               // weak
int dword_10A9D004;               // weak
int dword_10A9D008;               // idb
int dword_10A9D010;               // weak
char g_lpSessionDesc_dwUser3[80]; // idb
int dword_10A9D068;               // weak
int dword_10A9D06C;               // weak
IDirectDraw2 *gDDraw2;
char byte_10A9D078[264];  // idb
int dword_10A9D5C0[];     // weak
char byte_10A9D618[36];   // idb
int dword_10A9DBD0;       // weak
char byte_10A9DBDC;       // weak
char byte_10A9DD28[1064]; // idb
int dword_10A9E150[32];   // idb
IDirectDrawSurface *gDDSurface;
char *gImagesWork1aBmFilepath;
int g_aImagesCursorBmFilepath; // weak
int g_aImagesTypeGryBFilepath; // weak
int g_aImagesTypeWitBFilepath; // weak
int dword_10A9E5A0;            // weak
int dword_10A9E614;            // weak
int dword_10A9E688;            // weak
int dword_10A9E6FC;            // weak
int dword_10A9E770;            // weak
int dword_10A9E7E4;            // weak
int dword_10A9E858;            // weak
int dword_10A9E8CC;            // weak
int dword_10A9E940;            // weak
int dword_10A9E9B4;            // weak
int dword_10A9EA28;            // weak
int dword_10A9EA9C;            // weak
int dword_10A9EB10;            // weak
int dword_10A9EB84;            // weak
int dword_10A9EBF8;            // weak
int dword_10A9EC6C;            // weak
int dword_10A9ECE0;            // weak
int dword_10A9ED54;            // weak
int dword_10A9EDC8;            // weak
int dword_10A9EE3C;            // weak
int dword_10A9EEB0;            // weak
int dword_10A9EF24;            // weak
int dword_10A9EF98;            // weak
int dword_10A9F00C;            // weak
int dword_10A9F080;            // weak
int dword_10A9F0F4;            // weak
int dword_10A9F168;            // weak
int dword_10A9F1DC;            // weak
int dword_10A9F250;            // weak
int dword_10A9F2C4;            // weak
int dword_10A9F338;            // weak
int dword_10A9F3AC;            // weak
int dword_10A9F420;            // weak
int dword_10A9F494;            // weak
int dword_10A9F508;            // weak
int dword_10A9F57C;            // weak
int dword_10A9F5F0;            // weak
int dword_10A9F664;            // weak
int dword_10A9F6D8;            // weak
int dword_10A9F74C;            // weak
int dword_10A9F7C0;            // weak
int dword_10A9F834;            // weak
int dword_10A9F8A8;            // weak
int dword_10A9F91C;            // weak
int dword_10A9F990;            // weak
int dword_10A9FA04;            // weak
int dword_10A9FA78;            // weak
int dword_10A9FAEC;            // weak
int dword_10A9FB60;            // weak
int dword_10A9FBD4;            // weak
int dword_10A9FC48;            // weak
int dword_10A9FCBC;            // weak
int dword_10A9FD30;            // weak
int dword_10A9FDA4;            // weak
int dword_10A9FE18;            // weak
int dword_10A9FE8C;            // weak
int dword_10A9FF00;            // weak
int dword_10A9FF74;            // weak
int dword_10A9FFE8;            // weak
int dword_10AA005C;            // weak
int dword_10AA00D0;            // weak
int dword_10AA0144;            // weak
int dword_10AA01B8;            // weak
int dword_10AA022C;            // weak
int dword_10AA02A0;            // weak
int dword_10AA0314;            // weak
int dword_10AA0388;            // weak
int dword_10AA03FC;            // weak
int dword_10AA0470;            // weak
int dword_10AA04E4;            // weak
int dword_10AA0558;            // weak
int dword_10AA05CC;            // weak
int dword_10AA0640;            // weak
int dword_10AA06B4;            // weak
int dword_10AA0728;            // weak
int dword_10AA079C;            // weak
int dword_10AA0810;            // weak
int dword_10AA0884;            // weak
int dword_10AA08F8;            // weak
int dword_10AA096C;            // weak
int dword_10AA09E0;            // weak
int dword_10AA0A54;            // weak
int dword_10AA0AC8;            // weak
int dword_10AA0B3C;            // weak
int dword_10AA0BB0;            // weak
int dword_10AA0C24;            // weak
int dword_10AA0C98;            // weak
int dword_10AA0D0C;            // weak
int dword_10AA0D80;            // weak
char *dword_10AA0DF4;
int dword_10AA0E68;        // weak
int dword_10AA0EDC;        // weak
int dword_10AA0F50;        // weak
int dword_10AA0FC4;        // weak
int dword_10AA1038;        // weak
int dword_10AA10AC;        // weak
int dword_10AA1120;        // weak
int dword_10AA1194;        // weak
int dword_10AA1208;        // weak
int dword_10AA127C;        // weak
int dword_10AA12F0;        // weak
int dword_10AA1364;        // weak
int dword_10AA13D8;        // weak
int dword_10AA144C;        // weak
int dword_10AA14C0;        // weak
int dword_10AA1534;        // weak
int dword_10AA15A8;        // weak
int dword_10AA161C;        // weak
int dword_10AA1690;        // weak
int dword_10AA1704;        // weak
int dword_10AA1778;        // weak
int dword_10AA17EC;        // weak
int dword_10AA1860;        // weak
int dword_10AA18D4;        // weak
int dword_10AA1948;        // weak
int dword_10AA19BC;        // weak
int dword_10AA1A30;        // weak
int dword_10AA1AA4;        // weak
int dword_10AA1B18;        // weak
int dword_10AA1B8C;        // weak
int dword_10AA1C00;        // weak
int dword_10AA1C74;        // weak
int dword_10AA1CE8;        // weak
int dword_10AA1D5C;        // weak
int dword_10AA1DD0;        // weak
int dword_10AA1E44;        // weak
int dword_10AA1EB8;        // weak
int dword_10AA1F2C;        // weak
int dword_10AA1FA0;        // weak
int dword_10AA2014;        // weak
int dword_10AA2088;        // weak
int dword_10AA20FC;        // weak
int dword_10AA2170;        // weak
int dword_10AA21E4;        // weak
int dword_10AA2258;        // weak
int dword_10AA22CC;        // weak
int dword_10AA2340;        // weak
int dword_10AA23B4;        // weak
int dword_10AA2428;        // weak
int dword_10AA249C;        // weak
int dword_10AA2510;        // weak
char byte_10AA2518[32];    // idb
int dword_10AA2538[];      // weak
int dword_10AA253C[];      // weak
int dword_10AA2540[17];    // idb
int dword_10AA2598;        // weak
float flt_10AA25A0[12];    // idb
char byte_10AA25D4;        // weak
int dword_10AA25D8;        // weak
int dword_10AA25DC;        // weak
int dword_10AA26E8;        // weak
int dword_10AA26F0;        // weak
int dword_10AA26F4[];      // weak
__int16 word_10AA270E[];   // weak
int dword_10AA2740[24];    // idb
float flt_10AA27A0[16];    // idb
int dword_10AA27E0;        // weak
int gTransmissionType0;    // weak
int gTireType0;            // weak
int gSuspensionType0;      // weak
int gConfigJoystickIndex0; // weak
float flt_10AA27FC[17];    // idb
int dword_10AA2840;        // weak
LPDIRECTINPUTDEVICEA dword_10AA2844;
int dword_10AA2848;             // weak
int dword_10AA284C;             // weak
int dword_10AA2850;             // weak
int dword_10AA2854;             // weak
int dword_10AA2858;             // weak
int dword_10AA285C;             // weak
int dword_10AA2860;             // weak
int dword_10AA2864;             // weak
int g_unkC8AreSamePtr;          // weak
__int16 word_10AA286C;          // weak
__int16 word_10AA2870;          // weak
int dword_10AA2874;             // weak
int dword_10AA2878;             // weak
int dword_10AA287C;             // weak
int dword_10AA2880;             // weak
int dword_10AA2884;             // weak
int dword_10AA2888;             // weak
int dword_10AA288C;             // weak
int dword_10AA2890;             // weak
int dword_10AA2894;             // weak
int dword_10AA2898;             // weak
int dword_10AA289C;             // weak
int dword_10AA28A0;             // weak
int dword_10AA28A4;             // weak
char byte_10AA28A8;             // weak
int dword_10AA28AC;             // weak
int dword_10AA28B0;             // weak
int dword_10AA28B4;             // weak
int dword_10AA28B8;             // weak
int dword_10AA28BC;             // weak
int dword_10AA28C0;             // weak
int dword_10AA28C4;             // idb
unsigned __int8 dword_10AA28C8; // idb
unsigned __int8 dword_10AA28CC; // idb
int dword_10AA28D0;             // weak
WORD gSurfaceCount;
int dword_10AA28D8; // weak
int dword_10AA28E0; // weak
int dword_10AA28E4; // weak
int dword_10AA28E8; // weak
int dword_10AA28EC; // weak
int dword_10AA28F0; // weak
int dword_10AA28F4; // weak
int dword_10AA28F8; // weak
int dword_10AA28FC; // weak
Iostream_init *gIostreamInit;
unk000C8 *gUnkC8Ptr1;
unk000C8 *gUnkC8Ptr6;
unk000C8 *gUnkC8Ptr12;
unk000C8 *gUnkC8Ptr13;
unk000C8 *gUnkC8Ptr14;
unk000C8 *gUnkC8Ptr4;
unk000C8 *gUnkC8Ptr5;
unk000C8 *gUnkC8Ptr15;
unk000C8 *gUnkC8Ptr16;
unk000C8 *gUnkC8Ptr17;
unk000C8 *gUnkC8Ptr18;
unk000C8 *gUnkC8Ptr19;
unk000C8 *gUnkC8Ptr20;
unk000C8 *gUnkC8Ptr21;
unk000C8 *gUnkC8Ptr22;
unk000C8 *gUnkC8Ptr11;
unk000C8 *gUnkC8Ptr24;
unk000C8 *gUnkC8Ptr10;
unk000C8 *gUnkC8Ptr25;
unk000C8 *gUnkC8Ptr26;
unk000C8 *gUnkC8Ptr27;
unk000C8 *gUnkC8Ptr28;
unk000C8 *gUnkC8Ptr30;
unk000C8 *gUnkC8Ptr31;
unk000C8 *gUnkC8Ptr32;
unk000C8 *g_unkC8Ptr0;
unk000C8 *gUnkC8Ptr7;
unk000C8 *gUnkC8Ptr8;
unk000C8 *gUnkC8Ptr33;
unk000C8 *gUnkC8Ptr38;
unk000C8 *gUnkC8Ptr3;
unk000C8 *gUnkC8Ptr2;
unk000C8 *gUnkC8Ptr34;
unk000C8 *gUnkC8Ptr35;
unk000C8 *gUnkC8Ptr29;
unk000C8 *gUnkC8Ptr36;
unk000C8 *gUnkC8Ptr37;
unk000C8 *gUnkC8Ptr9;
int dword_10AA29A8; // weak
int dword_10AA29AC; // weak
int dword_10AA29B0; // weak
int dword_10AA29B4; // weak
int dword_10AA29B8; // weak
int dword_10AA29BC; // weak
int dword_10AA29C0; // weak
int dword_10AA29C4; // weak
int dword_10AA29C8; // weak
int dword_10AA29CC; // weak
int dword_10AA29D0; // weak
int dword_10AA29D4; // weak
int dword_10AA29D8; // weak
unk1E214 *gUnk1E214;
int dword_10AA29E4; // weak
int dword_10AA29E8; // weak
int dword_10AA29EC; // weak
unk1E214 *gUnk1E214Ptr0;
int dword_10AA29F4;    // weak
__int16 word_10AA29F8; // weak
__int16 word_10AA29FC; // weak
int dword_10AA2A00;    // weak
int dword_10AA2A04;    // weak
int dword_10AA2A08;    // weak
int dword_10AA2A0C;    // weak
int dword_10AA2A10;    // weak
int dword_10AA2A14;    // weak
int dword_10AA2A18;    // weak
int dword_10AA2A1C;    // weak
int dword_10AA2A20;    // weak
int dword_10AA2A24;    // weak
int dword_10AA2A28;    // weak
int dword_10AA2A2C;    // weak
int dword_10AA2A30;    // weak
int dword_10AA2A34;    // weak
int dword_10AA2A38;    // weak
int dword_10AA2A3C;    // weak
int dword_10AA2A40;    // weak
int dword_10AA2A44;    // weak
int dword_10AA2A48;    // weak
int dword_10AA2A4C;    // weak
int dword_10AA2A50;    // weak
int dword_10AA2A54;    // weak
int dword_10AA2A58;    // weak
int dword_10AA2A5C;    // weak
int dword_10AA2A60;    // weak
float flt_10AA2A64;    // weak
float flt_10AA2A68;    // weak
int dword_10AA2A6C;    // weak
CHAR SrcStr[16];       // idb
char *dword_10AA2A80[256];
char *dword_10AA2A84;
int dword_10AA2AD4; // weak
int dword_10AA2AF0; // weak
int dword_10AA2B6C; // weak
int dword_10AA2B70; // weak
int dword_10AA2B74; // weak
int dword_10AA2B78; // weak
int dword_10AA2BDC; // weak
int dword_10AA2BE0; // weak
int dword_10AA2CF0; // weak
int dword_10AA2DAC; // weak
int dword_10AA2DB4; // weak
unk00054 *gUnk54Ptr;
char *dword_10AA2E88[256];
_UNKNOWN byte_10AA3288;
char byte_10AA3350;   // weak
char byte_10AA3353;   // weak
char byte_10AA3355;   // weak
char byte_10AA3358;   // weak
int dword_10AA3388[]; // weak
int dword_10AA3398;   // weak
int dword_10AA339C;   // weak
int dword_10AA33A0;   // weak
int dword_10AA33A4;   // weak
int dword_10AA33A8;   // weak
int dword_10AA33AC;   // weak
int dword_10AA33B0;   // weak
int dword_10AA33B4;   // weak
int dword_10AA33B8;   // weak
int dword_10AA33C0[]; // weak
int dword_10AA33C4;   // weak
int dword_10AA33C8;   // weak
int dword_10AA33CC;   // weak
int dword_10AA33D0[]; // weak
int dword_10AA33D4;   // weak
int dword_10AA33D8;   // weak
int dword_10AA33DC;   // weak
int dword_10AA33E0;   // weak
int dword_10AA33E4;   // weak
int g_TickCount;      // weak
int dword_10AA3440;   // weak
int gCarIndex;        // weak
int dword_10AA3448;   // weak
int dword_10AA344C[]; // weak
char *gDamageBitmapPtrs[3];
int gDamagePtrsMaxAddress; // weak
int dword_10AA3460;        // weak
int gBmWidth;              // weak
int gBmHeight;             // weak
__int16 word_10AA346C;     // weak
int dword_10AA3470;        // weak
int dword_10AA3474;        // weak
int dword_10AA34AC;        // weak
int dword_10ACD490;        // weak
_UNKNOWN unk_10ACD498;     // weak
int dword_10ACD4EC;        // weak
int dword_10ACD4F8;        // weak
_UNKNOWN unk_10ACD4FC;     // weak
char byte_10ACD500[2456];  // idb
int dword_10ACDE98;        // weak
int dword_10ACDE9C;        // weak
int dword_10ACDEA0;        // weak
unk00144 stru_10ACDEA8;
int dword_10ACDFEC[];   // weak
char byte_10ACDFF0[32]; // idb
int dword_10ACE010;     // weak
int dword_10ACE014;     // weak
char byte_10ACE215;     // weak
int dword_10ACED0C;     // weak
int dword_10ACED30;     // weak
# 505 * dword_10ACED34;
int dword_10ACED38;         // weak
int dword_10ACED3C[];       // weak
int dword_10ACED40;         // weak
int dword_10ACED44;         // weak
int dword_10ACEDA8[];       // weak
_UNKNOWN unk_10ACEDB0;      // weak
int dword_10ACEE20[];       // weak
int dword_10ACEE50;         // weak
int dword_10ACEE8C;         // weak
float flt_10ACEE94;         // idb
float flt_10ACEE9C;         // weak
int dword_10ACEEA0;         // weak
int dword_10ACEEA4;         // weak
int dword_10ACEEA8;         // weak
int dword_10ACEEAC;         // weak
int dword_10ACEEB0;         // weak
char byte_10ACEEB4[24];     // idb
_UNKNOWN unk_10ACEECC;      // weak
int dword_10AD05DC[];       // weak
int dword_10AD05E0[];       // weak
_UNKNOWN unk_10AD05E4;      // weak
float flt_10AD061C;         // weak
_UNKNOWN unk_10AD0628;      // weak
_UNKNOWN unk_10AD066C;      // weak
_UNKNOWN unk_10AD06B0;      // weak
_UNKNOWN unk_10AD0738;      // weak
__int16 word_10AD07B4[32];  // idb
_UNKNOWN unk_10AD07F4;      // weak
int dword_10AD084C[];       // weak
int dword_10AD0850[];       // weak
char byte_10AD0854[];       // weak
char byte_10AD0855[];       // weak
char byte_10AD0856[];       // weak
char byte_10AD0857[];       // weak
void *dword_10AD0868;       // idb
int dword_10AD086C[];       // weak
int dword_10AD0978;         // weak
int dword_10AD097C;         // weak
int dword_10AD0980;         // weak
int dword_10AD0984;         // weak
int dword_10AD0988;         // weak
int dword_10AD098C;         // weak
char gBuffer1[128];         // idb
_DWORD dword_10AD0A10[931]; // idb
int dword_10AD189C;         // weak
int dword_10AD18A0;         // weak
int dword_10AD18A4;         // weak
int dword_10AD18A8;         // weak
int dword_10AD18AC;         // weak
float flt_10AD1A04;         // weak
int dword_10AD33C4;         // weak
int dword_10AD33D0;         // weak
char byte_10AD34F8[128];
_UNKNOWN unk_10AF9524;  // weak
int dword_10AF9528;     // weak
float flt_10AF953C[18]; // idb
_UNKNOWN unk_10AF9584;  // weak
float flt_10AF959C[23]; // idb
_UNKNOWN unk_10AF95F8;  // weak
_UNKNOWN unk_10AF9658;  // weak
int dword_10AF96B8;     // weak
int dword_10AF96BC;     // weak
int dword_10AF96C0;     // weak
_UNKNOWN unk_10AF96C8;  // weak
_UNKNOWN unk_10AF971C;  // weak
int dword_10AF9728[];   // weak
float flt_10AF9740[15]; // idb
_UNKNOWN unk_10AF977C;  // weak
_UNKNOWN unk_10AF9788;  // weak
float flt_10AF9794[18]; // idb
float flt_10AF97DC[3];  // idb
_UNKNOWN unk_10AF97E8;  // weak
float flt_10AF97F4[21]; // idb
char byte_10AF9848[64]; // idb
int dword_10AF9888;     // weak
int dword_10AF988C;     // weak
_UNKNOWN unk_10AF9890;  // weak
int dword_10AF9B28;     // weak
int dword_10AF9B2C;     // weak
int dword_10AF9B30;     // weak
int dword_10AF9B38;     // weak
int dword_10AF9B3C;     // weak
int dword_10AF9B40;     // weak
int dword_10AF9B44;     // weak
int dword_10AF9B58;     // weak
int dword_10AF9B5C;     // weak
int dword_10AF9B60;     // weak
int dword_10AF9B64;     // weak
int dword_10AF9B68;     // weak
int dword_10AF9B6C;     // weak
int dword_10AF9B70;     // weak
int dword_10AF9B74;     // weak
int dword_10AF9B78;     // weak
int dword_10AF9B7C;     // weak
int dword_10AF9B80;     // weak
int dword_10AF9B84;     // weak
int dword_10AF9B88;     // weak
int dword_10AF9B8C;     // weak
int dword_10AF9B90;     // weak
int dword_10AF9B94;     // weak
float flt_10AF9B98;     // weak
int dword_10AF9B9C;     // weak
int dword_10AF9BA0;     // weak
int dword_10AF9BA4;     // weak
int dword_10AF9BA8;     // weak
int dword_10AF9BAC;     // weak
int dword_10AF9BB0;     // weak
int dword_10AF9BB4;     // weak
int dword_10AF9BB8;     // weak
_UNKNOWN unk_10AF9BC0;  // weak
_UNKNOWN unk_10AFBEE8;  // weak
_UNKNOWN unk_10AFDBC0;  // weak
int dword_10B01C40;     // weak
int dword_10B01C44;     // weak
int dword_10B01C48;     // weak
_UNKNOWN unk_10B01C50;  // weak
_UNKNOWN unk_10B01ED0;  // weak
_UNKNOWN unk_10B02190;  // weak
_UNKNOWN unk_10B022D0;  // weak
void *dword_10B02434;   // idb
int dword_10B4DF28;     // weak
BossRallyConfig gConfig;
int gConfigJoystickIndex; // weak
BossRallyConfigJoystick *gConfigJoystickPtr;
int dword_10B4E1D8;          // weak
int dword_10B4E1DC;          // weak
int dword_10B4E1E0;          // weak
char byte_10B4E1E4[260];     // idb
char dplay4aShortName[1024]; // idb
int gWidth1;                 // weak
int gHeight1;                // weak
int gBitDepth;               // weak
int dword_10B4E6F4;          // weak
CLSID *gGUID;
int gHeight0;                         // weak
int gWidth0;                          // weak
int gGap10;                           // weak
int dword_10B4E708;                   // weak
int dword_10B4E70C;                   // weak
int dword_10B4E710;                   // weak
int dword_10B4E714;                   // weak
int dword_10B4E718;                   // weak
int dword_10B4E71C;                   // weak
int dword_10B4E720;                   // weak
int dword_10B4E724;                   // weak
int dword_10B4E728;                   // weak
int dword_10B4E72C;                   // weak
int dword_10B4E730;                   // weak
int dword_10B4E734;                   // weak
int dword_10B4E738;                   // weak
int dword_10B4E73C;                   // weak
CHAR byte_10B4E740[32];               // idb
CHAR byte_10B4E760[64];               // idb
int dword_10B4E7A0;                   // weak
char byte_10B4E7AC[144];              // idb
char byte_10B4E914[4608];             // idb
char gBossRallyCfgPath[4];            // idb
int dword_10B4FFE8[120];              // idb
int (*dword_10B501C8)(void);          // weak
int (*dword_10B501CC)(void);          // weak
int(__cdecl *dword_10B501D0)(_DWORD); // weak
int (*dword_10B501D4)(void);          // weak
int dword_10B501D8;                   // weak
char byte_10B501DF[];                 // weak
char gInstallPath[260];
int dword_10B502E4;                     // weak
int dword_10B502E8[];                   // weak
int dword_10B502EC;                     // weak
int dword_11750308;                     // weak
int dword_11750310[];                   // weak
int dword_11750314;                     // weak
int dword_11750330;                     // weak
_UNKNOWN unk_11750338;                  // weak
int dword_11754E38;                     // weak
int dword_11754E3C;                     // idb
int dword_11754E40;                     // weak
int dword_11754E44;                     // weak
int dword_11754E48;                     // weak
int dword_11755490;                     // weak
int dword_11755494;                     // weak
int dword_11755498;                     // weak
int dword_1175549C;                     // weak
int dword_117554A0;                     // weak
int dword_117554A4;                     // weak
int dword_117554A8;                     // weak
int dword_117554C0;                     // weak
int dword_117554C8[];                   // weak
int dword_117554CC;                     // weak
int dword_117554D0;                     // weak
int dword_117554D4;                     // weak
int dword_117554D8;                     // weak
int dword_117554DC;                     // weak
int dword_117554E0;                     // weak
int dword_117554E4;                     // weak
int dword_117554E8;                     // weak
_UNKNOWN unk_117554F0;                  // weak
_UNKNOWN unk_117644F0;                  // weak
__int16 word_11782BA8[];                // weak
__int16 word_11782BAC[];                // weak
__int16 word_11782BB0[];                // weak
__int16 word_11782BB4[];                // weak
__int16 word_11782BB8[];                // weak
__int16 word_11782BBC[];                // weak
__int16 word_11782BC0;                  // weak
char aCRallyghostDatFilepath[264];      // idb
char aCRallyseasonDatFilepath_ptr[268]; // idb
char byte_11782DDC;                     // weak
char gBuffer0[];                        // idb
void *dword_11782E2C;                   // idb
int dword_11782E30;                     // weak
HANDLE dword_11786828;                  // idb
int dword_1178682C[];                   // weak
int dword_11786834[8];                  // idb
int dword_11786854[];                   // weak
int dword_11786858[];                   // weak
char byte_1178685C[];                   // weak
char byte_1178685D[];                   // weak
char byte_1178685E[];                   // weak
int dword_11786860[];                   // weak
float flt_117868F8[290];                // idb
int dword_11786D80[];                   // weak
int dword_11787184[];                   // weak
int dword_11787188[];                   // weak
int dword_1178718C[];                   // weak
int dword_11787190[];                   // weak
int dword_1178FEE8;                     // weak
int dword_1178FEEC;                     // weak
int dword_1178FEF0;                     // weak
int dword_1178FEF8[];                   // weak
int dword_1178FEFC[];                   // weak
int dword_1178FF00[];                   // weak
int dword_1178FF24[];                   // weak
int dword_1178FF28[];                   // weak
char byte_1178FF2C[];                   // weak
char byte_1178FF2D[];                   // weak
char byte_1178FF2E[1318];               // idb
char byte_11790454[1024];               // idb
int dword_11826AF8;                     // weak
HANDLE dword_11826B00;                  // idb
DWORD dword_11826B04;                   // idb
int dword_11826B08[];                   // weak
int dword_11826B48;                     // weak
_DWORD dword_11826BD0[2128];            // idb
int dword_11828D10;                     // weak
int dword_11828D14;                     // weak
int dword_11828D18;                     // weak
HANDLE dword_11828D1C;                  // idb
int dword_11828D20[];                   // weak
int dword_11828D28[];                   // weak
int dword_11828D2C[];                   // weak
int dword_11828D34[85];                 // idb
double dbl_11828E88[];                  // weak
int dword_11828F00;                     // weak
int dword_11828F08[15];                 // idb
LPCVOID dword_11828F48;                 // idb
# 514 * pMem;
IDirectSoundBuffer *g_dSoundBuffer;
int dword_118290F4; // weak
IDirectSound *g_DSound;
int dword_118290FC;     // weak
int dword_11829100[];   // weak
int dword_11829104;     // weak
int dword_11829108;     // weak
int dword_11829110;     // weak
char byte_11829118[64]; // idb
int dword_11829158[];   // weak
int dword_118291C8[];   // weak
int dword_11829238[];   // weak
int dword_118292A8[];   // weak
int dword_11829314;     // weak
int dword_11829318;     // weak
int dword_1182931C;     // weak
int dword_11829324;     // weak
int dword_11829328;     // weak
LPCSTR dword_11829370[303];
char gBrStrings[1208];
char *gBrstringModule;
int gBrStringOffset;                                  // weak
size_t gBrStringFileSize;                             // idb
int dword_11829838;                                   // weak
int dword_1182983C;                                   // weak
int dword_11829840;                                   // weak
int dword_11829844;                                   // weak
int dword_11829848;                                   // weak
int dword_11829850[8];                                // idb
unsigned __int8 byte_11829870[131072];                // idb
unsigned __int8 buf[393216];                          // idb
int dword_118A9870;                                   // weak
int dword_118A9874;                                   // weak
int dword_118A9878;                                   // weak
_DWORD dword_118A9880;                                // idb
_DWORD dword_118A9884[511];                           // idb
int dword_118AA080;                                   // weak
int(__cdecl *dword_118AA084)(_DWORD, _DWORD, _DWORD); // weak
int dword_118AA088;                                   // weak
float flt_118AA08C;                                   // weak
float flt_118AA090;                                   // weak
int dword_118AA094;                                   // weak
int dword_118AA098;                                   // weak
int dword_118AA09C;                                   // weak
HANDLE dword_118AA0A0;                                // idb
int(__cdecl *dword_118AA0A4)(_DWORD, _DWORD);         // weak
int(__cdecl *dword_118AA0A8)(
    _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int(__cdecl *graphics_dword_118AA0AC)(_DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD,
                                      _DWORD); // weak
int(__cdecl *dword_118AA0B0)(_DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD,
                             _DWORD);         // weak
int(__cdecl *dword_118AA0B4)(_DWORD);         // weak
int(__cdecl *dword_118AA0B8)(_DWORD, _DWORD); // weak
int(__cdecl *dword_118AA0BC)(_DWORD, _DWORD); // weak
int(__cdecl *dword_118AA0C0)(_DWORD);         // weak
int(__cdecl *dword_118AA0C4)(_DWORD);         // weak
int(__cdecl *dword_118AA0C8)(_DWORD, _DWORD); // weak
int(__cdecl *dword_118AA0CC)(_DWORD, _DWORD); // weak
int (*dword_118AA0D0)(void);                  // weak
int dword_118AB118;                           // weak
LARGE_INTEGER Frequency;                      // idb
int supportsHRPerformanceCounter;             // weak
int dword_118AB12C;                           // weak
int performanceSomething;                     // weak
int dword_118AB134;                           // weak
int dword_118AB144;                           // weak
int dword_118AB470;                           // weak
DIEFFECT gDIEffectSpring;
char byte_118AB8B8[];             // weak
char byte_118AB8F7[];             // weak
char byte_118AB8F8[];             // weak
char byte_118AB8F9[];             // weak
char byte_118AB8FA[];             // weak
char byte_118AB8FB[];             // weak
char byte_118AB8FC[];             // weak
char byte_118AB90F[];             // weak
char byte_118AB910[424];          // idb
int dword_118ABAB8;               // weak
int gDIEffectTypeSpecificParams0; // weak
int gUnused118ABAC4;              // weak
int gUnused118ABAC8;              // weak
int gUnused118ABACC;              // weak
int dword_118ABAD0;               // weak
int dword_118ABAD4;               // weak
int dword_118ABAD8;               // weak
int dword_118ABAE0[];             // weak
int dword_118ABAE4[];             // weak
int dword_118ABAE8[];             // weak
char byte_118ABB10[496];          // idb
int dword_118ABD00;               // weak
int gDIEffectTypeSpecificParams;  // weak
int gUnused118ABD0C;              // weak
int gUnused118ABD10;              // weak
int gUnused118ABD14;              // weak
int gUnused118ABD18;              // weak
int gUnused118ABD1C;              // weak
int gUnused118ABD20;              // weak
int gUnused118ABD24;              // weak
int gUnused118ABD28;              // weak
int gUnused118ABD2C;              // weak
int gUnused118ABD30;              // weak
int gUnused118ABD34;              // weak
int dword_118ABD38[];             // weak
int dword_118ABD3C[];             // weak
int dword_118ABD40[];             // weak
int dword_118ABD44[];             // weak
int dword_118ABD48[];             // weak
int dword_118ABD4C[];             // weak
char byte_118ABD50[];             // weak
char byte_118ABD51[];             // weak
char byte_118ABD52[];             // weak
char byte_118ABD53[29];           // idb
LPDIRECTINPUTA g_DirectInputA;
int dword_118ABD74; // weak
int dword_118ABD78; // weak
int dword_118ABD7C; // weak
int dword_118ABD80; // weak
DIEFFECT gDIEffectSquare;
int dword_118ABDC0; // weak
int gRunBenchmark;  // weak
int dword_118ABDC8; // weak
int dword_118ABDCC; // weak
LPDIRECTINPUTDEVICEA g_lpDirectInputDeviceA;
IDirectInputDevice2A *gDirectInputDevice2A;
int dword_118ABDD8;     // weak
int dword_118ABDDC;     // weak
__int64 qword_118ABDE0; // weak
int mouseCreated;       // weak
IDirectInputEffect *gDirectInputEffect0;
LONG gDIEffectRglDirection;
int gDirectInputEffect0Stopped; // weak
IDirectInputEffect *gDirectInputEffect;
int dword_118ABE00; // weak
unk00334 *gUnk334;
HINSTANCE hInstance; // idb
HACCEL hAccTable;    // idb
HCURSOR hCursor;     // idb
int gExitCode;       // weak
int dword_118AC230;  // weak
int dword_118AC234;  // weak
unk00334 *gUnk00334Ptr1;
CLSID *dword_118AC23C;
unk00334 *gUnk00334Ptr0;
void *Base;                                        // idb
int dword_118AC2D0;                                // weak
int dword_118AC608;                                // weak
struct _TIME_ZONE_INFORMATION TimeZoneInformation; // idb
_UNKNOWN unk_118AC70C;                             // weak
int dword_118AC720[];                              // weak
int dword_118AC728[];                              // weak
int dword_118AC72C[];                              // weak
int dword_118AC730[];                              // weak
int dword_118AC734[];                              // weak
__int64 qword_118AC740[];                          // weak
int dword_118AC74C;                                // weak
int dword_118AC758;                                // weak
int dword_118AC75C;                                // weak
int dword_118AC764;                                // weak
__int64 qword_118AC770;                            // weak
int dword_118AC778;                                // weak
int dword_118AC77C;                                // weak
int dword_118AC788;                                // weak
int dword_118AC78C;                                // weak
int dword_118AC794;                                // weak
_UNKNOWN unk_118AC898;                             // weak

//----- (10001000) --------------------------------------------------------
int __cdecl CalculateChecksum(unsigned int seed, unsigned __int8 *buf, unsigned int elementSize) {
    unsigned __int8 *buf_1; // esi
    unsigned int sum2;      // ecx
    unsigned int sum1;      // edi
    unsigned int i;         // ebx
    int chunkSize;          // eax
    unsigned int v9;        // ebp
    int v10;                // edx
    int v11;                // ecx
    int v12;                // edi
    int v13;                // ecx
    int v14;                // edi
    int v15;                // ecx
    int v16;                // edi
    int v17;                // ecx
    int v18;                // edi
    int v19;                // ecx
    int v20;                // edi
    int v21;                // ecx
    int v22;                // edi
    int v23;                // ecx
    int v24;                // edi
    int v25;                // ecx
    int v26;                // edi
    int v27;                // ecx
    int v28;                // edi
    int v29;                // ecx
    int v30;                // edi
    int v31;                // ecx
    int v32;                // edi
    int v33;                // ecx
    int v34;                // edi
    int v35;                // ecx
    int v36;                // edi
    int v37;                // ecx
    int v38;                // edi
    int v39;                // ecx
    int v40;                // edi

    buf_1 = buf;
    sum2 = (unsigned __int16)seed;
    sum1 = HIWORD(seed);
    if (!buf)
        return 1;
    for (i = elementSize; i; sum1 %= 0xFFF1u) {
        chunkSize = i;
        if (i >= 0x15B0)
            chunkSize = 0x15B0;
        i -= chunkSize;
        if (chunkSize >= 0x10) {
            v9 = (unsigned int)chunkSize >> 4;
            do {
                chunkSize -= 0x10;
                v10 = *buf_1;
                buf_1 += 0x10;
                v11 = v10 + sum2;
                v12 = v11 + sum1;
                v13 = *(buf_1 - 15) + v11;
                v14 = v13 + v12;
                v15 = *(buf_1 - 14) + v13;
                v16 = v15 + v14;
                v17 = *(buf_1 - 13) + v15;
                v18 = v17 + v16;
                v19 = *(buf_1 - 12) + v17;
                v20 = v19 + v18;
                v21 = *(buf_1 - 11) + v19;
                v22 = v21 + v20;
                v23 = *(buf_1 - 10) + v21;
                v24 = v23 + v22;
                v25 = *(buf_1 - 9) + v23;
                v26 = v25 + v24;
                v27 = *(buf_1 - 8) + v25;
                v28 = v27 + v26;
                v29 = *(buf_1 - 7) + v27;
                v30 = v29 + v28;
                v31 = *(buf_1 - 6) + v29;
                v32 = v31 + v30;
                v33 = *(buf_1 - 5) + v31;
                v34 = v33 + v32;
                v35 = *(buf_1 - 4) + v33;
                v36 = v35 + v34;
                v37 = *(buf_1 - 3) + v35;
                v38 = v37 + v36;
                v39 = *(buf_1 - 2) + v37;
                v40 = v39 + v38;
                sum2 = *(buf_1 - 1) + v39;
                sum1 = sum2 + v40;
                --v9;
            } while (v9);
        }
        for (; chunkSize; --chunkSize) {
            sum2 += *buf_1++;
            sum1 += sum2;
        }
        sum2 %= 0xFFF1u;
    }
    return sum2 | (sum1 << 16);
}

//----- (10001140) --------------------------------------------------------
int __thiscall meth_unk00334_setField0Validate(unk00334 *this, unk0008C *a2) {
    if (!a2)
        return -2005522670;
    this->ddCapsFlags = a2;
    return 0;
}

//----- (10001160) --------------------------------------------------------
int __thiscall meth_unk000334_10001160(unk00334 *this) {
    int result;    // eax
    unk0008C *u8c; // eax

  if ( !this->ddCapsFlags || (this->ddCapsFlags->? & 0x1F) != 0x1F )
      return -2005522669;
  u8c = this->ddCapsFlags;
  if ( this->ddCapsFlags && (u8c->? & 0x1F) == 0x1F && u8c->? && u8c->lpDirect3DDevice && u8c->lpDirect3DViewport2 )
      result = 0;
  else
      result = 0x80004005;
  return result;
}

//----- (10001180) --------------------------------------------------------
int returnZeroWrapper() {
  ReturnZero();
  return 0;
}

//----- (10001190) --------------------------------------------------------
int sub_10001190() {
  void *v0; // ecx

  sub_10024BB0();
  if (dword_100AC300)
      meth_DebugPrint(v0);
  return 0;
}
// 1000119E: variable 'v0' is possibly undefined
// 100AC300: using guessed type int dword_100AC300;

//----- (100011F0) --------------------------------------------------------
void __thiscall meth_100011F0(float *this, float a2, int a3) {
  float *this_offset_A38;   // ebx
  __int16 v4;               // ax
  int v5;                   // esi
  float *v6;                // edi
  __int16 v7;               // ax
  int v8;                   // esi
  double v9;                // st7
  int *v10;                 // ebx
  char *v11;                // esi
  char *i;                  // edi
  double v13;               // st7
  double v14;               // st7
  int *v16;                 // ebx
  char *v17;                // esi
  char *j;                  // edi
  double v19;               // st7
  double v20;               // st7
  float v21;                // [esp+0h] [ebp-68h]
  float v22;                // [esp+14h] [ebp-54h]
  float v23;                // [esp+14h] [ebp-54h]
  int v24;                  // [esp+18h] [ebp-50h]
  int v25;                  // [esp+18h] [ebp-50h]
  float *this_offset_A38_1; // [esp+1Ch] [ebp-4Ch]
  int v27;                  // [esp+20h] [ebp-48h]
  int v28;                  // [esp+24h] [ebp-44h]
  int v29;                  // [esp+28h] [ebp-40h]
  int v30[3];               // [esp+2Ch] [ebp-3Ch] BYREF
  int v31;                  // [esp+38h] [ebp-30h] BYREF
  int v32;                  // [esp+3Ch] [ebp-2Ch]
  int v33;                  // [esp+40h] [ebp-28h]
  int v34[3];               // [esp+44h] [ebp-24h] BYREF
  int v35;                  // [esp+50h] [ebp-18h] BYREF
  int v36;                  // [esp+54h] [ebp-14h]
  int v37;                  // [esp+58h] [ebp-10h]
  float v38[3];             // [esp+5Ch] [ebp-Ch] BYREF
  float v39;                // [esp+6Ch] [ebp+4h]
  float v40;                // [esp+6Ch] [ebp+4h]
  float v41;                // [esp+6Ch] [ebp+4h]
  float v42;                // [esp+6Ch] [ebp+4h]
  float v43;                // [esp+6Ch] [ebp+4h]
  int v44;                  // [esp+70h] [ebp+8h]
  int v45;                  // [esp+70h] [ebp+8h]

  this_offset_A38 = this + 0xA38;
  dword_100C129C = 0;
  this_offset_A38_1 = this + 0xA38;
  v4 = sub_1006F720(this[0xA38], this[0xA39]);
  v5 = v4;
  v30[0] = v4;
  v6 = (float *)(LODWORD(a2) + 48);
  v28 = LODWORD(a2) + 48;
  v7 = sub_1006F720(*(float *)(LODWORD(a2) + 48), *(float *)(LODWORD(a2) + 52));
  v8 = (v5 != v7) + 1;
  v30[1] = v7;
  v29 = v8;
  sub_1003AEE0((float *)v34, (float *)(LODWORD(a2) + 48), this_offset_A38);
  v24 = 0;
  v9 = sub_1003B170((float *)v34);
  if (v9 == 0.0)
      v22 = 1.0;
  else
      v22 = (v9 - -0.1) / v9;
  if (v8 > 0) {
      v10 = v30;
      v27 = v8;
      do {
          v11 = (char *)&unk_11750338 + 4800 * *v10;
          for (i = &v11[32 * *((unsigned __int16 *)&dword_117554A0 + *v10)]; v11 != i; v11 += 32) {
              v13 = sub_1003AC90((float *)v34, (float *)v11);
              if (v13 < 0.0) {
                  sub_1003AEE0(v38, *((float **)v11 + 4), this_offset_A38_1);
                  v39 = v13;
                  v14 = sub_1003AC90(v38, (float *)v11) / v39;
                  v40 = v14;
                  if (v14 > 0.0 && v40 < (double)v22) {
                      sub_1003AFE0((int)&v31, (int)this_offset_A38_1, (int)v34, v40);
                      if (sub_1003B940((float *)&v31,
                                       *((float **)v11 + 4),
                                       *((float **)v11 + 5),
                                       *((float **)v11 + 6),
                                       (int)v11)) {
                          v22 = v14;
                          v24 = (int)v11;
                          v35 = v31;
                          v36 = v32;
                          v37 = v33;
                      }
                  }
              }
          }
          ++v10;
          --v27;
      } while (v27);
      v8 = v29;
      v6 = (float *)v28;
      this_offset_A38 = this_offset_A38_1;
  }
  if (v24) {
      sub_1003AEE0((float *)v34, v6, (float *)a3);
      v25 = 0;
      v23 = 1.0;
      if (v8 > 0) {
          v16 = v30;
          v44 = v8;
          do {
              v17 = (char *)&unk_11750338 + 4800 * *v16;
              for (j = &v17[32 * *((unsigned __int16 *)&dword_117554A0 + *v16)]; v17 != j;
                   v17 += 32) {
                  v19 = sub_1003AC90((float *)v34, (float *)v17);
                  if (v19 < 0.0) {
                      sub_1003AEE0(v38, *((float **)v17 + 4), (float *)a3);
                      v41 = v19;
                      v20 = sub_1003AC90(v38, (float *)v17) / v41;
                      v42 = v20;
                      if (v20 > 0.0 && v42 < (double)v23) {
                          sub_1003AFE0((int)&v31, a3, (int)v34, v42);
                          if (sub_1003B940((float *)&v31,
                                           *((float **)v17 + 4),
                                           *((float **)v17 + 5),
                                           *((float **)v17 + 6),
                                           (int)v17)) {
                              v23 = v20;
                              v25 = (int)v17;
                              v35 = v31;
                              v36 = v32;
                              v37 = v33;
                          }
                      }
                  }
              }
              ++v16;
              --v44;
          } while (v44);
          v6 = (float *)v28;
          this_offset_A38 = this_offset_A38_1;
      }
      if (v25) {
          *(float *)&v45 = sub_1003B0E0(v6, this_offset_A38);
          sub_1003AFE0((int)v6, (int)&v35, v25, 0.30000001);
          sub_1003AEE0((float *)v30, v6, this_offset_A38);
          v43 = sub_1003B170((float *)v30);
          if (*(float *)&v45 < (double)v43 && v43 != 0.0) {
              v21 = *(float *)&v45 / v43;
              sub_1003AD10((int)v30, v21);
              sub_1003AF40(v6, this_offset_A38, (float *)v30);
          }
          dword_100C129C = 1;
      }
  }
}
// 100C129C: using guessed type int dword_100C129C;
// 117554A0: using guessed type int dword_117554A0;

//----- (100015D0) --------------------------------------------------------
float *__thiscall meth_100015D0(#479 * this, float a2, float a3) {
  int v4;        // esi
  float *result; // eax
  float *v6;     // esi
  double v7;     // st7
  double v8;     // st7
  float v9;      // [esp+0h] [ebp-20h]
  float v10;     // [esp+0h] [ebp-20h]
  int v11[3];    // [esp+14h] [ebp-Ch] BYREF
  int v12;       // [esp+24h] [ebp+4h]

  if (*((_DWORD *)this + 0x3DF)) {
      v4 = LODWORD(a2) + 0x30;
      sub_1003AFE0(LODWORD(a2) + 0x30, (int)this + 0x30, (int)this + 0x20, 2.4000001);
      v12 = -1053818880;
      if (dword_100AA8B4 != 1)
          v12 = -1046583706;
      result = (float *)sub_1003AFE0(v4, v4, (int)this, *(float *)&v12);
  } else {
      v6 = (float *)(LODWORD(a2) + 48);
      *(float *)(LODWORD(a2) + 56) = *(float *)(LODWORD(a2) + 56) - 2.4000001;
      sub_1003AEE0((float *)v11, (float *)(LODWORD(a2) + 48), (float *)this + 0xC);
      v7 = sub_1003B170((float *)v11);
      if (v7 != 0.0) {
          if (dword_100AA8B4 == 1)
              v9 = 11.0 / v7;
          else
              v9 = 19.799999 / v7;
          sub_1003AD10((int)v11, v9);
      }
      if (dword_106909E0) {
          sub_1003ACE0((int)v6, (int)this, 11.0);
      } else if (gGameMode == GAME_MODE_5) {
          sub_1003ACE0((int)v6, (int)this + 16, -11.0);
          sub_1003B020((int)v6, (int)this, -13.0);
      } else {
          sub_1003ACE0((int)v6, (int)this, -11.0);
      }
      v8 = sub_1003B170(v6);
      if (v8 != 0.0) {
          v10 = 11.0 / v8;
          sub_1003AD10((int)v6, v10);
      }
      sub_1003AFA0((int)v6, (int)v6, (int)v11, a3);
      result = sub_1003AF70(v6, (float *)this + 0xC);
      *(float *)(LODWORD(a2) + 56) = *(float *)(LODWORD(a2) + 56) - -2.4000001;
  }
  return result;
}
// 100AA8B4: using guessed type int dword_100AA8B4;
// 106909E0: using guessed type int dword_106909E0;

//----- (10001760) --------------------------------------------------------
int __thiscall meth_10001760(void *this) {
  int result;          // eax
  double v3;           // st7
  int v4;              // edx
  double v5;           // st7
  double v7;           // st7
  char v8;             // c0
  unsigned __int8 v10; // c0
  unsigned __int8 v11; // c3
  char v13;            // c0
  float v14;           // [esp+8h] [ebp-4h]

  if (*((_DWORD *)this + 0x3DF))
      return sub_1003AFE0((int)this + 0x28E0, (int)this + 0x30, (int)this + 0x20, 1.1);
  v3 = *((float *)this + 0xE) - -0.66000003;
  v4 = *((_DWORD *)this + 0xC);
  *((_DWORD *)this + 0xA39) = *((_DWORD *)this + 0xD);
  *((float *)this + 0xA3A) = v3;
  *((_DWORD *)this + 0xA38) = v4;
  v5 = sub_1003B170((float *)this + 0x81);
  result = gGameMode;
  v14 = v5;
  if (gGameMode != GAME_MODE_5) {
      v7 = 0.0;
      if (v8) {
          v7 = 2.0;
      } else if (v14 < 7.0) {
          v7 = 4.0 - v14 * 0.5714286;
      }
      if (v7 <= *((float *)this + 0xA37)) {
          if (v7 < *((float *)this + 0xA37)) {
              *((float *)this + 0xA37) = *((float *)this + 0xA37) - 0.1;
              if (v13)
                  *((float *)this + 0xA37) = v7;
          }
      } else {
          *((float *)this + 0xA37) = *((float *)this + 0xA37) - -0.1;
          if (!(v10 | v11))
              *((float *)this + 0xA37) = v7;
      }
      result = sub_1003B020((int)this + 0x28E0, (int)this, *((float *)this + 0xA37));
  }
  return result;
}
// 100017E8: variable 'v8' is possibly undefined
// 1000183A: variable 'v10' is possibly undefined
// 1000183A: variable 'v11' is possibly undefined
// 1000186D: variable 'v13' is possibly undefined

//----- (10001890) --------------------------------------------------------
float *__thiscall meth_10001890(_DWORD *this, float a2) {
  double v4; // st7
  float *v5; // ebx
  int v7[3]; // [esp+Ch] [ebp-Ch] BYREF
  float v8;  // [esp+1Ch] [ebp+4h]

  sub_1003AEE0((float *)v7, (float *)this + 0xA38, (float *)(LODWORD(a2) + 0x30));
  v4 = sub_1003B170((float *)v7);
  if (v4 == 0.0) {
      if (sub_1003B170((float *)LODWORD(a2)) == 0.0) {
          *(_DWORD *)LODWORD(a2) = *this;
          *(_DWORD *)(LODWORD(a2) + 4) = this[1];
          *(_DWORD *)(LODWORD(a2) + 8) = this[2];
      }
  } else {
      v8 = v4;
      sub_1003AD40(SLODWORD(a2), (int)v7, v8);
  }
  if (this[0x3DF]) {
      v5 = (float *)(LODWORD(a2) + 16);
      sub_1003AC30((float *)(LODWORD(a2) + 16), (float *)this + 8, (float *)LODWORD(a2));
  } else {
      v7[0] = 0;
      v7[1] = 0;
      v7[2] = 1065353216;
      v5 = (float *)(LODWORD(a2) + 16);
      sub_1003AC30((float *)(LODWORD(a2) + 16), (float *)v7, (float *)LODWORD(a2));
  }
  return sub_1003AC30((float *)(LODWORD(a2) + 32), (float *)LODWORD(a2), v5);
}

//----- (10001970) --------------------------------------------------------
float *__thiscall meth_10001970(#481 * this) {
  float *result; // eax

  *((_DWORD *)this + 0x9CD) = (char *)this + 0x2808;
  sub_1003AFE0((int)this + 0x2838, (int)this + 0x30, (int)this, 6.0);
  sub_1003B020((int)this + 0x2838, (int)this + 0x10, 2.0);
  result = sub_1003AF70((float *)this + 0xA0E, (float *)this + 8);
  *((_DWORD *)this + 0x3DE) = 2;
  return result;
}

//----- (100019D0) --------------------------------------------------------
int __thiscall meth_100019D0(#479 * this) {
  int v2;              // edx
  int v3;              // eax
  double v4;           // st7
  unsigned __int8 v6;  // c0
  unsigned __int8 v7;  // c3
  double v8;           // st7
  double v9;           // st7
  double v10;          // st7
  double v11;          // st6
  double v12;          // st7
  double v13;          // st6
  char *v14;           // esi
  unsigned __int8 v16; // c0
  unsigned __int8 v17; // c3
  char v19;            // c0
  float *v20;          // ebp
  long double v21;     // st6
  double v22;          // st7
  double v23;          // st5
  double v24;          // st4
  long double v25;     // st3
  double v26;          // st6
  double v27;          // st2
  double v28;          // st1
  int v29;             // eax
  double v30;          // rt2
  double v31;          // rt0
  double v32;          // st1
  double v33;          // st5
  double v34;          // st0
  double v35;          // st4
  double v36;          // st0
  double v37;          // st6
  double v38;          // rtt
  double v39;          // st7
  int result;          // eax
  float v41;           // [esp+0h] [ebp-28h]
  float v42;           // [esp+0h] [ebp-28h]
  float v43;           // [esp+14h] [ebp-14h]
  float v44;           // [esp+14h] [ebp-14h]
  float v45;           // [esp+14h] [ebp-14h]
  float v46;           // [esp+18h] [ebp-10h]
  int v47[3];          // [esp+1Ch] [ebp-Ch] BYREF

  v2 = *((_DWORD *)this + 0x9ED);
  v3 = *((_DWORD *)this + 04756);
  v47[0] = *((_DWORD *)this + 0x9EC);
  v47[1] = v2;
  v47[2] = v3;
  v46 = sub_1003B170((float *)this + 0x81);
  v4 = sub_1003B170((float *)this + 0x7A);
  v43 = v4 * 0.30000001;
  if (v6 | v7)
      v8 = 0.0;
  else
      v8 = v46 - 2.5;
  if (v8 > 31.415928)
      v8 = 31.415928;
  if (v43 > 31.415928)
      v43 = 31.415928;
  if (v8 <= *((float *)this + 2613))
      v8 = v8 * 0.050000001 + *((float *)this + 2613) * 0.94999999;
  *((float *)this + 2613) = v8;
  v9 = v43 * 0.050000001 + *((float *)this + 2614) * 0.94999999;
  *((float *)this + 2614) = v9;
  *((float *)this + 2614) = (1.0 - *((float *)this + 2622) * 18.181818) * v9;
  *((_DWORD *)this + 2540) = *((_DWORD *)this + 2619);
  *((_DWORD *)this + 2541) = *((_DWORD *)this + 2620);
  *((_DWORD *)this + 2542) = *((_DWORD *)this + 2621);
  if (dword_106909E0)
      v10 = 0.5;
  else
      v10 = 0.15000001;
  v11 = v10 * 0.031830989;
  v12 = *((float *)this + 2613) * 0.0095492965;
  v13 = v11 * *((float *)this + 2614);
  v14 = (char *)this + 10112;
  if (v12 - v13 + *((float *)this + 2622) <= 0.07) {
      v41 = v13 - (*((float *)this + 2622) + v12 - 0.07);
      meth_100015D0(this, COERCE_FLOAT((#479 *)((char *)this + 10112)), v41);
  } else {
      meth_100015D0(this, COERCE_FLOAT((#479 *)((char *)this + 10112)), 0.0);
  }
  meth_10001760(this);
  *((_DWORD *)this + 2619) = *((_DWORD *)this + 2540);
  *((_DWORD *)this + 2620) = *((_DWORD *)this + 2541);
  *((_DWORD *)this + 2621) = *((_DWORD *)this + 2542);
  if (!*((_DWORD *)this + 991)) {
      meth_100011F0((float *)this, *(float *)&v14, (int)v47);
      if (dword_100C129C) {
          if (dword_106909E0) {
              dword_10AF9BB4 = 30;
              if (*((char **)this + 2509) == v14) {
                  *((_DWORD *)this + 2509) = (char *)this + 10044;
                  *((_DWORD *)this + 990) = 2;
                  dword_10AF9BB0 = 60;
              }
          }
          if (*((float *)this + 2622) >= 0.02) {
              *((float *)this + 2622) = *((float *)this + 2622) - -0.0099999998;
              if (!(v16 | v17))
                  *((_DWORD *)this + 2622) = 1029785518;
              *((_DWORD *)this + 2622) = 1028443341;
          } else {
              *((_DWORD *)this + 2622) = 1017370378;
              *((_DWORD *)this + 2622) = 1028443341;
          }
      } else {
          if (dword_10AF9BB4)
              --dword_10AF9BB4;
          *((float *)this + 2622) = *((float *)this + 2622) - 0.0049999999;
          if (v19)
              *((_DWORD *)this + 2622) = 0;
      }
  }
  meth_10001890(this, *(float *)&v14);
  if (*((_DWORD *)this + 991)) {
      qmemcpy((char *)this + 10044, this, 0x44u);
  } else {
      *((float *)this + 2523) =
          *(float *)(*((_DWORD *)this + 2673) + 32952) * *((float *)this + 8) +
          *(float *)(*((_DWORD *)this + 2673) + 32944) * *(float *)this + *((float *)this + 12);
      *((float *)this + 2524) =
          *(float *)(*((_DWORD *)this + 2673) + 32944) * *((float *)this + 1) +
          *(float *)(*((_DWORD *)this + 2673) + 32952) * *((float *)this + 9) +
          *((float *)this + 13);
      *((float *)this + 2525) =
          *(float *)(*((_DWORD *)this + 2673) + 32944) * *((float *)this + 2) +
          *(float *)(*((_DWORD *)this + 2673) + 32952) * *((float *)this + 10) +
          *((float *)this + 14);
      sub_1003B020((int)this + 10044, (int)this, -20.0);
      sub_1003ACC0((float *)this + 2511, (float *)this + 2511);
      sub_1003AE50((float *)this + 2511);
      *((_DWORD *)this + 2515) = *((_DWORD *)this + 4);
      *((_DWORD *)this + 2516) = *((_DWORD *)this + 5);
      *((_DWORD *)this + 2517) = *((_DWORD *)this + 6);
      sub_1003AC30((float *)this + 2519, (float *)this + 2511, (float *)this + 2515);
  }
  qmemcpy((char *)this + 10180, (char *)this + 10044, 0x44u);
  sub_1003B020((int)this + 10228, (int)this, 0.60000002);
  v20 = (float *)((char *)this + 32);
  *((_DWORD *)this + 2570) = 0;
  *((_DWORD *)this + 2571) = 0;
  *((_DWORD *)this + 2572) = 1065353216;
  sub_1003AF40((float *)this + 2562, (float *)this + 12, (float *)this + 8);
  sub_1003AF10((float *)this + 2562, (float *)this + 2574);
  v44 = sub_1003B170((float *)this + 2562);
  sub_1003AD70((int)this + 10248, v44);
  sub_1003AC30((float *)this + 2566, (float *)this + 2570, (float *)this + 2562);
  sub_1003AC30((float *)this + 2570, (float *)this + 2562, (float *)this + 2566);
  if (v44 > 1.0) {
      if (v44 < 101.0)
          v45 = v44 - 1.0;
      else
          v45 = 100.0;
  } else {
      v45 = 0.0;
  }
  v42 = (v45 - 1.0) * 0.041887902;
  v21 = cos_(v42);
  v22 = *(float *)this;
  v23 = *v20;
  v24 = *((float *)this + 9);
  v25 = v21 * 0.1 - (51.0 - v45) * -0.0040000002;
  v26 = *((float *)this + 10);
  v27 = *((float *)this + 2);
  v28 = -*((float *)this + 1);
  *((float *)this + 2578) = (v25 - -0.69999999) * flt_100AA8AC;
  *((float *)this + 2561) = flt_100AA8AC;
  *((float *)this + 2544) = flt_100AA8AC;
  *((float *)this + 2527) = flt_100AA8AC;
  v29 = *((_DWORD *)this + 2673);
  *((float *)this + 2612) = flt_100AA8AC;
  v30 = v28;
  v31 = v23 * *(float *)(v29 + 32952);
  v32 = -*((float *)this + 4);
  v33 = -*((float *)this + 5);
  *((float *)this + 2608) = v31 - v22 * *(float *)(v29 + 32948) * -2.0 + *((float *)this + 12);
  v34 = v24 * *(float *)(v29 + 32952) - *(float *)(v29 + 32948) * *((float *)this + 1) * -2.0;
  v35 = -*((float *)this + 6);
  *((float *)this + 2609) = v34 + *((float *)this + 13);
  v36 = v26;
  v37 = *(float *)(v29 + 32948) * *((float *)this + 2);
  v38 = v36 * *(float *)(v29 + 32952);
  *((float *)this + 2596) = -v22;
  *((float *)this + 2597) = v30;
  *((float *)this + 2598) = -v27;
  *((float *)this + 2600) = v32;
  *((float *)this + 2601) = v33;
  v39 = v38 - v37 * -2.0 + *((float *)this + 14);
  *((float *)this + 2602) = v35;
  *((float *)this + 2610) = v39;
  *((float *)this + 2604) = *v20;
  *((_DWORD *)this + 2605) = *((_DWORD *)this + 9);
  *((_DWORD *)this + 2606) = *((_DWORD *)this + 10);
  result = *((_DWORD *)this + 2509);
  *((_DWORD *)this + 2510) = result;
  return result;
}
// 10001A2B: variable 'v6' is possibly undefined
// 10001A2B: variable 'v7' is possibly undefined
// 10001C4E: variable 'v16' is possibly undefined
// 10001C4E: variable 'v17' is possibly undefined
// 10001C95: variable 'v19' is possibly undefined
// 100AA8AC: using guessed type float flt_100AA8AC;
// 100C129C: using guessed type int dword_100C129C;
// 106909E0: using guessed type int dword_106909E0;
// 10AF9BB0: using guessed type int dword_10AF9BB0;
// 10AF9BB4: using guessed type int dword_10AF9BB4;

//----- (10001FF0) --------------------------------------------------------
int __thiscall meth_10001FF0(#482 * this) {
  char *v2;   // eax
  _DWORD *v3; // edi
  int result; // eax

  v2 = (char *)this + 10112;
  if (gGameMode != GAME_MODE_5)
      v2 = (char *)this + 10044;
  *((_DWORD *)this + 2509) = v2;
  *((_DWORD *)this + 2510) = v2;
  v3 = (_DWORD *)((char *)this + 10160);
  sub_1003AFE0((int)this + 10160, (int)this + 48, (int)this + 32, 4.0);
  if (dword_106909E0)
      sub_1003B020((int)this + 10160, (int)this, 10.0);
  sub_1003AF10((float *)this + 2540, (float *)this);
  *((_DWORD *)this + 0xA0E) = *v3;
  *((_DWORD *)this + 2575) = *((_DWORD *)this + 2541);
  *((_DWORD *)this + 2576) = *((_DWORD *)this + 2542);
  *((_DWORD *)this + 2619) = *v3;
  *((_DWORD *)this + 2620) = *((_DWORD *)this + 2541);
  *((_DWORD *)this + 2621) = *((_DWORD *)this + 2542);
  *((_DWORD *)this + 2622) = 0;
  *((_DWORD *)this + 2624) = *v3;
  result = *((_DWORD *)this + 2541);
  *((_DWORD *)this + 2625) = result;
  *((_DWORD *)this + 2626) = *((_DWORD *)this + 2542);
  *((_DWORD *)this + 2615) = 0x40000000;
  return result;
}
// 106909E0: using guessed type int dword_106909E0;

//----- (100020C0) --------------------------------------------------------
long double __cdecl cos_(float a1) {
  return cos(a1);
}

//----- (100020D0) --------------------------------------------------------
int __cdecl CreateMinuteSecondsString(char *outBuffer, float totalSeconds) {
  __int64 qwTotalSeconds; // rax

  qwTotalSeconds = (__int64)(totalSeconds * 100.0);
  return sprintf(outBuffer,
                 "%d:%02d.%02d",
                 (int)qwTotalSeconds / 100 / 60,
                 (int)qwTotalSeconds / 100 % 60,
                 (_DWORD)qwTotalSeconds +
                     20 * (4 * ((int)qwTotalSeconds / -100) - (int)qwTotalSeconds / 100));
}

//----- (10002140) --------------------------------------------------------
CarPart *sub_10002140() {
  enum MACRO_GAME_MODE v0; // eax
# 505 * v1;                // ebp
  char *v2;                // eax
# 505 ** v3;               // edx
  void *v4;                // edi
  const void *v5;          // esi
  int v6;                  // ecx

  memset(&gGameMode1, 0, 0x118u);
  v0 = gGameMode;
  gGameMode1 = gGameMode;
  if (gGameMode == GAME_MODE_0) {
      v1 = dword_10ACED34;
      LOBYTE(v0) = *((_BYTE *)dword_10ACED34 + 4);
      dword_10220B24 = v0;
      dword_10220B28 = *((unsigned __int8 *)dword_10ACED34 + 5);
      dword_10220B2C = *(_DWORD *)dword_10ACED34;
      gChosenTrack1 = gChosenTrack;
      gChosenWeather2 = gChosenWeather1;
      v2 = &byte_10220B3C;
      v3 = &dword_10ACED34;
      do {
          *((_DWORD *)v2 - 1) = v3[71];
          v4 = v2 + 12;
          v2 += 64;
          v5 = v3 + 74;
          v6 = *((unsigned __int8 *)*v3 + 4 * dword_10220B24 + dword_10220B28 + 6);
          v3 += 2778;
          *((_DWORD *)v2 - 16) = v6;
          *((_DWORD *)v2 - 15) = byte_100AA210[v6];
          *((_DWORD *)v2 - 14) = *(v3 - 2690);
          qmemcpy(v4, v5, 0x30u);
      } while ((int)v2 < (int)&unk_10220B7C);
      qmemcpy(&unk_10A9DBD8, v1, 0x14Cu);
      dword_100B4050 = 1;
      sub_1002F4C0();
      qmemcpy(&dword_10AA26F0, dword_10ACED34, 0x14Cu);
      sub_1002F460();
  }
  return sub_10035BD1();
}
// 100B380C: using guessed type int gChosenTrack;
// 100B4050: using guessed type int dword_100B4050;
// 10220B20: using guessed type int gGameMode1;
// 10220B24: using guessed type int dword_10220B24;
// 10220B28: using guessed type int dword_10220B28;
// 10220B2C: using guessed type int dword_10220B2C;
// 10220B30: using guessed type int gChosenTrack1;
// 10220B34: using guessed type int gChosenWeather2;
// 10220B3C: using guessed type char byte_10220B3C;
// 104BBE08: using guessed type int gChosenWeather1;
// 10AA26F0: using guessed type int dword_10AA26F0;

//----- (10002240) --------------------------------------------------------
long double __cdecl sin_(float a1) {
  return sin(a1);
}

//----- (10002250) --------------------------------------------------------
long double __cdecl sqrt_(float a1) {
  return sqrt(a1);
}

//----- (10002260) --------------------------------------------------------
int pm_sub_10002260() {
  if (!gPlayMusic || !dword_10220CD0 || dword_10220C3C)
      return 1;
  if (!EAR_DLL_RegisterChannel(dword_100940A8, 6, 10000, 5)) {
      dword_10220C3C = 0;
      return 1;
  }
  if (!dword_10220C48)
      EAR_DLL_RegisterMatrix(1);
  dword_10220CA0 = 0;
  dword_10220CB0 = 4;
  dword_10220CB4 = 0;
  dword_10220CA4 = 0;
  word_10220C78 = 4;
  dword_10220CB8 = 0;
  dword_10220CA8 = 0;
  dword_10220C48 = 1;
  word_10220C50 = 128;
  dword_10220C54 = 0;
  gWPARAM = 0;
  word_10220C60 = 0;
  word_10220C62 = 10000;
  dword_10220C64 = 10000;
  dword_10220C68 = 0;
  dword_10220C6C = 0;
  dword_10220C70 = 0;
  dword_10220C74 = 0;
  word_10220C7A = 0;
  dword_10220C7C = 0;
  dword_10220C80 = 0;
  word_10220C8E = 10000;
  word_10220C90 = 10000;
  word_10220C92 = 0;
  word_10220C94 = 0;
  word_10220C96 = 0;
  dword_10220C98 = 0;
  word_10220C8C = 0;
  dword_10220C84 = 0;
  dword_10220C88 = 1;
  word_10220C9C = 0;
  word_10220C9E = 0;
  dword_10220CBC = 0;
  word_10220CC0 = 0;
  word_10220CC2 = 1000;
  word_10220CC4 = 2500;
  word_10220CC6 = 5000;
  word_10220CC8 = 7500;
  word_10220CCA = 9000;
  word_10220CCC = 10000;
  dword_10220CAC = 0;
  word_10220C52 = 30;
  word_10220C5E = 1;
  word_10220C5C = dword_100940A8;
  dword_10220C44 = EAR_DLL_ChangeChannelControl(dword_100940A8, 268435488);
  playParmsPlayTo = EAR_DLL_ChangeChannelControl(dword_100940A8, 268435520);
  dword_10220C3C = 1;
  return 1;
}
// 100940A4: using guessed type int gPlayMusic;
// 10220C38: using guessed type int playParmsPlayTo;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220C44: using guessed type int dword_10220C44;
// 10220C48: using guessed type int dword_10220C48;
// 10220C50: using guessed type __int16 word_10220C50;
// 10220C52: using guessed type __int16 word_10220C52;
// 10220C54: using guessed type int dword_10220C54;
// 10220C58: using guessed type int gWPARAM;
// 10220C5C: using guessed type __int16 word_10220C5C;
// 10220C5E: using guessed type __int16 word_10220C5E;
// 10220C60: using guessed type __int16 word_10220C60;
// 10220C62: using guessed type __int16 word_10220C62;
// 10220C64: using guessed type int dword_10220C64;
// 10220C68: using guessed type int dword_10220C68;
// 10220C6C: using guessed type int dword_10220C6C;
// 10220C70: using guessed type int dword_10220C70;
// 10220C74: using guessed type int dword_10220C74;
// 10220C78: using guessed type __int16 word_10220C78;
// 10220C7A: using guessed type __int16 word_10220C7A;
// 10220C7C: using guessed type int dword_10220C7C;
// 10220C80: using guessed type int dword_10220C80;
// 10220C84: using guessed type int dword_10220C84;
// 10220C88: using guessed type int dword_10220C88;
// 10220C8C: using guessed type __int16 word_10220C8C;
// 10220C8E: using guessed type __int16 word_10220C8E;
// 10220C90: using guessed type __int16 word_10220C90;
// 10220C92: using guessed type __int16 word_10220C92;
// 10220C94: using guessed type __int16 word_10220C94;
// 10220C96: using guessed type __int16 word_10220C96;
// 10220C98: using guessed type int dword_10220C98;
// 10220C9C: using guessed type __int16 word_10220C9C;
// 10220C9E: using guessed type __int16 word_10220C9E;
// 10220CA0: using guessed type int dword_10220CA0;
// 10220CA4: using guessed type int dword_10220CA4;
// 10220CA8: using guessed type int dword_10220CA8;
// 10220CAC: using guessed type int dword_10220CAC;
// 10220CB0: using guessed type int dword_10220CB0;
// 10220CB4: using guessed type int dword_10220CB4;
// 10220CB8: using guessed type int dword_10220CB8;
// 10220CBC: using guessed type int dword_10220CBC;
// 10220CC0: using guessed type __int16 word_10220CC0;
// 10220CC2: using guessed type __int16 word_10220CC2;
// 10220CC4: using guessed type __int16 word_10220CC4;
// 10220CC6: using guessed type __int16 word_10220CC6;
// 10220CC8: using guessed type __int16 word_10220CC8;
// 10220CCA: using guessed type __int16 word_10220CCA;
// 10220CCC: using guessed type __int16 word_10220CCC;
// 10220CD0: using guessed type int dword_10220CD0;
// 10575484: using guessed type int (__stdcall *EAR_DLL_ChangeChannelControl)(_DWORD, _DWORD);
// 105754A0: using guessed type int (__stdcall *EAR_DLL_RegisterChannel)(_DWORD, _DWORD, _DWORD, _DWORD);
// 105754D0: using guessed type int (__stdcall *EAR_DLL_RegisterMatrix)(_DWORD);

//----- (10002440) --------------------------------------------------------
int pm_sub_10002440() {
  if (!gPlayMusic || !dword_10220CD0 || !dword_10220C3C)
      return 1;
  dword_10220C3C = 0;
  return EAR_DLL_ShutDownChannel(dword_100940A8);
}
// 100940A4: using guessed type int gPlayMusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10575470: using guessed type int (__stdcall *EAR_DLL_ShutDownChannel)(_DWORD);

//----- (10002480) --------------------------------------------------------
int getWPARAM() {
  return gWPARAM;
}
// 10220C58: using guessed type int gWPARAM;

//----- (10002510) --------------------------------------------------------
BOOL pm_sub_10002510() {
  BOOL result; // eax

  if (gPlayMusic && dword_10220CD0 && dword_10220C3C)
      result = pm_mciPlayOrClose((DWORD_PTR)gHwnd0, dword_10220CD4) == 0;
  else
      result = 1;
  return result;
}
// 100940A4: using guessed type int gPlayMusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;

//----- (10002550) --------------------------------------------------------
MCIERROR __cdecl pm_mciPlayOrClose(DWORD_PTR callback, unsigned __int8 positionToPlayFrom) {
  MCIERROR v2;              // esi
  MCI_PLAY_PARMS playParms; // [esp+8h] [ebp-Ch] BYREF

  playParms.dwFrom = positionToPlayFrom;
  playParms.dwTo = (unsigned __int8)playParmsPlayTo;
  playParms.dwCallback = callback;
  v2 = mciSendCommandA(mciId, 0x806u, 0xDu, (DWORD_PTR)&playParms); // MCI_PLAY,
  if (!v2)
      return 0;
  mciSendCommandA(mciId, 0x804u, 0, 0); // MCI_CLOSE, 0, NULL
  return v2;
}
// 10220C38: using guessed type int playParmsPlayTo;

//----- (100025C0) --------------------------------------------------------
int __cdecl pm_sub_100025C0(HWND hWnd) {
  int result; // eax

  if (gPlayMusic == 1) // 1 = uses MCI
      result = pm_sub_10002660(hWnd);
  else
      result = pm_sub_100025F0(hWnd); // EAR
  return result;
}
// 100940A4: using guessed type int gPlayMusic;

//----- (100025F0) --------------------------------------------------------
int __cdecl pm_sub_100025F0(HWND hWnd) {
  unsigned int v2; // eax

  if (!gPlayMusic)
      return 1;
  if (++dword_10220CD0 != 1)
      return 1;
  v2 = getTicks();
  srand(v2);
  dword_10220CD4 = 2;
  dword_10220C44 = 0;
  playParmsPlayTo = 0;
  pm_setupEAR(hWnd);
  dword_10220C3C = 0;
  dword_10220C48 = 0;
  return pm_sub_10002260();
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C38: using guessed type int playParmsPlayTo;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220C44: using guessed type int dword_10220C44;
// 10220C48: using guessed type int dword_10220C48;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;

//----- (10002660) --------------------------------------------------------
int __cdecl pm_sub_10002660(HWND a1) {
  unsigned int v1;         // eax
  MCIERROR v3;             // eax
  MCI_PLAY_PARMS v4;       // [esp+8h] [ebp-430h] BYREF
  MCI_PLAY_PARMS v5;       // [esp+18h] [ebp-420h] BYREF
  DWORD_PTR dwParam2;      // [esp+24h] [ebp-414h] BYREF
  MCIDEVICEID mciId;       // [esp+28h] [ebp-410h]
  char *v8;                // [esp+2Ch] [ebp-40Ch]
  CHAR OutputString[1024]; // [esp+38h] [ebp-400h] BYREF

  if (gPlayMusic) {
      if (++dword_10220CD0 == 1) {
          gHwnd0 = a1;
          v1 = getTicks();
          srand(v1);
          dword_10220CD4 = 2;
          dword_10220C44 = 0;
          playParmsPlayTo = 0;
          dword_10220CD8 = 0;
          dword_10220C3C = 0;
          v8 = aCdaudio;
          if (mciSendCommandA(0, 0x803u, 0x2000u, (DWORD_PTR)&dwParam2))
              return 0;
          ::mciId = mciId;
          v5.dwFrom = 10;
          if (mciSendCommandA(mciId, 0x80Du, 0x400u, (DWORD_PTR)&v5)) {
              mciSendCommandA(::mciId, 0x804u, 0, 0);
              return 0;
          }
          v4.dwTo = 3;
          v3 = mciSendCommandA(::mciId, 0x814u, 0x102u, (DWORD_PTR)&v4);
          if (v3) {
              wsprintfA(OutputString, "MCI_STATUS returned %d\n", v3);
              OutputDebugStringA(OutputString);
              mciSendCommandA(::mciId, 0x804u, 0, 0);
              return 0;
          }
          dword_10220C44 = 2;
          playParmsPlayTo = v4.dwFrom;
          dword_10220C3C = 1;
      }
  }
  return 1;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C38: using guessed type int playParmsPlayTo;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220C44: using guessed type int dword_10220C44;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;
// 10220CD8: using guessed type int dword_10220CD8;

//----- (100027C0) --------------------------------------------------------
int __cdecl pm_sub_100027C0(int a1) {
  int result; // eax

  if (gPlayMusic == 1)
      result = pm_sub_10002870(a1);
  else
      result = pm_sub_100027F0(a1);
  return result;
}
// 100940A4: using guessed type int gPlayMusic;

//----- (100027F0) --------------------------------------------------------
int __cdecl pm_sub_100027F0(int a1) {
  int v1; // esi

  if (gPlayMusic && dword_10220CD0) {
      v1 = a1;
      if (a1 < dword_10220C44)
          v1 = dword_10220C44;
      if (v1 > playParmsPlayTo)
          v1 = playParmsPlayTo;
      dword_10220CD4 = v1;
      if (dword_10220C3C) {
          EAR_DLL_ClearChannel(dword_100940A8, 0);
          dword_10220C6C = 256;
          dword_10220C54 = v1;
          word_10220C92 = 0;
          gWPARAM = EAR_DLL_MixEvent(&word_10220C50);
      }
  }
  return 1;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C38: using guessed type int playParmsPlayTo;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220C44: using guessed type int dword_10220C44;
// 10220C50: using guessed type __int16 word_10220C50;
// 10220C54: using guessed type int dword_10220C54;
// 10220C58: using guessed type int g_WPARAM;
// 10220C6C: using guessed type int dword_10220C6C;
// 10220C92: using guessed type __int16 word_10220C92;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;
// 1057546C: using guessed type int (__stdcall *EAR_DLL_MixEvent)(_DWORD);
// 10575480: using guessed type int (__stdcall *EAR_DLL_ClearChannel)(_DWORD, _DWORD);

//----- (10002870) --------------------------------------------------------
int __cdecl pm_sub_10002870(int a1) {
  if (gPlayMusic) {
      if (dword_10220CD0) {
          dword_10220CD8 = 1;
          dword_10220CD4 = a1;
          if (dword_10220C3C) {
              if (byte_10220CDC)
                  PostMessageA(gHwnd0, 0x3B9u, 1u, mciId);
          }
      }
  }
  return 1;
}
// 100940A4: using guessed type int gPlayMusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;
// 10220CD8: using guessed type int dword_10220CD8;
// 10220CDC: using guessed type char byte_10220CDC;

//----- (100028D0) --------------------------------------------------------
int pm_sub_100028D0() {
  int result; // eax

  do {
      result = (playParmsPlayTo - 5) * rand() / 0x8000 + 3;
      if (result < 3)
          result = 3;
      if (result > playParmsPlayTo)
          result = playParmsPlayTo;
  } while (playParmsPlayTo > 6 && result == dword_10220CD4);
  return result;
}
// 10220C38: using guessed type int playParmsPlayTo;
// 10220CD4: using guessed type int dword_10220CD4;

//----- (10002910) --------------------------------------------------------
DWORD pm_sub_10002910() {
  DWORD result;             // eax
  MCI_PLAY_PARMS playParms; // [esp+0h] [ebp-10h] BYREF

  if (gPlayMusic == 1) // play with MCI
  {
      if (gPlayMusic && dword_10220CD0 && dword_10220C3C) {
          playParms.dwTo = 8;
          mciSendCommandA(mciId, 0x814u, 0x100u, (DWORD_PTR)&playParms); // MCI_CLOSE
          result = playParms.dwFrom;
      } else {
          result = 0;
      }
  } else if (gPlayMusic && dword_10220CD0) // play with EAR
  {
      result = dword_10220C3C != 0 ? dword_10220CD4 : 0;
  } else {
      result = 0;
  }
  return result;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;

//----- (10002930) --------------------------------------------------------
int pm_sub_10002930() {
  int v0; // eax

  if (gPlayMusic && dword_10220CD0) {
      v0 = pm_sub_10002910() - 1;
      dword_10220CD4 = v0;
      if (v0 < dword_10220C44) {
          v0 = dword_10220C44;
          dword_10220CD4 = dword_10220C44;
      }
      pm_sub_100027C0(v0);
  }
  return 1;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C44: using guessed type int dword_10220C44;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;

//----- (10002970) --------------------------------------------------------
int pm_sub_10002970() {
  int v0; // eax

  if (gPlayMusic && dword_10220CD0) {
      v0 = pm_sub_10002910() + 1;
      dword_10220CD4 = v0;
      if (v0 > playParmsPlayTo) {
          v0 = playParmsPlayTo;
          dword_10220CD4 = playParmsPlayTo;
      }
      pm_sub_100027C0(v0);
  }
  return 1;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C38: using guessed type int playParmsPlayTo;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;

//----- (100029B0) --------------------------------------------------------
int pm_sub_100029B0() {
  int v0; // eax

  if (gPlayMusic && dword_10220CD0) {
      v0 = pm_sub_10002910() + 1;
      dword_10220CD4 = v0;
      if (v0 > playParmsPlayTo) {
          v0 = dword_10220C44;
          dword_10220CD4 = dword_10220C44;
      }
      pm_sub_100027C0(v0);
  }
  return 1;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C38: using guessed type int playParmsPlayTo;
// 10220C44: using guessed type int dword_10220C44;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;

//----- (100029F0) --------------------------------------------------------
int __cdecl pm_sub_100029F0(int a1) {
  int result; // eax

  if (gPlayMusic == 1)
      result = sub_10002A80(a1);
  else
      result = pm_sub_10002A20(a1);
  return result;
}
// 100940A4: using guessed type int g_Playmusic;

//----- (10002A20) --------------------------------------------------------
int __cdecl pm_sub_10002A20(unsigned __int8 a1) {
  if (gPlayMusic && dword_10220CD0 && dword_10220C3C)
      EAR_DLL_SetAttenuationLevel(dword_100940A8, 10000 * a1 / 255);
  return 1;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10575454: using guessed type int (__stdcall *EAR_DLL_SetAttenuationLevel)(_DWORD, _DWORD);

//----- (10002A80) --------------------------------------------------------
int __cdecl sub_10002A80(char a1) {
  if (!a1 || byte_10220CDC) {
      if (!a1 && byte_10220CDC) {
          if (dword_10220CD8)
              pm_sub_10002AE0();
      }
  } else if (dword_10220CD8) {
      byte_10220CDC = a1;
      pm_sub_10002B40();
      byte_10220CDC = a1;
      return 1;
  }
  byte_10220CDC = a1;
  return 1;
}
// 10220CD8: using guessed type int dword_10220CD8;
// 10220CDC: using guessed type char byte_10220CDC;

//----- (10002AE0) --------------------------------------------------------
int pm_sub_10002AE0() {
  if (!gPlayMusic)
      return 1;
  if (!dword_10220CD0)
      return 1;
  dword_10220CD8 = 1;
  if (!dword_10220C3C || !mciSendCommandA(mciId, 0x809u, 0, 0))
      return 1;
  mciSendCommandA(mciId, 0x804u, 0, 0);
  return 0;
}
// 100940A4: using guessed type int gPlayMusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD8: using guessed type int dword_10220CD8;

//----- (10002B40) --------------------------------------------------------
int pm_sub_10002B40() {
  int result; // eax

  if (gPlayMusic && dword_10220CD0 && dword_10220C3C)
      result = pm_sub_100027C0(dword_10220CD4);
  else
      result = 1;
  return result;
}
// 100940A4: using guessed type int gPlayMusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10220CD4: using guessed type int dword_10220CD4;

//----- (10002B70) --------------------------------------------------------
int pm_sub_10002B70() {
  if (gPlayMusic == 1)
      return pm_sub_10002AE0();
  if (gPlayMusic && dword_10220CD0 && dword_10220C3C)
      return EAR_DLL_ChangeChannelControl(dword_100940A8, 4) != 0;
  return 1;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10575484: using guessed type int (__stdcall *EAR_DLL_ChangeChannelControl)(_DWORD, _DWORD);

//----- (10002BD0) --------------------------------------------------------
int pm_sub_10002BD0() {
  if (gPlayMusic == 1)
      return pm_sub_10002B40();
  if (gPlayMusic && dword_10220CD0 && dword_10220C3C)
      return EAR_DLL_ChangeChannelControl(dword_100940A8, 12) != 0;
  return 1;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10575484: using guessed type int (__stdcall *EAR_DLL_ChangeChannelControl)(_DWORD, _DWORD);

//----- (10002C30) --------------------------------------------------------
BOOL pm_sub_10002C30() {
  BOOL result; // eax

  if (gPlayMusic == 1) {
      if (gPlayMusic && dword_10220CD0 && dword_10220C3C && mciSendCommandA(mciId, 0x808u, 0, 0)) {
          mciSendCommandA(mciId, 0x804u, 0, 0);
          result = 0;
      } else {
          result = 1;
      }
  } else if (gPlayMusic && dword_10220CD0 && dword_10220C3C) {
      result = EAR_DLL_ClearChannel(dword_100940A8, 0) == 0;
  } else {
      result = 1;
  }
  return result;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10575480: using guessed type int (__stdcall *EAR_DLL_ClearChannel)(_DWORD, _DWORD);

//----- (10002CF0) --------------------------------------------------------
int pm_sub_10002CF0() {
  int result; // eax
  BOOL v1;    // esi
  BOOL v2;    // esi

  if (gPlayMusic == 1) {
      if (gPlayMusic) {
          --dword_10220CD0;
          v2 = mciSendCommandA(mciId, 0x808u, 0, 0) == 0;
          if (dword_10220CD0)
              result = v2;
          else
              result = mciSendCommandA(mciId, 0x804u, 0, 0) == 0 && v2;
      } else {
          result = 1;
      }
  } else if (gPlayMusic) {
      --dword_10220CD0;
      if (dword_10220C3C)
          v1 = EAR_DLL_ClearChannel(dword_100940A8, 0) == 0;
      else
          v1 = 1;
      if (!dword_10220CD0)
          sub_1002AEA0();
      result = v1;
  } else {
      result = 1;
  }
  return result;
}
// 100940A4: using guessed type int g_Playmusic;
// 10220C3C: using guessed type int dword_10220C3C;
// 10220CD0: using guessed type int dword_10220CD0;
// 10575480: using guessed type int (__stdcall *EAR_DLL_ClearChannel)(_DWORD, _DWORD);

//----- (10002DE0) --------------------------------------------------------
int __cdecl sub_10002DE0(float a1, float a2) {
  unsigned __int16 v2; // si

  if (a1 < 0.0 || a1 >= 2048.0 || a2 < 0.0 || a2 >= 2048.0)
      return 0;
  v2 = (unsigned __int8)(__int64)(a1 * 0.03125) + ((unsigned __int8)(__int64)(a2 * 0.03125) << 6);
  return *(unsigned __int16 *)(gUnk06594.field_48EC + 2 * v2) |
         ((0xFFFF * *(unsigned __int16 *)(gUnk06594.field_48EC + 2 * v2) +
           *(unsigned __int16 *)(gUnk06594.field_48EC + 2 * (unsigned __int16)(v2 + 1)))
          << 16);
}

//----- (10002E90) --------------------------------------------------------
int __cdecl sub_10002E90(int a1, int a2) {
  int v2; // esi

  if (a1 < 0 || a1 >= 64 || a2 < 0 || a2 >= 64)
      return 0;
  v2 = (unsigned __int16)((unsigned __int8)a1 + ((unsigned __int8)a2 << 6));
  return *(unsigned __int16 *)(gUnk06594.field_4934 + 2 * v2) |
         ((0xFFFF * *(unsigned __int16 *)(gUnk06594.field_4934 + 2 * v2) +
           *(unsigned __int16 *)(gUnk06594.field_4934 + 2 * (unsigned __int16)(v2 + 1)))
          << 16);
}

//----- (10002EF0) --------------------------------------------------------
__int16 __cdecl sub_10002EF0(unsigned __int16 *a1) {
  int v1; // ecx

  if (!a1[1])
      return 0;
  v1 = *a1;
  *(_DWORD *)a1 = (v1 + 1) | ((a1[1] + 0xFFFF) << 16);
  return *(_WORD *)(gUnk06594.field_48E8 + 2 * v1);
}

//----- (10002F40) --------------------------------------------------------
__int16 __cdecl sub_10002F40(unsigned __int16 *a1) {
  int v1; // ecx

  if (!a1[1])
      return 0;
  v1 = *a1;
  *(_DWORD *)a1 = (v1 + 1) | ((a1[1] + 0xFFFF) << 16);
  return *(_WORD *)(gUnk06594.field_4930 + 2 * v1);
}

//----- (10002F90) --------------------------------------------------------
DWORD __stdcall CHK_GetFileSize(CHK_File *cFile, void *_unused) {
  int originalPos; // edi
  int size;        // ebx

  originalPos = ftell(cFile->pfil);
  fseek(cFile->pfil, 0, SEEK_END);
  size = ftell(cFile->pfil);
  fseek(cFile->pfil, originalPos, SEEK_SET);
  return size;
}

//----- (10002FE0) --------------------------------------------------------
CHK_File *__cdecl CHK_FReadOpen(const char *filename) {
  CHK_File *cFile;         // ebx
  char *filenameBuf;       // edx
  FILE *ret;               // eax
  FILE *logHandle;         // esi
  CHAR debugMessage[1024]; // [esp+Ch] [ebp-400h] BYREF

  cFile = (CHK_File *)CHK_AllocateMemory(8u, aChkFreadopenPf);
  filenameBuf = (char *)CHK_AllocateMemory(strlen(filename) + 1, aChkFreadopenSz);
  cFile->szName = filenameBuf;
  strcpy(filenameBuf, filename);
  if (debugOutput) {
      sprintf(debugMessage, "CHK_FReadOpen(%s)\n", cFile->szName);
      OutputDebugStringA(debugMessage);
  }
  ret = fopen(cFile->szName, kFileModeReadBinary);
  cFile->pfil = ret;
  if (!ret) {
      logHandle = fopen(kFilepathErrorLog, kFileModeWrite);
      sprintf(debugMessage, "CHK_FReadOpen(): error opening file %s.\n", cFile->szName);
      fprintf(logHandle, debugMessage);
      OutputDebugStringA(debugMessage);
      fclose(logHandle);
      exit(1);
  }
  return cFile;
}
// 10220CE0: using guessed type int debugOutput;

//----- (100030E0) --------------------------------------------------------
size_t __cdecl CHK_FRead0(void *buffer, size_t elementSize, size_t elementCount, CHK_File *fp) {
  size_t result;           // eax
  CHAR debugMessage[1024]; // [esp+Ch] [ebp-400h] BYREF

  if (elementSize * elementCount) {
      result = filesystem_freadLock(buffer, elementSize, elementCount, fp->pfil);
      if (!result)
          return result;
      if (result != elementCount) {
          sprintf(debugMessage,
                  "FCHK_FRead(): trying to read %d bytes, but got only %d bytes.\n",
                  elementSize * elementCount,
                  elementSize * result);
          OutputDebugStringA(debugMessage);
          exit(1);
      }
  }
  return 1;
}

//----- (10003170) --------------------------------------------------------
void *__cdecl CHK_FReadReportError(void *buffer,
                                   size_t elementSize,
                                   size_t elementCount,
                                   CHK_File *fp) {
  CHAR debugMessage[1024]; // [esp+Ch] [ebp-400h] BYREF

  if (!CHK_FRead0(buffer, elementSize, elementCount, fp)) {
      sprintf(debugMessage,
              "CHK_FRead(): trying to read %u bytes, but got EOF.\n",
              elementSize * elementCount);
      OutputDebugStringA(debugMessage);
      exit(1);
  }
  return buffer;
}

//----- (100031E0) --------------------------------------------------------
char *__cdecl CHK_ReadLine(char *outBuff, int maxBytes, FILE **pfp) {
  int readBytes_1; // edi
  char *bufptr;    // esi
  int c;           // eax
  char *bufptr_1;  // esi
  char *bufptr_2;  // esi
  int c_1;         // eax
  char *bufptr_3;  // esi

  readBytes_1 = 0;
  if (maxBytes <= 0)
      return outBuff;
  bufptr = outBuff;
  while (1) {
      c = getc(*pfp);
      if (c == -1) {
          if (!readBytes_1)
              return 0;
          *bufptr = 0;
          return bufptr + 1;
      }
      if (c == 13)
          break;
      if (c == 10) {
          *bufptr = 10;
          bufptr_3 = bufptr + 1;
          *bufptr_3 = 0;
          return bufptr_3 + 1;
      }
      *bufptr++ = c;
      if (++readBytes_1 >= maxBytes)
          return bufptr;
  }
  *bufptr = 10;
  bufptr_1 = bufptr + 1;
  *bufptr_1 = 0;
  bufptr_2 = bufptr_1 + 1;
  c_1 = getc(*pfp);
  if (c_1 != 0xFFFFFFFF && c_1 != 0xA) {
      ungetc(c_1, *pfp);
      return bufptr_2;
  }
  return bufptr_2;
}

//----- (10003290) --------------------------------------------------------
void __cdecl CHK_FClose(CHK_File *cFile) {
  CHAR debugMessage[1024]; // [esp+8h] [ebp-400h] BYREF

  if (debugOutput) {
      sprintf(debugMessage, "CHK_FClose(%s)\n", cFile->szName);
      OutputDebugStringA(debugMessage);
  }
  if (fclose(cFile->pfil) == -1) {
      sprintf(debugMessage, "CHK_FClose(): error closing file %s.\n", cFile->szName);
      OutputDebugStringA(debugMessage);
      exit(1);
  }
  free((void *)cFile->szName);
  free(cFile);
}
// 10220CE0: using guessed type int debugOutput;

//----- (10003320) --------------------------------------------------------
BOOL __cdecl CHK_FileExists(char *filename) {
  BOOL fp;                 // eax
  CHAR debugMessage[1024]; // [esp+4h] [ebp-400h] BYREF

  if (debugOutput) {
      sprintf(debugMessage, "CHK_FileExists(%s)\n", filename);
      OutputDebugStringA(debugMessage);
  }
  fp = (BOOL)fopen(filename, kFileModeReadBinary);
  if (fp) {
      fclose((FILE *)fp);
      fp = 1;
  }
  return fp;
}
// 10220CE0: using guessed type int debugOutput;

//----- (10003390) --------------------------------------------------------
void *__cdecl CHK_AllocateMemory(size_t size, const char *debugName) {
  void *ptr;               // eax
  CHAR debugMessage[1024]; // [esp+0h] [ebp-400h] BYREF

  ptr = (void *)size;
  if (size) {
      ptr = malloc(size);
      if (!ptr) {
          sprintf(debugMessage,
                  "CHK_AllocateMemory(): Out of memory: couldn't allocate %s\n",
                  debugName);
          OutputDebugStringA(debugMessage);
          exit(1);
      }
  }
  return ptr;
}

//----- (100033F0) --------------------------------------------------------
void *__cdecl CHK_ReAllocateMemory0(void *ptr, size_t size, char *debugName) {
  void *result;            // eax
  CHAR debugMessage[1024]; // [esp+8h] [ebp-400h] BYREF

  result = realloc(ptr, size);
  if (!size)
      return 0;
  if (!result) {
      sprintf(debugMessage,
              "CHK_ReAllocateMemory(): Out of memory: couldn't reallocate %s\n",
              debugName);
      OutputDebugStringA(debugMessage);
      exit(1);
  }
  return result;
}

//----- (10003460) --------------------------------------------------------
unsigned int sub_10003460() {
  int v0; // eax

  v0 = sub_100750F0();
  return (v0 - dword_10220DD8) % 0x64u / 0x21 + 3 * ((v0 - dword_10220DD8) / 0x64u);
}
// 10220DD8: using guessed type int dword_10220DD8;

//----- (100034A0) --------------------------------------------------------
int __cdecl sub_100034A0(int a1, int a2, int a3, unsigned int a4) {
  int *v4;         // edi
  unsigned int v5; // esi
  int v6;          // eax
  int v7;          // eax
  int result;      // eax

  if (a4 <= dword_1022AF3C && a4) {
      v4 = dword_1022AAB0;
      do {
          if (*v4 == a3) {
              v5 = *v4 + a2 + (a4 >> 1) - v4[1];
              sub_10075100();
              v6 = sub_100750F0();
              dword_1022AF3C = a4;
              dword_10220DD8 = v6 - v5;
          }
          v4 += 2;
      } while ((int)v4 < (int)&unk_1022AAF0);
  }
  v7 = dword_1022AF38;
  dword_1022AAB0[2 * dword_1022AF38] = a1;
  dword_1022AAB4[2 * v7] = a2;
  result = v7 + 1;
  dword_1022AF38 = result;
  if (result >= 8)
      dword_1022AF38 = 0;
  return result;
}
// 10220DD8: using guessed type int dword_10220DD8;
// 1022AAB0: using guessed type int dword_1022AAB0[];
// 1022AF38: using guessed type int dword_1022AF38;
// 1022AF3C: using guessed type int dword_1022AF3C;

//----- (10003530) --------------------------------------------------------
BOOL __cdecl np_sub_10003530(const char *a1) {
  HANDLE mutex; // [esp-4h] [ebp-Ch]

  WaitForSingleObject(gMutex9, INFINITE);
  mutex = gMutex9;
  strcpy(&byte_10220E80, a1);
  dword_1022AF08 = 1;
  return ReleaseMutex(mutex);
}
// 10220E80: using guessed type char byte_10220E80;
// 1022AF08: using guessed type int dword_1022AF08;

//----- (10003580) --------------------------------------------------------
void __cdecl np_sub_10003580(int a1, int a2, int a3, int a4) {
  int v4;                                                   // esi
  char v5;                                                  // bl
  int v6;                                                   // eax
  int v7;                                                   // ebx
  int v8;                                                   // esi
  unsigned int v9;                                          // edi
  DWORD(__stdcall * waitForSingleObjectRef)(HANDLE, DWORD); // esi
  int v11;                                                  // ebp
  float *v12;                                               // esi
  int *v13;                                                 // edx
  unsigned int v14;                                         // eax
  int *v15;                                                 // edi
  unsigned __int8 v16;                                      // al
  int v17;                                                  // esi
  int v18;                                                  // eax
  unsigned int v19;                                         // ebx
  int v20;                                                  // ecx
  int *v21;                                                 // edi
  int v22;                                                  // ecx
  int v23;                                                  // esi
  int v24;                                                  // eax
  unsigned int v25;                                         // edi
  int *v26;                                                 // edx
  int v27;                                                  // edx
  unsigned int v28;                                         // ebx
  int v29;                                                  // eax
  int *v30;                                                 // ecx
  int v31;                                                  // ecx
  int v32;                                                  // eax
  int *v33;                                                 // edi
  int v34;                                                  // edi
  int v35;                                                  // ecx
  int v36;                                                  // ebp
  float *v37;                                               // edi
  int v38;                                                  // esi
  unsigned int v39;                                         // ebp
  unsigned __int16 v40;                                     // dx
  int v41;                                                  // ecx
  int v42;                                                  // ebx
  int *v43;                                                 // edi
  int v44;                                                  // esi
  const char *v45;                                          // esi
  unsigned int v46;                                         // ebx
  char *v47;                                                // edi
  int *v48;                                                 // esi
  int *v49;                                                 // esi
  int v50;                                                  // ebx
  int *v51;                                                 // edi
  int v52;                                                  // esi
  int v53;                                                  // edi
  int *v54;                                                 // ebx
  int v55;                                                  // esi
  int v56;                                                  // ebx
  int *v57;                                                 // edi
  int v58;                                                  // esi
  int *v59;                                                 // ebp
  int v60;                                                  // ebx
  int *v61;                                                 // esi
  int v62;                                                  // edi
  int v63;                                                  // eax
  const char *v64;                                          // eax
  HANDLE v65;                                               // [esp-4h] [ebp-7B4h]
  const char *v66;                                          // [esp-4h] [ebp-7B4h]
  int v67;                                                  // [esp+10h] [ebp-7A0h]
  int v68;                                                  // [esp+14h] [ebp-79Ch]
  int v69;                                                  // [esp+18h] [ebp-798h]
  unsigned int v70;                                         // [esp+18h] [ebp-798h]
  int v71;                                                  // [esp+1Ch] [ebp-794h]
  int v72;                                                  // [esp+1Ch] [ebp-794h]
  int v73;                                                  // [esp+20h] [ebp-790h]
  char v74;                                                 // [esp+24h] [ebp-78Ch]
  int v75;                                                  // [esp+28h] [ebp-788h]
  char v76;                                                 // [esp+2Ch] [ebp-784h]
  float v77;                                                // [esp+30h] [ebp-780h]
  char v78;                                                 // [esp+34h] [ebp-77Ch]
  int v79;                                                  // [esp+38h] [ebp-778h]
  int v80[133];                                             // [esp+50h] [ebp-760h] BYREF
  char Buffer[1024];                                        // [esp+264h] [ebp-54Ch] BYREF
  float v82[40];                                            // [esp+664h] [ebp-14Ch] BYREF
  char v83[160];                                            // [esp+704h] [ebp-ACh] BYREF
  int v84;                                                  // [esp+7ACh] [ebp-4h]

  meth_10073B60(v80, a2, a3);
  v84 = 0;
  WaitForSingleObject(gMutex7, 0xFFFFFFFF);
  v4 = dword_10220DD0;
  ReleaseMutex(gMutex7);
  if (v4) {
      Concurrency::details::StructuredWorkStealingQueue<
          Concurrency::details::_UnrealizedChore,
          Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(v80);
      v67 = meth_10073C10(v80);
      WaitForSingleObject(gMutex4, 0xFFFFFFFF);
      dword_10221310 = sub_10003460();
      ReleaseMutex(gMutex4);
      if (!meth_10073D40(v80)) {
          while (2) {
              v5 = meth_10073BC0(v80);
              v6 = v5 & 0xE0;
              v7 = v5 & 0xF;
              switch (v6) {
              case 0:
                  if (a4 != 1)
                      goto LABEL_122;
                  v68 = (unsigned __int8)meth_10073BC0(v80);
                  v69 = (unsigned __int8)meth_10073BC0(v80);
                  v74 = meth_10073BC0(v80);
                  v76 = meth_10073BC0(v80);
                  v78 = meth_10073BC0(v80);
                  v8 = 0;
                  v9 = v68 & 0x3F;
                  v71 = meth_10073C40(v80);
                  v79 = 0;
                  if (v9 <= 2) {
                      do
                          Buffer[v8++] = meth_10073BC0(v80);
                      while (v8 < 24);
                      v79 = v8;
                      Buffer[24] = 0;
                  }
                  if (v9 == 4)
                      dword_1022AEFC = meth_10073C10(v80);
                  waitForSingleObjectRef = WaitForSingleObject;
                  v11 = 606 * v7;
                  WaitForSingleObject(gMutexes[606 * v7], INFINITE);
                  if (v7 == dword_10094294)
                      goto LABEL_17;
                  if (unk_10221354[606 * v7] != v68 && v9 == 2) {
                      WaitForSingleObject(gMutex1, INFINITE);
                      dword_10220D90[++dword_10220DD4] = v7;
                      ReleaseMutex(gMutex1);
                      unk_10221330[606 * v7] = 0;
                      v12 = &unk_10221380[v11];
                      memset(&unk_10221334[v11], 0, 0x20u);
                      unk_10221354[606 * v7] = 0;
                      v13 = &dword_10221360[v11];
                      v75 = 8;
                      do {
                          *v13 = 0;
                          memset(v12, 0, 0xA0u);
                          ++v13;
                          v12 += 40;
                          --v75;
                      } while (v75);
                      v9 = v68 & 0x3F;
                      waitForSingleObjectRef = WaitForSingleObject;
                      dword_10221880[606 * v7] = 0;
                      dword_10221884[606 * v7] = 0;
                      dword_10221888[606 * v7] = -1;
                      dword_10221890[606 * v7] = 0;
                      dword_10221894[606 * v7] = 0;
                      dword_1022188C[606 * v7] = 0;
                      dword_10221C9C[606 * v7] = 0;
                  }
                  if (v7 == dword_10094294) {
                  LABEL_17:
                      if (v9 == 3) {
                          waitForSingleObjectRef(gMutex3, INFINITE);
                          gMutexesEnd = 0;
                          ReleaseMutex(gMutex3);
                      }
                      if (v7 == dword_10094294) {
                          if ((v68 & 0x80u) != 0) {
                              waitForSingleObjectRef(gMutex5, INFINITE);
                              dword_1022AAF4 = 0;
                              ReleaseMutex(gMutex5);
                              dword_1022AF20 = 1;
                          }
                          if ((v68 & 0x40) != 0) {
                              if (dword_1022AF20)
                                  dword_1022AF20 = 0;
                              if (dword_106909B4)
                                  dword_106909D8 = 1;
                              waitForSingleObjectRef(gMutex6, INFINITE);
                              dword_10221314 = 0;
                              ReleaseMutex(gMutex6);
                          }
                          if (v7 == dword_10094294 && v9 == 4) {
                              WaitForSingleObject(gMutex8, INFINITE);
                              v14 = sub_10003460() + 90;
                              dword_1022AF00 =
                                  3 * (dword_1022AEFC / 0x64u) + dword_1022AEFC % 0x64u / 0x21;
                              if (dword_1022AF00 > v14)
                                  dword_1022AF00 = v14;
                              ReleaseMutex(gMutex8);
                          }
                      }
                  }
                  unk_10221330[606 * v7] = v67;
                  unk_10221354[606 * v7] = v68;
                  unk_10221358[606 * v7] = v69;
                  unk_1022135C[2424 * v7] = v74;
                  unk_1022135D[2424 * v7] = v76;
                  unk_1022135E[2424 * v7] = v78;
                  unk_1022132C[606 * v7] = v71;
                  if (v79)
                      strcpy(&byte_10221898[v11 * 4], Buffer);
                  sub_10004760((_DWORD *)a1, v7, v69, v74, v76, v78, v71, (int)Buffer, v68, 16);
                  ReleaseMutex(gMutexes[606 * v7]);
                  goto LABEL_73;
              case 32:
                  if (a4 != 1)
                      goto LABEL_122;
                  WaitForSingleObject(gMutex0, INFINITE);
                  v15 = dword_102212D0;
                  do {
                      v16 = meth_10073BC0(v80);
                      v15 += 2;
                      *(v15 - 1) = v16 >> 4;
                      *(v15 - 2) = v16 & 0xF;
                  } while ((int)v15 < (int)&dword_10221310);
                  ReleaseMutex(gMutex0);
                  goto LABEL_73;
              case 64:
                  v17 = 606 * v7;
                  WaitForSingleObject(gMutexes[606 * v7], INFINITE);
                  if ((unk_10221354[606 * v7] & 0x3Fu) < 2) {
                      math_10006EC0((int)v83, v80);
                      ReleaseMutex(gMutexes[606 * v7]);
                  } else {
                      v18 = 0;
                      v19 = -1;
                      v20 = 0;
                      v21 = &unk_10221334[v17];
                      do {
                          if (*v21 <= v19) {
                              v18 = v20;
                              v19 = *v21;
                          }
                          ++v20;
                          ++v21;
                      } while (v20 < 8);
                      v22 = dword_10221880[v17] + 1;
                      dword_10221884[v17] = v18;
                      dword_10221880[v17] = v22;
                      unk_10221334[v18 + v17] = v67;
                      dword_10221360[dword_10221884[v17] + v17] = 64;
                      math_10006EC0((int)&unk_10221380[40 * dword_10221884[v17] + v17], v80);
                      dword_10221C9C[v17] = 33 * (2 * (dword_10221310 - v67) % 3) +
                                            100 * (2 * (dword_10221310 - v67) / 3);
                      ReleaseMutex(gMutexes[v17]);
                  }
                  goto LABEL_73;
              case 96:
                  LOBYTE(v40) = BYTE2(v67);
                  v41 = (unsigned __int8)v67;
                  HIBYTE(v40) = BYTE1(v67);
                  BYTE1(v41) = 96;
                  switch (v40 | (v41 << 16)) {
                  case 0x60000000:
                  case 0x60000001:
                      v42 = 0;
                      Buffer[0] = 0;
                      if (dword_100B36FC <= 0)
                          goto LABEL_82;
                      v43 = dword_10ACDFEC;
                      while (1) {
                          v44 = *v43;
                          if (a4 == atomic_sub_10005CF0(*v43))
                              break;
                          ++v42;
                          v43 += 2778;
                          if (v42 >= dword_100B36FC)
                              goto LABEL_82;
                      }
                      strcpy(Buffer, atomic_sub_10005E70(v44));
                      strcat(Buffer, asc_10094334);
                  LABEL_82:
                      v45 = (const char *)(meth_unk00214_GetField10((unk00214 *)v80) + 1);
                      v46 = strlen(v45) + 1;
                      v47 = &Buffer[strlen(Buffer) + 1];
                      goto LABEL_111;
                  case 0x60000004:
                      v49 = meth_unk00214_GetField10((unk00214 *)v80);
                      if (v49[1] != atomic_sub_10005CF0(dword_10094294))
                          goto LABEL_122;
                      sub_1000C4A0();
                      v50 = 0;
                      dword_10AA2894 = 1;
                      if (dword_100B36FC <= 0)
                          goto LABEL_122;
                      v51 = dword_10ACDFEC;
                      while (1) {
                          v52 = *v51;
                          if (a4 == atomic_sub_10005CF0(*v51))
                              break;
                          ++v50;
                          v51 += 2778;
                          if (v50 >= dword_100B36FC)
                              goto LABEL_122;
                      }
                      strcpy(Buffer, atomic_sub_10005E70(v52));
                      v45 = aBootedYouFromT;
                      v46 = strlen(aBootedYouFromT) + 1;
                      v47 = &Buffer[strlen(Buffer) + 1];
                      goto LABEL_111;
                  case 0x60000005:
                      v48 = meth_unk00214_GetField10((unk00214 *)v80);
                      WaitForSingleObject(gMutex9, INFINITE);
                      switch (v48[1]) {
                      case 4:
                          dword_1022AEF8 = 20;
                          ReleaseMutex(gMutex9);
                          break;
                      case 5:
                          dword_1022AEF8 = 21;
                          ReleaseMutex(gMutex9);
                          break;
                      case 6:
                          dword_1022AEF8 = 22;
                          ReleaseMutex(gMutex9);
                          break;
                      case 7:
                          dword_1022AEF8 = 23;
                          goto LABEL_88;
                      default:
                      LABEL_88:
                          ReleaseMutex(gMutex9);
                          break;
                      }
                      goto LABEL_122;
                  case 0x60000006:
                      if (meth_unk00214_GetField10((unk00214 *)v80)[1] != a4)
                          goto LABEL_122;
                      v53 = 0;
                      if (dword_100B36FC <= 0)
                          goto LABEL_122;
                      v54 = dword_10ACDFEC;
                      while (1) {
                          v55 = *v54;
                          if (a4 == atomic_sub_10005CF0(*v54))
                              break;
                          ++v53;
                          v54 += 2778;
                          if (v53 >= dword_100B36FC)
                              goto LABEL_122;
                      }
                      if ((atomic_sub_10004A10(v55) & 0x3F) == 0)
                          goto LABEL_122;
                      WaitForSingleObject(gMutex2, INFINITE);
                      v65 = gMutex2;
                      dword_10221288[++dword_10221318] = v55;
                      ReleaseMutex(v65);
                      atomic_sub_10004A50(v53, 0);
                      strcpy(Buffer, atomic_sub_10005E70(v55));
                      v45 = aLeftTheRace;
                      v46 = strlen(aLeftTheRace) + 1;
                      v47 = &Buffer[strlen(Buffer) + 1];
                      goto LABEL_111;
                  case 0x60000007:
                      if (meth_unk00214_GetField10((unk00214 *)v80)[1] != a4)
                          goto LABEL_122;
                      v56 = 0;
                      if (dword_100B36FC <= 0)
                          goto LABEL_122;
                      v57 = dword_10ACDFEC;
                      while (1) {
                          v58 = *v57;
                          if (a4 == atomic_sub_10005CF0(*v57))
                              break;
                          ++v56;
                          v57 += 2778;
                          if (v56 >= dword_100B36FC)
                              goto LABEL_122;
                      }
                      strcpy(Buffer, atomic_sub_10005E70(v58));
                      v45 = aReturnedToRace;
                      v46 = strlen(aReturnedToRace) + 1;
                      v47 = &Buffer[strlen(Buffer) + 1];
                  LABEL_111:
                      qmemcpy(v47 - 1, v45, v46);
                      np_sub_10003530(Buffer);
                      goto LABEL_122;
                  case 0x60000008:
                      v59 = meth_unk00214_GetField10((unk00214 *)v80);
                      if (a4 != 1)
                          goto LABEL_122;
                      v60 = 0;
                      if (dword_100B36FC <= 0)
                          goto LABEL_122;
                      v61 = dword_10ACDFEC;
                      break;
                  default:
                      goto LABEL_122;
                  }
                  break;
              case 128:
                  v23 = 606 * v7;
                  WaitForSingleObject(gMutexes[606 * v7], INFINITE);
                  if ((unk_10221354[606 * v7] & 0x3Fu) < 2) {
                      math_100073E0(v82, v82, v80);
                      ReleaseMutex(gMutexes[606 * v7]);
                  } else {
                      v24 = 0;
                      v72 = 0;
                      v25 = -1;
                      v26 = &unk_10221334[v23];
                      do {
                          if (*v26 <= v25) {
                              v72 = v24;
                              v25 = *v26;
                          }
                          ++v24;
                          ++v26;
                      } while (v24 < 8);
                      v27 = 0;
                      v28 = 0;
                      v29 = 0;
                      v30 = &unk_10221334[v23];
                      do {
                          if (v30[11] == 64 && *v30 > v28) {
                              v27 = v29;
                              v28 = *v30;
                          }
                          ++v29;
                          ++v30;
                      } while (v29 < 8);
                      v31 = 0;
                      v32 = 0;
                      v70 = 0;
                      v33 = &unk_10221334[v23];
                      do {
                          if (v33[11] == 64 && *v33 > v70 && v31 != v27) {
                              v32 = v31;
                              v70 = *v33;
                          }
                          ++v31;
                          ++v33;
                      } while (v31 < 8);
                      v34 = unk_10221334[v32 + v23];
                      v35 = unk_10221334[v27 + v23] - v34;
                      if (v35)
                          v77 = (double)(unsigned int)(v67 - v34) / (double)v35;
                      else
                          v77 = 1.0;
                      v36 = dword_10221880[v23] + 1;
                      dword_10221884[v23] = v72;
                      dword_10221880[v23] = v36;
                      unk_10221334[v72 + v23] = v67;
                      dword_10221360[dword_10221884[v23] + v23] = 128;
                      v37 = &unk_10221380[40 * v27 + v23];
                      math_100079E0((int)&unk_10221380[40 * dword_10221884[v23] + v23],
                                    v77,
                                    (int)&unk_10221380[40 * v32 + v23],
                                    (int)v37);
                      math_100073E0(&unk_10221380[40 * dword_10221884[v23] + v23], v37, v80);
                      dword_10221C9C[v23] = 33 * (2 * (dword_10221310 - v67) % 3) +
                                            100 * (2 * (dword_10221310 - v67) / 3);
                      ReleaseMutex(gMutexes[v23]);
                  }
                  goto LABEL_73;
              case 192:
                  if (a4 != 1)
                      goto LABEL_122;
                  v73 = getTicks();
                  v38 = meth_10073C10(v80);
                  v39 = (unsigned __int16)meth_10073BE0(v80);
                  WaitForSingleObject(gMutexes[0x25E * v7], INFINITE);
                  dword_10221C98[0x25E * v7] = v38;
                  dword_10221C9C[0x25E * v7] = v39;
                  ReleaseMutex(gMutexes[0x25E * v7]);
                  if (v7 == dword_10094294) {
                      sub_10004910((_DWORD *)a1, v67);
                      sub_100034A0(v67, v73, v38, v39);
                  }
                  goto LABEL_73;
              case 224:
                  if (a4 != 1)
                      goto LABEL_122;
                  dword_10094294 = v7;
                  sub_100049C0();
                  LOBYTE(gCPlayers) = meth_10073BC0(v80);
                  gCPlayers = (unsigned __int8)gCPlayers;
                  LOBYTE(gChosenTrack) = meth_10073BC0(v80);
                  gChosenTrack = (unsigned __int8)gChosenTrack;
                  LOBYTE(gChosenWeather0) = meth_10073BC0(v80);
                  gChosenWeather0 = (unsigned __int8)gChosenWeather0;
                  LOWORD(gBcar) = meth_10073BE0(v80);
                  gBcar = (unsigned __int16)gBcar;
                  LOBYTE(dword_10221280) = meth_10073BC0(v80);
                  dword_10221280 = (unsigned __int8)dword_10221280;
                  LOBYTE(gBtire) = meth_10073BC0(v80);
                  gBtire = (unsigned __int8)gBtire;
                  LOBYTE(gBsuspension) = meth_10073BC0(v80);
                  gBsuspension = (unsigned __int8)gBsuspension;
                  sub_10004590(a1,
                               v7,
                               byte_10AD0854[0],
                               byte_10AD0855[0],
                               byte_10AD0856[0],
                               (int)dplay4aShortName,
                               16);
                  atomic_sub_10004A50(v7, 2);
              LABEL_73:
                  if (meth_10073D40(v80))
                      goto LABEL_122;
                  continue;
              default:
                  fprintf(&Stream,
                          "Error: unknown command %02X received from server (player %d).\n",
                          v6,
                          v7);
                  goto LABEL_122;
              }
              break;
          }
          while (1) {
              v62 = *v61;
              if (v59[1] == atomic_sub_10005CF0(*v61))
                  break;
              ++v60;
              v61 += 2778;
              if (v60 >= dword_100B36FC)
                  goto LABEL_122;
          }
          v63 = v59[2];
          if (v63 >= 0 && v63 < 8) {
              v66 = gPositionStrings[v63];
              v64 = atomic_sub_10005E70(v62);
              sprintf(Buffer, "%s finished %s", v64, v66);
              np_sub_10003530(Buffer);
          }
      }
  }
LABEL_122:
  v84 = -1;
  meth_DebugPrint(v80);
}
// 10073B90: using guessed type int __thiscall Concurrency::details::StructuredWorkStealingQueue<Concurrency::details::_UnrealizedChore,Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(_DWORD);
// 10094294: using guessed type int dword_10094294;
// 100AAC48: using guessed type char *gPositionStrings[20];
// 100B36FC: using guessed type int dword_100B36FC;
// 100B380C: using guessed type int gChosenTrack;
// 10220DD0: using guessed type int dword_10220DD0;
// 10220DD4: using guessed type int dword_10220DD4;
// 10221280: using guessed type int dword_10221280;
// 102212C8: using guessed type int gCPlayers;
// 10221310: using guessed type int dword_10221310;
// 10221314: using guessed type int dword_10221314;
// 10221318: using guessed type int dword_10221318;
// 10221320: using guessed type int gBcar;
// 10221880: using guessed type int dword_10221880[];
// 10221884: using guessed type int dword_10221884[];
// 10221888: using guessed type int dword_10221888[];
// 1022188C: using guessed type int dword_1022188C[];
// 10221890: using guessed type int dword_10221890[];
// 10221894: using guessed type int dword_10221894[];
// 10221C98: using guessed type int dword_10221C98[];
// 1022AAF4: using guessed type int dword_1022AAF4;
// 1022AEF8: using guessed type int dword_1022AEF8;
// 1022AF00: using guessed type int dword_1022AF00;
// 1022AF0C: using guessed type int gBsuspension;
// 1022AF10: using guessed type int gBtire;
// 1022AF20: using guessed type int dword_1022AF20;
// 1022B350: using guessed type int gChosenWeather0;
// 106909B4: using guessed type int dword_106909B4;
// 106909D8: using guessed type int dword_106909D8;
// 10AA2894: using guessed type int dword_10AA2894;
// 10ACDFEC: using guessed type int dword_10ACDFEC[];

//----- (10004590) --------------------------------------------------------
int __cdecl sub_10004590(int a1, char a2, char a3, char a4, char a5, int a6, char a7) {
  int v7;       // ebx
  int i;        // esi
  int v9;       // esi
  unk00214 v11; // [esp+Ch] [ebp-220h] BYREF
  int v12;      // [esp+228h] [ebp-4h]

  meth_unk00214_10073B40_init(&v11);
  v12 = 0;
  meth_unk00214_10073B80(&v11);
  meth_unk00214_10073DC0(&v11, 0);
  meth_unk00214_10073D60(&v11, a7 | dword_10094294 & 0xF | 0xE0);
  meth_unk00214_10073D60(&v11, a2);
  meth_unk00214_10073D60(&v11, gChosenCar);
  meth_unk00214_10073D60(&v11, a3);
  meth_unk00214_10073D60(&v11, a4);
  meth_unk00214_10073D60(&v11, a5);
  v7 = 0;
  for (i = 0; i < 24; ++i) {
      if (v7) {
          meth_unk00214_10073D60(&v11, 0);
      } else {
          meth_unk00214_10073D60(&v11, *(_BYTE *)(i + a6));
          if (!*(_BYTE *)(i + a6))
              v7 = 1;
      }
  }
  v9 = sub_100046D0((_DWORD *)a1, &v11);
  v12 = -1;
  meth_DebugPrint(&v11);
  return v9;
}
// 10094294: using guessed type int dword_10094294;
// 1022B34C: using guessed type int gChosenCar;

//----- (100046D0) --------------------------------------------------------
int __cdecl sub_100046D0(_DWORD *a1, unk00214 *u214) {
  int result; // eax
  int *v3;    // eax
  int *v4;    // eax
  int v5;     // [esp-Ch] [ebp-14h]
  int v6;     // [esp-4h] [ebp-Ch]

  if (dword_10AA2894)
      return meth_unk00214_10073F40(u214);
  if (a1[3]) {
      v5 = meth_unk00214_10073F40(u214);
      v3 = meth_unk00214_GetField10(u214);
      sub_100360F0((int)a1, (int)v3, v5, (void *)1);
      result = meth_unk00214_10073F40(u214);
  } else {
      v6 = meth_unk00214_10073F40(u214);
      v4 = meth_unk00214_GetField10(u214);
      if (!sub_1000C4D0(*a1, a1[2], 1, 0, (int)v4, v6))
          return meth_unk00214_10073F40(u214);
      result = -1;
  }
  return result;
}
// 10AA2894: using guessed type int dword_10AA2894;

//----- (10004760) --------------------------------------------------------
int __cdecl sub_10004760(
    _DWORD *a1, char a2, char a3, char a4, char a5, char a6, int a7, int a8, char a9, char a10) {
  int v10;          // ebx
  unsigned int v11; // ebp
  int i;            // esi
  int v13;          // esi
  unk00214 u214;    // [esp+10h] [ebp-220h] BYREF
  int v16;          // [esp+22Ch] [ebp-4h]

  meth_unk00214_10073B40_init(&u214);
  v10 = 0;
  v16 = 0;
  sub_100048D0(&u214);
  meth_unk00214_10073D60(&u214, dword_10094294 | a10);
  meth_unk00214_10073D60(&u214, a2);
  meth_unk00214_10073D60(&u214, a9);
  meth_unk00214_10073D60(&u214, a3);
  meth_unk00214_10073D60(&u214, a4);
  meth_unk00214_10073D60(&u214, a5);
  meth_unk00214_10073D60(&u214, a6);
  meth_unk00214_10073E10(&u214, a7);
  v11 = a9 & 0x3F;
  if (v11 <= 2) {
      for (i = 0; i < 24; ++i) {
          if (v10) {
              meth_unk00214_10073D60(&u214, 0);
          } else {
              meth_unk00214_10073D60(&u214, *(_BYTE *)(i + a8));
              if (!*(_BYTE *)(i + a8))
                  v10 = 1;
          }
      }
  }
  if (v11 == 4)
      meth_unk00214_10073DC0(&u214, dword_1022AEFC);
  v13 = sub_100046D0(a1, &u214);
  v16 = -1;
  meth_DebugPrint(&u214);
  return v13;
}
// 10094294: using guessed type int dword_10094294;

//----- (100048D0) --------------------------------------------------------
BOOL __cdecl sub_100048D0(unk00214 *a1) {
  meth_unk00214_10073B80(a1);
  WaitForSingleObject(gMutex4, INFINITE);
  dword_10221310 = sub_10003460();
  meth_unk00214_10073DC0(a1, dword_10221310);
  return ReleaseMutex(gMutex4);
}
// 10221310: using guessed type int dword_10221310;

//----- (10004910) --------------------------------------------------------
int __cdecl sub_10004910(_DWORD *a1, int a2) {
  int v2;       // esi
  unk00214 a1a; // [esp+4h] [ebp-220h] BYREF
  int v5;       // [esp+220h] [ebp-4h]

  meth_unk00214_10073B40_init(&a1a);
  v5 = 0;
  sub_100048D0(&a1a);
  meth_unk00214_10073D60(&a1a, dword_10094294 & 0xF | 0xD0);
  meth_unk00214_10073DC0(&a1a, a2);
  v2 = sub_100046D0(a1, &a1a);
  v5 = -1;
  meth_DebugPrint(&a1a);
  return v2;
}
// 10094294: using guessed type int dword_10094294;

//----- (100049C0) --------------------------------------------------------
int sub_100049C0() {
  int result; // eax
  char v1;    // dl

  result = (unsigned __int8)byte_100B37D2[3 * dword_10094294];
  byte_10AD0856[0] = byte_100B37D2[3 * dword_10094294];
  v1 = byte_100B37D0[3 * dword_10094294];
  byte_10AD0855[0] = byte_100B37D1[3 * dword_10094294];
  byte_10AD0854[0] = v1;
  return result;
}
// 10094294: using guessed type int dword_10094294;

//----- (10004A10) --------------------------------------------------------
int __cdecl atomic_sub_10004A10(int mutexIndex) {
  int v1; // edi

  WaitForSingleObject(gMutexes[606 * mutexIndex], INFINITE);
  v1 = unk_10221354[606 * mutexIndex];
  ReleaseMutex(gMutexes[606 * mutexIndex]);
  return v1;
}

//----- (10004A50) --------------------------------------------------------
BOOL __cdecl atomic_sub_10004A50(int a1, int a2) {
  WaitForSingleObject(gMutexes[606 * a1], INFINITE);
  unk_10221354[606 * a1] = a2;
  return ReleaseMutex(gMutexes[606 * a1]);
}

//----- (10004A90) --------------------------------------------------------
BOOL np_sub_10004A90() {
  BOOL v0;  // ebp
  DWORD v1; // esi
  DWORD v2; // esi

  dword_10094294 = -1;
  do {
      v0 = sub_10004590((int)&unk,
                        dword_10094294,
                        byte_10AD0854[0],
                        byte_10AD0855[0],
                        byte_10AD0856[0],
                        (int)dplay4aShortName,
                        0) != -1;
      v1 = getTicks();
      if (dword_10277B4C) {
          dword_10094294 = 0;
          sub_100049C0();
          sub_10004590((int)&unk,
                       dword_10094294,
                       byte_10AD0854[0],
                       byte_10AD0855[0],
                       byte_10AD0856[0],
                       (int)dplay4aShortName,
                       16);
          sub_10004760(&unk,
                       dword_10094294,
                       gChosenCar,
                       byte_10AD0854[0],
                       byte_10AD0855[0],
                       byte_10AD0856[0],
                       dword_10277B48,
                       (int)dplay4aShortName,
                       2,
                       16);
      }
      if (dword_10094294 != -1)
          break;
      v2 = v1 + 2000;
      do {
          if (getTicks() >= v2)
              break;
          Sleep(0);
      } while (dword_10094294 == -1);
  } while (dword_10094294 == -1);
  return v0;
}
// 10094294: using guessed type int dword_10094294;
// 1022B34C: using guessed type int gChosenCar;
// 10277B48: using guessed type int dword_10277B48;
// 10277B4C: using guessed type int dword_10277B4C;

//----- (10004BB0) --------------------------------------------------------
int atomic_sub_10004BB0() {
  WaitForSingleObject(gMutex3, INFINITE);
  gMutexesEnd = HANDLE_FLAG_INHERIT;
  ReleaseMutex(gMutex3);
  return 1;
}

//----- (10004BE0) --------------------------------------------------------
int atomic_sub_10004BE0() {
  WaitForSingleObject(gMutex5, INFINITE);
  if (!dword_1022AAF4)
      dword_1022AAF4 = 1;
  ReleaseMutex(gMutex5);
  return 1;
}
// 1022AAF4: using guessed type int dword_1022AAF4;

//----- (10004C20) --------------------------------------------------------
int atomic_sub_10004C20() {
  WaitForSingleObject(gMutex6, INFINITE);
  if (!dword_10221314)
      dword_10221314 = 1;
  ReleaseMutex(gMutex6);
  return 1;
}
// 10221314: using guessed type int dword_10221314;

//----- (10004C60) --------------------------------------------------------
int __cdecl sub_10004C60(void *a1) {
  HANDLE *v1;        // ebx
  int v2;            // eax
  int v3;            // eax
  int result;        // eax
  HANDLE Handles[2]; // [esp+10h] [ebp-228h] BYREF
  unk00214 a1a;      // [esp+18h] [ebp-220h] BYREF
  int v7;            // [esp+234h] [ebp-4h]

  Handles[0] = gMutex4;
  v1 = &gMutexes[606 * dword_10094294];
  Handles[1] = *v1;
  WaitForMultipleObjects(2u, Handles, 1, INFINITE);
  dword_10221310 = sub_10003460();
  v2 = (int)v1[343] + 1;
  v1[343] = (HANDLE)v2;
  if (v2 >= 8)
      v1[343] = 0;
  v1[(_DWORD)v1[343] + 3] = (HANDLE)dword_10221310;
  v1[(_DWORD)v1[343] + 14] = (HANDLE)64;
  qmemcpy(&v1[40 * (_DWORD)v1[343] + 22], a1, 0xA0u);
  ReleaseMutex(*v1);
  ReleaseMutex(gMutex4);
  meth_unk00214_10073B40_init(&a1a);
  v7 = 0;
  sub_100048D0(&a1a);
  meth_unk00214_10073D60(&a1a, dword_10094294 | 0x40);
  math_100061A0(&a1a, (float *)a1);
  v3 = sub_10004DD0(&unk, &a1a);
  v7 = -1;
  if (v3 == -1) {
      meth_DebugPrint(&a1a);
      result = 0;
  } else {
      meth_DebugPrint(&a1a);
      result = 1;
  }
  return result;
}
// 10094294: using guessed type int dword_10094294;
// 10221310: using guessed type int dword_10221310;

//----- (10004DD0) --------------------------------------------------------
int __cdecl sub_10004DD0(_DWORD *a1, unk00214 *a2) {
  int result; // eax
  int *v3;    // eax
  int *v4;    // eax
  int v5;     // [esp-Ch] [ebp-14h]
  int v6;     // [esp-4h] [ebp-Ch]

  if (dword_10AA2894)
      goto LABEL_2;
  if (a1[3]) {
      v5 = meth_unk00214_10073F40(a2);
      v3 = meth_unk00214_GetField10(a2);
      sub_100360F0((int)a1, (int)v3, v5, (void *)1);
  }
  v6 = meth_unk00214_10073F40(a2);
  v4 = meth_unk00214_GetField10(a2);
  if (!sub_1000C4D0(*a1, a1[2], 0, 0, (int)v4, v6))
  LABEL_2:
      result = meth_unk00214_10073F40(a2);
  else
      result = -1;
  return result;
}
// 10AA2894: using guessed type int dword_10AA2894;

//----- (10004E50) --------------------------------------------------------
int __cdecl sub_10004E50(float *a1, float *a3) {
  HANDLE *v2;        // ebx
  int v3;            // eax
  int v4;            // eax
  int result;        // eax
  HANDLE Handles[2]; // [esp+10h] [ebp-228h] BYREF
  unk00214 u214;     // [esp+18h] [ebp-220h] BYREF
  int v8;            // [esp+234h] [ebp-4h]

  Handles[0] = gMutex4;
  v2 = &gMutexes[606 * dword_10094294];
  Handles[1] = *v2;
  WaitForMultipleObjects(2u, Handles, 1, INFINITE);
  dword_10221310 = sub_10003460();
  v3 = (int)v2[343] + 1;
  v2[343] = (HANDLE)v3;
  if (v3 >= 8)
      v2[343] = 0;
  v2[(_DWORD)v2[343] + 3] = (HANDLE)dword_10221310;
  v2[(_DWORD)v2[343] + 14] = (HANDLE)128;
  qmemcpy(&v2[40 * (_DWORD)v2[343] + 22], a1, 0xA0u);
  ReleaseMutex(*v2);
  ReleaseMutex(gMutex4);
  meth_unk00214_10073B40_init(&u214);
  v8 = 0;
  sub_100048D0(&u214);
  meth_unk00214_10073D60(&u214, dword_10094294 | 0x80);
  s_unk00214_10006830(&u214, a1, a3);
  v4 = sub_10004DD0(&unk, &u214);
  v8 = -1;
  if (v4 == -1) {
      meth_DebugPrint(&u214);
      result = 0;
  } else {
      meth_DebugPrint(&u214);
      result = 1;
  }
  return result;
}
// 10094294: using guessed type int dword_10094294;
// 10221310: using guessed type int dword_10221310;

//----- (10004FC0) --------------------------------------------------------
int np_sub_10004FC0() {
  int v0;     // eax
  int v1;     // esi
  int result; // eax
  char v3;    // al

  WaitForSingleObject(gMutex5, INFINITE);
  v0 = dword_1022AAF4;
  if (dword_1022AAF4) {
      v0 = dword_1022AAF4 + 1;
      dword_1022AAF4 = v0;
      if (v0 >= 27) {
          v0 = 0;
          dword_1022AF20 = 1;
          dword_1022AAF4 = 0;
      }
  }
  v1 = v0;
  result = ReleaseMutex(gMutex5);
  if (v1) {
      result = gNetworkPlay;
      if (gNetworkPlay) {
          result = gIsGameMode4;
          if (gIsGameMode4) {
              result = dword_106909E0;
              if (!dword_106909E0) {
                  result = dword_100BD3E0;
                  if (dword_10ACEE50 < dword_100BD3E0) {
                      v3 = atomic_sub_10004A10(dword_10094294);
                      result = sub_10004760(&unk,
                                            dword_10094294,
                                            gChosenCar,
                                            byte_10AD0854[0],
                                            byte_10AD0855[0],
                                            byte_10AD0856[0],
                                            dword_10277B48,
                                            (int)dplay4aShortName,
                                            v3 & 0xBF | 0x80,
                                            0);
                  }
              }
          }
      }
  }
  return result;
}
// 10094294: using guessed type int dword_10094294;
// 1022AAF4: using guessed type int dword_1022AAF4;
// 1022AF14: using guessed type int gIsGameMode4;
// 1022AF18: using guessed type int gNetworkPlay;
// 1022AF20: using guessed type int dword_1022AF20;
// 1022B34C: using guessed type int gChosenCar;
// 10277B48: using guessed type int dword_10277B48;
// 106909E0: using guessed type int dword_106909E0;
// 10ACEE50: using guessed type int dword_10ACEE50;

//----- (10005090) --------------------------------------------------------
int np_sub_10005090() {
  int v0;     // eax
  int v1;     // esi
  int result; // eax
  char v3;    // al

  WaitForSingleObject(gMutex6, INFINITE);
  v0 = dword_10221314;
  if (dword_10221314) {
      v0 = dword_10221314 + 1;
      dword_10221314 = v0;
      if (v0 >= 100) {
          v0 = 0;
          dword_106909D8 = 1;
          dword_10221314 = 0;
      }
  }
  v1 = v0;
  result = ReleaseMutex(gMutex6);
  if (v1) {
      v3 = atomic_sub_10004A10(dword_10094294);
      result = sub_10004760(&unk,
                            dword_10094294,
                            gChosenCar,
                            byte_10AD0854[0],
                            byte_10AD0855[0],
                            byte_10AD0856[0],
                            dword_10277B48,
                            (int)dplay4aShortName,
                            v3 & 0x7F | 0x40,
                            0);
  }
  return result;
}
// 10094294: using guessed type int dword_10094294;
// 10221314: using guessed type int dword_10221314;
// 1022B34C: using guessed type int gChosenCar;
// 10277B48: using guessed type int dword_10277B48;
// 106909D8: using guessed type int dword_106909D8;

//----- (10005130) --------------------------------------------------------
int __cdecl sub_10005130(float *a1) {
  int result; // eax
  int v2;     // esi

  if (a1[30] >= 4188888.0 && flt_10220D68 < 4188888.0) {
  LABEL_3:
      qmemcpy(flt_10220CF0, a1, 0xA0u);
      return sub_10004C60(a1);
  }
  if (++dword_1022AF40 >= 3) {
      if (a1[32] < (double)flt_10220E60)
          a1[32] = flt_10220E60;
      if (a1[33] < (double)flt_10220E64)
          a1[33] = flt_10220E64;
      if (a1[34] < (double)flt_10220E68)
          a1[34] = flt_10220E68;
      if (a1[35] < (double)flt_10220E6C)
          a1[35] = flt_10220E6C;
      if (a1[36] < (double)flt_10220E70)
          a1[36] = flt_10220E70;
      if (a1[37] < (double)flt_10220E74)
          a1[37] = flt_10220E74;
      if (a1[38] < (double)flt_10220E78)
          a1[38] = flt_10220E78;
      flt_10220E78 = 0.0;
      flt_10220E74 = 0.0;
      ++dword_10094298;
      flt_10220E70 = 0.0;
      flt_10220E6C = 0.0;
      flt_10220E68 = 0.0;
      flt_10220E64 = 0.0;
      flt_10220E60 = 0.0;
      dword_1022AF40 = 0;
      if (!(dword_10094298 % 4))
          goto LABEL_3;
      v2 = sub_10004E50(a1, flt_10220CF0);
      np_sub_100053F0();
      np_sub_10004FC0();
      result = v2;
  } else {
      if (flt_10220E60 < (double)a1[32])
          flt_10220E60 = a1[32];
      if (flt_10220E64 < (double)a1[33])
          flt_10220E64 = a1[33];
      if (flt_10220E68 < (double)a1[34])
          flt_10220E68 = a1[34];
      if (flt_10220E6C < (double)a1[35])
          flt_10220E6C = a1[35];
      if (flt_10220E70 < (double)a1[36])
          flt_10220E70 = a1[36];
      if (flt_10220E74 < (double)a1[37])
          flt_10220E74 = a1[37];
      if (flt_10220E78 < (double)a1[38])
          flt_10220E78 = a1[38];
      result = 1;
  }
  return result;
}
// 10094298: using guessed type int dword_10094298;
// 10220D68: using guessed type float flt_10220D68;
// 10220E60: using guessed type float flt_10220E60;
// 10220E64: using guessed type float flt_10220E64;
// 10220E68: using guessed type float flt_10220E68;
// 10220E6C: using guessed type float flt_10220E6C;
// 10220E70: using guessed type float flt_10220E70;
// 10220E74: using guessed type float flt_10220E74;
// 10220E78: using guessed type float flt_10220E78;
// 1022AF40: using guessed type int dword_1022AF40;

//----- (100053F0) --------------------------------------------------------
int np_sub_100053F0() {
  HANDLE v0;  // esi
  int result; // eax
  int v2;     // esi

  WaitForSingleObject(gMutex3, INFINITE);
  v0 = gMutexesEnd;
  result = ReleaseMutex(gMutex3);
  if (v0) {
      v2 = sub_10005470();
      result = sub_1000C670();
      if (v2 == result)
          result = sub_10004760(&unk,
                                dword_10094294,
                                gChosenCar,
                                byte_10AD0854[0],
                                byte_10AD0855[0],
                                byte_10AD0856[0],
                                dword_10277B48,
                                (int)dplay4aShortName,
                                3,
                                0);
  }
  return result;
}
// 10094294: using guessed type int dword_10094294;
// 1022B34C: using guessed type int gChosenCar;
// 10277B48: using guessed type int dword_10277B48;

//----- (10005470) --------------------------------------------------------
int sub_10005470() {
  int v0;     // edx
  int result; // eax
  _DWORD *v2; // ecx

  v0 = dword_100B36FC;
  result = 0;
  if (dword_100B36FC > 0) {
      v2 = &unk_10ACEDB0;
      do {
          if (*v2)
              ++result;
          v2 += 2778;
          --v0;
      } while (v0);
  }
  return result;
}
// 100B36FC: using guessed type int dword_100B36FC;

//----- (100054A0) --------------------------------------------------------
int __cdecl sub_100054A0(float *a1, int a2) {
  HANDLE *v2;        // ebx
  int v4;            // eax
  int v5;            // esi
  unsigned int *v6;  // edx
  int v7;            // eax
  int v8;            // edi
  unsigned int *v9;  // edx
  int v10;           // eax
  HANDLE v11;        // ecx
  int v12;           // edx
  signed int v13;    // eax
  char *v14;         // ecx
  HANDLE v15;        // ecx
  int v16;           // edx
  signed int v17;    // eax
  HANDLE *v18;       // esi
  int v19;           // eax
  int v20;           // ecx
  double v21;        // st7
  int v22;           // ecx
  int v23;           // edx
  double v24;        // st7
  double v25;        // st6
  HANDLE *v26;       // esi
  int v27;           // ecx
  int v28;           // edx
  double v29;        // st7
  int v30;           // edx
  int v31;           // eax
  float v33;         // [esp+0h] [ebp-30h]
  float v34;         // [esp+0h] [ebp-30h]
  HANDLE Handles[2]; // [esp+1Ch] [ebp-14h] BYREF
  HANDLE v36;        // [esp+24h] [ebp-Ch] BYREF
  int v37;           // [esp+28h] [ebp-8h]
  int v38;           // [esp+2Ch] [ebp-4h]
  unsigned int v39;  // [esp+34h] [ebp+4h]
  unsigned int v40;  // [esp+34h] [ebp+4h]
  int v41;           // [esp+34h] [ebp+4h]
  float v42;         // [esp+34h] [ebp+4h]
  float v43;         // [esp+34h] [ebp+4h]
  int v44;           // [esp+38h] [ebp+8h]

  Handles[0] = gMutex4;
  Handles[1] = gMutexes[606 * a2];
  v2 = &gMutexes[606 * a2];
  WaitForMultipleObjects(2u, Handles, TRUE, INFINITE);
  if (a2 != dword_10094294) {
      if ((int)v2[342] < 2) {
          a1[31] = 400.0;
          ReleaseMutex(*v2);
          ReleaseMutex(gMutex4);
          return 0;
      }
      v4 = 0;
      v5 = 0;
      v39 = 0;
      v6 = (unsigned int *)(v2 + 3);
      do {
          if (v6[11] && *v6 > v39) {
              v5 = v4;
              v39 = *v6;
          }
          ++v4;
          ++v6;
      } while (v4 < 8);
      v7 = 0;
      v8 = 0;
      v44 = 0;
      v40 = 0;
      v9 = (unsigned int *)(v2 + 3);
      do {
          if (v9[11]) {
              if (*v9 <= v40 || v7 == v5) {
                  v8 = v44;
              } else {
                  v8 = v7;
                  v40 = *v9;
                  v44 = v7;
              }
          }
          ++v7;
          ++v9;
      } while (v7 < 8);
      v10 = (_BYTE *)v2[v5 + 3] - (_BYTE *)v2[v8 + 3];
      v11 = v2[344];
      v41 = v10;
      if (v11 != (HANDLE)v5) {
          v14 = (char *)v2[345];
          v2[344] = (HANDLE)v5;
          v15 = v14 + 1;
          if (v2[v5 + 3] < v15) {
              v16 = (int)v2[347];
              if (v16 < 20) {
                  if (v10) {
                      v2[346] = HANDLE_FLAG_INHERIT;
                      v2[347] = (HANDLE)(v16 + 1);
                      v2[345] = v15;
                      v17 = sub_10003460() - (_DWORD)v2[v5 + 3];
                      if (v17 > 6)
                          v17 = 6;
                      v18 = &v2[40 * v5];
                      v33 = (double)(v41 + v17) / (double)v41;
                      math_100079E0((int)a1, v33, (int)&v2[40 * v8 + 22], (int)(v18 + 22));
                      v19 = (int)v18[27];
                      v20 = (int)v18[28];
                      v36 = v18[26];
                      v37 = v19;
                      v38 = v20;
                      v21 = sub_1006F310((float *)&v36);
                      v22 = *((_DWORD *)a1 + 5);
                      v23 = *((_DWORD *)a1 + 6);
                      v42 = v21;
                      v36 = (HANDLE) * ((_DWORD *)a1 + 4);
                      v37 = v22;
                      v38 = v23;
                      v24 = sub_1006F310((float *)&v36);
                      v25 = v42;
                      goto LABEL_32;
                  }
              }
          }
          v2[346] = 0;
          v2[347] = 0;
          v2[345] = v2[v5 + 3];
          v13 = sub_10003460() - (_DWORD)v2[v5 + 3];
          if (v13 > 6)
              v13 = 6;
      LABEL_31:
          v26 = &v2[40 * v5];
          v34 = (double)(v41 + v13) / (double)v41;
          math_100079E0((int)a1, v34, (int)&v2[40 * v8 + 22], (int)(v26 + 22));
          v27 = (int)v26[27];
          v28 = (int)v26[28];
          v36 = v26[26];
          v37 = v27;
          v38 = v28;
          v29 = sub_1006F310((float *)&v36);
          v30 = *((_DWORD *)a1 + 5);
          v31 = *((_DWORD *)a1 + 6);
          v43 = v29;
          v36 = (HANDLE) * ((_DWORD *)a1 + 4);
          v37 = v30;
          v38 = v31;
          v24 = sub_1006F310((float *)&v36);
          v25 = v43;
      LABEL_32:
          a1[6] = v25 - v24 + a1[6];
          goto LABEL_33;
      }
      v12 = (int)v2[346];
      if (v12 < 15) {
          v2[346] = (HANDLE)(v12 + 1);
          v2[345] = (char *)v2[345] + 1;
      }
      if (v10) {
          v13 = sub_10003460() - (_DWORD)v2[v5 + 3];
          if (v13 > 6)
              v13 = 6;
          goto LABEL_31;
      }
      qmemcpy(a1, &v2[40 * (_DWORD)v11 + 22], 0xA0u);
  }
LABEL_33:
  ReleaseMutex(*v2);
  ReleaseMutex(gMutex4);
  sub_100058D0(a1);
  sub_100058D0(a1 + 1);
  sub_100058D0(a1 + 2);
  sub_100058D0(a1 + 3);
  if (*a1 + a1[1] + a1[3] + a1[2] == 0.0) {
      *a1 = 1.0;
      a1[1] = 0.0;
      a1[2] = 0.0;
      a1[3] = 0.0;
  } else {
      math_100741B0(a1);
  }
  Clamp0To2048(a1 + 4);
  Clamp0To2048(a1 + 5);
  Clamp256(a1 + 6);
  return 1;
}
// 10094294: using guessed type int dword_10094294;

//----- (100058D0) --------------------------------------------------------
void __cdecl sub_100058D0(float *a1) {
  if (*a1 < -1.0)
      *a1 = -1.0;
  if (*a1 > 1.0)
      *a1 = 1.0;
}

//----- (10005900) --------------------------------------------------------
void __cdecl Clamp0To2048(float *a1) {
  if (*a1 < 0.0)
      *a1 = 0.0;
  if (*a1 > 2048.0)
      *a1 = 2048.0;
}

//----- (10005930) --------------------------------------------------------
void __cdecl Clamp256(float *a1) {
  if (*a1 < -256.0)
      *a1 = -256.0;
  if (*a1 > 256.0)
      *a1 = 256.0;
}

//----- (10005960) --------------------------------------------------------
int atomic_sub_10005960() {
  int *unkObjInstance; // esi
  int *v1;             // eax

  unkObjInstance = unk_10221334;
  do {
      WaitForSingleObject((HANDLE) * (unkObjInstance - 3), INFINITE);
      *(unkObjInstance - 1) = 0;
      memset(unkObjInstance, 0, 0x20u);
      unkObjInstance[8] = 0;
      memset(unkObjInstance + 11, 0, 0x20u);
      unkObjInstance[339] = 0;
      unkObjInstance[340] = 0;
      unkObjInstance[341] = -1;
      unkObjInstance[343] = 0;
      unkObjInstance[344] = 0;
      unkObjInstance[342] = 0;
      unkObjInstance[602] = 0;
      ReleaseMutex((HANDLE) * (unkObjInstance - 3));
      unkObjInstance += 606;
  } while ((int)unkObjInstance < (int)dword_1022AAB4);
  WaitForSingleObject(gMutex9, INFINITE);
  dword_1022AEF8 = -1;
  dword_1022AF08 = 0;
  byte_10220E80 = 0;
  ReleaseMutex(gMutex9);
  WaitForSingleObject(gMutex0, INFINITE);
  memset(dword_102212D0, 0, sizeof(dword_102212D0));
  ReleaseMutex(gMutex0);
  WaitForSingleObject(gMutex1, INFINITE);
  dword_10220DD4 = INFINITE;
  ReleaseMutex(gMutex1);
  WaitForSingleObject(gMutex2, INFINITE);
  dword_10221318 = INFINITE;
  ReleaseMutex(gMutex2);
  WaitForSingleObject(gMutex3, INFINITE);
  gMutexesEnd = 0;
  ReleaseMutex(gMutex3);
  WaitForSingleObject(gMutex5, INFINITE);
  dword_1022AAF4 = 0;
  ReleaseMutex(gMutex5);
  WaitForSingleObject(gMutex6, INFINITE);
  dword_10221314 = 0;
  ReleaseMutex(gMutex6);
  WaitForSingleObject(gMutex7, INFINITE);
  dword_10220DD0 = 0;
  ReleaseMutex(gMutex7);
  WaitForSingleObject(gMutex8, INFINITE);
  dword_1022AF00 = INFINITE;
  ReleaseMutex(gMutex8);
  dword_10220DD8 = 0;
  dword_1022AF3C = INFINITE;
  v1 = dword_1022AAB4;
  do {
      *(v1 - 1) = 0;
      *v1 = 0;
      v1 += 2;
  } while ((int)v1 < (int)&dword_1022AAF4);
  dword_1022AF20 = 0;
  dword_106909D8 = 0;
  return 1;
}
// 10220DD0: using guessed type int dword_10220DD0;
// 10220DD4: using guessed type int dword_10220DD4;
// 10220DD8: using guessed type int dword_10220DD8;
// 10220E80: using guessed type char byte_10220E80;
// 10221314: using guessed type int dword_10221314;
// 10221318: using guessed type int dword_10221318;
// 1022AAF4: using guessed type int dword_1022AAF4;
// 1022AEF8: using guessed type int dword_1022AEF8;
// 1022AF00: using guessed type int dword_1022AF00;
// 1022AF08: using guessed type int dword_1022AF08;
// 1022AF20: using guessed type int dword_1022AF20;
// 1022AF3C: using guessed type int dword_1022AF3C;
// 106909D8: using guessed type int dword_106909D8;

//----- (10005B10) --------------------------------------------------------
int sub_10005B10() {
  HANDLE *mutex; // esi

  mutex = gMutexes;
  do {
      *mutex = CreateMutexA(0, 0, 0);
      mutex += 0x25E;
  } while ((int)mutex < (int)&gMutexesEnd);
  gMutex9 = CreateMutexA(0, 0, 0);
  gMutex0 = CreateMutexA(0, 0, 0);
  gMutex1 = CreateMutexA(0, 0, 0);
  gMutex2 = CreateMutexA(0, 0, 0);
  dword_10221310 = 0;
  dword_10220DD8 = 0;
  sub_10075100();
  gMutex4 = CreateMutexA(0, 0, 0);
  gMutex3 = CreateMutexA(0, 0, 0);
  gMutex5 = CreateMutexA(0, 0, 0);
  gMutex6 = CreateMutexA(0, 0, 0);
  gMutex7 = CreateMutexA(0, 0, 0);
  gMutex8 = CreateMutexA(0, 0, 0);
  atomic_sub_10005960();
  return 1;
}
// 10220DD8: using guessed type int dword_10220DD8;
// 10221310: using guessed type int dword_10221310;

//----- (10005BE0) --------------------------------------------------------
BOOL np_sub_10005BE0() {
  BOOL v0;    // ebp
  HANDLE *v1; // esi

  if (gNetworkPlay > 1)
      sub_10072270();
  v0 = sub_1000C510((HANDLE *)&unk) == 0;
  if (gMutex8) {
      CloseHandle(gMutex8);
      gMutex8 = 0;
  }
  if (gMutex7) {
      CloseHandle(gMutex7);
      gMutex7 = 0;
  }
  if (gMutex5) {
      CloseHandle(gMutex5);
      gMutex5 = 0;
  }
  if (gMutex6) {
      CloseHandle(gMutex6);
      gMutex6 = 0;
  }
  if (gMutex3) {
      CloseHandle(gMutex3);
      gMutex3 = 0;
  }
  if (gMutex4) {
      CloseHandle(gMutex4);
      gMutex4 = 0;
  }
  if (gMutex1) {
      CloseHandle(gMutex1);
      gMutex1 = 0;
  }
  if (gMutex2) {
      CloseHandle(gMutex2);
      gMutex2 = 0;
  }
  if (gMutex0) {
      CloseHandle(gMutex0);
      gMutex0 = 0;
  }
  if (gMutex9) {
      CloseHandle(gMutex9);
      gMutex9 = 0;
  }
  v1 = gMutexes;
  do {
      if (*v1) {
          CloseHandle(*v1);
          *v1 = 0;
      }
      v1 += 606;
  } while ((int)v1 < (int)&gMutexesEnd);
  return v0;
}
// 1022AF18: using guessed type int gNetworkPlay;

//----- (10005CF0) --------------------------------------------------------
int __cdecl atomic_sub_10005CF0(int mutexMult) {
  int v1; // edi

  WaitForSingleObject(gMutexes[606 * mutexMult], INFINITE);
  v1 = unk_1022132C[606 * mutexMult];
  ReleaseMutex(gMutexes[606 * mutexMult]);
  return v1;
}

//----- (10005D30) --------------------------------------------------------
int sub_10005D30() {
  return dword_10094294;
}
// 10094294: using guessed type int dword_10094294;

//----- (10005D40) --------------------------------------------------------
int atomic_sub_10005D40() {
  int v0;     // esi
  int result; // eax

  WaitForSingleObject(gMutex1, INFINITE);
  if (dword_10220DD4 < 0) {
      ReleaseMutex(gMutex1);
      result = -1;
  } else {
      v0 = dword_10220D90[dword_10220DD4--];
      ReleaseMutex(gMutex1);
      result = v0;
  }
  return result;
}
// 10220DD4: using guessed type int dword_10220DD4;

//----- (10005D90) --------------------------------------------------------
int atomic_sub_10005D90() {
  int v0;     // esi
  int result; // eax

  WaitForSingleObject(gMutex2, INFINITE);
  if (dword_10221318 < 0) {
      ReleaseMutex(gMutex2);
      result = -1;
  } else {
      v0 = dword_10221288[dword_10221318--];
      ReleaseMutex(gMutex2);
      result = v0;
  }
  return result;
}
// 10221318: using guessed type int dword_10221318;

//----- (10005DE0) --------------------------------------------------------
int __cdecl atomic_sub_10005DE0(int mutexMult, _BYTE *a2, _BYTE *a3, _BYTE *a4) {
  int v4; // edi

  WaitForSingleObject(gMutexes[606 * mutexMult], INFINITE);
  v4 = unk_10221358[606 * mutexMult];
  *a2 = unk_1022135C[2424 * mutexMult];
  *a3 = unk_1022135D[2424 * mutexMult];
  *a4 = unk_1022135E[2424 * mutexMult];
  ReleaseMutex(gMutexes[606 * mutexMult]);
  return v4;
}

//----- (10005E40) --------------------------------------------------------
int __cdecl atomic_sub_10005E40(int a1) {
  int v1; // esi

  WaitForSingleObject(gMutex0, INFINITE);
  v1 = dword_102212D0[a1];
  ReleaseMutex(gMutex0);
  return v1;
}

//----- (10005E70) --------------------------------------------------------
char *__cdecl atomic_sub_10005E70(int mutexMult) {
  WaitForSingleObject(gMutexes[606 * mutexMult], INFINITE);
  strcpy(byte_1022AAF8, &byte_10221898[2424 * mutexMult]);
  ReleaseMutex(gMutexes[606 * mutexMult]);
  return byte_1022AAF8;
}

//----- (10005EE0) --------------------------------------------------------
BOOL __cdecl np_sub_10005EE0(int a1, const char *a2) {
  WaitForSingleObject(gMutexes[606 * a1], INFINITE);
  strcpy(&byte_10221898[2424 * a1], a2);
  return ReleaseMutex(gMutexes[606 * a1]);
}

//----- (10005F40) --------------------------------------------------------
int __cdecl atomic_sub_10005F40(int mutexMult) {
  int v1; // esi

  WaitForSingleObject(gMutexes[606 * mutexMult], INFINITE);
  v1 = (atomic_sub_10004A10(mutexMult) & 0x3F) - 4;
  ReleaseMutex(gMutexes[606 * mutexMult]);
  return v1 <= 0 ? 0 : v1;
}

//----- (10005F90) --------------------------------------------------------
int __cdecl atomic_sub_10005F90(int mutexMult) {
  int v1; // edi

  WaitForSingleObject(gMutexes[606 * mutexMult], INFINITE);
  v1 = dword_10221C9C[606 * mutexMult];
  ReleaseMutex(gMutexes[606 * mutexMult]);
  if (v1 < 0)
      v1 = 0;
  return v1;
}

//----- (10005FE0) --------------------------------------------------------
int __cdecl np_sub_10005FE0(int a1) {
  int v1;            // esi
  const char *v2;    // edi
  int result;        // eax
  HANDLE v4;         // [esp-4h] [ebp-414h]
  char Buffer[1024]; // [esp+10h] [ebp-400h] BYREF

  v1 = 0;
  v2 = byte_10221898;
  do {
      result = atomic_sub_10005CF0(v1);
      if (result == a1) {
          result = atomic_sub_10004A10(v1);
          if ((result & 0x3F) != 0) {
              WaitForSingleObject(gMutex2, 0xFFFFFFFF);
              v4 = gMutex2;
              dword_10221288[++dword_10221318] = v1;
              ReleaseMutex(v4);
              atomic_sub_10004A50(v1, 0);
              sprintf(Buffer, "%%15%s left the game.", v2);
              result = np_sub_10003530(Buffer);
          }
      }
      v2 += 2424;
      ++v1;
  } while ((int)v2 < (int)&unk_1022B018);
  return result;
}
// 10221318: using guessed type int dword_10221318;

//----- (10006090) --------------------------------------------------------
BOOL atomic_sub_10006090() {
  WaitForSingleObject(gMutex7, 0xFFFFFFFF);
  dword_10220DD0 = 1;
  return ReleaseMutex(gMutex7);
}
// 10220DD0: using guessed type int dword_10220DD0;

//----- (100060C0) --------------------------------------------------------
BOOL atomic_sub_100060C0() {
  WaitForSingleObject(gMutex7, 0xFFFFFFFF);
  dword_10220DD0 = 0;
  return ReleaseMutex(gMutex7);
}
// 10220DD0: using guessed type int dword_10220DD0;

//----- (100060F0) --------------------------------------------------------
BOOL atomic_sub_100060F0() {
  WaitForSingleObject(gMutex9, INFINITE);
  if (dword_1022AEF8 >= 0) {
      sub_10072AF0(dword_1022AEF8, 0x200020u);
      dword_1022AEF8 = -1;
  }
  if (dword_1022AF08) {
      dword_104B0338 = (int)&byte_10220E80;
      dword_104B033C = 0x40400000;
      dword_1022AF08 = 0;
  }
  return ReleaseMutex(gMutex9);
}
// 10220E80: using guessed type char byte_10220E80;
// 1022AEF8: using guessed type int dword_1022AEF8;
// 1022AF08: using guessed type int dword_1022AF08;
// 104B0338: using guessed type int dword_104B0338;
// 104B033C: using guessed type int dword_104B033C;

//----- (10006160) --------------------------------------------------------
BOOL np_sub_10006160() {
  WaitForSingleObject(gMutex8, 0xFFFFFFFF);
  if (sub_10003460() >= dword_1022AF00)
      gIsGameMode4 = 1;
  return ReleaseMutex(gMutex8);
}
// 1022AF00: using guessed type int dword_1022AF00;
// 1022AF14: using guessed type int gIsGameMode4;

//----- (100061A0) --------------------------------------------------------
int __cdecl math_100061A0(unk00214 *u214, float a2[40]) {
  __int16 v2;          // ax
  __int16 v3;          // ax
  __int16 v4;          // ax
  __int16 v5;          // ax
  unsigned int v6;     // eax
  unsigned int v7;     // eax
  __int16 v8;          // ax
  __int16 v9;          // ax
  __int16 v10;         // ax
  char v11;            // al
  char v12;            // al
  char v13;            // al
  char v14;            // al
  char v15;            // al
  unsigned __int8 v16; // al
  int v17;             // eax
  unsigned __int8 v18; // al
  unsigned __int8 v19; // al
  unsigned __int8 v20; // al
  int result;          // eax

  v2 = math_ClampFloor32768Int(*a2);
  meth_unk00214_10073E70(u214, v2 >> 8, 8);
  v3 = math_ClampFloor32768Int(a2[1]);
  meth_unk00214_10073E70(u214, v3 >> 8, 8);
  v4 = math_ClampFloor32768Int(a2[2]);
  meth_unk00214_10073E70(u214, v4 >> 8, 8);
  v5 = math_ClampFloor32768Int(a2[3]);
  meth_unk00214_10073E70(u214, v5 >> 8, 8);
  v6 = math_ClampFloor1677215(a2[4]);
  meth_unk00214_10073E70(u214, v6 >> 7, 17);
  v7 = math_ClampFloor1677215(a2[5]);
  meth_unk00214_10073E70(u214, v7 >> 7, 17);
  v8 = math_ClampFloorNeg128(a2[6]);
  meth_unk00214_10073E70(u214, v8 >> 1, 15);
  v9 = math_ClampFloor32768(a2[7]);
  meth_unk00214_10073E70(u214, v9, 16);
  v10 = math_ClampFloor32768(a2[8]);
  meth_unk00214_10073E70(u214, v10, 16);
  v11 = math_ClampFloor128(a2[10]);
  meth_unk00214_10073E70(u214, v11 >> 3, 5);
  v12 = math_ClampFloor128(a2[11]);
  meth_unk00214_10073E70(u214, v12 >> 3, 5);
  v13 = math_ClampFloor128(a2[12]);
  meth_unk00214_10073E70(u214, v13 >> 3, 5);
  v14 = math_ClampFloor128(a2[13]);
  meth_unk00214_10073E70(u214, v14 >> 4, 4);
  v15 = math_ClampFloor32Int(a2[14]);
  meth_unk00214_10073E70(u214, v15 >> 2, 4);
  v16 = math_ClampFloor255(a2[15]);
  meth_unk00214_10073E70(u214, v16 >> 4, 4);
  meth_unk00214_10073E70(u214, a2[19] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[20] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[21] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[22] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[27] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[28] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[29] != 0.0, 1);
  v17 = math_ClampFloor8388607(a2[30]);
  meth_unk00214_10073E70(u214, v17, 24);
  v18 = math_ClampFloor63(a2[31]);
  meth_unk00214_10073E70(u214, v18, 6);
  v19 = math_100066A0(a2[32]);
  meth_unk00214_10073E70(u214, v19, 2);
  v20 = math_100066A0(a2[33]);
  meth_unk00214_10073E70(u214, v20, 2);
  meth_unk00214_10073E70(u214, a2[34] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[35] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[36] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[37] != 0.0, 1);
  meth_unk00214_10073E70(u214, a2[38] != 0.0, 1);
  if (a2[39] == 0.0)
      result = meth_unk00214_10073E70(u214, 0, 1);
  else
      result = meth_unk00214_10073E70(u214, 1, 1);
  return result;
}

//----- (100065A0) --------------------------------------------------------
int __cdecl math_ClampFloor32Int(float a1) {
  int v1; // eax

  *(_QWORD *)&v1 = (__int64)floor(0.5 - a1 * 128.0);
  if (v1 < -32)
      v1 = -32;
  if (v1 > 31)
      v1 = 31;
  return v1;
}

//----- (100065E0) --------------------------------------------------------
int __cdecl math_ClampFloor32768Int(float x) {
  int res; // eax

  *(_QWORD *)&res = (__int64)floor(0.5 - x * 32768.0);
  if (res < -32768)
      res = -32768;
  if (res > 32767)
      res = 32767;
  return res;
}

//----- (10006620) --------------------------------------------------------
int __cdecl math_ClampFloor255(float a1) {
  __int64 v1; // rax

  v1 = (__int64)floor(0.5 - a1 * -0.70914125);
  if ((int)v1 < 0)
      LODWORD(v1) = 0;
  if ((int)v1 > 255)
      LODWORD(v1) = 255;
  return v1;
}

//----- (10006660) --------------------------------------------------------
int __cdecl math_ClampFloor63(float a1) {
  __int64 v1; // rax

  v1 = (__int64)floor(0.5 - (a1 - 400.0) * -0.0082894741);
  if ((int)v1 < 0)
      LODWORD(v1) = 0;
  if ((int)v1 > 63)
      LODWORD(v1) = 63;
  return v1;
}

//----- (100066A0) --------------------------------------------------------
char __cdecl math_100066A0(float a1) {
  char result; // al

  if (a1 < 128.0)
      return 0;
  if (a1 < 171.0)
      return 1;
  result = 2;
  if (a1 >= 213.0)
      result = 3;
  return result;
}

//----- (100066E0) --------------------------------------------------------
__int64 __cdecl math_ClampFloor1677215(float a1) {
  double v1; // st7

  v1 = floor(0.5 - a1 * -8192.0);
  if (v1 < 0.0)
      v1 = 0.0;
  if (v1 > 16777215.0)
      v1 = 16777215.0;
  return (__int64)v1;
}

//----- (10006730) --------------------------------------------------------
int __cdecl math_ClampFloor8388607(float a1) {
  __int64 v1; // rax

  v1 = (__int64)floor(0.5 - a1 * -2.0);
  if ((int)v1 < -8388608)
      LODWORD(v1) = -8388608;
  if ((int)v1 > 0x7FFFFF)
      LODWORD(v1) = 8388607;
  return v1;
}

//----- (10006770) --------------------------------------------------------
int __cdecl math_ClampFloorNeg128(float a1) {
  __int64 v1; // rax

  v1 = (__int64)floor(0.5 - a1 * -128.0);
  if ((int)v1 < -32768)
      LODWORD(v1) = -32768;
  if ((int)v1 > 0x7FFF)
      LODWORD(v1) = 0x7FFF;
  return v1;
}

//----- (100067B0) --------------------------------------------------------
int __cdecl math_ClampFloor32768(float a1) {
  __int64 v1; // rax

  v1 = (__int64)floor(0.5 - a1 * -256.0);
  if ((int)v1 < -32768)
      LODWORD(v1) = -32768;
  if ((int)v1 > 0x7FFF)
      LODWORD(v1) = 0x7FFF;
  return v1;
}

//----- (100067F0) --------------------------------------------------------
int __cdecl math_ClampFloor128(float a1) {
  __int64 v1; // rax

  v1 = (__int64)floor(0.5 - a1 * -8.0);
  if ((int)v1 < -128)
      LODWORD(v1) = -128;
  if ((int)v1 > 127)
      LODWORD(v1) = 127;
  return v1;
}

//----- (10006830) --------------------------------------------------------
int __cdecl s_unk00214_10006830(unk00214 *a1, float *a2, float *a3) {
  __int16 v3;           // ax
  __int16 v4;           // ax
  __int16 v5;           // ax
  __int16 v6;           // ax
  unsigned int v7;      // ebx
  unsigned int v8;      // eax
  __int16 v9;           // cx
  unsigned int v10;     // ebx
  unsigned int v11;     // ebx
  unsigned int v12;     // eax
  __int16 v13;          // cx
  unsigned int v14;     // ebx
  unsigned __int16 v15; // bx
  unsigned __int16 v16; // ax
  __int16 v17;          // cx
  unsigned int v18;     // ebx
  unsigned int v19;     // ecx
  int v20;              // ebx
  int v21;              // eax
  __int16 v22;          // cx
  unsigned int v23;     // ebx
  unsigned __int8 v24;  // al
  unsigned __int8 v25;  // al
  unsigned __int8 v26;  // al
  int result;           // eax

  v3 = math_ClampFloor32768Int(*a2);
  meth_unk00214_10073E70(a1, v3 >> 8, 8);
  v4 = math_ClampFloor32768Int(a2[1]);
  meth_unk00214_10073E70(a1, v4 >> 8, 8);
  v5 = math_ClampFloor32768Int(a2[2]);
  meth_unk00214_10073E70(a1, v5 >> 8, 8);
  v6 = math_ClampFloor32768Int(a2[3]);
  meth_unk00214_10073E70(a1, v6 >> 8, 8);
  v7 = (unsigned int)math_ClampFloor1677215(a3[4]) >> 7;
  v8 = (unsigned int)math_ClampFloor1677215(a2[4]) >> 7;
  if (((v7 ^ v8) & 0x1F000) != 0) {
      v10 = v7 & 0x1F000;
      if (v10 + 4096 == (v8 & 0x1F000))
          v9 = 4096;
      else
          v9 = v10 < (v8 & 0x1F000) ? 0x2000 : 12288;
  } else {
      v9 = 0;
  }
  meth_unk00214_10073E70(a1, v8 & 0xFFF | v9 & 0x3000, 14);
  v11 = (unsigned int)math_ClampFloor1677215(a3[5]) >> 7;
  v12 = (unsigned int)math_ClampFloor1677215(a2[5]) >> 7;
  if (((v11 ^ v12) & 0x1F000) != 0) {
      v14 = v11 & 0x1F000;
      if (v14 + 4096 == (v12 & 0x1F000))
          v13 = 4096;
      else
          v13 = v14 < (v12 & 0x1F000) ? 0x2000 : 12288;
  } else {
      v13 = 0;
  }
  meth_unk00214_10073E70(a1, v12 & 0xFFF | v13 & 0x3000, 14);
  v15 = (__int16)math_ClampFloorNeg128(a3[6]) >> 1;
  v16 = (__int16)math_ClampFloorNeg128(a2[6]) >> 1;
  if (((v15 ^ v16) & 0x7E00) != 0) {
      v18 = v15 & 0x7E00;
      v19 = v16 & 0x7E00;
      if (v18 + 512 == v19)
          v17 = 512;
      else
          v17 = v18 < v19 ? 1024 : 1536;
  } else {
      v17 = 0;
  }
  meth_unk00214_10073E70(a1, v17 & 0x600 | v16 & 0x1FF, 11);
  v20 = math_ClampFloor8388607(a3[30]);
  v21 = math_ClampFloor8388607(a2[30]);
  if (((v20 ^ v21) & 0xFFFF80) != 0) {
      v23 = v20 & 0xFFFF80;
      if (v23 + 128 == (v21 & 0xFFFF80))
          v22 = 128;
      else
          v22 = v23 < (v21 & 0xFFFF80u) ? 256 : 384;
  } else {
      v22 = 0;
  }
  meth_unk00214_10073E70(a1, v22 & 0x180 | v21 & 0x7F, 9);
  v24 = math_ClampFloor63(a2[31]);
  meth_unk00214_10073E70(a1, v24, 6);
  v25 = math_100066A0(a2[32]);
  meth_unk00214_10073E70(a1, v25, 2);
  v26 = math_100066A0(a2[33]);
  meth_unk00214_10073E70(a1, v26, 2);
  meth_unk00214_10073E70(a1, a2[34] != 0.0, 1);
  meth_unk00214_10073E70(a1, a2[35] != 0.0, 1);
  meth_unk00214_10073E70(a1, a2[36] != 0.0, 1);
  meth_unk00214_10073E70(a1, a2[37] != 0.0, 1);
  meth_unk00214_10073E70(a1, a2[38] != 0.0, 1);
  if (a2[39] == 0.0)
      result = meth_unk00214_10073E70(a1, 0, 1);
  else
      result = meth_unk00214_10073E70(a1, 1, 1);
  return result;
}

//----- (10006BD0) --------------------------------------------------------
char __cdecl math_10006BD0(int a1, float a2[40]) {
  _BOOL2 v3;   // di
  _BOOL2 v4;   // bx
  _BOOL2 v5;   // bx
  _BOOL2 v6;   // bx
  BOOL v7;     // ebp
  BOOL v8;     // ebx
  BOOL v9;     // ebp
  int v10;     // ebx
  char v11;    // bl
  char v12;    // cl
  char v13;    // al
  char v14;    // bl
  char v15;    // cl
  char v16;    // al
  char v17;    // bl
  char result; // al
  int a2a;     // [esp+18h] [ebp+8h]

  v3 = a2[35] != 0.0;
  *(_WORD *)a1 = v3 | math_ClampFloor32768Int(*a2) & 0xFFFE;
  v4 = a2[36] != 0.0;
  *(_WORD *)(a1 + 2) = v4 | math_ClampFloor32768Int(a2[1]) & 0xFFFE;
  v5 = a2[37] != 0.0;
  *(_WORD *)(a1 + 4) = v5 | math_ClampFloor32768Int(a2[2]) & 0xFFFE;
  a2a = 1;
  v6 = a2[38] != 0.0;
  *(_WORD *)(a1 + 6) = v6 | math_ClampFloor32768Int(a2[3]) & 0xFFFE;
  if (a2[27] == 0.0)
      a2a = 0;
  v8 = a2[39] != 0.0;
  v7 = a2[34] != 0.0;
  *(_DWORD *)(a1 + 8) = a2a | (2 * (v7 | (2 * v8))) | math_ClampFloor1677215(a2[4]) & 0xFFFFF8;
  v10 = a2[29] != 0.0;
  v9 = a2[28] != 0.0;
  *(_DWORD *)(a1 + 12) = v10 | (2 * v9) | math_ClampFloor1677215(a2[5]) & 0xFFFFFC;
  *(_WORD *)(a1 + 16) = math_ClampFloorNeg128(a2[6]);
  *(_BYTE *)(a1 + 18) = math_ClampFloor128(a2[13]);
  LOBYTE(v10) = math_ClampFloor32Int(a2[14]) & 0x3F;
  *(_BYTE *)(a1 + 19) = (math_100066A0(a2[32]) << 6) | v10;
  *(_BYTE *)(a1 + 11) = math_ClampFloor255(a2[15]);
  if (a2[19] == 0.0)
      v11 = 0;
  else
      v11 = 0x80;
  *(_BYTE *)(a1 + 20) = v11;
  v12 = v11 | (16 * ((__int64)a2[23] & 7));
  *(_BYTE *)(a1 + 20) = v12;
  if (a2[20] == 0.0)
      v13 = 0;
  else
      v13 = 8;
  *(_BYTE *)(a1 + 20) = v13 | v12;
  *(_BYTE *)(a1 + 20) = v13 | v12 | (__int64)a2[24] & 7;
  if (a2[21] == 0.0)
      v14 = 0;
  else
      v14 = 0x80;
  *(_BYTE *)(a1 + 21) = v14;
  v15 = v14 | (16 * ((__int64)a2[25] & 7));
  *(_BYTE *)(a1 + 21) = v15;
  if (a2[22] == 0.0)
      v16 = 0;
  else
      v16 = 8;
  *(_BYTE *)(a1 + 21) = v16 | v15;
  *(_BYTE *)(a1 + 21) = v16 | v15 | (__int64)a2[26] & 7;
  v17 = math_ClampFloor63(a2[31]) & 0x3F;
  result = math_100066A0(a2[33]) << 6;
  *(_BYTE *)(a1 + 15) = result | v17;
  return result;
}

//----- (10006EC0) --------------------------------------------------------
unsigned int __cdecl math_10006EC0(int a1, int *a2) {
  char v2;             // al
  __int16 v3;          // cx
  char v4;             // al
  __int16 v5;          // dx
  char v6;             // al
  __int16 v7;          // cx
  char v8;             // al
  __int16 v9;          // dx
  unsigned int v10;    // eax
  unsigned int v11;    // eax
  __int16 v12;         // ax
  __int16 v13;         // ax
  __int16 v14;         // ax
  char v15;            // al
  char v16;            // al
  char v17;            // al
  char v18;            // al
  char v19;            // al
  char v20;            // al
  double v21;          // st7
  double v22;          // st7
  double v23;          // st7
  double v24;          // st7
  double v25;          // st7
  int v26;             // eax
  unsigned __int8 v27; // al
  char v28;            // al
  char v29;            // al
  double v30;          // st7
  double v31;          // st7
  double v32;          // st7
  double v33;          // st7
  double v34;          // st7
  unsigned int result; // eax

  v2 = meth_10073C90(a2, 8);
  LOBYTE(v3) = 0;
  HIBYTE(v3) = v2;
  *(float *)a1 = math_mult_neg_1_32_32_32(v3);
  v4 = meth_10073C90(a2, 8);
  LOBYTE(v5) = 0;
  HIBYTE(v5) = v4;
  *(float *)(a1 + 4) = math_mult_neg_1_32_32_32(v5);
  v6 = meth_10073C90(a2, 8);
  LOBYTE(v7) = 0;
  HIBYTE(v7) = v6;
  *(float *)(a1 + 8) = math_mult_neg_1_32_32_32(v7);
  v8 = meth_10073C90(a2, 8);
  LOBYTE(v9) = 0;
  HIBYTE(v9) = v8;
  *(float *)(a1 + 12) = math_mult_neg_1_32_32_32(v9);
  v10 = meth_10073C90(a2, 17);
  *(float *)(a1 + 16) = math_mult_1_32_32_8(v10 << 7);
  v11 = meth_10073C90(a2, 17);
  *(float *)(a1 + 20) = math_mult_1_32_32_8(v11 << 7);
  v12 = meth_10073C90(a2, 15);
  *(float *)(a1 + 24) = math_mult_1_128(2 * v12);
  v13 = meth_10073C90(a2, 16);
  *(float *)(a1 + 28) = math_mult_1_256(v13);
  v14 = meth_10073C90(a2, 16);
  *(float *)(a1 + 32) = math_mult_1_256(v14);
  *(_DWORD *)(a1 + 36) = 0;
  v15 = meth_10073C90(a2, 5);
  *(float *)(a1 + 40) = math_mult_1_8(8 * v15);
  v16 = meth_10073C90(a2, 5);
  *(float *)(a1 + 44) = math_mult_1_8(8 * v16);
  v17 = meth_10073C90(a2, 5);
  *(float *)(a1 + 48) = math_mult_1_8(8 * v17);
  v18 = meth_10073C90(a2, 4);
  *(float *)(a1 + 52) = math_mult_1_8(16 * v18);
  v19 = meth_10073C90(a2, 4);
  *(float *)(a1 + 56) = math_10007250(4 * v19);
  v20 = meth_10073C90(a2, 4);
  v21 = math_100072A0(16 * v20);
  *(float *)(a1 + 64) = v21;
  *(float *)(a1 + 60) = v21;
  v22 = v21 - -35.0;
  if (v22 >= 360.0)
      v22 = v22 - 360.0;
  *(float *)(a1 + 72) = v22;
  *(float *)(a1 + 68) = v22;
  *(float *)(a1 + 76) = (float)meth_10073C90(a2, 1);
  *(float *)(a1 + 80) = (float)meth_10073C90(a2, 1);
  *(float *)(a1 + 84) = (float)meth_10073C90(a2, 1);
  *(float *)(a1 + 88) = (float)meth_10073C90(a2, 1);
  if (meth_10073C90(a2, 1))
      v23 = 128.0;
  else
      v23 = 0.0;
  *(float *)(a1 + 108) = v23;
  if (meth_10073C90(a2, 1))
      v24 = 1.0;
  else
      v24 = 0.0;
  *(float *)(a1 + 112) = v24;
  if (meth_10073C90(a2, 1))
      v25 = 1.0;
  else
      v25 = 0.0;
  *(float *)(a1 + 116) = v25;
  v26 = meth_10073C90(a2, 24);
  *(float *)(a1 + 120) = math_10007340(v26);
  v27 = meth_10073C90(a2, 6);
  *(float *)(a1 + 124) = math_100072C0(v27);
  v28 = meth_10073C90(a2, 2);
  *(float *)(a1 + 128) = math_100072E0(v28);
  v29 = meth_10073C90(a2, 2);
  *(float *)(a1 + 132) = math_100072E0(v29);
  if (meth_10073C90(a2, 1))
      v30 = 128.0;
  else
      v30 = 0.0;
  *(float *)(a1 + 136) = v30;
  if (meth_10073C90(a2, 1))
      v31 = 128.0;
  else
      v31 = 0.0;
  *(float *)(a1 + 140) = v31;
  if (meth_10073C90(a2, 1))
      v32 = 128.0;
  else
      v32 = 0.0;
  *(float *)(a1 + 144) = v32;
  if (meth_10073C90(a2, 1))
      v33 = 128.0;
  else
      v33 = 0.0;
  *(float *)(a1 + 148) = v33;
  if (meth_10073C90(a2, 1))
      v34 = 128.0;
  else
      v34 = 0.0;
  *(float *)(a1 + 152) = v34;
  result = meth_10073C90(a2, 1);
  if (result)
      *(float *)(a1 + 156) = 128.0;
  else
      *(float *)(a1 + 156) = 0.0;
  return result;
}
// 100072E0: using guessed type double __cdecl math_100072E0(char);

//----- (10007250) --------------------------------------------------------
// -1/64/2 = -0.0078125
double __cdecl math_10007250(char a1) {
  double result; // st7

  if ((a1 & 0x20) != 0)
      result = (double)(char)(a1 | 0xC0) * -0.0078125;
  else
      result = (double)(a1 & 0x3F) * -0.0078125;
  return result;
}

//----- (10007280) --------------------------------------------------------
double __cdecl math_mult_neg_1_32_32_32(__int16 a1) {
  return (double)a1 * -0.000030517578;
}

//----- (100072A0) --------------------------------------------------------
double __cdecl math_100072A0(unsigned __int8 a1) {
  return (double)a1 * 1.4101562;
}

//----- (100072C0) --------------------------------------------------------
double __cdecl math_100072C0(unsigned __int8 a1) {
  return 400.0 - (double)a1 * -120.63492;
}

//----- (100072E0) --------------------------------------------------------
double __cdecl math_100072E0(char a1) {
  switch (a1) {
  case 0:
      return 0.0;
  case 1:
      return 170.0;
  case 2:
      return 212.0;
  }
  return 255.0;
}
// 100072E0: using guessed type double __cdecl math_100072E0(char);

//----- (10007310) --------------------------------------------------------
double __cdecl math_mult_1_32_32_8(unsigned int a1) {
  return (double)a1 * 0.00012207031;
}

//----- (10007340) --------------------------------------------------------
double __cdecl math_10007340(int a1) {
  double result; // st7

  if ((a1 & 0x800000) != 0)
      result = (double)(int)(a1 | 0xFF000000) * 0.5;
  else
      result = (double)(a1 & 0xFFFFFF) * 0.5;
  return result;
}

//----- (10007380) --------------------------------------------------------
double __cdecl math_mult_1_128(__int16 a1) {
  return (double)a1 * 0.0078125;
}

//----- (100073A0) --------------------------------------------------------
double __cdecl math_mult_1_256(__int16 a1) {
  return (double)a1 * 0.00390625;
}

//----- (100073C0) --------------------------------------------------------
double __cdecl math_mult_1_8(char a1) {
  return (double)a1 * 0.125;
}

//----- (100073E0) --------------------------------------------------------
unsigned int __cdecl math_100073E0(float *a1, float *a2, int *a3) {
  char v3;             // al
  __int16 v4;          // cx
  char v5;             // al
  __int16 v6;          // dx
  char v7;             // al
  __int16 v8;          // cx
  char v9;             // al
  __int16 v10;         // dx
  unsigned int v11;    // esi
  __int16 v12;         // ax
  int v13;             // ecx
  int v14;             // esi
  unsigned int v15;    // esi
  __int16 v16;         // ax
  int v17;             // ecx
  int v18;             // esi
  __int16 v19;         // si
  __int16 v20;         // ax
  int v21;             // ecx
  __int16 v22;         // si
  int v23;             // esi
  __int16 v24;         // ax
  int v25;             // ecx
  int v26;             // esi
  unsigned __int8 v27; // al
  char v28;            // al
  char v29;            // al
  double v30;          // st7
  double v31;          // st7
  double v32;          // st7
  double v33;          // st7
  double v34;          // st7
  unsigned int result; // eax

  v3 = meth_10073C90(a3, 8);
  LOBYTE(v4) = 0;
  HIBYTE(v4) = v3;
  *a1 = math_mult_neg_1_32_32_32(v4);
  v5 = meth_10073C90(a3, 8);
  LOBYTE(v6) = 0;
  HIBYTE(v6) = v5;
  a1[1] = math_mult_neg_1_32_32_32(v6);
  v7 = meth_10073C90(a3, 8);
  LOBYTE(v8) = 0;
  HIBYTE(v8) = v7;
  a1[2] = math_mult_neg_1_32_32_32(v8);
  v9 = meth_10073C90(a3, 8);
  LOBYTE(v10) = 0;
  HIBYTE(v10) = v9;
  a1[3] = math_mult_neg_1_32_32_32(v10);
  v11 = (unsigned int)math_ClampFloor1677215(a2[4]) >> 7;
  v12 = meth_10073C90(a3, 14);
  v13 = v12 & 0x3000;
  if ((v12 & 0x3000) != 0) {
      if (v13 == 4096) {
          v14 = (v11 & 0x1F000) + 4096;
      } else if (v13 == 0x2000) {
          v14 = (v11 & 0x1F000) + 0x2000;
      } else {
          v14 = (v11 & 0x1F000) - 4096;
      }
  } else {
      v14 = v11 & 0x1F000;
  }
  a1[4] = math_mult_1_32_32_8((v12 & 0xFFF | (unsigned int)v14) << 7);
  v15 = (unsigned int)math_ClampFloor1677215(a2[5]) >> 7;
  v16 = meth_10073C90(a3, 14);
  v17 = v16 & 0x3000;
  if ((v16 & 0x3000) != 0) {
      if (v17 == 4096) {
          v18 = (v15 & 0x1F000) + 4096;
      } else if (v17 == 0x2000) {
          v18 = (v15 & 0x1F000) + 0x2000;
      } else {
          v18 = (v15 & 0x1F000) - 4096;
      }
  } else {
      v18 = v15 & 0x1F000;
  }
  a1[5] = math_mult_1_32_32_8((v16 & 0xFFF | (unsigned int)v18) << 7);
  v19 = (__int16)math_ClampFloorNeg128(a2[6]) >> 1;
  v20 = meth_10073C90(a3, 11);
  v21 = v20 & 0x600;
  if ((v20 & 0x600) != 0) {
      if (v21 == 512) {
          v22 = (v19 & 0x7E00) + 512;
      } else if (v21 == 1024) {
          v22 = (v19 & 0x7E00) + 1024;
      } else {
          v22 = (v19 & 0x7E00) - 512;
      }
  } else {
      v22 = v19 & 0x7E00;
  }
  a1[6] = math_mult_1_128(2 * (v20 & 0x1FFu | v22));
  v23 = math_ClampFloor8388607(a2[30]);
  v24 = meth_10073C90(a3, 9);
  v25 = v24 & 0x180;
  if ((v24 & 0x180) != 0) {
      if (v25 == 128) {
          v26 = (v23 & 0xFFFF80) + 128;
      } else if (v25 == 256) {
          v26 = (v23 & 0xFFFF80) + 256;
      } else {
          v26 = (v23 & 0xFFFF80) - 128;
      }
  } else {
      v26 = v23 & 0xFFFF80;
  }
  a1[30] = math_10007340(v24 & 0x7F | (unsigned int)v26);
  v27 = meth_10073C90(a3, 6);
  a1[31] = math_100072C0(v27);
  v28 = meth_10073C90(a3, 2);
  a1[32] = math_100072E0(v28);
  v29 = meth_10073C90(a3, 2);
  a1[33] = math_100072E0(v29);
  if (meth_10073C90(a3, 1))
      v30 = 128.0;
  else
      v30 = 0.0;
  a1[34] = v30;
  if (meth_10073C90(a3, 1))
      v31 = 128.0;
  else
      v31 = 0.0;
  a1[35] = v31;
  if (meth_10073C90(a3, 1))
      v32 = 128.0;
  else
      v32 = 0.0;
  a1[36] = v32;
  if (meth_10073C90(a3, 1))
      v33 = 128.0;
  else
      v33 = 0.0;
  a1[37] = v33;
  if (meth_10073C90(a3, 1))
      v34 = 128.0;
  else
      v34 = 0.0;
  a1[38] = v34;
  result = meth_10073C90(a3, 1);
  if (result)
      a1[39] = 128.0;
  else
      a1[39] = 0.0;
  return result;
}
// 100072E0: using guessed type double __cdecl math_100072E0(char);

//----- (10007730) --------------------------------------------------------
int __cdecl math_10007730(int a1, int a2) {
  double v2;  // st7
  double v3;  // st7
  double v4;  // st7
  double v5;  // st7
  int result; // eax

  *(float *)a1 = math_mult_neg_1_32_32_32(*(_WORD *)a2);
  *(float *)(a1 + 4) = math_mult_neg_1_32_32_32(*(_WORD *)(a2 + 2));
  *(float *)(a1 + 8) = math_mult_neg_1_32_32_32(*(_WORD *)(a2 + 4));
  *(float *)(a1 + 12) = math_mult_neg_1_32_32_32(*(_WORD *)(a2 + 6));
  *(float *)(a1 + 16) = math_mult_1_32_32_8(*(_DWORD *)(a2 + 8) & 0xFFFFFF);
  *(float *)(a1 + 20) = math_mult_1_32_32_8(*(_DWORD *)(a2 + 12) & 0xFFFFFF);
  *(float *)(a1 + 24) = math_mult_1_128(*(_WORD *)(a2 + 16));
  *(float *)(a1 + 52) = math_mult_1_8(*(_BYTE *)(a2 + 18));
  *(float *)(a1 + 56) = math_10007250(*(_BYTE *)(a2 + 19) & 0x3F);
  *(float *)(a1 + 128) = math_100072E0((*(char *)(a2 + 19) >> 6) & 3);
  v2 = math_100072A0(*(_BYTE *)(a2 + 11));
  *(float *)(a1 + 64) = v2;
  *(float *)(a1 + 60) = v2;
  v3 = v2 - -35.0;
  if (v3 >= 360.0)
      v3 = v3 - 360.0;
  *(float *)(a1 + 72) = v3;
  *(float *)(a1 + 68) = v3;
  *(float *)(a1 + 76) = (float)(*(_BYTE *)(a2 + 20) >> 7);
  *(float *)(a1 + 92) = (float)((*(_BYTE *)(a2 + 20) >> 4) & 7);
  *(float *)(a1 + 80) = (float)((*(_BYTE *)(a2 + 20) & 8) != 0);
  *(float *)(a1 + 96) = (float)(*(_BYTE *)(a2 + 20) & 7);
  *(float *)(a1 + 84) = (float)(*(_BYTE *)(a2 + 21) >> 7);
  *(float *)(a1 + 100) = (float)((*(_BYTE *)(a2 + 21) >> 4) & 7);
  *(float *)(a1 + 88) = (float)((*(_BYTE *)(a2 + 21) & 8) != 0);
  *(float *)(a1 + 104) = (float)(*(_BYTE *)(a2 + 21) & 7);
  if ((*(_BYTE *)(a2 + 8) & 1) != 0)
      *(_DWORD *)(a1 + 108) = 1124073472;
  else
      *(_DWORD *)(a1 + 108) = 0;
  if ((*(_BYTE *)(a2 + 12) & 2) != 0)
      v4 = 1.0;
  else
      v4 = 0.0;
  *(float *)(a1 + 112) = v4;
  if ((*(_BYTE *)(a2 + 12) & 1) != 0)
      v5 = 1.0;
  else
      v5 = 0.0;
  *(float *)(a1 + 116) = v5;
  *(float *)(a1 + 124) = math_100072C0(*(_BYTE *)(a2 + 15) & 0x3F);
  *(float *)(a1 + 132) = math_100072E0(*(_BYTE *)(a2 + 15) >> 6);
  if ((*(_BYTE *)(a2 + 8) & 2) != 0) {
      result = 1124073472;
      *(_DWORD *)(a1 + 136) = 1124073472;
  } else {
      *(_DWORD *)(a1 + 136) = 0;
      result = 1124073472;
  }
  if ((*(_BYTE *)a2 & 1) != 0)
      *(_DWORD *)(a1 + 140) = 1124073472;
  else
      *(_DWORD *)(a1 + 140) = 0;
  if ((*(_BYTE *)(a2 + 2) & 1) != 0)
      *(_DWORD *)(a1 + 144) = 1124073472;
  else
      *(_DWORD *)(a1 + 144) = 0;
  if ((*(_BYTE *)(a2 + 4) & 1) != 0)
      *(_DWORD *)(a1 + 148) = 1124073472;
  else
      *(_DWORD *)(a1 + 148) = 0;
  if ((*(_BYTE *)(a2 + 6) & 1) != 0)
      *(_DWORD *)(a1 + 152) = 1124073472;
  else
      *(_DWORD *)(a1 + 152) = 0;
  if ((*(_BYTE *)(a2 + 8) & 4) != 0)
      *(float *)(a1 + 156) = 128.0;
  else
      *(float *)(a1 + 156) = 0.0;
  return result;
}
// 100072E0: using guessed type double __cdecl math_100072E0(char);

//----- (100079E0) --------------------------------------------------------
int __cdecl math_100079E0(int a1, float a2, int a3, int a4) {
  int v4;     // ebp
  int v5;     // ecx
  float *v6;  // eax
  int v7;     // edx
  int v8;     // edi
  double v9;  // st7
  float *v10; // eax
  int v11;    // edi
  double v12; // st7
  float *v13; // eax
  int v14;    // esi
  double v15; // st7
  int result; // eax

  if (a2 > 0.0) {
      if (a2 >= 10.0)
          a2 = 10.0;
  } else {
      a2 = 0.0;
  }
  if ((*(float *)a3 < 0.0 || *(float *)a4 >= 0.0 || *(float *)a3 - *(float *)a4 < 1.0) &&
      (*(float *)a4 < 0.0 || *(float *)a3 >= 0.0 || *(float *)a4 - *(float *)a3 < 1.0)) {
      v4 = a1;
      v5 = a4 - a3;
      v10 = (float *)a3;
      v7 = a1 - a3;
      v11 = 4;
      do {
          v12 = (*(float *)((char *)v10 + v5) - *v10) * a2;
          ++v10;
          --v11;
          *(float *)((char *)v10 + v7 - 4) = v12 + *(v10 - 1);
      } while (v11);
  } else {
      v4 = a1;
      v5 = a4 - a3;
      v6 = (float *)a3;
      v7 = a1 - a3;
      v8 = 4;
      do {
          v9 = (-*(float *)((char *)v6 + v5) - *v6) * a2;
          ++v6;
          --v8;
          *(float *)((char *)v6 + v7 - 4) = v9 + *(v6 - 1);
      } while (v8);
  }
  v13 = (float *)(a3 + 16);
  v14 = 36;
  do {
      v15 = (*(float *)((char *)v13 + v5) - *v13) * a2;
      ++v13;
      --v14;
      *(float *)((char *)v13 + v7 - 4) = v15 + *(v13 - 1);
  } while (v14);
  result = *(_DWORD *)(a4 + 156);
  *(_DWORD *)(v4 + 156) = result;
  return result;
}

//----- (10007B10) --------------------------------------------------------
int CheckPreviousApp() {
  HWND hwnd_1; // esi
  HWND fgHwnd; // eax
  DWORD pid;   // ebx
  HWND hwnd;   // esi

  hwnd_1 = FindWindowA(kClassName, kWindowName);
  if (!hwnd_1)
      return 1;
  fgHwnd = GetForegroundWindow();
  pid = GetWindowThreadProcessId(fgHwnd, 0);
  if (GetWindowThreadProcessId(hwnd_1, 0) != pid || IsIconic(hwnd_1)) {
      hwnd = GetLastActivePopup(hwnd_1);
      if (IsIconic(hwnd))
          ShowWindow(hwnd, SW_RESTORE);
      BringWindowToTop(hwnd);
      SetForegroundWindow(hwnd);
  }
  OutputDebugStringA(kDebugStrCheckPreviousApp);
  return 0;
}

//----- (10007BA0) --------------------------------------------------------
void SetupGMemoryStatus() {
  struct _MEMORYSTATUS GMemoryStatus; // [esp+0h] [ebp-20h] BYREF

  GMemoryStatus.dwLength = 32;
  GlobalMemoryStatus(&GMemoryStatus);
  gTotalPhys = GMemoryStatus.dwTotalPhys;
}
// 1022B348: using guessed type int gTotalPhys;

//----- (10007BD0) --------------------------------------------------------
void __cdecl ReadSettingsParseCmdLine(char *cmdLine) {
  CHK_File *chkfpBossRallyINI; // esi
  char *cmdp0;                 // edx
  char *cmdp1;                 // edx
  char *cmdp2;                 // eax
  char *cmpd3;                 // eax
  char *v6;                    // edx
  char *v7;                    // edx
  char *v8;                    // edx
  char *v9;                    // edx
  char *v10;                   // edx
  char *v11;                   // edx
  char *v12;                   // edx
  char *v13;                   // edx
  char *v14;                   // edx
  char *v15;                   // edx
  char *v16;                   // edx
  char *v17;                   // edx
  char *v18;                   // edx
  CHK_File *pfp;               // [esp+10h] [ebp-104h]
  char readBuff[256];          // [esp+14h] [ebp-100h] BYREF

  strcpy(gBossRallyIniPath, gInstallPath);
  strcat(gBossRallyIniPath, kBossRallyIni);
  if (CHK_FileExists(gBossRallyIniPath)) {
      chkfpBossRallyINI = CHK_FReadOpen(gBossRallyIniPath);
      for (pfp = chkfpBossRallyINI; CHK_ReadLine(readBuff, 256, &pfp->pfil);
           chkfpBossRallyINI = pfp) {
          if (!strncmp(readBuff, kNetworkPlayEq, 0xCu)) {
              gNetworkPlay = atoi(&readBuff[0xC]);
          } else if (!strncmp(readBuff, kChosenTrackEq, 0xCu)) {
              gChosenTrack = atoi(&readBuff[0xC]);
          } else if (!strncmp(readBuff, kChosenCarEq, 0xAu)) {
              gChosenCar = atoi(&readBuff[0xA]);
          } else if (!strncmp(readBuff, kChosenWeatherEq, 0xEu)) {
              gChosenWeather0 = atoi(&readBuff[0xE]);
          } else if (!strncmp(readBuff, kGameModeeEq, 9u)) {
              gGameMode = atoi(&readBuff[9]);
          } else if (!strncmp(readBuff, kReadJoystickEq, 0xDu)) {
              gConfigJoystickIndex = atoi(&readBuff[0xD]);
              switch (gConfigJoystickIndex) {
              case 1:
                  gConfigJoystickPtr = &gConfig.joystick1;
                  break;
              case 2:
                  gConfigJoystickPtr = &gConfig.joystick2;
                  break;
              case 3:
                  gConfigJoystickPtr = &gConfig.joystick3;
                  break;
              default:
                  gConfigJoystickPtr = (BossRallyConfigJoystick *)&gConfig;
                  break;
              }
          } else if (!strncmp(readBuff, kHandlingTypeEq, 0xDu)) {
              gHandlingType = atoi(&readBuff[13]);
          } else if (!strncmp(readBuff, kSuspensionTypeEq, 0xFu)) {
              gSuspensionType = atoi(&readBuff[15]);
          } else if (!strncmp(readBuff, kTireTypeEq, 9u)) {
              gTireType = atoi(&readBuff[9]);
          } else if (!strncmp(readBuff, kTransmissionTypeEq, 0x11u)) {
              gTransmissionType = atoi(&readBuff[17]);
          } else if (!strncmp(readBuff, kTrackDirEq, 9u)) {
              strcpy(kTracksSlash, &readBuff[9]);
              gTrackDir[strlen(kTracksSlash) + 1] = 0;
          } else if (!strncmp(readBuff, kCarDirEq, 7u)) {
              strcpy(kCarsSlash, &readBuff[7]);
              gCarDir[strlen(kCarsSlash) + 1] = 0;
          } else if (!strncmp(readBuff, kSFXDirEq, 7u)) {
              strcpy(kSfxSlash, &readBuff[7]);
              *((_BYTE *)&gSfxDir + strlen(kSfxSlash) + 3) = 0;
          } else if (!strncmp(readBuff, kInterpolateEq, 0xCu)) {
              gInterpolate = atoi(&readBuff[12]);
          } else if (!strncmp(readBuff, kSpeedSensitiveEq, 0xFu)) {
              gSpeedSensitive = atoi(&readBuff[15]);
          } else if (!strncmp(readBuff, kD3DDrawCarShadowEq, 0x11u)) {
              gD3dDrawCarShadow = atoi(&readBuff[17]) == 0;
          } else if (!strncmp(readBuff, kRunBenchmarkEq, 0xDu)) {
              gRunBenchmark = atoi(&readBuff[13]);
          } else if (!strncmp(readBuff, kPlayMusicEq, 0xAu)) {
              gPlayMusic = atoi(&readBuff[10]);
          } else if (!strncmp(readBuff, kPlaySFXEq, 8u)) {
              gPlaysfx = atoi(&readBuff[8]);
          } else if (!strncmp(readBuff, kD3DAlphaCompareEq, 0x10u)) {
              gD3dalphacompar = atoi(&readBuff[16]);
          } else if (!strncmp(readBuff, kD3DAlwaysSquareTextures, 0x18u)) {
              gD3DAlwaysSquareTextures = atoi(&readBuff[24]);
          } else if (!strncmp(readBuff, kD3DClearZBufferEq, 0x10u)) {
              gD3DClearZBuffer = atoi(&readBuff[16]);
          } else if (!strncmp(readBuff, kD3DWaitCanFlipEq, 0xFu)) {
              gD3DWaitCanFlip = atoi(&readBuff[15]);
          } else if (!strncmp(readBuff, kD3DWaitFlipDoneEq, 0x10u)) {
              gD3DWaitFlipDone = atoi(&readBuff[16]);
          } else if (!strncmp(readBuff, kD3DInvSrcAlphaEq, 0xFu)) {
              gD3DInvSrcAlpha = atoi(&readBuff[15]) != 0 ? 6 : 2;
          }
      }
      CHK_FClose(chkfpBossRallyINI);
  }
  if (cmdLine && strlen(cmdLine)) {
      cmdp0 = strstr(cmdLine, kNetworkPlayEq);
      if (cmdp0)
          gNetworkPlay = atoi(&cmdp0[strlen(kNetworkPlayEq)]);
      cmdp1 = strstr(cmdLine, kSZPlayerNameEq);
      if (cmdp1) {
          strcpy(dplay4aShortName, &cmdp1[strlen(kSZPlayerNameEq)]);
          cmdp2 = strchr(dplay4aShortName, 32);
          if (cmdp2)
              *cmdp2 = 0;
          cmpd3 = strchr(dplay4aShortName, 10);
          if (cmpd3)
              *cmpd3 = 0;
      }
      v6 = strstr(cmdLine, kChosenTrackEq);
      if (v6)
          gChosenTrack = atoi(&v6[strlen(kChosenTrackEq)]);
      v7 = strstr(cmdLine, kChosenCarEq);
      if (v7)
          gChosenCar = atoi(&v7[strlen(kChosenCarEq)]);
      v8 = strstr(cmdLine, kChosenWeatherEq);
      if (v8)
          gChosenWeather0 = atoi(&v8[strlen(kChosenWeatherEq)]);
      v9 = strstr(cmdLine, kGameModeeEq);
      if (v9)
          gGameMode = atoi(&v9[strlen(kGameModeeEq)]);
      v10 = strstr(cmdLine, kReadJoystickEq);
      if (v10) {
          gConfigJoystickIndex = atoi(&v10[strlen(kReadJoystickEq)]);
          switch (gConfigJoystickIndex) {
          case 1:
              gConfigJoystickPtr = &gConfig.joystick1;
              break;
          case 2:
              gConfigJoystickPtr = &gConfig.joystick2;
              break;
          case 3:
              gConfigJoystickPtr = &gConfig.joystick3;
              break;
          default:
              gConfigJoystickPtr = (BossRallyConfigJoystick *)&gConfig;
              break;
          }
      }
      v11 = strstr(cmdLine, kHandlingTypeEq);
      if (v11)
          gHandlingType = atoi(&v11[strlen(kHandlingTypeEq)]);
      v12 = strstr(cmdLine, kSuspensionTypeEq);
      if (v12)
          gSuspensionType = atoi(&v12[strlen(kSuspensionTypeEq)]);
      v13 = strstr(cmdLine, kTireTypeEq);
      if (v13)
          gTireType = atoi(&v13[strlen(kTireTypeEq)]);
      v14 = strstr(cmdLine, kTransmissionTypeEq);
      if (v14)
          gTransmissionType = atoi(&v14[strlen(kTransmissionTypeEq)]);
      v15 = strstr(cmdLine, SubStr);
      if (v15)
          gCPlayers = atoi(&v15[strlen(SubStr)]);
      v16 = strstr(cmdLine, aBcar);
      if (v16)
          gBcar = atoi(&v16[strlen(aBcar)]);
      v17 = strstr(cmdLine, aBtire);
      if (v17)
          gBtire = atoi(&v17[strlen(aBtire)]);
      v18 = strstr(cmdLine, aBsuspension);
      if (v18)
          gBsuspension = atoi(&v18[strlen(aBsuspension)]);
  }
}
// 100940A4: using guessed type int gPlayMusic;
// 10094350: using guessed type int gHandlingType;
// 10094354: using guessed type int gTransmissionType;
// 10094358: using guessed type int gSuspensionType;
// 100A62F8: using guessed type int gD3DWaitCanFlip;
// 100A62FC: using guessed type int gD3DWaitFlipDone;
// 100A66EC: using guessed type int gInterpolate;
// 100A79D8: using guessed type int gD3DInvSrcAlpha;
// 100AA720: using guessed type int gD3dalphacompar;
// 100B3664: using guessed type int gSpeedSensitive;
// 100B380C: using guessed type int gChosenTrack;
// 100B5DE8: using guessed type int gPlaysfx;
// 100B8534: using guessed type char *gSfxDir;
// 102212C8: using guessed type int gCPlayers;
// 10221320: using guessed type int gBcar;
// 1022AF0C: using guessed type int gBsuspension;
// 1022AF10: using guessed type int gBtire;
// 1022AF18: using guessed type int gNetworkPlay;
// 1022B34C: using guessed type int gChosenCar;
// 1022B350: using guessed type int gChosenWeather0;
// 1039B6C8: using guessed type int gD3dDrawCarShadow;
// 104C5168: using guessed type int gD3DClearZBuffer;
// 10575420: using guessed type int gD3DAlwaysSquareTextures;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 118ABDC4: using guessed type int gRunBenchmark;

//----- (100085C0) --------------------------------------------------------
Pod *__thiscall meth_Pod_100085C0(Pod *this, char a2) {
  meth_Pod_SetVtbl(this);
  if ((a2 & 1) != 0)
      operator delete(this);
  return this;
}

//----- (100085E0) --------------------------------------------------------
void __thiscall meth_Pod_SetVtbl(Pod *this) {
  this->lpVtbl = &gPodVtbl;
  meth_DebugPrint(&this->field_4);
}

//----- (100085F0) --------------------------------------------------------
char __thiscall meth_Pod_CleanupName(Pod *this, const char *a1, char *buff) {
  unsigned int i; // esi
  char result;    // al

  basename(a1, buff);
  if (strlen(buff) > 0x40)
      s_noreturn_writeToBufferExit(kErrorMessageCleanupNameNameTooLong);
  for (i = 0; i < 0x40; ++i) // uppercase every letter
  {
      result = buff[i];
      if (!result)
          break;
      result = toupper(result);
      buff[i] = result;
  }
  if (i < 0x40) // set the rest of the array to 0
  {
      result = 0;
      memset(&buff[i], 0, 0x40 - i);
  }
  return result;
}

//----- (10008670) --------------------------------------------------------
int __thiscall meth_Pod_10008670(Pod *this, int a2) {
  char *v3;        // ecx
  unsigned int v4; // esi
  int result;      // eax
  _DWORD *i;       // ecx
  int v7[16];      // [esp+10h] [ebp-40h] BYREF

  this->lpVtbl->meth1(this, a2, v7);
  v3 = (char *)this->unkInstance;
  v4 = this->header.m_cNumPods;
  result = 0;
  if (!v4)
      return -1;
  for (i = v3 + 16; *(i - 1) != v7[0] || *i != v7[1] || i[1] != v7[2] || i[2] != v7[3] ||
                    i[3] != v7[4] || i[4] != v7[5] || i[5] != v7[6] || i[6] != v7[7] ||
                    i[7] != v7[8] || i[8] != v7[9] || i[9] != v7[10] || i[10] != v7[11] ||
                    i[11] != v7[12] || i[12] != v7[13] || i[13] != v7[14] || i[14] != v7[15];
       i += 19) {
      if (++result >= v4)
          return -1;
  }
  return result;
}

//----- (10008750) --------------------------------------------------------
int __thiscall meth_Pod_GetNumForNameWrapper(Pod *this, char *ArgList) {
  int result; // eax

  result = this->lpVtbl->GetNumForName(this, ArgList);
  if (result == -1)
      s_noreturn_writeToBufferExit("GetNumForName: %s not found!", ArgList);
  return result;
}

//----- (10008780) --------------------------------------------------------
int __thiscall meth_Pod_GetPodLength(Pod *this, unsigned int argList) {
  if (argList >= this->header.m_cNumPods)
      s_noreturn_writeToBufferExit("GetPodLength: %i >= m_cNumPods", argList);
  return *((_DWORD *)this->unkInstance + 19 * argList + 1);
}

//----- (100087B0) --------------------------------------------------------
size_t __thiscall meth_Pod_ReadPod(Pod *this, unsigned int argList, void *buffer) {
  unsigned int *offsetAndElementCount; // edi

  if (argList >= this->header.m_cNumPods)
      s_noreturn_writeToBufferExit("ReadPod: %i >= cNumPods", argList);
  offsetAndElementCount = (unsigned int *)((char *)this->unkInstance + 76 * argList);
  fseek(this->fp, *offsetAndElementCount, SEEK_SET);
  return freadLockHandleError(this->fp, buffer, offsetAndElementCount[1]);
}

//----- (10008810) --------------------------------------------------------
int __thiscall meth_Pod_LoadPod(Pod *this, unsigned int ArgList) {
  PodVtbl *v3; // edi
  size_t v4;   // eax
  int v5;      // ebx

  if (ArgList >= this->header.m_cNumPods)
      s_noreturn_writeToBufferExit("LoadPod: %i >= m_cNumPods", ArgList);
  v3 = this->lpVtbl;
  v4 = this->lpVtbl->meth5(this, ArgList);
  v5 = operator new(v4);
  v3->meth6(this, ArgList, v5);
  return v5;
}

//----- (10008850) --------------------------------------------------------
int __thiscall meth_Pod_LoadPod0(Pod *this, unsigned int argList, int a3) {
  if (argList >= this->header.m_cNumPods)
      s_noreturn_writeToBufferExit("LoadPod: %i >= m_cNumPods", argList);
  this->lpVtbl->meth6(this, argList, a3);
  return a3;
}

//----- (10008890) --------------------------------------------------------
int __thiscall meth_Pod_10008890(Pod *this, int a2) {
  PodVtbl *v3; // edi
  int v4;      // eax

  v3 = this->lpVtbl;
  v4 = ((int(__thiscall *)(Pod *, int))this->lpVtbl->meth4)(this, a2);
  return v3->meth10(this, (char *)v4);
}

//----- (100088B0) --------------------------------------------------------
int __thiscall meth_Pod_100088B0(Pod *this, int a2, int a3) {
  PodVtbl *v4; // edi
  int v5;      // eax

  v4 = this->lpVtbl;
  v5 = this->lpVtbl->meth4(this, a2, a3);
  return v4->meth8(this, v5);
}

//----- (100088D0) --------------------------------------------------------
size_t __thiscall meth_Pod_ReadPodFile(Pod *this) {
  char *v2;         // ebp
  FILE *fp;         // eax
  void *v4;         // eax
  int v5;           // edx
  int elementCount; // [esp-4h] [ebp-14h]

  v2 = this->filename;
  fp = fopenReadBinary(this->filename);
  this->fp = fp;
  freadLockHandleError(fp, &this->header, 0x10u);
  if (strncmp(this->header.magic, aPod, 3u))
      s_noreturn_writeToBufferExit("%s is not a valid POD file", v2);
  elementCount = 76 * this->header.m_cNumPods;
  this->elementCount = elementCount;
  v4 = (void *)operator new(elementCount);
  v5 = this->header.last;
  this->unkInstance = v4;
  fseek(this->fp, v5, 0);
  return freadLockHandleError(this->fp, this->unkInstance, this->elementCount);
}

//----- (10008970) --------------------------------------------------------
int __thiscall meth_Pod_CleanUpPod(Pod *this) {
  int result; // eax

  if (this->fp)
      fclose(this->fp);
  if (this->unkInstance)
      operator delete(this->unkInstance);
  result = 0;
  this->unkInstance = 0;
  this->fp = 0;
  this->elementCount = 0;
  *(_DWORD *)this->header.magic = 0;
  this->header.field_4 = 0;
  this->header.m_cNumPods = 0;
  this->header.last = 0;
  memset(this->filename, 0, 0x400u);
  return result;
}

//----- (100089C0) --------------------------------------------------------
int __stdcall meth_Pod_100089C0(char *FileName) {
  int result; // eax

  dword_1027735C = fopenWriteBinary(FileName);
  fseek(dword_1027735C, 16, 0);
  result = 0;
  memset(&unk_1022B358, 0, 0x4C000u);
  dword_10277358 = 0;
  return result;
}
// 10277358: using guessed type int dword_10277358;

//----- (10008A00) --------------------------------------------------------
size_t __thiscall meth_Pod_Add(Pod *this, const char *a2, int a3, int a4, char a5, char a6) {
  int v6;   // edx
  char *v7; // esi

  v6 = 19 * dword_10277358++;
  v7 = (char *)&unk_1022B358 + 4 * v6;
  *(_DWORD *)v7 = 0;
  basename(a2, v7 + 12);
  if (strlen(v7 + 12) > 0x40)
      s_noreturn_writeToBufferExit(aAddNameIsTooLo);
  _strupr(v7 + 12);
  *(_DWORD *)v7 = ftell(dword_1027735C);
  v7[8] = a5;
  *((_DWORD *)v7 + 1) = a4;
  v7[9] = a6;
  return fwriteLockHandleError(dword_1027735C, (void *)a3, a4);
}
// 10277358: using guessed type int dword_10277358;

//----- (10008AA0) --------------------------------------------------------
int __thiscall meth_Pod_10008AA0(Pod *this) {
  int v1;        // edi
  char magic[4]; // [esp+8h] [ebp-10h] BYREF
  int v4;        // [esp+Ch] [ebp-Ch]
  int v5;        // [esp+10h] [ebp-8h]
  int v6;        // [esp+14h] [ebp-4h]

  v1 = ftell(dword_1027735C);
  fwriteLockHandleError(dword_1027735C, &unk_1022B358, 76 * dword_10277358);
  qmemcpy(magic, "POD", 3);
  v4 = 500;
  v5 = dword_10277358;
  v6 = v1;
  fseek(dword_1027735C, 0, 0);
  fwriteLockHandleError(dword_1027735C, magic, 0x10u);
  return fclose(dword_1027735C);
}
// 10277358: using guessed type int dword_10277358;

//----- (10008B40) --------------------------------------------------------
void __thiscall meth_Pod_SetPodFilename(Pod *this, const char *a2) {
  if (a2)
      strcpy(this->filename, a2);
}

//----- (10008B90) --------------------------------------------------------
unsigned int __stdcall basename(const char *path, char *out) {
  const char *p;       // edi
  unsigned int result; // eax

  for (p = &path[strlen(path) - 1]; p != path; --p) {
      if (*(p - 1) == '\\')
          break;
  }
  result = strlen(p) + 1;
  qmemcpy(out, p, result);
  return result;
}

//----- (10008BE0) --------------------------------------------------------
FILE *__stdcall fopenWriteBinary(char *FileName) {
  FILE *result; // eax
  int *v2;      // eax
  char *v3;     // eax

  result = fopen(FileName, kFileModeWriteBinary);
  if (!result) {
      v2 = _errno();
      v3 = strerror(*v2);
      s_noreturn_writeToBufferExit("Error opening %s: %s", FileName, v3);
  }
  return result;
}

//----- (10008C20) --------------------------------------------------------
FILE *__stdcall fopenReadBinary(char *FileName) {
  FILE *result; // eax
  int *v2;      // eax
  char *v3;     // eax

  result = fopen(FileName, kFileModeReadBinary);
  if (!result) {
      v2 = _errno();
      v3 = strerror(*v2);
      s_noreturn_writeToBufferExit("Error opening %s: %s", FileName, v3);
  }
  return result;
}

//----- (10008C60) --------------------------------------------------------
size_t __stdcall freadLockHandleError(FILE *fp, void *buffer, size_t elementCount) {
  size_t result; // eax

  result = filesystem_freadLock(buffer, 1u, elementCount, fp);
  if (result != elementCount)
      s_noreturn_writeToBufferExit(aFileReadFailur);
  return result;
}

//----- (10008C90) --------------------------------------------------------
size_t __stdcall fwriteLockHandleError(FILE *Stream, void *Buffer, size_t ElementCount) {
  size_t result; // eax

  result = filesystem_fwriteLock(Buffer, 1u, ElementCount, Stream);
  if (result != ElementCount)
      s_noreturn_writeToBufferExit(aFileReadFailur);
  return result;
}

//----- (10008CC0) --------------------------------------------------------
void __noreturn s_noreturn_writeToBufferExit(char *format, ...) {
  char *buff; // eax
  va_list va; // [esp+8h] [ebp+8h] BYREF

  va_start(va, format);
  buff = (char *)operator new(0x400u);
  vsprintf(buff, format, va);
  exit(1);
}

//----- (10008CF0) --------------------------------------------------------
void __cdecl __noreturn s_noreturn_10008CF0(char *message) {
  _DWORD *v1;      // eax
  _DWORD v2[8192]; // [esp+8h] [ebp-8000h] BYREF

  sub_10016990();
  dword_106C0680 = (int)v2;
  sub_10019260();
  Set_byte_104B035C_To2();
  sub_100192F0(20);
  text_10019300(message, gWidth / 2, 220);
  v1 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v1 = -1207959552;
  v1[1] = 0;
  dword_10B501D0(v2);
  while (!GetAsyncKeyState(27))
      Sleep(1u);
  cleanUpAndExitWithCode(1);
}
// 100A81C0: using guessed type int gWidth;
// 106C0680: using guessed type int dword_106C0680;
// 10B501D0: using guessed type int (__cdecl *dword_10B501D0)(_DWORD);

//----- (10008D90) --------------------------------------------------------
HRESULT __cdecl SetupGDevCaps(IDirect3DDevice2 *dev2) {
  IDirect3DDevice2Vtbl *d3dDev2Vtbl; // ecx

  memset(&g_HWCaps, 0, 0xFCu);
  memset(&g_HELCaps, 0, 0xFCu);
  d3dDev2Vtbl = dev2->lpVtbl;
  g_HWCaps.dwSize = 0xFC;
  g_HWCaps.dpcTriCaps.dwSize = 0x38;
  g_HELCaps.dwSize = 0xFC;
  g_HELCaps.dpcTriCaps.dwSize = 0x38;
  return d3dDev2Vtbl->GetCaps(dev2, &g_HWCaps, &g_HELCaps);
}

//----- (10008E00) --------------------------------------------------------
int sub_10008E00() {
  int result; // eax

  result = 0;
  *(_QWORD *)&stru_10277680 = 0i64;
  *((_QWORD *)&stru_10277680 + 1) = 0i64;
  *((_QWORD *)&stru_10277680 + 2) = 0i64;
  *((_QWORD *)&stru_10277680 + 3) = 0i64;
  return result;
}

//----- (10008E30) --------------------------------------------------------
HRESULT __stdcall ShowStaticImage(unk0008C *u8C, char *filename, int checksum) {
  unk0008C *u8C_1;                                                                    // esi
  D3DVALUE d3d2;                                                                      // ecx
  IDirect3DViewport2 *viewport;                                                       // eax
  IDirect3DDevice2 *dev;                                                              // ebx
  unsigned __int8 *v7;                                                                // eax
  HRESULT(__stdcall * beginSceneFunc_1)(IDirect3DDevice2 *);                          // ebp
  HRESULT result;                                                                     // eax
  HRESULT(__stdcall * setRenderState)(IDirect3DDevice2 *, D3DRENDERSTATETYPE, DWORD); // ebp
  IDirect3DViewport2Vtbl *d3dviewport2vtbl;                                           // ecx
  double v12;                                                                         // st7
  double v13;                                                                         // st7
  IDirect3DDevice2Vtbl *v14;                                                          // eax
  HRESULT(__stdcall * drawPrimitive)
  (IDirect3DDevice2 *, D3DPRIMITIVETYPE, D3DVERTEXTYPE, LPVOID, DWORD, DWORD); // eax
  HRESULT(__stdcall * endScene)(IDirect3DDevice2 *);                           // ebp
  int v17;                                                                     // ebp
  D3DVALUE v18;                                            // [esp+ECh] [ebp-15Ch]
  float v19;                                               // [esp+F0h] [ebp-158h]
  float v20;                                               // [esp+F4h] [ebp-154h]
  D3DVALUE v21;                                            // [esp+F8h] [ebp-150h]
  int v22;                                                 // [esp+FCh] [ebp-14Ch]
  int outBuf;                                              // [esp+104h] [ebp-144h] BYREF
  HRESULT(__stdcall * beginSceneFunc)(IDirect3DDevice2 *); // [esp+108h] [ebp-140h]
  char *outFilename;                                       // [esp+10Ch] [ebp-13Ch] BYREF
  HRESULT(__stdcall * drawPrimitive_1)
  (IDirect3DDevice2 *,
   D3DPRIMITIVETYPE,
   D3DVERTEXTYPE,
   LPVOID,
   DWORD,
   DWORD);                          // [esp+110h] [ebp-138h]
  IDirect3DViewport2 *d3dviewport2; // [esp+114h] [ebp-134h]
  D3DRECT rect;                     // [esp+118h] [ebp-130h] BYREF
  D3DTLVERTEX v29;                  // [esp+128h] [ebp-120h] BYREF
  D3DTLVERTEX v30;                  // [esp+148h] [ebp-100h] BYREF
  D3DTLVERTEX v31;                  // [esp+168h] [ebp-E0h] BYREF
  D3DTLVERTEX v32;                  // [esp+188h] [ebp-C0h] BYREF
  D3DTLVERTEX v33;                  // [esp+1A8h] [ebp-A0h] BYREF
  D3DTLVERTEX v34;                  // [esp+1C8h] [ebp-80h] BYREF
  D3DTLVERTEX v35;                  // [esp+1E8h] [ebp-60h] BYREF
  D3DTLVERTEX v36;                  // [esp+208h] [ebp-40h] BYREF
  D3DTLVERTEX v37;                  // [esp+228h] [ebp-20h] BYREF

  u8C_1 = u8C;
  if (!u8C)
      return -2147467259;
  if ((LOBYTE(u8C->field_8.ambient.r) & 0x1F) != 31)
      return -2147467259;
  d3d2 = u8C->field_8.emissive.g;
  viewport = u8C->lpDirect3DViewport2;
  dev = u8C->lpDirect3DDevice;
  d3dviewport2 = viewport;
  if (d3d2 == 0.0 || !dev || !viewport)
      return -2147467259;
  meth_unk0008C_FlipSurfaces(u8C);
  v7 = sub_10009AD0(filename, checksum, &outFilename, &outBuf);
  meth_10009EA0(&stru_10277680, dev, v7, 256, 256, 11);
  v22 = 0;
  beginSceneFunc = dev->lpVtbl->BeginScene;
  beginSceneFunc_1 = beginSceneFunc;
  for (result = beginSceneFunc(dev);; result = beginSceneFunc(dev)) {
      if (result) {
          for (; result == -2005532222; result = beginSceneFunc_1(dev)) {
              while (meth_unk0008C_1000B2C0(u8C_1) == 2289435074)
                  ;
          }
          if (result)
              break;
      }
      setRenderState = dev->lpVtbl->SetRenderState;
      if (!setRenderState(dev, D3DRS_SPECULARENABLE, 0) && !setRenderState(dev, D3DRS_ZENABLE, 1) &&
          !setRenderState(dev, (D3DRENDERSTATETYPE)D3DRENDERSTATE_TEXTUREHANDLE, 0) &&
          !setRenderState(dev, D3DRS_DITHERENABLE, 1)) {
          rect.x2 = gWidth;
          rect.y2 = gHeight;
          d3dviewport2vtbl = d3dviewport2->lpVtbl;
          rect.x1 = 0;
          rect.y1 = 0;
          d3dviewport2vtbl->Clear(d3dviewport2, 1, &rect, D3DCLEAR_ZBUFFER | D3DCLEAR_TARGET);
          setRenderState(dev, D3DRS_SHADEMODE, 1);
          setRenderState(dev, D3DRS_ALPHABLENDENABLE, 0);
          setRenderState(dev, D3DRS_ZWRITEENABLE, 0);
          setRenderState(dev, (D3DRENDERSTATETYPE)D3DRENDERSTATE_WRAPU, 0);
          setRenderState(dev, (D3DRENDERSTATETYPE)D3DRENDERSTATE_WRAPV, 0);
          setRenderState(dev, (D3DRENDERSTATETYPE)D3DRENDERSTATE_TEXTUREPERSPECTIVE, 1);
          setRenderState(
              dev, (D3DRENDERSTATETYPE)D3DRENDERSTATE_TEXTUREHANDLE, *(&stru_10277680 + 3));
          v12 = (double)((gWidth - (int)outFilename) / 2);
          v19 = v12;
          if (v12 < 0.0)
              v19 = 0.0;
          v13 = (double)((gHeight - outBuf) / 2);
          v20 = v13;
          if (v13 < 0.0)
              v20 = 0.0;
          v29.sx = v19;
          v29.sy = v20;
          v21 = v19 - -256.0;
          v18 = v20 - -256.0;
          v34.sx = v21;
          v34.sy = v18;
          v29.sz = 0.0;
          v29.rhw = 1.0;
          v29.tu = 0.0;
          v29.tv = 0.0;
          v29.color = -1;
          v29.specular = 0xFF0000FF;
          v34.color = -1;
          v34.sz = 0.0;
          qmemcpy(&v35, &v29, sizeof(v35));
          v32.sy = v18;
          v32.sx = v19;
          v34.rhw = 1.0;
          v34.tu = 1.0;
          v34.tv = 1.0;
          v34.specular = 0xFF0000FF;
          v14 = dev->lpVtbl;
          qmemcpy(&v36, &v34, sizeof(v36));
          drawPrimitive = v14->DrawPrimitive;
          v32.sz = 0.0;
          v32.rhw = 1.0;
          v32.tu = 0.0;
          v32.tv = 1.0;
          v32.color = 0xFFFFFFFF;
          v32.specular = 0xFF0000FF;
          qmemcpy(&v37, &v32, sizeof(v37));
          drawPrimitive_1 = drawPrimitive;
          drawPrimitive(dev, D3DPT_TRIANGLELIST, D3DVT_TLVERTEX, &v35, 3, 9);
          v30.sx = v19;
          v30.sy = v20;
          v30.sz = 0.0;
          v30.rhw = 1.0;
          v30.tu = 0.0;
          v30.color = 0xFFFFFFFF;
          v30.specular = 0xFF0000FF;
          v30.tv = 0.0;
          qmemcpy(&v35, &v30, sizeof(v35));
          v31.sx = v21;
          v31.sy = v20;
          v31.sz = 0.0;
          v31.rhw = 1.0;
          v31.color = 0xFFFFFFFF;
          v31.specular = 0xFF0000FF;
          v31.tu = 1.0;
          v31.tv = 0.0;
          v33.color = 0xFFFFFFFF;
          qmemcpy(&v36, &v31, sizeof(v36));
          v33.sx = v21;
          v33.sy = v18;
          v33.sz = 0.0;
          v33.rhw = 1.0;
          v33.specular = 0xFF0000FF;
          v33.tu = 1.0;
          v33.tv = 1.0;
          qmemcpy(&v37, &v33, sizeof(v37));
          drawPrimitive_1(dev, D3DPT_TRIANGLELIST, D3DVT_TLVERTEX, &v35, 3, 9);
          if (setRenderState(dev, D3DRS_SHADEMODE, 2))
              return 0;
          u8C_1 = u8C;
      }
      endScene = dev->lpVtbl->EndScene;
      result = endScene(dev);
      if (result) {
          for (; result == -2005532222; result = endScene(dev)) {
              while (meth_unk0008C_1000B2C0(u8C_1) == -2005532222)
                  ;
          }
          if (result)
              return result;
      }
      v17 = (*(int(__stdcall **)(_DWORD, IDirectDrawSurface *, MACRO_DDFLIP))(
          *(_DWORD *)LODWORD(u8C_1->field_8.emissive.b) + 44))(
          LODWORD(u8C_1->field_8.emissive.b), u8C_1->lpDirectDrawSurface1, DDFLIP_WAIT);
      while ((*(int(__stdcall **)(_DWORD, MACRO_DDFLIP))(
          *(_DWORD *)LODWORD(u8C_1->field_8.emissive.b) + 72))(LODWORD(u8C_1->field_8.emissive.b),
                                                               DDFLIP_EVEN))
          ;
      if (++v22 >= 2) {
          meth_1000A0B0(&stru_10277680);
          return v17;
      }
      beginSceneFunc_1 = beginSceneFunc;
  }
  return result;
}
// 100A81C0: using guessed type int gWidth;
// 100A81C4: using guessed type int gHeight;

//----- (10009360) --------------------------------------------------------
int __stdcall D3DEnumTextureFormatsCallback(DDSURFACEDESC *a1, void *context) {
  int v3;     // edi
  char v4;    // bl
  int v5;     // edi
  int v6;     // ebx
  int v7;     // eax
  int v8;     // ebx
  int v9;     // ebx
  int v10;    // edx
  char v11;   // bl
  char v12;   // bl
  int v13;    // edi
  char v14;   // bl
  int v15;    // edi
  int v16[8]; // [esp+8h] [ebp-20h] BYREF

  qmemcpy(v16, &a1->ddpfPixelFormat, sizeof(v16));
  if (v16[3] > (unsigned int)*((unsigned __int16 *)context + 2))
      return 1;
  switch (*(_DWORD *)context) {
  case 2:
      if ((v16[1] & 3) != 0)
          v3 = sub_10009640(v16[7]);
      else
          v3 = 0;
      if (!*((_DWORD *)context + 5) ||
          v3 && (!sub_10009640(*((_DWORD *)context + 9)) ||
                 v3 > sub_10009640(*((_DWORD *)context + 9)) && v3 <= 8)) {
          goto LABEL_51;
      }
      break;
  case 3:
      v4 = v16[1];
      if ((v16[1] & 3) != 0)
          sub_10009640(v16[7]);
      if ((v4 & 0x40) != 0) {
          v5 = sub_10009640(v16[4]);
          v6 = sub_10009640(v16[5]);
          v7 = sub_10009640(v16[6]);
          if (!*((_DWORD *)context + 5))
              goto LABEL_51;
          if (v5 == v6 && v5 == v7 && v5 > 0) {
              v8 = sub_10009640(*((_DWORD *)context + 7));
              if (sub_10009640(*((_DWORD *)context + 6)) != v8)
                  goto LABEL_51;
              v9 = sub_10009640(*((_DWORD *)context + 8));
              if (sub_10009640(*((_DWORD *)context + 6)) != v9)
                  goto LABEL_51;
              if (v5 <= 8) {
                  v10 = *((_DWORD *)context + 6);
                  goto LABEL_32;
              }
          }
      }
      break;
  case 4:
      v11 = v16[1];
      if ((v16[1] & 3) != 0)
          v5 = sub_10009640(v16[7]);
      else
          v5 = 0;
      if ((v11 & 0x40) != 0) {
          if (!*((_DWORD *)context + 5))
              goto LABEL_51;
          if (v5) {
              if (!sub_10009640(*((_DWORD *)context + 9)))
                  goto LABEL_51;
              v10 = *((_DWORD *)context + 9);
          LABEL_32:
              if (v5 > sub_10009640(v10))
                  goto LABEL_51;
          }
      }
      break;
  case 0xB:
      v12 = v16[1];
      if ((v16[1] & 3) != 0)
          v13 = sub_10009640(v16[7]);
      else
          v13 = 0;
      if ((v12 & 0x40) != 0 &&
          (!*((_DWORD *)context + 5) || v13 && (!sub_10009640(*((_DWORD *)context + 9)) ||
                                                v13 < sub_10009640(*((_DWORD *)context + 9))))) {
          goto LABEL_51;
      }
      break;
  case 0xC:
      v14 = v16[1];
      if ((v16[1] & 3) != 0)
          v15 = sub_10009640(v16[7]);
      else
          v15 = 0;
      if ((v14 & 0x40) != 0 &&
          (!*((_DWORD *)context + 5) || v15 && (!sub_10009640(*((_DWORD *)context + 9)) ||
                                                v15 > sub_10009640(*((_DWORD *)context + 9))))) {
      LABEL_51:
          qmemcpy((char *)context + 8, v16, 0x20u);
      }
      break;
  default:
      return 1;
  }
  return 1;
}
// 100093F7: conditional instruction was optimized away because of 'edi.4!=0'
// 1000952C: conditional instruction was optimized away because of 'edi.4!=0'
// 10009591: conditional instruction was optimized away because of 'edi.4!=0'
// 100095E3: conditional instruction was optimized away because of 'edi.4!=0'

//----- (10009640) --------------------------------------------------------
int __cdecl sub_10009640(int a1) {
  int v1;     // ecx
  int result; // eax
  int v3;     // edx

  v1 = 1;
  result = 0;
  v3 = 32;
  do {
      if ((v1 & a1) != 0)
          ++result;
      v1 *= 2;
      --v3;
  } while (v3);
  return result;
}

//----- (10009660) --------------------------------------------------------
char *__cdecl sub_10009660(_WORD *arg0, unsigned __int8 *a2, int a3, int a1, int *a5) {
  _WORD *v5;            // ebp
  DDPIXELFORMAT *v6;    // esi
  int v7;               // ebx
  unsigned __int8 v9;   // dl
  unsigned __int8 *v10; // edi
  unsigned __int8 v11;  // al
  unsigned __int8 v12;  // al
  int v13;              // eax
  int v14;              // eax
  int v15;              // edx
  int v16;              // eax
  int v17;              // edx
  int v18;              // eax
  int v19;              // edx
  int v20;              // eax
  unsigned int v22;     // [esp+Ch] [ebp-18h]
  int v23;              // [esp+10h] [ebp-14h]
  int v24;              // [esp+14h] [ebp-10h]
  int v25;              // [esp+18h] [ebp-Ch]
  DWORD v26;            // [esp+1Ch] [ebp-8h]
  unsigned __int8 v28;  // [esp+28h] [ebp+4h]
  unsigned __int8 v29;  // [esp+2Ch] [ebp+8h]
  unsigned __int8 v30;  // [esp+30h] [ebp+Ch]

  v5 = arg0;
  v6 = GetDDPixelFormatPtr(a1);
  v26 = v6->dwRGBBitCount >> 3;
  v23 = math_MinBits(v6->dwRBitMask) - 8;
  v24 = math_MinBits(v6->dwGBitMask) - 8;
  v7 = math_MinBits(v6->dwBBitMask) - 8;
  v25 = math_MinBits(v6->dwRGBAlphaBitMask) - 8;
  *a5 = 1 << math_PopCount(v6->dwGBitMask);
  if (a3 > 0) {
      v22 = (unsigned int)(a3 + 3) >> 2;
      do {
          v9 = a2[1];
          v28 = *a2;
          v10 = a2 + 2;
          v11 = *v10++;
          v30 = v11;
          v12 = *v10;
          a2 = v10 + 1;
          v29 = v12;
          if (v12 < 0x80u) {
              v20 = *a5;
          } else {
              if (v23 < 0)
                  v13 = v28 >> -(char)v23;
              else
                  v13 = v28 << v23;
              v14 = v6->dwRBitMask & v13;
              if (v24 < 0)
                  v15 = v9 >> -(char)v24;
              else
                  v15 = v9 << v24;
              v16 = v6->dwGBitMask & v15 | v14;
              if (v7 < 0)
                  v17 = v30 >> -(char)v7;
              else
                  v17 = v30 << v7;
              v18 = v6->dwBBitMask & v17 | v16;
              if (v25 < 0)
                  v19 = v6->dwRGBAlphaBitMask & (v29 >> -(char)v25);
              else
                  v19 = v6->dwRGBAlphaBitMask & (v29 << v25);
              v20 = v19 | v18;
          }
          switch (v26) {
          case 1u:
              *(_BYTE *)v5 = v20;
              v5 = (_WORD *)((char *)v5 + 1);
              break;
          case 2u:
              *v5++ = v20;
              break;
          case 4u:
              *(_DWORD *)v5 = v20;
              v5 += 2;
              break;
          }
          --v22;
      } while (v22);
  }
  return (char *)((char *)v5 - (char *)arg0);
}

//----- (10009830) --------------------------------------------------------
DDPIXELFORMAT *__cdecl GetDDPixelFormatPtr(int a1) {
  int v1;  // ecx
  int *v2; // eax

  v1 = 0;
  v2 = &dword_100A6230;
  while (a1 != *v2) {
      v2 += 10;
      ++v1;
      if ((int)v2 >= (int)&gD3DWaitCanFlip)
          return 0;
  }
  return (DDPIXELFORMAT *)((char *)&unk_100A6238 + 40 * v1);
}
// 100A6230: using guessed type int dword_100A6230;
// 100A62F8: using guessed type int gD3DWaitCanFlip;

//----- (10009860) --------------------------------------------------------
int __cdecl math_PopCount(unsigned int a1) {
  unsigned int v1; // ecx
  int result;      // eax

  v1 = a1;
  for (result = 0; (v1 & 1) == 0; ++result)
      v1 >>= 1;
  return result;
}

//----- (10009880) --------------------------------------------------------
int __cdecl math_MinBits(unsigned int bitMask) {
  unsigned int mask; // ecx
  int result;        // eax

  mask = bitMask;
  for (result = 0; mask; ++result)
      mask >>= 1;
  return result;
}

//----- (100098A0) --------------------------------------------------------
char *__cdecl graphics_100098A0(_WORD *out_a1, unsigned __int8 *out_a2, int a3, int a4) {
  DDPIXELFORMAT *pixelFormat; // edi
  int b_bitCount;             // ebx
  int alpha_bitCount;         // eax
  unsigned __int8 out_a2_i1;  // dl
  unsigned __int8 *v9;        // ebp
  unsigned __int8 v10;        // dl
  int v11;                    // edx
  int v12;                    // edx
  int v13;                    // esi
  int v14;                    // edx
  int v15;                    // esi
  int v16;                    // edx
  int v17;                    // esi
  int v18;                    // edx
  _WORD *v19;                 // ecx
  unsigned __int8 v21;        // [esp+8h] [ebp-18h]
  unsigned int v22;           // [esp+Ch] [ebp-14h]
  int r_bitCount;             // [esp+10h] [ebp-10h]
  int g_bitCount;             // [esp+14h] [ebp-Ch]
  DWORD v25;                  // [esp+18h] [ebp-8h]
  char *out_a1_1;             // [esp+1Ch] [ebp-4h]
  unsigned __int8 out_a2a;    // [esp+28h] [ebp+8h]
  unsigned __int8 v28;        // [esp+2Ch] [ebp+Ch]
  unsigned __int8 a1a;        // [esp+30h] [ebp+10h]

  out_a1_1 = (char *)out_a1;
  pixelFormat = GetDDPixelFormatPtr(a4);
  v25 = pixelFormat->dwRGBBitCount >> 3;
  r_bitCount = math_MinBits(pixelFormat->dwRBitMask) - 8;
  g_bitCount = math_MinBits(pixelFormat->dwGBitMask) - 8;
  b_bitCount = math_MinBits(pixelFormat->dwBBitMask) - 8;
  alpha_bitCount = math_MinBits(pixelFormat->dwRGBAlphaBitMask) - 8;
  if (a3 > 0) {
      v22 = (unsigned int)(a3 + 3) >> 2;
      while (1) {
          out_a2_i1 = out_a2[1];
          a1a = *out_a2;
          v9 = out_a2 + 2;
          v28 = out_a2_i1;
          v10 = v9[1];
          out_a2a = *v9;
          out_a2 = v9 + 2;
          v21 = v10;
          v11 = r_bitCount < 0 ? a1a >> -(char)r_bitCount : a1a << r_bitCount;
          v12 = pixelFormat->dwRBitMask & v11;
          v13 = g_bitCount < 0 ? v28 >> -(char)g_bitCount : v28 << g_bitCount;
          v14 = pixelFormat->dwGBitMask & v13 | v12;
          v15 = b_bitCount < 0 ? out_a2a >> -(char)b_bitCount : out_a2a << b_bitCount;
          v16 = pixelFormat->dwBBitMask & v15 | v14;
          v17 = alpha_bitCount < 0 ? v21 >> -(char)alpha_bitCount : v21 << alpha_bitCount;
          v18 = pixelFormat->dwRGBAlphaBitMask & v17 | v16;
          if (v25 == 1)
              break;
          if (v25 == 2) {
              *out_a1 = v18;
              v19 = out_a1 + 1;
              goto LABEL_21;
          }
          if (v25 == 4) {
              *(_DWORD *)out_a1 = v18;
              v19 = out_a1 + 2;
              goto LABEL_21;
          }
      LABEL_22:
          if (!--v22)
              return (char *)((char *)out_a1 - out_a1_1);
      }
      *(_BYTE *)out_a1 = v18;
      v19 = (_WORD *)((char *)out_a1 + 1);
  LABEL_21:
      out_a1 = v19;
      goto LABEL_22;
  }
  return (char *)((char *)out_a1 - out_a1_1);
}

//----- (10009A50) --------------------------------------------------------
char __usercall sub_10009A50
    @<al>(unsigned int checksumOrZero @<eax>, _BYTE *a2, _WORD *a3, int size) {
  int sz;      // ebp
  char v7;     // cl
  _BYTE *v8;   // esi
  char v9;     // dl
  char result; // al

  sz = size;
  if (size > 0) {
      do {
          LOWORD(checksumOrZero) = *a3++;
          v7 = -((checksumOrZero & 0x8000) != 0);
          *a2 = ((unsigned __int16)checksumOrZero >> 7) ^
                (((unsigned __int16)checksumOrZero >> 7) ^ (checksumOrZero >> 10)) & 7;
          v8 = a2 + 1;
          v9 = checksumOrZero;
          *v8 = ((unsigned __int16)checksumOrZero >> 2) ^
                (((unsigned __int16)checksumOrZero >> 2) ^ ((unsigned __int8)checksumOrZero >> 5)) &
                    7;
          result = checksumOrZero & 7;
          *++v8 = result | (8 * v9);
          *++v8 = v7;
          a2 = v8 + 1;
          --sz;
      } while (sz);
  }
  return result;
}

//----- (10009AD0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_10009AD0(char *filename,
                                      int expectedChecksum,
                                      char **outFilename,
                                      int *outBuff) {
  CHK_File *fp;       // ebx
  size_t elementSize; // esi
  int cksum;          // eax
  int flag_;          // edi
  int seed;           // eax
  int *v9;            // edx
  int buf;            // [esp+Ch] [ebp-4h] BYREF

  fp = CHK_FReadOpen(filename);
  CHK_FReadReportError(&filename, 4u, 1u, fp);
  CHK_FReadReportError(&buf, 4u, 1u, fp);
  elementSize = 2 * (_DWORD)filename * buf;
  CHK_FReadReportError(::buf, 4u, 1u, fp);
  memset(::buf, 0, 0x20000u);
  CHK_FReadReportError(::buf, elementSize, 1u, fp);
  CHK_FClose(fp);
  flag_ = expectedChecksum;
  if (expectedChecksum) {
      seed = CalculateChecksum(0, 0, 0);
      cksum = CalculateChecksum(seed, ::buf, elementSize);
      if (cksum != flag_)
          exit(1);
  }
  sub_10009A50(cksum, byte_11829870, ::buf, 0x10000);
  graphics_100098A0(byte_11829870, byte_11829870, 0x40000, 11);
  v9 = outBuff;
  *outFilename = filename;
  *v9 = buf;
  return byte_11829870;
}
// 10009B8E: variable 'cksum' is possibly undefined

//----- (10009BD0) --------------------------------------------------------
HRESULT __cdecl graphics_EnumTextureFormatsSomething(IDirect3DDevice2 *dev2) {
  intptr_t contextStart; // esi
  HRESULT(__stdcall * pEnumTextureFormatsFn)
  (IDirect3DDevice2 *, LPD3DENUMTEXTUREFORMATSCALLBACK, LPVOID); // ebp
  HRESULT result;                                                // eax

  contextStart = (intptr_t)&gD3DEnumTextureFormatsContextStart;
  pEnumTextureFormatsFn = dev2->lpVtbl->EnumTextureFormats;
  do {
      memset((void *)(contextStart + 4), 0, 0x20u);
      *(_WORD *)contextStart = 8;
      pEnumTextureFormatsFn(dev2, D3DEnumTextureFormatsCallback, (LPVOID)(contextStart - 4));
      *(_WORD *)contextStart = 16;
      pEnumTextureFormatsFn(dev2, D3DEnumTextureFormatsCallback, (LPVOID)(contextStart - 4));
      result = *(_DWORD *)(contextStart + 16);
      if (!result) {
          *(_WORD *)contextStart = 32;
          result = pEnumTextureFormatsFn(
              dev2, D3DEnumTextureFormatsCallback, (LPVOID)(contextStart - 4));
      }
      contextStart += 40;
  } while (contextStart < (int)&gD3DWaitFlipDone);
  return result;
}
// 100A62FC: using guessed type int gD3DWaitFlipDone;

//----- (10009C40) --------------------------------------------------------
IDirectDraw2 *__thiscall meth_10009C40(void *this,
                                       IDirect3DDevice2 *dev,
                                       unsigned __int8 *a3,
                                       DWORD dwWidth,
                                       DWORD dwHeight,
                                       int a6,
                                       DWORD dwColorKeyValue) {
  IDirectDraw2 *dd;   // eax
  IDirectDraw2 *dd_1; // ebp
  HRESULT(__stdcall * createSurfaceFunc)
  (IDirectDraw2 *, LPDDSURFACEDESC, LPDIRECTDRAWSURFACE *, IUnknown *); // esi
  LPDIRECTDRAWSURFACE *lpDDSurface;                                     // edi
  LPDIRECTDRAWSURFACE ddSurface;                                        // [esp+3Ch] [ebp-284h]
  IDirect3DTexture2 *d3dTex2;   // [esp+50h] [ebp-270h] BYREF
  DDCOLORKEY aColorSpaceValues; // [esp+54h] [ebp-26Ch] BYREF
  DDSURFACEDESC ddSurfaceDesc;  // [esp+5Ch] [ebp-264h] BYREF
  _D3DDeviceDesc hardwareDesc;  // [esp+C8h] [ebp-1F8h] BYREF
  _D3DDeviceDesc helDesc;       // [esp+1C4h] [ebp-FCh] BYREF

  dd = ReleaseDeviceDD2(dev);
  dd_1 = dd;
  if (!dd)
      return dd;
  meth_1000A0B0(this);
  memset(&ddSurfaceDesc, 0, sizeof(ddSurfaceDesc));
  ddSurfaceDesc.dwSize = 108;
  qmemcpy(&ddSurfaceDesc.ddpfPixelFormat,
          GetDDPixelFormatPtr(a6),
          sizeof(ddSurfaceDesc.ddpfPixelFormat));
  ddSurfaceDesc.dwFlags |= 0x1007u;
  ddSurfaceDesc.dwHeight = dwHeight;
  memset(&hardwareDesc, 0, 0xFCu);
  ddSurfaceDesc.dwWidth = dwWidth;
  memset(&helDesc, 0, 0xFCu);
  hardwareDesc.dwSize = 252;
  helDesc.dwSize = 252;
  dev->lpVtbl->GetCaps(dev, &hardwareDesc, &helDesc);
  createSurfaceFunc = dd_1->lpVtbl->CreateSurface;
  lpDDSurface = (LPDIRECTDRAWSURFACE *)((char *)this + 4);
  ddSurfaceDesc.ddsCaps.dwCaps = hardwareDesc.dcmColorModel != 0 ?
                                     DDPF_STENCILBUFFER | DDPF_PALETTEINDEXED2 | 0x4000000 :
                                     DDPF_PALETTEINDEXED2 | DDPF_PALETTEINDEXED1;
  if (createSurfaceFunc(dd_1, &ddSurfaceDesc, (LPDIRECTDRAWSURFACE *)this + 1, 0))
      goto LABEL_10;
  if (hardwareDesc.dcmColorModel) {
      ddSurfaceDesc.ddsCaps.dwCaps = DDPF_PALETTEINDEXED2 | DDPF_PALETTEINDEXED1;
      if (!createSurfaceFunc(dd_1, &ddSurfaceDesc, (LPDIRECTDRAWSURFACE *)this, 0))
          goto LABEL_7;
  LABEL_10:
      meth_1000A0B0(this);
      return 0;
  }
  ddSurface = *lpDDSurface;
  *(_DWORD *)this = *lpDDSurface;
  ddSurface->lpVtbl->AddRef(ddSurface);
LABEL_7:
  if (dwColorKeyValue) {
      aColorSpaceValues.dwColorSpaceLowValue = dwColorKeyValue;
      aColorSpaceValues.dwColorSpaceHighValue = dwColorKeyValue;
      (*(void(__stdcall **)(_DWORD, int, DDCOLORKEY *))(**(_DWORD **)this + 116))(
          *(_DWORD *)this, 8, &aColorSpaceValues);
      (*lpDDSurface)->lpVtbl->SetColorKey(*lpDDSurface, 8, &aColorSpaceValues);
  }
  if (!meth_graphics_10009ED0(this, (char *)a3, dwWidth, dwHeight))
      goto LABEL_10;
  (*lpDDSurface)
      ->lpVtbl->QueryInterface(*lpDDSurface, &CLSID_IDirect3DTexture2, (LPVOID *)&d3dTex2);
  d3dTex2->lpVtbl->GetHandle(d3dTex2, (#486 *)dev, (D3DTEXTUREHANDLE *)((char *)this + 12));
  d3dTex2->lpVtbl->Release(d3dTex2);
  return (IDirectDraw2 *)1;
}

//----- (10009E30) --------------------------------------------------------
IDirectDraw2 *__cdecl ReleaseDeviceDD2(IDirect3DDevice2 *dev) {
  IDirectDrawSurface2 *drawSurface; // [esp+24h] [ebp-8h] BYREF
  IDirectDraw2 *dd;                 // [esp+28h] [ebp-4h] BYREF

  if (!dev || dev->lpVtbl->GetRenderTarget(dev, (LPDIRECTDRAWSURFACE *)&dev) ||
      dev->lpVtbl->QueryInterface(dev, &CLSID_IDirectDrawSurface2, (LPVOID *)&drawSurface)) {
      return 0;
  }
  dev->lpVtbl->Release(dev);
  drawSurface->lpVtbl->GetDDInterface(drawSurface, (LPVOID *)&dd);
  drawSurface->lpVtbl->Release(drawSurface);
  dd->lpVtbl->Release(dd);
  return dd;
}

//----- (10009EA0) --------------------------------------------------------
IDirectDraw2 *__thiscall meth_10009EA0(
    void *this, IDirect3DDevice2 *dev2, unsigned __int8 *a3, int a4, int a5, int a6) {
  return meth_10009C40(this, dev2, a3, a4, a5, a6, 0);
}

//----- (10009ED0) --------------------------------------------------------
BOOL __thiscall meth_graphics_10009ED0(void *this, char *a2, LONG rectRight, LONG rectBottom) {
  int *unk2;                        // ebp
  int *ddSurface;                   // eax
  BOOL result;                      // eax
  int ddSurfaceVtbl;                // ecx
  int ddSurface_1;                  // eax
  int ddSurfaceVtbl_1;              // ecx
  LONG v10;                         // edi
  DWORD dwRGBBitCountShiftedRight3; // esi
  LPVOID lpSurface;                 // ebp
  _BYTE *v14;                       // ecx
  LONG v15;                         // esi
  char v16;                         // dl
  _WORD *v17;                       // ecx
  LONG rectRight_1;                 // edx
  __int16 v19;                      // si
  _DWORD *v20;                      // ecx
  LONG v21;                         // edx
  int v22;                          // esi
  RECT rect;                        // [esp+20h] [ebp-7Ch] BYREF
  DDSURFACEDESC ddSurfaceDesc;      // [esp+30h] [ebp-6Ch] BYREF

  unk2 = (int *)this;
  ddSurface = *(int **)this;
  if (!*(_DWORD *)this)
      return 0;
  ddSurfaceVtbl = *ddSurface;
  ddSurfaceDesc.dwSize = 108;
  (*(void(__stdcall **)(int *, DDSURFACEDESC *))(ddSurfaceVtbl + 0x58))(ddSurface, &ddSurfaceDesc);
  ddSurface_1 = *unk2;
  ddSurfaceVtbl_1 = *(_DWORD *)*unk2;
  rect.left = 0;
  rect.top = 0;
  v10 = rectBottom;
  dwRGBBitCountShiftedRight3 = ddSurfaceDesc.ddpfPixelFormat.dwRGBBitCount >> 3;
  rect.right = rectRight;
  rect.bottom = rectBottom;
  if ((*(int(__stdcall **)(int, RECT *, DDSURFACEDESC *, int, _DWORD))(ddSurfaceVtbl_1 + 100))(
          ddSurface_1, &rect, &ddSurfaceDesc, 33, 0)) {
      return 0;
  }
  lpSurface = ddSurfaceDesc.lpSurface;
  if (dwRGBBitCountShiftedRight3 == 1) {
      if (rectBottom > 0) {
          do {
              v14 = lpSurface;
              if (rectRight > 0) {
                  v15 = rectRight;
                  do {
                      v16 = *a2++;
                      *v14++ = v16;
                      --v15;
                  } while (v15);
              }
              lpSurface = (char *)lpSurface + ddSurfaceDesc.lPitch;
              --v10;
          } while (v10);
      }
  } else if (dwRGBBitCountShiftedRight3 == 2) {
      if (rectBottom > 0) {
          do {
              v17 = lpSurface;
              if (rectRight > 0) {
                  rectRight_1 = rectRight;
                  do {
                      v19 = *(_WORD *)a2;
                      a2 += 2;
                      *v17++ = v19;
                      --rectRight_1;
                  } while (rectRight_1);
              }
              lpSurface = (char *)lpSurface + ddSurfaceDesc.lPitch;
              --v10;
          } while (v10);
      }
  } else if (dwRGBBitCountShiftedRight3 == 4 && rectBottom > 0) {
      do {
          v20 = lpSurface;
          if (rectRight > 0) {
              v21 = rectRight;
              do {
                  v22 = *(_DWORD *)a2;
                  a2 += 4;
                  *v20++ = v22;
                  --v21;
              } while (v21);
          }
          lpSurface = (char *)lpSurface + ddSurfaceDesc.lPitch;
          --v10;
      } while (v10);
  }
  if ((*(int(__stdcall **)(_DWORD, LPVOID))(**(_DWORD **)this + 128))(*(_DWORD *)this,
                                                                      ddSurfaceDesc.lpSurface))
      result = 0;
  else
      result = meth_graphics_1000A020((#511 *)this);
  return result;
}

//----- (1000A020) --------------------------------------------------------
BOOL __thiscall meth_graphics_1000A020(#511 * this) {
  int lpDDSurface;                  // eax
  int lpDDSurface_1;                // ecx
  HRESULT hr;                       // esi
  IDirect3DTexture2 *d3dTexture2;   // [esp+24h] [ebp-8h] BYREF
  IDirect3DTexture2 *d3dTexture2_1; // [esp+28h] [ebp-4h] BYREF

  lpDDSurface = *((_DWORD *)this + 1);
  if (!lpDDSurface)
      return 0;
  lpDDSurface_1 = *(_DWORD *)this;
  if (!*(_DWORD *)this)
      return 0;
  if (lpDDSurface == lpDDSurface_1)
      return 1;
  if ((*(int(__stdcall **)(int))(*(_DWORD *)lpDDSurface + 108))(lpDDSurface))
      return 0;
  (***((void(__stdcall ****)(_DWORD, GUID *, IDirect3DTexture2 **))this + 1))(
      *((_DWORD *)this + 1), &CLSID_IDirect3DTexture2, &d3dTexture2);
  (***(void(__stdcall ****)(_DWORD, GUID *, IDirect3DTexture2 **))this)(
      *(_DWORD *)this, &CLSID_IDirect3DTexture2, &d3dTexture2_1);
  hr = d3dTexture2->lpVtbl->Load(d3dTexture2, d3dTexture2_1);
  d3dTexture2->lpVtbl->Release(d3dTexture2);
  d3dTexture2_1->lpVtbl->Release(d3dTexture2_1);
  return hr == 0;
}

//----- (1000A0B0) --------------------------------------------------------
int __thiscall meth_1000A0B0(void *this) {
  int v2;           // eax
  IUnknown *result; // eax

  if (*(_DWORD *)this)
      (*(void(__stdcall **)(_DWORD))(**(_DWORD **)this + 8))(*(_DWORD *)this);
  v2 = *((_DWORD *)this + 1);
  *(_DWORD *)this = 0;
  if (v2)
      (*(void(__stdcall **)(int))(*(_DWORD *)v2 + 8))(v2);
  result = (IUnknown *)*((_DWORD *)this + 2);
  *((_DWORD *)this + 1) = 0;
  if (result)
      result = (IUnknown *)result->lpVtbl->Release(result);
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  return (int)result;
}

//----- (1000A100) --------------------------------------------------------
unk0005C *__thiscall meth_unk0005C_1000A100(unk0005C *this,
                                            IDirect3D2 *d3d2,
                                            IDirect3DDevice2 *d3dDevice2) {
  IDirect3DMaterial2 **d3dMaterial2;  // edi
  IDirect3D2Vtbl *d3d2Vtbl;           // ecx
  IDirect3DMaterial2 *d3dMaterial2_1; // [esp-4h] [ebp-10h]

  memset(this, 0, 0x50u); // sizeof(D3DMATERIAL)
  d3dMaterial2 = &this->lpDirect3DMaterial2;
  d3d2Vtbl = d3d2->lpVtbl;
  this->d3dMaterial.dwSize = 80;
  this->d3dMaterial.dwRampSize = 16;
  this->d3dMaterial.diffuse.a = 1.0;
  d3d2Vtbl->CreateMaterial(d3d2, &this->lpDirect3DMaterial2, 0);
  (*d3dMaterial2)->lpVtbl->SetMaterial(*d3dMaterial2, (LPD3DMATERIAL)this);
  (*d3dMaterial2)->lpVtbl->GetHandle(*d3dMaterial2, d3dDevice2, &this->lpD3DMaterialHandle);
  d3dMaterial2_1 = *d3dMaterial2;
  this->field_58 = 0;
  d3dMaterial2_1->lpVtbl->SetMaterial(d3dMaterial2_1, &this->d3dMaterial);
  return this;
}

//----- (1000A170) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_SafeReleaseDirect3DMaterial2(unk0008C *this) {
  HRESULT hr; // eax

  hr = (HRESULT)this->? ;
  if (hr) {
      hr = (*(int(__stdcall **)(HRESULT))(*(_DWORD *)hr + 8))(hr); // IDirect3DMaterial2::Release()
      this->? = NULL;
  }
  return hr;
}

//----- (1000A190) --------------------------------------------------------
unk0008C *__thiscall meth_unk0008C_init(unk0008C *this) {
  int v1; // eax

  memset(this, 0, sizeof(unk0008C));
  v1 = this->? ;
  this->     ? = 140;
  LOBYTE(v1) = v1 | 4;
  this->? = v1;
  return this;
}

//----- (1000A1C0) --------------------------------------------------------
int __thiscall meth_unk0008C_Release(unk0008C *this) {
  int result; // eax

  meth_unk0008C_ReleaseDDrawD3D(this);
  result = 0;
  this->? = 0;
  this->? = 0;
  this->? = 0;
  this->? = 0;
  this->last = 0;
  return result;
}

//----- (1000A1E0) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_np_1000A1E0(
    unk0008C *this, HWND hWnd, int a3, int a4, int a5, int a6, int a7, int a8, int a9) {
  D3DVALUE v10;   // eax
  HRESULT result; // eax
  int hr;         // edi

  if (!hWnd || !IsWindow(hWnd))
      return -2005522670;
  LODWORD(this->field_8.ambient.g) = hWnd;
  v10 = this->field_8.diffuse.b;
  if (a9)
      LOBYTE(v10) |= 4u;
  else
      LOBYTE(v10) &= 0xFBu;
  this->field_8.diffuse.b = v10;
  result = sub_1001A790(a3,
                        a4,
                        a5,
                        a6,
                        a7,
                        a8,
                        1,
                        (unk00334 *)&this->field_8.specular,
                        (unk00334 *)&this->field_8.dcvSpecular.g,
                        (unk00334 *)&this->field_8.dcvSpecular.b);
  if (result >= 0) {
      result = meth_unk0008C_1000A480(this);
      if (result >= 0) {
          hr = meth_unk0008C_SetCooperativeLevel(this);
          if (hr >= 0 && (hr = meth_unk0008C_1000A5D0(this), hr >= 0) &&
              (hr = meth_unk0008C_1000A820(this), hr >= 0) &&
              (hr = meth_unk0008C_1000AB70(this), hr >= 0)) {
              SendMessageA((HWND)LODWORD(this->field_8.ambient.g), 0xBD0u, 0, (LPARAM)this);
              result = 0;
          } else {
              meth_unk0008C_ReleaseDDrawD3D(this);
              result = hr;
          }
      }
  }
  return result;
}

//----- (1000A2C0) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000A2C0(unk0008C *this) {
  HRESULT result; // eax
  int v3;         // esi

  if ( !this->? || !IsWindow(this->?) )
      return -2005522669;
  result = meth_unk0008C_1000A390(this);
  if (result >= 0) {
      v3 = meth_unk0008C_1000A480(this);
      if (v3 >= 0 && (v3 = meth_unk0008C_SetCooperativeLevel(this), v3 >= 0) &&
          (v3 = meth_unk0008C_1000A5D0(this), v3 >= 0) &&
          (v3 = meth_unk0008C_1000A820(this), v3 >= 0) &&
          (v3 = meth_unk0008C_1000AB70(this), v3 >= 0)) {
      SendMessageA(this->?, 0xBD0u, 0, (LPARAM)this);
      result = 0;
      } else {
      meth_unk0008C_ReleaseDDrawD3D(this);
      result = v3;
      }
  }
  return result;
}

//----- (1000A350) --------------------------------------------------------
int __thiscall meth_unk0008C_ReleaseDDrawD3D(unk0008C *this) {
  SendMessageA(this->?, 0xBD1u, 0, (LPARAM)this);
  meth_unk0008C_ReleaseDDrawSurface(this);
  meth_unk0008C_ReleaseDDraw2Surface(this);
  meth_unk0008C_RestoreDisplayMode(this);
  meth_unk0008C_ReleaseD3D2DDraw2DDraw(this);
  return 0;
}

//----- (1000A390) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000A390(unk0008C *this) {
  HRESULT result;     // eax
  unk00334 *gsu1;     // ecx
  CLSID *guid;        // eax
  unk00334 *v5;       // ecx
  CLSID *v6;          // ebx
  unk00334 *v7;       // esi
  unk00334 *v8;       // ecx
  unk00334 *refclsid; // ecx
  int a5;             // [esp+10h] [ebp-18h] BYREF
  int bitDepth;       // [esp+14h] [ebp-14h] BYREF
  int height;         // [esp+18h] [ebp-10h] BYREF
  int width;          // [esp+1Ch] [ebp-Ch] BYREF
  unk00334 *v14;      // [esp+20h] [ebp-8h] BYREF
  unk00334 *v15;      // [esp+24h] [ebp-4h] BYREF

  if ((gHasCalledDDrawEnum & 1) != 0 || (result = graphics_1001B970(), result >= 0)) {
      gsu1 = this->? ;
      if (gsu1)
      guid = meth_unk00334_GetDirectDrawGUID(gsu1);
      else
      guid = 0;
      v5 = this->? ;
      if (v5)
      v6 = (CLSID *)&v5->lpGUID;
      else
      v6 = 0;
      v7 = sub_1001A550(guid);
      if (v7) {
      v8 = this->? ;
      if (v8) {
          meth_unk00334_1001AC80(v8, &width, &height, &bitDepth, &a5);
      } else {
          a5 = 0;
          bitDepth = 0;
          height = 0;
          width = 0;
      }
      if (s_unk00334_1001A6E0(v7, (int)v6, width, height, bitDepth, a5, &v14, &v15)) {
          refclsid = v15;
          this->? = v14;
          this->? = v7;
          this->? = refclsid;
          result = 0;
      } else {
          result = -2005522671;
      }
      } else {
      result = -2005522670;
      }
  }
  return result;
}
// 104BBE18: using guessed type int gHasCalledDDrawEnum;

//----- (1000A480) --------------------------------------------------------
int __thiscall meth_unk0008C_1000A480(unk0008C *this) {
  unk00334 *v2; // eax
  int result;   // eax
  GUID *v4;     // eax
  HRESULT v5;   // edi
  int v6;       // edi
  int v7;       // eax

  if ( !this->? )
  {
      v2 = sub_1001A550(NULL);
      this->? = v2;
      if (!v2)
      return -2005522669;
  }
  v4 = meth_unk00334_GetDirectDrawGUID(this->?);
  v5 = DirectDrawCreate(v4, &this->?, 0);
  if (v5 < 0)
      goto LABEL_8;
  v6 = this->?->lpVtbl->QueryInterface(this->?, &CLSID_IDirectDraw2, (LPVOID *)&this->?);
  if (v6 < 0) {
    MessageBoxA(this->?, gMessageBoxText, gMessageBoxCaption, MB_ICONERROR);
    meth_unk0008C_ReleaseD3D2DDraw2DDraw(this);
    return v6;
  }
  v5 = this->?->lpVtbl->QueryInterface(this->?, &CLSID_IDirect3D2, (LPVOID *)&this->?);
  if (v5 >= 0) {
    g_pD3D2 = this->? ;
    v7 = this->     ? ;
    LOBYTE(v7) = v7 | 1;
    this->? = v7;
    result = 0;
  } else {
  LABEL_8:
    meth_unk0008C_ReleaseD3D2DDraw2DDraw(this);
    result = v5;
  }
  return result;
}

//----- (1000A540) --------------------------------------------------------
int __thiscall meth_unk0008C_ReleaseD3D2DDraw2DDraw(unk0008C *this) {
  IDirect3D2 *d3d2;     // eax
  IDirectDraw2 *ddraw2; // eax
  IDirectDraw *ddraw;   // eax

  d3d2 = this->? ;
  this->       ? &= 0xFFFFFFFE;
  if (d3d2) {
    d3d2->lpVtbl->Release(d3d2);
    this->? = 0;
    g_pD3D2 = 0;
  }
  ddraw2 = this->? ;
  if (ddraw2) {
    ddraw2->lpVtbl->Release(this->?);
    this->? = 0;
  }
  ddraw = this->? ;
  if (ddraw) {
    ddraw->lpVtbl->Release(this->?);
    this->? = 0;
  }
  return 0;
}

//----- (1000A590) --------------------------------------------------------
int __thiscall meth_unk0008C_SetCooperativeLevel(unk0008C *this) {
  HRESULT hr; // eax

  if ( !this->? || !IsWindow(this->?) )
    return -2005522669;
  hr = this->?->lpVtbl->SetCooperativeLevel(this->?, this->?, 17);
  return hr >= 0 ? 0 : hr;
}

//----- (1000A5D0) --------------------------------------------------------
int __thiscall meth_unk0008C_1000A5D0(unk0008C *this) {
  DWORD flags;       // edi
  unk00334 *u0;      // ecx
  int hr;            // edi
  int v5;            // eax
  int v6;            // ecx
  int v7;            // eax
  int result;        // eax
  unk00334 *iid;     // edx
  unk00334 *v10;     // eax
  unk00334 *v11;     // ecx
  unk00334 *u0_1;    // eax
  int v13;           // eax
  int v14;           // ecx
  int v15;           // edx
  int v16;           // eax
  unk00334 *v17;     // [esp+8h] [ebp-38h]
  unk00334 *iid0;    // [esp+1Ch] [ebp-24h]
  DWORD width;       // [esp+30h] [ebp-10h] BYREF
  DWORD height;      // [esp+34h] [ebp-Ch] BYREF
  int bitDepth;      // [esp+38h] [ebp-8h] BYREF
  DWORD refreshRate; // [esp+3Ch] [ebp-4h] BYREF

  flags = 0;
  u0 = this->? ;
  if ( !u0 || !this->? )
    return -2005522669;
  meth_unk00334_1001AC80(u0, (int *)&width, (int *)&height, &bitDepth, (int *)&refreshRate);
  if (width == 320 && height == 200 && bitDepth == 8)
    flags = 1;
  hr = this->?->lpVtbl->SetDisplayMode(this->?, width, height, bitDepth, refreshRate, flags);
  if ( hr < 0
    && (width == 640 && height == 480
     || (iid = this->?,
         height = 480,
         v17 = this->?,
         width = 640,
         v10 = meth_unk00334_1001A570(v17, 640, 480, bitDepth, 0, (unk00228 *)iid),
         (this->? = v10) == 0)
     || (hr = this->?->lpVtbl->SetDisplayMode(this->?, width, height, bitDepth, 0, 0), hr < 0)) )
  {
    if ( bitDepth == 16
      || (iid0 = this->?,
          v11 = this->?,
          bitDepth = 16,
          u0_1 = meth_unk00334_1001A570(v11, width, height, 16, 0, (unk00228 *)iid0),
          (this->? = u0_1) == 0)
      || (hr = this->?->lpVtbl->SetDisplayMode(this->?, width, height, bitDepth, 0, 0), hr < 0) )
    {
      result = hr;
    } else {
      v13 = width;
      v14 = height;
      v15 = bitDepth;
      this->field_78 = 0;
      this->field_7C = 0;
      this->field_80 = v13;
      this->field_84 = v14;
      gWidth = v13;
      g_Width1 = v13;
      gHeight = v14;
      g_Height1 = v14;
      g_BitDepth = v15;
      v16 = this->? ;
      LOBYTE(v16) = v16 | 2;
      this->? = v16;
      result = hr;
    }
  } else {
    v5 = width;
    v6 = height;
    this->field_78 = 0;
    this->field_7C = 0;
    this->field_80 = v5;
    this->field_84 = v6;
    gWidth = v5;
    g_Width1 = v5;
    gHeight = v6;
    g_Height1 = v6;
    g_BitDepth = bitDepth;
    v7 = this->? ;
    LOBYTE(v7) = v7 | 2;
    this->? = v7;
    result = hr;
  }
  return result;
}
// 100A81C0: using guessed type int gWidth;
// 100A81C4: using guessed type int gHeight;
// 100AA8A8: using guessed type int g_BitDepth;
// 106C0684: using guessed type int g_Width1;
// 106C299C: using guessed type int g_Height1;

//----- (1000A800) --------------------------------------------------------
int __thiscall meth_unk0008C_RestoreDisplayMode(unk0008C *this) {
  IDirectDraw2 *ddraw2; // ecx

  this->         ? &= 0xFFFFFFFD;
  ddraw2 = this->? ;
  if (ddraw2)
    ddraw2->lpVtbl->RestoreDisplayMode(ddraw2);
  return 0;
}

//----- (1000A820) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000A820(unk0008C *this) {
  IDirectDraw2 *dd2;           // edx
  IDirectDraw2Vtbl *dd2Vtbl;   // eax
  HRESULT result;              // eax
  int v5;                      // eax
  DDSURFACEDESC ddSurfaceDesc; // [esp+8h] [ebp-6Ch] BYREF

  if ( !this->? )
    return -2005522669;
  dd2 = this->? ;
  if (!dd2)
    return -2005522669;
  memset(&ddSurfaceDesc, 0, sizeof(ddSurfaceDesc));
  dd2Vtbl = dd2->lpVtbl;
  ddSurfaceDesc.dwSize = 108;
  ddSurfaceDesc.dwFlags = DDPF_PALETTEINDEXED8 | DDPF_ALPHAPIXELS;
  ddSurfaceDesc.ddsCaps.dwCaps =
      DDPF_ZPIXELS | DDPF_YUV | DDPF_PALETTEINDEXEDTO8 | DDPF_PALETTEINDEXED4;
  ddSurfaceDesc.dwBackBufferCount = 1;
  result = dd2Vtbl->CreateSurface(dd2, &ddSurfaceDesc, &this->?, 0);
  if (result >= 0) {
    result = meth_unk0008C_1000A8D0(this);
    if (result >= 0) {
      v5 = this->? ;
      LOBYTE(v5) = v5 | 4;
      this->? = v5;
      result = 0;
    }
  }
  return result;
}

//----- (1000A8A0) --------------------------------------------------------
int __thiscall meth_unk0008C_ReleaseDDraw2Surface(unk0008C *this) {
  LPDIRECTDRAWSURFACE ddrawSurface; // eax

  this->? &= 0xFFFFFFFB;
  meth_unk0008C_ResetPalette(this);
  ddrawSurface = this->? ;
  if (ddrawSurface) {
    ddrawSurface->lpVtbl->Release(this->?);
    this->? = 0;
  }
  return 0;
}

//----- (1000A8D0) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000A8D0(unk0008C *this) {
  LPDIRECTDRAWSURFACE ddSurface;         // edx
  IDirectDrawSurfaceVtbl *ddSurfaceVtbl; // eax
  HRESULT hr;                            // eax
  HDC dc;                                // ebp
  unsigned int sizePalette;              // eax
  int tPaletteEntry;                     // eax
  IDirect3DMaterial2 *tPaletteEntry2;    // eax
  DWORD v9;                              // edx
  unsigned int i;                        // eax
  unsigned int j;                        // eax
  unsigned int v12;                      // eax
  unsigned int k;                        // eax
  unsigned int l;                        // eax
  HRESULT palette;                       // esi
  DDSURFACEDESC surfaceDesc;             // [esp+10h] [ebp-6Ch] BYREF

  meth_unk0008C_ResetPalette(this);
  if ( !this->? )
    return -2005522669;
  ddSurface = this->? ;
  if (!ddSurface)
    return -2005522669;
  memset(&surfaceDesc, 0, sizeof(surfaceDesc));
  ddSurfaceVtbl = ddSurface->lpVtbl;
  surfaceDesc.dwSize = 108;
  hr = ddSurfaceVtbl->GetSurfaceDesc(ddSurface, &surfaceDesc);
  if (hr >= 0) {
    hr = graphics_1001A950(&surfaceDesc.ddpfPixelFormat);
    if (hr) {
      dc = GetDC(0);
      sizePalette = GetDeviceCaps(dc, SIZEPALETTE);
      this->? = sizePalette;
      if (sizePalette) {
          if (sizePalette > 0x100)
              this->? = 0x100;
        tPaletteEntry = operator new(4 * this->?);
        this->? = tPaletteEntry;
        if ( !tPaletteEntry
          || (tPaletteEntry2 = (IDirect3DMaterial2 *)operator new(4 * this->?), (this->? = tPaletteEntry2) == 0) )
        {
            ReleaseDC(0, dc);
            meth_unk0008C_ResetPalette(this);
            return -2005522668;
        }
        GetSystemPaletteEntries(dc, 0, this->?, (LPPALETTEENTRY)this->?);
        qmemcpy(this->?, (const void *)this->?, 4 * this->?);
      }
      ReleaseDC(0, dc);
      if ((surfaceDesc.ddpfPixelFormat.dwFlags & DDPF_PALETTEINDEXED1) != 0) {
        v9 = 256;
        for ( i = 0; i < 2; HIBYTE(this->?[i - 1].lpVtbl) = PC_POLYGON )
            ++i;
      } else if ((surfaceDesc.ddpfPixelFormat.dwFlags & DDPF_PALETTEINDEXED2) != 0) {
        for ( j = 0; j < 4; HIBYTE(this->?[j - 1].lpVtbl) = PC_POLYGON )
            ++j;
        v9 = 512;
      } else if ((surfaceDesc.ddpfPixelFormat.dwFlags & DDPF_PALETTEINDEXED4) != 0) {
        HIBYTE(this->?->lpVtbl) = 64;
        v12 = 1;
        HIBYTE(this->?[15].lpVtbl) = 64;
        do
          HIBYTE(this->?[v12++].lpVtbl) = 1;
        while (v12 < 15);
        v9 = 1;
      } else {
        if ((surfaceDesc.ddpfPixelFormat.dwFlags & DDPF_PALETTEINDEXED8) == 0) {
          palette = -2005522671;
        LABEL_34:
          meth_unk0008C_ResetPalette(this);
          return palette;
        }
        for ( k = 0; k < 10; HIBYTE(this->?[k + 245].lpVtbl) = PC_WIDESTYLED )
          HIBYTE(this->?[k++].lpVtbl) = PC_WIDESTYLED;
        for ( l = 10; l < 246; HIBYTE(this->?[l - 1].lpVtbl) = PC_POLYGON )
          ++l;
        v9 = 4;
      }
      palette = this->?->lpVtbl->CreatePalette(this->?, v9, (LPPALETTEENTRY)this->?, &this->?, 0);
      if (palette >= 0) {
        palette = this->?->lpVtbl->SetPalette(this->?, this->?);
        if (palette >= 0)
          return 0;
      }
      goto LABEL_34;
    }
  }
  return hr;
}

//----- (1000AB20) --------------------------------------------------------
int __thiscall meth_unk0008C_ResetPalette(unk0008C *this) {
  IDirectDrawPalette *ddrawPalette; // eax

  ddrawPalette = this->? ;
  if (ddrawPalette) {
    ddrawPalette->lpVtbl->Release(ddrawPalette);
    this->? = NULL;
  }
  if ( this->? )
  {
    operator delete(this->?);
    this->? = NULL;
  }
  if ( this->? )
  {
    operator delete((void *)this->?);
    this->? = NULL;
  }
  this->? = NULL;
  return 0;
}

//----- (1000AB70) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000AB70(unk0008C *this) {
  IDirectDrawSurface *lpSurface;            // eax
  IDirectDrawSurfaceVtbl *iSurface;         // edx
  HRESULT result;                           // eax
  BOOL v5;                                  // eax
  unk00334 *v6;                             // edi
  int *v7;                                  // edi
  MACRO_DDCAPS_3D v8;                       // ebp
  char v9;                                  // al
  IDirectDrawSurfaceVtbl *ddrawSurfaceVtbl; // edx
  DWORD v11;                                // ebx
  unsigned int v12;                         // edx
  IDirectDraw2 *ddraw2;                     // eax
  LPDIRECTDRAWSURFACE *ddSurface;           // edi
  IDirectDraw2Vtbl *ddraw2Vtbl;             // edx
  IDirect3DDevice2 *lpD3DDevice2;           // edi
  unk00334 *v17;                            // esi
  LPDIRECTDRAWSURFACE ddrawSurface;         // [esp-8h] [ebp-8Ch]
  unsigned int v19;                         // [esp-4h] [ebp-88h]
  DDSCAPS ddsCaps;                          // [esp+10h] [ebp-74h] BYREF
  DWORD v21;                                // [esp+14h] [ebp-70h]
  DDSURFACEDESC surfaceDesc;                // [esp+18h] [ebp-6Ch] BYREF

  if ( !this->? )
    return -2005522669;
  if ( !IsWindow(this->?) )
    return -2005522669;
  if ( !this->? )
    return -2005522669;
  if ( !this->? )
    return -2005522669;
  if ( !this->? )
    return -2005522669;
  if ( !this->? )
    return -2005522669;
  lpSurface = this->? ;
  if (!lpSurface)
    return -2005522669;
  iSurface = lpSurface->lpVtbl;
  ddsCaps.dwCaps = 4;
  result = iSurface->GetAttachedSurface(lpSurface, &ddsCaps, &this->lpDirectDrawSurface1);
  if (result < 0)
    return result;
  v5 = meth_unk00228_DeviceDescHasDCMColorModel((unk00228 *)this->?);
  v6 = this->? ;
  if (v5) {
    v7 = &v6->ddCaps1;
    v8 = 0x4000;
  } else {
    v7 = &v6->? ;
    v8 = 0x800;
  }
  v9 = this->      ? ;
  *(_DWORD *)this->? = 0;
  if ((v9 & 4) != 0 && v7 && v7[40]) {
    ddrawSurface = this->? ;
    ddrawSurfaceVtbl = ddrawSurface->lpVtbl;
    surfaceDesc.dwSize = 108;
    result = ddrawSurfaceVtbl->GetSurfaceDesc(ddrawSurface, &surfaceDesc);
    if (result < 0)
      return result;
    v11 = surfaceDesc.dwWidth;
    v19 = v7[40];
    v21 = surfaceDesc.dwHeight;
    v12 = graphics_1001A870(v19);
    memset(&surfaceDesc, 0, sizeof(surfaceDesc));
    ddraw2 = this->? ;
    surfaceDesc.dwHeight = v21;
    ddSurface = &this->lpDirectDrawSurface2;
    surfaceDesc.dwMipMapCount = v12;
    ddraw2Vtbl = ddraw2->lpVtbl;
    surfaceDesc.dwSize = 108;
    surfaceDesc.dwFlags = 0x47;
    surfaceDesc.ddsCaps.dwCaps = v8 | 0x20000;
    surfaceDesc.dwWidth = v11;
    if (ddraw2Vtbl->CreateSurface(ddraw2, &surfaceDesc, &this->lpDirectDrawSurface2, 0) >= 0) {
      if (this->lpDirectDrawSurface1->lpVtbl->AddAttachedSurface(this->lpDirectDrawSurface1,
                                                                 *ddSurface) >= 0) {
        *(_DWORD *)this->? = 1;
      } else if (*ddSurface) {
        (*ddSurface)->lpVtbl->Release(*ddSurface);
        *ddSurface = 0;
      }
    }
  }
  lpD3DDevice2 = (IDirect3DDevice2 *)&this->lpDirect3DDevice;
  result = this->?->lpVtbl->CreateDevice(this->?,
                                         (const CLSID *const)&this->?
                                             ->lpGUID,
                                         this->lpDirectDrawSurface1,
                                         &this->lpDirect3DDevice);
  if (result >= 0) {
    g_D3DDevice2 = (IDirect3DDevice2 *)lpD3DDevice2->lpVtbl;
    SetupGDevCaps(g_D3DDevice2);
    meth_unk00334_1001AF20(this->?, (IDirect3DDevice2 *)lpD3DDevice2->lpVtbl);
    this->? |= 8u;
    result = meth_unk0008C_1000ADF0(this);
    if (result >= 0) {
      v17 = this->last;
      if (v17)
        meth_unk000334_10001160(v17);
      graphics_EnumTextureFormatsSomething(g_D3DDevice2);
      result = 0;
    }
  }
  return result;
}

//----- (1000AD70) --------------------------------------------------------
int __thiscall meth_unk0008C_ReleaseDDrawSurface(unk0008C *this) {
  IDirect3DDevice *dev;              // eax
  IDirectDrawSurface *lpDDSurface_1; // eax
  IDirectDrawSurface *lpDDSurface;   // eax

  if (this->last)
    returnZeroWrapper();
  meth_unk0008C_1000AEA0(this);
  dev = (IDirect3DDevice *)this->lpDirect3DDevice;
  this->? &= 0xFFFFFFF7;
  if (dev) {
    dev->lpVtbl->Release(dev);
    this->lpDirect3DDevice = 0;
    g_D3DDevice2 = 0;
  }
  if (this->lpDirectDrawSurface2) {
    lpDDSurface_1 = this->lpDirectDrawSurface1;
    if (lpDDSurface_1)
      lpDDSurface_1->lpVtbl->DeleteAttachedSurface(lpDDSurface_1, 0, this->lpDirectDrawSurface2);
    this->lpDirectDrawSurface2->lpVtbl->Release(this->lpDirectDrawSurface2);
    this->lpDirectDrawSurface2 = 0;
  }
  lpDDSurface = this->lpDirectDrawSurface1;
  if (lpDDSurface) {
    lpDDSurface->lpVtbl->Release(this->lpDirectDrawSurface1);
    this->lpDirectDrawSurface1 = 0;
  }
  return 0;
}

//----- (1000ADF0) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000ADF0(unk0008C *this) {
  IDirect3D2 *d3d2;                      // eax
  IDirect3DViewport2 *direct3DViewport2; // esi
  HRESULT hr;                            // eax
  HRESULT hr_1;                          // ebx
  int hr_2;                              // ebx
  int v7;                                // eax

  d3d2 = this->? ;
  if (!d3d2 || !this->lpDirect3DDevice)
    return -2005522669;
  direct3DViewport2 = (IDirect3DViewport2 *)&this->lpDirect3DViewport2;
  hr = d3d2->lpVtbl->CreateViewport(d3d2, &this->lpDirect3DViewport2, 0);
  if (hr < 0)
    return hr;
  hr_1 = this->lpDirect3DDevice->lpVtbl->AddViewport(
      this->lpDirect3DDevice, (LPDIRECT3DVIEWPORT2)direct3DViewport2->lpVtbl);
  if (hr_1 < 0)
    goto LABEL_9;
  hr_2 = meth_unk0008C_1000AFB0(this);
  if (hr_2 < 0) {
    this->lpDirect3DDevice->lpVtbl->DeleteViewport(this->lpDirect3DDevice,
                                                   (LPDIRECT3DVIEWPORT2)direct3DViewport2->lpVtbl);
    (*((void(__stdcall **)(IDirect3DViewport2Vtbl *))direct3DViewport2->lpVtbl->QueryInterface +
       2))(direct3DViewport2->lpVtbl);
    direct3DViewport2->lpVtbl = 0;
    return hr_2;
  }
  hr_1 = meth_unk0008C_FlipSurfaces(this);
  if (hr_1 < 0) {
    this->lpDirect3DDevice->lpVtbl->DeleteViewport(this->lpDirect3DDevice,
                                                   (LPDIRECT3DVIEWPORT2)direct3DViewport2->lpVtbl);
  LABEL_9:
    (*((void(__stdcall **)(IDirect3DViewport2Vtbl *))direct3DViewport2->lpVtbl->QueryInterface +
       2))(direct3DViewport2->lpVtbl);
    direct3DViewport2->lpVtbl = 0;
    return hr_1;
  }
  v7 = this->? ;
  LOBYTE(v7) = v7 | 0x10;
  this->? = v7;
  return 0;
}

//----- (1000AEA0) --------------------------------------------------------
int __thiscall meth_unk0008C_1000AEA0(unk0008C *this) {
  unk0008C *v2; // edi

  v2 = this->field_8;
  this->? |= 0x10u;
  if (v2) {
    meth_unk0008C_SafeReleaseDirect3DMaterial2(v2);
    operator delete(v2);
    this->field_8 = NULL;
  }
  if (this->lpDirect3DViewport2) {
    this->lpDirect3DDevice->lpVtbl->DeleteViewport(this->lpDirect3DDevice,
                                                   this->lpDirect3DViewport2);
    this->lpDirect3DViewport2->lpVtbl->Release(this->lpDirect3DViewport2);
    this->lpDirect3DViewport2 = NULL;
  }
  return 0;
}

//----- (1000AF00) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_FlipSurfaces(unk0008C *this) {
  D3DMATERIAL *lpMat;                    // eax
  LPD3DMATERIAL v3;                      // edi
  IDirect3DViewport2 *d3dViewport2;      // ebx
  IDirect3DMaterial2 *direct3DMaterial2; // eax
  int hr;                                // edi
  D3DRECT rect;                          // [esp+10h] [ebp-10h] BYREF

  rect.x2 = gWidth;
  rect.y2 = gHeight;
  lpMat = (D3DMATERIAL *)this->field_8.dwSize;
  rect.x1 = 0;
  rect.y1 = 0;
  *(_QWORD *)&lpMat->diffuse.r = 0i64;
  lpMat->diffuse.b = 0.0;
  LODWORD(lpMat[1].diffuse.g) = 1;
  v3 = (LPD3DMATERIAL)this->field_8.dwSize;
  d3dViewport2 = this->lpDirect3DViewport2;
  direct3DMaterial2 = (IDirect3DMaterial2 *)LODWORD(v3[1].diffuse.r);
  v3[1].diffuse.g = 0.0;
  v3->dwRampSize = 1;
  direct3DMaterial2->lpVtbl->SetMaterial(direct3DMaterial2, v3);
  d3dViewport2->lpVtbl->SetBackground(d3dViewport2, v3[1].dwSize);
  this->lpDirect3DViewport2->lpVtbl->Clear(
      this->lpDirect3DViewport2, 1, &rect, D3DCLEAR_ZBUFFER | D3DCLEAR_TARGET);
  hr = (*(int(__stdcall **)(_DWORD, IDirectDrawSurface *, MACRO_DDFLIP))(
      *(_DWORD *)LODWORD(this->field_8.emissive.b) + 44))(
      LODWORD(this->field_8.emissive.b), this->lpDirectDrawSurface1, DDFLIP_WAIT);
  while ((*(int(__stdcall **)(_DWORD, MACRO_DDGFS))(*(_DWORD *)LODWORD(this->field_8.emissive.b) +
                                                    72))(LODWORD(this->field_8.emissive.b),
                                                         DDGFS_ISFLIPDONE))
    ;
  return hr;
}
// 100A81C0: using guessed type int gWidth;
// 100A81C4: using guessed type int gHeight;

//----- (1000AFB0) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000AFB0(unk0008C *this) {
  signed int viewportWidth;                 // ebx
  DWORD viewportHeight;                     // ebp
  double dvClipY;                           // st7
  LPDIRECT3DVIEWPORT2 d3dViewport2Instance; // eax
  IDirect3DViewport2Vtbl *d3dViewport2Vtbl; // ecx
  HRESULT hr;                               // eax
  unk0008C *v8;                             // ebx
  unk0005C *v9;                             // eax
  unk0008C *v10;                            // eax
  LPDIRECT3DVIEWPORT2 d3dViewport2_1;       // ebx
  unk0008C *v12;                            // esi
  IDirect3DMaterial2 *direct3DMaterial2;    // eax
  D3DVIEWPORT2 d3dViewport2_2;              // [esp+18h] [ebp-38h] BYREF
  int v15;                                  // [esp+4Ch] [ebp-4h]

  if (!this->lpDirect3DDevice || !this->lpDirect3DViewport2)
    return -2005522669;
  viewportWidth = abs32(this->field_80 - this->field_78);
  viewportHeight = abs32(this->field_84 - this->field_7C);
  if (viewportWidth)
    dvClipY = (double)viewportHeight / (double)viewportWidth;
  else
    dvClipY = 1.0;
  memset(&d3dViewport2_2, 0, sizeof(d3dViewport2_2));
  d3dViewport2_2.dvClipY = dvClipY;
  d3dViewport2Instance = this->lpDirect3DViewport2;
  d3dViewport2_2.dvClipHeight = dvClipY + dvClipY;
  d3dViewport2Vtbl = d3dViewport2Instance->lpVtbl;
  d3dViewport2_2.dwSize = 44;
  d3dViewport2_2.dwX = 0;
  d3dViewport2_2.dwY = 0;
  d3dViewport2_2.dwWidth = viewportWidth;
  d3dViewport2_2.dwHeight = viewportHeight;
  d3dViewport2_2.dvClipX = -1.0;
  d3dViewport2_2.dvClipWidth = 2.0;
  d3dViewport2_2.dvMinZ = 0.0;
  d3dViewport2_2.dvMaxZ = 1.0;
  hr = d3dViewport2Vtbl->SetViewport2(d3dViewport2Instance, &d3dViewport2_2);
  if (hr >= 0) {
    hr = this->lpDirect3DDevice->lpVtbl->SetCurrentViewport(this->lpDirect3DDevice,
                                                            this->lpDirect3DViewport2);
    if (hr >= 0) {
      v8 = this->field_8;
      if (v8) {
        meth_unk0008C_SafeReleaseDirect3DMaterial2(this->field_8);
        operator delete(v8);
      }
      v9 = (unk0005C *)operator new(0x5Cu);
      v15 = 0;
      if (v9)
        v10 = (unk0008C *)meth_unk0005C_1000A100(v9, this->?, this->lpDirect3DDevice);
      else
        v10 = 0;
      this->field_8 = v10;
      *(_DWORD *)v10->field_4 = 0;
      v10->field_8 = 0;
      *(_DWORD *)v10->? = 0;
      v10->lpDirectDrawSurface1 = (IDirectDrawSurface *)1;
      d3dViewport2_1 = this->lpDirect3DViewport2;
      v12 = this->field_8;
      v15 = -1;
      direct3DMaterial2 = v12->? ;
      v12->                    ? = 1;
      v12->lpDirectDrawSurface1 = 0;
      direct3DMaterial2->lpVtbl->SetMaterial(direct3DMaterial2, (LPD3DMATERIAL)v12);
      d3dViewport2_1->lpVtbl->SetBackground(d3dViewport2_1, v12->?);
      hr = 0;
    }
  }
  return hr;
}

//----- (1000B150) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000B150(unk0008C *this) {
  LPDIRECTDRAWSURFACE v1; // eax
  IDirectDrawPalette *v2; // ecx
  HRESULT result;         // eax

  v1 = this->? ;
  if ( !v1 || (v2 = this->?) == 0 || (result = v1->lpVtbl->SetPalette(v1, v2), result >= 0) )
    result = 0;
  return result;
}

//----- (1000B170) --------------------------------------------------------
HRESULT __thiscall meth_unk00334_1000B170(unk00334 *this) {
  IDirectDrawPalette *v2; // eax
  HRESULT result;         // eax
  IDirectDraw2 *v4;       // eax

  v2 = (IDirectDrawPalette *)this->? ;
  if ( !v2
    || (result = v2->lpVtbl->GetEntries(v2, 0, 0, *(_DWORD *)this->?, (LPPALETTEENTRY)this->?), result >= 0)
    && (result = (*(int (__stdcall **)(int, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)this->? + 24))(
                   this->?,
                   0,
                   0,
                   *(_DWORD *)this->?,
                   *(_DWORD *)&this->?[4]),
        result >= 0) )
  {
    v4 = this->? ;
    if ( !v4 || (result = v4->lpVtbl->FlipToGDISurface(this->?), result >= 0) )
    {
      if ( this->? )
      {
        if ( IsWindow(this->?) )
        {
          DrawMenuBar(this->?);
          RedrawWindow(this->?, 0, 0, 0x400u);
        }
      }
      result = 0;
    }
  }
  return result;
}

//----- (1000B1F0) --------------------------------------------------------
HRESULT __thiscall meth_unk00334_1000B1F0(unk00334 *this) {
  int v1;         // eax
  HRESULT result; // eax

  v1 = this->? ;
  if ( !v1
    || (result = (*(int (__stdcall **)(int, _DWORD, _DWORD, _DWORD, int))(*(_DWORD *)v1 + 24))(
                   v1,
                   0,
                   0,
                   *(_DWORD *)this->?,
                   this->?),
        result >= 0) )
  {
    result = 0;
  }
  return result;
}

//----- (1000B220) --------------------------------------------------------
HRESULT __thiscall meth_unk00334_1000B220(unk00334 *this, int a2) {
  int v3;         // eax
  HRESULT result; // eax
  int v5;         // eax

  if (a2) {
    v3 = this->? +1;
    this->     ? = v3;
    if (v3 == 1) {
      result = meth_unk00334_1000B170(this);
      if (result < 0)
        return result;
    }
    return 0;
  }
  v5 = this->? ;
  if (!v5)
    return -2005522671;
  if (v5 != 1 || (result = meth_unk00334_1000B1F0(this), result >= 0)) {
    --this->? ;
    return 0;
  }
  return result;
}

//----- (1000B280) --------------------------------------------------------
int __thiscall meth_unk0008C_1000B280(unk0008C *this, unk00334 *a2) {
  if (!a2)
    return -2147024809;
  this->last = a2;
  meth_unk00334_setField0Validate(a2, this);
  if ( (this->? & 0x1F) == 31 )
    meth_unk000334_10001160(this->last);
  return 0;
}

//----- (1000B2C0) --------------------------------------------------------
int __thiscall meth_unk0008C_1000B2C0(unk0008C *this) {
  int hr;                          // eax
  LPDIRECTDRAWSURFACE ddSurface;   // eax
  LPDIRECTDRAWSURFACE ddSurface_1; // eax
  IDirectDrawSurface *ddSurface_2; // eax

  if ( (this->? & 0x1F) != 31 )
    return -2005522669;
  ddSurface = this->? ;
  if ( !ddSurface || !ddSurface->lpVtbl->IsLost(this->?) || (hr = this->?->lpVtbl->Restore(this->?), hr >= 0) )
  {
    ddSurface_1 = this->lpDirectDrawSurface2;
    if (!ddSurface_1 || !ddSurface_1->lpVtbl->IsLost(this->lpDirectDrawSurface2) ||
        (hr = this->lpDirectDrawSurface2->lpVtbl->Restore(this->lpDirectDrawSurface2), hr >= 0)) {
      ddSurface_2 = this->lpDirectDrawSurface1;
      if (!ddSurface_2 || !ddSurface_2->lpVtbl->IsLost(this->lpDirectDrawSurface1) ||
          (hr = this->lpDirectDrawSurface1->lpVtbl->Restore(this->lpDirectDrawSurface1), hr >= 0)) {
        if (!this->last || (hr = sub_10001190(), hr >= 0))
          hr = 0;
      }
    }
  }
  return hr;
}

//----- (1000B350) --------------------------------------------------------
int __thiscall meth_unk00334_1000B350(unk00334 *this, _DWORD *a2) {
  int result; // eax
  int *v3;    // ecx

  if ((this->ddCaps1 & 0x1F) != 31)
    return -2005522669;
  v3 = &this->? ;
  *a2 = *v3;
  a2[1] = v3[1];
  a2[2] = v3[2];
  result = 0;
  a2[3] = v3[3];
  return result;
}

//----- (1000B390) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000B390(unk0008C *this,
                                          CLSID *guidOrRefreshRate,
                                          unk00334 *a3,
                                          int a4) {
  unk00334 *v5;   // edi
  HRESULT result; // eax
  GUID **v7;      // ebx
  unk00334 *u334; // eax
  unk00334 *v9;   // ebx
  unk00334 *v10;  // ebp
  unk00334 *v11;  // edx
  unk00334 *v12;  // eax
  int v13;        // edi
  unk00334 *v14;  // ecx
  int a4a;        // [esp+10h] [ebp-14h] BYREF
  int a3a;        // [esp+14h] [ebp-10h] BYREF
  int a2;         // [esp+18h] [ebp-Ch] BYREF
  unk00334 *a7;   // [esp+1Ch] [ebp-8h] BYREF
  unk00334 *a8;   // [esp+20h] [ebp-4h] BYREF

  v5 = sub_1001A550(guidOrRefreshRate);
  if (!v5)
    return -2005522670;
  if (a3) {
    v7 = &a3->lpGUID;
  } else {
    u334 = this->? ;
    if (u334)
      v7 = &u334->lpGUID;
    else
      v7 = 0;
  }
  if (a4) {
    meth_unk00334_1001AC80((unk00334 *)a4, &a2, &a3a, &a4a, (int *)&guidOrRefreshRate);
  } else {
    a2 = 640;
    a3a = 480;
    a4a = 16;
    guidOrRefreshRate = 0;
  }
  if (!s_unk00334_1001A6E0(v5, (int)v7, a2, a3a, a4a, (int)guidOrRefreshRate, &a7, &a8))
    return -2005522671;
  v9 = this-> ? ;
  v10 = this->? ;
  a3 = this-> ? ;
  meth_unk0008C_ReleaseDDrawD3D(this);
  v11 = a7;
  v12 = a8;
  this->? = v5;
  this->? = v11;
  this->? = v12;
  v13 = meth_unk0008C_1000A2C0(this);
  if (v13 >= 0) {
    SendMessageA(this->?, 0xBD2u, 0, 0);
    result = 0;
  } else {
    meth_unk0008C_ReleaseDDrawD3D(this);
    v14 = a3;
    this->? = v9;
    this->? = v14;
    this->? = v10;
    meth_unk0008C_1000A2C0(this);
    result = v13;
  }
  return result;
}

//----- (1000B4D0) --------------------------------------------------------
HRESULT __thiscall meth_unk0008C_1000B4D0(unk0008C *this, int a2, int a3, int a4, int a5) {
  unk00334 *v6;   // edi
  unk00228 *v7;   // ebp
  unk00334 *v8;   // eax
  unk00334 *v9;   // ebx
  HRESULT result; // eax
  unk00334 *v11;  // edi
  int v12;        // edi
  unk00334 *v13;  // [esp+10h] [ebp-4h]

  if ( !this->? || !IsWindow(this->?) )
    return -2005522669;
  v6 = this->            ? ;
  v7 = (unk00228 *)this->? ;
  v13 = this->           ? ;
  v8 = meth_unk00334_1001B490(v6, a2, a3, a4, 0, 0, 0);
  v9 = v8;
  if (!v8)
    return 2289444626;
  if (meth_unk00334_1001ACF0(v8, v7)) {
    v11 = 0;
  } else {
    v11 = (unk00334 *)meth_unk00334_1001B7C0(v6, &v7->guid, v9, (unk00228 *)&a4, 0);
    if (!v11) {
      v11 = (unk00334 *)a4;
      if (!a4)
        return -2005522671;
    }
  }
  meth_unk0008C_ReleaseDDrawSurface(this);
  meth_unk0008C_ReleaseDDraw2Surface(this);
  this->? = v9;
  if (v11)
    this->? = v11;
  result = meth_unk0008C_1000A5D0(this);
  if (result >= 0) {
    v12 = meth_unk0008C_1000A820(this);
    if (v12 < 0) {
      this->? = v13;
    LABEL_17:
      this->? = (unk00334 *)v7;
      meth_unk0008C_1000A5D0(this);
      meth_unk0008C_1000A820(this);
      meth_unk0008C_1000AB70(this);
      return v12;
    }
    v12 = meth_unk0008C_1000AB70(this);
    if (v12 < 0) {
      meth_unk0008C_ReleaseDDraw2Surface(this);
      this->? = v13;
      goto LABEL_17;
    }
    SendMessageA(this->?, 0xBD3u, 0, 0);
    result = 0;
  }
  return result;
}

//----- (1000B680) --------------------------------------------------------
IDirectDrawSurface *__cdecl DDrawCreateSurface(
    IDirectDraw2 *ddraw2, LPCSTR filepath, int cx_, int cy, LPDDSURFACEDESC a5) {
  HINSTANCE hInst;                   // eax
  void *result_1;                    // ebx
  IDirectDrawSurface *result;        // eax
  IDirectDraw2Vtbl *ddrawVtbl;       // ecx
  IDirectDrawSurface *ddrawSurface0; // [esp-18h] [ebp-B0h]
  IDirectDrawSurface *ddrawSurface1; // [esp+10h] [ebp-88h] BYREF
  BITMAP bitmap;                     // [esp+14h] [ebp-84h] BYREF
  DDSURFACEDESC surfaceDesc;         // [esp+2Ch] [ebp-6Ch] BYREF

  hInst = GetModuleHandleA(0);
  result_1 = LoadImageA(hInst, filepath, 0, cx_, cy, LR_CREATEDIBSECTION);
  if (result_1 || (result = (IDirectDrawSurface *)LoadImageA(0, filepath, 0, cx_, cy, 0x2010u),
                   (result_1 = result) != 0)) {
    GetObjectA(result_1, 24, &bitmap);
    memset(&surfaceDesc, 0, sizeof(surfaceDesc));
    surfaceDesc.dwHeight = bitmap.bmHeight;
    surfaceDesc.dwWidth = bitmap.bmWidth;
    ddrawVtbl = ddraw2->lpVtbl;
    surfaceDesc.dwSize = 108;
    surfaceDesc.dwFlags = 7;
    surfaceDesc.ddsCaps.dwCaps = 64;
    if (ddrawVtbl->CreateSurface(ddraw2, &surfaceDesc, &ddrawSurface1, 0)) {
      result = 0;
    } else {
      ddrawSurface0 = ddrawSurface1;
      qmemcpy(a5, &surfaceDesc, sizeof(_DDSURFACEDESC));
      graphics_1000B820(ddrawSurface0, result_1, 0, 0, 0, 0);
      DeleteObject(result_1);
      result = ddrawSurface1;
    }
  }
  return result;
}

//----- (1000B790) --------------------------------------------------------
HRESULT __cdecl DDCopyBitmap(IDirectDrawSurface *ddSurface, LPCSTR name) {
  HMODULE v2;     // eax
  HANDLE v3;      // esi
  HRESULT result; // eax
  HRESULT v5;     // edi

  v2 = GetModuleHandleA(0);
  v3 = LoadImageA(v2, name, 0, 0, 0, 0x2000u);
  if (v3 || (v3 = LoadImageA(0, name, 0, 0, 0, 0x2010u)) != 0) {
    v5 = graphics_1000B820(ddSurface, v3, 0, 0, 0, 0);
    if (v5)
      OutputDebugStringA(aDdcopybitmapFa);
    DeleteObject(v3);
    result = v5;
  } else {
    OutputDebugStringA(aHandleIsNull);
    result = -2147467259;
  }
  return result;
}

//----- (1000B820) --------------------------------------------------------
HRESULT __cdecl graphics_1000B820(
    IDirectDrawSurface *ddSurface, HGDIOBJ hGDIOBJ, int xSrc, int ySrc, int wSrc, int hSrc) {
  IDirectDrawSurfaceVtbl *ddSurfaceVtbl; // edi
  HDC hDC;                               // ebx
  int wSrc_1;                            // ebp
  HDC hdcDest;                           // [esp+18h] [ebp-8Ch] BYREF
  HRESULT hr;                            // [esp+1Ch] [ebp-88h]
  BITMAP pv;                             // [esp+20h] [ebp-84h] BYREF
  DDSURFACEDESC ddSurfaceDesc;           // [esp+38h] [ebp-6Ch] BYREF

  if (!hGDIOBJ || !ddSurface)
    return 0x80004005;
  ddSurfaceVtbl = ddSurface->lpVtbl;
  ddSurface->lpVtbl->Restore(ddSurface);
  hDC = CreateCompatibleDC(0);
  if (!hDC)
    OutputDebugStringA(aCreatecompatib);
  SelectObject(hDC, hGDIOBJ);
  GetObjectA(hGDIOBJ, 24, &pv);
  wSrc_1 = wSrc;
  if (!wSrc)
    wSrc_1 = pv.bmWidth;
  if (!hSrc)
    hSrc = pv.bmHeight;
  ddSurfaceDesc.dwSize = 108;
  ddSurfaceDesc.dwFlags = 6;
  ddSurfaceVtbl->GetSurfaceDesc(ddSurface, &ddSurfaceDesc);
  hr = ddSurfaceVtbl->GetDC(ddSurface, &hdcDest);
  if (!hr) {
    StretchBlt(hdcDest,
               0,
               0,
               ddSurfaceDesc.dwWidth,
               ddSurfaceDesc.dwHeight,
               hDC,
               xSrc,
               ySrc,
               wSrc_1,
               hSrc,
               SRCCOPY);
    ddSurfaceVtbl->ReleaseDC(ddSurface, hdcDest);
  }
  DeleteDC(hDC);
  return hr;
}

//----- (1000B940) --------------------------------------------------------
int __cdecl graphics_CalcColorSpaceValue(LPDIRECTDRAWSURFACE surface, COLORREF color) {
  IDirectDrawSurfaceVtbl *surfaceVtbl2; // edi
  IDirectDrawSurfaceVtbl *surfaceVtbl;  // ebx
  HRESULT(__stdcall * surfaceLock)
  (IDirectDrawSurface *, LPRECT, LPDDSURFACEDESC, DWORD, HANDLE); // edi
  int i;                                                          // eax
  int ret;                                                        // edi
  HDC hdc;                                                        // [esp+40h] [ebp-78h] BYREF
  int negative1;                                                  // [esp+44h] [ebp-74h]
  COLORREF colorRef;                                              // [esp+48h] [ebp-70h]
  DDSURFACEDESC surfaceDesc;                                      // [esp+4Ch] [ebp-6Ch] BYREF

  negative1 = -1;
  if (color != -1) {
    surfaceVtbl2 = surface->lpVtbl;
    if (!surface->lpVtbl->GetDC(surface, &hdc)) {
      colorRef = GetPixel(hdc, 0, 0);
      SetPixel(hdc, 0, 0, color);
      surfaceVtbl2->ReleaseDC(surface, hdc);
    }
  }
  surfaceVtbl = surface->lpVtbl;
  memset(&surfaceDesc, 0, sizeof(surfaceDesc));
  surfaceLock = surfaceVtbl->Lock;
  surfaceDesc.dwSize = 108;
  for (i = surfaceLock(surface, 0, &surfaceDesc, 0, 0); i == 2289435164;
       i = surfaceLock(surface, 0, &surfaceDesc, 0, 0))
    ;
  if (i) {
    ret = negative1;
  } else {
    ret = *(_DWORD *)surfaceDesc.lpSurface; // ?
    if (surfaceDesc.ddpfPixelFormat.dwRGBBitCount < 0x20)
      ret &= (1 << SLOBYTE(surfaceDesc.ddpfPixelFormat.dwRGBBitCount)) - 1;
    surfaceVtbl->Unlock(surface, 0);
  }
  if (color != -1 && !surfaceVtbl->GetDC(surface, &hdc)) {
    SetPixel(hdc, 0, 0, colorRef);
    surfaceVtbl->ReleaseDC(surface, hdc);
  }
  return ret;
}

//----- (1000BA40) --------------------------------------------------------
HRESULT __cdecl graphics_1000BA40(LPDIRECTDRAWSURFACE surface, COLORREF color) {
  DWORD colorSpaceValue;               // eax
  IDirectDrawSurfaceVtbl *surfaceVtbl; // ecx
  DDCOLORKEY v5;                       // [esp+4h] [ebp-8h] BYREF

  colorSpaceValue = graphics_CalcColorSpaceValue(surface, color);
  surfaceVtbl = surface->lpVtbl;
  v5.dwColorSpaceLowValue = colorSpaceValue;
  v5.dwColorSpaceHighValue = colorSpaceValue;
  return surfaceVtbl->SetColorKey(surface, 8, &v5);
}

//----- (1000BA70) --------------------------------------------------------
void sub_1000BA70() {
  int v0;      // edx
  bool v1;     // zf
  int v2;      // eax
  __int16 *v3; // ecx

  if (dword_10277B20) {
    v0 = dword_1039B6C0;
    while (1) {
    LABEL_3:
      v0 += dword_10277B20;
      dword_1039B6C0 = v0;
      if (v0 >= *(int *)&gUnk06594.gap4918[20]) {
        v0 = 0;
        dword_1039B6C0 = 0;
      }
      v1 = v0 == 0;
      if (v0 < 0) {
        v0 = *(_DWORD *)&gUnk06594.gap4918[20] - 1;
        dword_1039B6C0 = *(_DWORD *)&gUnk06594.gap4918[20] - 1;
        v1 = *(_DWORD *)&gUnk06594.gap4918[20] == 1;
      }
      if (v1)
        break;
      v2 = 0;
      if (dword_103643B4 > 0) {
        v3 = word_10362F28;
        while (v0 != (unsigned __int16)*v3) {
          ++v2;
          ++v3;
          if (v2 >= dword_103643B4)
              goto LABEL_3;
        }
        break;
      }
    }
    dword_10277B20 = 0;
  }
}
// 10277B20: using guessed type int dword_10277B20;
// 103643B4: using guessed type int dword_103643B4;
// 1039B6C0: using guessed type int dword_1039B6C0;

//----- (1000BAF0) --------------------------------------------------------
void __cdecl np_sub_1000BAF0(SIZE_T *a1, int a2, int a3, int a4) {
  int v4;                 // ecx
  int *v5;                // eax
  int v6;                 // eax
  int *v7;                // edi
  int v8;                 // esi
  int v9;                 // eax
  HGLOBAL v10;            // eax
  HGLOBAL v11;            // eax
  LPARAM lParam;          // [esp+10h] [ebp-508h] BYREF
  CHAR OutputString[260]; // [esp+14h] [ebp-504h] BYREF
  char buffer[1024];      // [esp+118h] [ebp-400h] BYREF

  lParam = 0;
  if (dword_10AA288C) {
    if (!a1[4]) {
      if (a1[3])
        sub_100360F0((int)a1, a2, a3, (void *)a4);
      else
        np_sub_10003580((int)a1, a2, a3, a4);
    }
  } else {
    switch (*(_DWORD *)a2) {
    case 0x60000000:
      sub_1003D3A0(*a1, a4, (LPCSTR)(a2 + 4), (int)&lParam, 0);
      goto LABEL_36;
    case 0x60000001:
      sub_1003D3A0(*a1, a4, (LPCSTR)(a2 + 4), (int)&lParam, 1);
      goto LABEL_36;
    case 0x60000002:
      if (a4 == 1) {
        v4 = 0;
        v5 = dword_10AA2538;
        while (*v5 != -1) {
          v5 += 3;
          ++v4;
          if ((int)v5 >= (int)&dword_10AA2598)
              goto LABEL_36;
        }
        v6 = 3 * v4;
        dword_10AA2538[v6] = 1;
        dword_10AA253C[v6] = 1;
        sprintf(OutputString, "Host set ready message received, ID: %d\n", 1);
        OutputDebugStringA(OutputString);
      } else {
        v7 = dword_10AA253C;
        do {
          if (*(v7 - 1) == a4) {
              *v7 = *(_DWORD *)(a2 + 4);
              sprintf(
                  OutputString, "APPMSG_PLAYERREADY: Set: %d, ID: %d\n", *(_DWORD *)(a2 + 4), a4);
              OutputDebugStringA(OutputString);
          }
          v7 += 3;
        } while ((int)v7 < (int)&unk_10AA259C);
      }
    LABEL_36:
      if (lParam) {
        if (gHwnd) {
          PostMessageA(gHwnd, 0x501u, 0, lParam);
        } else {
          v10 = GlobalHandle((LPCVOID)lParam);
          GlobalUnlock(v10);
          v11 = GlobalHandle((LPCVOID)lParam);
          GlobalFree(v11);
        }
      }
      break;
    case 0x60000003:
      dword_10AA288C = 1;
      sprintf(OutputString, aAppmsgHoststar);
      OutputDebugStringA(OutputString);
      return;
    case 0x60000004:
      if (a1[2] == *(_DWORD *)(a2 + 4))
        dword_10AA2894 = 1;
      sprintf(OutputString, aAppmsgBootplay);
      OutputDebugStringA(OutputString);
      goto LABEL_36;
    case 0x60000005:
      v8 = *(_DWORD *)(a2 + 4);
      switch (v8) {
      case 4:
        sub_10072AF0(4, 0x200020u);
        dword_10AA2854 = 4;
        break;
      case 5:
        sub_10072AF0(5, 0x200020u);
        dword_10AA2854 = 5;
        break;
      case 6:
        sub_10072AF0(6, 0x200020u);
        dword_10AA2854 = 6;
        break;
      case 7:
        sub_10072AF0(7, 0x200020u);
        dword_10AA2854 = 7;
        break;
      }
      goto LABEL_36;
    case 0x60000006:
      if (a4 == *(_DWORD *)(a2 + 4))
        sub_1003D3A0(*a1, a4, aLeftTheRace, (int)&lParam, 1);
      goto LABEL_36;
    case 0x60000007:
      if (a4 == *(_DWORD *)(a2 + 4))
        sub_1003D3A0(*a1, a4, aReturnedToRace, (int)&lParam, 1);
      goto LABEL_36;
    case 0x60000008:
      if (a4 == 1) {
        v9 = *(_DWORD *)(a2 + 8);
        if (v9 >= 0 && v9 < 8) {
          sprintf(buffer, " finished %s", gPositionStrings[v9]);
          sub_1003D3A0(*a1, *(_DWORD *)(a2 + 4), buffer, (int)&lParam, 1);
        }
      }
      goto LABEL_36;
    default:
      goto LABEL_36;
    }
  }
}
// 100AAC48: using guessed type char *gPositionStrings[20];
// 10AA2538: using guessed type int dword_10AA2538[];
// 10AA253C: using guessed type int dword_10AA253C[];
// 10AA2598: using guessed type int dword_10AA2598;
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA288C: using guessed type int dword_10AA288C;
// 10AA2894: using guessed type int dword_10AA2894;

//----- (1000BEA0) --------------------------------------------------------
void __cdecl np_sub_1000BEA0(int a1, int *a2) {
  int v2; // eax
  int v3; // eax

  v2 = *a2;
  if ((unsigned int)*a2 > 0x21) {
    if (v2 == 263)
      np_sub_10003580(a1, a2[3], a2[4], a2[2]);
  } else if (*a2 != 33) {
    v3 = v2 - 3;
    if (v3) {
      if (v3 == 2 && !dword_100AC300)
        np_sub_10005FE0(a2[2]);
    }
  }
}
// 100AC300: using guessed type int dword_100AC300;

//----- (1000C000) --------------------------------------------------------
void __cdecl np_sub_1000C000(int a1, int *a2) {
  int v2; // eax
  int v3; // eax

  v2 = *a2;
  if ((unsigned int)*a2 > 0x21) {
    if (v2 == 263)
      sub_100360F0(a1, a2[3], a2[4], (void *)a2[2]);
  } else if (*a2 != 33) {
    v3 = v2 - 3;
    if (v3) {
      if (v3 == 2 && !dword_100AC300) {
        sub_10071480(a2[2]);
        np_sub_10005FE0(a2[2]);
      }
    }
  }
}
// 100AC300: using guessed type int dword_100AC300;

//----- (1000C170) --------------------------------------------------------
void __cdecl np_sub_1000C170(int a1, _DWORD *a2) {
  CHAR *v2;               // esi
  const CHAR *v3;         // edi
  int v4;                 // ebp
  int v5;                 // eax
  HGLOBAL v6;             // eax
  CHAR *v7;               // eax
  int v8;                 // ecx
  int *v9;                // eax
  int v10;                // eax
  const CHAR *v11;        // edi
  int v12;                // ebx
  int v13;                // eax
  HGLOBAL v14;            // eax
  CHAR *v15;              // eax
  HGLOBAL v16;            // eax
  HGLOBAL v17;            // eax
  CHAR OutputString[260]; // [esp+10h] [ebp-104h] BYREF

  if (*(_DWORD *)(a1 + 12))
    np_sub_1000C000(a1, a2);
  else
    np_sub_1000BEA0(a1, a2);
  if (!dword_100AC300)
    return;
  v2 = 0;
  if (*a2 == 3) {
    v11 = (const CHAR *)a2[8];
    if (!v11)
      v11 = aUnknown;
    v12 = lstrlenA(aSJoinedTheGame);
    v13 = lstrlenA(v11);
    v14 = GlobalAlloc(0x42u, v12 + v13 + 1);
    v15 = (CHAR *)GlobalLock(v14);
    v2 = v15;
    if (v15) {
      wsprintfA(v15, "%s joined the game.\r\n", v11);
    LABEL_21:
      if (v2) {
        if (gHwnd) {
          PostMessageA(gHwnd, 0x501u, 0, (LPARAM)v2);
        } else {
          v16 = GlobalHandle(v2);
          GlobalUnlock(v16);
          v17 = GlobalHandle(v2);
          GlobalFree(v17);
        }
      }
      return;
    }
  } else {
    if (*a2 != 5) {
      if (*a2 == 260)
        sub_1003CE80();
      goto LABEL_21;
    }
    v3 = (const CHAR *)a2[9];
    if (!v3)
      v3 = aUnknown;
    v4 = lstrlenA(String);
    v5 = lstrlenA(v3);
    v6 = GlobalAlloc(0x42u, v4 + v5 + 1);
    v7 = (CHAR *)GlobalLock(v6);
    v2 = v7;
    if (v7) {
      wsprintfA(v7, "%s left the game.\r\n", v3);
      v8 = 0;
      v9 = dword_10AA2538;
      while (*v9 != a2[2]) {
        v9 += 3;
        ++v8;
        if ((int)v9 >= (int)&dword_10AA2598)
          goto LABEL_21;
      }
      v10 = 3 * v8;
      dword_10AA2538[v10] = -1;
      dword_10AA253C[v10] = 0;
      sprintf(OutputString, "Destroy Player message received, ID: %d\n", a2[2]);
      OutputDebugStringA(OutputString);
      goto LABEL_21;
    }
  }
}
// 100AC300: using guessed type int dword_100AC300;
// 10AA2538: using guessed type int dword_10AA2538[];
// 10AA253C: using guessed type int dword_10AA253C[];
// 10AA2598: using guessed type int dword_10AA2598;

//----- (1000C350) --------------------------------------------------------
int __cdecl sub_1000C350(int a1) {
  SIZE_T *v1;     // ebx
  _DWORD *v2;     // esi
  _DWORD *v3;     // eax
  int v4;         // ecx
  int v5;         // edi
  HGLOBAL v6;     // eax
  HGLOBAL v7;     // eax
  HGLOBAL v8;     // eax
  HGLOBAL v9;     // eax
  HGLOBAL v10;    // eax
  SIZE_T dwBytes; // [esp+18h] [ebp-8h] BYREF
  int v13;        // [esp+1Ch] [ebp-4h] BYREF

  v1 = (SIZE_T *)a1;
  v2 = 0;
  dwBytes = 0;
  while (1) {
    do {
      v3 = (_DWORD *)*v1;
      v4 = *(_DWORD *)*v1;
      v13 = 0;
      a1 = 0;
      v5 = (*(int(__stdcall **)(_DWORD *, int *, int *, int, _DWORD *, SIZE_T *))(v4 + 100))(
          v3, &v13, &a1, 1, v2, &dwBytes);
      if (v5 != -2005467106)
        break;
      if (v2) {
        v6 = GlobalHandle(v2);
        GlobalUnlock(v6);
        v7 = GlobalHandle(v2);
        GlobalFree(v7);
      }
      v8 = GlobalAlloc(GHND, dwBytes);
      v2 = GlobalLock(v8);
      if (!v2)
        v5 = -2147024882;
    } while (v5 == -2005467106);
    if (v5 < 0)
      break;
    if (dwBytes >= 4) {
      if (v13)
        np_sub_1000BAF0(v1, (int)v2, dwBytes, v13);
      else
        np_sub_1000C170((int)v1, v2);
    }
  }
  if (v2) {
    v9 = GlobalHandle(v2);
    GlobalUnlock(v9);
    v10 = GlobalHandle(v2);
    GlobalFree(v10);
  }
  return 0;
}
// 1000C40E: conditional instruction was optimized away because of 'edi.4>=0'

//----- (1000C440) --------------------------------------------------------
void __stdcall __noreturn StartAddress(LPVOID lpThreadParameter) {
  HANDLE Handles[2]; // [esp+8h] [ebp-8h] BYREF

  Handles[0] = *((HANDLE *)lpThreadParameter + 1);
  Handles[1] = hEvent;
  while (!WaitForMultipleObjects(2u, Handles, 0, INFINITE))
    sub_1000C350((int)lpThreadParameter);
  ExitThread(0);
}

//----- (1000C4A0) --------------------------------------------------------
int sub_1000C4A0() {
  int result; // eax
  int v1;     // edx

  result = 0;
  if (dword_10A9D008 && *(_DWORD *)dword_10A9D008) {
    v1 = *(_DWORD *)(dword_10A9D008 + 8);
    if (v1) {
      result = (*(int(__stdcall **)(_DWORD, int))(**(_DWORD **)dword_10A9D008 + 36))(
          *(_DWORD *)dword_10A9D008, v1);
      *(_DWORD *)(dword_10A9D008 + 8) = 0;
    }
  }
  return result;
}

//----- (1000C4D0) --------------------------------------------------------
int __cdecl sub_1000C4D0(int a1, int a2, int a3, int a4, int a5, int a6) {
  int v6; // esi

  EnterCriticalSection(&CriticalSection);
  v6 = (*(int(__stdcall **)(int, int, int, int, int, int))(*(_DWORD *)a1 + 104))(
      a1, a2, a3, a4, a5, a6);
  LeaveCriticalSection(&CriticalSection);
  return v6;
}

//----- (1000C510) --------------------------------------------------------
int __cdecl sub_1000C510(HANDLE *a1) {
  if (dword_10277B60) {
    DeleteCriticalSection(&CriticalSection);
    dword_10277B60 = 0;
  }
  if (dword_10277B54) {
    SetEvent(hEvent);
    WaitForSingleObject(dword_10277B54, INFINITE);
    CloseHandle(dword_10277B54);
    dword_10277B54 = 0;
  }
  if (hEvent) {
    CloseHandle(hEvent);
    hEvent = 0;
  }
  if (a1) {
    if (*a1) {
      if (a1[2]) {
        (*(void(__stdcall **)(HANDLE, HANDLE))(*(_DWORD *)*a1 + 36))(*a1, a1[2]);
        a1[2] = 0;
      }
      (*(void(__stdcall **)(HANDLE))(*(_DWORD *)*a1 + 16))(*a1);
      (*(void(__stdcall **)(HANDLE))(*(_DWORD *)*a1 + 8))(*a1);
      *a1 = 0;
    }
    if (a1[1]) {
      CloseHandle(a1[1]);
      a1[1] = 0;
    }
  }
  return 0;
}
// 1000C5AD: conditional instruction was optimized away because of '%arg_0.4!=0'
// 10277B60: using guessed type int dword_10277B60;

//----- (1000C5D0) --------------------------------------------------------
int __cdecl sub_1000C5D0(int a1, LPVOID lpParameter) {
  HANDLE v2; // eax

  if (!dword_10277B60) {
    InitializeCriticalSection(&CriticalSection);
    dword_10277B60 = 1;
  }
  *(_DWORD *)lpParameter = 0;
  *((_DWORD *)lpParameter + 1) = 0;
  *((_DWORD *)lpParameter + 2) = 0;
  *((_DWORD *)lpParameter + 3) = 0;
  *((_DWORD *)lpParameter + 4) = 0;
  v2 = CreateEventA(0, 0, 0, 0);
  *((_DWORD *)lpParameter + 1) = v2;
  if (v2) {
    hEvent = CreateEventA(0, 0, 0, 0);
    if (hEvent) {
      dword_10277B54 =
          CreateThread(0, 0, (LPTHREAD_START_ROUTINE)StartAddress, lpParameter, 0, &ThreadId);
      if (dword_10277B54)
        return 0;
    }
  }
  sub_1000C510((HANDLE *)lpParameter);
  return -2147024882;
}
// 10277B60: using guessed type int dword_10277B60;

//----- (1000C670) --------------------------------------------------------
int sub_1000C670() {
  int v1;       // esi
  HGLOBAL v2;   // eax
  HGLOBAL v3;   // eax
  LPCVOID pMem; // [esp+0h] [ebp-4h] BYREF

  pMem = 0;
  if (sub_1003D0B0(unk, (LPDWORD)&pMem) < 0)
    return 0xFFFF;
  v1 = *((_DWORD *)pMem + 11);
  v2 = GlobalHandle(pMem);
  GlobalUnlock(v2);
  v3 = GlobalHandle(pMem);
  GlobalFree(v3);
  return v1;
}

//----- (1000C6D0) --------------------------------------------------------
int sub_1000C6D0() {
  GetDesktopWindow();
  return sub_1003BD80();
}

//----- (1000C6E0) --------------------------------------------------------
int __cdecl sub_1000C6E0(int a1) {
  int result;        // eax
  float *v2;         // edi
  _DWORD *v3;        // eax
  _DWORD *v4;        // eax
  _DWORD *v5;        // eax
  _DWORD *v6;        // eax
  _DWORD *v7;        // eax
  char *v8;          // esi
  _DWORD *v9;        // eax
  char *v10;         // esi
  _DWORD *v11;       // eax
  _DWORD *v12;       // eax
  _DWORD *v13;       // eax
  _DWORD *v14;       // eax
  _DWORD *v15;       // eax
  _DWORD *v16;       // eax
  _DWORD *v17;       // eax
  _DWORD *v18;       // eax
  _DWORD *v19;       // eax
  _DWORD *v20;       // eax
  _DWORD *v21;       // eax
  int v22;           // edx
  _DWORD *v23;       // eax
  unsigned int *v24; // [esp-50h] [ebp-58h]
  unsigned int *v25; // [esp-50h] [ebp-58h]
  int i;             // [esp+4h] [ebp-4h]

  result = dword_106C3308;
  if (*(_DWORD *)(dword_106C3308 + 32956)) {
    v2 = (float *)(a1 + 64);
    for (i = 4; i; --i) {
      v3 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v3 = -419430400;
      v3[1] = 0;
      v4 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v4 = -1174399998;
      v4[1] = 0x100000;
      if (*(_BYTE *)(a1 + 10671) == 2) {
        v5 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v5 = -1191181539;
        v5[1] = dword_10277E5C | 0x104A50;
        v6 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v6 = -83886080;
        v6[1] = (unsigned __int8)dword_10277E14;
        v24 = (unsigned int *)dword_106C0680;
        dword_106C0680 += 8;
        sub_1002F900(v24, 1001, 0, 1004, 0, 0, 0, 0, 1001, 0, 0, 0, 1000, 1000, 0, 1005, 0);
      } else {
        v25 = (unsigned int *)dword_106C0680;
        dword_106C0680 += 8;
        sub_1002F900(v25, 1001, 0, 1004, 0, 0, 0, 0, 1001, 0, 0, 0, 1000, 0, 0, 0, 1000);
        v7 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v7 = -1191181539;
        v7[1] = dword_10277E5C | 0x112230;
      }
      sub_100310F0((int)&flt_106C08A0, 0.0039215689, 998277249, 998277249);
      sub_100306C0(&flt_106C08A0, v2, flt_10277D88);
      v8 = sub_10069490();
      sub_100307A0(flt_10277D88, v8);
      v9 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v9 = 17170496;
      v9[1] = v8;
      sub_100306C0(flt_10277D88, &flt_106C29A8, &flt_106C0860);
      v10 = sub_10069490();
      sub_100307A0(&flt_106C0860, v10);
      v11 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v11 = 60686352;
      v11[1] = v10;
      v12 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v12 = 60293136;
      v12[1] = v10 + 16;
      v13 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v13 = 60424208;
      v13[1] = v10 + 32;
      v14 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v14 = 60555280;
      v14[1] = v10 + 48;
      v15 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v15 = -1157627903;
      v15[1] = -1;
      v16 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v16 = -1241513984;
      v16[1] = 786432;
      v17 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v17 = -402653184;
      v17[1] = 0;
      v18 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v18 = -183500800;
      v18[1] = 117440512;
      v19 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v19 = -184548880;
      v19[1] = 100663296;
      v20 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v20 = -184549120;
      v20[1] = 83886080;
      if (*(_DWORD *)&gUnk06594.gap1C8[12504]) {
        if (*(_DWORD *)(dword_106C3308 + 32964)) {
          v21 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v21 = 100663296;
          v22 = *(_DWORD *)(dword_106C3308 + 32964);
        LABEL_11:
          v21[1] = v22;
          goto LABEL_12;
        }
      } else if (*(_DWORD *)(dword_106C3308 + 32956)) {
        v21 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v21 = 100663296;
        v22 = *(_DWORD *)(dword_106C3308 + 32956);
        goto LABEL_11;
      }
    LABEL_12:
      v2 += 16;
      v23 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v23 = -1124073472;
      v23[1] = 0;
      result = i - 1;
    }
  }
  return result;
}
// 10277E14: using guessed type int dword_10277E14;
// 10277E5C: using guessed type int dword_10277E5C;
// 106C0680: using guessed type int dword_106C0680;
// 106C0860: using guessed type float flt_106C0860;
// 106C08A0: using guessed type float flt_106C08A0;
// 106C29A8: using guessed type float flt_106C29A8;
// 106C3308: using guessed type int dword_106C3308;

//----- (1000CA90) --------------------------------------------------------
int __cdecl sub_1000CA90(int a1) {
  int result;  // eax
  float *v2;   // edi
  int v3;      // eax
  float v4[3]; // [esp+8h] [ebp-Ch] BYREF

  result = *(_DWORD *)(a1 + 3848);
  if (result) {
    v2 = (float *)(a1 + 48);
    sub_1003B0E0((float *)(a1 + 48), (float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 48));
    dword_10277E60[*(_DWORD *)(a1 + 320)] = 0;
    dword_10277B68[*(_DWORD *)(a1 + 320)] = 0;
    *(float *)(a1 + 10032) = sub_10031D3F((float *)(a1 + 48));
    if (a1 == dword_106C2CF8)
      goto LABEL_10;
    if (*(_DWORD *)&gUnk06594.gap1C8[12500] || *(_DWORD *)&gUnk06594.gap1C8[12508]) {
      sub_1003AFE0((int)v4, a1 + 48, a1, 6.0);
      if (!sub_1003A950(v4[0], v4[1])) {
        result = sub_1003A950(*v2, *(float *)(a1 + 52));
        if (!result)
          return result;
      }
    } else {
      result = sub_1003A950(*v2, *(float *)(a1 + 52));
      if (!result)
        return result;
    }
    if (a1 == dword_106C2CF8) {
    LABEL_10:
      v3 = *(_DWORD *)(a1 + 10036);
      if ((v3 == a1 + 10044 || v3 == a1 + 10384) && !*(_DWORD *)&gUnk06594.gap1C8[12492]) {
        result = *(_DWORD *)(a1 + 320);
        dword_10277B68[result] = 1;
        return result;
      }
    }
    result = 1;
    if (*(_BYTE *)(a1 + 10671) != 2)
      dword_10277E60[*(_DWORD *)(a1 + 320)] = 1;
    dword_10277B68[*(_DWORD *)(a1 + 320)] = 1;
  }
  return result;
}
// 106C2CF8: using guessed type int dword_106C2CF8;

//----- (1000CBE0) --------------------------------------------------------
int __cdecl sub_1000CBE0(float a1, int a2) {
  int result;            // eax
  int v4;                // edi
  double v5;             // st7
  _DWORD *v6;            // esi
  unsigned __int16 v7;   // dx
  int v8;                // eax
  int v9;                // esi
  int v10;               // esi
  double v11;            // st7
  int v12;               // edx
  int v13;               // esi
  unsigned __int16 v14;  // cx
  int v15;               // edi
  int v16;               // edx
  unsigned __int16 v17;  // dx
  _DWORD *v18;           // eax
  _DWORD *v19;           // eax
  double v20;            // st7
  double v21;            // st7
  _DWORD *v22;           // eax
  _DWORD *v23;           // eax
  _DWORD *v24;           // eax
  _DWORD *v25;           // eax
  int v26;               // esi
  __int64 v27;           // rax
  _DWORD *v28;           // eax
  _DWORD *v29;           // eax
  _DWORD *v30;           // eax
  _DWORD *v31;           // eax
  _DWORD *v32;           // eax
  _DWORD *v33;           // eax
  _DWORD *v34;           // eax
  _DWORD *v35;           // eax
  _DWORD *v36;           // eax
  _DWORD *v37;           // eax
  _DWORD *v38;           // eax
  _DWORD *v39;           // eax
  _DWORD *v40;           // eax
  _DWORD *v41;           // eax
  _DWORD *v42;           // eax
  _DWORD *v43;           // eax
  _DWORD *v44;           // eax
  _DWORD *v45;           // eax
  _DWORD *v46;           // eax
  _DWORD *v47;           // eax
  _DWORD *v48;           // eax
  _DWORD *v49;           // eax
  _DWORD *v50;           // eax
  _DWORD *v51;           // eax
  _DWORD *v52;           // eax
  _DWORD *v53;           // eax
  _DWORD *v54;           // eax
  _DWORD *v55;           // eax
  _DWORD *v56;           // eax
  _DWORD *v57;           // eax
  _DWORD *v58;           // eax
  _DWORD *v59;           // eax
  _DWORD *v60;           // eax
  _DWORD *v61;           // eax
  _DWORD *v62;           // eax
  _DWORD *v63;           // eax
  unsigned int *v64;     // ecx
  _DWORD *v65;           // eax
  _DWORD *v66;           // eax
  _DWORD *v67;           // eax
  _DWORD *v68;           // eax
  _DWORD *v69;           // eax
  _DWORD *v70;           // eax
  _DWORD *v71;           // ecx
  _DWORD *v72;           // eax
  _DWORD *v73;           // eax
  _DWORD *v74;           // eax
  _DWORD *v75;           // eax
  _DWORD *v76;           // eax
  _DWORD *v77;           // eax
  int v78;               // edx
  _DWORD *v79;           // eax
  _DWORD *v80;           // eax
  _DWORD *v81;           // eax
  _DWORD *v82;           // eax
  _DWORD *v83;           // eax
  _DWORD *v84;           // eax
  _DWORD *v85;           // eax
  _DWORD *v86;           // eax
  _DWORD *v87;           // eax
  _DWORD *v88;           // eax
  _DWORD *v89;           // eax
  _DWORD *v90;           // eax
  _DWORD *v91;           // eax
  _DWORD *v92;           // eax
  _DWORD *v93;           // eax
  _DWORD *v94;           // eax
  _DWORD *v95;           // ecx
  _DWORD *v96;           // eax
  _DWORD *v97;           // eax
  _DWORD *v98;           // eax
  _DWORD *v99;           // eax
  _DWORD *v100;          // eax
  _DWORD *v101;          // eax
  _DWORD *v102;          // eax
  _DWORD *v103;          // eax
  _DWORD *v104;          // eax
  _DWORD *v105;          // eax
  _DWORD *v106;          // eax
  _DWORD *v107;          // eax
  _DWORD *v108;          // eax
  _DWORD *v109;          // eax
  _DWORD *v110;          // eax
  _DWORD *v111;          // eax
  _DWORD *v112;          // eax
  _DWORD *v113;          // eax
  _DWORD *v114;          // eax
  _DWORD *v115;          // eax
  _DWORD *v116;          // eax
  unsigned int *v117;    // ecx
  int v118;              // eax
  _DWORD *v119;          // eax
  _DWORD *v120;          // ecx
  _DWORD *v121;          // eax
  _DWORD *v122;          // eax
  _DWORD *v123;          // eax
  _DWORD *v124;          // eax
  _DWORD *v125;          // eax
  _DWORD *v126;          // eax
  _DWORD *v127;          // eax
  unsigned __int16 v128; // dx
  int v129;              // ecx
  int v130;              // edx
  unsigned __int16 v131; // dx
  _DWORD *v132;          // eax
  _DWORD *v133;          // eax
  _DWORD *v134;          // eax
  _DWORD *v135;          // eax
  unsigned int *v136;    // eax
  int v137;              // edx
  _DWORD *v138;          // eax
  int v139;              // ecx
  unsigned int *v140;    // eax
  _DWORD *v141;          // eax
  _DWORD *v142;          // eax
  _DWORD *v143;          // eax
  _DWORD *v144;          // eax
  int v145;              // ecx
  _DWORD *v146;          // eax
  _DWORD *v147;          // eax
  _DWORD *v148;          // eax
  _DWORD *v149;          // eax
  _DWORD *v150;          // eax
  _DWORD *v151;          // eax
  _DWORD *v152;          // eax
  _DWORD *v153;          // eax
  _DWORD *v154;          // eax
  _DWORD *v155;          // eax
  _DWORD *v156;          // eax
  _DWORD *v157;          // eax
  unsigned int *v158;    // [esp-Ch] [ebp-A0h]
  unsigned int *v159;    // [esp-Ch] [ebp-A0h]
  unsigned int *v160;    // [esp-Ch] [ebp-A0h]
  unsigned int *v161;    // [esp-Ch] [ebp-A0h]
  unsigned int *v162;    // [esp-Ch] [ebp-A0h]
  unsigned int *v163;    // [esp-Ch] [ebp-A0h]
  unsigned int *v164;    // [esp-Ch] [ebp-A0h]
  float v165;            // [esp+0h] [ebp-94h]
  float v166;            // [esp+8h] [ebp-8Ch]
  int v167;              // [esp+4Ch] [ebp-48h]
  int v168;              // [esp+50h] [ebp-44h]
  float v169;            // [esp+54h] [ebp-40h]
  float v170;            // [esp+58h] [ebp-3Ch]
  BOOL v171;             // [esp+5Ch] [ebp-38h]
  char *v172;            // [esp+60h] [ebp-34h]
  char *v173;            // [esp+64h] [ebp-30h]
  char *v174;            // [esp+68h] [ebp-2Ch]
  unsigned __int8 v175;  // [esp+69h] [ebp-2Bh]
  unsigned __int8 v176;  // [esp+6Ah] [ebp-2Ah]
  float v177;            // [esp+70h] [ebp-24h]
  float v178;            // [esp+74h] [ebp-20h]
  int v179[3];           // [esp+7Ch] [ebp-18h] BYREF
  float v180[3];         // [esp+88h] [ebp-Ch] BYREF
  float v181;            // [esp+98h] [ebp+4h]
  float v182;            // [esp+98h] [ebp+4h]
  float v183;            // [esp+98h] [ebp+4h]
  int v184;              // [esp+98h] [ebp+4h]
  int v185;              // [esp+9Ch] [ebp+8h]
  unsigned int *v186;    // [esp+9Ch] [ebp+8h]

  result = *(_DWORD *)(LODWORD(a1) + 3848);
  if (result) {
    if (*(_DWORD *)(LODWORD(a1) + 360)) {
      if (*(_DWORD *)(LODWORD(a1) + 368)) {
        if (*(_DWORD *)(LODWORD(a1) + 364)) {
          if (*(_DWORD *)(LODWORD(a1) + 372)) {
              result = *(_DWORD *)(LODWORD(a1) + 320);
              v4 = 0;
              v168 = 0;
              if (dword_10277B68[result]) {
                  v5 = sub_1003B0E0((float *)(LODWORD(a1) + 48),
                                    (float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 48));
                  v170 = v5;
                  if (*(_BYTE *)(LODWORD(a1) + 10671) == 2) {
                      dword_10277E14 = (__int64)(*(float *)(LODWORD(a1) + 10672) * 255.0);
                      v6 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v6 = -134217728;
                      HIBYTE(v7) = byte_106C0260;
                      LOBYTE(v7) = byte_106C1614;
                      v6[1] = (unsigned __int8)dword_10277E14 |
                              (((unsigned __int8)byte_106C0200 | (v7 << 8)) << 8);
                  }
                  v8 = *(_DWORD *)(LODWORD(a1) + 10572);
                  *(_DWORD *)(LODWORD(a1) + 10004) = 0;
                  if (v8 && (*(_BYTE *)(*(_DWORD *)&gUnk06594.gap4918[16] +
                                        84 * *(unsigned __int16 *)(LODWORD(a1) + 10508) + 76) &
                             0x10) != 0) {
                      v4 = 1;
                      *(_DWORD *)(LODWORD(a1) + 10004) = 1;
                      v168 = 1;
                  }
                  dword_106C3308 = *(_DWORD *)(LODWORD(a1) + 10692);
                  if (dword_100AA8B4 == 2) {
                      if (v5 >= 40.0) {
                          v9 = 1;
                          if (v5 >= 80.0)
                              v9 = 2;
                      } else {
                          v9 = 0;
                      }
                      if (v9 < *(int *)&gUnk06594.gap1C8[12520])
                          v9 = *(_DWORD *)&gUnk06594.gap1C8[12520];
                  } else {
                      v9 = *(_DWORD *)&gUnk06594.gap1C8[12520];
                  }
                  v10 = a2 + v9;
                  v185 = v10;
                  if (v10 > 2) {
                      v10 = 2;
                      v185 = 2;
                  }
                  v171 = v5 < 100.0;
                  sub_100310F0((int)&flt_106C08A0, 0.0039215689, 998277249, 998277249);
                  sub_100306C0(&flt_106C08A0, (float *)LODWORD(a1), flt_10277D88);
                  dword_10277DC8[*(_DWORD *)(LODWORD(a1) + 320)] = (int)sub_10069490();
                  sub_100307A0(flt_10277D88,
                               (_DWORD *)dword_10277DC8[*(_DWORD *)(LODWORD(a1) + 320)]);
                  sub_100306C0(flt_10277D88, &flt_106C29A8, &flt_106C0860);
                  sub_10031342();
                  dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)] = (int)sub_10069490();
                  sub_100307A0(&flt_106C0860,
                               (_DWORD *)dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)]);
                  if (LODWORD(a1) != dword_106C2CF8)
                      goto LABEL_26;
                  result = *(_DWORD *)(LODWORD(a1) + 10036);
                  if (result != LODWORD(a1) + 10044 && result != LODWORD(a1) + 10384)
                      goto LABEL_26;
                  if (*(_DWORD *)&gUnk06594.gap1C8[12492]) {
                  LABEL_26:
                      dword_10277D38[*(_DWORD *)(LODWORD(a1) + 320)] = v10;
                      if (*(_DWORD *)&gUnk06594.gap1C8[12500]) {
                          v11 = v170 * 0.1;
                          if (v11 < 1.0)
                              v11 = 1.0;
                          LOBYTE(v12) = 0;
                          BYTE1(v12) = (__int64)((double)(unsigned __int8)byte_106C1580 / v11);
                          v12 = (unsigned __int16)v12;
                          LOBYTE(v12) = (__int64)((double)(unsigned __int8)byte_106C335C / v11);
                          v13 = ((unsigned __int8)(__int64)((double)(unsigned __int8)byte_106C0968 /
                                                            v11) |
                                 (v12 << 8))
                                << 8;
                          LOBYTE(v14) = 0;
                          HIBYTE(v14) = byte_10690BF0;
                          v167 = v13;
                          v15 = ((unsigned __int8)gUnk06594.gap1C8[12404] |
                                 (((unsigned __int8)byte_106C0960 | v14) << 8))
                                << 8;
                      } else {
                          if (v4) {
                              v13 = 0;
                              v167 = 0;
                              v175 = (char)(4 * byte_106C0960) / 5;
                              v176 = (char)(4 * gUnk06594.gap1C8[12404]) / 5;
                              v16 = 0;
                              BYTE1(v16) = 4 * (unsigned __int8)byte_10690BF0 / 5;
                          } else {
                              LOBYTE(v17) = 0;
                              HIBYTE(v17) = byte_106C1580;
                              v13 = ((unsigned __int8)byte_106C0968 |
                                     (((unsigned __int8)byte_106C335C | v17) << 8))
                                    << 8;
                              v175 = byte_106C0960;
                              v16 = 0;
                              v167 = v13;
                              v176 = gUnk06594.gap1C8[12404];
                              BYTE1(v16) = byte_10690BF0;
                          }
                          v15 = (v176 | ((v175 | v16) << 8)) << 8;
                      }
                      v18 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v18 = 17170496;
                      v18[1] = dword_10277DC8[*(_DWORD *)(LODWORD(a1) + 320)];
                      v19 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v19 = 16973888;
                      v19[1] = dword_106C32D0;
                      if (*(_DWORD *)&gUnk06594.gap1C8[12500]) {
                          if (*(_DWORD *)&gUnk06594.gap1C8[12104] == dword_106C2CF8 + 10248)
                              sub_1003ACC0((float *)&dword_10277BA8,
                                           *(float **)&gUnk06594.gap1C8[12104]);
                          else
                              sub_1003ACC0((float *)&dword_10277BA8, (float *)dword_106C2CF8);
                      } else {
                          flt_10277BAC = *(float *)&dword_106C0674;
                          dword_10277BA8 = dword_106C0670;
                          flt_10277BB0 = *(float *)&dword_106C0678;
                      }
                      sub_1003AE50((float *)&dword_10277BA8);
                      LODWORD(dword_10277D78) = dword_10277BA8;
                      dword_10277D80 = flt_10277BB0;
                      dword_10277D7C = flt_10277BAC;
                      sub_1003AEE0((float *)v179,
                                   (float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 48),
                                   (float *)(LODWORD(a1) + 48));
                      v20 = sub_1003B170((float *)v179);
                      if (v20 == 0.0) {
                          sub_1003ACC0((float *)v179, *(float **)&gUnk06594.gap1C8[12104]);
                      } else {
                          v181 = v20;
                          sub_1003AD70((int)v179, v181);
                      }
                      sub_1003B050(&dword_10277D78, (float *)v179, &dword_10277D78);
                      v21 = sub_1003B170(&dword_10277D78);
                      if (v21 == 0.0) {
                          dword_10277D78 = *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 32);
                          dword_10277D7C = *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 36);
                          dword_10277D80 = *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 40);
                      } else {
                          v182 = v21;
                          sub_1003AD70((int)&dword_10277D78, v182);
                      }
                      sub_10069490();
                      v173 = sub_100694E0();
                      v174 = sub_10069530();
                      v172 = sub_10069530();
                      v183 = 0.0;
                      v169 = 0.0;
                      if (*(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 48) ==
                              *(float *)(LODWORD(a1) + 48) &&
                          *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 52) ==
                              *(float *)(LODWORD(a1) + 52)) {
                          if (*(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 56) ==
                              *(float *)(LODWORD(a1) + 56))
                              v183 = 1.0;
                          else
                              v169 = 0.1;
                      }
                      v177 = **(float **)&gUnk06594.gap1C8[12104];
                      v178 = *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 4);
                      if (v177 == 0.0 && v178 == 0.0)
                          v177 = 0.000099999997;
                      sub_10030E20((int)&flt_106C0860,
                                   (int)v174,
                                   v177,
                                   v178,
                                   0.0,
                                   0.0,
                                   0.0,
                                   0.0,
                                   0.0,
                                   0.0,
                                   1.0);
                      v166 = *(float *)(LODWORD(a1) + 56) + v183;
                      v165 = v169 + *(float *)(LODWORD(a1) + 48);
                      sub_10030B50((int)&flt_106C0860,
                                   (int)v172,
                                   (int)v173,
                                   *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 48),
                                   *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 52),
                                   *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 56),
                                   v165,
                                   *(float *)(LODWORD(a1) + 52),
                                   v166,
                                   0.0,
                                   0.0,
                                   1.0,
                                   dword_10277D78,
                                   dword_10277D7C,
                                   dword_10277D80,
                                   dword_10277D78,
                                   dword_10277D7C,
                                   dword_10277D80,
                                   64,
                                   64);
                      v22 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v22 = 100663296;
                      if (v170 <= 10.0)
                          v22[1] = &unk_100AA770;
                      else
                          v22[1] = &unk_100AA838;
                      if (*(_DWORD *)&gUnk06594.gap1C8[12500] ||
                          *(_DWORD *)&gUnk06594.gap1C8[12508]) {
                          qmemcpy((char *)&unk_10277BB8 + 24 * *(_DWORD *)(LODWORD(a1) + 320),
                                  &unk_100AA860,
                                  0x18u);
                          v26 = dword_106C2CF8;
                          byte_10277BC8[24 * *(_DWORD *)(LODWORD(a1) + 320)] =
                              (__int64)(*(float *)dword_106C2CF8 * -120.0);
                          byte_10277BC9[24 * *(_DWORD *)(LODWORD(a1) + 320)] =
                              (__int64)(*(float *)(v26 + 4) * -120.0);
                          v27 = (__int64)(*(float *)(v26 + 8) * -120.0);
                          v13 = v167;
                          byte_10277BCA[24 * *(_DWORD *)(LODWORD(a1) + 320)] = v27;
                          LODWORD(v27) = dword_106C0680;
                          dword_106C0680 += 8;
                          *(_DWORD *)v27 = -1140850686;
                          *(_DWORD *)(v27 + 4) = -2147483584;
                          LODWORD(v27) = dword_106C0680;
                          dword_106C0680 += 8;
                          *(_DWORD *)v27 = 59113488;
                          *(_DWORD *)(v27 + 4) =
                              (char *)&unk_10277BC0 + 24 * *(_DWORD *)(LODWORD(a1) + 320);
                          LODWORD(v27) = dword_106C0680;
                          dword_106C0680 += 8;
                          *(_DWORD *)v27 = 59244560;
                          *(_DWORD *)(v27 + 4) =
                              (char *)&unk_10277BB8 + 24 * *(_DWORD *)(LODWORD(a1) + 320);
                      } else {
                          v23 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v23 = -1140850686;
                          v23[1] = -2147483584;
                          v24 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v24 = 59113488;
                          v24[1] = &unk_100AA868;
                          v25 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v25 = 59244560;
                          v25[1] = &unk_100AA860;
                      }
                      v28 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v28 = -419430400;
                      v28[1] = 0;
                      v29 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v29 = -1174401023;
                      v29[1] = 0x10000;
                      v30 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v30 = -1224736768;
                      v30[1] = 131589;
                      if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
                          v31 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v31 = -1224736768;
                          v31[1] = 0x10000;
                          dword_10277E5C =
                              *(_BYTE *)(LODWORD(a1) + 10671) != 2 ? -939524096 : 201850880;
                      } else {
                          dword_10277E5C = 201850880;
                      }
                      v32 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v32 = -1224736768;
                      v32[1] = dword_106C1174 != dword_106C3364 ? 4096 : 0x2000;
                      v33 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v33 = -1241513984;
                      v33[1] = dword_106C1174 != dword_106C3364 ? 0x2000 : 4096;
                      if (*(_BYTE *)(LODWORD(a1) + 10671) == 2) {
                          dword_10277E58 = 17844696;
                          v34 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v34 = -100663296;
                          v34[1] = (unsigned __int8)dword_10277E14;
                      } else if (v171) {
                          dword_10277E58 = dword_106C2CF8 != LODWORD(a1) ? 1122360 : 1122424;
                      } else {
                          dword_10277E58 = 1122864;
                      }
                      v35 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v35 = -1174399998;
                      v35[1] = 0x100000;
                      v36 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v36 = -1191181539;
                      v36[1] = dword_10277E5C | dword_10277E58;
                      v158 = (unsigned int *)dword_106C0680;
                      dword_106C0680 += 8;
                      sub_1002F900(
                          v158, 1001, 0, 1004, 0, 0, 0, 0, 1001, 0, 0, 0, 1000, 0, 0, 0, 1000);
                      v37 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v37 = -1174402046;
                      v37[1] = dword_106C0258;
                      v38 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v38 = -1174401023;
                      v38[1] = 0;
                      v39 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v39 = -1241513984;
                      v39[1] = 786432;
                      v40 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v40 = -1140850678;
                      v40[1] = v13;
                      v41 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v41 = -1140849654;
                      v41[1] = v13;
                      v42 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v42 = -1140842486;
                      v42[1] = v15;
                      v43 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v43 = -1140841462;
                      v43[1] = v15;
                      if (*(_BYTE *)(LODWORD(a1) + 10671) == 2)
                          sub_1000C6E0(SLODWORD(a1));
                      v44 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v44 = 60686352;
                      v44[1] = dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)];
                      v45 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v45 = 60293136;
                      v45[1] = dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)] + 16;
                      v46 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v46 = 60424208;
                      v46[1] = dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)] + 32;
                      v47 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v47 = 60555280;
                      v47[1] = dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)] + 48;
                      v48 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v48 = -49283072;
                      v48[1] = &off_100A64C8;
                      v49 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v49 = -402653184;
                      v49[1] = 0;
                      v50 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v50 = -184548896;
                      v50[1] = 117440512;
                      v51 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v51 = -436207616;
                      v51[1] = 0;
                      v52 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v52 = -268435456;
                      v52[1] = 117686272;
                      v53 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v53 = -419430400;
                      v53[1] = 0;
                      v54 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v54 = 58982416;
                      v54[1] = v172;
                      v55 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v55 = 58851344;
                      v55[1] = v172 + 16;
                      if (!dword_10277B1C && !*(_DWORD *)(LODWORD(a1) + 10676)) {
                          v56 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v56 = -1157627903;
                          v56[1] = -1;
                          v57 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v57 = -1241513984;
                          v57[1] = 786432;
                          v58 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v58 = -402653184;
                          v58[1] = 0;
                          v59 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v59 = -183500800;
                          v59[1] = 117440512;
                          v60 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v60 = -184548880;
                          v60[1] = 100663296;
                          v61 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v61 = -184549120;
                          v61[1] = 83886080;
                          v62 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v62 = -1191181539;
                          v62[1] = dword_10277E5C | dword_10277E58;
                          v159 = (unsigned int *)dword_106C0680;
                          dword_106C0680 += 8;
                          sub_1002F900(
                              v159, 1001, 0, 1004, 0, 0, 0, 0, 1001, 0, 0, 0, 1000, 0, 0, 0, 1000);
                          v63 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v63 = -1174401534;
                          v63[1] = 0;
                          v64 = (unsigned int *)dword_106C0680;
                          dword_106C0680 += 8;
                          sub_1002F900(v64,
                                       1001,
                                       0,
                                       1004,
                                       0,
                                       1001,
                                       0,
                                       1004,
                                       0,
                                       0,
                                       0,
                                       0,
                                       1000,
                                       0,
                                       0,
                                       0,
                                       1000);
                          v65 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v65 = -1241513984;
                          v65[1] = 0x40000;
                          v66 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v66 = -1140850678;
                          v66[1] = v13;
                          v67 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v67 = -1140849654;
                          v67[1] = v13;
                          v68 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v68 = -1140842486;
                          v68[1] = v15;
                          v69 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v69 = -1140841462;
                          v69[1] = v15;
                          v70 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v70 = -1174402046;
                          v70[1] = dword_106C0258;
                          if (*(_DWORD *)(dword_106C3308 + 40 * v185 + 32824)) {
                              v71 = (_DWORD *)dword_106C0680;
                              dword_106C0680 += 8;
                              *v71 = 100663296;
                              v71[1] = *(_DWORD *)(dword_106C3308 + 40 * v185 + 32824);
                          }
                          v72 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v72 = -1157627903;
                          v72[1] = -1;
                          v73 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v73 = -1241513984;
                          v73[1] = 786432;
                          v74 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v74 = -402653184;
                          v74[1] = 0;
                          v75 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v75 = -183500800;
                          v75[1] = 117440512;
                          v76 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v76 = -184548880;
                          v76[1] = 100663296;
                          v77 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v77 = -184549120;
                          v77[1] = 83886080;
                      }
                      if (!*(_DWORD *)(*(_DWORD *)(dword_106C3308 + 32788) +
                                       36 * *(unsigned __int8 *)(dword_106C3308 + 33051) + 4) ||
                          dword_100AC300) {
                          goto LABEL_85;
                      }
                      if ((**(_DWORD **)(LODWORD(a1) + 10688) & 0xC0000) != 0) {
                          if (*(float *)(LODWORD(a1) + 3688) < 0.0) {
                              dword_118AA0A4(*(_DWORD *)(dword_106C3308 + 128),
                                             *(_DWORD *)(dword_106C3308 + 144));
                              goto LABEL_85;
                          }
                          v78 = *(_DWORD *)(dword_106C3308 + 136);
                      } else if (*(float *)(LODWORD(a1) + 3688) >= 0.0) {
                          v78 = *(_DWORD *)(dword_106C3308 + 132);
                      } else {
                          v78 = *(_DWORD *)(dword_106C3308 + 140);
                      }
                      dword_118AA0A4(*(_DWORD *)(dword_106C3308 + 128), v78);
                  LABEL_85:
                      v79 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v79 = -1174401023;
                      v79[1] = 0x10000;
                      v80 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v80 = -1157627903;
                      v80[1] = -1;
                      v81 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v81 = -183500800;
                      v81[1] = 117440512;
                      v82 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v82 = -184548880;
                      v82[1] = 100663296;
                      v83 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v83 = -184549120;
                      v83[1] = 83886080;
                      sub_1003AEE0(v180,
                                   (float *)(LODWORD(a1) + 48),
                                   (float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 48));
                      if (sub_1003AC90((float *)(LODWORD(a1) + 32), v180) > 0.0) {
                          sub_10031481(6, *(_DWORD *)(dword_106C3308 + 32788));
                          v84 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v84 = -419430400;
                          v84[1] = 0;
                          v85 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v85 = -1174399998;
                          v85[1] = 0x100000;
                          v86 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v86 = -1191181539;
                          v86[1] = dword_10277E5C | dword_10277E58;
                          v160 = (unsigned int *)dword_106C0680;
                          dword_106C0680 += 8;
                          sub_1002F900(v160,
                                       1001,
                                       0,
                                       1004,
                                       0,
                                       1001,
                                       0,
                                       1004,
                                       0,
                                       1001,
                                       0,
                                       1004,
                                       0,
                                       1001,
                                       0,
                                       1004,
                                       0);
                          v87 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v87 = -1140850678;
                          v87[1] = v13;
                          v88 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v88 = -1140849654;
                          v88[1] = v13;
                          v89 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v89 = -1140842486;
                          v89[1] = v15;
                          v90 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v90 = -1140841462;
                          v90[1] = v15;
                          v91 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v91 = -1157627903;
                          v91[1] = -1;
                          v92 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v92 = -183500800;
                          v92[1] = 117440512;
                          v93 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v93 = -184548880;
                          v93[1] = 100663296;
                          v94 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v94 = -184549120;
                          v94[1] = 83886080;
                          if (*(_DWORD *)(dword_106C3308 + 40 * v185 + 32816)) {
                              v95 = (_DWORD *)dword_106C0680;
                              dword_106C0680 += 8;
                              *v95 = 100663296;
                              v95[1] = *(_DWORD *)(dword_106C3308 + 40 * v185 + 32816);
                          }
                      }
                      sub_10031481(3, *(_DWORD *)(dword_106C3308 + 32788));
                      v96 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v96 = -419430400;
                      v96[1] = 0;
                      v97 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v97 = -1174399998;
                      v97[1] = 0x100000;
                      v98 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v98 = -1191181539;
                      v98[1] = dword_10277E5C | dword_10277E58;
                      v161 = (unsigned int *)dword_106C0680;
                      dword_106C0680 += 8;
                      sub_1002F900(
                          v161, 1001, 0, 1004, 0, 0, 0, 0, 1004, 0, 0, 0, 1000, 0, 0, 0, 1000);
                      v99 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v99 = -1140850678;
                      v99[1] = v13;
                      v100 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v100 = -1140849654;
                      v100[1] = v13;
                      v101 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v101 = -1140842486;
                      v101[1] = v15;
                      v102 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v102 = -1140841462;
                      v102[1] = v15;
                      v103 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v103 = -1157627903;
                      v103[1] = -1;
                      v104 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v104 = -183500800;
                      v104[1] = 117440512;
                      v105 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v105 = -184548880;
                      v105[1] = 100663296;
                      v106 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v106 = -184549120;
                      v106[1] = 83886080;
                      v184 = 40 * v185;
                      if (*(_DWORD *)(dword_106C3308 + 40 * v185 + 32804)) {
                          v107 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v107 = 100663296;
                          v107[1] = *(_DWORD *)(dword_106C3308 + v184 + 32804);
                      }
                      if (dword_10B4E1DC && !*(_DWORD *)&gUnk06594.gap1C8[12504] &&
                          !*(_DWORD *)&gUnk06594.gap1C8[12508] &&
                          (!v168 || *(_DWORD *)&gUnk06594.gap1C8[12500]) &&
                          (!*(_DWORD *)&gUnk06594.gap1C8[12500] || LODWORD(a1) != dword_106C2CF8) &&
                          !dword_10277B1C && !*(_DWORD *)(LODWORD(a1) + 10676)) {
                          v108 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v108 = -419430400;
                          v108[1] = 0;
                          v109 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v109 = -1174399998;
                          v109[1] = 0;
                          v110 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v110 = -1224736768;
                          v110[1] = 0x40000;
                          v111 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v111 = -1157627903;
                          v111[1] = 260050816;
                          v112 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v112 = -1174402046;
                          v112[1] = dword_106C0258;
                          v113 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v113 = -100663296;
                          v113[1] = -13057;
                          v162 = (unsigned int *)dword_106C0680;
                          dword_106C0680 += 8;
                          sub_1002F900(
                              v162, 0, 0, 0, 1003, 0, 0, 0, 1001, 0, 0, 0, 1003, 0, 0, 0, 1001);
                          v114 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v114 = -1191181539;
                          v114[1] = 4;
                          v115 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v115 = -402653184;
                          v115[1] = 0;
                          v116 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v116 = -1174401534;
                          v116[1] = 0;
                          v117 = (unsigned int *)dword_106C0680;
                          dword_106C0680 += 8;
                          v118 = dword_11829314;
                          if (!*(_DWORD *)&gUnk06594.gap1C8[12500])
                              v118 = dword_11829324;
                          v117[1] = 1;
                          *v117 = v118 & 0xFFFFFF | 0xDC000000;
                          v119 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v119 = -1174403582;
                          v119[1] = 192;
                          v186 = (unsigned int *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v186 = *((_DWORD *)v173 + 1) & 0xFFF |
                                  ((*(_DWORD *)v173 & 0xFFF | 0xFFFF2000) << 12);
                          v186[1] = ((unsigned __int16)*((_DWORD *)v173 + 1) + 252) & 0xFFF |
                                    ((*(_DWORD *)v173 + 252) << 12) & 0xFFF000;
                          if (*(_DWORD *)(dword_106C3308 + v184 + 32828)) {
                              v120 = (_DWORD *)dword_106C0680;
                              dword_106C0680 += 8;
                              *v120 = 100663296;
                              v120[1] = *(_DWORD *)(dword_106C3308 + v184 + 32828);
                          }
                          v121 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v121 = -1174403582;
                          v121[1] = dword_106C0688;
                      }
                      v122 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v122 = -419430400;
                      v122[1] = 0;
                      v123 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v123 = -1174399998;
                      v123[1] = 0x100000;
                      v124 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v124 = -1224736768;
                      v124[1] = (dword_100A6380 != 0 ? 0x80000 : 0) | 0x40000;
                      v125 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v125 = -1157627903;
                      v125[1] = 134221824;
                      v126 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v126 = -1174402046;
                      v126[1] = dword_106C0258;
                      v163 = (unsigned int *)dword_106C0680;
                      dword_106C0680 += 8;
                      sub_1002F900(v163,
                                   1001,
                                   1005,
                                   1012,
                                   1005,
                                   0,
                                   0,
                                   0,
                                   1001,
                                   1001,
                                   1005,
                                   1012,
                                   1005,
                                   0,
                                   0,
                                   0,
                                   1001);
                      if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
                          v127 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v127 = -83886080;
                          HIBYTE(v128) = byte_106C0260;
                          LOBYTE(v128) = byte_106C1614;
                          if (v168)
                              v129 = (unsigned __int8)(((unsigned __int8)byte_10690BE8 >> 3) - 33);
                          else
                              v129 = (unsigned __int8)(((unsigned __int8)byte_10690BE8 >> 1) + 127);
                          v130 = v129 | (((unsigned __int8)byte_106C0200 | (v128 << 8)) << 8);
                      } else {
                          v127 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v127 = -83886080;
                          HIBYTE(v131) = byte_106C0260;
                          LOBYTE(v131) = byte_106C1614;
                          v130 = ((unsigned __int8)byte_106C0200 | (v131 << 8)) << 8;
                          LOBYTE(v130) = -1;
                      }
                      v127[1] = v130;
                      v132 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v132 = -1191181539;
                      v132[1] = 0;
                      v133 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v133 = -1191181539;
                      v133[1] = dword_10277E5C | dword_10277E58;
                      v134 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v134 = -402653184;
                      v134[1] = 0;
                      v135 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v135 = -1174401534;
                      v135[1] = 0;
                      v136 = (unsigned int *)dword_106C0680;
                      dword_106C0680 += 8;
                      v137 = (int)*(
                          &off_100A6498 +
                          byte_100A64B8[2 * dword_10277EA0 + *(_DWORD *)(LODWORD(a1) + 10004)]);
                      v136[1] = 1;
                      *v136 = v137 & 0xFFFFFF | 0xDC000000;
                      v138 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v138 = -1174401534;
                      v138[1] = 0x8000;
                      v139 = -33 - (__int64)(*(float *)(dword_106C2CF8 + 10008) * -20.371832);
                      v140 = (unsigned int *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v140 = ((v139 + 2) << 12) & 0xFFF000 | 0xF2000002;
                      v140[1] = ((v139 + 126) << 12) & 0xFFF000 | 0x1FE;
                      v141 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v141 = -419430400;
                      v141[1] = 0;
                      v142 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v142 = 58982416;
                      v142[1] = v174;
                      v143 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v143 = 58851344;
                      v143[1] = v174 + 16;
                      if (*(_DWORD *)(dword_106C3308 + v184 + 32808)) {
                          v144 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          v145 = v184;
                          *v144 = 100663296;
                          v144[1] = *(_DWORD *)(dword_106C3308 + v184 + 32808);
                      } else {
                          v145 = v184;
                      }
                      if ((dword_10277B1C || *(_DWORD *)(LODWORD(a1) + 10676)) &&
                          *(_DWORD *)(dword_106C3308 + v145 + 32828)) {
                          v146 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v146 = 100663296;
                          v146[1] = *(_DWORD *)(dword_106C3308 + v145 + 32828);
                      }
                      v147 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v147 = -1124073472;
                      v147[1] = 0;
                      v148 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v148 = -1241513984;
                      v148[1] = 0x40000;
                      v149 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v149 = -1140850678;
                      v149[1] = v13;
                      v150 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v150 = -1140849654;
                      v150[1] = v13;
                      v151 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v151 = -1140842486;
                      v151[1] = v15;
                      v152 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v152 = -1140841462;
                      v152[1] = v15;
                      v153 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v153 = -1174402046;
                      v153[1] = dword_106C0258;
                      v154 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v154 = -1174401534;
                      v154[1] = 0;
                      if (*(_BYTE *)(LODWORD(a1) + 10671) != 2)
                          sub_1000C6E0(SLODWORD(a1));
                      v155 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v155 = -419430400;
                      v155[1] = 0;
                      v156 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v156 = -1174399998;
                      v156[1] = 0;
                      v164 = (unsigned int *)dword_106C0680;
                      dword_106C0680 += 8;
                      sub_1002F900(v164,
                                   1001,
                                   0,
                                   1004,
                                   0,
                                   1001,
                                   0,
                                   1004,
                                   0,
                                   1001,
                                   0,
                                   1004,
                                   0,
                                   1001,
                                   0,
                                   1004,
                                   0);
                      v157 = (_DWORD *)dword_106C0680;
                      dword_106C0680 += 8;
                      *v157 = -1191181539;
                      v157[1] = 3;
                      result = *(_DWORD *)(dword_106C3308 + 0x8000) + dword_106C161C;
                      dword_106C161C = result;
                      return result;
                  }
              }
          }
        }
      }
    }
  }
  return result;
}
// 100A6380: using guessed type int dword_100A6380;
// 100A6498: using guessed type void *off_100A6498;
// 100A64C8: using guessed type void *off_100A64C8;
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100AC300: using guessed type int dword_100AC300;
// 10277B1C: using guessed type int dword_10277B1C;
// 10277BA8: using guessed type int dword_10277BA8;
// 10277BAC: using guessed type float flt_10277BAC;
// 10277BB0: using guessed type float flt_10277BB0;
// 10277E14: using guessed type int dword_10277E14;
// 10277E58: using guessed type int dword_10277E58;
// 10277E5C: using guessed type int dword_10277E5C;
// 10277EA0: using guessed type int dword_10277EA0;
// 10690BE8: using guessed type char byte_10690BE8;
// 10690BF0: using guessed type char byte_10690BF0;
// 106C0200: using guessed type char byte_106C0200;
// 106C0258: using guessed type int dword_106C0258;
// 106C0260: using guessed type char byte_106C0260;
// 106C0670: using guessed type int dword_106C0670;
// 106C0674: using guessed type int dword_106C0674;
// 106C0678: using guessed type int dword_106C0678;
// 106C0680: using guessed type int dword_106C0680;
// 106C0688: using guessed type int dword_106C0688;
// 106C0860: using guessed type float flt_106C0860;
// 106C08A0: using guessed type float flt_106C08A0;
// 106C0960: using guessed type char byte_106C0960;
// 106C0968: using guessed type char byte_106C0968;
// 106C1174: using guessed type int dword_106C1174;
// 106C1580: using guessed type char byte_106C1580;
// 106C1614: using guessed type char byte_106C1614;
// 106C161C: using guessed type int dword_106C161C;
// 106C29A8: using guessed type float flt_106C29A8;
// 106C2CF8: using guessed type int dword_106C2CF8;
// 106C32D0: using guessed type int dword_106C32D0;
// 106C3308: using guessed type int dword_106C3308;
// 106C335C: using guessed type char byte_106C335C;
// 106C3364: using guessed type int dword_106C3364;
// 10B4E1DC: using guessed type int dword_10B4E1DC;
// 11829314: using guessed type int dword_11829314;
// 11829324: using guessed type int dword_11829324;
// 118AA0A4: using guessed type int (__cdecl *dword_118AA0A4)(_DWORD, _DWORD);

//----- (1000E950) --------------------------------------------------------
int __cdecl sub_1000E950(float a1) {
  int result;        // eax
  _DWORD *v3;        // eax
  _DWORD *v4;        // eax
  _DWORD *v5;        // eax
  _DWORD *v6;        // eax
  _DWORD *v7;        // eax
  _DWORD *v8;        // eax
  _DWORD *v9;        // eax
  _DWORD *v10;       // eax
  _DWORD *v11;       // eax
  _DWORD *v12;       // eax
  _DWORD *v13;       // eax
  _DWORD *v14;       // eax
  _DWORD *v15;       // eax
  _DWORD *v16;       // eax
  _DWORD *v17;       // eax
  _DWORD *v18;       // eax
  _DWORD *v19;       // eax
  _DWORD *v20;       // eax
  double v21;        // st7
  double v22;        // st7
  double v23;        // st7
  _DWORD *v24;       // eax
  _DWORD *v25;       // eax
  _DWORD *v26;       // eax
  _DWORD *v27;       // eax
  _DWORD *v28;       // eax
  _DWORD *v29;       // eax
  _DWORD *v30;       // eax
  _DWORD *v31;       // eax
  _DWORD *v32;       // eax
  unsigned int *v33; // [esp-44h] [ebp-68h]
  unsigned int *v34; // [esp-44h] [ebp-68h]
  float v35;         // [esp+8h] [ebp-1Ch]
  float v36;         // [esp+8h] [ebp-1Ch]
  int v37[3];        // [esp+Ch] [ebp-18h] BYREF
  int v38[3];        // [esp+18h] [ebp-Ch] BYREF
  float v39;         // [esp+28h] [ebp+4h]

  result = MEMORY[0x106C661C];
  if (MEMORY[0x106C661C] || MEMORY[0x106C6624]) {
    result = *(_DWORD *)(LODWORD(a1) + 320);
    if (dword_10277E60[result]) {
      result = dword_106C2CF8;
      if (LODWORD(a1) != dword_106C2CF8 ||
          (result = dword_106C2CF8 + 10180,
           MEMORY[0x106C6490] != (void *)(dword_106C2CF8 + 10180))) {
        if (*(_BYTE *)(LODWORD(a1) + 10671) != 2) {
          dword_106C3308 = *(_DWORD *)(LODWORD(a1) + 10692);
          v3 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v3 = 17170496;
          v3[1] = dword_10277DC8[*(_DWORD *)(LODWORD(a1) + 320)];
          v4 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v4 = 16973888;
          v4[1] = dword_106C32D0;
          v5 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v5 = 60686352;
          v5[1] = dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)];
          v6 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v6 = 60293136;
          v6[1] = dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)] + 16;
          v7 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v7 = 60424208;
          v7[1] = dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)] + 32;
          v8 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v8 = 60555280;
          v8[1] = dword_10277E18[*(_DWORD *)(LODWORD(a1) + 320)] + 48;
          v9 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v9 = 100663296;
          v9[1] = &unk_100AA838;
          sub_10031481(5, *(_DWORD *)(dword_106C3308 + 32788));
          v10 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v10 = -419430400;
          v10[1] = 0;
          v11 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v11 = -1174399998;
          v11[1] = 0;
          v12 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v12 = -1140850678;
          v12[1] = 0;
          v13 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v13 = -1140849654;
          v13[1] = 0;
          v14 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v14 = -1140842486;
          v14[1] = -256;
          v15 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v15 = -1140841462;
          v15[1] = -256;
          v33 = (unsigned int *)dword_106C0680;
          dword_106C0680 += 8;
          sub_1002F900(v33, 0, 0, 0, 1, 0, 0, 0, 1001, 0, 0, 0, 1, 0, 0, 0, 1001);
          v16 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v16 = -1191181539;
          v16[1] = 4213208;
          v17 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v17 = -1174403582;
          v17[1] = 128;
          if (*(_DWORD *)(dword_106C3308 + 32812)) {
              v18 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v18 = 100663296;
              v18[1] = *(_DWORD *)(dword_106C3308 + 32812);
          }
          v19 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v19 = -419430400;
          v19[1] = 0;
          v20 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v20 = -1174403582;
          v20[1] = dword_106C0688;
          if (LODWORD(a1) != dword_106C2CF8) {
              sub_1003AF40((float *)v37, (float *)(LODWORD(a1) + 48), (float *)LODWORD(a1));
              sub_1003AEE0((float *)v37, (float *)MEMORY[0x106C6490] + 12, (float *)v37);
              v21 = sub_1003B170((float *)v37);
              v39 = v21;
              if (v21 != 0.0) {
                  sub_1003AD70((int)v37, v39);
                  if (sub_1003AC90((float *)v37, (float *)MEMORY[0x106C6490]) < 0.0) {
                      sub_1003ACE0((int)v38, SLODWORD(a1), 1.0);
                      sub_1003B020((int)v38, LODWORD(a1) + 32, 0.0);
                      v35 = sub_1003AC90((float *)v37, (float *)v38);
                      v22 = -(sub_1003AC90((float *)v37, (float *)MEMORY[0x106C6490]) * v35);
                      if (v22 > 0.94999999) {
                          v39 = v39 * v39;
                          flt_10575504 = (v22 - 0.94999999) * 750.0 / v39 + flt_10575504;
                      }
                  }
                  if (sub_1003AC90((float *)v37, (float *)MEMORY[0x106C6490]) > 0.94999999) {
                      sub_1003ACE0((int)v38, SLODWORD(a1), 1.0);
                      sub_1003B020((int)v38, LODWORD(a1) + 32, 0.0);
                      v36 = sub_1003AC90((float *)v37, (float *)v38);
                      v23 = sub_1003AC90((float *)v37, (float *)MEMORY[0x106C6490]) * v36;
                      if (v23 > 0.94999999)
                          flt_105754F8 = (v23 - 0.94999999) * 750.0 / (v39 * v39) + flt_105754F8;
                  }
              }
          }
          v24 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v24 = -419430400;
          v24[1] = 0;
          v25 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v25 = -1174399998;
          v25[1] = 0;
          v26 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v26 = -1124073472;
          v26[1] = 0;
          v27 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v27 = -1241513984;
          v27[1] = 0x40000;
          v28 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v28 = -1140850686;
          v28[1] = -2147483584;
          v29 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v29 = 59113488;
          v29[1] = &unk_100AA868;
          v30 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v30 = 59244560;
          v30[1] = &unk_100AA860;
          v31 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v31 = -1174402046;
          v31[1] = dword_106C0258;
          v32 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v32 = -1174401534;
          v32[1] = 0;
          v34 = (unsigned int *)dword_106C0680;
          dword_106C0680 += 8;
          result = sub_1002F900(
              v34, 1001, 0, 1004, 0, 1001, 0, 1004, 0, 1001, 0, 1004, 0, 1001, 0, 1004, 0);
        }
      }
    }
  }
  return result;
}
// 105754F8: using guessed type float flt_105754F8;
// 10575504: using guessed type float flt_10575504;
// 106C0258: using guessed type int dword_106C0258;
// 106C0680: using guessed type int dword_106C0680;
// 106C0688: using guessed type int dword_106C0688;
// 106C2CF8: using guessed type int dword_106C2CF8;
// 106C32D0: using guessed type int dword_106C32D0;
// 106C3308: using guessed type int dword_106C3308;
// 106C661C: using guessed type int dword_106C661C;
// 106C6624: using guessed type int dword_106C6624;

//----- (1000EF80) --------------------------------------------------------
__int16 __fastcall sub_1000EF80(int a1, int a2, float *a3, int a4) {
  int v5;           // ebp
  __int64 v6;       // rax
  int v7;           // esi
  __int16 v8;       // di
  int v9;           // eax
  __int16 v10;      // dx
  int v11;          // eax
  int v12;          // eax
  int v13;          // ebp
  int v14;          // edx
  int *v15;         // edi
  int v16;          // eax
  unsigned int v17; // ecx
  float *v18;       // esi
  double v19;       // st7
  __int64 v20;      // rax
  char v21;         // bl
  __int64 v22;      // rax
  __int64 v23;      // rax
  int v24;          // ecx
  int v25;          // edx
  char v26;         // bl
  double v27;       // st6
  __int16 v29;      // [esp+10h] [ebp-28h]
  __int16 v30;      // [esp+14h] [ebp-24h]
  __int16 v31;      // [esp+18h] [ebp-20h]
  __int16 v32;      // [esp+1Ch] [ebp-1Ch]
  int v33;          // [esp+20h] [ebp-18h]
  int v34;          // [esp+24h] [ebp-14h]
  int v35;          // [esp+28h] [ebp-10h]
  int v36;          // [esp+2Ch] [ebp-Ch]
  char v38;         // [esp+34h] [ebp-4h]
  __int16 v39;      // [esp+3Ch] [ebp+4h]
  __int16 v40;      // [esp+40h] [ebp+8h]

  v5 = a1;
  v6 = (__int64)(sub_1003B7B0(*a3, a3[1]) * 57.295776);
  if ((int)v6 < 20 || (int)v6 >= 340) {
    v39 = 255;
    v29 = 0x3FFF;
    v31 = 0x3FFF;
    v30 = -16383;
    v7 = 0;
  } else if ((int)v6 >= 50) {
    if ((int)v6 >= 130) {
      if ((int)v6 >= 160) {
        if ((int)v6 >= 200) {
          if ((int)v6 >= 230) {
              v29 = 0x3FFF;
              if ((int)v6 >= 310) {
                  v39 = 128;
                  v31 = -64;
                  v30 = -16383;
                  v7 = 7;
              } else {
                  v31 = -64;
                  v39 = -16383;
                  v30 = -16383;
                  v7 = 6;
              }
          } else {
              v29 = -128;
              v39 = -16383;
              v31 = -64;
              v30 = -16383;
              v7 = 5;
          }
        } else {
          v29 = -255;
          v39 = -16383;
          v31 = 0x3FFF;
          v30 = -16383;
          v7 = 4;
        }
      } else {
        v29 = -128;
        v39 = -16383;
        v31 = 0x3FFF;
        v30 = 64;
        v7 = 3;
      }
    } else {
      v39 = -16383;
      v29 = 0x3FFF;
      v31 = 0x3FFF;
      v30 = 64;
      v7 = 2;
    }
  } else {
    v39 = 128;
    v29 = 0x3FFF;
    v31 = 0x3FFF;
    v30 = 64;
    v7 = 1;
  }
  v8 = 4 * a4;
  car_10061460(*(unsigned __int8 *)(v5 + 10668),
               *(unsigned __int8 *)(v5 + 10669),
               *(unsigned __int8 *)(v5 + 10670));
  sub_10074E40(v7, v5 + 10864, v5 + 10896);
  LOWORD(v9) = *(_WORD *)(v5 + 2 * v7 + 10696);
  if ((__int16)v9 >= word_100AC6A4)
    return v9;
  *(_WORD *)(v5 + 2 * v7 + 10696) = v8 + v9;
  v10 = (*(_BYTE *)(v5 + 10712) - 3) & 7;
  *(_WORD *)(v5 + 10712) = v10 - 4;
  v11 = (__int16)(v10 - 4);
  v33 = v11;
  if (v11 < 0)
    v33 = ++v11;
  if (a3[1] <= 1.0) {
    if (a3[1] <= 0.0) {
      if (a3[1] >= -1.0)
        LOWORD(v11) = v8 >> 1;
      else
        v11 = 4 * a4;
      v12 = -v11;
    } else {
      LOWORD(v12) = v8 >> 1;
    }
    v32 = v12;
  } else {
    v32 = 4 * a4;
  }
  if (a3[2] <= 1.0) {
    if (a3[2] <= 0.0) {
      if (a3[2] >= -1.0)
        LOWORD(v5) = v8 >> 3;
      else
        LOWORD(v5) = v8 >> 2;
      v13 = -v5;
    } else {
      LOWORD(v13) = v8 >> 3;
    }
  } else {
    LOWORD(v13) = v8 >> 2;
  }
  if (*a3 <= 1.25) {
    if (*a3 <= 0.0) {
      if (*a3 < -1.25) {
        v40 = -4 * a4;
        LOWORD(v13) = 2 * v13;
        goto LABEL_44;
      }
      v8 = -4 * a4;
    } else {
      v8 >>= 1;
    }
  }
  v40 = v8;
LABEL_44:
  v9 = 8198;
  v36 = 8198;
  do {
    v14 = 0;
    v35 = 0;
    do {
      if (v14 != 9) {
        v15 = *(int **)(*(_DWORD *)(a1 + 10692) + 4 * (v14 + v9));
        if (v15) {
          while (1) {
              while (1) {
                  v16 = *v15;
                  v17 = HIBYTE(*v15);
                  if (v17 != 4)
                      break;
                  v18 = (float *)v15[1];
                  v15 += 2;
                  if ((unsigned __int16)v16 >> 10) {
                      v19 = (double)v33;
                      v34 = (unsigned __int16)v16 >> 10;
                      do {
                          v20 = (__int64)(*v18 + v19);
                          v21 = v20;
                          if ((__int16)v20 > v39 && (__int16)v20 < v29) {
                              v22 = (__int64)(v18[1] + v19);
                              v38 = v22;
                              if ((__int16)v22 > v30 && (__int16)v22 < v31) {
                                  v23 = (__int64)(v18[2] + v19);
                                  if ((__int16)v23 > -48 && (__int16)v23 < 224) {
                                      if (v38 >= 0)
                                          v24 = v40 * ((v38 & 0xF) - 12);
                                      else
                                          v24 = v40 * (4 - (v38 & 0xF));
                                      *v18 = (double)(v24 >> 5) + *v18;
                                      if (v21 >= 0)
                                          v25 = v32 * ((v21 & 0xF) - 12);
                                      else
                                          v25 = v32 * (4 - (v21 & 0xF));
                                      v26 = v38 + v21;
                                      v18[1] = (double)(v25 >> 5) + v18[1];
                                      if (v26 >= 0)
                                          v27 = (double)(((__int16)v13 * ((v26 & 0xF) - 8)) >> 6);
                                      else
                                          v27 = (double)(((__int16)v13 * (8 - (v26 & 0xF))) >> 6);
                                      v18[2] = v27 + v18[2];
                                  }
                              }
                          }
                          v18 += 8;
                          --v34;
                      } while (v34);
                      v14 = v35;
                  }
              }
              if (v17 == 184)
                  break;
              v15 += 2;
          }
          v9 = v36;
        }
      }
      v35 = ++v14;
    } while (v14 < 10);
    v9 += 10;
    v36 = v9;
  } while (v9 < 8228);
  return v9;
}
// 100AC6A4: using guessed type __int16 word_100AC6A4;

//----- (1000F460) --------------------------------------------------------
int *sub_1000F460() {
  int *v0;     // ecx
  int *result; // eax

  v0 = 0;
  result = (int *)&unk_102E5E98;
  do {
    *result = (int)v0;
    v0 = result;
    result -= 10;
  } while ((int)result >= (int)dword_102E54C0);
  dword_102E5ECC = (int)v0;
  return result;
}
// 102E5ECC: using guessed type int dword_102E5ECC;

//----- (1000F480) --------------------------------------------------------
void __cdecl sub_1000F480(int a1, int a2, int a3, _WORD *a4, _WORD *a5) {
  int v5;      // edi
  _DWORD *v6;  // eax
  __int16 v7;  // di
  int v8;      // ecx
  int v9;      // esi
  double v10;  // st7
  double v11;  // st6
  double v12;  // st5
  double v13;  // st6
  double v14;  // st3
  double v15;  // st7
  __int64 v16; // rax
  double v17;  // st7
  float v18;   // [esp+Ch] [ebp-14h]
  float v19;   // [esp+10h] [ebp-10h] BYREF
  float v20;   // [esp+14h] [ebp-Ch]
  float v21;   // [esp+1Ch] [ebp-4h]
  int v22;     // [esp+24h] [ebp+4h]
  float v23;   // [esp+24h] [ebp+4h]

  v5 = *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]);
  v6 = (_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]);
  v22 = (int)v6[2] >> 1;
  v7 = v22 + v5;
  v8 = v6[3];
  v23 = (float)v22;
  v9 = (v8 >> 1) + v6[1];
  v18 = (float)(v8 >> 1);
  sub_1003B2A0(&v19, (float *)a2, &flt_106C29A8);
  if (v21 > 0.001 || v21 < -0.001) {
    v10 = 1.0 / v21;
    v11 = v10 * v19;
    if (dword_106C1174 != dword_106C3364)
      v11 = -v11;
    v19 = v11;
    v12 = v10 * v20;
    v13 = (double)a3 * v10;
    v14 = (v19 - v13) * v23;
    v19 = v13 + v19;
    v20 = v13 + v12;
    *a4 = v7 + (__int64)v14;
    v15 = v23 * v19;
    a4[1] = v9 - (__int64)((v12 - v13) * v18);
    v16 = (__int64)v15;
    v17 = v18 * v20;
    *a5 = v7 + v16;
    a5[1] = v9 - (__int64)v17;
  }
}
// 106C1174: using guessed type int dword_106C1174;
// 106C29A8: using guessed type float flt_106C29A8;
// 106C3364: using guessed type int dword_106C3364;

//----- (1000F5C0) --------------------------------------------------------
char *sub_1000F5C0() {
  char *result; // eax

  dword_10363FF0 = (int)&unk_103643C0 + 80000 * *(_DWORD *)&gUnk06594.gap1C8[12452];
  dword_102E5EC8 = (int)&unk_103643C0 + 80000 * *(_DWORD *)&gUnk06594.gap1C8[12452];
  result = (char *)&unk_102E5F28 + 256000 * *(_DWORD *)&gUnk06594.gap1C8[12452];
  dword_10364304 = (int)&unk_1038BCC0 + 32000 * *(_DWORD *)&gUnk06594.gap1C8[12452];
  dword_103643BC = (int)&unk_1038BCC0 + 32000 * *(_DWORD *)&gUnk06594.gap1C8[12452];
  dword_102E5EC4 = (int)result;
  dword_10363FF4 = (int)result;
  return result;
}
// 102E5EC4: using guessed type int dword_102E5EC4;
// 102E5EC8: using guessed type int dword_102E5EC8;
// 10363FF0: using guessed type int dword_10363FF0;
// 10363FF4: using guessed type int dword_10363FF4;
// 10364304: using guessed type int dword_10364304;
// 103643BC: using guessed type int dword_103643BC;

//----- (1000F620) --------------------------------------------------------
int sub_1000F620() {
  int result; // eax

  result = 0;
  memset(dword_10364308, 0, sizeof(dword_10364308));
  memset(dword_10363F68, 0, sizeof(dword_10363F68));
  return result;
}

//----- (1000F640) --------------------------------------------------------
int __cdecl sub_1000F640(int a1, int a2, int a3, int a4, int a5) {
  float **v5;           // ebx
  _DWORD *v6;           // ebp
  int v7;               // esi
  _DWORD *v8;           // eax
  _DWORD *v9;           // eax
  _DWORD *v10;          // eax
  _DWORD *v11;          // eax
  unsigned int *v12;    // eax
  int v13;              // ecx
  _DWORD *v14;          // eax
  _DWORD *v15;          // eax
  _DWORD *v16;          // eax
  _DWORD *v17;          // eax
  _DWORD *v18;          // eax
  _DWORD *v19;          // eax
  _DWORD *v20;          // eax
  _DWORD *v21;          // eax
  _DWORD *v22;          // eax
  _DWORD *v23;          // eax
  _DWORD *v24;          // eax
  _DWORD *v25;          // eax
  _DWORD *v26;          // eax
  _DWORD *v27;          // eax
  _DWORD *v28;          // eax
  _DWORD *v29;          // eax
  _DWORD *v30;          // eax
  _DWORD *v31;          // eax
  int v32;              // ecx
  int v33;              // esi
  _DWORD *v34;          // ebx
  unsigned __int8 v35;  // al
  unsigned __int16 v36; // dx
  double v37;           // st7
  double v38;           // st7
  double v39;           // st7
  int v40;              // esi
  __int16 *v41;         // edi
  double v42;           // st7
  int v43;              // esi
  int v44;              // eax
  float *v45;           // eax
  int *v46;             // ebx
  int *v47;             // ebx
  bool v48;             // zf
  _DWORD *v49;          // eax
  _DWORD *v50;          // eax
  _DWORD *v51;          // eax
  int result;           // eax
  _DWORD *v53;          // ebp
  _DWORD *v54;          // ebx
  float *v55;           // esi
  float **v56;          // ebx
  int v57;              // edi
  _DWORD *v58;          // ebp
  int v59;              // eax
  char *v60;            // ecx
  int v61;              // eax
  int v62;              // edi
  int v63;              // edi
  double v64;           // st7
  double v65;           // st6
  char v67;             // c0
  char v68;             // cl
  unsigned int *v69;    // [esp-40h] [ebp-BCh]
  unsigned int *v70;    // [esp-40h] [ebp-BCh]
  float v71;            // [esp+0h] [ebp-7Ch]
  const void *v72;      // [esp+14h] [ebp-68h]
  int v73;              // [esp+18h] [ebp-64h]
  int v74;              // [esp+1Ch] [ebp-60h]
  float **v75;          // [esp+20h] [ebp-5Ch]
  int v76;              // [esp+24h] [ebp-58h]
  float v77;            // [esp+28h] [ebp-54h]
  float v78;            // [esp+28h] [ebp-54h]
  float v79;            // [esp+30h] [ebp-4Ch]
  int v80;              // [esp+34h] [ebp-48h]
  char *v81;            // [esp+34h] [ebp-48h]
  _DWORD *v82;          // [esp+38h] [ebp-44h]
  float v83;            // [esp+3Ch] [ebp-40h]
  float v84;            // [esp+40h] [ebp-3Ch]
  float v85;            // [esp+44h] [ebp-38h]
  float v86;            // [esp+48h] [ebp-34h]
  float v87;            // [esp+4Ch] [ebp-30h]
  float v88;            // [esp+50h] [ebp-2Ch]
  float v89;            // [esp+54h] [ebp-28h]
  float v90;            // [esp+58h] [ebp-24h]
  char v91[32];         // [esp+5Ch] [ebp-20h] BYREF
  __int16 *v92;         // [esp+80h] [ebp+4h]
  float *v93;           // [esp+84h] [ebp+8h]
  float v94;            // [esp+8Ch] [ebp+10h]
  float v95;            // [esp+90h] [ebp+14h]
  float v96;            // [esp+90h] [ebp+14h]
  char *v97;            // [esp+90h] [ebp+14h]

  v73 = dword_10364304;
  v5 = (float **)dword_10363FF0;
  v6 = *(_DWORD **)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * a2 + 68);
  v7 = *(_DWORD *)&gUnk06594.gap4918[16] + 84 * a2;
  v72 = (const void *)v7;
  v82 = v6;
  if (!a3 || *(_DWORD *)&gUnk06594.gap1C8[12104] == dword_106C2CF8 + 10384 ||
      (*(_BYTE *)(v7 + 77) & 2) != 0 || !dword_10B4E1D8) {
    v49 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v49 = -1157623807;
    v49[1] = -1;
    v50 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v50 = -402653184;
    v50[1] = 0;
    v51 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v51 = 100663296;
    v51[1] = v6;
    dword_106C069C += *(unsigned __int16 *)(v7 + 80);
    dword_106C06A4 += *(unsigned __int16 *)(v7 + 78);
    dword_106C1610 += *(unsigned __int16 *)(v7 + 82);
  } else {
    meth_DebugPrint(*(void **)&gUnk06594.gap1C8[12104]);
    v8 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v8 = -1157623807;
    v8[1] = -1;
    v9 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v9 = -402653184;
    v9[1] = 0;
    v10 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v10 = -100657408;
    v10[1] = -16776961;
    v11 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v11 = 100663296;
    v11[1] = v6;
    v12 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    v13 = dword_11829110 & 0xFFFFFF;
    v12[1] = 1;
    *v12 = v13 | 0xDC000000;
    v14 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v14 = -1174401023;
    v14[1] = 0;
    v15 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v15 = -100657408;
    v15[1] = -16776961;
    if (!a4 || *(_DWORD *)&gUnk06594.gap1C8[12500] || *(_DWORD *)&gUnk06594.gap1C8[12508]) {
      v17 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v17 = -1191181539;
      v17[1] = 5263184;
    } else {
      v16 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v16 = -1191181539;
      v16[1] = 5262160;
    }
    v18 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v18 = -1191182334;
    v18[1] = 1;
    v19 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v19 = -117440512;
    v19[1] = 8;
    v69 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    sub_1002F900(v69, 1005, 0, 1012, 0, 0, 0, 0, 1001, 1005, 0, 1012, 0, 0, 0, 0, 1001);
    v20 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v20 = -1241513984;
    v20[1] = 458756;
    v21 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v21 = -1174403582;
    v21[1] = 192;
    v22 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v22 = 100663296;
    v22[1] = v5;
    v23 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v23 = -419430400;
    v23[1] = 0;
    if (!*(_DWORD *)&gUnk06594.gap1C8[12484])
      sub_1003289F(*(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]),
                   *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 4),
                   *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 8),
                   *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 12));
    v24 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v24 = -1174403582;
    v24[1] = dword_106C0688;
    v25 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v25 = -117440512;
    v25[1] = 0;
    v26 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
      *v26 = -1224736768;
      v26[1] = 196612;
    } else {
      *v26 = -1224736768;
      v26[1] = 131076;
    }
    v27 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v27 = -1174401023;
    v27[1] = dword_100AA87C != 0 ? 0x10000 : 0;
    v28 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v28 = -100657408;
    v28[1] = -16776961;
    v29 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v29 = -1191181539;
    v29[1] = 0;
    v30 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v30 = -1174399998;
    v30[1] = 0x100000;
    v31 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v31 = -1191181539;
    v31[1] = dword_1036439C | dword_103643A0;
    v70 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    sub_1002F900(
        v70, 1002, 1001, 1013, 1001, 1002, 1001, 1013, 1001, 1000, 0, 1004, 0, 0, 0, 0, 1000);
    dword_106C069C += *(unsigned __int16 *)(v7 + 80) + 2 * *(unsigned __int16 *)(v7 + 80);
    dword_106C06A4 += *(unsigned __int16 *)(v7 + 78) + 2 * *(unsigned __int16 *)(v7 + 78);
    dword_106C1610 += *(unsigned __int16 *)(v7 + 82) + 2 * *(unsigned __int16 *)(v7 + 82);
    v32 = v73;
    v93 = (float *)v73;
    v33 = a5 + 10032;
    v75 = 0;
    v76 = 0;
    v92 = (__int16 *)(a5 + 10032);
    while (1) {
      if ((a3 & 1) != 0) {
        if (*(_DWORD *)&gUnk06594.gap1C8[12104] != dword_106C2CF8 + 10044 &&
                *(_DWORD *)&gUnk06594.gap1C8[12104] != dword_106C2CF8 + 10180 ||
            (v32 = v76, *(_DWORD *)(dword_106C2CF8 + 320) != v76)) {
          if (gD3dDrawCarShadow)
              sub_1000F460();
          *v5 = (float *)-419430400;
          v5[1] = 0;
          v34 = v5 + 2;
          *v34 = -83886080;
          v80 = (int)(v34 + 2);
          v71 = *(float *)v33 * 255.0;
          v35 = sub_1002B920(v71);
          HIBYTE(v36) = byte_106C0260;
          LOBYTE(v36) = byte_106C1614;
          v34[1] = (((unsigned __int8)byte_106C0200 | (v36 << 8)) << 8) | v35;
          v74 = v33 - 10032;
          v5 = (float **)(v34 + 2);
          v37 = *(float *)(v33 - 10032);
          flt_10364390 = *(float *)(v33 - 10032);
          dword_10364394 = *(_DWORD *)(v33 - 10028);
          dword_10364398 = *(_DWORD *)(v33 - 10024);
          if (v37 == 0.0 && *(float *)&dword_10364394 == 0.0) {
              flt_10364390 = *(float *)(v33 - 10000);
              dword_10364394 = *(_DWORD *)(v33 - 9996);
          }
          dword_10364398 = 0;
          v38 = sub_1003B1C0(&flt_10364390);
          v95 = v38;
          if (v38 < 0.5)
              v95 = 0.5;
          v39 = sub_1003B1C0((float *)(v33 - 10016));
          if (v39 < 0.5)
              v39 = 0.5;
          v40 = *(_DWORD *)(v33 + 660);
          v96 = 235.52 / *(float *)(v40 + 32992) / v95;
          v77 = 161.28 / *(float *)(v40 + 32996) / v39;
          sub_1003AE50(&flt_10364390);
          qmemcpy(&flt_106C0860, v72, 0x40u);
          v41 = v92;
          flt_106C0890 = flt_106C0890 - *((float *)v92 - 2496);
          dword_106C08C0 = 0;
          dword_106C08D0 = 1140850688;
          flt_106C0894 = flt_106C0894 - *((float *)v92 - 2495);
          flt_106C08A0 = flt_10364390 * v96;
          flt_106C08B0 = --(*(float *)&dword_10364394 * v96);
          dword_106C08C4 = 0;
          dword_106C08D4 = 1140850688;
          flt_106C08A4 = -(*(float *)&dword_10364394 * v77);
          flt_106C08B4 = flt_10364390 * v77;
          dword_106C08A8 = 0;
          dword_106C08B8 = 0;
          dword_106C08C8 = 1065353216;
          dword_106C08D8 = 0;
          dword_106C08AC = 0;
          dword_106C08BC = 0;
          dword_106C08CC = 0;
          dword_106C08DC = 1065353216;
          sub_1003B470((char *)&flt_106C0860, &flt_106C0860, &flt_106C08A0);
          v42 = flt_106C086C + flt_106C087C + flt_106C088C + *(float *)&flt_106C089C;
          if (v42 == 0.0)
              v94 = 1.0;
          else
              v94 = 1.0 / v42;
          flt_106C0860 = v94 * flt_106C0860;
          flt_106C0870 = v94 * flt_106C0870;
          flt_106C0880 = v94 * flt_106C0880;
          flt_106C0890 = v94 * flt_106C0890;
          flt_106C0864 = v94 * flt_106C0864;
          flt_106C0874 = v94 * flt_106C0874;
          flt_106C0884 = v94 * flt_106C0884;
          flt_106C0894 = v94 * flt_106C0894;
          if (!*(_DWORD *)&gUnk06594.gap1C8[12484]) {
              v43 = dword_106C0680;
              dword_106C0680 = v80;
              sub_1003289F(v92[310], v92[313], v92[312] - v92[310], v92[311] - v92[313]);
              v5 = (float **)dword_106C0680;
              dword_106C0680 = v43;
          }
          v44 = (int)v5 - dword_102E5EC8;
          LOBYTE(v44) = ((_BYTE)v5 - dword_102E5EC8) & 0xFC;
          if (v44 <= 79872) {
              while (1) {
                  v45 = (float *)*v6;
                  v32 = HIBYTE(*v6);
                  switch (v32) {
                  case 4:
                      v83 = flt_106C0860;
                      v84 = flt_106C0880;
                      v85 = flt_106C0870;
                      v86 = flt_106C0864;
                      v89 = flt_106C0890;
                      v87 = flt_106C0884;
                      v88 = flt_106C0874;
                      v90 = flt_106C0894;
                      if (gD3dDrawCarShadow || v5 != v75) {
                          v55 = (float *)v73;
                      } else {
                          v55 = v93;
                          v5 -= 2;
                          v73 = (int)v93;
                      }
                      *v5 = v45;
                      v32 = dword_103643BC;
                      v56 = v5 + 1;
                      v57 = (unsigned __int16)v45 >> 10;
                      v58 = v6 + 1;
                      v59 = (int)&v55[8 * v57] - dword_103643BC;
                      LOBYTE(v59) = v59 & 0xE0;
                      if (v59 > 32000) {
                          v5 = v56 - 1;
                          goto LABEL_59;
                      }
                      if (v57 > 32)
                          sub_10035BBA((int)aBadVtxDl);
                      v60 = (char *)*v58;
                      *v56 = v55;
                      v6 = v58 + 1;
                      v5 = v56 + 1;
                      v61 = v57;
                      v62 = v57 - 1;
                      v97 = v60;
                      v75 = v5;
                      v93 = v55;
                      v81 = v91;
                      if (v61) {
                          v63 = v62 + 1;
                          do {
                              qmemcpy32(v55, v97);
                              v64 = v55[1];
                              v79 = v55[2];
                              v78 = v84 * v79 + v83 * *v55 + v85 * v64 + v89;
                              v65 = v86 * *v55 + v87 * v79 + v88 * v64;
                              v55[3] = v78;
                              v55[4] = v65 + v90;
                              if (v67) {
                                  v68 = 1;
                              } else if (v55[3] < 1024.0) {
                                  v68 = 0;
                              } else {
                                  v68 = 2;
                              }
                              if (v55[4] >= 0.0) {
                                  if (v55[4] >= 1024.0)
                                      v68 |= 8u;
                              } else {
                                  v68 |= 4u;
                              }
                              v55 += 8;
                              *v81 = v68;
                              --v63;
                              ++v81;
                              v97 += 32;
                          } while (v63);
                          v73 = (int)v55;
                      }
                  LABEL_52:
                      v41 = v92;
                  LABEL_53:
                      v32 = ((unsigned int)v5 - dword_102E5EC8) & 0xFFFFFFFC;
                      if (v32 > 79872)
                          goto LABEL_56;
                      break;
                  case 177:
                      if (*(_DWORD *)&gUnk06594.gap1C8[12484])
                          goto LABEL_66;
                      if (((unsigned __int8)(v91[BYTE1(*v6) & 0x1F] & v91[*v6 & 0x1F]) &
                           (unsigned __int8)v91[HIWORD(*v6) & 0x1F]) != 0) {
                          if (((unsigned __int8)(v91[BYTE1(v6[1]) & 0x1F] & v91[v6[1] & 0x1F]) &
                               (unsigned __int8)v91[HIWORD(v6[1]) & 0x1F]) != 0) {
                              v6 += 2;
                          } else {
                              if (gD3dDrawCarShadow) {
                                  sub_100106A0((int)v72,
                                               (int)(v41 + 352),
                                               (int)(v41 + 342),
                                               &v93[8 * (v6[1] & 0x1F)],
                                               &v93[8 * (BYTE1(v6[1]) & 0x1F)],
                                               &v93[8 * (HIWORD(v6[1]) & 0x1F)],
                                               v74);
                              } else {
                                  *v5 = (float *)-1090519040;
                                  v46 = (int *)(v5 + 1);
                                  *v46 = v6[1] & 0xFFFFFF;
                                  v5 = (float **)(v46 + 1);
                              }
                              v6 += 2;
                          }
                          goto LABEL_53;
                      }
                      if (((unsigned __int8)(v91[BYTE1(v6[1]) & 0x1F] & v91[v6[1] & 0x1F]) &
                           (unsigned __int8)v91[HIWORD(v6[1]) & 0x1F]) != 0) {
                          if (gD3dDrawCarShadow) {
                              sub_100106A0((int)v72,
                                           (int)(v41 + 352),
                                           (int)(v41 + 342),
                                           &v93[8 * (*v6 & 0x1F)],
                                           &v93[8 * (BYTE1(v45) & 0x1F)],
                                           &v93[8 * (((unsigned int)v45 >> 16) & 0x1F)],
                                           v74);
                          } else {
                              *v5 = (float *)-1090519040;
                              v47 = (int *)(v5 + 1);
                              *v47 = *v6 & 0xFFFFFF;
                              v5 = (float **)(v47 + 1);
                          }
                          v6 += 2;
                          goto LABEL_53;
                      }
                      if (!gD3dDrawCarShadow)
                          goto LABEL_66;
                      sub_100106A0((int)v72,
                                   (int)(v92 + 352),
                                   (int)(v41 + 342),
                                   &v93[8 * (*v6 & 0x1F)],
                                   &v93[8 * (BYTE1(v45) & 0x1F)],
                                   &v93[8 * (((unsigned int)v45 >> 16) & 0x1F)],
                                   v74);
                      sub_100106A0((int)v72,
                                   (int)(v92 + 352),
                                   (int)(v41 + 342),
                                   &v93[8 * (v6[1] & 0x1F)],
                                   &v93[8 * (BYTE1(v6[1]) & 0x1F)],
                                   &v93[8 * (HIWORD(v6[1]) & 0x1F)],
                                   v74);
                      v6 += 2;
                      goto LABEL_52;
                  case 184:
                      goto LABEL_56;
                  case 191:
                      if (*(_DWORD *)&gUnk06594.gap1C8[12484])
                          goto LABEL_66;
                      if (((unsigned __int8)(v91[BYTE1(v6[1]) & 0x1F] & v91[v6[1] & 0x1F]) &
                           (unsigned __int8)v91[HIWORD(v6[1]) & 0x1F]) != 0) {
                          v6 += 2;
                      } else if (gD3dDrawCarShadow) {
                          sub_100106A0((int)v72,
                                       (int)(v41 + 352),
                                       (int)(v41 + 342),
                                       &v93[8 * (v6[1] & 0x1F)],
                                       &v93[8 * (BYTE1(v6[1]) & 0x1F)],
                                       &v93[8 * (HIWORD(v6[1]) & 0x1F)],
                                       v74);
                          v6 += 2;
                      } else {
                      LABEL_66:
                          v53 = v6 + 1;
                          *v5 = v45;
                          v54 = v5 + 1;
                          *v54 = *v53;
                          v5 = (float **)(v54 + 1);
                          v6 = v53 + 1;
                      }
                      goto LABEL_53;
                  default:
                      v6 += 2;
                      goto LABEL_53;
                  }
              }
          }
        LABEL_56:
          if (!gD3dDrawCarShadow && v5 == v75) {
              v5 -= 2;
              v73 = (int)v93;
          }
        LABEL_59:
          v33 = (int)v92;
        }
      }
      v33 += 11112;
      v48 = a3 >> 1 == 0;
      ++v76;
      v92 = (__int16 *)v33;
      a3 >>= 1;
      if (v48)
        break;
      v6 = v82;
    }
    *v5 = (float *)-1207959552;
    v5[1] = 0;
    v5 += 2;
    meth_DebugPrint((void *)v32);
  }
  result = v73;
  dword_10363FF0 = (int)v5;
  dword_10364304 = v73;
  return result;
}
// 10010241: variable 'v32' is possibly undefined
// 10010548: variable 'v67' is possibly undefined
// 100AA87C: using guessed type int dword_100AA87C;
// 102E5EC8: using guessed type int dword_102E5EC8;
// 10363FF0: using guessed type int dword_10363FF0;
// 10364304: using guessed type int dword_10364304;
// 10364390: using guessed type float flt_10364390;
// 10364394: using guessed type int dword_10364394;
// 10364398: using guessed type int dword_10364398;
// 1036439C: using guessed type int dword_1036439C;
// 103643A0: using guessed type int dword_103643A0;
// 103643BC: using guessed type int dword_103643BC;
// 1039B6C8: using guessed type int gD3dDrawCarShadow;
// 106C0200: using guessed type char byte_106C0200;
// 106C0260: using guessed type char byte_106C0260;
// 106C0680: using guessed type int dword_106C0680;
// 106C0688: using guessed type int dword_106C0688;
// 106C069C: using guessed type int dword_106C069C;
// 106C06A4: using guessed type int dword_106C06A4;
// 106C0860: using guessed type float flt_106C0860;
// 106C0864: using guessed type float flt_106C0864;
// 106C086C: using guessed type float flt_106C086C;
// 106C0870: using guessed type float flt_106C0870;
// 106C0874: using guessed type float flt_106C0874;
// 106C087C: using guessed type float flt_106C087C;
// 106C0880: using guessed type float flt_106C0880;
// 106C0884: using guessed type float flt_106C0884;
// 106C088C: using guessed type float flt_106C088C;
// 106C0890: using guessed type float flt_106C0890;
// 106C0894: using guessed type float flt_106C0894;
// 106C08A0: using guessed type float flt_106C08A0;
// 106C08A4: using guessed type float flt_106C08A4;
// 106C08A8: using guessed type int dword_106C08A8;
// 106C08AC: using guessed type int dword_106C08AC;
// 106C08B0: using guessed type float flt_106C08B0;
// 106C08B4: using guessed type float flt_106C08B4;
// 106C08B8: using guessed type int dword_106C08B8;
// 106C08BC: using guessed type int dword_106C08BC;
// 106C08C0: using guessed type int dword_106C08C0;
// 106C08C4: using guessed type int dword_106C08C4;
// 106C08C8: using guessed type int dword_106C08C8;
// 106C08CC: using guessed type int dword_106C08CC;
// 106C08D0: using guessed type int dword_106C08D0;
// 106C08D4: using guessed type int dword_106C08D4;
// 106C08D8: using guessed type int dword_106C08D8;
// 106C08DC: using guessed type int dword_106C08DC;
// 106C1610: using guessed type int dword_106C1610;
// 106C1614: using guessed type char byte_106C1614;
// 106C2CF8: using guessed type int dword_106C2CF8;
// 10B4E1D8: using guessed type int dword_10B4E1D8;
// 11829110: using guessed type int dword_11829110;

//----- (100106A0) --------------------------------------------------------
int *__cdecl sub_100106A0(int a1, int a2, int a3, _DWORD *a4, _DWORD *a5, _DWORD *a6, int a7) {
  int v7;      // edi
  int v8;      // esi
  int v9;      // esi
  int *result; // eax
  int *v11;    // ecx
  int *v12;    // edx
  int *v13;    // esi
  int *v14;    // esi
  int *v15;    // [esp+10h] [ebp-8h] BYREF
  int v16;     // [esp+14h] [ebp-4h]
  int i;       // [esp+30h] [ebp+18h]

  v7 = dword_102E5ECC;
  v15 = 0;
  if (dword_102E5ECC)
    dword_102E5ECC = *(_DWORD *)dword_102E5ECC;
  *(_DWORD *)(v7 + 4) = v7 + 8;
  *(_DWORD *)(v7 + 8) = *a6;
  *(_DWORD *)(*(_DWORD *)(v7 + 4) + 4) = a6[1];
  *(_DWORD *)(*(_DWORD *)(v7 + 4) + 8) = a6[2];
  *(_DWORD *)(*(_DWORD *)(v7 + 4) + 20) = a6[5];
  *(_DWORD *)(*(_DWORD *)(v7 + 4) + 24) = a6[6];
  *(_DWORD *)(*(_DWORD *)(v7 + 4) + 28) = a6[7];
  sub_10010D10(*(float **)(v7 + 4));
  *(_DWORD *)v7 = v15;
  v8 = dword_102E5ECC;
  v15 = (int *)v7;
  if (dword_102E5ECC)
    dword_102E5ECC = *(_DWORD *)dword_102E5ECC;
  *(_DWORD *)(v8 + 4) = v8 + 8;
  *(_DWORD *)(v8 + 8) = *a5;
  *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) = a5[1];
  *(_DWORD *)(*(_DWORD *)(v8 + 4) + 8) = a5[2];
  *(_DWORD *)(*(_DWORD *)(v8 + 4) + 20) = a5[5];
  *(_DWORD *)(*(_DWORD *)(v8 + 4) + 24) = a5[6];
  *(_DWORD *)(*(_DWORD *)(v8 + 4) + 28) = a5[7];
  sub_10010D10(*(float **)(v8 + 4));
  *(_DWORD *)v8 = v15;
  v15 = (int *)v8;
  v9 = dword_102E5ECC;
  if (dword_102E5ECC)
    dword_102E5ECC = *(_DWORD *)dword_102E5ECC;
  *(_DWORD *)(v9 + 4) = v9 + 8;
  *(_DWORD *)(v9 + 8) = *a4;
  *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) = a4[1];
  *(_DWORD *)(*(_DWORD *)(v9 + 4) + 8) = a4[2];
  *(_DWORD *)(*(_DWORD *)(v9 + 4) + 20) = a4[5];
  *(_DWORD *)(*(_DWORD *)(v9 + 4) + 24) = a4[6];
  *(_DWORD *)(*(_DWORD *)(v9 + 4) + 28) = a4[7];
  sub_10010D10(*(float **)(v9 + 4));
  *(_DWORD *)v9 = v15;
  v15 = (int *)v9;
  *(_DWORD *)v7 = v9;
  v16 = 3;
  sub_100109A0((int)&v15, (double(__cdecl *)(_DWORD *))sub_10010960);
  result = (int *)v16;
  if (v16 >= 2 &&
      (sub_100109A0((int)&v15, (double(__cdecl *)(_DWORD *))sub_10010970),
       result = (int *)v16,
       v16 >= 2) &&
      (sub_100109A0((int)&v15, (double(__cdecl *)(_DWORD *))sub_10010980),
       result = (int *)v16,
       v16 >= 2) &&
      (sub_100109A0((int)&v15, (double(__cdecl *)(_DWORD *))sub_10010990),
       result = (int *)v16,
       v16 >= 2)) {
    for (i = 0; i < v16; ++i) {
      v14 = v15;
      v15 = (int *)*v15;
      sub_10010BF0(a1, a2, a3, 0, v14[1], 0.0, 0.0, a7);
      sub_10010BF0(a1, a2, a3, 1, v14[1], 1024.0, 0.0, a7);
      sub_10010BF0(a1, a2, a3, 2, v14[1], 0.0, 1024.0, a7);
      sub_10010BF0(a1, a2, a3, 3, v14[1], 1024.0, 1024.0, a7);
      if (v14 >= dword_102E54C0 && v14 < &dword_102E5EC0) {
        *v14 = dword_102E5ECC;
        dword_102E5ECC = (int)v14;
      }
      result = (int *)(i + 1);
    }
  } else if ((int)result > 0) {
    v11 = v15;
    v12 = (int *)dword_102E5ECC;
    v13 = result;
    do {
      result = v11;
      v11 = (int *)*v11;
      v15 = v11;
      if (result >= dword_102E54C0 && result < &dword_102E5EC0) {
        *result = (int)v12;
        v11 = v15;
        v12 = result;
        dword_102E5ECC = (int)result;
      }
      v13 = (int *)((char *)v13 - 1);
    } while (v13);
  }
  return result;
}
// 10010894: conditional instruction was optimized away because of '%var_4.4>=2'
// 102E5EC0: using guessed type int dword_102E5EC0;
// 102E5ECC: using guessed type int dword_102E5ECC;

//----- (10010960) --------------------------------------------------------
double __cdecl sub_10010960(int a1) {
  return *(float *)(a1 + 12);
}

//----- (10010970) --------------------------------------------------------
double __cdecl sub_10010970(int a1) {
  return 1024.0 - *(float *)(a1 + 12);
}

//----- (10010980) --------------------------------------------------------
double __cdecl sub_10010980(int a1) {
  return *(float *)(a1 + 16);
}

//----- (10010990) --------------------------------------------------------
double __cdecl sub_10010990(int a1) {
  return 1024.0 - *(float *)(a1 + 16);
}

//----- (100109A0) --------------------------------------------------------
int *__cdecl sub_100109A0(int a1, double(__cdecl *a2)(_DWORD *)) {
  int *v3;     // ecx
  int **v4;    // ebx
  int v5;      // eax
  int *v6;     // esi
  int **v7;    // edi
  char v9;     // c0
  int *v10;    // eax
  int v11;     // eax
  int *v12;    // eax
  int *v13;    // eax
  int *v14;    // eax
  int *result; // eax
  int *v16;    // edx
  float v17;   // [esp+0h] [ebp-24h]
  float v18;   // [esp+0h] [ebp-24h]
  float v19;   // [esp+14h] [ebp-10h]
  float v20;   // [esp+18h] [ebp-Ch]
  int v21;     // [esp+1Ch] [ebp-8h]
  int *v22;    // [esp+20h] [ebp-4h]
  int *v23;    // [esp+28h] [ebp+4h]

  v3 = 0;
  v4 = *(int ***)a1;
  v5 = *(_DWORD *)(a1 + 4);
  v6 = **(int ***)a1;
  v7 = *(int ***)a1;
  v23 = 0;
  v21 = v5;
  if (v5 > 0) {
    while (1) {
      v22 = (int *)*v6;
      v20 = a2((_DWORD *)v6[1]);
      v19 = a2(v4[1]);
      if (v9) {
        v12 = *v7;
        if (v19 >= 0.0) {
          if (v12)
              *v7 = (int *)*v12;
          *v6 = (int)v23;
          v23 = v6;
          v18 = v20 / (v20 - v19);
          v13 = (int *)sub_10010B00((int)v6, (int)v4, v18);
          *v13 = (int)*v7;
          *v7 = v13;
          v7 = (int **)v13;
          goto LABEL_14;
        }
        if (v12)
          *v7 = (int *)*v12;
        v14 = v23;
        v23 = v6;
        *v6 = (int)v14;
        v11 = *(_DWORD *)(a1 + 4) - 1;
      } else {
        if (v19 >= 0.0) {
          v7 = (int **)v6;
          goto LABEL_14;
        }
        v17 = v19 / (v19 - v20);
        v10 = (int *)sub_10010B00((int)v4, (int)v6, v17);
        *v10 = (int)*v7;
        *v7 = v10;
        v7 = (int **)v6;
        v11 = *(_DWORD *)(a1 + 4) + 1;
      }
      *(_DWORD *)(a1 + 4) = v11;
    LABEL_14:
      v4 = (int **)v6;
      v6 = v22;
      if (*(int *)(a1 + 4) >= 2 && --v21 > 0)
        continue;
      v3 = v23;
      break;
    }
  }
  *(_DWORD *)a1 = v6;
  result = v3;
  if (v3)
    v3 = (int *)*v3;
  if (result) {
    v16 = (int *)dword_102E5ECC;
    do {
      if (result >= dword_102E54C0 && result < &dword_102E5EC0) {
        *result = (int)v16;
        v16 = result;
        dword_102E5ECC = (int)result;
      }
      result = v3;
      if (v3)
        v3 = (int *)*v3;
    } while (result);
  }
  return result;
}
// 10010A06: variable 'v9' is possibly undefined
// 102E5EC0: using guessed type int dword_102E5EC0;
// 102E5ECC: using guessed type int dword_102E5ECC;

//----- (10010B00) --------------------------------------------------------
int __cdecl sub_10010B00(int a1, int a2, float a3) {
  int result; // eax

  result = dword_102E5ECC;
  if (dword_102E5ECC)
    dword_102E5ECC = *(_DWORD *)dword_102E5ECC;
  *(_DWORD *)(result + 4) = result + 8;
  *(float *)(result + 8) =
      (**(float **)(a2 + 4) - **(float **)(a1 + 4)) * a3 + **(float **)(a1 + 4);
  *(float *)(*(_DWORD *)(result + 4) + 4) =
      (*(float *)(*(_DWORD *)(a2 + 4) + 4) - *(float *)(*(_DWORD *)(a1 + 4) + 4)) * a3 +
      *(float *)(*(_DWORD *)(a1 + 4) + 4);
  *(float *)(*(_DWORD *)(result + 4) + 8) =
      (*(float *)(*(_DWORD *)(a2 + 4) + 8) - *(float *)(*(_DWORD *)(a1 + 4) + 8)) * a3 +
      *(float *)(*(_DWORD *)(a1 + 4) + 8);
  *(float *)(*(_DWORD *)(result + 4) + 12) =
      (*(float *)(*(_DWORD *)(a2 + 4) + 12) - *(float *)(*(_DWORD *)(a1 + 4) + 12)) * a3 +
      *(float *)(*(_DWORD *)(a1 + 4) + 12);
  *(float *)(*(_DWORD *)(result + 4) + 16) =
      (*(float *)(*(_DWORD *)(a2 + 4) + 16) - *(float *)(*(_DWORD *)(a1 + 4) + 16)) * a3 +
      *(float *)(*(_DWORD *)(a1 + 4) + 16);
  *(float *)(*(_DWORD *)(result + 4) + 20) =
      (*(float *)(*(_DWORD *)(a2 + 4) + 20) - *(float *)(*(_DWORD *)(a1 + 4) + 20)) * a3 +
      *(float *)(*(_DWORD *)(a1 + 4) + 20);
  *(float *)(*(_DWORD *)(result + 4) + 24) =
      (*(float *)(*(_DWORD *)(a2 + 4) + 24) - *(float *)(*(_DWORD *)(a1 + 4) + 24)) * a3 +
      *(float *)(*(_DWORD *)(a1 + 4) + 24);
  *(float *)(*(_DWORD *)(result + 4) + 28) =
      (*(float *)(*(_DWORD *)(a2 + 4) + 28) - *(float *)(*(_DWORD *)(a1 + 4) + 28)) * a3 +
      *(float *)(*(_DWORD *)(a1 + 4) + 28);
  return result;
}
// 102E5ECC: using guessed type int dword_102E5ECC;

//----- (10010BF0) --------------------------------------------------------
void __cdecl sub_10010BF0(int a1, int a2, int a3, int a4, int a5, float a6, float a7, int a8) {
  double v9;  // st6
  double v10; // st5
  double v11; // st4
  double v12; // st7
  int v13;    // esi
  double v14; // st7
  float v15;  // [esp+18h] [ebp+10h]
  float v16;  // [esp+20h] [ebp+18h]
  float v17;  // [esp+24h] [ebp+1Ch]

  v9 = *(float *)(a5 + 16) - a7;
  v10 = *(float *)(32 * a4 + a2 + 12) - a6;
  v11 = *(float *)(a5 + 12) - a6;
  v12 = *(float *)(32 * a4 + a2 + 16) - a7;
  v16 = v11;
  v13 = 32 * a4 + a2;
  v17 = v9;
  v15 = v10;
  if (v10 * v15 + v12 * v12 > v11 * v16 + v9 * v17) {
    v14 = *(float *)(a1 + 40) * *(float *)(a5 + 8) + *(float *)(a1 + 24) * *(float *)(a5 + 4) +
          *(float *)(a1 + 8) * *(float *)a5 + *(float *)(a1 + 56);
    if (*(float *)(a8 + 56) - -1.0 >= v14) {
      *(float *)v13 = *(float *)(a1 + 32) * *(float *)(a5 + 8) +
                      *(float *)(a1 + 16) * *(float *)(a5 + 4) + *(float *)a5 * *(float *)a1 +
                      *(float *)(a1 + 48);
      *(float *)(v13 + 4) = *(float *)(a1 + 36) * *(float *)(a5 + 8) +
                            *(float *)(a1 + 20) * *(float *)(a5 + 4) +
                            *(float *)(a1 + 4) * *(float *)a5 + *(float *)(a1 + 52);
      *(float *)(v13 + 8) = v14;
      *(_DWORD *)(v13 + 12) = *(_DWORD *)(a5 + 12);
      *(_DWORD *)(v13 + 16) = *(_DWORD *)(a5 + 16);
      *(_DWORD *)(a3 + 4 * a4) = 1;
    }
  }
}

//----- (10010D10) --------------------------------------------------------
float *__cdecl sub_10010D10(float *a1) {
  float *result; // eax
  double v2;     // st7
  float v3;      // [esp+0h] [ebp-4h]
  float v4;      // [esp+8h] [ebp+4h]

  result = a1;
  v2 = a1[1];
  v3 = *a1;
  v4 = a1[2];
  result[3] = v4 * flt_106C0880 + v3 * flt_106C0860 + v2 * flt_106C0870 + flt_106C0890;
  result[4] = v4 * flt_106C0884 + v3 * flt_106C0864 + v2 * flt_106C0874 + flt_106C0894;
  return result;
}
// 106C0860: using guessed type float flt_106C0860;
// 106C0864: using guessed type float flt_106C0864;
// 106C0870: using guessed type float flt_106C0870;
// 106C0874: using guessed type float flt_106C0874;
// 106C0880: using guessed type float flt_106C0880;
// 106C0884: using guessed type float flt_106C0884;
// 106C0890: using guessed type float flt_106C0890;
// 106C0894: using guessed type float flt_106C0894;

//----- (10010D90) --------------------------------------------------------
int __cdecl qsort_10010D90(const void *a1, const void *a2) {
  __int16 v2; // ax
  __int16 v3; // cx
  int result; // eax

  v2 = *((_WORD *)a1 + 1);
  v3 = *((_WORD *)a2 + 1);
  if (v2 <= v3)
    result = (v2 >= v3) - 1;
  else
    result = 1;
  return result;
}

//----- (10010DC0) --------------------------------------------------------
int __cdecl sub_10010DC0(int a1, int a2, int a3) {
  int v3;                // edx
  int v4;                // ebx
  int v5;                // edi
  int v6;                // ecx
  int v7;                // esi
  char *v8;              // eax
  int v9;                // esi
  int v10;               // ebp
  __int64 v11;           // rax
  unsigned __int8 *v12;  // esi
  int v13;               // edx
  int v14;               // ebx
  int v15;               // ecx
  int v16;               // esi
  int v17;               // ebp
  int v18;               // edi
  __int16 *v19;          // ebx
  __int16 v20;           // ax
  int v21;               // esi
  int v22;               // ecx
  void *v23;             // eax
  unsigned __int16 i;    // ax
  int v25;               // edx
  int v26;               // eax
  int v27;               // esi
  int *v28;              // ebx
  int v29;               // edi
  double v30;            // st7
  int v31;               // ecx
  int *v32;              // edx
  int v33;               // eax
  int *v34;              // ebp
  int v35;               // ecx
  int v36;               // edi
  int v37;               // edx
  unsigned __int16 *v38; // esi
  unsigned __int16 v39;  // ax
  int v40;               // edi
  __int16 v41;           // si
  unsigned __int16 *v42; // edx
  unsigned __int16 v43;  // cx
  double v44;            // st7
  float v45;             // ecx
  double v46;            // st7
  int v47;               // ebx
  __int64 v48;           // rax
  double v49;            // st7
  __int64 v50;           // rax
  double v51;            // st7
  int result;            // eax
  int v53;               // esi
  int v54;               // edx
  int v55;               // eax
  __int16 *v56;          // ebp
  __int16 *v57;          // ebx
  int v58;               // eax
  __int16 *v59;          // ecx
  _WORD *v60;            // ecx
  _WORD *v61;            // ecx
  int v62;               // ecx
  int v63;               // ecx
  int v64;               // ebp
  int v65;               // eax
  bool v66;              // cc
  float v67;             // [esp+0h] [ebp-48h]
  float v68;             // [esp+4h] [ebp-44h]
  int v69;               // [esp+34h] [ebp-14h] BYREF
  int v70;               // [esp+38h] [ebp-10h]
  int v71[3];            // [esp+3Ch] [ebp-Ch] BYREF
  float v72;             // [esp+54h] [ebp+Ch]
  int *v73;              // [esp+54h] [ebp+Ch]

  v3 = dword_10A9BBCC;
  v4 = dword_10A9BBC4;
  v5 = 0;
  dword_102E5ED0 = 0;
  if (dword_10A9BBCC <= dword_10A9BBC4) {
    while (1) {
      v6 = dword_10A9BBD0[v3];
      v7 = dword_10A9BCD0[v3];
      if (v6 <= v7)
        break;
    LABEL_6:
      if (++v3 > v4)
        goto LABEL_9;
    }
    v8 = (char *)&dword_10364000[v5] + 1;
    while (v8 != (char *)&unk_10364301) {
      *(v8 - 1) = v6;
      *v8 = v3;
      ++v5;
      v8 += 4;
      if (++v6 > v7)
        goto LABEL_6;
    }
    dword_102E5ED0 = 1;
  }
LABEL_9:
  v9 = *(_DWORD *)&gUnk06594.gap1C8[12104];
  LOBYTE(dword_10364000[v5]) = -1;
  BYTE1(dword_10364000[v5]) = -1;
  v10 = (__int64)(*(float *)(v9 + 48) * 0.03125);
  if (v10 == 64)
    v10 = 63;
  v11 = (__int64)(*(float *)(v9 + 52) * 0.03125);
  if ((_DWORD)v11 == 64)
    LODWORD(v11) = 63;
  if (v5 > 0) {
    v12 = (unsigned __int8 *)dword_10364000 + 1;
    v69 = v5;
    do {
      v13 = *v12 - (_DWORD)v11;
      v14 = *(v12 - 1) - v10;
      v12 += 4;
      v4 = v13 * v13 + v14 * v14;
      v15 = v69;
      *(_WORD *)(v12 - 3) = v4;
      v69 = v15 - 1;
    } while (v15 != 1);
  }
  qsort(dword_10364000, v5, 4, qsort_10010D90);
  sub_10060780(v4, byte_1038B4C0, *(unsigned int *)&gUnk06594.gap4918[20], -1);
  v16 = 0;
  dword_103643A4 = 0;
  dword_10363FEC = -1;
  dword_102E5F24 = -1;
  dword_102E5EC0 = -1;
  v17 = (-3 - (__int64)(flt_106C0210 * -0.03125)) * (-3 - (__int64)(flt_106C0210 * -0.03125));
  if (!dword_106909E0 || (v70 = 9, *(_DWORD *)&gUnk06594.gap1C8[12104] != dword_106C2CF8 + 10248))
    v70 = 1;
  v18 = LOBYTE(dword_10364000[0]);
  if (LOBYTE(dword_10364000[0]) != 255) {
    v19 = (__int16 *)dword_10364000 + 1;
    while (1) {
      v20 = *v19;
      if (*v19 > 8 && dword_10363FEC == -1)
        dword_10363FEC = v16;
      if (v20 > v70 && dword_102E5EC0 == -1)
        dword_102E5EC0 = v16;
      if (v20 > v17 && dword_102E5F24 == -1)
        dword_102E5F24 = v16;
      v21 = *((unsigned __int8 *)v19 - 1);
      if (dword_10680618 && byte_1038B4C0[(_DWORD)dword_10680618] &&
          sub_1003A950(
              *(float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 48),
              *(float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 52))) {
        v22 = dword_103643A4;
        v23 = dword_10680618;
        word_10362F28[dword_103643A4] = (__int16)dword_10680618;
        dword_103643A4 = v22 + 1;
        byte_1038B4C0[(_DWORD)v23] = 0;
      }
      v69 = sub_10002E90(v18, v21);
      if (v69) {
        for (i = sub_10002F40((unsigned __int16 *)&v69); i;
             i = sub_10002F40((unsigned __int16 *)&v69)) {
          if (byte_1038B4C0[i] && (void *)i != dword_10680618) {
              v25 = dword_103643A4;
              byte_1038B4C0[i] = 0;
              word_10362F28[v25] = i;
              dword_103643A4 = v25 + 1;
          }
        }
      }
      v19 += 2;
      v18 = *((unsigned __int8 *)v19 - 2);
      if (v18 == 255)
        break;
      v16 = dword_103643A4;
    }
  }
  v26 = 0;
  v27 = 0;
  dword_102E5ED8 = 0;
  if (dword_100B36FC > 0) {
    v28 = dword_10277E60;
    v29 = a3 + 48;
    do {
      if (*(_DWORD *)(v29 + 3800)) {
        if (*v28) {
          sub_1003AEE0(
              flt_102E54A8, (float *)v29, (float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 48));
          v30 = sub_1003AC90(*(float **)&gUnk06594.gap1C8[12104], flt_102E54A8);
          if (v30 >= 2.0) {
              v31 = dword_102E5ED8 - 1;
              if (dword_102E5ED8 - 1 >= 0) {
                  v32 = &dword_102E5EE4[v31];
                  do {
                      if (v30 >= flt_10363F28[v31])
                          break;
                      --v32;
                      dword_10363F2C[v31] = flt_10363F28[v31];
                      v32[1] = dword_102E5EE0[v31--];
                  } while (v31 >= 0);
              }
              v33 = dword_102E5ED8;
              dword_102E5EE4[v31] = v27;
              dword_10363F2C[v31] = v30;
              dword_102E5ED8 = v33 + 1;
          }
        }
      }
      ++v27;
      ++v28;
      v29 += 11112;
    } while (v27 < dword_100B36FC);
    v26 = dword_102E5ED8;
  }
  if (v26 > 4) {
    v26 = 4;
    dword_102E5ED8 = 4;
  }
  if (v26 > 0) {
    v34 = dword_102E5EE0;
    v70 = dword_102E5ED8;
    do {
      v35 = *v34;
      v36 = 0;
      v37 = a3 + 11112 * *v34;
      if (*(int *)(v37 + 10640) > 0) {
        v38 = (unsigned __int16 *)(v37 + 10576);
        do {
          v39 = *v38++;
          ++v36;
          byte_1038B4C0[v39] |= 1 << v35;
        } while (v36 < *(_DWORD *)(v37 + 10640));
      }
      ++v34;
      --v70;
    } while (*(float *)&v70 != 0.0);
  }
  v40 = dword_106C1988;
  v41 = 0;
  LOWORD(dword_1039B6CC) = 0;
  if (dword_106C1988 > 0) {
    v42 = (unsigned __int16 *)&gUnk06594.gap1C8[12112];
    do {
      v43 = *v42++;
      v41 |= *(_WORD *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * v43 + 74);
      --v40;
      LOWORD(dword_1039B6CC) = v41;
    } while (v40);
  }
  v44 = **(float **)&gUnk06594.gap1C8[12104];
  v45 = *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 4);
  v70 = **(int **)&gUnk06594.gap1C8[12104];
  v72 = v45;
  if (v44 == 0.0 && v45 == 0.0)
    *(float *)&v70 = 0.000099999997;
  dword_103643B8 = (int)sub_10069530();
  v68 = v72 * 50.0;
  v67 = *(float *)&v70 * 50.0;
  sub_10030E20((int)&flt_106C0860, dword_103643B8, v67, v68, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0);
  if (*(_DWORD *)&gUnk06594.gap1C8[12500]) {
    flt_103643A8 = *(float *)(dword_106C2CF8 + 32) - *(float *)dword_106C2CF8 * 4.0;
    flt_103643AC = *(float *)(dword_106C2CF8 + 36) - *(float *)(dword_106C2CF8 + 4) * 4.0;
    flt_103643B0 = *(float *)(dword_106C2CF8 + 40) - *(float *)(dword_106C2CF8 + 8) * 4.0;
  } else {
    LODWORD(flt_103643A8) = dword_106C0670;
    LODWORD(flt_103643AC) = dword_106C0674;
    LODWORD(flt_103643B0) = dword_106C0678;
  }
  sub_1003AE50(&flt_103643A8);
  sub_1003AD10((int)&flt_103643A8, 120.0);
  v46 = flt_103643A8;
  dword_10364388 = (dword_10364388 + 1) % 4;
  v47 = 24 * dword_10364388;
  qmemcpy((char *)&unk_100A64E8 + 24 * dword_10364388, &unk_100AA860, 0x18u);
  v48 = (__int64)v46;
  v49 = flt_103643AC;
  byte_100A64F8[v47] = v48;
  v50 = (__int64)v49;
  v51 = flt_103643B0;
  byte_100A64F9[v47] = v50;
  byte_100A64FA[v47] = (__int64)v51;
  result = dword_100B36F8;
  *(float *)&v70 = 0.0;
  if (dword_100B36F8 > 0) {
    v73 = (int *)(a2 + 96);
    do {
      v53 = *v73;
      if (*v73) {
        v54 = *(_DWORD *)(v53 + 48);
        v55 = *(_DWORD *)(v53 + 52);
        v56 = (__int16 *)(v53 + 10656);
        v57 = (__int16 *)(v53 + 10652);
        *(float *)&v71[2] = *(float *)(v53 + 56) - *(float *)(v53 + 10644);
        v71[0] = v54;
        v71[1] = v55;
        sub_1000F480(a1, (int)v71, 8, (_WORD *)(v53 + 10652), (_WORD *)(v53 + 10656));
        v58 = *(_DWORD *)&gUnk06594.gap1C8[8640];
        if (*(__int16 *)(v53 + 10652) < *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640])) {
          *v57 = *(_WORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]);
          v58 = *(_DWORD *)&gUnk06594.gap1C8[8640];
        }
        v59 = (__int16 *)(a1 + 88 * v58);
        if (*v56 < *(_DWORD *)v59) {
          *v56 = *v59;
          v58 = *(_DWORD *)&gUnk06594.gap1C8[8640];
        }
        if (*(__int16 *)(v53 + 10654) < *(_DWORD *)(a1 + 88 * v58 + 4)) {
          *(_WORD *)(v53 + 10654) = *(_WORD *)(a1 + 88 * v58 + 4);
          v58 = *(_DWORD *)&gUnk06594.gap1C8[8640];
        }
        if (*(__int16 *)(v53 + 10658) < *(_DWORD *)(a1 + 88 * v58 + 4)) {
          *(_WORD *)(v53 + 10658) = *(_WORD *)(a1 + 88 * v58 + 4);
          v58 = *(_DWORD *)&gUnk06594.gap1C8[8640];
        }
        v60 = (_WORD *)(a1 + 88 * v58);
        if (*v57 > *((_DWORD *)v60 + 2) + *(_DWORD *)v60) {
          *v57 = v60[4] + *v60;
          v58 = *(_DWORD *)&gUnk06594.gap1C8[8640];
        }
        v61 = (_WORD *)(a1 + 88 * v58);
        if (*(__int16 *)(v53 + 10656) > *((_DWORD *)v61 + 2) + *(_DWORD *)v61) {
          *(_WORD *)(v53 + 10656) = v61[4] + *v61;
          v58 = *(_DWORD *)&gUnk06594.gap1C8[8640];
        }
        v62 = a1 + 88 * v58;
        if (*(__int16 *)(v53 + 10654) > *(_DWORD *)(v62 + 4) + *(_DWORD *)(v62 + 12)) {
          *(_WORD *)(v53 + 10654) = *(_WORD *)(v62 + 4) + *(_WORD *)(v62 + 12);
          v58 = *(_DWORD *)&gUnk06594.gap1C8[8640];
        }
        v63 = *(_DWORD *)(a1 + 88 * v58 + 12);
        v64 = *(_DWORD *)(a1 + 88 * v58 + 4);
        v65 = a1 + 88 * v58;
        if (*(__int16 *)(v53 + 10658) > v64 + v63)
          *(_WORD *)(v53 + 10658) = *(_WORD *)(v65 + 4) + *(_WORD *)(v65 + 12);
      }
      result = v70 + 1;
      v66 = ++v70 < dword_100B36F8;
      v73 += 32;
    } while (v66);
  }
  return result;
}
// 1007E2A0: using guessed type int __cdecl qsort(_DWORD, _DWORD, _DWORD, _DWORD);
// 100B36F8: using guessed type int dword_100B36F8;
// 100B36FC: using guessed type int dword_100B36FC;
// 102E5EC0: using guessed type int dword_102E5EC0;
// 102E5ED0: using guessed type int dword_102E5ED0;
// 102E5ED8: using guessed type int dword_102E5ED8;
// 102E5EE0: using guessed type int dword_102E5EE0[];
// 102E5F24: using guessed type int dword_102E5F24;
// 10363F28: using guessed type float flt_10363F28[];
// 10363FEC: using guessed type int dword_10363FEC;
// 10364000: using guessed type int dword_10364000[];
// 10364388: using guessed type int dword_10364388;
// 103643A4: using guessed type int dword_103643A4;
// 103643A8: using guessed type float flt_103643A8;
// 103643AC: using guessed type float flt_103643AC;
// 103643B0: using guessed type float flt_103643B0;
// 103643B8: using guessed type int dword_103643B8;
// 1039B6CC: using guessed type int dword_1039B6CC;
// 106909E0: using guessed type int dword_106909E0;
// 106C0210: using guessed type float flt_106C0210;
// 106C0670: using guessed type int dword_106C0670;
// 106C0674: using guessed type int dword_106C0674;
// 106C0678: using guessed type int dword_106C0678;
// 106C0860: using guessed type float flt_106C0860;
// 106C1988: using guessed type int dword_106C1988;
// 106C2CF8: using guessed type int dword_106C2CF8;
// 10A9BBC4: using guessed type int dword_10A9BBC4;
// 10A9BBCC: using guessed type int dword_10A9BBCC;
// 10A9BBD0: using guessed type int dword_10A9BBD0[];

//----- (10011590) --------------------------------------------------------
int __cdecl sub_10011590(int a1, int a2, int a3, int a4) {
  void *v4;             // ecx
  int v5;               // ecx
  _DWORD *v6;           // eax
  int v7;               // eax
  int v8;               // eax
  _DWORD *v9;           // eax
  _DWORD *v10;          // eax
  _DWORD *v11;          // eax
  _DWORD *v12;          // eax
  _DWORD *v13;          // eax
  _DWORD *v14;          // eax
  _DWORD *v15;          // eax
  _DWORD *v16;          // eax
  _DWORD *v17;          // eax
  _DWORD *v18;          // eax
  _DWORD *v19;          // eax
  _DWORD *v20;          // eax
  _DWORD *v21;          // eax
  _DWORD *v22;          // eax
  _DWORD *v23;          // eax
  _DWORD *v24;          // eax
  _DWORD *v25;          // eax
  _DWORD *v26;          // eax
  _DWORD *v27;          // eax
  _DWORD *v28;          // eax
  _DWORD *v29;          // eax
  _DWORD *v30;          // eax
  _DWORD *v31;          // eax
  _DWORD *v32;          // eax
  _DWORD *v33;          // eax
  _DWORD *v34;          // eax
  _DWORD *v35;          // eax
  _DWORD *v36;          // eax
  _DWORD *v37;          // eax
  _DWORD *v38;          // eax
  _DWORD *v39;          // eax
  _DWORD *v40;          // eax
  _DWORD *v41;          // eax
  _DWORD *v42;          // eax
  _DWORD *v43;          // eax
  _DWORD *v44;          // eax
  _DWORD *v45;          // eax
  _DWORD *v46;          // eax
  _DWORD *v47;          // eax
  _DWORD *v48;          // eax
  _DWORD *v49;          // eax
  _DWORD *v50;          // eax
  _DWORD *v51;          // eax
  _DWORD *v52;          // eax
  _DWORD *v53;          // eax
  _DWORD *v54;          // eax
  _DWORD *v55;          // eax
  _DWORD *v56;          // eax
  _DWORD *v57;          // eax
  _DWORD *v58;          // eax
  _DWORD *v59;          // eax
  _DWORD *v60;          // eax
  _DWORD *v61;          // eax
  _DWORD *v62;          // eax
  _DWORD *v63;          // eax
  _DWORD *v64;          // eax
  _DWORD *v65;          // eax
  _DWORD *v66;          // eax
  _DWORD *v67;          // eax
  _DWORD *v68;          // eax
  _DWORD *v69;          // eax
  _DWORD *v70;          // eax
  _DWORD *v71;          // eax
  _DWORD *v72;          // eax
  int v73;              // ecx
  _DWORD *v74;          // eax
  _DWORD *v75;          // eax
  _DWORD *v76;          // eax
  _DWORD *v77;          // eax
  _DWORD *v78;          // eax
  _DWORD *v79;          // eax
  _DWORD *v80;          // eax
  _DWORD *v81;          // eax
  unsigned __int16 v82; // cx
  int v83;              // edi
  int v84;              // esi
  unsigned __int16 v85; // ax
  _DWORD *v86;          // eax
  float v87;            // ecx
  char *v88;            // edi
  double v89;           // st7
  _DWORD *v90;          // eax
  _DWORD *v91;          // eax
  _DWORD *v92;          // eax
  _DWORD *v93;          // eax
  _DWORD *v94;          // eax
  __int16 v95;          // ax
  _DWORD *v96;          // eax
  _DWORD *v97;          // eax
  _DWORD *v98;          // eax
  _DWORD *v99;          // eax
  _DWORD *v100;         // eax
  _DWORD *v101;         // eax
  _DWORD *v102;         // eax
  _DWORD *v103;         // eax
  _DWORD *v104;         // eax
  _DWORD *v105;         // eax
  _DWORD *v106;         // eax
  _DWORD *v107;         // eax
  __int16 v108;         // ax
  _DWORD *v109;         // eax
  _DWORD *v110;         // eax
  _DWORD *v111;         // eax
  _DWORD *v112;         // eax
  _DWORD *v113;         // eax
  _DWORD *v114;         // eax
  _DWORD *v115;         // eax
  _DWORD *v116;         // esi
  _DWORD *v117;         // eax
  unsigned int *v118;   // eax
  _DWORD *v119;         // esi
  unsigned int v120;    // edx
  _DWORD *v121;         // eax
  _DWORD *v122;         // esi
  _DWORD *v123;         // eax
  unsigned int *v124;   // esi
  _DWORD *v125;         // edi
  unsigned int v126;    // ecx
  _DWORD *v127;         // eax
  _DWORD *v128;         // esi
  char *v129;           // edi
  bool v130;            // zf
  _DWORD *v131;         // eax
  int v132;             // ebx
  int v133;             // eax
  int v134;             // eax
  int v135;             // eax
  int v136;             // eax
  int v137;             // eax
  int v138;             // eax
  int v139;             // eax
  int v140;             // eax
  int v141;             // eax
  int v142;             // eax
  double v143;          // st7
  int v144;             // edi
  double v145;          // rt0
  double v146;          // st4
  double v147;          // st7
  int v148;             // ecx
  double v149;          // st7
  int v150;             // eax
  int v151;             // edi
  int v152;             // ebx
  int v153;             // edi
  int v154;             // eax
  double v155;          // rtt
  double v156;          // rt1
  double v158;          // st5
  char v159;            // c0
  int v160;             // eax
  int v161;             // edi
  int v162;             // eax
  int v163;             // edi
  int v164;             // eax
  int v165;             // eax
  int v166;             // ecx
  int v167;             // edx
  int v168;             // edi
  int v169;             // eax
  int v170;             // edx
  int v171;             // eax
  bool v172;            // cc
  unsigned int *v173;   // eax
  _DWORD *v174;         // esi
  unsigned int v175;    // ecx
  int v176;             // eax
  int v177;             // edi
  int v178;             // eax
  int v179;             // edx
  int v180;             // ecx
  int v181;             // ebx
  int v182;             // edx
  int v183;             // ecx
  int v184;             // eax
  int v185;             // ecx
  float v186;           // edi
  float v187;           // ebx
  float v188;           // edx
  _DWORD *v189;         // eax
  _DWORD *v190;         // eax
  _DWORD *v191;         // esi
  _DWORD *v192;         // eax
  int v193;             // eax
  _DWORD *v194;         // eax
  _DWORD *v195;         // eax
  _DWORD *v196;         // eax
  void *v197;           // ecx
  int result;           // eax
  unsigned int *v199;   // [esp+144h] [ebp-12Ch]
  unsigned int *v200;   // [esp+144h] [ebp-12Ch]
  unsigned int *v201;   // [esp+144h] [ebp-12Ch]
  unsigned int *v202;   // [esp+144h] [ebp-12Ch]
  float *v203;          // [esp+184h] [ebp-ECh]
  float v204;           // [esp+198h] [ebp-D8h]
  float v205;           // [esp+198h] [ebp-D8h]
  float v206;           // [esp+198h] [ebp-D8h]
  int v207;             // [esp+198h] [ebp-D8h]
  float v208;           // [esp+19Ch] [ebp-D4h]
  int v209;             // [esp+19Ch] [ebp-D4h]
  int v210;             // [esp+19Ch] [ebp-D4h]
  float v211;           // [esp+1A0h] [ebp-D0h]
  float v212;           // [esp+1A0h] [ebp-D0h]
  float v213;           // [esp+1A0h] [ebp-D0h]
  char *v214;           // [esp+1A0h] [ebp-D0h]
  int v215;             // [esp+1A4h] [ebp-CCh]
  int v216;             // [esp+1A4h] [ebp-CCh]
  int v217;             // [esp+1A4h] [ebp-CCh]
  __int16 *v218;        // [esp+1A8h] [ebp-C8h]
  int v219;             // [esp+1A8h] [ebp-C8h]
  float v220;           // [esp+1A8h] [ebp-C8h]
  float v221;           // [esp+1A8h] [ebp-C8h]
  int v222;             // [esp+1A8h] [ebp-C8h]
  float v223;           // [esp+1A8h] [ebp-C8h]
  int v224;             // [esp+1ACh] [ebp-C4h]
  float v225;           // [esp+1ACh] [ebp-C4h]
  int v226;             // [esp+1ACh] [ebp-C4h]
  int v227;             // [esp+1ACh] [ebp-C4h]
  int v228;             // [esp+1B0h] [ebp-C0h]
  float v229;           // [esp+1B0h] [ebp-C0h]
  char *v230;           // [esp+1B0h] [ebp-C0h]
  int v231;             // [esp+1B0h] [ebp-C0h]
  char *v232;           // [esp+1B4h] [ebp-BCh]
  float v233;           // [esp+1B4h] [ebp-BCh]
  int v234;             // [esp+1B4h] [ebp-BCh]
  int v235;             // [esp+1B4h] [ebp-BCh]
  int v236;             // [esp+1B8h] [ebp-B8h]
  float v237;           // [esp+1BCh] [ebp-B4h]
  int v238;             // [esp+1BCh] [ebp-B4h]
  int v239;             // [esp+1C0h] [ebp-B0h]
  float v240;           // [esp+1C4h] [ebp-ACh]
  int v241;             // [esp+1CCh] [ebp-A4h]
  char v242[160];       // [esp+1D0h] [ebp-A0h] BYREF

  v228 = 0;
  if (*(_DWORD *)&gUnk06594.gap1C8[12500] || (v224 = 1, *(_DWORD *)&gUnk06594.gap1C8[12508]))
    v224 = 0;
  if (!a2) {
    v5 = 0;
    if (dword_100B36FC > 0) {
      v6 = (_DWORD *)(a4 + 10752);
      do {
        *(v6 - 1) = 1149239296;
        *v6 = 1149239296;
        v6[7] = 0;
        v6[8] = 1149239296;
        v6[15] = 1149239296;
        v6[16] = 0;
        v6[23] = 0;
        v6[24] = 0;
        *(v6 - 6) = 0;
        *(v6 - 7) = 0;
        *(v6 - 8) = 0;
        *(v6 - 9) = 0;
        ++v5;
        v6 += 2778;
      } while (v5 < dword_100B36FC);
    }
    sub_10010DC0(a1, a3, a4);
    dword_103643B4 = dword_103643A4;
    v239 = dword_103643A4;
    dword_1036438C = -1;
    v236 = -1;
    flt_10363FE8 = sub_100312A7(&flt_106C29A8);
    dword_10363FF8 = 0;
    if (v224)
      dword_10363FF8 = 2048;
    if (gGameMode != GAME_MODE_1 && gGameMode != GAME_MODE_6 &&
        (gGameMode != GAME_MODE_5 || *(_BYTE *)(*(_DWORD *)(a4 + 3724) + 4))) {
      v7 = dword_10363FF8;
      BYTE1(v7) = BYTE1(dword_10363FF8) | 0x40;
      dword_10363FF8 = v7;
    }
    if (*(_DWORD *)&gUnk06594.gap1C8[12496] &&
        (*(_DWORD *)&gUnk06594.gap1C8[12504] || *(_DWORD *)&gUnk06594.gap1C8[12508] ||
         *(_DWORD *)&gUnk06594.gap1C8[12500]) &&
        gChosenTrack != 2 && gChosenTrack != 8) {
      v8 = dword_10363FF8;
      LOBYTE(v8) = dword_10363FF8 | 0x20;
      dword_10363FF8 = v8;
    }
    dword_102E54B4 = 4096;
    dword_102E5ED4 = 4096;
    dword_102E54B8 = 4096;
  }
  meth_DebugPrint(v4);
  dword_1036439C = -939524096;
  if (!*(_DWORD *)&gUnk06594.gap1C8[12496])
    dword_1036439C = 201850880;
  dword_103643A0 = 1122360;
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = 16973888;
  v9[1] = dword_106C32D0;
  v10 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = 17170496;
  v10[1] = &unk_100AA730;
  v11 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v11 = -1140850674;
  v11[1] = word_106C067C;
  v12 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v12 = 58982416;
  v12[1] = dword_103643B8;
  v13 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v13 = 58851344;
  v13[1] = dword_103643B8 + 16;
  v14 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v14 = -1140850686;
  v14[1] = -2147483584;
  v15 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v15 = 59113488;
  v15[1] = (char *)&unk_100A64F0 + 24 * dword_10364388;
  v16 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v16 = 59244560;
  v16[1] = (char *)&unk_100A64E8 + 24 * dword_10364388;
  v17 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v17 = -1140850678;
  v17[1] = *(_DWORD *)&gUnk06594.gap1C8[9576];
  v18 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v18 = -1140849654;
  v18[1] = *(_DWORD *)&gUnk06594.gap1C8[9576];
  v19 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v19 = -1140842486;
  v19[1] = dword_106C29E8;
  v20 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v20 = -1140841462;
  v20[1] = dword_106C29E8;
  v21 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v21 = -419430400;
  v21[1] = 0;
  v22 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v22 = -1174400255;
  v22[1] = 0x80000;
  v23 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v23 = -1174402813;
  v23[1] = 3072;
  v24 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v24 = -1174403071;
  v24[1] = 0;
  v25 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v25 = -1191182334;
  v25[1] = 1;
  v26 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v26 = -1174403582;
  v26[1] = dword_106C0688;
  v27 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v27 = -1174404094;
  v27[1] = dword_106C0920;
  v28 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v28 = -1174399998;
  v28[1] = 0;
  v29 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v29 = -117440512;
  v29[1] = 0;
  v30 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v30 = -1174399998;
  v30[1] = 0x100000;
  v31 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v31 = -1191181539;
  v31[1] = dword_1036439C | dword_103643A0;
  v199 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  sub_1002F900(
      v199, 1002, 1001, 1013, 1001, 1002, 1001, 1013, 1001, 1000, 0, 1004, 0, 0, 0, 0, 1000);
  v32 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v32 = -1174400766;
  v32[1] = 0;
  v33 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v33 = -1174401023;
  v33[1] = dword_100AA87C != 0 ? 0x10000 : 0;
  v34 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v34 = -1174401534;
  v34[1] = 0;
  v35 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v35 = -1174402046;
  v35[1] = dword_106C0258;
  v36 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v36 = -1140850682;
  v36[1] = 0;
  v37 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v37 = -1241513984;
  v37[1] = 8729088;
  v38 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v38 = -1224736768;
  v38[1] = (*(_DWORD *)&gUnk06594.gap1C8[12496] != 0 ? 0x10000 : 0) |
           (dword_100AA880 != 0 ? 0x200 : 0) | (dword_106C1174 != dword_106C3364 ? 4096 : 0x2000) |
           0xA0005;
  sub_10032DF2();
  v39 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v39 = 16973888;
  v39[1] = dword_106C32D0;
  v40 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v40 = -1140850674;
  v40[1] = word_106C067C;
  v41 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v41 = 17170496;
  v41[1] = &unk_100AA730;
  v42 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v42 = -1140850686;
  v42[1] = -2147483584;
  v43 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v43 = 59113488;
  v43[1] = (char *)&unk_100A64F0 + 24 * dword_10364388;
  v44 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v44 = 59244560;
  v44[1] = (char *)&unk_100A64E8 + 24 * dword_10364388;
  v45 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v45 = -1140850678;
  v45[1] = *(_DWORD *)&gUnk06594.gap1C8[9576];
  v46 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v46 = -1140849654;
  v46[1] = *(_DWORD *)&gUnk06594.gap1C8[9576];
  v47 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v47 = -1140842486;
  v47[1] = dword_106C29E8;
  v48 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v48 = -1140841462;
  v48[1] = dword_106C29E8;
  sub_10031866();
  sub_10031866();
  v49 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v49 = -117440512;
  v49[1] = 0;
  v50 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v50 = -1241513984;
  v50[1] = 340480;
  v51 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v51 = -1224736768;
  v51[1] = (*(_DWORD *)&gUnk06594.gap1C8[12496] != 0 ? 0x10000 : 0) |
           (dword_100AA880 != 0 ? 0x200 : 0) | (dword_106C1174 != dword_106C3364 ? 4096 : 0x2000) |
           0xA0005;
  v52 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v52 = -419430400;
  v52[1] = 0;
  v53 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v53 = -1174399998;
  v53[1] = 0x100000;
  v54 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v54 = -1191181539;
  v54[1] = dword_1036439C | dword_103643A0;
  v200 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  sub_1002F900(
      v200, 1002, 1001, 1013, 1001, 1002, 1001, 1013, 1001, 1000, 0, 1004, 0, 0, 0, 0, 1000);
  v55 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v55 = -100657408;
  v55[1] = -16776961;
  v56 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v56 = -1174400766;
  v56[1] = 0;
  v57 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v57 = -1174401023;
  v57[1] = dword_100AA87C != 0 ? 0x10000 : 0;
  v58 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v58 = -1174401534;
  v58[1] = 0;
  v59 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v59 = -1174402046;
  v59[1] = dword_106C0258;
  v60 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  if (dword_100AA8B4 == 1) {
    *v60 = -1140849660;
    v60[1] = 1;
    v61 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v61 = -1140847612;
    v61[1] = 1;
    v62 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v62 = -1140845564;
    v62[1] = 0xFFFF;
    v63 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v63 = -1140843516;
    v63[1] = 0xFFFF;
  } else {
    *v60 = -1140849660;
    v60[1] = 6;
    v64 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v64 = -1140847612;
    v64[1] = 6;
    v65 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v65 = -1140845564;
    v65[1] = 65530;
    v66 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v66 = -1140843516;
    v66[1] = 65530;
  }
  v67 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v67 = -1157623807;
  v67[1] = -1;
  v68 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v68 = -1241513984;
  v68[1] = 786432;
  v69 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v69 = -402653184;
  v69[1] = 0;
  v70 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v70 = -183500800;
  v70[1] = 117440512;
  v71 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v71 = -184548880;
  v71[1] = 100663296;
  v72 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v72 = -184549120;
  v72[1] = 83886080;
  if (a2) {
    v73 = dword_1036438C;
    v239 = dword_103643B4;
    v215 = dword_103643B4;
    v236 = dword_1036438C;
    dword_103643A4 = dword_1036438C + dword_103643B4 + 1;
  } else {
    sub_1000BA70();
    v73 = v236;
    v215 = 0;
  }
  if (v215 < dword_103643A4) {
    v218 = &word_10362F28[v73];
    while (1) {
      if (v215 == dword_10363FEC || v215 == dword_102E5F24) {
        v74 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        if (dword_100AA8B4 == 1) {
          *v74 = -1140849660;
          v74[1] = 1;
          v75 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v75 = -1140847612;
          v75[1] = 1;
          v76 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v76 = -1140845564;
          v76[1] = 0xFFFF;
          v77 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v77 = -1140843516;
          v77[1] = 0xFFFF;
        } else {
          *v74 = -1140849660;
          v74[1] = 6;
          v78 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v78 = -1140847612;
          v78[1] = 6;
          v79 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v79 = -1140845564;
          v79[1] = 65530;
          v80 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v80 = -1140843516;
          v80[1] = 65530;
        }
        if (v215 == dword_102E5F24) {
          v81 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v81 = -1224736768;
          v81[1] = 0x800000;
        }
      }
      if (v215 >= v239)
        break;
      v82 = word_10362F28[v215];
      v83 = v82;
      LODWORD(v225) = v82;
      v84 = *(_DWORD *)&gUnk06594.gap4918[16] + 84 * v82;
      if (((unsigned __int16)dword_1039B6CC & *(_WORD *)(v84 + 72)) == 0 &&
          (!dword_1039B6C4 || v82 != dword_1039B6C0)) {
        v85 = *(_WORD *)(v84 + 76);
        if ((v85 & (unsigned __int16)dword_10363FF8) == 0) {
          if ((v85 & 8) == 0)
              goto LABEL_51;
          if (dword_102E54B8 == 4096 && v215 > dword_102E5EC0)
              dword_102E54B8 = v236 + 1;
          ++v236;
          *++v218 = v82;
        }
      }
    LABEL_118:
      if (++v215 >= dword_103643A4)
        goto LABEL_119;
    }
    v83 = (unsigned __int16)word_10362F28[v239 + v236 - v215];
    v225 = *(float *)&v83;
    v84 = *(_DWORD *)&gUnk06594.gap4918[16] + 84 * v83;
  LABEL_51:
    if ((*(_BYTE *)(v84 + 77) & 0x20) != 0) {
      if (!v228) {
        v228 = 1;
        v86 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v86 = 16908352;
        v86[1] = &unk_100AA730;
      }
      flt_106C0890 = flt_106C29B8 * *(float *)(v84 + 52) + flt_106C29C8 * *(float *)(v84 + 56) +
                     flt_106C29D8 * *(float *)(v84 + 60) + flt_106C29A8 * *(float *)(v84 + 48);
      flt_106C0894 = flt_106C29BC * *(float *)(v84 + 52) + flt_106C29CC * *(float *)(v84 + 56) +
                     flt_106C29DC * *(float *)(v84 + 60) + flt_106C29AC * *(float *)(v84 + 48);
      flt_106C0898 = flt_106C29C0 * *(float *)(v84 + 52) + flt_106C29D0 * *(float *)(v84 + 56) +
                     flt_106C29E0 * *(float *)(v84 + 60) + flt_106C29B0 * *(float *)(v84 + 48);
      *(float *)&flt_106C089C =
          flt_106C29C4 * *(float *)(v84 + 52) + flt_106C29D4 * *(float *)(v84 + 56) +
          flt_106C29E4 * *(float *)(v84 + 60) + flt_106C29B4 * *(float *)(v84 + 48);
      v204 = *(float *)v84;
      flt_106C0860 = *(float *)v84 * flt_106C29A8;
      flt_106C0864 = v204 * flt_106C29AC;
      flt_106C0868 = v204 * flt_106C29B0;
      flt_106C086C = v204 * flt_106C29B4;
      flt_106C0870 = v204 * flt_106C29B8;
      flt_106C0874 = v204 * flt_106C29BC;
      flt_106C0878 = v204 * flt_106C29C0;
      flt_106C087C = v204 * flt_106C29C4;
      flt_106C0880 = v204 * flt_106C29C8;
      flt_106C0884 = v204 * flt_106C29CC;
      flt_106C0888 = v204 * flt_106C29D0;
      flt_106C088C = v204 * flt_106C29D4;
      v88 = sub_10069490();
      v211 = 0.0;
      v208 = 0.0;
      if (flt_106C0890 >= 0.0) {
        v87 = flt_106C0890;
        v211 = flt_106C0890;
      }
      if (flt_106C0890 <= 0.0)
        v208 = flt_106C0890;
      if (flt_106C0894 >= (double)v211)
        v211 = flt_106C0894;
      if (flt_106C0894 <= (double)v208) {
        v87 = flt_106C0894;
        v208 = flt_106C0894;
      }
      if (flt_106C0898 >= (double)v211)
        v211 = flt_106C0898;
      if (flt_106C0898 <= (double)v208)
        v208 = flt_106C0898;
      if (*(float *)&flt_106C089C >= (double)v211) {
        v87 = *(float *)&flt_106C089C;
        v211 = *(float *)&flt_106C089C;
      }
      if (*(float *)&flt_106C089C <= (double)v208)
        v208 = *(float *)&flt_106C089C;
      if (v211 > 32767.0 || v208 < -32767.0) {
        if (v215 == 1) {
          if (*(_DWORD *)&gUnk06594.gap4918[12])
              v87 = v225;
          meth_DebugPrint((void *)LODWORD(v87));
        }
        if (v211 <= -v208)
          v89 = -32767.0 / v208;
        else
          v89 = 32767.0 / v211;
        v205 = v89;
        flt_106C0860 = v205 * flt_106C0860;
        flt_106C0864 = v205 * flt_106C0864;
        flt_106C0868 = v205 * flt_106C0868;
        flt_106C086C = v205 * flt_106C086C;
        flt_106C0870 = v205 * flt_106C0870;
        flt_106C0874 = v205 * flt_106C0874;
        flt_106C0878 = v205 * flt_106C0878;
        flt_106C087C = v205 * flt_106C087C;
        flt_106C0880 = v205 * flt_106C0880;
        flt_106C0884 = v205 * flt_106C0884;
        flt_106C0888 = v205 * flt_106C0888;
        flt_106C088C = v205 * flt_106C088C;
        flt_106C0890 = v205 * flt_106C0890;
        flt_106C0894 = v205 * flt_106C0894;
        flt_106C0898 = v205 * flt_106C0898;
        *(float *)&flt_106C089C = v205 * *(float *)&flt_106C089C;
      }
      sub_100307A0(&flt_106C0860, v88);
      v90 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v90 = 60686352;
      v90[1] = v88;
      v91 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v91 = 60293136;
      v91[1] = v88 + 16;
      v92 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v92 = 60424208;
      v92[1] = v88 + 32;
      v93 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      v93[1] = v88 + 48;
      v83 = LODWORD(v225);
      *v93 = 60555280;
    } else {
      v232 = sub_10069490();
      sub_100307A0((float *)v84, v232);
      v94 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v94 = 16908352;
      v94[1] = v232;
      v228 = 0;
    }
    v95 = *(_WORD *)(v84 + 76);
    if ((v95 & 0x4A4) != 0) {
      if ((v95 & 0x400) != 0) {
        if (*(_DWORD *)&gUnk06594.gap1C8[12500] && (v95 & 0x100) != 0) {
          v96 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v96 = -1140850678;
          v96[1] = (*(_DWORD *)&gUnk06594.gap1C8[9576] >> 1) & 0x7F7F7F00;
          v97 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v97 = -1140849654;
          v97[1] = (*(_DWORD *)&gUnk06594.gap1C8[9576] >> 1) & 0x7F7F7F00;
        } else {
          v98 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v98 = -1140850678;
          v98[1] = 0;
          v99 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v99 = -1140849654;
          v99[1] = 0;
        }
        v100 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v100 = -1140842486;
        v100[1] = dword_106C0950[*(_BYTE *)(v84 + 76) & 3];
        v101 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v101 = -1140841462;
        v101[1] = dword_106C0950[*(_BYTE *)(v84 + 76) & 3];
      }
      if ((*(_BYTE *)(v84 + 76) & 4) != 0) {
        v102 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v102 = -1241513984;
        v102[1] = 12288;
      }
      if ((*(_BYTE *)(v84 + 76) & 0x20) != 0 && *(_DWORD *)&gUnk06594.gap1C8[12496] &&
          !*(_DWORD *)&gUnk06594.gap1C8[12500] && !*(_DWORD *)&gUnk06594.gap1C8[12504] &&
          !*(_DWORD *)&gUnk06594.gap1C8[12508]) {
        v103 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v103 = -1241513984;
        v103[1] = 0x10000;
      }
      if (*(char *)(v84 + 76) < 0 && dword_100AA880) {
        v104 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v104 = -1241513984;
        v104[1] = 512;
      }
    }
    if (v215 <= dword_102E5EC0 || v215 >= dword_102E54B8) {
      sub_1000F640(a1, v83, (unsigned __int8)byte_1038B4C0[v83], a2, a4);
    } else {
      v105 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v105 = -1157623807;
      v105[1] = -1;
      v106 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v106 = -402653184;
      v106[1] = 0;
      v107 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v107 = 100663296;
      v107[1] = *(_DWORD *)(v84 + 68);
      dword_106C069C += *(unsigned __int16 *)(v84 + 80);
      dword_106C06A4 += *(unsigned __int16 *)(v84 + 78);
      dword_106C1610 += *(unsigned __int16 *)(v84 + 82);
    }
    v108 = *(_WORD *)(v84 + 76);
    if ((v108 & 0x4A4) != 0) {
      if ((v108 & 0x80u) != 0 && dword_100AA880) {
        v109 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v109 = -1224736768;
        v109[1] = 512;
      }
      if ((*(_BYTE *)(v84 + 77) & 4) != 0) {
        v110 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v110 = -1140850678;
        v110[1] = *(_DWORD *)&gUnk06594.gap1C8[9576];
        v111 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v111 = -1140849654;
        v111[1] = *(_DWORD *)&gUnk06594.gap1C8[9576];
        v112 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v112 = -1140842486;
        v112[1] = dword_106C29E8;
        v113 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v113 = -1140841462;
        v113[1] = dword_106C29E8;
      }
      if ((*(_BYTE *)(v84 + 76) & 4) != 0) {
        v114 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v114 = -1224736768;
        v114[1] = dword_106C1174 != dword_106C3364 ? 4096 : 0x2000;
      }
      if (*(_DWORD *)&gUnk06594.gap1C8[12496] && !*(_DWORD *)&gUnk06594.gap1C8[12500] &&
          !*(_DWORD *)&gUnk06594.gap1C8[12504] && !*(_DWORD *)&gUnk06594.gap1C8[12508] &&
          (*(_BYTE *)(v84 + 76) & 0x20) != 0) {
        v115 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v115 = -1224736768;
        v115[1] = 0x10000;
      }
    }
    goto LABEL_118;
  }
LABEL_119:
  if (!a2) {
    v193 = dword_102E54B8;
    if (dword_102E54B8 == 4096)
      v193 = v236;
    dword_102E54B8 = v239 + v236 - v193;
    goto LABEL_237;
  }
  v116 = (_DWORD *)dword_10363FF0;
  v117 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v117 = 100663296;
  v117[1] = v116;
  *v116 = 17170496;
  v116[1] = &unk_100AA730;
  v118 = v116 + 2;
  v119 = v116 + 4;
  v120 = dword_11829110 & 0xFFFFFF | 0xDC000000;
  v118[1] = 1;
  *v118 = v120;
  if (*(_DWORD *)&gUnk06594.gap1C8[12500] || *(_DWORD *)&gUnk06594.gap1C8[12508]) {
    v123 = v119;
    v122 = v119 + 2;
    *v123 = -1191181539;
    v123[1] = 5263184;
  } else {
    v121 = v119;
    v122 = v119 + 2;
    *v121 = -1191181539;
    v121[1] = 5262160;
  }
  *v122 = -1191181539;
  v122[1] = 1;
  v122[2] = -1191182334;
  v122[3] = 1;
  v122[4] = -117440512;
  v122[5] = 8;
  v201 = v122 + 6;
  v124 = v122 + 8;
  sub_1002F900(v201, 1005, 0, 1012, 0, 0, 0, 0, 1001, 1005, 0, 1012, 0, 0, 0, 0, 1001);
  v226 = 0;
  if (dword_100B36FC > 0) {
    v209 = a4 + 10720;
    v125 = (_DWORD *)(a4 + 10720);
    while (1) {
      if (gD3dDrawCarShadow && *(v125 - 1) && *v125 && v125[1] && v125[2]) {
        v126 = dword_11829110 & 0xFFFFFF | 0xDC000000;
        v124[1] = 1;
        *v124 = v126;
        v127 = v124 + 2;
        v128 = v124 + 4;
        v129 = (char *)(v125 + 4);
        *v127 = 67113087;
        v127[1] = dword_10364304;
        v219 = 4;
        do {
          qmemcpy32((void *)dword_10364304, v129);
          v129 += 32;
          *(float *)(dword_10364304 + 8) = *(float *)(dword_10364304 + 8) - -0.03125;
          v130 = v219 == 1;
          dword_10364304 += 32;
          --v219;
        } while (!v130);
        v125 = (_DWORD *)v209;
        *v128 = -1191181539;
        v128[1] = 1;
        v131 = v128 + 2;
        v124 = v128 + 4;
        *v131 = -1325399805;
        v131[1] = 770;
      }
      if (dword_10B4E7A0)
        break;
    LABEL_203:
      v125 += 2778;
      v172 = ++v226 < dword_100B36FC;
      v209 = (int)v125;
      if (!v172)
        goto LABEL_204;
    }
    v132 = 0;
    v216 = 0;
    while (1) {
      if (gChosenWeather0 == 2 || gChosenWeather0 == 3) {
        if (!v132 && (v138 = *(_DWORD *)(v209 - 10360)) != 0 && *(_DWORD *)(v138 + 436) ||
            v132 == 1 && (v139 = *(_DWORD *)(v209 - 10352)) != 0 && *(_DWORD *)(v139 + 436) ||
            v132 == 2 && (v140 = *(_DWORD *)(v209 - 10356)) != 0 && *(_DWORD *)(v140 + 436) ||
            v132 == 3 && (v141 = *(_DWORD *)(v209 - 10348)) != 0 && *(_DWORD *)(v141 + 436)) {
          v137 = 1;
          goto LABEL_169;
        }
      } else if (!v132 && (v133 = *(_DWORD *)(v209 - 10360)) != 0 && *(_BYTE *)(v133 + 416) == 3 &&
                     *(_DWORD *)(v133 + 436) ||
                 v132 == 1 && (v134 = *(_DWORD *)(v209 - 10352)) != 0 &&
                     *(_BYTE *)(v134 + 416) == 3 && *(_DWORD *)(v134 + 436) ||
                 v132 == 2 && (v135 = *(_DWORD *)(v209 - 10356)) != 0 &&
                     *(_BYTE *)(v135 + 416) == 3 && *(_DWORD *)(v135 + 436) ||
                 v132 == 3 && (v136 = *(_DWORD *)(v209 - 10348)) != 0 &&
                     *(_BYTE *)(v136 + 416) == 3 && *(_DWORD *)(v136 + 436)) {
        v137 = *(unsigned __int8 *)(v209 - 9843);
        goto LABEL_169;
      }
      v137 = 0;
    LABEL_169:
      if (v137) {
        v142 = (dword_100A65D8[v132] << 6) - 10720;
        v212 = *(float *)(v142 + v209 + 80);
        v143 = *(float *)(v142 + v209 + 84);
        v144 = v142 + v209;
        v203 = (float *)(v142 + v209 + 112);
        v220 = sqrt(v212 * v212 + v143 * v143);
        v145 = v143 / v220 * 0.156;
        v146 = v212 / v220 * 0.156;
        v213 = v146;
        v221 = v145;
        v206 = *v203 - v213;
        v240 = v146 + *v203;
        v237 = *(float *)(v142 + v209 + 116) - v221;
        v233 = v145 + *(float *)(v142 + v209 + 116);
        v147 = sub_1006F310(v203);
        v148 = v132 + 4 * v226;
        v149 = *(float *)(v144 + 120) - v147 - -0.054000001;
        v150 = dword_10364308[v148];
        v151 = dword_10363F68[v148];
        if (v150 != v151) {
          v152 = v150 - 1;
          v241 = v150 - 1;
          v222 = v150 - 1;
          if (v150 - 1 < 0) {
              v152 = 499;
              v222 = 499;
          }
          if (v152 != v151 && (dword_10277EC0[3500 * v148 + 7 * v152] & 0x8000000) == 0x8000000) {
              v153 = v222 - 1;
              if (v222 - 1 < 0)
                  v153 = 499;
              if (v153 != dword_10363F68[v148]) {
                  v154 = 7 * (500 * v148 + v153);
                  if ((dword_10277EC0[v154] & 0x8000000) == 0x8000000) {
                      v155 = flt_10277EB4[v154] - v240;
                      v156 = flt_10277EB8[v154] - v233;
                      v223 = v155;
                      v229 = v156;
                      v158 = v155 * v223 + v156 * v229;
                      if (v159) {
                          if (v158 < 5.0) {
                              v160 = v241;
                              if (v241 < 0)
                                  v160 = 499;
                              dword_10364308[v148] = v160;
                          }
                      }
                  }
              }
          }
        }
        v161 = dword_10364308[v148];
        v162 = 7 * (v161 + 500 * v148);
        flt_10277EA8[v162] = v206;
        flt_10277EB4[v162] = v240;
        flt_10277EAC[v162] = v237;
        flt_10277EB8[v162] = v233;
        flt_10277EB0[v162] = v149;
        flt_10277EBC[v162] = v149;
        v163 = v161 + 1;
        dword_10277EC0[v162] = *(unsigned __int16 *)(v209 - 144) | 0x8000000;
        if (v163 >= 500)
          v163 = 0;
        v164 = dword_10363F68[v148];
        dword_10364308[v148] = v163;
        if (v163 == v164) {
          v165 = v164 + 1;
          if (v165 >= 500)
              v165 = 0;
          dword_10363F68[v148] = v165;
        }
      LABEL_200:
        v132 = v216;
        goto LABEL_201;
      }
      v166 = v132 + 4 * v226;
      v167 = dword_10364308[v166];
      if (dword_10363F68[v166] != v167) {
        v168 = v167 - 1;
        if (v167 - 1 < 0)
          v168 = 499;
        if ((dword_10277EC0[3500 * v166 + 7 * v168] & 0x8000000) == 0x8000000) {
          dword_10277EC0[3500 * v166 + 7 * v167] &= 0xF7FFFFFF;
          v169 = v167 + 1;
          if (v167 + 1 >= 500)
              v169 = 0;
          v170 = dword_10363F68[v166];
          dword_10364308[v166] = v169;
          if (v169 == v170) {
              v171 = v170 + 1;
              if (v170 + 1 >= 500)
                  v171 = 0;
              dword_10363F68[v166] = v171;
          }
        }
        goto LABEL_200;
      }
    LABEL_201:
      v216 = ++v132;
      if (v132 >= 4) {
        v125 = (_DWORD *)v209;
        goto LABEL_203;
      }
    }
  }
LABEL_204:
  if (!dword_10B4E7A0)
    goto LABEL_233;
  *v124 = -1241513984;
  v124[1] = 12288;
  v173 = v124 + 2;
  v174 = v124 + 4;
  v175 = dword_118A9874 & 0xFFFFFF | 0xDC000000;
  v173[1] = 1;
  *v173 = v175;
  v176 = 0;
  v234 = 0;
  if (dword_100B36FC > 0) {
    v230 = v242;
    do {
      v177 = 0;
      v178 = 4 * v176;
      do {
        v179 = dword_10364308[v178];
        v180 = v179 - 1;
        if (v179 - 1 < 0)
          v180 = 499;
        *(_DWORD *)&v242[v178 * 4 + 32] = v180;
        v230[v177++] = v179 != dword_10363F68[v178++];
      } while (v177 < 4);
      v176 = v234 + 1;
      v172 = ++v234 < dword_100B36FC;
      v230 += 4;
    } while (v172);
  }
  do {
    v207 = 0;
    v231 = 0;
    if (dword_100B36FC <= 0)
      continue;
    v217 = 0;
    v214 = v242;
    do {
      v181 = 0;
      v227 = v217;
      v182 = 16 * v231;
      v235 = 0;
      v238 = 16 * v231;
      do {
        if (!v214[v181])
          goto LABEL_229;
        v183 = *(_DWORD *)&v242[v182 + 32];
        if (v183 == *(int *)((char *)dword_10363F68 + v182))
          goto LABEL_228;
        v210 = v183 - 1;
        if (v183 - 1 < 0)
          v210 = 499;
        v184 = 7 * (v227 + v183);
        if ((dword_10277EC0[v184] & 0x8000000) != 0x8000000) {
          v207 = 1;
          *(_DWORD *)&v242[v182 + 32] = v210;
          goto LABEL_229;
        }
        if (v210 == *(int *)((char *)dword_10363F68 + v182)) {
        LABEL_228:
          v214[v181] = 0;
        } else {
          v185 = 7 * (v210 + v227);
          if ((dword_10277EC0[v185] & 0x8000000) == 0x8000000 &&
              (byte_1038B4C0[dword_10277EC0[v184] & 0xF7FFFFFF] >= 0 ||
               (byte_1038B4C0[dword_10277EC0[v185] & 0xF7FFFFFF] & 0x80) == 0)) {
              if (dword_10363FF4 + 128 >= (unsigned int)(dword_102E5EC4 + 256000))
                  goto LABEL_232;
              *v174 = 67113087;
              v174[1] = dword_10363FF4;
              *(float *)dword_10363FF4 = flt_10277EB4[v185];
              *(float *)(dword_10363FF4 + 4) = flt_10277EB8[v185];
              *(float *)(dword_10363FF4 + 8) = flt_10277EBC[v185];
              *(_DWORD *)(dword_10363FF4 + 12) = 0;
              *(_DWORD *)(dword_10363FF4 + 16) = 0;
              v186 = flt_10277EB4[v184];
              dword_10363FF4 += 32;
              *(float *)dword_10363FF4 = v186;
              *(float *)(dword_10363FF4 + 4) = flt_10277EB8[v184];
              *(float *)(dword_10363FF4 + 8) = flt_10277EBC[v184];
              *(_DWORD *)(dword_10363FF4 + 12) = 1149239296;
              *(_DWORD *)(dword_10363FF4 + 16) = 0;
              v187 = flt_10277EA8[v185];
              dword_10363FF4 += 32;
              *(float *)dword_10363FF4 = v187;
              *(float *)(dword_10363FF4 + 4) = flt_10277EAC[v185];
              *(float *)(dword_10363FF4 + 8) = flt_10277EB0[v185];
              *(_DWORD *)(dword_10363FF4 + 12) = 0;
              *(_DWORD *)(dword_10363FF4 + 16) = 1149239296;
              v188 = flt_10277EA8[v184];
              dword_10363FF4 += 32;
              *(float *)dword_10363FF4 = v188;
              *(float *)(dword_10363FF4 + 4) = flt_10277EAC[v184];
              *(float *)(dword_10363FF4 + 8) = flt_10277EB0[v184];
              *(_DWORD *)(dword_10363FF4 + 12) = 1149239296;
              *(_DWORD *)(dword_10363FF4 + 16) = 1149239296;
              v189 = v174 + 2;
              dword_10363FF4 += 32;
              v174 += 4;
              *v189 = -1325399805;
              v189[1] = 770;
          }
          v182 = v238;
          v181 = v235;
          v207 = 1;
          *(_DWORD *)&v242[v238 + 32] = v210;
        }
      LABEL_229:
        ++v181;
        v182 += 4;
        v235 = v181;
        v227 += 500;
        v238 = v182;
      } while (v181 < 4);
      v172 = ++v231 < dword_100B36FC;
      v217 += 2000;
      v214 += 4;
    } while (v172);
  } while (v207);
LABEL_232:
  v190 = v174;
  v124 = v174 + 2;
  *v190 = -1224736768;
  v190[1] = dword_106C1174 != dword_106C3364 ? 4096 : 0x2000;
LABEL_233:
  *v124 = -117440512;
  v124[1] = 0;
  v124[2] = -1191181539;
  v124[3] = 0;
  v124[4] = -1174399998;
  v124[5] = 0x100000;
  v124[6] = -1191181539;
  v124[7] = dword_1036439C | dword_103643A0;
  v202 = v124 + 8;
  v191 = v124 + 10;
  sub_1002F900(
      v202, 1002, 1001, 1013, 1001, 1002, 1001, 1013, 1001, 1000, 0, 1004, 0, 0, 0, 0, 1000);
  *v191 = -1174403582;
  v191[1] = dword_106C0688;
  v192 = v191 + 2;
  v191 += 4;
  *v192 = -1124073472;
  v192[1] = 0;
  *v191 = -1207959552;
  v191[1] = 0;
  dword_10363FF0 = (int)(v191 + 4);
LABEL_237:
  v194 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v194 = 16908352;
  v194[1] = &unk_100AA730;
  v195 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v195 = -1241513984;
  v195[1] = 0x10000;
  v196 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  v197 = (void *)dword_106C0680;
  *v196 = -419430400;
  v196[1] = 0;
  meth_DebugPrint(v197);
  result = v236;
  dword_1036438C = v236;
  return result;
}
// 100137EE: conditional instruction was optimized away because of 'ecx.4==0'
// 10013962: conditional instruction was optimized away because of '%arg_4.4!=0'
// 10011700: variable 'v4' is possibly undefined
// 10012078: variable 'v236' is possibly undefined
// 100121D5: variable 'v239' is possibly undefined
// 10012840: variable 'v87' is possibly undefined
// 10013323: variable 'v159' is possibly undefined
// 100AA87C: using guessed type int dword_100AA87C;
// 100AA880: using guessed type int dword_100AA880;
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100B36FC: using guessed type int dword_100B36FC;
// 100B380C: using guessed type int gChosenTrack;
// 1022B350: using guessed type int gChosenWeather0;
// 10277EA8: using guessed type float flt_10277EA8[];
// 10277EAC: using guessed type float flt_10277EAC[];
// 10277EB0: using guessed type float flt_10277EB0[];
// 10277EB4: using guessed type float flt_10277EB4[];
// 10277EB8: using guessed type float flt_10277EB8[];
// 10277EBC: using guessed type float flt_10277EBC[];
// 102E54B4: using guessed type int dword_102E54B4;
// 102E54B8: using guessed type int dword_102E54B8;
// 102E5EC0: using guessed type int dword_102E5EC0;
// 102E5EC4: using guessed type int dword_102E5EC4;
// 102E5ED4: using guessed type int dword_102E5ED4;
// 102E5F24: using guessed type int dword_102E5F24;
// 10363FE8: using guessed type float flt_10363FE8;
// 10363FEC: using guessed type int dword_10363FEC;
// 10363FF0: using guessed type int dword_10363FF0;
// 10363FF4: using guessed type int dword_10363FF4;
// 10363FF8: using guessed type int dword_10363FF8;
// 10364304: using guessed type int dword_10364304;
// 10364388: using guessed type int dword_10364388;
// 1036438C: using guessed type int dword_1036438C;
// 1036439C: using guessed type int dword_1036439C;
// 103643A0: using guessed type int dword_103643A0;
// 103643A4: using guessed type int dword_103643A4;
// 103643B4: using guessed type int dword_103643B4;
// 103643B8: using guessed type int dword_103643B8;
// 1039B6C0: using guessed type int dword_1039B6C0;
// 1039B6C4: using guessed type int dword_1039B6C4;
// 1039B6C8: using guessed type int gD3dDrawCarShadow;
// 1039B6CC: using guessed type int dword_1039B6CC;
// 106C0258: using guessed type int dword_106C0258;
// 106C0680: using guessed type int dword_106C0680;
// 106C0688: using guessed type int dword_106C0688;
// 106C069C: using guessed type int dword_106C069C;
// 106C06A4: using guessed type int dword_106C06A4;
// 106C0860: using guessed type float flt_106C0860;
// 106C0864: using guessed type float flt_106C0864;
// 106C0868: using guessed type float flt_106C0868;
// 106C086C: using guessed type float flt_106C086C;
// 106C0870: using guessed type float flt_106C0870;
// 106C0874: using guessed type float flt_106C0874;
// 106C0878: using guessed type float flt_106C0878;
// 106C087C: using guessed type float flt_106C087C;
// 106C0880: using guessed type float flt_106C0880;
// 106C0884: using guessed type float flt_106C0884;
// 106C0888: using guessed type float flt_106C0888;
// 106C088C: using guessed type float flt_106C088C;
// 106C0890: using guessed type float flt_106C0890;
// 106C0894: using guessed type float flt_106C0894;
// 106C0898: using guessed type float flt_106C0898;
// 106C0920: using guessed type int dword_106C0920;
// 106C0950: using guessed type int dword_106C0950[];
// 106C1174: using guessed type int dword_106C1174;
// 106C1610: using guessed type int dword_106C1610;
// 106C29A8: using guessed type float flt_106C29A8;
// 106C29AC: using guessed type float flt_106C29AC;
// 106C29B0: using guessed type float flt_106C29B0;
// 106C29B4: using guessed type float flt_106C29B4;
// 106C29B8: using guessed type float flt_106C29B8;
// 106C29BC: using guessed type float flt_106C29BC;
// 106C29C0: using guessed type float flt_106C29C0;
// 106C29C4: using guessed type float flt_106C29C4;
// 106C29C8: using guessed type float flt_106C29C8;
// 106C29CC: using guessed type float flt_106C29CC;
// 106C29D0: using guessed type float flt_106C29D0;
// 106C29D4: using guessed type float flt_106C29D4;
// 106C29D8: using guessed type float flt_106C29D8;
// 106C29DC: using guessed type float flt_106C29DC;
// 106C29E0: using guessed type float flt_106C29E0;
// 106C29E4: using guessed type float flt_106C29E4;
// 106C29E8: using guessed type int dword_106C29E8;
// 106C32D0: using guessed type int dword_106C32D0;
// 106C3364: using guessed type int dword_106C3364;
// 10B4E7A0: using guessed type int dword_10B4E7A0;
// 11829110: using guessed type int dword_11829110;
// 118A9874: using guessed type int dword_118A9874;

//----- (10013A10) --------------------------------------------------------
_WORD *__cdecl sub_10013A10(_WORD *a1) {
  _WORD *result; // eax

  result = a1;
  dword_1039B71C = (int)(a1 + 4);
  LOWORD(dword_1039B714) = a1[1];
  LOWORD(dword_1039B710) = a1[2];
  LOWORD(dword_1039B718) = a1[3];
  return result;
}
// 1039B710: using guessed type int dword_1039B710;
// 1039B714: using guessed type int dword_1039B714;
// 1039B718: using guessed type int dword_1039B718;
// 1039B71C: using guessed type int dword_1039B71C;

//----- (10013A40) --------------------------------------------------------
_DWORD *__cdecl sub_10013A40(int a1) {
  _DWORD *result;      // eax
  _DWORD *v2;          // eax
  _DWORD *v3;          // eax
  _DWORD *v4;          // eax
  _DWORD *v5;          // eax
  _DWORD *v6;          // eax
  _DWORD *v7;          // eax
  unsigned int *v8;    // eax
  _DWORD *v9;          // eax
  _DWORD *v10;         // eax
  int v11;             // eax
  _DWORD *v12;         // ecx
  _DWORD *v13;         // eax
  __int16 v14;         // cx
  _WORD *v15;          // eax
  unsigned __int8 v16; // si
  int v17;             // edi
  unsigned int *v18;   // edx
  int v19;             // ecx
  bool v20;            // zf
  _DWORD *v21;         // eax
  bool v22;            // cc
  unsigned int *v23;   // [esp-44h] [ebp-6Ch]
  int v24;             // [esp+10h] [ebp-18h]
  int *v25;            // [esp+14h] [ebp-14h]
  _WORD *v26;          // [esp+18h] [ebp-10h]
  int v27;             // [esp+1Ch] [ebp-Ch]
  int v28;             // [esp+20h] [ebp-8h]
  int v29;             // [esp+24h] [ebp-4h]
  _WORD *v30;          // [esp+2Ch] [ebp+4h]

  if (!*(_DWORD *)&gUnk06594.gap1C8[12504] ||
      (result = (_DWORD *)gChosenTrack, gChosenTrack == 2) || gChosenTrack == 8) {
    v2 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v2 = -419430400;
    v2[1] = 0;
    v3 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v3 = -1174399998;
    v3[1] = 0x100000;
    v23 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    sub_1002F900(v23, 0, 0, 0, 1004, 1001, 0, 1004, 0, 0, 0, 0, 1000, 0, 0, 0, 1000);
    v4 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v4 = -1191181539;
    v4[1] = 202918480;
    v5 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v5 = -1224736768;
    v5[1] = 4;
    v6 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v6 = -1241513984;
    v6[1] = 143360;
    v7 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v7 = 16973888;
    v7[1] = dword_106C32D0;
    v8 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    *v8 = dword_11829108 & 0xFFFFFF | 0xDC000000;
    v8[1] = 1;
    v9 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v9 = -234872830;
    v9[1] = 516350;
    v10 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v10 = -1157627903;
    v10[1] = -1;
    v29 = 0;
    if (dword_100B36F8 > 0) {
      v25 = (int *)(a1 + 96);
      do {
        v11 = *v25;
        if (*v25) {
          v28 = 4;
          v12 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v12 = 17170496;
          v12[1] = v11 + 9940;
          v24 = v11 + 4512;
          v30 = (_WORD *)(v11 + 9024);
          do {
              v13 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              v14 = 1024;
              *v13 = 67142655;
              v13[1] = v24;
              v15 = v30;
              v16 = 0;
              v26 = v30;
              v27 = 1024;
              v17 = 0x10000;
              do {
                  if (*(v15 - 1) || *v15 || v15[1] || v15[11] || v15[12] || v15[13]) {
                      v18 = (unsigned int *)dword_106C0680;
                      dword_106C0680 += 8;
                      v19 = v14 & 0xFF00;
                      *v18 = v19 | (unsigned __int8)(v16 + 1) | ((v16 | 0xFFFFB100) << 16);
                      v15 = v26;
                      v18[1] = v19 | (unsigned __int8)(v16 + 5) | v17 & 0xFF0000;
                  }
                  v17 += 0x40000;
                  v15 += 12;
                  v16 += 4;
                  v14 = v27 + 1024;
                  v26 = v15;
                  v27 += 1024;
              } while (v17 < 1900544);
              v20 = v28 == 1;
              v30 += 108;
              v24 += 1152;
              --v28;
          } while (!v20);
          v21 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v21 = -1124073472;
          v21[1] = 0;
        }
        v22 = ++v29 < dword_100B36F8;
        v25 += 32;
      } while (v22);
    }
    result = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *result = -1224736768;
    result[1] = 0x2000;
  }
  return result;
}
// 100B36F8: using guessed type int dword_100B36F8;
// 100B380C: using guessed type int gChosenTrack;
// 106C0680: using guessed type int dword_106C0680;
// 106C32D0: using guessed type int dword_106C32D0;
// 11829108: using guessed type int dword_11829108;

//----- (10013D90) --------------------------------------------------------
__int16 __cdecl sub_10013D90(int a1, int a2, int a3, unsigned __int8 a4, unsigned __int8 a5) {
  int v5;            // ecx
  int v6;            // eax
  int v7;            // edx
  int v8;            // ebx
  int v9;            // eax
  int v10;           // edi
  int v11;           // ebx
  int v12;           // ebp
  double v13;        // st7
  double v14;        // st7
  double v15;        // st6
  double v16;        // st6
  double v17;        // st7
  double v18;        // st7
  int v19;           // esi
  int v20;           // eax
  _DWORD *v21;       // ecx
  _DWORD *v22;       // edx
  _DWORD *v23;       // ecx
  int v24;           // ecx
  int v25;           // ecx
  unsigned int *v26; // edx
  int v27;           // ecx
  int v28;           // edi
  int v29;           // esi
  __int16 v30;       // cx
  int v31;           // eax
  float v33;         // [esp+Ch] [ebp-28h]
  int v34;           // [esp+Ch] [ebp-28h]
  float v35;         // [esp+10h] [ebp-24h]
  float v36;         // [esp+14h] [ebp-20h]
  float v37;         // [esp+18h] [ebp-1Ch]
  int v38;           // [esp+1Ch] [ebp-18h]
  int v39;           // [esp+20h] [ebp-14h]
  float v40;         // [esp+24h] [ebp-10h] BYREF
  float v41;         // [esp+28h] [ebp-Ch]
  float v42;         // [esp+2Ch] [ebp-8h]
  float v43;         // [esp+30h] [ebp-4h]
  float v44;         // [esp+38h] [ebp+4h]
  float v45;         // [esp+3Ch] [ebp+8h]
  int v46;           // [esp+3Ch] [ebp+8h]

  v5 = *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 8);
  v6 = a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640];
  v7 = *(_DWORD *)(v6 + 12);
  v8 = v7 + 2 * *(_DWORD *)(v6 + 4);
  v9 = a2;
  v36 = (float)(2 * v5);
  v10 = 2 * (v5 + 2 * *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]));
  v11 = 2 * v8;
  v37 = (float)(2 * v7);
  v39 = v10;
  v38 = v11;
  if (a2) {
    do {
      v12 = 32 * v9;
      sub_1003B2A0(&v40, (float *)(32 * v9 + dword_1039B71C), flt_1039B6D0);
      if (v43 > 0.001 || v43 < -0.001) {
        v13 = 1.0 / v43;
        v44 = v13;
        v14 = v13 * v42;
        v42 = v14;
        if (v14 < 1.0 && v42 > -0.30000001) {
          v40 = v44 * v40;
          v15 = *(float *)(dword_1039B71C + v12 + 24) * v44 * 4.0;
          v35 = v15;
          v16 = v15 - -1.0;
          v45 = v16;
          v33 = -v16;
          if (v40 > (double)v33 && v40 < (double)v45) {
              v17 = v44 * v41;
              v41 = v17;
              if (v17 > v33 && v41 < (double)v45) {
                  v18 = v36 * v35;
                  v34 = (__int64)(v18 * 0.75);
                  if (v34 >= 1) {
                      v46 = (__int64)v18;
                      if (v46 >= 1) {
                          v19 = v10 + (__int64)(v36 * v40);
                          v20 = v11 + (__int64)(v37 * v41);
                          v21 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v21 = -419430400;
                          v21[1] = 0;
                          v22 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v22 = -100597761;
                          v22[1] = (unsigned __int8)((unsigned __int16)(*(unsigned __int8
                                                                              *)(dword_1039B71C +
                                                                                 v12 + 31) *
                                                                        *(unsigned __int8
                                                                              *)(dword_1039B71C +
                                                                                 v12 + 30)) >>
                                                     8) |
                                   ((a5 | ((a4 | (a3 << 8)) << 8)) << 8);
                          v23 = (_DWORD *)dword_106C0680;
                          dword_106C0680 += 8;
                          *v23 = -1241513984;
                          v23[1] = 12288;
                          v24 = dword_106C0680;
                          dword_106C0680 += 8;
                          *(_DWORD *)v24 = -570425344;
                          *(float *)(v24 + 4) = v44;
                          v25 = dword_106C0680;
                          dword_106C0680 += 8;
                          *(_DWORD *)v25 = -553648128;
                          *(float *)(v25 + 4) = v42;
                          v26 = (unsigned int *)dword_106C0680;
                          dword_106C0680 += 8;
                          v27 = (v19 + v34) >> 2;
                          if ((__int16)v27 <= 0)
                              LOWORD(v27) = 0;
                          v28 = (v20 + v46) >> 2;
                          if ((__int16)v28 <= 0)
                              LOWORD(v28) = 0;
                          v29 = (v19 - v34) >> 2;
                          *v26 = v28 & 0xFFF | ((v27 & 0xFFF | 0xFFFE3000) << 12);
                          if ((__int16)v29 <= 0)
                              v30 = 0;
                          else
                              v30 = v29;
                          v31 = (v20 - v46) >> 2;
                          if ((__int16)v31 <= 0)
                              LOWORD(v31) = 0;
                          v11 = v38;
                          v10 = v39;
                          v26[1] = v31 & 0xFFF | ((v30 & 0xFFF) << 12);
                      }
                  }
              }
          }
        }
      }
      v9 = *(unsigned __int16 *)(dword_1039B71C + v12 + 28);
    } while ((_WORD)v9);
  }
  return v9;
}
// 1039B71C: using guessed type int dword_1039B71C;
// 106C0680: using guessed type int dword_106C0680;

//----- (100140E0) --------------------------------------------------------
_DWORD *__cdecl sub_100140E0(int a1) {
  _DWORD *v1;        // eax
  unsigned int *v2;  // eax
  int v3;            // ecx
  _DWORD *v4;        // eax
  _DWORD *v5;        // eax
  _DWORD *v6;        // eax
  _DWORD *v7;        // eax
  _DWORD *v8;        // eax
  _DWORD *v9;        // eax
  _DWORD *v10;       // eax
  _DWORD *result;    // eax
  unsigned int *v12; // [esp-44h] [ebp-4Ch]

  v1 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v1 = -1191181539;
  v1[1] = 5259840;
  v12 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  sub_1002F900(v12, 0, 0, 0, 1003, 1001, 0, 1003, 0, 0, 0, 0, 1003, 1001, 0, 1003, 0);
  v2 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  v3 = dword_11829328 & 0xFFFFFF;
  v2[1] = 1;
  *v2 = v3 | 0xDC000000;
  sub_1003B4F0((int)&flt_106C0860, *(float **)&gUnk06594.gap1C8[12104]);
  flt_106C08A0 = 0.0;
  flt_106C08A4 = 0.0;
  dword_106C08A8 = -1082130432;
  dword_106C08AC = 0;
  flt_106C08B0 = -1.0;
  flt_106C08B4 = 0.0;
  dword_106C08B8 = 0;
  dword_106C08BC = 0;
  dword_106C08C0 = 0;
  dword_106C08C4 = -1082130432;
  dword_106C08C8 = 0;
  dword_106C08CC = 0;
  dword_106C08D0 = 0;
  dword_106C08D4 = 0;
  dword_106C08D8 = 0;
  dword_106C08DC = 1065353216;
  sub_1003B470((char *)&flt_106C0860, &flt_106C0860, &flt_106C08A0);
  qmemcpy(&flt_106C08A0, &flt_106C0860, 0x40u);
  sub_1003B470((char *)flt_1039B6D0, &flt_106C0860, flt_106C0218);
  v4 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v4 = -1191181823;
  v4[1] = 4;
  v5 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v5 = -1174403582;
  v5[1] = 192;
  if (!*(_DWORD *)&gUnk06594.gap1C8[12500]) {
    switch (gChosenTrack) {
    case 1:
    case 7:
      sub_10013D90(a1, (unsigned __int16)dword_1039B710, 96, 0x54u, 0x38u);
      sub_10013D90(a1, (unsigned __int16)dword_1039B718, 96, 0x5Cu, 0x50u);
      break;
    case 4:
    case 10:
      sub_10013D90(a1, (unsigned __int16)dword_1039B710, 112, 0x58u, 0x38u);
      sub_10013D90(a1, (unsigned __int16)dword_1039B718, 112, 0x68u, 0x58u);
      break;
    default:
      sub_10013D90(a1, (unsigned __int16)dword_1039B710, 160, 0x88u, 0x60u);
      sub_10013D90(a1, (unsigned __int16)dword_1039B718, 112, 0x68u, 0x58u);
      break;
    }
  }
  v6 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = -419430400;
  v6[1] = 0;
  v7 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v7 = -1174400255;
  v7[1] = 0x80000;
  v8 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v8 = -1191181823;
  v8[1] = 0;
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = -1174403582;
  v9[1] = dword_106C0688;
  v10 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = -1174404094;
  v10[1] = dword_106C0920;
  result = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *result = -1191182334;
  result[1] = 1;
  return result;
}
// 100B380C: using guessed type int gChosenTrack;
// 1039B710: using guessed type int dword_1039B710;
// 1039B718: using guessed type int dword_1039B718;
// 106C0680: using guessed type int dword_106C0680;
// 106C0688: using guessed type int dword_106C0688;
// 106C0860: using guessed type float flt_106C0860;
// 106C08A0: using guessed type float flt_106C08A0;
// 106C08A4: using guessed type float flt_106C08A4;
// 106C08A8: using guessed type int dword_106C08A8;
// 106C08AC: using guessed type int dword_106C08AC;
// 106C08B0: using guessed type float flt_106C08B0;
// 106C08B4: using guessed type float flt_106C08B4;
// 106C08B8: using guessed type int dword_106C08B8;
// 106C08BC: using guessed type int dword_106C08BC;
// 106C08C0: using guessed type int dword_106C08C0;
// 106C08C4: using guessed type int dword_106C08C4;
// 106C08C8: using guessed type int dword_106C08C8;
// 106C08CC: using guessed type int dword_106C08CC;
// 106C08D0: using guessed type int dword_106C08D0;
// 106C08D4: using guessed type int dword_106C08D4;
// 106C08D8: using guessed type int dword_106C08D8;
// 106C08DC: using guessed type int dword_106C08DC;
// 106C0920: using guessed type int dword_106C0920;
// 11829328: using guessed type int dword_11829328;

//----- (10014450) --------------------------------------------------------
_DWORD *__cdecl sub_10014450(int a1, int a2) {
  _DWORD *v2;        // eax
  _DWORD *v3;        // eax
  _DWORD *v4;        // eax
  _DWORD *v5;        // eax
  unsigned int *v6;  // eax
  _DWORD *v7;        // eax
  _DWORD *v8;        // eax
  _DWORD *v9;        // eax
  _DWORD *v10;       // eax
  _DWORD *v11;       // eax
  _DWORD *v12;       // eax
  _DWORD *v13;       // eax
  _DWORD *v14;       // eax
  _DWORD *v15;       // eax
  _DWORD *v16;       // eax
  _DWORD *v17;       // eax
  _DWORD *v18;       // eax
  _DWORD *v19;       // eax
  _DWORD *v20;       // eax
  _DWORD *v21;       // eax
  _DWORD *v22;       // eax
  _DWORD *v23;       // eax
  _DWORD *v24;       // eax
  _DWORD *v25;       // eax
  unsigned int *v27; // [esp-44h] [ebp-48h]

  v2 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v2 = -419430400;
  v2[1] = 0;
  v3 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v3 = -1174399998;
  v3[1] = 0;
  v4 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v4 = -1157627903;
  v4[1] = -1;
  v5 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v5 = -1174402046;
  v5[1] = dword_106C0258;
  v27 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  sub_1002F900(v27, 0, 0, 0, 1003, 1001, 0, 1003, 0, 0, 0, 0, 1003, 1001, 0, 1003, 0);
  v6 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = dword_1182931C & 0xFFFFFF | 0xDC000000;
  v6[1] = 1;
  v7 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v7 = -40894464;
  v7[1] = &unk_100BAAC8;
  v8 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v8 = -175112192;
  v8[1] = 117538912;
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = -436207616;
  v9[1] = 0;
  v10 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = -218103808;
  v10[1] = 125825280;
  v11 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v11 = -419430400;
  v11[1] = 0;
  v12 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v12 = -175632384;
  v12[1] = 98400;
  v13 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v13 = -234881024;
  v13[1] = 1032444;
  v14 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v14 = -1174401534;
  v14[1] = 0;
  v15 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v15 = -1174400255;
  v15[1] = 0;
  v16 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v16 = -1191181823;
  v16[1] = 4;
  v17 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v17 = -1174403582;
  v17[1] = 192;
  if (*(_DWORD *)&gUnk06594.gap1C8[12504]) {
    v18 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v18 = -1174404094;
    v18[1] = 128;
    v19 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v19 = -1191181539;
    v19[1] = 5262160;
    sub_10013D90(a1, (unsigned __int16)dword_1039B714, 224, 0xE0u, 0xFFu);
  }
  v20 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v20 = -419430400;
  v20[1] = 0;
  v21 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v21 = -1174400255;
  v21[1] = 0x80000;
  v22 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v22 = -1191181823;
  v22[1] = 0;
  v23 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v23 = -1174403582;
  v23[1] = dword_106C0688;
  v24 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v24 = -1174404094;
  v24[1] = dword_106C0920;
  v25 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v25 = -1191182334;
  v25[1] = 1;
  return sub_10013A40(a2);
}
// 1039B714: using guessed type int dword_1039B714;
// 106C0258: using guessed type int dword_106C0258;
// 106C0680: using guessed type int dword_106C0680;
// 106C0688: using guessed type int dword_106C0688;
// 106C0920: using guessed type int dword_106C0920;
// 1182931C: using guessed type int dword_1182931C;

//----- (100147B0) --------------------------------------------------------
_DWORD *sub_100147B0() {
  _DWORD *result; // eax
  _DWORD *v1;     // eax
  _DWORD *v2;     // eax
  int v3[4];      // [esp+0h] [ebp-40h] BYREF
  int v4[4];      // [esp+10h] [ebp-30h] BYREF
  int v5[4];      // [esp+20h] [ebp-20h] BYREF
  int v6[4];      // [esp+30h] [ebp-10h] BYREF

  result = (_DWORD *)dword_106909D0;
  if (dword_106909D0) {
    result = (_DWORD *)gUnk06594.field_4938;
    if (gUnk06594.field_4938) {
      v3[3] = 0;
      v4[3] = 0;
      v5[3] = 0;
      v6[3] = 1065353216;
      v5[0] = 0;
      v5[1] = 0;
      v5[2] = 1065353216;
      sub_1003ADA0(
          (float *)v4, (float *)(gUnk06594.field_4938 + 76), (float *)(gUnk06594.field_4938 + 88));
      sub_1003AC30((float *)v3, (float *)v4, (float *)v5);
      sub_1003AC30((float *)v4, (float *)v5, (float *)v3);
      v6[0] = *(_DWORD *)(gUnk06594.field_4938 + 76);
      v6[1] = *(_DWORD *)(gUnk06594.field_4938 + 80);
      *(float *)&v6[2] = *(float *)(gUnk06594.field_4938 + 84) + *(float *)&dword_106805BC - -2.0;
      sub_1003AFE0((int)v6, (int)v6, (int)v3, -0.30000001);
      sub_1003AFE0((int)v6, (int)v6, (int)v4, -0.60000002);
      v1 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v1 = 17170496;
      v1[1] = &unk_100AA730;
      v2 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v2 = 16973888;
      v2[1] = dword_106C32D0;
      sub_100310F0((int)&flt_106C0860, 0.0009765625, 981467136, 981467136);
      sub_100306C0(&flt_106C0860, (float *)v3, (float *)v3);
      result = sub_1002FB20(C, (int)v3);
    }
  }
  return result;
}
// 106805BC: using guessed type int dword_106805BC;
// 106909D0: using guessed type int dword_106909D0;
// 106C0680: using guessed type int dword_106C0680;
// 106C0860: using guessed type float flt_106C0860;
// 106C32D0: using guessed type int dword_106C32D0;

//----- (10014930) --------------------------------------------------------
_DWORD *sub_10014930() {
  _DWORD *result;   // eax
  int v1;           // ecx
  double v2;        // st7
  int *v3;          // eax
  int v4;           // ecx
  double v5;        // st7
  int *v6;          // eax
  int v7;           // [esp+Ch] [ebp-108h]
  int v8;           // [esp+Ch] [ebp-108h]
  char buffer[256]; // [esp+14h] [ebp-100h] BYREF

  result = (_DWORD *)dword_10B501D8;
  if (dword_10B501D8) {
    if (!dword_100AA00C) {
      v1 = dword_100AA008;
      v2 = 0.0;
      if (dword_100AA008 > 0) {
        v3 = dword_10680758;
        do {
          v7 = *v3++;
          v2 = v2 + (double)v7;
          --v1;
        } while (v1);
      }
      flt_100A6CF0 = (double)dword_100AA008 * 1000.0 / v2;
    }
    if (!dword_100B5424) {
      v4 = dword_100B5420;
      v5 = 0.0;
      if (dword_100B5420 > 0) {
        v6 = dword_10B4FFE8;
        do {
          v8 = *v6++;
          v5 = v5 + (double)v8;
          --v4;
        } while (v4);
      }
      flt_100A6CF4 = (double)dword_100B5420 * 1000.0 / v5;
    }
    sprintf(buffer, "%6.2f FPS", flt_100A6CF4);
    sub_100192F0(15);
    Set_byte_104B035C_To2();
    result = text_10019300(buffer, gWidth / 2, gHeight - 10);
  }
  return result;
}
// 100A6CF0: using guessed type float flt_100A6CF0;
// 100A6CF4: using guessed type float flt_100A6CF4;
// 100A81C0: using guessed type int gWidth;
// 100A81C4: using guessed type int gHeight;
// 100AA008: using guessed type int dword_100AA008;
// 100AA00C: using guessed type int dword_100AA00C;
// 100B5420: using guessed type int dword_100B5420;
// 100B5424: using guessed type int dword_100B5424;
// 10B501D8: using guessed type int dword_10B501D8;

//----- (10014A30) --------------------------------------------------------
int __cdecl sub_10014A30(int a1) {
  int *v1;         // ebp
  void *v2;        // ecx
  void *v3;        // ecx
  int v4;          // eax
  void *v5;        // ecx
  int v6;          // edi
  int *v7;         // esi
  int v8;          // eax
  void *v9;        // ecx
  int v10;         // edi
  int v11;         // ebx
  void *v12;       // ecx
  void *v13;       // ecx
  void *v14;       // ecx
  int v15;         // edi
  float *v16;      // ebx
  float v17;       // eax
  void *v18;       // ecx
  void *v19;       // ecx
  void *v20;       // ecx
  int v21;         // edi
  float *v22;      // ebx
  float v23;       // eax
  void *v24;       // ecx
  int v25;         // edi
  float *v26;      // ebx
  float *v27;      // ecx
  int v28;         // edi
  float *v29;      // ebx
  float v30;       // eax
  void *v31;       // ecx
  void *v32;       // ecx
  int v33;         // ecx
  int v34;         // edi
  int v35;         // ecx
  int v36;         // ebp
  void *v37;       // ecx
  void *v38;       // ecx
  int v39;         // ebx
  void *v40;       // ecx
  void *v41;       // ecx
  int v42;         // ebx
  float v43;       // eax
  void *v44;       // ecx
  void *v45;       // ecx
  int v46;         // ebx
  float v47;       // eax
  void *v48;       // ecx
  int v49;         // ebx
  int v50;         // ebx
  float v51;       // eax
  void *v52;       // ecx
  char *v53;       // eax
  char *v54;       // eax
  void *v55;       // ecx
  void *v56;       // ecx
  int v57;         // esi
  char *v58;       // eax
  int v59;         // edi
  char *v60;       // eax
  int v61;         // edi
  char *v62;       // eax
  int v63;         // edi
  char *v64;       // eax
  char *v65;       // eax
  int v66;         // edi
  char *v67;       // eax
  int v68;         // edi
  char *v69;       // eax
  int v70;         // edi
  char *v71;       // eax
  const char *v72; // eax
  int v73;         // edi
  char *v74;       // eax
  const char *v75; // eax
  int v76;         // edi
  char *v77;       // eax
  int v78;         // esi
  char(**v79)[8];  // eax
  int v80;         // ebx
  int v81;         // esi
  int v82;         // edi
  void *v83;       // ecx
  void *v84;       // ecx
  void *v85;       // ecx
  float v87;       // [esp+0h] [ebp-40h]
  float v88;       // [esp+0h] [ebp-40h]
  float v89;       // [esp+4h] [ebp-3Ch]
  float v90;       // [esp+4h] [ebp-3Ch]
  float v91;       // [esp+4h] [ebp-3Ch]
  float v92;       // [esp+4h] [ebp-3Ch]
  float v93;       // [esp+8h] [ebp-38h]
  float v94;       // [esp+8h] [ebp-38h]
  float v95;       // [esp+8h] [ebp-38h]
  float v96;       // [esp+8h] [ebp-38h]
  int v97;         // [esp+8h] [ebp-38h]
  char *v98;       // [esp+8h] [ebp-38h]
  char *v99;       // [esp+8h] [ebp-38h]
  _WORD *v100;     // [esp+Ch] [ebp-34h]
  float v101;      // [esp+Ch] [ebp-34h]
  float v102;      // [esp+Ch] [ebp-34h]
  float v103;      // [esp+Ch] [ebp-34h]
  float v104;      // [esp+Ch] [ebp-34h]
  float v105;      // [esp+Ch] [ebp-34h]
  float v106;      // [esp+Ch] [ebp-34h]
  int v107;        // [esp+Ch] [ebp-34h]
  int v108;        // [esp+Ch] [ebp-34h]
  int v109;        // [esp+Ch] [ebp-34h]
  int v110;        // [esp+Ch] [ebp-34h]
  int v111;        // [esp+Ch] [ebp-34h]
  float *v112;     // [esp+20h] [ebp-20h]
  int v113;        // [esp+24h] [ebp-1Ch]
  float v114;      // [esp+28h] [ebp-18h]
  int v115;        // [esp+28h] [ebp-18h]
  float *v116;     // [esp+28h] [ebp-18h]
  float *v117;     // [esp+28h] [ebp-18h]
  float *v118;     // [esp+28h] [ebp-18h]
  float *v119;     // [esp+28h] [ebp-18h]
  __int16 v120;    // [esp+30h] [ebp-10h]
  int v121;        // [esp+34h] [ebp-Ch]
  float v122;      // [esp+38h] [ebp-8h]
  int v123;        // [esp+3Ch] [ebp-4h]
  float *v124;     // [esp+44h] [ebp+4h]

  v1 = (int *)((char *)&unk_103C77E8 + 188656 * a1);
  v100 = &word_103C7844[94328 * a1];
  v112 = &flt_1039C168[47164 * a1];
  v124 = (float *)((char *)&unk_1039B764 + 188656 * a1);
  v113 = (int)v1;
  sub_10013A10(v100);
  sub_1002B670();
  sub_10032873(v1);
  meth_DebugPrint(v2);
  sub_1000F5C0();
  meth_DebugPrint(v3);
  if (dword_100A6CF8 || *(_DWORD *)&gUnk06594.gap1C8[12480]) {
    sub_100314E8(0, 0, 0);
    if (dword_100A6CF8)
      --dword_100A6CF8;
  } else {
    v4 = v1[2];
    if (v4 < 304)
      sub_10031688(v4 + *v1, 8, 304 - v4, 224, 0, 0, 0);
  }
  v5 = dword_100A6CFC;
  if ((void *)dword_100AA8B4 != dword_100A6CFC) {
    dword_100A6CF8 = 2;
    dword_100A6CFC = (void *)dword_100AA8B4;
  }
  v6 = 0;
  v121 = 0;
  if (dword_100AA8B4 > 0) {
    while (1) {
      meth_DebugPrint(v5);
      v7 = &v1[22 * v6];
      dword_106C2CF8 = (int)&v112[2778 * v7[4]];
      v8 = *(_DWORD *)(dword_106C2CF8 + 10036);
      *(_DWORD *)&gUnk06594.gap1C8[8640] = v6;
      *(_DWORD *)&gUnk06594.gap1C8[12104] = v8;
      sub_100759D0(0,
                   0,
                   v8 + 48,
                   (int)&gUnk06594.gap1C8[12112],
                   (int)&dword_106C1988,
                   COERCE_FLOAT((unk06594 *)&gUnk06594.gap1C8[12216]),
                   (int)&unk_10690A34,
                   (int)&unk_106C01FC,
                   (int)&gUnk06594.gap1C8[8616]);
      sub_10032A42(*v7, v7[1], v7[2], v7[3], 1);
      v101 = (float)v7[3];
      v93 = (float)v7[2];
      if (dword_100AA8B4 <= 1) {
        sub_10033CB1(*(int *)&gUnk06594.gap1C8[12104],
                     *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 64),
                     flt_100AA8B0,
                     v93,
                     v101);
        v103 = (float)v7[3];
        v95 = (float)v7[2];
        sub_10033E83(*(int *)&gUnk06594.gap1C8[12104],
                     *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 64),
                     flt_100AA8B0,
                     v95,
                     v103);
      } else {
        v89 = flt_100AA8B0 * 0.64999998;
        v87 = *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 64) * 0.69999999;
        sub_10033CB1(*(int *)&gUnk06594.gap1C8[12104], v87, v89, v93, v101);
        v102 = (float)v7[3];
        v94 = (float)v7[2];
        v90 = flt_100AA8B0 * 0.64999998;
        v88 = *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 64) * 0.69999999;
        sub_10033E83(*(int *)&gUnk06594.gap1C8[12104], v88, v90, v94, v102);
      }
      sub_10031866();
      sub_10031DCF();
      meth_DebugPrint(v9);
      sub_100180B0((int)v1);
      sub_1002AEF0();
      sub_1003A990();
      v10 = 0;
      dword_10277EA0 = (*(_DWORD *)&gUnk06594.gap1C8[12500] != 0) + 1;
      if (dword_100B36FC > 0) {
        v11 = (int)v112;
        do {
          sub_1000CA90(v11);
          ++v10;
          v11 += 11112;
        } while (v10 < dword_100B36FC);
      }
      sub_10011590((int)v1, 0, (int)v124, (int)v112);
      if (!*(_DWORD *)&gUnk06594.gap1C8[12504] || gChosenTrack == 2 || gChosenTrack == 8) {
        sub_10031866();
        sub_10031DCF();
        meth_DebugPrint(v13);
        v15 = 0;
        if (dword_100B36F8 > 0) {
          v16 = v124 + 24;
          do {
              v17 = *v16;
              if (*(_DWORD *)v16 && *(_BYTE *)(LODWORD(v17) + 10671) != 2)
                  sub_1000CBE0(v17, 0);
              ++v15;
              v16 += 32;
          } while (v15 < dword_100B36F8);
        }
        meth_DebugPrint(v14);
        nullsub_2();
        sub_100140E0((int)v1);
      }
      meth_DebugPrint(v12);
      sub_100147B0();
      sub_10011590((int)v1, 1, (int)v124, (int)v112);
      if (*(_DWORD *)&gUnk06594.gap1C8[12504] && gChosenTrack != 2 && gChosenTrack != 8) {
        sub_10031866();
        sub_10031DCF();
        meth_DebugPrint(v19);
        v21 = 0;
        if (dword_100B36F8 > 0) {
          v22 = v124 + 24;
          do {
              v23 = *v22;
              if (*(_DWORD *)v22 && *(_BYTE *)(LODWORD(v23) + 10671) != 2)
                  sub_1000CBE0(v23, 0);
              ++v21;
              v22 += 32;
          } while (v21 < dword_100B36F8);
        }
        meth_DebugPrint(v20);
        nullsub_2();
        sub_100140E0((int)v1);
      }
      meth_DebugPrint(v18);
      v25 = 0;
      if (dword_100B36F8 > 0) {
        v26 = v124 + 24;
        do {
          if (*(_DWORD *)v26)
              sub_1000E950(*v26);
          ++v25;
          v26 += 32;
        } while (v25 < dword_100B36F8);
      }
      meth_DebugPrint(v24);
      v28 = 0;
      if (dword_100B36F8 > 0) {
        v27 = v124;
        v29 = v124 + 24;
        do {
          v30 = *v29;
          if (*(_DWORD *)v29 && *(_BYTE *)(LODWORD(v30) + 10671) == 2)
              sub_1000CBE0(v30, 0);
          ++v28;
          v29 += 32;
        } while (v28 < dword_100B36F8);
      }
      meth_DebugPrint(v27);
      sub_10014450((int)v1, (int)v124);
      meth_DebugPrint(v31);
      sub_10019B50();
      meth_DebugPrint(v32);
      v104 = flt_10575504 - flt_105754F8 * -0.5;
      sub_1002AF10((int)v1, v104);
      v105 = (float)v7[3];
      v96 = (float)v7[2];
      sub_1003407D(v96, v105);
      sub_10032C38(*v7, v7[1], v7[2], v7[3], 1);
      if (*(_DWORD *)&gUnk06594.gap1C8[12104] == dword_106C2CF8 + 10180 && dword_100AA8B4 == 1 &&
          dword_100AA888) {
        if (dword_100AA888 == 1) {
          v33 = v7[2];
          v34 = v33 / 4;
        } else {
          v33 = v7[2];
          if (dword_100AA888 == 2)
              v34 = 5 * v33 / 16;
          else
              v34 = 3 * v33 / 8 + 2;
        }
        v35 = *v7 + ((v33 - v34) >> 1);
        v36 = v7[1] + v7[3] / 16;
        v123 = *(_DWORD *)&gUnk06594.gap1C8[12104];
        *(_DWORD *)(dword_106C2CF8 + 10036) = dword_106C2CF8 + 10384;
        v120 = v35;
        *(_DWORD *)&gUnk06594.gap1C8[12104] = *(_DWORD *)(dword_106C2CF8 + 10036);
        sub_10032A42(v35, v36, -v34, v34 >> 2, 1);
        sub_100314E3();
        v122 = (float)(v34 >> 2);
        v114 = (float)v34;
        v91 = flt_100AA8B0 * 0.2;
        sub_10033CB1(*(int *)&gUnk06594.gap1C8[12104],
                     *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 64),
                     v91,
                     v114,
                     v122);
        v92 = flt_100AA8B0 * 0.30000001;
        sub_10033E83(*(int *)&gUnk06594.gap1C8[12104],
                     *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 64),
                     v92,
                     v114,
                     v122);
        sub_10031866();
        sub_10031DCF();
        meth_DebugPrint(v37);
        sub_100180B0(v113);
        sub_1002AEF0();
        sub_1003A990();
        meth_DebugPrint(v38);
        v39 = 0;
        if (dword_100B36FC > 0) {
          v115 = (int)v112;
          do {
              sub_1000CA90(v115);
              ++v39;
              v115 += 11112;
          } while (v39 < dword_100B36FC);
        }
        sub_10011590(v113, 0, (int)v124, (int)v112);
        if (!*(_DWORD *)&gUnk06594.gap1C8[12504] || gChosenTrack == 2 || gChosenTrack == 8) {
          sub_10031866();
          sub_10031DCF();
          meth_DebugPrint(v40);
          v42 = 0;
          if (dword_100B36F8 > 0) {
              v116 = v124 + 24;
              do {
                  v43 = *v116;
                  if (*(_DWORD *)v116 && *(_BYTE *)(LODWORD(v43) + 10671) != 2)
                      sub_1000CBE0(v43, 0);
                  ++v42;
                  v41 = v116 + 32;
                  v116 += 32;
              } while (v42 < dword_100B36F8);
          }
          meth_DebugPrint(v41);
          nullsub_2();
          sub_100140E0(v113);
        }
        sub_10011590(v113, 1, (int)v124, (int)v112);
        if (*(_DWORD *)&gUnk06594.gap1C8[12504]) {
          if (gChosenTrack != 2 && gChosenTrack != 8) {
              sub_10031866();
              sub_10031DCF();
              meth_DebugPrint(v45);
              v46 = 0;
              if (dword_100B36F8 > 0) {
                  v117 = v124 + 24;
                  do {
                      v47 = *v117;
                      if (*(_DWORD *)v117 && *(_BYTE *)(LODWORD(v47) + 10671) != 2)
                          sub_1000CBE0(v47, 0);
                      ++v46;
                      v44 = v117 + 32;
                      v117 += 32;
                  } while (v46 < dword_100B36F8);
              }
          }
        }
        meth_DebugPrint(v44);
        v49 = 0;
        if (dword_100B36F8 > 0) {
          v118 = v124 + 24;
          do {
              if (*(_DWORD *)v118)
                  sub_1000E950(*v118);
              ++v49;
              v48 = v118 + 32;
              v118 += 32;
          } while (v49 < dword_100B36F8);
        }
        meth_DebugPrint(v48);
        v50 = 0;
        if (dword_100B36F8 > 0) {
          v119 = v124 + 24;
          do {
              v51 = *v119;
              if (*(_DWORD *)v119 && *(_BYTE *)(LODWORD(v51) + 10671) == 2)
                  sub_1000CBE0(v51, 0);
              ++v50;
              v119 += 32;
          } while (v50 < dword_100B36F8);
        }
        v106 = flt_105754F8 + flt_10575504;
        sub_1002AF10(v113, v106);
        meth_DebugPrint(v52);
        *(_DWORD *)(dword_106C2CF8 + 10036) = v123;
        *(_DWORD *)&gUnk06594.gap1C8[12104] = v123;
        sub_10032A42(*v7, v7[1], v7[2], v7[3], 1);
        sub_10032E5D(v120, v36, v34, v34 >> 2);
        v1 = (int *)v113;
      }
      sub_10014930();
      if (gGameMode == GAME_MODE_5)
        break;
      if (dword_100AA894) {
        if (gGameMode == GAME_MODE_4) {
          if (!dword_100AA894 || gGameMode != GAME_MODE_4 || dword_106805B8)
              goto LABEL_109;
          sub_10019260();
          sub_100192F0(15);
        } else {
          if (!dword_106909E0) {
              if (*(_DWORD *)&gUnk06594.gap1C8[12104] == dword_106C2CF8 + 10248) {
                  if ((*(_BYTE *)(*(_DWORD *)(dword_106C2CF8 + 3840) + 104) & 2) != 0)
                      sub_10017790((int)v1);
              } else {
                  meth_DebugPrint((void *)(dword_106C2CF8 + 10248));
                  sub_10032C38(*v7, v7[1], v7[2], v7[3], 1);
                  sub_10017D90((int)v1);
                  sub_10017890(v1, (int)v112);
                  meth_DebugPrint(v55);
                  if (*(_DWORD *)&gUnk06594.gap1C8[12104] != dword_106C2CF8 + 10180)
                      meth_DebugPrint(*(void **)&gUnk06594.gap1C8[12104]);
              }
              goto LABEL_109;
          }
          sub_10019260();
          Set_byte_104B035C_To0();
          sub_100192F0(15);
          v54 = (char *)GetStringWithIndex(0xF2u);
          text_10019300(v54, 28, 32);
          if (gGameMode == GAME_MODE_6)
              sub_10017890(v1, (int)v112);
        }
        Set_byte_104B035C_To1();
        v107 = g_Height1 - 24;
        v97 = g_Width1 - 28;
        v53 = (char *)GetStringWithIndex(0xF4u);
        goto LABEL_108;
      }
    LABEL_109:
      sub_10032E58();
      sub_10017690((int)v1);
      v6 = ++v121;
      if (v121 >= dword_100AA8B4)
        goto LABEL_110;
    }
    sub_10019260();
    Set_byte_104B035C_To2();
    sub_100192F0(40);
    v107 = g_Height1 - 30;
    v97 = g_Width1 / 2;
    if (*(_BYTE *)(*((_DWORD *)v112 + 931) + 4))
      v53 = (char *)GetStringWithIndex(0xF0u);
    else
      v53 = (char *)GetStringWithIndex(0xF1u);
  LABEL_108:
    text_10019300(v53, v97, v107);
    goto LABEL_109;
  }
LABEL_110:
  sub_100314DE();
  sub_1003289F(0, 0, g_Width1, g_Height1);
  if (dword_106909B4 == 2) {
    v57 = *v1 + (v1[2] >> 1);
    meth_DebugPrint(v56);
    sub_10019260();
    Set_byte_104B035C_To2();
    sub_100192F0(40);
    v108 = 5 * g_Height1 / 16;
    v58 = (char *)GetStringWithIndex(0xF5u);
    text_10019300(v58, v57, v108);
    v59 = 5 * g_Height1 / 11;
    sub_100192F0(20);
    v60 = (char *)GetStringWithIndex(0xF6u);
    text_10019300(v60, v57, v59);
    v61 = v59 + 40;
    if (dword_10680734)
      v62 = (char *)GetStringWithIndex(0xF8u);
    else
      v62 = (char *)GetStringWithIndex(0xF7u);
    text_10019300(v62, v57, v61);
    v63 = v61 + 20;
    if (dword_10680734 == 1)
      v64 = (char *)GetStringWithIndex(0xF9u);
    else
      v64 = (char *)GetStringWithIndex(0xFAu);
  LABEL_140:
    text_10019300(v64, v57, v63);
    goto LABEL_141;
  }
  if (dword_106909B4) {
    v57 = *v1 + (v1[2] >> 1);
    meth_DebugPrint(v56);
    sub_10019260();
    Set_byte_104B035C_To2();
    sub_100192F0(40);
    v109 = 5 * g_Height1 / 16;
    v65 = (char *)GetStringWithIndex(0xF5u);
    text_10019300(v65, v57, v109);
    v66 = 5 * g_Height1 / 11;
    sub_100192F0(20);
    if (dword_10680734)
      v67 = (char *)GetStringWithIndex(0xFCu);
    else
      v67 = (char *)GetStringWithIndex(0xFBu);
    text_10019300(v67, v57, v66);
    v68 = v66 + 20;
    if (!gNetworkPlay) {
      if (dword_10680734 == 1)
        v69 = (char *)GetStringWithIndex(0xFFu);
      else
        v69 = (char *)GetStringWithIndex(0x100u);
      text_10019300(v69, v57, v68);
    }
    v70 = v68 + 20;
    v71 = aY1;
    if (dword_10680734 != 2)
      v71 = aRy_0;
    v110 = dword_10B4E70C;
    v98 = v71;
    v72 = GetStringWithIndex(0x101u);
    sprintf(Buffer, v72, v98, v110);
    text_10019300(Buffer, v57, v70);
    v73 = v70 + 20;
    v74 = aY1;
    if (dword_10680734 != 3)
      v74 = aRy_0;
    v111 = dword_10B4E708;
    v99 = v74;
    v75 = GetStringWithIndex(0x102u);
    sprintf(Buffer, v75, v99, v111);
    text_10019300(Buffer, v57, v73);
    v76 = v73 + 20;
    if (gGameMode) {
      if (dword_10680734 == 4)
        v77 = (char *)GetStringWithIndex(0x105u);
      else
        v77 = (char *)GetStringWithIndex(0x106u);
    } else if (dword_10680734 == 4) {
      v77 = (char *)GetStringWithIndex(0x103u);
    } else {
      v77 = (char *)GetStringWithIndex(0x104u);
    }
    text_10019300(v77, v57, v76);
    v63 = v76 + 20;
    if (dword_10680734 == 5)
      v64 = (char *)GetStringWithIndex(0x107u);
    else
      v64 = (char *)GetStringWithIndex(0x108u);
    goto LABEL_140;
  }
LABEL_141:
  if (gGameMode == GAME_MODE_4 && dword_106805B8 == 2) {
    sub_10015BD0(v1);
  } else if (gGameMode == GAME_MODE_4 && dword_106805B8 == 1 &&
             (&off_100AA018)[8 * dword_106805C0] && *(float *)&dword_106806DC > 0.5) {
    sub_10019260();
    Set_byte_104B035C_To2();
    sub_100192A0(255, 255, 255, 255, 255, 255);
    v78 = 0;
    v79 = &(&off_100AA020)[8 * dword_106805C0];
    do {
      if (!*v79)
        break;
      ++v78;
      ++v79;
    } while (v78 < 6);
    v80 = g_Height1 / 2 - 40 * v78 / 4 + 10;
    if (!(*(&off_100AA018)[8 * dword_106805C0])[0])
      v80 = g_Height1 / 2 - 40 * v78 / 4 + 5;
    v81 = v78 - 1;
    if (v81 >= 0) {
      v82 = 40 * v81;
      do {
        if ((*(&off_100AA020)[8 * dword_106805C0 + 4 * v81])[0] == 96) {
          sub_100192F0(15);
          text_10019300(
              &(*(&off_100AA020)[8 * dword_106805C0 + 4 * v81])[1], g_Width1 / 2, v80 + v82 / 2);
        } else {
          sub_100192F0(20);
          text_10019300(
              (char *)(&off_100AA020)[8 * dword_106805C0 + 4 * v81], g_Width1 / 2, v80 + v82 / 2);
        }
        --v81;
        v82 -= 40;
      } while (v81 >= 0);
    }
    sub_100192F0(15);
    text_10019300((char *)(&off_100AA018)[8 * dword_106805C0], g_Width1 / 2, v80 - 20);
  }
  sub_1002B340();
  if (*(int *)&gUnk06594.gap1C8[12516] >= 2) {
    sub_10032A42(0, 0, g_Width1, g_Height1, 1);
    meth_DebugPrint(v84);
  }
  meth_DebugPrint(v83);
  sub_10033498();
  meth_DebugPrint(v85);
  return sub_10033838();
}
// 10014A9B: variable 'v2' is possibly undefined
// 10014AA8: variable 'v3' is possibly undefined
// 10014B44: variable 'v5' is possibly undefined
// 10014CB4: variable 'v9' is possibly undefined
// 10014D5C: variable 'v13' is possibly undefined
// 10014DB3: variable 'v14' is possibly undefined
// 10014DDA: variable 'v12' is possibly undefined
// 10014E40: variable 'v19' is possibly undefined
// 10014E97: variable 'v20' is possibly undefined
// 10014EC7: variable 'v18' is possibly undefined
// 10014F16: variable 'v24' is possibly undefined
// 10014F6D: variable 'v27' is possibly undefined
// 10014F96: variable 'v31' is possibly undefined
// 10014FB3: variable 'v32' is possibly undefined
// 10015174: variable 'v37' is possibly undefined
// 100151A3: variable 'v38' is possibly undefined
// 10015238: variable 'v40' is possibly undefined
// 1001529F: variable 'v41' is possibly undefined
// 10015312: variable 'v45' is possibly undefined
// 1001537C: variable 'v44' is possibly undefined
// 100153DB: variable 'v48' is possibly undefined
// 1001545C: variable 'v52' is possibly undefined
// 100155FC: variable 'v55' is possibly undefined
// 100156F6: variable 'v56' is possibly undefined
// 10015B7A: variable 'v84' is possibly undefined
// 10015B92: variable 'v83' is possibly undefined
// 10015BAF: variable 'v85' is possibly undefined
// 100A6CF8: using guessed type int dword_100A6CF8;
// 100AA018: using guessed type char (*off_100AA018)[8];
// 100AA020: using guessed type char (*off_100AA020)[8];
// 100AA888: using guessed type int dword_100AA888;
// 100AA894: using guessed type int dword_100AA894;
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100B36F8: using guessed type int dword_100B36F8;
// 100B36FC: using guessed type int dword_100B36FC;
// 100B380C: using guessed type int gChosenTrack;
// 1022AF18: using guessed type int gNetworkPlay;
// 10277EA0: using guessed type int dword_10277EA0;
// 1039C168: using guessed type float flt_1039C168[];
// 105754F8: using guessed type float flt_105754F8;
// 10575504: using guessed type float flt_10575504;
// 106805B8: using guessed type int dword_106805B8;
// 106805C0: using guessed type int dword_106805C0;
// 106806DC: using guessed type int dword_106806DC;
// 10680734: using guessed type int dword_10680734;
// 106909B4: using guessed type int dword_106909B4;
// 106909E0: using guessed type int dword_106909E0;
// 106C0684: using guessed type int g_Width1;
// 106C1988: using guessed type int dword_106C1988;
// 106C299C: using guessed type int g_Height1;
// 106C2CF8: using guessed type int dword_106C2CF8;
// 10B4E708: using guessed type int dword_10B4E708;
// 10B4E70C: using guessed type int dword_10B4E70C;

//----- (10015BD0) --------------------------------------------------------
char (*__cdecl sub_10015BD0(int *a1))[8] {
  char(*result)[8]; // eax
  char *v2;         // esi

  sub_100192A0(255, 255, 255, 255, 255, 255);
  sub_10019260();
  Set_byte_104B035C_To2();
  sub_1003289F(*a1, a1[1], a1[2], a1[3]);
  result = off_100A66FC;
  if (off_100A66FC) {
    v2 = (char *)&unk_100A66F0;
    do {
      if (*(int *)v2 > -80 && *(_DWORD *)v2 < g_Height1 + 40) {
        sub_100192F0(*((_DWORD *)v2 + 1));
        text_10019300(*((char **)v2 + 3), g_Width1 / 2, *(_DWORD *)v2);
      }
      result = (char(*)[8]) * ((_DWORD *)v2 + 7);
      v2 += 16;
    } while (result);
  }
  return result;
}
// 100A66FC: using guessed type char (*off_100A66FC)[8];
// 106C0684: using guessed type int g_Width1;
// 106C299C: using guessed type int g_Height1;

//----- (10015C70) --------------------------------------------------------
int __cdecl sub_10015C70(int a1) {
  int v1;             // esi
  unsigned __int8 v3; // c0
  unsigned __int8 v4; // c3
  BOOL v5;            // edi
  int v6;             // ebp
  DWORD v7;           // ecx
  double v8;          // st7
  int v9;             // ebp
  int v10;            // ecx
  int v11;            // edx
  _DWORD *v12;        // eax
  int v13;            // eax
  unsigned int v14;   // edx
  char *v15;          // eax
  bool v16;           // zf
  int v17;            // ecx
  int v18;            // eax
  int v19;            // edx
  char *v20;          // eax
  float *v21;         // ebp
  float *v22;         // ecx
  float *v23;         // ecx
  int v24;            // ecx
  double v25;         // st6
  double v26;         // st6
  float *v27;         // esi
  double v28;         // st6
  double v29;         // st6
  float *v30;         // edi
  float *v31;         // edx
  double v32;         // st6
  double v33;         // st6
  double v34;         // st6
  _DWORD *i;          // [esp+10h] [ebp-10h]
  int v37;            // [esp+10h] [ebp-10h]
  int v38;            // [esp+14h] [ebp-Ch]
  _DWORD *v39;        // [esp+24h] [ebp+4h]
  int j;              // [esp+24h] [ebp+4h]

  if (dword_104AFD04 < 0 || dword_104AFD18 < 0)
    return 0;
  v1 = dword_1039B75C < 0 ?
           0 :
           dword_1039B760[47164 * dword_104AFD04] - dword_1039B760[47164 * dword_1039B75C];
  dword_1039B75C = dword_104AFD04;
  dword_104AFD14 = dword_104AFD18;
  v5 = (v3 | v4) == 0;
  v6 = 1;
  v7 = getTicks();
  if (v5) {
    v8 = 1.0;
  } else if (a1) {
    v8 = 1.0;
  } else if (dword_104AFD0C) {
    v8 = (double)(v7 - dword_104AFD0C) * 0.030000001 + flt_1039B73C - (double)v1;
    if (!v1 && v8 > 1.0)
      v6 = 0;
    if (v8 < 0.0)
      v8 = 0.0;
    if (v8 > 1.0)
      v8 = 1.0;
  } else {
    v8 = 0.0;
  }
  if (!gInterpolate) {
    v8 = 1.0;
    v6 = 1;
  }
  if (!v6)
    return 0;
  v9 = dword_104AFD14;
  dword_1039B728[0] = 0;
  dword_104AFD0C = v7;
  dword_1039B72C = 0;
  dword_1039B730 = 0;
  flt_1039B73C = v8;
  dword_1039B734 = 0;
  dword_1039B738 = 0;
  dword_1039B728[dword_1039B75C] = 1;
  v10 = dword_100B36F8;
  dword_1039B728[v9] = 1;
  if (v10 > 0) {
    v39 = &unk_10481C74;
    v38 = v10;
    v11 = 188656 * v9;
    v12 = (_DWORD *)((char *)&unk_1039B7C4 + 188656 * v9);
    for (i = v12;; v12 = i) {
      qmemcpy(v39 - 24, v12 - 24, 0x80u);
      v13 = *v12;
      if (v13) {
        v14 =
            (int)((unsigned __int64)(1583170091i64 * (v13 - (int)flt_1039C168 - v11)) >> 32) >> 12;
        v15 = (char *)&unk_10482618 + 11112 * (v14 >> 31) + 11112 * v14;
        v11 = 188656 * v9;
        *v39 = v15;
      }
      i += 32;
      v16 = v38 == 1;
      v39 += 32;
      --v38;
      if (v16)
        break;
    }
  }
  v17 = dword_100B36FC;
  v18 = 0;
  v37 = 0;
  for (j = 0;; v18 = j) {
    if (!v17)
      v17 = 1;
    if (v37 >= v17)
      break;
    v19 = v18 + 188656 * v9;
    v20 = (char *)&unk_10484D6C + v18;
    v21 = (float *)((char *)flt_1039C168 + v19);
    qmemcpy(v20 - 10068, (char *)flt_1039C168 + v19, 0x2B68u);
    v22 = *(float **)((char *)&dword_1039E89C + v19);
    if (v22) {
      if (v22 == (float *)((char *)&flt_1039E8A4 + v19)) {
        *((_DWORD *)v20 - 8) = v20 - 24;
      } else if (v22 == (float *)((char *)&unk_1039E9F8 + v19)) {
        *((_DWORD *)v20 - 8) = v20 + 316;
      } else if (v22 == (float *)((char *)&flt_1039E8E8 + v19)) {
        *((_DWORD *)v20 - 8) = v20 + 44;
      } else if (v22 == (float *)((char *)&flt_1039E92C + v19)) {
        *((_DWORD *)v20 - 8) = v20 + 112;
      } else if (v22 == (float *)((char *)&flt_1039E970 + v19)) {
        *((_DWORD *)v20 - 8) = v20 + 180;
      } else {
        *((_DWORD *)v20 - 8) = 0;
      }
    }
    v23 = *(float **)((char *)&dword_1039E8A0 + v19);
    if (v23) {
      if (v23 == (float *)((char *)&flt_1039E8A4 + v19)) {
        *((_DWORD *)v20 - 7) = v20 - 24;
      } else if (v23 == (float *)((char *)&unk_1039E9F8 + v19)) {
        *((_DWORD *)v20 - 7) = v20 + 316;
      } else if (v23 == (float *)((char *)&flt_1039E8E8 + v19)) {
        *((_DWORD *)v20 - 7) = v20 + 44;
      } else if (v23 == (float *)((char *)&flt_1039E92C + v19)) {
        *((_DWORD *)v20 - 7) = v20 + 112;
      } else if (v23 == (float *)((char *)&flt_1039E970 + v19)) {
        *((_DWORD *)v20 - 7) = v20 + 180;
      } else {
        *((_DWORD *)v20 - 7) = 0;
      }
    }
    v24 = 188656 * dword_1039B75C + j;
    *((float *)v20 - 2517) = (*(float *)((char *)flt_1039C168 + v24) - *v21) * v8 + *v21;
    *((float *)v20 - 2516) = (*(float *)((char *)&flt_1039C16C + v24) - v21[1]) * v8 + v21[1];
    *((float *)v20 - 2515) = (*(float *)((char *)&flt_1039C170 + v24) - v21[2]) * v8 + v21[2];
    *((float *)v20 - 2513) =
        (*(float *)((char *)&flt_1039C178 + v24) - *(float *)((char *)&flt_1039C178 + v19)) * v8 +
        *(float *)((char *)&flt_1039C178 + v19);
    *((float *)v20 - 2512) =
        (*(float *)((char *)&flt_1039C17C + v24) - *(float *)((char *)&flt_1039C17C + v19)) * v8 +
        *(float *)((char *)&flt_1039C17C + v19);
    *((float *)v20 - 2511) =
        (*(float *)((char *)&flt_1039C180 + v24) - *(float *)((char *)&flt_1039C180 + v19)) * v8 +
        *(float *)((char *)&flt_1039C180 + v19);
    *((float *)v20 - 2509) =
        (*(float *)((char *)&flt_1039C188 + v24) - *(float *)((char *)&flt_1039C188 + v19)) * v8 +
        *(float *)((char *)&flt_1039C188 + v19);
    *((float *)v20 - 2508) =
        (*(float *)((char *)&flt_1039C18C + v24) - *(float *)((char *)&flt_1039C18C + v19)) * v8 +
        *(float *)((char *)&flt_1039C18C + v19);
    *((float *)v20 - 2507) =
        (*(float *)((char *)&flt_1039C190 + v24) - *(float *)((char *)&flt_1039C190 + v19)) * v8 +
        *(float *)((char *)&flt_1039C190 + v19);
    *((float *)v20 - 2505) =
        (*(float *)((char *)&flt_1039C198 + v24) - *(float *)((char *)&flt_1039C198 + v19)) * v8 +
        *(float *)((char *)&flt_1039C198 + v19);
    *((float *)v20 - 2504) =
        (*(float *)((char *)&flt_1039C19C + v24) - *(float *)((char *)&flt_1039C19C + v19)) * v8 +
        *(float *)((char *)&flt_1039C19C + v19);
    *((float *)v20 - 2503) =
        (*(float *)((char *)&flt_1039C1A0 + v24) - *(float *)((char *)&flt_1039C1A0 + v19)) * v8 +
        *(float *)((char *)&flt_1039C1A0 + v19);
    *((float *)v20 - 2489) =
        (*(float *)((char *)&flt_1039C1D8 + v24) - *(float *)((char *)&flt_1039C1D8 + v19)) * v8 +
        *(float *)((char *)&flt_1039C1D8 + v19);
    *((float *)v20 - 2488) =
        (*(float *)((char *)&flt_1039C1DC + v24) - *(float *)((char *)&flt_1039C1DC + v19)) * v8 +
        *(float *)((char *)&flt_1039C1DC + v19);
    *((float *)v20 - 2487) =
        (*(float *)((char *)&flt_1039C1E0 + v24) - *(float *)((char *)&flt_1039C1E0 + v19)) * v8 +
        *(float *)((char *)&flt_1039C1E0 + v19);
    *((float *)v20 - 2473) =
        (*(float *)((char *)&flt_1039C218 + v24) - *(float *)((char *)&flt_1039C218 + v19)) * v8 +
        *(float *)((char *)&flt_1039C218 + v19);
    *((float *)v20 - 2472) =
        (*(float *)((char *)&flt_1039C21C + v24) - *(float *)((char *)&flt_1039C21C + v19)) * v8 +
        *(float *)((char *)&flt_1039C21C + v19);
    *((float *)v20 - 2471) =
        (*(float *)((char *)&flt_1039C220 + v24) - *(float *)((char *)&flt_1039C220 + v19)) * v8 +
        *(float *)((char *)&flt_1039C220 + v19);
    *((float *)v20 - 2457) =
        (*(float *)((char *)&flt_1039C258 + v24) - *(float *)((char *)&flt_1039C258 + v19)) * v8 +
        *(float *)((char *)&flt_1039C258 + v19);
    *((float *)v20 - 2456) =
        (*(float *)((char *)&flt_1039C25C + v24) - *(float *)((char *)&flt_1039C25C + v19)) * v8 +
        *(float *)((char *)&flt_1039C25C + v19);
    *((float *)v20 - 2455) =
        (*(float *)((char *)&flt_1039C260 + v24) - *(float *)((char *)&flt_1039C260 + v19)) * v8 +
        *(float *)((char *)&flt_1039C260 + v19);
    *((float *)v20 - 2441) =
        (*(float *)((char *)&flt_1039C298 + v24) - *(float *)((char *)&flt_1039C298 + v19)) * v8 +
        *(float *)((char *)&flt_1039C298 + v19);
    *((float *)v20 - 2440) =
        (*(float *)((char *)&flt_1039C29C + v24) - *(float *)((char *)&flt_1039C29C + v19)) * v8 +
        *(float *)((char *)&flt_1039C29C + v19);
    *((float *)v20 - 2439) =
        (*(float *)((char *)&flt_1039C2A0 + v24) - *(float *)((char *)&flt_1039C2A0 + v19)) * v8 +
        *(float *)((char *)&flt_1039C2A0 + v19);
    *((float *)v20 - 6) =
        (*(float *)((char *)&flt_1039E8A4 + v24) - *(float *)((char *)&flt_1039E8A4 + v19)) * v8 +
        *(float *)((char *)&flt_1039E8A4 + v19);
    *((float *)v20 - 5) =
        (*(float *)((char *)&flt_1039E8A8 + v24) - *(float *)((char *)&flt_1039E8A8 + v19)) * v8 +
        *(float *)((char *)&flt_1039E8A8 + v19);
    *((float *)v20 - 4) =
        (*(float *)((char *)&flt_1039E8AC + v24) - *(float *)((char *)&flt_1039E8AC + v19)) * v8 +
        *(float *)((char *)&flt_1039E8AC + v19);
    *((float *)v20 - 2) =
        (*(float *)((char *)&unk_1039E8B4 + v24) - *(float *)((char *)&unk_1039E8B4 + v19)) * v8 +
        *(float *)((char *)&unk_1039E8B4 + v19);
    *((float *)v20 - 1) = (*(float *)((char *)&unk_1039E8B4 + v24 + 4) -
                           *(float *)((char *)&unk_1039E8B4 + v19 + 4)) *
                              v8 +
                          *(float *)((char *)&unk_1039E8B4 + v19 + 4);
    *(float *)v20 = (*(float *)((char *)&unk_1039E8B4 + v24 + 8) -
                     *(float *)((char *)&unk_1039E8B4 + v19 + 8)) *
                        v8 +
                    *(float *)((char *)&unk_1039E8B4 + v19 + 8);
    *((float *)v20 + 2) =
        (*(float *)((char *)&flt_1039E8C4 + v24) - *(float *)((char *)&flt_1039E8C4 + v19)) * v8 +
        *(float *)((char *)&flt_1039E8C4 + v19);
    *((float *)v20 + 3) =
        (*(float *)((char *)&flt_1039E8C8 + v24) - *(float *)((char *)&flt_1039E8C4 + v19 + 4)) *
            v8 +
        *(float *)((char *)&flt_1039E8C4 + v19 + 4);
    *((float *)v20 + 4) =
        (*(float *)((char *)&flt_1039E8CC + v24) - *(float *)((char *)&flt_1039E8C4 + v19 + 8)) *
            v8 +
        *(float *)((char *)&flt_1039E8C4 + v19 + 8);
    *((float *)v20 + 6) =
        (*(float *)((char *)&unk_1039E8D4 + v24) - *(float *)((char *)&unk_1039E8D4 + v19)) * v8 +
        *(float *)((char *)&unk_1039E8D4 + v19);
    *((float *)v20 + 7) = (*(float *)((char *)&unk_1039E8D4 + v24 + 4) -
                           *(float *)((char *)&unk_1039E8D4 + v19 + 4)) *
                              v8 +
                          *(float *)((char *)&unk_1039E8D4 + v19 + 4);
    *((float *)v20 + 8) = (*(float *)((char *)&unk_1039E8D4 + v24 + 8) -
                           *(float *)((char *)&unk_1039E8D4 + v19 + 8)) *
                              v8 +
                          *(float *)((char *)&unk_1039E8D4 + v19 + 8);
    v25 = (*(float *)((char *)&flt_1039E8E4 + v24) - *(float *)((char *)&flt_1039E8E4 + v19)) * v8 +
          *(float *)((char *)&flt_1039E8E4 + v19);
    *((_DWORD *)v20 + 5) = 0;
    *((_DWORD *)v20 + 1) = 0;
    *((_DWORD *)v20 - 3) = 0;
    *((_DWORD *)v20 + 9) = 1065353216;
    *((float *)v20 + 10) = v25;
    *((float *)v20 + 11) =
        (*(float *)((char *)&flt_1039E8E8 + v24) - *(float *)((char *)&flt_1039E8E8 + v19)) * v8 +
        *(float *)((char *)&flt_1039E8E8 + v19);
    *((float *)v20 + 12) =
        (*(float *)((char *)&flt_1039E8EC + v24) - *(float *)((char *)&flt_1039E8EC + v19)) * v8 +
        *(float *)((char *)&flt_1039E8EC + v19);
    *((float *)v20 + 13) =
        (*(float *)((char *)&flt_1039E8F0 + v24) - *(float *)((char *)&flt_1039E8F0 + v19)) * v8 +
        *(float *)((char *)&flt_1039E8F0 + v19);
    *((float *)v20 + 15) =
        (*(float *)((char *)&unk_1039E8F8 + v24) - *(float *)((char *)&unk_1039E8F8 + v19)) * v8 +
        *(float *)((char *)&unk_1039E8F8 + v19);
    *((float *)v20 + 16) = (*(float *)((char *)&unk_1039E8F8 + v24 + 4) -
                            *(float *)((char *)&unk_1039E8F8 + v19 + 4)) *
                               v8 +
                           *(float *)((char *)&unk_1039E8F8 + v19 + 4);
    *((float *)v20 + 17) = (*(float *)((char *)&unk_1039E8F8 + v24 + 8) -
                            *(float *)((char *)&unk_1039E8F8 + v19 + 8)) *
                               v8 +
                           *(float *)((char *)&unk_1039E8F8 + v19 + 8);
    *((float *)v20 + 19) =
        (*(float *)((char *)&unk_1039E908 + v24) - *(float *)((char *)&unk_1039E908 + v19)) * v8 +
        *(float *)((char *)&unk_1039E908 + v19);
    *((float *)v20 + 20) = (*(float *)((char *)&unk_1039E908 + v24 + 4) -
                            *(float *)((char *)&unk_1039E908 + v19 + 4)) *
                               v8 +
                           *(float *)((char *)&unk_1039E908 + v19 + 4);
    *((float *)v20 + 21) = (*(float *)((char *)&unk_1039E908 + v24 + 8) -
                            *(float *)((char *)&unk_1039E908 + v19 + 8)) *
                               v8 +
                           *(float *)((char *)&unk_1039E908 + v19 + 8);
    *((float *)v20 + 23) =
        (*(float *)((char *)&flt_1039E918 + v24) - *(float *)((char *)&flt_1039E918 + v19)) * v8 +
        *(float *)((char *)&flt_1039E918 + v19);
    *((float *)v20 + 24) =
        (*(float *)((char *)&flt_1039E91C + v24) - *(float *)((char *)&flt_1039E918 + v19 + 4)) *
            v8 +
        *(float *)((char *)&flt_1039E918 + v19 + 4);
    *((float *)v20 + 25) =
        (*(float *)((char *)&flt_1039E920 + v24) - *(float *)((char *)&flt_1039E918 + v19 + 8)) *
            v8 +
        *(float *)((char *)&flt_1039E918 + v19 + 8);
    v26 = (*(float *)((char *)&flt_1039E928 + v24) - *(float *)((char *)&flt_1039E928 + v19)) * v8 +
          *(float *)((char *)&flt_1039E928 + v19);
    *((_DWORD *)v20 + 22) = 0;
    *((_DWORD *)v20 + 18) = 0;
    *((_DWORD *)v20 + 14) = 0;
    *((_DWORD *)v20 + 26) = 1065353216;
    *((float *)v20 + 27) = v26;
    *((float *)v20 + 28) =
        (*(float *)((char *)&flt_1039E92C + v24) - *(float *)((char *)&flt_1039E92C + v19)) * v8 +
        *(float *)((char *)&flt_1039E92C + v19);
    *((float *)v20 + 29) =
        (*(float *)((char *)&flt_1039E930 + v24) - *(float *)((char *)&flt_1039E930 + v19)) * v8 +
        *(float *)((char *)&flt_1039E930 + v19);
    *((float *)v20 + 30) =
        (*(float *)((char *)&flt_1039E934 + v24) - *(float *)((char *)&flt_1039E934 + v19)) * v8 +
        *(float *)((char *)&flt_1039E934 + v19);
    *((float *)v20 + 32) =
        (*(float *)((char *)&unk_1039E93C + v24) - *(float *)((char *)&unk_1039E93C + v19)) * v8 +
        *(float *)((char *)&unk_1039E93C + v19);
    *((float *)v20 + 33) = (*(float *)((char *)&unk_1039E93C + v24 + 4) -
                            *(float *)((char *)&unk_1039E93C + v19 + 4)) *
                               v8 +
                           *(float *)((char *)&unk_1039E93C + v19 + 4);
    *((float *)v20 + 34) = (*(float *)((char *)&unk_1039E93C + v24 + 8) -
                            *(float *)((char *)&unk_1039E93C + v19 + 8)) *
                               v8 +
                           *(float *)((char *)&unk_1039E93C + v19 + 8);
    *((float *)v20 + 36) =
        (*(float *)((char *)&flt_1039E94C + v24) - *(float *)((char *)&flt_1039E94C + v19)) * v8 +
        *(float *)((char *)&flt_1039E94C + v19);
    *((float *)v20 + 37) =
        (*(float *)((char *)&flt_1039E94C + v24 + 4) - *(float *)((char *)&flt_1039E950 + v19)) *
            v8 +
        *(float *)((char *)&flt_1039E950 + v19);
    *((float *)v20 + 38) =
        (*(float *)((char *)&flt_1039E94C + v24 + 8) - *(float *)((char *)&flt_1039E954 + v19)) *
            v8 +
        *(float *)((char *)&flt_1039E954 + v19);
    *((float *)v20 + 40) =
        (*(float *)((char *)&unk_1039E95C + v24) - *(float *)((char *)&unk_1039E95C + v19)) * v8 +
        *(float *)((char *)&unk_1039E95C + v19);
    *((float *)v20 + 41) = (*(float *)((char *)&unk_1039E95C + v24 + 4) -
                            *(float *)((char *)&unk_1039E95C + v19 + 4)) *
                               v8 +
                           *(float *)((char *)&unk_1039E95C + v19 + 4);
    v27 = (float *)((char *)&flt_1039E970 + v19);
    *((float *)v20 + 42) = (*(float *)((char *)&unk_1039E95C + v24 + 8) -
                            *(float *)((char *)&unk_1039E95C + v19 + 8)) *
                               v8 +
                           *(float *)((char *)&unk_1039E95C + v19 + 8);
    v28 = (*(float *)((char *)&flt_1039E96C + v24) - *(float *)((char *)&flt_1039E96C + v19)) * v8 +
          *(float *)((char *)&flt_1039E96C + v19);
    *((_DWORD *)v20 + 39) = 0;
    *((_DWORD *)v20 + 35) = 0;
    *((_DWORD *)v20 + 31) = 0;
    *((_DWORD *)v20 + 43) = 1065353216;
    *((float *)v20 + 44) = v28;
    *((float *)v20 + 45) =
        (*(float *)((char *)&flt_1039E970 + v24) - *(float *)((char *)&flt_1039E970 + v19)) * v8 +
        *(float *)((char *)&flt_1039E970 + v19);
    *((float *)v20 + 46) =
        (*(float *)((char *)&flt_1039E974 + v24) - *(float *)((char *)&flt_1039E970 + v19 + 4)) *
            v8 +
        *(float *)((char *)&flt_1039E970 + v19 + 4);
    *((float *)v20 + 47) =
        (*(float *)((char *)&flt_1039E978 + v24) - *(float *)((char *)&flt_1039E970 + v19 + 8)) *
            v8 +
        *(float *)((char *)&flt_1039E970 + v19 + 8);
    *((float *)v20 + 49) =
        (*(float *)((char *)&flt_1039E980 + v24) - *(float *)((char *)&flt_1039E970 + v19 + 16)) *
            v8 +
        *(float *)((char *)&flt_1039E970 + v19 + 16);
    *((float *)v20 + 50) =
        (*(float *)((char *)&flt_1039E984 + v24) - *(float *)((char *)&flt_1039E970 + v19 + 20)) *
            v8 +
        *(float *)((char *)&flt_1039E970 + v19 + 20);
    v29 = (*(float *)((char *)&flt_1039E988 + v24) - *(float *)((char *)&flt_1039E970 + v19 + 24)) *
          v8;
    v30 = (float *)((char *)&unk_1039E9F8 + v24);
    v31 = (float *)((char *)&unk_1039E9F8 + v19);
    *((float *)v20 + 51) = v29 + v27[6];
    *((float *)v20 + 53) = (*(float *)((char *)&flt_1039E990 + v24) - v27[8]) * v8 + v27[8];
    *((float *)v20 + 54) = (*(float *)((char *)&flt_1039E994 + v24) - v27[9]) * v8 + v27[9];
    *((float *)v20 + 55) = (*(float *)((char *)&flt_1039E998 + v24) - v27[10]) * v8 + v27[10];
    *((float *)v20 + 57) = (*(float *)((char *)&flt_1039E9A0 + v24) - v27[12]) * v8 + v27[12];
    *((float *)v20 + 58) = (*(float *)((char *)&flt_1039E9A4 + v24) - v27[13]) * v8 + v27[13];
    *((float *)v20 + 59) = (*(float *)((char *)&flt_1039E9A8 + v24) - v27[14]) * v8 + v27[14];
    v32 = (*(float *)((char *)&flt_1039E9B0 + v24) - v27[16]) * v8 + v27[16];
    *((_DWORD *)v20 + 56) = 0;
    *((_DWORD *)v20 + 52) = 0;
    *((_DWORD *)v20 + 48) = 0;
    *((_DWORD *)v20 + 60) = 1065353216;
    *((float *)v20 + 61) = v32;
    *((float *)v20 + 79) = (*(float *)((char *)&unk_1039E9F8 + v24) - *v31) * v8 + *v31;
    *((float *)v20 + 80) = (*(float *)((char *)&unk_1039E9F8 + v24 + 4) - v31[1]) * v8 + v31[1];
    *((float *)v20 + 81) = (*(float *)((char *)&unk_1039E9F8 + v24 + 8) - v31[2]) * v8 + v31[2];
    *((float *)v20 + 83) = (*(float *)((char *)&unk_1039E9F8 + v24 + 16) - v31[4]) * v8 + v31[4];
    *((float *)v20 + 84) = (*(float *)((char *)&unk_1039E9F8 + v24 + 20) - v31[5]) * v8 + v31[5];
    *((float *)v20 + 85) = (*(float *)((char *)&unk_1039E9F8 + v24 + 24) - v31[6]) * v8 + v31[6];
    *((float *)v20 + 87) = (*(float *)((char *)&unk_1039E9F8 + v24 + 32) - v31[8]) * v8 + v31[8];
    v33 = *(float *)((char *)&unk_1039E9F8 + v24 + 36) - v31[9];
    j += 11112;
    v17 = dword_100B36FC;
    ++v37;
    *((float *)v20 + 88) = v33 * v8 + v31[9];
    *((float *)v20 + 89) = (v30[10] - v31[10]) * v8 + v31[10];
    *((float *)v20 + 91) = (v30[12] - v31[12]) * v8 + v31[12];
    *((float *)v20 + 92) = (v30[13] - v31[13]) * v8 + v31[13];
    *((float *)v20 + 93) = (v30[14] - v31[14]) * v8 + v31[14];
    v34 = (v30[16] - v31[16]) * v8 + v31[16];
    *((_DWORD *)v20 + 90) = 0;
    *((_DWORD *)v20 + 86) = 0;
    *((_DWORD *)v20 + 82) = 0;
    *((_DWORD *)v20 + 94) = 1065353216;
    v9 = dword_104AFD14;
    *((float *)v20 + 95) = v34;
  }
  qmemcpy(&unk_104ADC98, (char *)&unk_103C77E8 + 188656 * v9, 0x58u);
  dword_104ADCF0 = dword_103C7840[47164 * v9];
  qmemcpy(&unk_104ADCF4, &word_103C7844[94328 * v9], 0x2008u);
  sub_10014A30(5);
  ++dword_104AFD08;
  return 1;
}
// 10015D4D: variable 'v3' is possibly undefined
// 10015D4D: variable 'v4' is possibly undefined
// 100A66EC: using guessed type int gInterpolate;
// 100B36F8: using guessed type int dword_100B36F8;
// 100B36FC: using guessed type int dword_100B36FC;
// 1039B728: using guessed type int dword_1039B728[];
// 1039B72C: using guessed type int dword_1039B72C;
// 1039B730: using guessed type int dword_1039B730;
// 1039B734: using guessed type int dword_1039B734;
// 1039B738: using guessed type int dword_1039B738;
// 1039B73C: using guessed type float flt_1039B73C;
// 1039B75C: using guessed type int dword_1039B75C;
// 1039B760: using guessed type int dword_1039B760[];
// 1039C168: using guessed type float flt_1039C168[];
// 1039C16C: using guessed type float flt_1039C16C;
// 1039C170: using guessed type float flt_1039C170;
// 1039C178: using guessed type float flt_1039C178;
// 1039C17C: using guessed type float flt_1039C17C;
// 1039C180: using guessed type float flt_1039C180;
// 1039C188: using guessed type float flt_1039C188;
// 1039C18C: using guessed type float flt_1039C18C;
// 1039C190: using guessed type float flt_1039C190;
// 1039C198: using guessed type float flt_1039C198;
// 1039C19C: using guessed type float flt_1039C19C;
// 1039C1A0: using guessed type float flt_1039C1A0;
// 1039C1D8: using guessed type float flt_1039C1D8;
// 1039C1DC: using guessed type float flt_1039C1DC;
// 1039C1E0: using guessed type float flt_1039C1E0;
// 1039C218: using guessed type float flt_1039C218;
// 1039C21C: using guessed type float flt_1039C21C;
// 1039C220: using guessed type float flt_1039C220;
// 1039C258: using guessed type float flt_1039C258;
// 1039C25C: using guessed type float flt_1039C25C;
// 1039C260: using guessed type float flt_1039C260;
// 1039C298: using guessed type float flt_1039C298;
// 1039C29C: using guessed type float flt_1039C29C;
// 1039C2A0: using guessed type float flt_1039C2A0;
// 1039E89C: using guessed type int dword_1039E89C;
// 1039E8A0: using guessed type int dword_1039E8A0;
// 1039E8A4: using guessed type float flt_1039E8A4;
// 1039E8A8: using guessed type float flt_1039E8A8;
// 1039E8AC: using guessed type float flt_1039E8AC;
// 1039E8C4: using guessed type float flt_1039E8C4;
// 1039E8C8: using guessed type float flt_1039E8C8;
// 1039E8CC: using guessed type float flt_1039E8CC;
// 1039E8E4: using guessed type float flt_1039E8E4;
// 1039E8E8: using guessed type float flt_1039E8E8;
// 1039E8EC: using guessed type float flt_1039E8EC;
// 1039E8F0: using guessed type float flt_1039E8F0;
// 1039E918: using guessed type float flt_1039E918;
// 1039E91C: using guessed type float flt_1039E91C;
// 1039E920: using guessed type float flt_1039E920;
// 1039E928: using guessed type float flt_1039E928;
// 1039E92C: using guessed type float flt_1039E92C;
// 1039E930: using guessed type float flt_1039E930;
// 1039E934: using guessed type float flt_1039E934;
// 1039E94C: using guessed type float flt_1039E94C;
// 1039E950: using guessed type float flt_1039E950;
// 1039E954: using guessed type float flt_1039E954;
// 1039E96C: using guessed type float flt_1039E96C;
// 1039E970: using guessed type float flt_1039E970;
// 1039E974: using guessed type float flt_1039E974;
// 1039E978: using guessed type float flt_1039E978;
// 1039E980: using guessed type float flt_1039E980;
// 1039E984: using guessed type float flt_1039E984;
// 1039E988: using guessed type float flt_1039E988;
// 1039E990: using guessed type float flt_1039E990;
// 1039E994: using guessed type float flt_1039E994;
// 1039E998: using guessed type float flt_1039E998;
// 1039E9A0: using guessed type float flt_1039E9A0;
// 1039E9A4: using guessed type float flt_1039E9A4;
// 1039E9A8: using guessed type float flt_1039E9A8;
// 1039E9B0: using guessed type float flt_1039E9B0;
// 103C7840: using guessed type int dword_103C7840[];
// 104ADCF0: using guessed type int dword_104ADCF0;
// 104AFD04: using guessed type int dword_104AFD04;
// 104AFD08: using guessed type int dword_104AFD08;
// 104AFD0C: using guessed type int dword_104AFD0C;
// 104AFD14: using guessed type int dword_104AFD14;
// 104AFD18: using guessed type int dword_104AFD18;

//----- (10016910) --------------------------------------------------------
int *sub_10016910() {
  int *result; // eax

  result = (int *)dword_104AFD1C;
  if (!dword_104AFD1C) {
    dword_1039B728[0] = 0;
    dword_104AFD14 = -1;
    dword_1039B72C = 0;
    dword_1039B75C = -1;
    dword_1039B730 = 0;
    dword_104AFD00 = -1;
    dword_1039B734 = 0;
    dword_104AFD04 = -1;
    dword_104AFD18 = -1;
    dword_100A66E8 = 1;
    flt_1039B73C = 0.0;
    dword_104AFD0C = 0;
    dword_104AFD08 = 0;
    result = dword_1039B760;
    dword_1039B738 = 0;
    do {
      *result = 0;
      result += 47164;
    } while ((int)result < (int)&unk_10481C10);
    dword_104AFD1C = 1;
  }
  return result;
}
// 100A66E8: using guessed type int dword_100A66E8;
// 1039B728: using guessed type int dword_1039B728[];
// 1039B72C: using guessed type int dword_1039B72C;
// 1039B730: using guessed type int dword_1039B730;
// 1039B734: using guessed type int dword_1039B734;
// 1039B738: using guessed type int dword_1039B738;
// 1039B73C: using guessed type float flt_1039B73C;
// 1039B75C: using guessed type int dword_1039B75C;
// 1039B760: using guessed type int dword_1039B760[];
// 104AFD00: using guessed type int dword_104AFD00;
// 104AFD04: using guessed type int dword_104AFD04;
// 104AFD08: using guessed type int dword_104AFD08;
// 104AFD0C: using guessed type int dword_104AFD0C;
// 104AFD14: using guessed type int dword_104AFD14;
// 104AFD18: using guessed type int dword_104AFD18;
// 104AFD1C: using guessed type int dword_104AFD1C;

//----- (10016990) --------------------------------------------------------
int sub_10016990() {
  int result; // eax

  result = dword_104AFD1C;
  if (dword_104AFD1C)
    dword_104AFD1C = 0;
  return result;
}
// 104AFD1C: using guessed type int dword_104AFD1C;

//----- (100169B0) --------------------------------------------------------
int sub_100169B0() {
  int result;      // eax
  unsigned int v1; // ebx
  int v2;          // ecx
  int *v3;         // edi
  int *v4;         // edx
  int v5;          // ecx

  result = -1;
  v1 = -1;
  v2 = 0;
  v3 = dword_1039B760;
  v4 = dword_1039B728;
  do {
    if (!*v4 && v2 != dword_104AFD00 && v1 >= *v3) {
      result = v2;
      v1 = *v3;
    }
    ++v4;
    ++v2;
    v3 += 47164;
  } while ((int)v4 < (int)&flt_1039B73C);
  if (dword_104AFD00 < 0)
    v5 = 0;
  else
    v5 = dword_1039B760[47164 * dword_104AFD00];
  dword_104AFD18 = dword_104AFD04;
  dword_104AFD04 = dword_104AFD00;
  dword_104AFD00 = result;
  dword_1039B760[47164 * result] = v5 + 1;
  return result;
}
// 1039B728: using guessed type int dword_1039B728[];
// 1039B73C: using guessed type float flt_1039B73C;
// 1039B760: using guessed type int dword_1039B760[];
// 104AFD00: using guessed type int dword_104AFD00;
// 104AFD04: using guessed type int dword_104AFD04;
// 104AFD18: using guessed type int dword_104AFD18;

//----- (10016A50) --------------------------------------------------------
int sub_10016A50() {
  return dword_104AFD08;
}
// 104AFD08: using guessed type int dword_104AFD08;

//----- (10016A60) --------------------------------------------------------
int *__cdecl sub_10016A60(int a1, int a2, int a3, int a4, int a5) {
  unsigned int *v5; // eax
  _DWORD *v6;       // eax
  int *result;      // eax

  v5 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  v5[1] = 1;
  *v5 = a1 & 0xFFFFFF | 0xDC000000;
  v6 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = -234872830;
  v6[1] = ((a4 << 14) - 0x2000) & 0xFFF000 | (4 * (_WORD)a5 - 2) & 0xFFF;
  result = (int *)dword_106C0680;
  dword_106C0680 += 8;
  *result = ((4 * (a3 + a5)) >> 2) & 0xFFF |
            (((4 * ((unsigned __int16)a2 + (unsigned __int16)a4)) & 0x3FFC | 0x38C000) >> 2 << 12);
  result[1] = ((4 * a3) >> 2) & 0xFFF | ((((4 * a2) >> 2) & 0xFFF) << 12);
  return result;
}
// 106C0680: using guessed type int dword_106C0680;

//----- (10016B40) --------------------------------------------------------
char __cdecl sub_10016B40(int a1) {
  _DWORD *v1;        // eax
  char *v2;          // edi
  int v3;            // ecx
  int v4;            // esi
  int v5;            // ebp
  _DWORD *v6;        // eax
  _DWORD *v7;        // eax
  _DWORD *v8;        // eax
  _DWORD *v9;        // eax
  _DWORD *v10;       // eax
  char v11;          // al
  __int64 v12;       // rax
  unsigned int *v13; // eax
  char v14;          // al
  char *v15;         // esi
  double v16;        // st7
  int v17;           // ebp
  double v18;        // st6
  long double v19;   // st6
  _DWORD *v20;       // eax
  _DWORD *v21;       // eax
  _DWORD *v22;       // eax
  _DWORD *v23;       // eax
  _DWORD *v24;       // eax
  _DWORD *v25;       // eax
  _DWORD *v26;       // eax
  _DWORD *v27;       // eax
  unsigned int *v29; // [esp-3Ch] [ebp-60h]
  unsigned int *v30; // [esp-3Ch] [ebp-60h]
  float v31;         // [esp+0h] [ebp-24h]
  float v32;         // [esp+4h] [ebp-20h]
  int v33;           // [esp+18h] [ebp-Ch]
  int v34;           // [esp+18h] [ebp-Ch]
  float v35;         // [esp+18h] [ebp-Ch]
  int v36;           // [esp+1Ch] [ebp-8h]
  float v37;         // [esp+1Ch] [ebp-8h]
  int v38;           // [esp+20h] [ebp-4h]
  float v39;         // [esp+20h] [ebp-4h]
  int v40;           // [esp+28h] [ebp+4h]
  float v41;         // [esp+28h] [ebp+4h]

  LOBYTE(v1) = dword_100BD3F4;
  if (dword_100BD3F4 && !dword_1022AF1C) {
    v32 = (float)g_Height1;
    v31 = (float)g_Width1;
    v2 = &byte_100C12A0[0x15F88 * *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 16)];
    sub_1003407D(v31, v32);
    v3 = *(_DWORD *)&gUnk06594.gap1C8[8640];
    v4 = gWidth - v2[228] - 16;
    v33 = v4;
    v5 = *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 4) +
         *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 12) - v2[229] - 4;
    if (*(float *)(dword_106C2CF8 + 3688) < 0.0)
      v38 = 0;
    else
      v38 = *(_DWORD *)(dword_106C2CF8 + 3696) + 1;
    if (dword_100AA8B4 == 1) {
      v29 = (unsigned int *)dword_106C0680;
      dword_106C0680 += 8;
      sub_1002F900(v29, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1003);
      v6 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v6 = -1191181539;
      v6[1] = 202916416;
      v7 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v7 = -1191181539;
      v7[1] = 202977400;
      v8 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v8 = -1241513984;
      v8[1] = 1;
      v9 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v9 = -570425344;
      v9[1] = 1065353216;
      v10 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v10 = -553648128;
      v10[1] = -1082130432;
      v11 = v2[219];
      if (v11 == 1 || v11 == 2) {
        if (dword_106909B4)
          v36 = 64;
        else
          v36 = sub_1003BD50() & 0x7F;
        v12 = (__int64)(((double)v36 + *(float *)(dword_106C2CF8 + 3620) - 1000.0) * 0.00014285714 *
                            (double)(v2[234] + 1) -
                        0.5);
        if ((int)v12 >= 0) {
          if ((int)v12 > 15)
              LODWORD(v12) = 15;
        } else {
          LODWORD(v12) = 0;
        }
        sub_10016A60(*(_DWORD *)(a1 + 4 * (20 - v12)), v4, v5, v2[228], v2[229]);
      } else {
        sub_10016A60(*(_DWORD *)(a1 + 20), v4, v5, v2[228], v2[229]);
      }
      if (v38 != dword_100A73A8[*(_DWORD *)&gUnk06594.gap1C8[8640]]) {
        v13 = (unsigned int *)dword_106C0680;
        dword_106C0680 += 8;
        *v13 = *(_DWORD *)(a1 + 84) & 0xFFFFFF | 0xDD000000;
        v13[1] = (unsigned int)&v2[v38 * *((_DWORD *)v2 + 63) + 1280];
        dword_100A73A8[*(_DWORD *)&gUnk06594.gap1C8[8640]] = v38;
      }
      sub_10016A60(*(_DWORD *)(a1 + 84), v4 + v2[230], v5 + v2[231], v2[232], v2[233]);
      v3 = *(_DWORD *)&gUnk06594.gap1C8[8640];
    }
    if (dword_106909B4) {
      v40 = 64;
    } else {
      v14 = sub_1003BD50();
      v3 = *(_DWORD *)&gUnk06594.gap1C8[8640];
      v40 = v14 & 0x7F;
    }
    LOBYTE(v1) = v2[219];
    v39 = (double)v40 + *(float *)(dword_106C2CF8 + 3620);
    if (!(_BYTE)v1) {
      v15 = (char *)&unk_104AFD20 + 128 * (v3 + 2 * *(_DWORD *)&gUnk06594.gap1C8[12452]);
      if (dword_100AA8B4 == 2) {
        v16 = 5.0;
        v41 = 15.0;
        v34 = 3 * v2[234] / 4 + v33;
        v17 = 3 * v2[235] / 4 + v5;
      } else {
        v16 = 7.0;
        v41 = 20.0;
        v34 = v2[234] + v33;
        v17 = v2[235] + v5;
      }
      v18 = *((float *)v2 + 60);
      if (v39 > 0.0)
        v18 = v18 - (*((float *)v2 + 60) - *((float *)v2 + 59)) * v39 * 0.00012500001;
      v35 = (float)v34;
      v37 = (float)(gHeight - v17);
      *(float *)v15 = (float)(__int16)(__int64)(cos(v18 - 0.050000001) * v41 + v35);
      *((_DWORD *)v15 + 2) = 0;
      *((float *)v15 + 1) = (float)(__int16)(__int64)(sin(v18 - 0.050000001) * v41 + v37);
      *((float *)v15 + 8) = (float)(__int16)(__int64)(cos(v18 - -0.050000001) * v41 + v35);
      *((_DWORD *)v15 + 10) = 0;
      *((float *)v15 + 9) = (float)(__int16)(__int64)(sin(v18 - -0.050000001) * v41 + v37);
      *((float *)v15 + 16) = (float)(__int16)(__int64)(cos(v18 - -0.30000001) * v16 + v35);
      *((float *)v15 + 17) = (float)(__int16)(__int64)(sin(v18 - -0.30000001) * v16 + v37);
      *((_DWORD *)v15 + 18) = 0;
      v19 = v18 - 0.30000001;
      *((float *)v15 + 24) = (float)(__int16)(__int64)(cos(v19) * v16 + v35);
      *((_DWORD *)v15 + 26) = 0;
      *((_DWORD *)v15 + 5) = 0;
      *((_DWORD *)v15 + 6) = 1132396544;
      *((_DWORD *)v15 + 7) = 0;
      *((float *)v15 + 25) = (float)(__int16)(__int64)(sin(v19) * v16 + v37);
      *((_DWORD *)v15 + 13) = 0;
      *((_DWORD *)v15 + 14) = 1132396544;
      *((_DWORD *)v15 + 15) = 0;
      *((_DWORD *)v15 + 21) = 0;
      *((_DWORD *)v15 + 22) = 1132396544;
      *((_DWORD *)v15 + 23) = 0;
      *((_DWORD *)v15 + 29) = 0;
      *((_DWORD *)v15 + 30) = 1132396544;
      *((_DWORD *)v15 + 31) = 0;
      v20 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v20 = -419430400;
      v20[1] = 0;
      v21 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v21 = -1174399998;
      v21[1] = 0;
      v30 = (unsigned int *)dword_106C0680;
      dword_106C0680 += 8;
      sub_1002F900(v30, 0, 0, 0, 1004, 0, 0, 0, 1004, 0, 0, 0, 1004, 0, 0, 0, 1004);
      v22 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v22 = -1191181539;
      v22[1] = 5578824;
      v23 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v23 = -1241513984;
      v23[1] = 208896;
      v24 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v24 = -1224736768;
      v24[1] = 4;
      v25 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v25 = 67113087;
      v25[1] = v15;
      v26 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v26 = -1325399806;
      v26[1] = 515;
      v27 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v27 = -1224736768;
      v27[1] = 1;
      v1 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v1 = -419430400;
      v1[1] = 0;
    }
  }
  return (char)v1;
}
// 100A73A8: using guessed type int dword_100A73A8[];
// 100A81C0: using guessed type int gWidth;
// 100A81C4: using guessed type int gHeight;
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100BD3F4: using guessed type int dword_100BD3F4;
// 1022AF1C: using guessed type int dword_1022AF1C;
// 106909B4: using guessed type int dword_106909B4;
// 106C0680: using guessed type int dword_106C0680;
// 106C0684: using guessed type int g_Width1;
// 106C299C: using guessed type int g_Height1;
// 106C2CF8: using guessed type int dword_106C2CF8;

//----- (100171F0) --------------------------------------------------------
_DWORD *__cdecl sub_100171F0(int a1, int a2, float a3, int a4, int a5) {
  __int64 v5;      // rax
  char Buffer[32]; // [esp+0h] [ebp-20h] BYREF

  v5 = (__int64)(a3 * 100.0);
  sprintf(Buffer,
          "%s%d:%02d.%02d",
          (const char *)a2,
          (int)v5 / 100 / 60,
          (int)v5 / 100 % 60,
          (_DWORD)v5 + 20 * (4 * ((int)v5 / -100) - (int)v5 / 100));
  text_10019300(Buffer, a4, a5 + 15);
  return text_10019300((char *)a1, a4, a5);
}

//----- (10017290) --------------------------------------------------------
_DWORD *__cdecl sub_10017290(int a1) {
  _DWORD *result; // eax
  int v2;         // ebx
  int v3;         // esi
  int v4;         // edi
  LPCSTR v5;      // eax
  LPCSTR v6;      // eax
  LPCSTR v7;      // eax
  LPCSTR v8;      // eax
  float v9;       // [esp-Ch] [ebp-18h]
  float v10;      // [esp-Ch] [ebp-18h]
  float v11;      // [esp-Ch] [ebp-18h]
  float v12;      // [esp-Ch] [ebp-18h]
  int v13;        // [esp-8h] [ebp-14h]
  int v14;        // [esp-4h] [ebp-10h]

  result = (_DWORD *)dword_100BD3EC;
  if (dword_100BD3EC) {
    v2 = gWidth - 16;
    v3 = dword_100AA8B4 != 1 ? 0 : 30;
    v4 = *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 4) + 20;
    sub_10019260();
    Set_byte_104B035C_To1();
    sub_100192F0(15);
    result = (_DWORD *)gGameMode;
    switch (gGameMode) {
    case GAME_MODE_0:
    case GAME_MODE_1:
    case GAME_MODE_2:
    case GAME_MODE_6:
      if (dword_100AA8B4 == 1) {
        v9 = *(float *)(dword_106C2CF8 + 4076);
        v5 = GetStringWithIndex(0xE7u);
        sub_100171F0((int)v5, (int)aWw, v9, v2, v4);
      }
      if (*(_DWORD *)(dword_106C2CF8 + 4008) < dword_100BD3E0) {
        v14 = v4 + v3;
        v13 = v2;
        v11 = *(float *)(dword_106C2CF8 + 4016);
        goto LABEL_11;
      }
      v10 = *(float *)(dword_106C2CF8 + 4068);
      v6 = GetStringWithIndex(0xE8u);
      result = sub_100171F0((int)v6, (int)aWw, v10, v2, v4 + v3);
      break;
    case GAME_MODE_3:
      if (dword_100AA8B4 == 1) {
        v12 = *(float *)(dword_106C2CF8 + 4068);
        v7 = GetStringWithIndex(0xE8u);
        sub_100171F0((int)v7, (int)aWw, v12, v2, v4);
      }
      v14 = v4 + v3;
      v13 = v2;
      v11 = *(float *)(dword_106C2CF8 + 4016);
    LABEL_11:
      v8 = GetStringWithIndex(0xE9u);
      result = sub_100171F0((int)v8, (int)aWw, v11, v13, v14);
      break;
    default:
      return result;
    }
  }
  return result;
}
// 100A81C0: using guessed type int gWidth;
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100BD3EC: using guessed type int dword_100BD3EC;
// 106C2CF8: using guessed type int dword_106C2CF8;

//----- (100173F0) --------------------------------------------------------
void __cdecl sub_100173F0(_DWORD *a1) {
  int v1;           // esi
  int v2;           // edx
  int v3;           // ecx
  int v4;           // edi
  const char *v5;   // eax
  const char *v6;   // eax
  int v7;           // esi
  int v8;           // edi
  int v9;           // ebx
  char *v10;        // ebp
  int v11;          // [esp+10h] [ebp-104h]
  int v12;          // [esp+10h] [ebp-104h]
  char Buffer[256]; // [esp+14h] [ebp-100h] BYREF

  if (gGameMode != GAME_MODE_3) {
    v1 = *a1 + 16;
    if (dword_100BD3E8) {
      v2 = dword_100BD3E0;
      v3 = *(_DWORD *)(dword_106C2CF8 + 4008);
      if (v3 < dword_100BD3E0 || dword_100AA8B4 == 1) {
        v4 = a1[22 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 1] + 5;
        if (v3 >= dword_100BD3E0) {
          v6 = GetStringWithIndex(0xE6u);
          sprintf(Buffer, v6);
        } else {
          if (dword_100AA8B4 == 2) {
              v5 = asc_100A73D4;
          } else {
              v5 = GetStringWithIndex(0xE5u);
              v2 = dword_100BD3E0;
          }
          sprintf(Buffer, "%%y1%s%d/%d", v5, *(_DWORD *)(dword_106C2CF8 + 4008) + 1, v2);
        }
        sub_10019260();
        Set_byte_104B035C_To0();
        sub_100192F0(15);
        text_10019300(Buffer, v1, v4 + 15);
      }
    }
    if (dword_100BD3F8 && !dword_1022AF1C) {
      v7 = v1 - 2;
      v8 = a1[22 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 1] +
           a1[22 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 3] - 12;
      sub_10019240();
      Set_byte_104B035C_To0();
      sub_100192A0(255, 240, 125, 255, 120, 0);
      sprintf(Buffer, "%d", *(_DWORD *)(dword_106C2CF8 + 4088) + 1);
      v9 = 0;
      if (*(_DWORD *)(dword_106C2CF8 + 4088)) {
        if (*(_DWORD *)(dword_106C2CF8 + 4088) == 1) {
          v10 = (char *)GetStringWithIndex(0xB4u);
          v9 = 1;
        } else if (*(_DWORD *)(dword_106C2CF8 + 4088) == 2) {
          v10 = (char *)GetStringWithIndex(0xB5u);
        } else {
          v10 = (char *)GetStringWithIndex(0xB6u);
          v9 = 1;
        }
      } else {
        v10 = (char *)GetStringWithIndex(0xB3u);
        v9 = -3;
      }
      if (dword_100AA8B4 == 1) {
        sub_100192F0(40);
        v11 = sub_100193C0(Buffer, 40);
        text_10019300(Buffer, v7 - 1, v8 - 1);
        sub_100192F0(20);
        text_10019300(v10, v9 + v11 + v7 + 3, v8 - 15);
      } else {
        sub_100192F0(26);
        v12 = sub_100193C0(Buffer, 26);
        text_10019300(Buffer, v7, v8);
        sub_100192F0(13);
        text_10019300(v10, v12 + 2 * v9 / 3 + v7 + 3, v8 - 10);
      }
      sub_10019250();
    }
  }
}
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100BD3E8: using guessed type int dword_100BD3E8;
// 100BD3F8: using guessed type int dword_100BD3F8;
// 1022AF1C: using guessed type int dword_1022AF1C;
// 106C2CF8: using guessed type int dword_106C2CF8;

//----- (10017690) --------------------------------------------------------
_DWORD *__cdecl sub_10017690(int a1) {
  _DWORD *result; // eax
  int v2;         // ebx
  int v3;         // ebp
  _DWORD *v4;     // ecx
  int v5;         // esi
  int v6;         // edi

  result = (_DWORD *)sub_1002B2A0();
  if (!result) {
    if (dword_100AA8B4 == 1) {
      v2 = 30;
      v3 = 20;
    } else {
      v2 = 20;
      v3 = 15;
    }
    v4 = (_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]);
    v5 = *v4 + v4[2] / 2;
    v6 = v4[1] + v4[3] / 3 + 24;
    Set_byte_104B035C_To2();
    result = (_DWORD *)dword_104B0338;
    if (dword_104B0338) {
      sub_100192F0(v3);
      result = text_10019300((char *)dword_104B0338, v5, v6 + 3 * v2 / 16);
    }
  }
  return result;
}
// 100AA8B4: using guessed type int dword_100AA8B4;
// 104B0338: using guessed type int dword_104B0338;

//----- (10017740) --------------------------------------------------------
void sub_10017740() {
  double v0; // st7

  if (*(float *)&dword_104B033C != 0.0) {
    v0 = *(float *)&dword_104B033C - *(float *)&dword_106C2CFC;
    *(float *)&dword_104B033C = v0;
    if (v0 <= 0.0) {
      dword_104B033C = 0;
      dword_104B0338 = 0;
    }
  }
}
// 104B0338: using guessed type int dword_104B0338;
// 104B033C: using guessed type int dword_104B033C;
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (10017790) --------------------------------------------------------
_DWORD *__cdecl sub_10017790(int a1) {
  _DWORD *result; // eax
  int v2;         // ebx
  int v3;         // ebp
  _DWORD *v4;     // ecx
  int v5;         // esi
  int v6;         // edi

  result = (_DWORD *)dword_106909B4;
  if (!dword_106909B4) {
    result = (_DWORD *)sub_1002B2A0();
    if (!result) {
      if (dword_100AA8B4 == 1) {
        v2 = 30;
        v3 = 20;
      } else {
        v2 = 20;
        v3 = 15;
      }
      v4 = (_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]);
      v5 = *v4 + v4[2] / 2;
      v6 = v4[3] / 3 + v4[1];
      Set_byte_104B035C_To2();
      result = (_DWORD *)dword_106C2CF8;
      if (*(_DWORD *)(dword_106C2CF8 + 4092)) {
        sub_100192F0(v2);
        result = text_10019300(*(char **)(dword_106C2CF8 + 4092), v5, v6 + v2 / 4);
      } else if (*(_DWORD *)(dword_106C2CF8 + 4100)) {
        sub_100192F0(v3);
        result = text_10019300(*(char **)(dword_106C2CF8 + 4100), v5, v6 + 3 * v2 / 16);
      }
    }
  }
  return result;
}
// 100AA8B4: using guessed type int dword_100AA8B4;
// 106909B4: using guessed type int dword_106909B4;
// 106C2CF8: using guessed type int dword_106C2CF8;

//----- (10017890) --------------------------------------------------------
int __cdecl sub_10017890(_DWORD *a1, int a2) {
  int result;       // eax
  int v3;           // edi
  int v4;           // ebp
  float v5;         // ebx
  int v6;           // esi
  int v7;           // ebp
  int v8;           // edi
  int v9;           // eax
  int v10;          // eax
  char *v11;        // eax
  int v12;          // eax
  char *v13;        // eax
  int v14;          // [esp-10h] [ebp-128h]
  const char *v15;  // [esp-Ch] [ebp-124h]
  int v16;          // [esp-8h] [ebp-120h]
  int v17;          // [esp+Ch] [ebp-10Ch]
  int v18;          // [esp+10h] [ebp-108h]
  int v19;          // [esp+14h] [ebp-104h]
  char Buffer[256]; // [esp+18h] [ebp-100h] BYREF

  result = dword_100BD3FC;
  if (dword_100BD3FC) {
    sub_100192F0(15);
    Set_byte_104B035C_To0();
    result = gNetworkPlay;
    v3 = *a1 + 16;
    v4 = a1[1] + 29;
    v17 = v3;
    v19 = v4;
    if (gNetworkPlay) {
      result = dword_100B36FC;
      if (dword_100B36FC) {
        v5 = 0.0;
        if (dword_100B36FC > 0) {
          do {
              v6 = a2 + 11112 * LODWORD(v5);
              if (*(_DWORD *)(v6 + 3848)) {
                  v18 = atomic_sub_10005F40(*(_DWORD *)(v6 + 324));
                  if (v18) {
                      sprintf(Buffer, "%%11%d.", *(_DWORD *)(v6 + 4088) + 1);
                  } else {
                      if (v5 == 0.0) {
                          v16 = *(_DWORD *)(a2 + 4088) + 1;
                          v15 = aY1D;
                      } else {
                          v16 = *(_DWORD *)(v6 + 4088) + 1;
                          v15 = aRyD;
                      }
                      sprintf(Buffer, v15, v16);
                  }
                  text_10019300(Buffer, v3, 16 * *(_DWORD *)(v6 + 4088) + v4 + 20);
                  if (dword_118ABDC8) {
                      v7 = 32;
                      v8 = 32;
                      if (gNetworkPlay > 1) {
                          v9 = sub_100714D0(*(_DWORD *)(v6 + 324)) & 0x3F;
                          if (v9 >= 3) {
                              if (v9 == 3)
                                  v8 = (sub_10071510(*(_DWORD *)(v6 + 324)) & 0x3F) != 3 ? 42 : 32;
                          } else {
                              v7 = 42;
                              v8 = 42;
                          }
                      }
                      if (v18) {
                          v10 = atomic_sub_10005F90(*(_DWORD *)(v6 + 324));
                          sprintf(
                              Buffer, "%%11%s %dms %c%c", (const char *)(v6 + 328), v10, v8, v7);
                      } else if ((*(_BYTE *)(*(_DWORD *)(v6 + 3840) + 104) & 1) != 0 ||
                                 dword_106909E0) {
                          v12 = atomic_sub_10005F90(*(_DWORD *)(v6 + 324));
                          sprintf(Buffer,
                                  "%%x%02x%02x%02x%s %dms %c%c",
                                  *(unsigned __int8 *)(v6 + 10668),
                                  *(unsigned __int8 *)(v6 + 10669),
                                  *(unsigned __int8 *)(v6 + 10670),
                                  (const char *)(v6 + 328),
                                  v12,
                                  v8,
                                  v7);
                      } else {
                          v14 = atomic_sub_10005F90(*(_DWORD *)(v6 + 324));
                          v11 = sub_10017C80(a2, v5);
                          sprintf(Buffer,
                                  "%%x%02x%02x%02x%s %s %dms %c%c",
                                  *(unsigned __int8 *)(v6 + 10668),
                                  *(unsigned __int8 *)(v6 + 10669),
                                  *(unsigned __int8 *)(v6 + 10670),
                                  (const char *)(v6 + 328),
                                  v11,
                                  v14,
                                  v8,
                                  v7);
                      }
                      text_10019300(Buffer, v17 + 16, 16 * *(_DWORD *)(v6 + 4088) + v19 + 20);
                      v4 = v19;
                      v3 = v17;
                  } else {
                      if (v18) {
                          sprintf(Buffer, "%%11%s", (const char *)(v6 + 328));
                      } else if ((*(_BYTE *)(*(_DWORD *)(v6 + 3840) + 104) & 1) != 0 ||
                                 dword_106909E0) {
                          sprintf(Buffer,
                                  "%%x%02x%02x%02x%s",
                                  *(unsigned __int8 *)(v6 + 10668),
                                  *(unsigned __int8 *)(v6 + 10669),
                                  *(unsigned __int8 *)(v6 + 10670),
                                  (const char *)(v6 + 328));
                      } else {
                          v13 = sub_10017C80(a2, v5);
                          sprintf(Buffer,
                                  "%%x%02x%02x%02x%s %s",
                                  *(unsigned __int8 *)(v6 + 10668),
                                  *(unsigned __int8 *)(v6 + 10669),
                                  *(unsigned __int8 *)(v6 + 10670),
                                  (const char *)(v6 + 328),
                                  v13);
                      }
                      text_10019300(Buffer, v3 + 16, 16 * *(_DWORD *)(v6 + 4088) + v4 + 20);
                  }
              } else {
                  sprintf(Buffer, "%%55%d.", *(_DWORD *)(v6 + 4088) + 1);
                  text_10019300(Buffer, v3, 16 * *(_DWORD *)(v6 + 4088) + v4 + 20);
                  sprintf(Buffer, "%%55%s", (const char *)(v6 + 328));
                  text_10019300(Buffer, v3 + 16, 16 * *(_DWORD *)(v6 + 4088) + v4 + 20);
              }
              result = dword_100B36FC;
              ++LODWORD(v5);
          } while (SLODWORD(v5) < dword_100B36FC);
        }
      }
    }
  }
  return result;
}
// 100B36FC: using guessed type int dword_100B36FC;
// 100BD3FC: using guessed type int dword_100BD3FC;
// 1022AF18: using guessed type int gNetworkPlay;
// 106909E0: using guessed type int dword_106909E0;
// 118ABDC8: using guessed type int dword_118ABDC8;

//----- (10017C80) --------------------------------------------------------
char *__cdecl sub_10017C80(int a1, float a2) {
  double v2; // st7
  float v4;  // [esp+8h] [ebp+8h]

  v2 = sub_10017CD0(a1, SLODWORD(a2));
  if (v2 <= 0.0) {
    byte_104AFF20 = 0;
  } else {
    byte_104AFF20 = 43;
    v4 = v2;
    CreateMinuteSecondsString(byte_104AFF21, v4);
  }
  return &byte_104AFF20;
}
// 104AFF20: using guessed type char byte_104AFF20;

//----- (10017CD0) --------------------------------------------------------
double __cdecl sub_10017CD0(int a1, int a2) {
  double result; // st7
  int v3;        // esi
  int *v4;       // edx
  int v5;        // ebx
  double v6;     // st6

  result = 0.0;
  v3 = 255;
  if (dword_100B36FC > 0) {
    v4 = (int *)(a1 + 4088);
    v5 = dword_100B36FC;
    do {
      if (v3 > *v4) {
        v3 = *v4;
        result = *((float *)v4 - 1) - *(float *)(a1 + 11112 * a2 + 4084);
      }
      v4 += 2778;
      --v5;
    } while (v5);
  }
  if (result != 0.0) {
    v6 = *(float *)(a1 + 11112 * a2 + 4144) * 0.44642857;
    if (v6 == 0.0) {
      result = 1000.0;
    } else {
      if (v6 < 25.0)
        v6 = 25.0;
      result = result / v6;
    }
  }
  return result;
}
// 100B36FC: using guessed type int dword_100B36FC;

//----- (10017D90) --------------------------------------------------------
_DWORD *__cdecl sub_10017D90(int a1) {
  double v1;      // st7
  _DWORD *result; // eax
  int v3;         // esi
  int v4;         // edi
  int v5;         // edi
  char *v6;       // eax
  char *v7;       // eax
  float v8;       // [esp+10h] [ebp-4h]

  v8 = *(float *)(dword_106C2CF8 + 4144);
  sub_1003289F(0,
               *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 4),
               gWidth,
               *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 12));
  if (v8 < 0.0)
    v8 = 0.0;
  sub_10016B40(a1);
  sub_10017290(a1);
  sub_10017F30(a1);
  sub_100173F0((_DWORD *)a1);
  sub_10017790(a1);
  sub_10019260();
  Set_byte_104B035C_To1();
  if (dword_100ADF60)
    v1 = v8 * 0.62137121;
  else
    v1 = v8;
  sprintf(byte_104B0320, "%%yw%.0f", v1);
  result = (_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]);
  if (!dword_1022AF1C && dword_100BD3F4) {
    v3 = gWidth - 46;
    v4 = *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 12) + result[1] - 4 -
         MEMORY[0x100C1385][89992 * result[4]];
    sub_100192F0(20);
    v5 = v4 - 3;
    if (dword_100ADF60)
      text_10019300(byte_104B0320, v3, v5);
    else
      text_10019300(byte_104B0320, v3 - 3, v5);
    sub_100192F0(15);
    Set_byte_104B035C_To0();
    if (dword_100ADF60) {
      v6 = (char *)GetStringWithIndex(0xEBu);
      result = text_10019300(v6, v3, v5);
    } else {
      v7 = (char *)GetStringWithIndex(0xECu);
      result = text_10019300(v7, v3 - 3, v5);
    }
  }
  return result;
}
// 100A81C0: using guessed type int gWidth;
// 100ADF60: using guessed type int dword_100ADF60;
// 100BD3F4: using guessed type int dword_100BD3F4;
// 1022AF1C: using guessed type int dword_1022AF1C;
// 106C2CF8: using guessed type int dword_106C2CF8;

//----- (10017F30) --------------------------------------------------------
int __cdecl sub_10017F30(int a1) {
  int result; // eax
  int v2;     // ebp
  int v3;     // esi
  int v4;     // ebx
  int v5;     // ecx
  int v6;     // edi
  int v7;     // ebx
  int v8;     // esi

  result = dword_100BD3F0;
  if (dword_100BD3F0) {
    v2 = gWidth - 16;
    v3 = dword_100AA8B4 != 1 ? 0 : 30;
    v4 = *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 4) + 20;
    sub_10019260();
    Set_byte_104B035C_To1();
    sub_100192F0(15);
    v5 = dword_106C2CF8;
    result = 0;
    if (*(int *)(dword_106C2CF8 + 4008) > 0) {
      v6 = 4020;
      v7 = v3 + v4 + 37;
      do {
        v8 = result + 1;
        text_10017FE0((int)aWw, result + 1, *(float *)(v5 + v6), v2, v7);
        v5 = dword_106C2CF8;
        result = v8;
        v6 += 4;
        v7 += 15;
      } while (v8 < *(_DWORD *)(dword_106C2CF8 + 4008));
    }
  }
  return result;
}
// 100A81C0: using guessed type int gWidth;
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100BD3F0: using guessed type int dword_100BD3F0;
// 106C2CF8: using guessed type int dword_106C2CF8;

//----- (10017FE0) --------------------------------------------------------
_DWORD *__cdecl text_10017FE0(int a1, int a2, float a3, int a4, int a5) {
  __int64 v5;      // rax
  char Buffer[32]; // [esp+0h] [ebp-20h] BYREF

  v5 = (__int64)(a3 * 100.0);
  sprintf(Buffer,
          "%s%d. %d:%02d.%02d",
          (const char *)a1,
          a2,
          (int)v5 / 100 / 60,
          (int)v5 / 100 % 60,
          (_DWORD)v5 + 20 * (4 * ((int)v5 / -100) - (int)v5 / 100));
  return text_10019300(Buffer, a4, a5);
}

//----- (10018070) --------------------------------------------------------
BOOL sub_10018070() {
  return *(_DWORD *)&gUnk06594.gap1C8[12500] || *(_DWORD *)&gUnk06594.gap1C8[12504] ||
         *(_DWORD *)&gUnk06594.gap1C8[12508] || !*(_DWORD *)gUnk06594.gap4918 ||
         dword_100B4050 == 2;
}
// 100B4050: using guessed type int dword_100B4050;

//----- (100180B0) --------------------------------------------------------
_DWORD *__cdecl sub_100180B0(int a1) {
  _DWORD *v1;           // eax
  _DWORD *v2;           // eax
  _DWORD *v3;           // eax
  _DWORD *result;       // eax
  char *v5;             // edi
  _DWORD *v6;           // eax
  _DWORD *v7;           // eax
  _DWORD *v8;           // eax
  _DWORD *v9;           // eax
  _DWORD *v10;          // eax
  unsigned __int16 v11; // dx
  _DWORD *v12;          // eax
  _DWORD *v13;          // eax
  _DWORD *v14;          // eax
  _DWORD *v15;          // eax
  _DWORD *v16;          // eax
  _DWORD *v17;          // eax
  _DWORD *v18;          // eax
  _DWORD *v19;          // eax
  _DWORD *v20;          // eax
  _DWORD *v21;          // eax
  _DWORD *v22;          // eax
  _DWORD *v23;          // eax
  _DWORD *v24;          // eax
  _DWORD *v25;          // eax
  _DWORD *v26;          // eax
  _DWORD *v27;          // eax
  _DWORD *v28;          // eax
  unsigned int *v29;    // [esp-40h] [ebp-4Ch]
  int v30;              // [esp+0h] [ebp-Ch]

  v1 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v1 = -1140849660;
  v1[1] = 1;
  v2 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v2 = -1140847612;
  v2[1] = 1;
  v3 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v3 = -1140845564;
  v3[1] = 0xFFFF;
  result = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *result = -1140843516;
  result[1] = 0xFFFF;
  if (!*(_DWORD *)&gUnk06594.gap1C8[12480]) {
    if (sub_10018070()) {
      if (dword_100A79CC > 0 && (dword_100A79CC & 1) != 0)
        result = sub_10031688(*(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]),
                              *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 4),
                              *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 8),
                              *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 12),
                              (3 * ((unsigned __int8)byte_106C0260 + 80)) >> 2,
                              (3 * (unsigned __int8)byte_106C1614 + 248) >> 2,
                              (3 * ((unsigned __int8)byte_106C0200 + 85)) >> 2);
      else
        result = sub_10031688(*(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640]),
                              *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 4),
                              *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 8),
                              *(_DWORD *)(a1 + 88 * *(_DWORD *)&gUnk06594.gap1C8[8640] + 12),
                              (unsigned __int8)byte_106C0260,
                              (unsigned __int8)byte_106C1614,
                              (unsigned __int8)byte_106C0200);
    } else {
      *(float *)&v30 = *(float *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 56) * 0.99000001;
      sub_10031140(&flt_106C0860,
                   *(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 48),
                   *(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[12104] + 52),
                   v30);
      v5 = sub_10069490();
      sub_100307A0(&flt_106C0860, v5);
      v6 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v6 = 16973888;
      v6[1] = dword_106C32D0;
      v7 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v7 = 17039424;
      v7[1] = v5;
      v8 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v8 = -419430400;
      v8[1] = 0;
      v9 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v9 = -1174399998;
      v9[1] = 0;
      v29 = (unsigned int *)dword_106C0680;
      dword_106C0680 += 8;
      if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
        sub_1002F900(v29, 0, 0, 0, 1001, 0, 0, 0, 1004, 0, 0, 0, 1001, 0, 0, 0, 1004);
        v10 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v10 = -83886080;
        HIBYTE(v11) = byte_106C0260;
        LOBYTE(v11) = byte_106C1614;
        v10[1] =
            (unsigned __int8)byte_10690BE8 | (((unsigned __int8)byte_106C0200 | (v11 << 8)) << 8);
      } else {
        sub_1002F900(v29, 0, 0, 0, 1001, 0, 0, 0, 1004, 0, 0, 0, 1001, 0, 0, 0, 1004);
      }
      v12 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v12 = -1191181539;
      v12[1] = 252330496;
      v13 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v13 = -1174402046;
      v13[1] = dword_106C0258;
      v14 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v14 = -1241513984;
      v14[1] = 983557;
      if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
        v15 = (_DWORD *)dword_106C0680;
        dword_106C0680 += 8;
        *v15 = -1224736768;
        v15[1] = 0x10000;
      }
      v16 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v16 = -1224736768;
      v16[1] = dword_106C1174 != dword_106C3364 ? 4096 : 0x2000;
      v17 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v17 = -1241513984;
      v17[1] = dword_106C1174 != dword_106C3364 ? 0x2000 : 4096;
      v18 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v18 = -1174401023;
      v18[1] = 0;
      v19 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v19 = -1157627903;
      v19[1] = -1;
      v20 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v20 = -1241513984;
      v20[1] = 786432;
      v21 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v21 = -402653184;
      v21[1] = 0;
      v22 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v22 = -183500800;
      v22[1] = 117440512;
      v23 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v23 = -184548880;
      v23[1] = 100663296;
      v24 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v24 = -184549120;
      v24[1] = 83886080;
      v25 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v25 = 100663296;
      v25[1] = *(_DWORD *)gUnk06594.gap4918;
      v26 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v26 = -419430400;
      v26[1] = 0;
      v27 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v27 = -1174399998;
      v27[1] = 0;
      v28 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v28 = -1224736768;
      v28[1] = 131589;
      result = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *result = -1124073472;
      result[1] = 0;
    }
  }
  return result;
}
// 100A79CC: using guessed type int dword_100A79CC;
// 10690BE8: using guessed type char byte_10690BE8;
// 106C0200: using guessed type char byte_106C0200;
// 106C0258: using guessed type int dword_106C0258;
// 106C0260: using guessed type char byte_106C0260;
// 106C0680: using guessed type int dword_106C0680;
// 106C0860: using guessed type float flt_106C0860;
// 106C1174: using guessed type int dword_106C1174;
// 106C1614: using guessed type char byte_106C1614;
// 106C32D0: using guessed type int dword_106C32D0;
// 106C3364: using guessed type int dword_106C3364;

//----- (10018590) --------------------------------------------------------
_DWORD *__cdecl text_10018590(char *message) {
  int messageX;      // ebp
  int v2;            // ebx
  void *v3;          // esi
  void *v4;          // edi
  _DWORD *v5;        // eax
  _DWORD *v6;        // eax
  unsigned int *v7;  // ecx
  _DWORD *v8;        // eax
  _DWORD *v9;        // eax
  _DWORD *v10;       // eax
  _DWORD *v11;       // eax
  _DWORD *v12;       // eax
  _DWORD *v13;       // eax
  _DWORD *v14;       // eax
  _DWORD *v15;       // eax
  _DWORD *v16;       // eax
  _DWORD *v17;       // eax
  _DWORD *v18;       // eax
  void *v19;         // ecx
  _DWORD *v20;       // eax
  _DWORD *v21;       // eax
  _DWORD *v22;       // eax
  _DWORD *v23;       // eax
  int v24;           // ecx
  _DWORD *v25;       // eax
  int v26;           // ecx
  _DWORD *v27;       // eax
  _DWORD *v28;       // eax
  _DWORD *v29;       // eax
  char *v30;         // esi
  const char *v31;   // edi
  char v32;          // al
  int v33;           // edx
  unsigned int *v34; // eax
  int v35;           // ecx
  int v36;           // edi
  int v37;           // edx
  _DWORD *v38;       // eax
  _DWORD *v39;       // eax
  _DWORD *v40;       // eax
  int v41;           // eax
  __int16 v42;       // si
  int *v43;          // eax
  __int16 v44;       // dx
  unsigned int *v45; // edx
  int v46;           // eax
  int v47;           // ecx
  __int16 v48;       // cx
  int v49;           // eax
  int v50;           // eax
  char v51;          // al
  _DWORD *v52;       // eax
  _DWORD *v53;       // eax
  _DWORD *result;    // eax
  _DWORD *v55;       // eax
  bool v56;          // cc
  _DWORD *v57;       // eax
  int v58;           // edx
  _DWORD *v59;       // eax
  _DWORD *v60;       // eax
  _DWORD *v61;       // eax
  _DWORD *v62;       // eax
  _DWORD *v63;       // eax
  _DWORD *v64;       // eax
  _DWORD *v65;       // eax
  _DWORD *v66;       // eax
  _DWORD *v67;       // eax
  _DWORD *v68;       // eax
  _DWORD *v69;       // eax
  _DWORD *v70;       // eax
  _DWORD *v71;       // eax
  _DWORD *v72;       // eax
  _DWORD *v73;       // eax
  _DWORD *v74;       // eax
  _DWORD *v75;       // eax
  _DWORD *v76;       // eax
  _DWORD *v77;       // eax
  _DWORD *v78;       // eax
  _DWORD *v79;       // eax
  _DWORD *v80;       // eax
  _DWORD *v81;       // eax
  int v82;           // [esp+10h] [ebp-20h]
  unsigned int v83;  // [esp+14h] [ebp-1Ch] BYREF
  unsigned int v84;  // [esp+18h] [ebp-18h] BYREF
  int v85;           // [esp+1Ch] [ebp-14h] BYREF
  int v86;           // [esp+20h] [ebp-10h]
  char *v87;         // [esp+24h] [ebp-Ch]
  int *v88;          // [esp+28h] [ebp-8h]
  int *v89;          // [esp+2Ch] [ebp-4h]

  messageX = gMessageX;
  v82 = dword_104B0348;
  v86 = gMessageY - 30 * dword_104B0348 / 40;
  if (*(_DWORD *)&gUnk06594.gap1C8[12444]) {
    messageX = 2 * gMessageX;
    v86 = 2 * (gMessageY - 30 * dword_104B0348 / 40);
    v82 = 2 * dword_104B0348;
  }
  if (dword_100B8C90 > 1 || v82 < 25) {
    v2 = 20;
    v88 = dword_100A6150;
    v3 = &unk_100A7738;
    v4 = &unk_100A7878;
    v89 = dword_11829158;
  } else {
    v2 = 40;
    v88 = dword_100A6070;
    v3 = &unk_100A74B8;
    v4 = &unk_100A75F8;
    v89 = dword_11829238;
  }
  v5 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v5 = -419430400;
  v5[1] = 0;
  v6 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = -1174399998;
  v6[1] = 0x100000;
  v7 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  if (byte_104B0360)
    sub_1002F900(v7, 1003, 1005, 1002, 1005, 0, 0, 0, 1001, 1000, 1001, 1002, 0, 0, 0, 0, 1002);
  else
    sub_1002F900(v7, 1003, 1005, 1002, 1005, 0, 0, 0, 1001, 1000, 0, 1002, 0, 0, 0, 0, 1002);
  v8 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v8 = -1191181539;
  v8[1] = 202916416;
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = -1174402046;
  v9[1] = dword_106C0258;
  v10 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = -1174401534;
  v10[1] = 0;
  v11 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v11 = -1174400255;
  v11[1] = 0;
  v12 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v12 = -1174401023;
  v12[1] = 0;
  v13 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v13 = -1157627903;
  v13[1] = -1;
  v14 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v14 = -402653184;
  v14[1] = 0;
  v15 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v15 = -436207616;
  v15[1] = 0;
  v16 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v16 = -419430400;
  v16[1] = 0;
  v17 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v17 = -183500368;
  v17[1] = 117440512;
  v18 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v18 = -49283072;
  v19 = v4;
  if (!byte_104B0360)
    v19 = v3;
  v18[1] = v19;
  v20 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v20 = -218103808;
  v20[1] = 118747136;
  v21 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v21 = -177732688;
  v21[1] = 17399856;
  v22 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v22 = -234872830;
  v22[1] = 16900254;
  if (dword_104B0364) {
    v23 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v23 = -83886080;
    v24 = ((unsigned __int8)dword_100A74B0 |
           (((unsigned __int8)dword_100A74AC | (dword_100A74A8 << 8)) << 8))
          << 8;
    LOBYTE(v24) = -1;
    v23[1] = v24;
    v25 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v25 = -100597761;
    v26 = ((unsigned __int8)dword_104B0370 |
           (((unsigned __int8)dword_104B036C | (dword_104B0368 << 8)) << 8))
          << 8;
    LOBYTE(v26) = -1;
    v25[1] = v26;
  } else {
    v27 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    if (byte_104B0358) {
      *v27 = -83886080;
      v27[1] = -8453889;
      v28 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v28 = -100597761;
      v28[1] = -32769;
    } else {
      *v27 = -83886080;
      v27[1] = -939523841;
      v29 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v29 = -100597761;
      v29[1] = -421134081;
    }
  }
  v30 = message;
  if (*message) {
    v31 = message + 2;
    v87 = message + 2;
    do {
      if (*v30 == 32) {
        messageX += 14 * v82 / 40 + 1;
      } else {
        if (*v30 != 37)
          goto LABEL_24;
        v32 = v30[1];
        switch (v32) {
        case 0:
          goto LABEL_24;
        case 37:
          ++v30;
          ++v31;
          message = v30;
          v87 = (char *)v31;
        LABEL_24:
          if (*v30 >= 33) {
              v33 = byte_100A5FEF[*v30];
              v34 = (unsigned int *)dword_106C0680;
              v35 = v88[v33 + 1] - v88[v33] + 1;
              dword_106C0680 += 8;
              v36 = v35 - 1;
              v37 = v89[v33];
              v34[1] = 1;
              *v34 = v37 & 0xFFFFFF | 0xDC000000;
              v38 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v38 = -570425344;
              v38[1] = 1065353216;
              v39 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v39 = -553648128;
              v39[1] = -1082130432;
              v40 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v40 = -234872830;
              v40[1] = ((v35 << 14) - 0x2000) & 0xFFF000 | (4 * (_WORD)v2 - 2) & 0xFFF;
              v41 = v35 * v82 / v2;
              if (messageX < 0 || (v42 = v41 + messageX, v41 + messageX > 320) || v86 < 0 ||
                  v86 + v82 > 240) {
                  v45 = (unsigned int *)dword_106C0680;
                  v46 = (4 * (messageX + v41)) >> 2;
                  dword_106C0680 += 8;
                  if ((__int16)v46 <= 0)
                      LOWORD(v46) = 0;
                  v47 = (4 * (v82 + v86)) >> 2;
                  if ((__int16)v47 <= 0)
                      LOWORD(v47) = 0;
                  *v45 = v47 & 0xFFF | ((v46 & 0xFFF | 0xFFFE3000) << 12);
                  if ((__int16)((4 * messageX) >> 2) <= 0)
                      v48 = 0;
                  else
                      v48 = (4 * messageX) >> 2;
                  v49 = (4 * v86) >> 2;
                  if ((__int16)v49 <= 0)
                      LOWORD(v49) = 0;
                  v45[1] = ((v48 & 0xFFF) << 12) | v49 & 0xFFF;
              } else {
                  v43 = (int *)dword_106C0680;
                  dword_106C0680 += 8;
                  v44 = v86;
                  *v43 = ((4 * (v86 + v82)) >> 2) & 0xFFF |
                         (((4 * v42) & 0x3FFC | 0x38C000) >> 2 << 12);
                  v43[1] = ((4 * (v44 & 0xFFF)) >> 2) | ((4 * (messageX & 0xFFF)) >> 2 << 12);
              }
              v30 = message;
              v50 = v36 * v82 / v2;
              v31 = v87;
              messageX += v50;
          }
          break;
        case 105:
          ++v30;
          ++v31;
          break;
        case 110:
          ++v30;
          ++v31;
          break;
        case 120:
          sscanf(v31, "%02x%02x%02x", &v85, &v83, &v84);
          v55 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v55 = -100597761;
          v55[1] =
              (((unsigned __int8)v84 | (((unsigned __int8)v83 | (v85 << 8)) << 8)) << 8) | 0xFF;
          v83 += 128;
          v56 = (unsigned int)(v85 + 128) <= 0xFF;
          v85 += 128;
          v84 += 128;
          if (!v56)
              v85 = 255;
          if (v83 > 0xFF)
              v83 = 255;
          if (v84 > 0xFF)
              v84 = 255;
          v30 += 7;
          v57 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v57 = -83886080;
          v58 = ((unsigned __int8)v84 | (((unsigned __int8)v83 | (v85 << 8)) << 8)) << 8;
          LOBYTE(v58) = -1;
          v31 += 7;
          v57[1] = v58;
          break;
        default:
          if (*v31) {
              v59 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v59 = -419430400;
              v59[1] = 0;
              switch (v30[1]) {
              case '0':
                  v70 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v70 = -100597761;
                  v70[1] = 255;
                  break;
              case '1':
              case 'w':
                  v68 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v68 = -100597761;
                  v68[1] = -1;
                  break;
              case '5':
                  v69 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v69 = -100597761;
                  v69[1] = -2139062017;
                  break;
              case 'O':
                  v62 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v62 = -100597761;
                  v62[1] = -8912641;
                  break;
              case 'Y':
                  v64 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v64 = -100597761;
                  v64[1] = -360193;
                  break;
              case 'b':
                  v66 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v66 = -100597761;
                  v66[1] = 51455;
                  break;
              case 'g':
                  v65 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v65 = -100597761;
                  v65[1] = 9830655;
                  break;
              case 'o':
                  v61 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v61 = -100597761;
                  v61[1] = -849411841;
                  break;
              case 'p':
                  v67 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v67 = -100597761;
                  v67[1] = -939472641;
                  break;
              case 'r':
                  v60 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v60 = -100597761;
                  v60[1] = -1107296001;
                  break;
              case 'y':
                  v63 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v63 = -100597761;
                  v63[1] = -720641;
                  break;
              default:
                  break;
              }
              switch (*v31) {
              case '0':
                  v81 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  *v81 = -83886080;
                  v81[1] = 255;
                  goto LABEL_81;
              case '1':
              case 'w':
                  v30 += 2;
                  v79 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v79 = -83886080;
                  v79[1] = -1;
                  break;
              case '5':
                  v30 += 2;
                  v80 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v80 = -83886080;
                  v80[1] = -2139062017;
                  break;
              case 'O':
                  v30 += 2;
                  v73 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v73 = -83886080;
                  v73[1] = -8912641;
                  break;
              case 'Y':
                  v30 += 2;
                  v75 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v75 = -83886080;
                  v75[1] = -758617601;
                  break;
              case 'b':
                  v30 += 2;
                  v77 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v77 = -83886080;
                  v77[1] = 51455;
                  break;
              case 'g':
                  v30 += 2;
                  v76 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v76 = -83886080;
                  v76[1] = 9830655;
                  break;
              case 'o':
                  v30 += 2;
                  v72 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v72 = -83886080;
                  v72[1] = -849411841;
                  break;
              case 'p':
                  v30 += 2;
                  v78 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v78 = -83886080;
                  v78[1] = -939472641;
                  break;
              case 'r':
                  v30 += 2;
                  v71 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v71 = -83886080;
                  v71[1] = -939523841;
                  break;
              case 'y':
                  v30 += 2;
                  v74 = (_DWORD *)dword_106C0680;
                  dword_106C0680 += 8;
                  v31 += 2;
                  *v74 = -83886080;
                  v74[1] = -759299841;
                  break;
              default:
              LABEL_81:
                  v30 += 2;
                  v31 += 2;
                  break;
              }
              break;
          }
          goto LABEL_24;
        }
      }
      v51 = *++v30;
      ++v31;
      message = v30;
      v87 = (char *)v31;
    } while (v51);
  }
  v52 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v52 = -419430400;
  v52[1] = 0;
  v53 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v53 = -1174400255;
  v53[1] = 0x80000;
  result = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *result = -1174399998;
  result[1] = 0;
  return result;
}
// 100A6070: using guessed type int dword_100A6070[];
// 100A6150: using guessed type int dword_100A6150[];
// 100A74A8: using guessed type int dword_100A74A8;
// 100A74AC: using guessed type int dword_100A74AC;
// 100A74B0: using guessed type int dword_100A74B0;
// 100B8C90: using guessed type int dword_100B8C90;
// 104B0340: using guessed type int gMessageX;
// 104B0344: using guessed type int gMessageY;
// 104B0348: using guessed type int dword_104B0348;
// 104B0358: using guessed type char byte_104B0358;
// 104B0360: using guessed type char byte_104B0360;
// 104B0364: using guessed type int dword_104B0364;
// 104B0368: using guessed type int dword_104B0368;
// 104B036C: using guessed type int dword_104B036C;
// 104B0370: using guessed type int dword_104B0370;
// 106C0258: using guessed type int dword_106C0258;
// 106C0680: using guessed type int dword_106C0680;
// 11829158: using guessed type int dword_11829158[];
// 11829238: using guessed type int dword_11829238[];

//----- (10019240) --------------------------------------------------------
void sub_10019240() {
  byte_104B0360 = 1;
}
// 104B0360: using guessed type char byte_104B0360;

//----- (10019250) --------------------------------------------------------
void sub_10019250() {
  byte_104B0360 = 0;
}
// 104B0360: using guessed type char byte_104B0360;

//----- (10019260) --------------------------------------------------------
void sub_10019260() {
  byte_104B0358 = 0;
}
// 104B0358: using guessed type char byte_104B0358;

//----- (10019270) --------------------------------------------------------
void Set_byte_104B035C_To2() {
  byte_104B035C = 2;
}
// 104B035C: using guessed type char byte_104B035C;

//----- (10019280) --------------------------------------------------------
void Set_byte_104B035C_To0() {
  byte_104B035C = 0;
}
// 104B035C: using guessed type char byte_104B035C;

//----- (10019290) --------------------------------------------------------
void Set_byte_104B035C_To1() {
  byte_104B035C = 1;
}
// 104B035C: using guessed type char byte_104B035C;

//----- (100192A0) --------------------------------------------------------
int __cdecl sub_100192A0(int a1, int a2, int a3, int a4, int a5, int a6) {
  int result; // eax

  dword_100A74A8 = a1;
  result = a4;
  dword_100A74AC = a2;
  dword_100A74B0 = a3;
  dword_104B0364 = 1;
  dword_104B0368 = a4;
  dword_104B036C = a5;
  dword_104B0370 = a6;
  return result;
}
// 100A74A8: using guessed type int dword_100A74A8;
// 100A74AC: using guessed type int dword_100A74AC;
// 100A74B0: using guessed type int dword_100A74B0;
// 104B0364: using guessed type int dword_104B0364;
// 104B0368: using guessed type int dword_104B0368;
// 104B036C: using guessed type int dword_104B036C;
// 104B0370: using guessed type int dword_104B0370;

//----- (100192F0) --------------------------------------------------------
int __cdecl sub_100192F0(int a1) {
  int result; // eax

  result = a1;
  dword_104B0348 = a1;
  return result;
}
// 104B0348: using guessed type int dword_104B0348;

//----- (10019300) --------------------------------------------------------
_DWORD *__cdecl text_10019300(char *text, int x, int y) {
  _DWORD *v3; // eax

  v3 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v3 = -1241513984;
  v3[1] = 1;
  if (byte_104B035C) {
    if (byte_104B035C == 1) {
      gMessageX = x - sub_100193C0(text, dword_104B0348);
      gMessageY = y;
      return text_10018590(text);
    }
    if (byte_104B035C == 2) {
      gMessageX = x - (sub_100193C0(text, dword_104B0348) >> 1);
      gMessageY = y;
      return text_10018590(text);
    }
  } else {
    gMessageX = x;
  }
  gMessageY = y;
  return text_10018590(text);
}
// 104B0340: using guessed type int gMessageX;
// 104B0344: using guessed type int gMessageY;
// 104B0348: using guessed type int dword_104B0348;
// 104B035C: using guessed type char byte_104B035C;
// 106C0680: using guessed type int dword_106C0680;

//----- (100193C0) --------------------------------------------------------
int __cdecl sub_100193C0(char *a1, int a2) {
  int v2;   // ebp
  int v3;   // edi
  int *v4;  // ebx
  char *v5; // esi
  char i;   // al
  char v7;  // cl
  int v9;   // [esp+18h] [ebp+8h]

  v2 = 0;
  v3 = a2;
  if (*(_DWORD *)&gUnk06594.gap1C8[12444])
    v3 = 2 * a2;
  if (dword_100B8C90 > 1 || v3 < 25) {
    v9 = 20;
    v4 = dword_100A6150;
  } else {
    v9 = 40;
    v4 = dword_100A6070;
  }
  v5 = a1;
  for (i = *a1; i; i = *++v5) {
    if (i < 33) {
      v2 += 14 * v3 / 40;
      continue;
    }
    if (i == 37) {
      v7 = v5[1];
      if (v7) {
        if (v7 == 37) {
          ++v5;
        } else {
          if (v7 == 105 || v7 == 110) {
              ++v5;
              continue;
          }
          if (v5[2]) {
              v5 += 2;
              continue;
          }
        }
      }
    }
    v2 += v3 * (v4[byte_100A5FEF[i] + 1] - v4[byte_100A5FEF[i]]) / v9;
  }
  if (*(_DWORD *)&gUnk06594.gap1C8[12444])
    v2 >>= 1;
  return v2;
}
// 100A6070: using guessed type int dword_100A6070[];
// 100A6150: using guessed type int dword_100A6150[];
// 100B8C90: using guessed type int dword_100B8C90;

//----- (10019490) --------------------------------------------------------
int sub_10019490() {
  _WORD *v0;  // ebx
  _WORD *v1;  // esi
  int v2;     // edi
  int result; // eax

  dword_104B2550 = 512;
  v0 = &unk_104B2574;
  do {
    v1 = v0;
    v2 = 512;
    do {
      *(v1 - 2) = sub_1003BD50();
      *(v1 - 1) = sub_1003BD50();
      result = sub_1003BD50();
      *v1 = result;
      v1 += 3;
      --v2;
    } while (v2);
    v0 += 1566;
  } while ((int)v0 < (int)&unk_104B3DEC);
  return result;
}
// 104B2550: using guessed type int dword_104B2550;

//----- (100194E0) --------------------------------------------------------
int __thiscall meth_100194E0(void *this) {
  double v2;  // st7
  char v3;    // c0
  double v4;  // st7
  double v5;  // st7
  int result; // eax

  *(float *)&dword_104BBE0C = ((double)(unsigned __int16)sub_1003BD50() * 0.000030518044 - 1.0) *
                                  *(float *)&dword_106C2CFC +
                              *(float *)&dword_104BBE0C;
  v2 = *(float *)&dword_104BBE0C;
  if (v3) {
    if (v2 >= 0.0)
      goto LABEL_6;
    v4 = *(float *)&dword_104BBE0C - -6.2831855;
  } else {
    v4 = v2 - 6.2831855;
  }
  *(float *)&dword_104BBE0C = v4;
LABEL_6:
  v5 = ((double)(unsigned __int16)sub_1003BD50() * 0.000030518044 - 1.0) *
           *(float *)&dword_106C2CFC +
       flt_100A79C8;
  flt_100A79C8 = v5;
  if (v5 <= 1.0) {
    if (flt_100A79C8 < 0.5)
      flt_100A79C8 = 0.5;
  } else {
    flt_100A79C8 = 1.0;
  }
  result = dword_104BBE0C;
  dword_104B2568 = 0;
  flt_104B2560 = cos(*(float *)&dword_104BBE0C) * flt_100A79C8 * *(float *)&dword_106C2CFC;
  flt_104B2564 = sin(*(float *)&dword_104BBE0C) * flt_100A79C8 * *(float *)&dword_106C2CFC;
  return result;
}
// 10019522: variable 'v3' is possibly undefined
// 100A79C8: using guessed type float flt_100A79C8;
// 104B2560: using guessed type float flt_104B2560;
// 104B2564: using guessed type float flt_104B2564;
// 104B2568: using guessed type int dword_104B2568;
// 104BBE0C: using guessed type int dword_104BBE0C;
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (10019620) --------------------------------------------------------
void __thiscall meth_10019620(void *this) {
  int v1; // [esp+0h] [ebp-4h]

  if (dword_100A79CC < 0) {
    if ((unsigned __int16)sub_1003BD50() < 0x80u) {
      flt_104B255C = 0.0;
      dword_100A79CC = 3;
      flt_104B0378 = (float)(sub_1003BD50() & 0x7FF);
      v1 = sub_1003BD50() & 0x7FF;
      dword_104B0380 = *(_DWORD *)&gUnk06594.gap1C8[18232];
      flt_104B037C = (float)v1;
    }
  } else {
    flt_104B255C = flt_104B255C - *(float *)&dword_106C2CFC * -343.0;
    if (dword_100A79CC <= 0) {
      if (flt_104B255C > 2048.0)
        dword_100A79CC = -1;
    } else {
      --dword_100A79CC;
    }
  }
}
// 100A79CC: using guessed type int dword_100A79CC;
// 104B0378: using guessed type float flt_104B0378;
// 104B037C: using guessed type float flt_104B037C;
// 104B0380: using guessed type int dword_104B0380;
// 104B255C: using guessed type float flt_104B255C;
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (100196D0) --------------------------------------------------------
int __thiscall meth_100196D0(void *this) {
  void *v1;        // ecx
  int v2;          // esi
  int result;      // eax
  int v4;          // ecx
  double v5;       // st6
  double v6;       // st5
  double v7;       // st7
  long double v8;  // st7
  long double v9;  // st4
  long double v10; // st5
  double v11;      // st7
  int v12;         // edx
  int v13;         // eax
  int v14;         // ebx
  int v15;         // edi
  int v16;         // ebp
  _WORD *v17;      // esi
  bool v18;        // cc
  float v19;       // [esp+0h] [ebp-60h]
  float v20;       // [esp+14h] [ebp-4Ch]
  float v21;       // [esp+14h] [ebp-4Ch]
  int v22;         // [esp+14h] [ebp-4Ch]
  float v23;       // [esp+18h] [ebp-48h]
  int v24;         // [esp+18h] [ebp-48h]
  float v25;       // [esp+1Ch] [ebp-44h]
  int v26;         // [esp+1Ch] [ebp-44h]
  _WORD *v27;      // [esp+20h] [ebp-40h]
  int *v28;        // [esp+24h] [ebp-3Ch]
  float v29;       // [esp+28h] [ebp-38h]
  int v30;         // [esp+28h] [ebp-38h]
  float v31;       // [esp+2Ch] [ebp-34h]
  float v32;       // [esp+30h] [ebp-30h]
  int v33;         // [esp+34h] [ebp-2Ch]
  int v34;         // [esp+38h] [ebp-28h]
  int v35;         // [esp+44h] [ebp-1Ch]
  int v36;         // [esp+48h] [ebp-18h] BYREF
  int v37;         // [esp+4Ch] [ebp-14h]
  int v38;         // [esp+50h] [ebp-10h]
  int v39[3];      // [esp+54h] [ebp-Ch] BYREF

  meth_100194E0(this);
  v2 = 0;
  if (MEMORY[0x106C6624])
    meth_10019620(v1);
  result = 512 / dword_100AA8B4;
  v33 = 0;
  dword_104B2550 = 512 / dword_100AA8B4;
  if (dword_100AA8B4 > 0) {
    v28 = dword_10AD05DC;
    v27 = &unk_104B2572;
    v34 = 0;
    do {
      sub_1003AFE0((int)&v36, *v28 + 48, *v28, 3.0);
      if (!dword_104BBE14) {
        sub_10019490();
        dword_104B0688 = v36;
        dword_104B068C = v37;
        dword_104B0690 = v38;
        dword_104B0694 = v36;
        dword_104B0698 = v37;
        dword_104B069C = v38;
        dword_104BBE14 = 1;
      }
      v4 = MEMORY[0x106C6620];
      if (!MEMORY[0x106C6620]) {
        result = MEMORY[0x106C6624];
        if (!MEMORY[0x106C6624])
          break;
      }
      v5 = *(float *)&v37 - *(float *)((char *)&dword_104B068C + v2);
      v6 = *(float *)&v36 - *(float *)((char *)&dword_104B0688 + v2);
      v7 = *(float *)&v38 - *(float *)((char *)&dword_104B0690 + v2);
      v23 = v6;
      v25 = v5;
      v20 = v7;
      v8 = sqrt(v6 * v23 + v5 * v25 + v7 * v20) / *(float *)&dword_106C2CFC;
      flt_104BBDE8 = v8;
      if (v8 <= 0.27777779) {
        flt_104B1F00 = 1.0;
      } else {
        v9 = sqrt(flt_104BBDE8 * 3.5999999) * 0.27777779 / flt_104BBDE8;
        flt_104B1F00 = v9;
        flt_104BBDE8 = v9 * flt_104BBDE8;
        v23 = v23 * flt_104B1F00;
        v25 = v25 * flt_104B1F00;
        v20 = v20 * flt_104B1F00;
      }
      if (MEMORY[0x106C6620]) {
        v21 = v20 - *(float *)&dword_106C2CFC * -0.5;
      } else {
        *(float *)v39 = v23;
        *(float *)&v39[1] = v25;
        *(float *)&v39[2] = v20;
        v29 = *(float *)&dword_106C2CFC + *(float *)&dword_106C2CFC;
        v10 = sin(*(float *)&dword_104BBE0C) * flt_100A79C8 * *(float *)&dword_106C2CFC;
        v11 = flt_104B1F00 * 0.5;
        *(float *)((char *)&unk_104BBDF0 + v2) =
            cos(*(float *)&dword_104BBE0C) * flt_100A79C8 * *(float *)&dword_106C2CFC;
        *(float *)((char *)&flt_104BBDF4 + v2) = v10;
        *(float *)((char *)&flt_104BBDF8 + v2) = v29;
        v19 = v11;
        v23 = v23 + *(float *)((char *)&unk_104BBDF0 + v2);
        v25 = v25 + *(float *)((char *)&flt_104BBDF4 + v2);
        v21 = v20 + v29;
        sub_1003AD10((int)v39, v19);
        sub_1003AF70((float *)((char *)&unk_104BBDF0 + v2), (float *)v39);
        v4 = MEMORY[0x106C6620];
      }
      if (v4) {
        v31 = ((double)(unsigned __int16)sub_1003BD50() * 0.000030518044 - 1.0) *
              *(float *)&dword_106C2CFC * 0.25;
        v32 = ((double)(unsigned __int16)sub_1003BD50() * 0.000030518044 - 1.0) *
              *(float *)&dword_106C2CFC * 0.25;
      } else {
        v32 = 0.0;
        v31 = 0.0;
      }
      v12 = v37;
      v13 = v38;
      *(int *)((char *)&dword_104B0688 + v2) = v36;
      *(int *)((char *)&dword_104B068C + v2) = v12;
      *(int *)((char *)&dword_104B0690 + v2) = v13;
      v14 = sub_1003BD50() & 0xF;
      v15 = sub_1003BD50() & 0xF;
      v30 = (__int64)(v23 * 16383.5);
      v24 = (__int64)(v25 * 16383.5);
      v35 = (__int64)(v21 * 16383.5);
      v26 = (__int64)(v31 * 16383.5);
      v16 = (__int64)(v32 * 16383.5);
      v22 = 0;
      if (dword_104B2550 > 0) {
        v17 = v27;
        do {
          if (v14) {
              *(v17 - 1) += v30;
              --v14;
          } else {
              *(v17 - 1) += v26 + v30;
              v26 = -v26;
              v14 = sub_1003BD50() & 0xF;
          }
          if (v15) {
              *v17 += v24;
              --v15;
          } else {
              *v17 += v16 + v24;
              v16 = -v16;
              v15 = sub_1003BD50() & 0xF;
          }
          v17[1] += v35;
          v17 += 3;
          ++v22;
        } while (v22 < dword_104B2550);
        v2 = v34;
      }
      result = v33 + 1;
      v2 += 12;
      v18 = ++v33 < dword_100AA8B4;
      v27 += 1566;
      v28 += 2778;
      v34 = v2;
    } while (v18);
  }
  return result;
}
// 100196E7: variable 'v1' is possibly undefined
// 100A79C8: using guessed type float flt_100A79C8;
// 100AA8B4: using guessed type int dword_100AA8B4;
// 104B0688: using guessed type int dword_104B0688;
// 104B068C: using guessed type int dword_104B068C;
// 104B0690: using guessed type int dword_104B0690;
// 104B0694: using guessed type int dword_104B0694;
// 104B0698: using guessed type int dword_104B0698;
// 104B069C: using guessed type int dword_104B069C;
// 104B1F00: using guessed type float flt_104B1F00;
// 104B2550: using guessed type int dword_104B2550;
// 104BBDE8: using guessed type float flt_104BBDE8;
// 104BBDF4: using guessed type float flt_104BBDF4;
// 104BBDF8: using guessed type float flt_104BBDF8;
// 104BBE0C: using guessed type int dword_104BBE0C;
// 104BBE14: using guessed type int dword_104BBE14;
// 106C2CFC: using guessed type int dword_106C2CFC;
// 106C6620: using guessed type int dword_106C6620;
// 106C6624: using guessed type int dword_106C6624;
// 10AD05DC: using guessed type int dword_10AD05DC[];

//----- (10019B50) --------------------------------------------------------
int sub_10019B50() {
  int result;           // eax
  int v1;               // ebx
  int v2;               // esi
  unsigned __int16 *v3; // edx
  int v4;               // esi
  _DWORD *v5;           // eax
  _DWORD *v6;           // eax
  _DWORD *v7;           // eax
  _DWORD *v8;           // eax
  _DWORD *v9;           // eax
  unsigned int *v10;    // eax
  _DWORD *v11;          // eax
  _DWORD *v12;          // eax
  _DWORD *v13;          // eax
  void *v14;            // ecx
  double v15;           // st6
  int v16;              // edi
  __int64 v17;          // rax
  int v18;              // ebp
  int v19;              // ebp
  double v20;           // st7
  int v21;              // ebp
  char *v22;            // esi
  double v23;           // st5
  double v24;           // st7
  double v25;           // rtt
  double v26;           // st5
  double v27;           // st1
  char v29;             // c0
  double v30;           // st7
  double v31;           // st7
  double v32;           // st7
  int v33;              // edi
  int v34;              // esi
  int v35;              // eax
  int *v36;             // ecx
  int v37;              // edx
  int v38;              // eax
  _DWORD *v39;          // eax
  unsigned int *v40;    // [esp-44h] [ebp-84h]
  float v41;            // [esp+10h] [ebp-30h]
  float v42;            // [esp+10h] [ebp-30h]
  float v43;            // [esp+10h] [ebp-30h]
  float v44;            // [esp+10h] [ebp-30h]
  float v45;            // [esp+14h] [ebp-2Ch]
  float v46;            // [esp+14h] [ebp-2Ch]
  float v47;            // [esp+14h] [ebp-2Ch]
  float v48;            // [esp+18h] [ebp-28h]
  float v49;            // [esp+18h] [ebp-28h]
  float v50;            // [esp+18h] [ebp-28h]
  float v51;            // [esp+1Ch] [ebp-24h]
  float v52;            // [esp+20h] [ebp-20h]
  float v53;            // [esp+24h] [ebp-1Ch]
  float v54;            // [esp+24h] [ebp-1Ch]
  float v55;            // [esp+28h] [ebp-18h]
  char *v56;            // [esp+28h] [ebp-18h]
  char *v57;            // [esp+2Ch] [ebp-14h]
  float v58;            // [esp+30h] [ebp-10h]
  float v59;            // [esp+34h] [ebp-Ch] BYREF
  float v60;            // [esp+38h] [ebp-8h]

  result = MEMORY[0x106C6620];
  if (MEMORY[0x106C6620] || MEMORY[0x106C6624]) {
    v1 = dword_106C1988;
    v2 = 0;
    if (dword_106C1988 <= 0) {
    LABEL_7:
      v4 = 0;
      v57 = (char *)&unk_104B2570 + 3132 * MEMORY[0x106C5708];
      if (MEMORY[0x106C6624])
        meth_DebugPrint((void *)(65 * MEMORY[0x106C5708]));
      v5 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v5 = -419430400;
      v5[1] = 0;
      v6 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v6 = -1174399998;
      v6[1] = 0;
      v7 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v7 = -1157627903;
      v7[1] = -1;
      v8 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v8 = -1174402046;
      v8[1] = dword_106C0258;
      v40 = (unsigned int *)dword_106C0680;
      dword_106C0680 += 8;
      sub_1002F900(v40, 0, 0, 0, 1003, 0, 0, 0, 1001, 0, 0, 0, 1003, 0, 0, 0, 1001);
      v9 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v9 = -1191181539;
      v9[1] = 5259840;
      v10 = (unsigned int *)dword_106C0680;
      dword_106C0680 += 8;
      if (MEMORY[0x106C6624]) {
        *v10 = dword_11829100[MEMORY[0x106C5708]] & 0xFFFFFF | 0xDD000000;
        v10[1] = (unsigned int)&unk_104B3DE8 + 0x4000 * MEMORY[0x106C5708];
        v10 = (unsigned int *)dword_106C0680;
        dword_106C0680 += 8;
        *v10 = dword_11829100[MEMORY[0x106C5708]] & 0xFFFFFF | 0xDC000000;
      } else {
        *v10 = dword_1182931C & 0xFFFFFF | 0xDC000000;
      }
      v10[1] = 1;
      v11 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v11 = -234872830;
      v11[1] = 1040638;
      v12 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v12 = -1241513984;
      v12[1] = 12288;
      v13 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      if (MEMORY[0x106C6620]) {
        *v13 = -100597761;
        v13[1] = -522125313;
      } else {
        *v13 = -100597761;
        v13[1] = 2021689599;
      }
      sub_1003B4F0((int)&flt_106C0860, (float *)MEMORY[0x106C6490]);
      flt_106C0898 = 0.0;
      flt_106C0894 = 0.0;
      flt_106C0890 = 0.0;
      flt_106C08A0 = 0.0;
      flt_106C08A4 = 0.0;
      dword_106C08A8 = 947912960;
      dword_106C08AC = 0;
      flt_106C08B0 = 0.000061037019;
      flt_106C08B4 = 0.0;
      dword_106C08B8 = 0;
      dword_106C08BC = 0;
      dword_106C08C0 = 0;
      dword_106C08C4 = 947912960;
      dword_106C08C8 = 0;
      dword_106C08CC = 0;
      dword_106C08D0 = 0;
      dword_106C08D4 = 0;
      dword_106C08D8 = 0;
      dword_106C08DC = 1065353216;
      sub_1003B470((char *)&flt_106C0860, &flt_106C0860, &flt_106C08A0);
      if (MEMORY[0x106C6624]) {
        sub_10060780(
            v1, (char *)&unk_104B3DE8 + 0x4000 * MEMORY[0x106C5708], dword_11829318 << 12, 0);
        sub_1003B340(&v59, (float *)&unk_104BBDF0 + 3 * MEMORY[0x106C5708], &flt_106C0860);
        sub_1003AE50(&v59);
        v14 = (void *)dword_106C1174;
        if (dword_106C1174 != dword_106C3364)
          v59 = -v59;
        v45 = 32.0 - v59 * 28.0;
        v55 = v59 * 3.5;
        v41 = 32.0 - v60 * -28.0;
        v53 = v60 * -3.5;
        do {
          v15 = v55 + v45;
          v45 = v15;
          v41 = v53 + v41;
          v16 = (__int64)v15;
          v17 = (__int64)v41;
          v18 = v17;
          if ((int)v17 >= 2 && (int)v17 <= 61 && v16 >= 2 && v16 <= 61) {
              sub_1001A4B0(MEMORY[0x106C5708]);
              sub_1001A4D0(MEMORY[0x106C5708], v18 - 2, v16 - 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 - 2, v16, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 - 2, v16 + 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 - 1, v16 - 2, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 - 1, v16 - 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 - 1, v16, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 - 1, v16 + 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 - 1, v16 + 2, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18, v16 - 2, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18, v16 - 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18, v16, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18, v16 + 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18, v16 + 2, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 + 1, v16 - 2, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 + 1, v16 - 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 + 1, v16, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 + 1, v16 + 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v18 + 1, v16 + 2, v4);
              v19 = v18 + 2;
              sub_1001A4D0(MEMORY[0x106C5708], v19, v16 - 1, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v19, v16, v4);
              sub_1001A4D0(MEMORY[0x106C5708], v19, v16 + 1, v4);
          }
          ++v4;
        } while (v4 < 16);
      }
      meth_DebugPrint(v14);
      sub_1003B470((char *)&flt_106C0860, &flt_106C0860, flt_106C0218);
      if (MEMORY[0x106C6620]) {
        v51 = 96.0;
        v52 = 144.0;
      } else {
        v51 = 128.0;
        v52 = 128.0;
      }
      if (dword_106C1174 != dword_106C3364)
        v20 = (double)-gWidth;
      else
        v20 = (double)gWidth;
      v21 = 0;
      v54 = v20 + v20;
      v58 = (double)gHeight + (double)gHeight;
      if (dword_104B2550 > 0) {
        v22 = v57 + 4;
        v56 = v57 + 4;
        do {
          v23 = (double)*((__int16 *)v22 - 1);
          v24 = (double)*((__int16 *)v22 - 2);
          v48 = v23;
          v25 = v23;
          v26 = (double)*(__int16 *)v22;
          v42 = v26;
          v27 = v26 * flt_106C088C + v25 * flt_106C087C + v24 * flt_106C086C;
          v46 = v42 * flt_106C0880 + v48 * flt_106C0870 + v24 * flt_106C0860 + flt_106C0890;
          v49 = v42 * flt_106C0884 + v48 * flt_106C0874 + v24 * flt_106C0864 + flt_106C0894;
          if (!v29) {
              v43 = v27 + *(float *)&flt_106C089C;
              v30 = 0.5 / v43;
              v44 = v30;
              v31 = v30 * v49;
              v50 = v31;
              if (v31 >= -1.0 && v50 <= 1.0) {
                  v32 = v44 * v46;
                  v47 = v32;
                  if (v32 >= -1.0 && v47 <= 1.0 && (int)(__int64)(v44 * v51) >= 2) {
                      v33 = (__int64)(v44 * v52);
                      if (v33 >= 2) {
                          v34 = (__int64)(v47 * v54) + 4 * (gWidth / 2);
                          v35 = (__int64)(v50 * v58) + 4 * (gHeight / 2);
                          v36 = (int *)dword_106C0680;
                          dword_106C0680 += 8;
                          v37 = ((v35 + v33) >> 2) & 0xFFF |
                                ((((unsigned __int16)v34 + (unsigned __int16)(__int64)(v44 * v51)) &
                                      0x3FFC |
                                  0x38C000) >>
                                 2 << 12);
                          v38 = (((v34 >> 2) & 0xFFF) << 12) | (v35 >> 2) & 0xFFF;
                          v22 = v56;
                          *v36 = v37;
                          v36[1] = v38;
                      }
                  }
              }
          }
          ++v21;
          v22 += 6;
          v56 = v22;
        } while (v21 < dword_104B2550);
      }
      v39 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v39 = -419430400;
      v39[1] = 0;
      result = dword_106C0680;
      dword_106C0680 += 8;
      *(_DWORD *)result = -1174400255;
      *(_DWORD *)(result + 4) = 0x80000;
    } else {
      v3 = (unsigned __int16 *)&MEMORY[0x106C6498];
      while (1) {
        result = 21 * *v3;
        if ((*(_BYTE *)(MEMORY[0x106C7CA8] + 84 * *v3 + 76) & 0x10) != 0)
          break;
        ++v2;
        ++v3;
        if (v2 >= dword_106C1988)
          goto LABEL_7;
      }
    }
  }
  return result;
}
// 1001A1A8: variable 'v14' is possibly undefined
// 1001A31E: variable 'v29' is possibly undefined
// 100A81C0: using guessed type int gWidth;
// 100A81C4: using guessed type int gHeight;
// 104B2550: using guessed type int dword_104B2550;
// 106C0258: using guessed type int dword_106C0258;
// 106C0680: using guessed type int dword_106C0680;
// 106C0860: using guessed type float flt_106C0860;
// 106C0864: using guessed type float flt_106C0864;
// 106C086C: using guessed type float flt_106C086C;
// 106C0870: using guessed type float flt_106C0870;
// 106C0874: using guessed type float flt_106C0874;
// 106C087C: using guessed type float flt_106C087C;
// 106C0880: using guessed type float flt_106C0880;
// 106C0884: using guessed type float flt_106C0884;
// 106C088C: using guessed type float flt_106C088C;
// 106C0890: using guessed type float flt_106C0890;
// 106C0894: using guessed type float flt_106C0894;
// 106C0898: using guessed type float flt_106C0898;
// 106C08A0: using guessed type float flt_106C08A0;
// 106C08A4: using guessed type float flt_106C08A4;
// 106C08A8: using guessed type int dword_106C08A8;
// 106C08AC: using guessed type int dword_106C08AC;
// 106C08B0: using guessed type float flt_106C08B0;
// 106C08B4: using guessed type float flt_106C08B4;
// 106C08B8: using guessed type int dword_106C08B8;
// 106C08BC: using guessed type int dword_106C08BC;
// 106C08C0: using guessed type int dword_106C08C0;
// 106C08C4: using guessed type int dword_106C08C4;
// 106C08C8: using guessed type int dword_106C08C8;
// 106C08CC: using guessed type int dword_106C08CC;
// 106C08D0: using guessed type int dword_106C08D0;
// 106C08D4: using guessed type int dword_106C08D4;
// 106C08D8: using guessed type int dword_106C08D8;
// 106C08DC: using guessed type int dword_106C08DC;
// 106C1174: using guessed type int dword_106C1174;
// 106C1988: using guessed type int dword_106C1988;
// 106C3364: using guessed type int dword_106C3364;
// 106C5708: using guessed type int dword_106C5708;
// 106C6620: using guessed type int dword_106C6620;
// 106C6624: using guessed type int dword_106C6624;
// 106C7CA8: using guessed type int dword_106C7CA8;
// 11829100: using guessed type int dword_11829100[];
// 11829318: using guessed type int dword_11829318;
// 1182931C: using guessed type int dword_1182931C;

//----- (1001A4B0) --------------------------------------------------------
int *__cdecl sub_1001A4B0(int a1) {
  return sub_100290A0(&dword_104B2554, &dword_104B2558, dword_11829100[a1]);
}
// 104B2554: using guessed type int dword_104B2554;
// 104B2558: using guessed type int dword_104B2558;
// 11829100: using guessed type int dword_11829100[];

//----- (1001A4D0) --------------------------------------------------------
int __cdecl sub_1001A4D0(int a1, int a2, int a3, int a4) {
  int v4;     // ecx
  int v5;     // edx
  int v6;     // edi
  int result; // eax
  int v8;     // ebp
  char v9;    // dl
  int v10;    // ebp

  v4 = 0;
  v5 = dword_11829318;
  v6 = dword_104B2558 * a2 / 64;
  for (result = dword_104B2554 * a3 / 64; v4 < dword_11829318; v5 = dword_11829318) {
    v8 = v5 * (result + dword_104B2554 * v6);
    v9 = byte_11829118[v5 * a4 + v4];
    v10 = v4 + v8;
    ++v4;
    *((_BYTE *)&unk_104B3DE8 + 0x4000 * a1 + v10) = v9;
  }
  return result;
}
// 104B2554: using guessed type int dword_104B2554;
// 104B2558: using guessed type int dword_104B2558;
// 11829318: using guessed type int dword_11829318;

//----- (1001A550) --------------------------------------------------------
unk00334 *__cdecl sub_1001A550(CLSID *a1) {
  unk00334 *result; // eax

  result = s_clsid_1001BA70(a1, (unk00334 *)&a1, 0);
  if (!result)
    result = (unk00334 *)a1;
  return result;
}

//----- (1001A570) --------------------------------------------------------
unk00334 *__cdecl meth_unk00334_1001A570(
    unk00334 *a1, int width, int height, int bitDepth, unk00334 *a5, unk00228 *a6) {
  unk00334 *result; // eax

  if (!a1)
    return 0;
  if (a6)
    result = meth_unk00334_1001B880(a1, width, height, bitDepth, a5, a6, &a5, 0);
  else
    result = meth_unk00334_1001B490(a1, width, height, bitDepth, a5, &a5, 0);
  if (!result)
    result = a5;
  return result;
}

//----- (1001A5D0) --------------------------------------------------------
CLSID *__cdecl sub_1001A5D0(unk00334 *a1, CLSID *clsid, unk00334 *a3) {
  CLSID *result; // eax

  if (!a1)
    return 0;
  if (a3)
    result = (CLSID *)meth_unk00334_1001B7C0(a1, clsid, a3, (unk00228 *)&clsid, 0);
  else
    result = (CLSID *)meth_unk00334_1001B690(a1, clsid, &clsid, 0);
  if (!result)
    result = clsid;
  return result;
}

//----- (1001A610) --------------------------------------------------------
int __cdecl sub_1001A610(int a1, int a2, _DWORD *a3, int *a4) {
  HWND v4;      // ebp
  HDC v5;       // esi
  int v6;       // ebx
  int v7;       // ebx
  unk00334 *v8; // esi
  int v9;       // eax
  int v11;      // [esp+10h] [ebp-Ch]
  int v12;      // [esp+14h] [ebp-8h]
  int a4a;      // [esp+18h] [ebp-4h] BYREF

  if (!a1)
    return 0;
  if (!a3)
    return 0;
  if (!a4)
    return 0;
  v4 = GetDesktopWindow();
  v5 = GetDC(v4);
  v12 = GetDeviceCaps(v5, 8);
  v11 = GetDeviceCaps(v5, 10);
  v6 = GetDeviceCaps(v5, 12);
  v7 = GetDeviceCaps(v5, 14) * v6;
  ReleaseDC(v4, v5);
  v8 = (unk00334 *)meth_unk00334_1001B490((_DWORD *)a1, v12, v11, v7, 0, 0, 0);
  if (!v8)
    return 0;
  v9 = meth_unk00334_1001B7C0((unk00334 *)a1, (const void *)a2, v8, (int)&a4a, 0);
  if (!v9) {
    v9 = a4a;
    if (!a4a)
      return 0;
  }
  *a3 = v8;
  *a4 = v9;
  return 1;
}

//----- (1001A6E0) --------------------------------------------------------
int __cdecl s_unk00334_1001A6E0(
    unk00334 *a1, int a2, int width, int height, int bitDepth, int a5, _DWORD *a7, _DWORD *a8) {
  unk00334 *v8;  // edi
  _DWORD *v9;    // ebx
  unk00334 *v10; // esi
  int v11;       // edx
  int v12;       // ecx
  int v13;       // eax
  unk00334 *v14; // eax

  v8 = a1;
  if (!a1)
    return 0;
  if (!a7)
    return 0;
  v9 = a8;
  if (!a8)
    return 0;
  v10 = (unk00334 *)meth_unk00334_1001B690(a1, (CLSID *)a2, &a1, 0);
  if (!v10) {
    v10 = a1;
    if (!a1)
      return 0;
  }
  v11 = width;
  if (!width || (v12 = height) == 0 || (v13 = bitDepth) == 0) {
    v11 = 640;
    v12 = 480;
    v13 = 16;
  }
  v14 = meth_unk00334_1001B880(v8, v11, v12, v13, (unk00334 *)a5, (unk00228 *)v10, &a8, 0);
  if (!v14) {
    v14 = (unk00334 *)a8;
    if (!a8)
      return 0;
  }
  *a7 = v14;
  *v9 = v10;
  return 1;
}

//----- (1001A790) --------------------------------------------------------
HRESULT __cdecl sub_1001A790(int a1,
                             int width,
                             int height,
                             int bitDepth,
                             int a5,
                             int a6,
                             int a7,
                             unk00334 *a8,
                             unk00334 *a9,
                             unk00334 *a10) {
  unk00334 *gsu1; // ebp
  unk00334 *v11;  // ebx
  unk00334 *v12;  // edi
  HRESULT result; // eax
  unk00334 *v14;  // esi
  unk00334 *v15;  // edx
  unk00334 *v16;  // eax

  gsu1 = a8;
  if (!a8)
    return -2005522670;
  v11 = a9;
  if (!a9)
    return -2005522670;
  v12 = a10;
  if (!a10)
    return -2005522670;
  if ((gHasCalledDDrawEnum & 1) == 0) {
    result = graphics_1001B970();
    if (result < 0)
      return result;
  }
  v14 = sub_1001A550((CLSID *)a1);
  if (!v14)
    return -2005522670;
  if (a7) {
    if (!s_unk00334_1001A6E0(v14, a6, width, height, bitDepth, a5, &a8, &a9))
      return -2005522671;
  } else if (!sub_1001A610((int)v14, a6, &a8, (int *)&a9)) {
    return -2005522671;
  }
  v15 = a8;
  v16 = a9;
  gsu1->ddCapsFlags = (DWORD)v14;
  v11->ddCapsFlags = (DWORD)v15;
  v12->ddCapsFlags = (DWORD)v16;
  return 0;
}
// 104BBE18: using guessed type int gHasCalledDDrawEnum;

//----- (1001A870) --------------------------------------------------------
unsigned int __cdecl graphics_1001A870(unsigned int a1) {
  if ((a1 & 0x4000) != 0)
    return 1;
  if ((a1 & 0x2000) != 0)
    return 2;
  if ((a1 & 0x1000) != 0)
    return 4;
  if ((a1 & 0x800) != 0)
    return 8;
  if ((a1 & 0x400) != 0)
    return 16;
  if ((a1 & 0x200) != 0)
    return 24;
  return (a1 >> 3) & 0x20;
}

//----- (1001A8C0) --------------------------------------------------------
// 32768 / (2 ^ bitDepth)
int __cdecl graphics_BitDepthTo(int bitDepth) {
  int result; // eax

  switch (bitDepth) {
  case 1:
    result = 0x4000;
    break;
  case 2:
    result = 0x2000;
    break;
  case 4:
    result = 0x1000;
    break;
  case 8:
    result = 0x800;
    break;
  case 16:
    result = 0x400;
    break;
  case 24:
    result = 0x200;
    break;
  case 32:
    result = 0x100;
    break;
  default:
    result = 0;
    break;
  }
  return result;
}

//----- (1001A950) --------------------------------------------------------
HRESULT __cdecl graphics_1001A950(DDPIXELFORMAT *pixelFormat) {
  HRESULT hr;    // eax
  DWORD dwFlags; // eax

  hr = (HRESULT)pixelFormat;
  if (pixelFormat) {
    dwFlags = pixelFormat->dwFlags;
    if ((dwFlags & DDPF_PALETTEINDEXED1) != 0) {
      hr = 1;
    } else if ((dwFlags & DDPF_PALETTEINDEXED2) != 0) {
      hr = 1;
    } else if ((dwFlags & DDPF_PALETTEINDEXED4) != 0) {
      hr = 1;
    } else {
      hr = ((unsigned __int8)pixelFormat->dwFlags >> 5) & 1;
    }
  }
  return hr;
}

//----- (1001A990) --------------------------------------------------------
BOOL __stdcall graphics_ddrawEnumerateCallback(GUID *lpGUID, LPSTR a2, LPSTR Source, int *a4) {
  unk00334 *mem;  // eax
  unk00334 *memo; // edx
  DWORD v6;       // eax
  unk00334 *v7;   // edi

  if (a4) {
    mem = (unk00334 *)operator new(0x334u);
    memo = mem;
    if (mem) {
      v6 = mem->ddCapsFlags;
      LOBYTE(v6) = memo->ddCapsFlags & 0xFE;
      memo->ddCapsFlags = v6;
      memset(&memo->ddCaps1, 0, sizeof(memo->ddCaps1));
      memo->ddCaps1.dwSize = 0x17C;
      memset(&memo->ddCaps0, 0, sizeof(memo->ddCaps0));
      memo->ddCaps0.dwSize = 0x17C;
      memo->field_314 = 0;
      memo->field_318 = 0;
      memo->field_31C = 0;
      memo->field_320 = 0;
      memo->field_324 = 0;
      memo->field_328 = 0;
      memo->field_32C = 0;
      memo->last = 0;
      v7 = memo;
    } else {
      v7 = 0;
    }
    if (v7) {
      if (meth_unk00334_1001B090(v7, lpGUID, Source, a2) < 0 || s_unk00334_1001BA10(v7) < 0) {
        meth_unk00334_1001B280(v7);
        operator delete(v7);
        return 1;
      }
      ++a4[1];
    }
  }
  return 1;
}

//----- (1001AA70) --------------------------------------------------------
HRESULT __stdcall graphics_enumModesCallback(DDSURFACEDESC *a1, int *context) {
  unk00334 *u334; // ebx
  unk00074 *v4;   // edx

  if (context) {
    u334 = (unk00334 *)context[2];
    if (u334) {
      if (!a1)
        return DD_OK;
      if (a1->dwSize != 0x6C)
        return DD_OK;
      v4 = (unk00074 *)operator new(0x74u);
      if (v4) {
        memset(v4, 0, 0x6Cu);
        v4->field_0.dwSize = 0x6C;
        v4->field_6C = 0;
        v4->last = 0;
      } else {
        v4 = 0;
      }
      if (v4) {
        qmemcpy(v4, a1, 0x6Cu);
        if (meth_unk00334_1001B430(u334, v4) >= 0)
          ++context[1];
      }
    }
  }
  return 1;
}

//----- (1001AB00) --------------------------------------------------------
int __stdcall graphics_enumTextureFormatsCallback(LPDDSURFACEDESC lpSurfaceDesc, LPVOID ctx) {
  intptr_t v2;   // ebx
  unk00074 *u74; // edx

  if (ctx) {
    v2 = *((_DWORD *)ctx + 2);
    if (v2) {
      if (!lpSurfaceDesc)
        return 0;
      if (lpSurfaceDesc->dwSize != 0x6C)
        return 0;
      u74 = (unk00074 *)operator new(0x74u);
      if (u74) {
        memset(u74, 0, 0x6Cu);
        u74->field_0.dwSize = 0x6C;
        u74->field_6C = 0;
        u74->last = 0;
      } else {
        u74 = NULL;
      }
      if (u74) {
        qmemcpy(u74, lpSurfaceDesc, 0x6Cu);
        if (meth_1001B030((_DWORD *)v2, u74) >= 0)
          ++*((_DWORD *)ctx + 1);
      }
    }
  }
  return 1;
}

//----- (1001AB90) --------------------------------------------------------
int __stdcall graphics_Direct3D2EnumDevicesCallback(GUID *a2,
                                                    LPSTR lpDeviceDescription,
                                                    LPSTR deviceName,
                                                    LPD3DDEVICEDESC desc,
                                                    LPD3DDEVICEDESC a6,
                                                    LPVOID userArg) {
  int *v6;       // ebx
  unk00334 *v7;  // ebp
  unk00228 *v8;  // eax
  unk00228 *v9;  // edx
  DWORD v10;     // eax
  unk00228 *v11; // edi

  v6 = (int *)userArg;
  if (userArg) {
    v7 = (unk00334 *)*((_DWORD *)userArg + 2);
    if (v7) {
      v8 = (unk00228 *)operator new(0x228u);
      v9 = v8;
      if (v8) {
        v10 = v8->field_0;
        LOBYTE(v10) = v9->field_0 & 0xFC;
        v9->field_0 = v10;
        v9->sourceString0 = 0;
        v9->sourceString1 = 0;
        memset(&v9->deviceDesc0, 0, 0xFCu);
        v9->deviceDesc0.dwSize = 0xFC;
        memset(&v9->deviceDesc1, 0, 0xFCu);
        v9->deviceDesc1.dwSize = 0xFC;
        v6 = (int *)userArg;
        v9->field_214 = 0;
        v9->field_218 = 0;
        v9->field_21C = 0;
        v9->field_220 = 0;
        v9->last = 0;
        v11 = v9;
      } else {
        v11 = 0;
      }
      if (v11 && meth_unk00228_1001ADE0(v11, a2, lpDeviceDescription, deviceName, desc, a6) >= 0 &&
          meth_unk00334_1001B630(v7, v11) >= 0) {
        ++v6[1];
      }
    }
  }
  return 1;
}

//----- (1001AC60) --------------------------------------------------------
int __thiscall meth_unk00334_GetBitDepth(unk00334 *this) {
  if (this->ddCapsFlags != (unk0008C *)0x6C)
    return 0;
  if (((int)this->lpGUID & 0x1000) == 0)
    return 0;
  if ( this->? == 32 )
    return this->? ;
  return 0;
}

//----- (1001AC80) --------------------------------------------------------
int __thiscall meth_unk00334_1001AC80(
    unk00334 *this, int *width, int *height, int *bitDepth, int *a5) {
  GUID *v6; // eax

  if (this->ddCapsFlags != (unk0008C *)108)
    return -2147467259;
  v6 = this->lpGUID;
  if (((unsigned __int8)v6 & 4) == 0)
    return -2147467259;
  if (((unsigned __int8)v6 & 2) == 0)
    return -2147467259;
  if ((BYTE1(v6) & 0x10) == 0)
    return -2147467259;
  if ( this->? != 32 )
    return -2147467259;
  *width = this->width;
  *height = this->height;
  *bitDepth = this->? ;
  *a5 = 0;
  return 0;
}

//----- (1001ACF0) --------------------------------------------------------
BOOL __thiscall meth_unk00334_1001ACF0(unk00334 *this, unk00228 *u228) {
  int bitDepth;   // eax
  int bitDepthTo; // edi
  DWORD v5;       // eax

  if (!u228)
    return 0;
  bitDepth = meth_unk00334_GetBitDepth(this);
  bitDepthTo = graphics_BitDepthTo(bitDepth);
  if (meth_unk00228_DeviceDescHasDCMColorModel(u228))
    v5 = bitDepthTo & u228->deviceDesc0.dwDeviceRenderBitDepth;
  else
    v5 = bitDepthTo & u228->deviceDesc1.dwDeviceRenderBitDepth;
  return v5 != 0;
}

//----- (1001AD50) --------------------------------------------------------
BOOL __thiscall meth_unk00334_MatchesWidthHeightBitDepth(unk00334 *this,
                                                         int width,
                                                         int height,
                                                         int bitDepth) {
  return this->ddCapsFlags == (unk0008C *)0x6C && this->width == width && this->height == height &&
         this->?
      == bitDepth;
}

//----- (1001AD90) --------------------------------------------------------
BOOL __thiscall meth_unk00228_DeviceDescHasDCMColorModel(unk00228 *this) {
  return this->deviceDesc0.dcmColorModel != 0;
}

//----- (1001ADA0) --------------------------------------------------------
int __thiscall meth_unk00228_MatchesGUID(unk00228 *this, CLSID *clsid) {
  if (!clsid)
    return 0;
  if (((int)this->field_0 & 1) != 0)
    return memcmp(&this->guid, clsid, 0x10u) == 0;
  return 0;
}

//----- (1001ADE0) --------------------------------------------------------
MACRO_DDERR __thiscall meth_unk00228_1001ADE0(unk00228 *this,
                                              GUID *guid,
                                              char *source,
                                              char *source2,
                                              D3DDEVICEDESC *deviceDesc0,
                                              D3DDEVICEDESC *deviceDesc1) {
  char *v8;        // ebp
  size_t v9;       // kr04_4
  size_t v10;      // esi
  char *v11;       // eax
  char *source2_1; // ebp
  size_t v13;      // kr08_4
  size_t v14;      // esi
  char *v15;       // eax
  DWORD v16;       // edx

  if (!guid)
    return DDERR_INVALIDPARAMS;
  this->guid = *guid;
  v8 = source;
  if (!source)
    v8 = aUnknown_0;
  v9 = strlen(v8) + 1;
  v10 = v9 - 1;
  v11 = (char *)malloc(v9);
  this->sourceString0 = v11;
  if (v11) {
    strncpy(v11, v8, v10);
    this->sourceString0[v10] = 0;
  }
  source2_1 = source2;
  if (!source2)
    source2_1 = aUnknown_0;
  v13 = strlen(source2_1) + 1;
  v14 = v13 - 1;
  v15 = (char *)malloc(v13);
  this->sourceString1 = v15;
  if (v15) {
    strncpy(v15, source2_1, v14);
    this->sourceString1[v14] = 0;
  }
  if (deviceDesc0)
    qmemcpy(&this->deviceDesc0, deviceDesc0, 0xFCu);
  if (deviceDesc1)
    qmemcpy(&this->deviceDesc1, deviceDesc1, 0xFCu);
  v16 = this->field_0 & 0xFFFFFFFD | 1;
  this->field_214 = 0;
  this->field_0 = v16;
  return 0;
}

//----- (1001AEE0) --------------------------------------------------------
void __thiscall meth_unk00228_1001AEE0(unk00228 *this) {
  meth_unk00228_1001AFB0(this);
  if (this->sourceString1) {
    free(this->sourceString1);
    this->sourceString1 = 0;
  }
  if (this->sourceString0) {
    free(this->sourceString0);
    this->sourceString0 = 0;
  }
  this->field_220 = 0;
  this->last = 0;
}

//----- (1001AF20) --------------------------------------------------------
HRESULT __thiscall meth_unk00334_1001AF20(unk00334 *a1, IDirect3DDevice2 *dev2) {
  HRESULT hr;                           // eax
  IDirect3DDevice2Vtbl *d3dDevice2Vtbl; // ecx
  unk0008C *v5;                         // eax
  int context;                          // [esp+Ch] [ebp-Ch] BYREF
  int v7;                               // [esp+10h] [ebp-8h]
  unk00334 *v8;                         // [esp+14h] [ebp-4h]

  if (((int)a1->ddCapsFlags & 2) != 0)
    return 0;
  if (!dev2)
    return -2005522670;
  d3dDevice2Vtbl = dev2->lpVtbl;
  context = 1;
  v8 = a1;
  v7 = 0;
  hr = d3dDevice2Vtbl->EnumTextureFormats(dev2, graphics_enumTextureFormatsCallback, &context);
  if (hr >= 0) {
    if (context && v7 && a1->ddCaps0.dwRops[6] == v7) {
      v5 = a1->ddCapsFlags;
      LOBYTE(v5) = (int)a1->ddCapsFlags | 2;
      a1->ddCapsFlags = v5;
      hr = 0;
    } else {
      hr = 2289444625;
    }
  }
  return hr;
}

//----- (1001AFB0) --------------------------------------------------------
int __thiscall meth_unk00228_1001AFB0(unk00228 *this) {
  _DWORD *v2;   // eax
  int v3;       // ecx
  int v4;       // esi
  unk00228 *v5; // eax

  if (((int)this->field_0 & 2) != 0) {
    v2 = (_DWORD *)this->field_218;
    if (v2) {
      do {
        v3 = v2[27];
        v4 = v2[28];
        if (v3)
          *(_DWORD *)(v3 + 112) = v4;
        else
          this->field_218 = v4;
        if (v4)
          *(_DWORD *)(v4 + 108) = v3;
        else
          this->field_21C = v3;
        v2[28] = 0;
        v2[27] = 0;
        if (v2) {
          v2[27] = 0;
          v2[28] = 0;
          operator delete(v2);
        }
        v2 = (_DWORD *)v4;
      } while (v4);
    }
    v5 = this->field_0;
    this->field_214 = 0;
    LOBYTE(v5) = (unsigned __int8)v5 & 0xFD;
    this->field_218 = 0;
    this->field_21C = 0;
    this->field_0 = v5;
  }
  return 0;
}

//----- (1001B030) --------------------------------------------------------
int __thiscall meth_1001B030(_DWORD *this, unk00074 *a2) {
  int v3; // edx
  int v4; // edx
  int v5; // edx

  if (!a2)
    return -2147024809;
  v3 = this[135];
  a2->last = 0;
  a2->field_6C = v3;
  v4 = this[135];
  if (v4)
    *(_DWORD *)(v4 + 112) = a2;
  v5 = this[134];
  this[135] = a2;
  if (!v5)
    this[134] = a2;
  ++this[0x85];
  return 0;
}

//----- (1001B090) --------------------------------------------------------
HRESULT __thiscall meth_unk00334_1001B090(unk00334 *this, GUID *lpGUID, char *Source, char *a4) {
  DWORD v5;                         // eax
  char *src;                        // ebp
  size_t lll;                       // kr04_4
  size_t llll;                      // edi
  char *mem;                        // eax
  char *v11;                        // ebp
  size_t l;                         // kr08_4
  size_t ll;                        // edi
  void *v14;                        // eax
  HRESULT hr;                       // edi
  IDirectDraw2Vtbl *ppvDDraw2_vtbl; // edi
  DWORD v17;                        // edx
  DWORD v18;                        // edi
  DWORD v19;                        // eax
  IDirectDraw2 *ppvDDraw2_a;        // [esp+Ch] [ebp-28h]
  IDirectDraw2 *ppvDDraw2_b;        // [esp+14h] [ebp-20h]
  IDirect3D2 *d3d2_a;               // [esp+14h] [ebp-20h]
  IDirect3D2 *ppvD3D2;              // [esp+28h] [ebp-Ch] BYREF
  IDirectDraw2 *ppvDDraw2;          // [esp+2Ch] [ebp-8h] BYREF
  LPDIRECTDRAW lpDD;                // [esp+30h] [ebp-4h] BYREF

  lpDD = 0;
  ppvDDraw2 = 0;
  v5 = this->ddCapsFlags;
  ppvD3D2 = 0;
  if ((v5 & 1) != 0)
    return 0;
  if (lpGUID) {
    *(GUID *)&this->lpGUID = *lpGUID;
  } else {
    LOBYTE(v5) = v5 | 2;
    this->ddCapsFlags = v5;
  }
  src = Source;
  if (!Source)
    src = aUnknown_0;
  lll = strlen(src) + 1;
  llll = lll - 1;
  mem = (char *)malloc(lll);
  this->field_14 = mem;
  if (mem) {
    strncpy(mem, src, llll);
    this->field_14[llll] = 0;
  }
  v11 = a4;
  if (!a4)
    v11 = aUnknown_0;
  l = strlen(v11) + 1;
  ll = l - 1;
  v14 = malloc(l);
  this->field_19 = v14;
  if (v14) {
    strncpy((char *)v14, v11, ll);
    *((_BYTE *)this->field_19 + ll) = 0;
  }
  hr = DirectDrawCreate(lpGUID, &lpDD, 0);
  if (hr >= 0) {
    hr = lpDD->lpVtbl->QueryInterface(lpDD, &CLSID_IDirectDraw2, (LPVOID *)&ppvDDraw2);
    if (hr >= 0) {
      hr = lpDD->lpVtbl->QueryInterface(lpDD, &CLSID_IDirect3D2, (LPVOID *)&ppvD3D2);
      if (hr >= 0) {
        g_pD3D2 = ppvD3D2;
        ppvDDraw2_vtbl = ppvDDraw2->lpVtbl;
        ppvDDraw2_a = ppvDDraw2;
        this->ddCaps1.dwSize = 380;
        this->ddCaps0.dwSize = 380;
        hr = ppvDDraw2_vtbl->GetCaps(ppvDDraw2_a, &this->ddCaps1, &this->ddCaps0);
        if (hr >= 0) {
          if (this->ddCaps1.dwZBufferBitDepths) {
              v17 = this->ddCapsFlags & 0xFFFFFFF7;
              ppvDDraw2_b = ppvDDraw2;
              this->field_314 = 0;
              this->ddCapsFlags = v17;
              hr = meth_unk00334_1001B320(this, ppvDDraw2_b);
              if (hr >= 0) {
                  v18 = this->ddCapsFlags & 0xFFFFFFEF;
                  d3d2_a = ppvD3D2;
                  this->field_320 = 0;
                  this->ddCapsFlags = v18;
                  hr = meth_unk00334_1001B510(this, d3d2_a);
                  if (hr >= 0) {
                      v19 = this->ddCapsFlags;
                      LOBYTE(v19) = this->ddCapsFlags | 1;
                      hr = 0;
                      this->ddCapsFlags = v19;
                  }
              }
          } else {
              hr = DDERR_NO3D;
          }
        }
      }
    }
  }
  if (ppvD3D2) {
    ppvD3D2->lpVtbl->Release(ppvD3D2);
    ppvD3D2 = 0;
    g_pD3D2 = 0;
  }
  if (ppvDDraw2) {
    ppvDDraw2->lpVtbl->Release(ppvDDraw2);
    ppvDDraw2 = 0;
  }
  if (lpDD)
    lpDD->lpVtbl->Release(lpDD);
  return hr;
}

//----- (1001B280) --------------------------------------------------------
char __thiscall meth_unk00334_1001B280(unk00334 *this) {
  unk0008C *v2; // eax

  meth_unk00334_1001B5A0(this);
  meth_unk00334_1001B3B0(this);
  if (this->field_19) {
    free(this->field_19);
    this->field_19 = 0;
  }
  if (this->field_14) {
    free(this->field_14);
    this->field_14 = 0;
  }
  v2 = this->ddCapsFlags;
  this->field_32C = 0;
  LOBYTE(v2) = (unsigned __int8)v2 & 0xFE;
  this->last = 0;
  this->ddCapsFlags = v2;
  return (char)v2;
}

//----- (1001B2D0) --------------------------------------------------------
BOOL __thiscall meth_unk00334_MatchesGUID(unk00334 *this, CLSID *a2) {
  unk0008C *v3; // ecx

  v3 = this->ddCapsFlags;
  if (((unsigned __int8)v3 & 1) != 0) {
    if (a2) {
      if (!memcmp(a2, &this->lpGUID, 0x10u))
        return 1;
    } else if (((unsigned __int8)v3 & 2) != 0) {
      return 1;
    }
  }
  return 0;
}

//----- (1001B320) --------------------------------------------------------
HRESULT __thiscall meth_unk00334_1001B320(unk00334 *this, IDirectDraw2 *ddraw) {
  HRESULT result;              // eax
  IDirectDraw2Vtbl *ddrawVtbl; // ecx
  DWORD v5;                    // eax
  int context[3];              // [esp+14h] [ebp-Ch] BYREF

  if ((this->ddCapsFlags & DDCAPS_ALIGNBOUNDARYSRC) != 0)
    return 0;
  if (!ddraw)
    return -2005522670;
  ddrawVtbl = ddraw->lpVtbl;
  context[0] = 1;
  context[2] = (int)this;
  context[1] = 0;
  result = ddrawVtbl->EnumDisplayModes(
      ddraw, 0, 0, context, (LPDDENUMMODESCALLBACK)graphics_enumModesCallback);
  if (result >= 0) {
    if (context[0] && context[1] && this->field_314 == context[1]) {
      v5 = this->ddCapsFlags;
      LOBYTE(v5) = this->ddCapsFlags | DDCAPS_ALIGNBOUNDARYSRC;
      this->ddCapsFlags = v5;
      result = 0;
    } else {
      result = -2005522671;
    }
  }
  return result;
}

//----- (1001B3B0) --------------------------------------------------------
int __thiscall meth_unk00334_1001B3B0(unk00334 *this) {
  unk00334 *v2; // eax
  int v3;       // ecx
  unk00334 *v4; // esi
  unk0008C *v5; // eax

  v2 = this->field_318;
  if (v2) {
    do {
      v3 = *(_DWORD *)&v2->? [8];
      v4 = v2->            ? ;
      if (v3)
        *(_DWORD *)(v3 + 112) = v4;
      else
        this->field_318 = v4;
      if (v4)
        *(_DWORD *)&v4->? [8] = v3;
      else
        this->field_31C = v3;
      v2->            ? = 0;
      *(_DWORD *)&v2->? [8] = 0;
      if (v2) {
        *(_DWORD *)&v2->? [8] = 0;
        v2->            ? = 0;
        operator delete(v2);
      }
      v2 = v4;
    } while (v4);
  }
  v5 = this->ddCapsFlags;
  this->field_314 = 0;
  LOBYTE(v5) = (unsigned __int8)v5 & 0xF7;
  this->field_318 = 0;
  this->field_31C = 0;
  this->ddCapsFlags = v5;
  return 0;
}

//----- (1001B430) --------------------------------------------------------
MACRO_DDERR __thiscall meth_unk00334_1001B430(unk00334 *this, unk00074 *a2) {
  unk00074 *v3; // edx
  unk00074 *v4; // edx
  unk00074 *v5; // edx

  if (!a2)
    return DDERR_INVALIDPARAMS;
  v3 = this->field_31C;
  a2->last = 0;
  a2->field_6C = v3;
  v4 = this->field_31C;
  if (v4)
    v4->last = a2;
  v5 = this->field_318;
  this->field_31C = a2;
  if (!v5)
    this->field_318 = a2;
  ++this->field_314;
  return DD_OK;
}

//----- (1001B490) --------------------------------------------------------
unk00334 *__thiscall meth_unk00334_1001B490(unk00334 *this,
                                            int width,
                                            int height,
                                            int bitDepth,
                                            unk00334 *a5,
                                            unk00334 **a6,
                                            unk00334 *a7) {
  unk00334 *v7; // esi
  unk00334 *v8; // edi

  v7 = a7;
  if (!a7)
    v7 = this->field_318;
  if (a6)
    *a6 = v7;
  if (!v7)
    return 0;
  while (1) {
    v8 = v7->? ;
    if (meth_unk00334_MatchesWidthHeightBitDepth(v7, width, height, bitDepth))
      break;
    if (meth_unk00334_MatchesWidthHeightBitDepth(v7, 640, 480, 8)) {
      if (a6)
        *a6 = v7;
    }
    v7 = v8;
    if (!v8)
      return 0;
  }
  return v7;
}

//----- (1001B510) --------------------------------------------------------
HRESULT __thiscall meth_unk00334_1001B510(unk00334 *this, IDirect3D2 *a2) {
  HRESULT result;     // eax
  IDirect3D2Vtbl *v4; // ecx
  DWORD v5;           // eax
  int v6[3];          // [esp+Ch] [ebp-Ch] BYREF

  if ((this->ddCapsFlags & DDCAPS_ALIGNSIZESRC) != 0)
    return 0;
  if (!a2)
    return -2005522670;
  v4 = a2->lpVtbl;
  v6[0] = 1;
  v6[2] = (int)this;
  v6[1] = 0;
  result = v4->EnumDevices(a2, graphics_Direct3D2EnumDevicesCallback, v6);
  if (result >= 0) {
    if (v6[0] && v6[1] && this->field_320 == v6[1]) {
      v5 = this->ddCapsFlags;
      LOBYTE(v5) = this->ddCapsFlags | DDCAPS_ALIGNSIZESRC;
      this->ddCapsFlags = v5;
      result = 0;
    } else {
      result = -2005522671;
    }
  }
  return result;
}

//----- (1001B5A0) --------------------------------------------------------
int __thiscall meth_unk00334_1001B5A0(unk00334 *this) {
  unk00228 *v2; // esi
  void *v3;     // eax
  unk00228 *v4; // edi
  unk0008C *v5; // eax

  v2 = this->field_324;
  if (v2) {
    do {
      v3 = v2->field_220;
      v4 = v2->last;
      if (v3)
        *((_DWORD *)v3 + 0x89) = v4;
      else
        this->field_324 = v4;
      if (v4)
        v4->field_220 = v3;
      else
        this->field_328 = (unk00228 *)v3;
      v2->last = 0;
      v2->field_220 = 0;
      if (v2) {
        meth_unk00228_1001AEE0(v2);
        operator delete(v2);
      }
      v2 = v4;
    } while (v4);
  }
  v5 = this->ddCapsFlags;
  this->field_320 = 0;
  LOBYTE(v5) = (unsigned __int8)v5 & 0xEF;
  this->field_324 = 0;
  this->field_328 = 0;
  this->ddCapsFlags = v5;
  return 0;
}

//----- (1001B630) --------------------------------------------------------
MACRO_DDERR __thiscall meth_unk00334_1001B630(unk00334 *this, unk00228 *a2) {
  unk00228 *v3; // edx
  unk00228 *v4; // edx
  unk00228 *v5; // edx

  if (!a2)
    return DDERR_INVALIDPARAMS;
  v3 = this->field_328;
  a2->last = 0;
  a2->field_220 = v3;
  v4 = this->field_328;
  if (v4)
    v4->last = a2;
  v5 = this->field_324;
  this->field_328 = a2;
  if (!v5)
    this->field_324 = a2;
  ++this->field_320;
  return 0;
}

//----- (1001B690) --------------------------------------------------------
int __thiscall meth_unk00334_1001B690(unk00334 *this, CLSID *a2, _DWORD *a3, unk00334 *a4) {
  _DWORD *v4;    // eax
  unk00228 *v5;  // esi
  unk00228 *v6;  // edi
  unk00228 *v7;  // edx
  unk00228 *v8;  // ebx
  void *v9;      // ecx
  unk00228 *v10; // ebp
  int result;    // eax
  unk00228 *v12; // [esp+10h] [ebp-Ch]
  unk00228 *v13; // [esp+14h] [ebp-8h]
  unk00228 *v14; // [esp+18h] [ebp-4h]
  unk00334 *v15; // [esp+28h] [ebp+Ch]

  v4 = a3;
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  if (a3)
    *a3 = 0;
  v8 = (unk00228 *)a4;
  if (!a4)
    v8 = this->field_324;
  v9 = v8;
  v15 = (unk00334 *)v8;
  if (v8) {
    while (1) {
      v10 = v8->last;
      if (meth_unk00228_MatchesGUID(v8, a2))
        break;
      if (meth_unk00228_DeviceDescHasDCMColorModel(v8) && !v5)
        v12 = v8;
      if (!memcmp(&v8->guid, &CLSID_IDirect3DRGBDevice, 0x10u) && !v14)
        v14 = v8;
      if (!memcmp(&v8->guid, &CLSID_IDirect3DMMXDevice, 0x10u) && !v13)
        v13 = v8;
      v8 = v10;
      if (!v10) {
        v4 = a3;
        v5 = v12;
        v6 = v13;
        v7 = v14;
        v9 = v15;
        goto LABEL_20;
      }
      v5 = v12;
    }
    result = (int)v8;
  } else {
  LABEL_20:
    if (v4) {
      if (v5) {
        *v4 = v5;
        return 0;
      }
      if (v7) {
        *v4 = v7;
        return 0;
      }
      if (v6) {
        *v4 = v6;
        return 0;
      }
      if (v9)
        *v4 = v9;
    }
    result = 0;
  }
  return result;
}

//----- (1001B7C0) --------------------------------------------------------
int __thiscall meth_unk00334_1001B7C0(
    unk00334 *this, CLSID *clsid, unk00334 *a3, unk00228 *a4, unk00228 *a5) {
  unk00228 *v6; // esi
  unk00228 *v7; // ebx

  if (!a3) {
    if (a4) {
      a4->field_0 = 0;
      return 0;
    }
    return 0;
  }
  v6 = a5;
  if (!a5)
    v6 = this->field_324;
  if (a4 && meth_unk00334_1001ACF0(a3, v6))
    a4->field_0 = v6;
  if (v6) {
    while (1) {
      v7 = v6->last;
      if (meth_unk00228_MatchesGUID(v6, clsid)) {
        if (meth_unk00334_1001ACF0(a3, v6))
          return (int)v6;
      } else {
        if (meth_unk00228_DeviceDescHasDCMColorModel(v6)) {
          if (!a4 || !meth_unk00334_1001ACF0(a3, v6))
              goto LABEL_20;
        } else if (!meth_unk00334_1001ACF0(a3, v6) || !a4) {
          goto LABEL_20;
        }
        a4->field_0 = v6;
      }
    LABEL_20:
      v6 = v7;
      if (!v7)
        return 0;
    }
  }
  return 0;
}

//----- (1001B880) --------------------------------------------------------
unk00334 *__thiscall meth_unk00334_1001B880(unk00334 *this,
                                            int width,
                                            int height,
                                            int bitDepth,
                                            unk00334 *a5,
                                            unk00228 *a2,
                                            _DWORD *a7,
                                            unk00334 *u0_1) {
  unk00334 *u334a; // esi
  unk00334 *u334b; // edi

  if (!a2) {
    if (a7) {
      *a7 = 0;
      return 0;
    }
    return 0;
  }
  u334a = u0_1;
  if (!u0_1)
    u334a = this->field_318;
  if (a7 && meth_unk00334_1001ACF0(u334a, a2))
    *a7 = u334a;
  if (u334a) {
    while (1) {
      u334b = u334a->? ;
      if (meth_unk00334_MatchesWidthHeightBitDepth(u334a, width, height, bitDepth)) {
        if (meth_unk00334_1001ACF0(u334a, a2))
          return u334a;
      } else {
        if (meth_unk00334_MatchesWidthHeightBitDepth(u334a, 640, 480, 16)) {
          if (!a7 || !meth_unk00334_1001ACF0(u334a, a2))
              goto LABEL_20;
        } else if (!meth_unk00334_1001ACF0(u334a, a2) || !a7) {
          goto LABEL_20;
        }
        *a7 = u334a;
      }
    LABEL_20:
      u334a = u334b;
      if (!u334b)
        return 0;
    }
  }
  return 0;
}

//----- (1001B960) --------------------------------------------------------
GUID *__thiscall meth_unk00334_GetDirectDrawGUID(unk00334 *this) {
  GUID *result; // eax

  if (((int)this->ddCapsFlags & 2) != 0)
    result = 0;
  else
    result = (GUID *)&this->lpGUID;
  return result;
}

//----- (1001B970) --------------------------------------------------------
HRESULT graphics_1001B970() {
  HRESULT result; // eax
  int v1;         // eax

  if ((gHasCalledDDrawEnum & 1) == 0) {
    dword_104BBE1C = NULL;
    result = graphics_ddrawEnum();
    if (result < 0) // failed
      return result;
    v1 = gHasCalledDDrawEnum;
    LOBYTE(v1) = gHasCalledDDrawEnum | 1;
    gHasCalledDDrawEnum = v1;
  }
  return 0;
}
// 104BBE18: using guessed type int gHasCalledDDrawEnum;
// 104BBE1C: using guessed type int dword_104BBE1C;

//----- (1001B9A0) --------------------------------------------------------
HRESULT graphics_ddrawEnum() {
  HRESULT result; // eax
  int context[3]; // [esp+0h] [ebp-Ch] BYREF

  context[0] = 1;
  context[1] = 0;
  context[2] = 0;
  result = DirectDrawEnumerateA((LPDDENUMCALLBACKA)graphics_ddrawEnumerateCallback, context);
  if (result >= 0) {
    if (context[0] && context[1] && dword_104BBE1C == context[1])
      result = 0;
    else
      result = -2005522671;
  }
  return result;
}
// 104BBE1C: using guessed type int dword_104BBE1C;

//----- (1001BA10) --------------------------------------------------------
int __cdecl s_unk00334_1001BA10(unk00334 *a1) {
  int v2; // ecx

  if (!a1)
    return -2147024809;
  v2 = dword_104BBE24;
  a1->last = 0;
  a1->field_32C = v2;
  if (dword_104BBE24)
    *(_DWORD *)(dword_104BBE24 + 816) = a1;
  dword_104BBE24 = (int)a1;
  if (!gUnk334Ptr1)
    gUnk334Ptr1 = a1;
  ++dword_104BBE1C;
  return 0;
}
// 104BBE1C: using guessed type int dword_104BBE1C;
// 104BBE24: using guessed type int dword_104BBE24;

//----- (1001BA70) --------------------------------------------------------
unk00334 *__cdecl s_clsid_1001BA70(CLSID *a1, unk00334 *a2, unk00334 *a3) {
  unk00334 *v3; // esi
  unk00334 *v4; // edi

  v3 = a3;
  if (!a3)
    v3 = gUnk334Ptr1;
  if (a2)
    a2->ddCapsFlags = (unk0008C *)v3;
  if (!v3)
    return 0;
  while (1) {
    v4 = v3->last;
    if (meth_unk00334_MatchesGUID(v3, a1))
      break;
    if (((int)v3->ddCapsFlags & 2) != 0) {
      if (a2)
        a2->ddCapsFlags = (unk0008C *)v3;
    }
    v3 = v4;
    if (!v4)
      return 0;
  }
  return v3;
}

//----- (1001BAD0) --------------------------------------------------------
int graphics_1001BAD0() {
  unk0008C *v0; // esi
  int result;   // eax

  v0 = gUnk8C;
  if (gD3DWaitCanFlip && (*(int(__stdcall **)(_DWORD, int))(
                             *(_DWORD *)LODWORD(gUnk8C->field_8.emissive.b) + 72))( // GetFlipStatus
                             LODWORD(gUnk8C->field_8.emissive.b),
                             1)) {
    while ((*(int(__stdcall **)(_DWORD, int))(*(_DWORD *)LODWORD(v0->field_8.emissive.b) + 72))(
        LODWORD(v0->field_8.emissive.b), 1))
      ;
  }
  (*(void(__stdcall **)(_DWORD, IDirectDrawSurface *, int))(
      *(_DWORD *)LODWORD(v0->field_8.emissive.b) + 44))( // Flip()
      LODWORD(v0->field_8.emissive.b),
      v0->lpDirectDrawSurface1,
      1);
  result = gD3DWaitFlipDone;
  if (gD3DWaitFlipDone) {
    for (result = (*(int(__stdcall **)(_DWORD, int))(*(_DWORD *)LODWORD(v0->field_8.emissive.b) +
                                                     72))( // GetFlipStatus
             LODWORD(v0->field_8.emissive.b),
             2);
         result;
         result = (*(int(__stdcall **)(_DWORD, int))(*(_DWORD *)LODWORD(v0->field_8.emissive.b) +
                                                     72))(LODWORD(v0->field_8.emissive.b), 2)) {
      ;
    }
  }
  *(&stru_10277680 + 8) = 0;
  return result;
}
// 1001BAD0: using guessed type int graphics_1001BAD0();
// 100A62F8: using guessed type int gD3DWaitCanFlip;
// 100A62FC: using guessed type int gD3DWaitFlipDone;

//----- (1001BAE0) --------------------------------------------------------
int graphics_1001BAE0() {
  dword_10690A24 = graphics_1001BAD0;
  dword_10690A28 = (int (*)(void))meth_DebugPrint;
  return 1;
}
// 1001BAD0: using guessed type int sub_1001BAD0();
// 10690A24: using guessed type int (*dword_10690A24)(void);
// 10690A28: using guessed type int (*dword_10690A28)(void);

//----- (1001BB00) --------------------------------------------------------
int __cdecl graphics_1001BB00(int a1, int a2, int a3, int a4) {
  if (!graphics_1007AC20(a1, a2, a3, (unk00334 *)a4) &&
      (a1 != g_Width1 || a2 != g_Height1 || a3 != g_BitDepth ||
       a4 != *(_DWORD *)&gUnk06594.gap1C8[12540])) {
    meth_unk0008C_1000B4D0(gUnk8C, a1, a2, a3, a4);
    if (!LODWORD(gUnk8C->field_8.diffuse.r))
      meth_unk0008C_1000B4D0(gUnk8C, 640, 480, 16, 0);
  }
  return graphics_1001BAE0();
}
// 100AA8A8: using guessed type int g_BitDepth;
// 106C0684: using guessed type int g_Width1;
// 106C299C: using guessed type int g_Height1;

//----- (1001BB90) --------------------------------------------------------
int graphics_1001BB90() {
  int result; // eax

  result = gWidth;
  gWidth2 = gWidth;
  return result;
}
// 100A81C0: using guessed type int g_Width;
// 104C5164: using guessed type int dword_104C5164;

//----- (1001BBB0) --------------------------------------------------------
int graphics_1001BBB0() {
  int result; // eax

  result = gHeight;
  gHeight2 = gHeight;
  return result;
}
// 100A81C4: using guessed type int gHeight;
// 104C01A0: using guessed type int gHeight2;

//----- (1001BBD0) --------------------------------------------------------
int graphics_1001BBD0() {
  int result; // eax

  result = gWidth / 2;
  flt_104BBF08 = (float)(gWidth / 2);
  return result;
}
// 100A81C0: using guessed type int g_Width;
// 104BBF08: using guessed type float flt_104BBF08;

//----- (1001BC00) --------------------------------------------------------
int graphics_1001BC00() {
  int result; // eax

  result = gHeight / -2;
  flt_104BC198 = (float)(gHeight / -2);
  return result;
}
// 100A81C4: using guessed type int g_Height;
// 104BC198: using guessed type float flt_104BC198;

//----- (1001BC30) --------------------------------------------------------
int graphics_1001BC30() {
  int result; // eax

  result = gWidth / 2;
  flt_104C0BB0 = (float)(gWidth / 2);
  return result;
}
// 100A81C0: using guessed type int g_Width;
// 104C0BB0: using guessed type float flt_104C0BB0;

//----- (1001BC60) --------------------------------------------------------
int graphics_1001BC60() {
  int result; // eax

  result = gHeight / 2;
  flt_104C0BB8 = (float)(gHeight / 2);
  return result;
}
// 100A81C4: using guessed type int g_Height;
// 104C0BB8: using guessed type float flt_104C0BB8;

//----- (1001BC90) --------------------------------------------------------
int __cdecl graphics_1001BC90(unsigned int a1) {
  int result; // eax
  int v3;     // eax
  _DWORD *v4; // ecx
  int v5;     // [esp+Ch] [ebp-8h]
  int v6;     // [esp+10h] [ebp-4h]
  float v7;   // [esp+1Ch] [ebp+8h]
  float v8;   // [esp+1Ch] [ebp+8h]
  float v9;   // [esp+1Ch] [ebp+8h]

  if (a1 >= (unsigned int)flt_104C16D0 && a1 < (unsigned int)flt_104C4CD0) {
    result = *(_DWORD *)(a1 + 104);
    if (result != -1)
      return result;
    *(_DWORD *)(a1 + 104) = gVertexCount;
    v3 = dword_104C5190;
    dword_104C0BC0[dword_104C5190] = a1;
    dword_104C5190 = v3 + 1;
  }
  result = gVertexCount++;
  v7 = *(float *)(a1 + 12) * 255.0;
  v6 = (int)v7;
  v8 = *(float *)(a1 + 16) * 255.0;
  v5 = (int)v8;
  v9 = *(float *)(a1 + 20) * 255.0;
  v4 = (_DWORD *)((char *)&gVertices + 32 * result);
  *v4 = *(_DWORD *)a1;
  v4[1] = *(_DWORD *)(a1 + 4);
  v4[2] = *(_DWORD *)(a1 + 8);
  v4[3] = *(_DWORD *)(a1 + 32);
  v4[4] = (int)v9 | ((v5 | ((v6 | 0xFFFFFF00) << 8)) << 8);
  v4[6] = *(_DWORD *)(a1 + 36);
  v4[7] = *(_DWORD *)(a1 + 40);
  return result;
}
// 104C5188: using guessed type int gVertexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001BD70) --------------------------------------------------------
_DWORD *__cdecl graphics_1001BD70(_DWORD *a1) {
  int v1;  // esi
  int v2;  // eax
  int *v3; // ecx
  int v4;  // ebp

  v1 = *a1 & 0xFFFFFF;
  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v2 = 0;
    if (dword_104C5190 > 0) {
      v3 = dword_104C0BC0;
      do {
        v4 = *v3;
        ++v2;
        ++v3;
        *(_DWORD *)(v4 + 104) = -1;
      } while (v2 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
  dword_118AA0B4(v1);
  return &a1[2 * a1[1]];
}
// 104C5188: using guessed type int gVertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA0B4: using guessed type int (__cdecl *dword_118AA0B4)(_DWORD);

//----- (1001BE10) --------------------------------------------------------
_DWORD *__cdecl sub_1001BE10(_DWORD *a1) {
  dword_118AA0B8(*a1 & 0xFFFFFF, a1[1]);
  return a1 + 2;
}
// 118AA0B8: using guessed type int (__cdecl *dword_118AA0B8)(_DWORD, _DWORD);

//----- (1001BE30) --------------------------------------------------------
_DWORD *__cdecl graphics_1001BE30(_DWORD *a1) {
  graphics_1001BE90(((int)(a1[1] << 8) >> 22) & 0x3FF,
                    gHeight - (((int)(*a1 << 20) >> 22) & 0x3FF) - 1,
                    (((int)(*a1 << 8) >> 22) & 0x3FF) + 1,
                    gHeight - (((int)(a1[1] << 20) >> 22) & 0x3FF));
  return a1 + 2;
}
// 100A81C4: using guessed type int g_Height;

//----- (1001BE90) --------------------------------------------------------
HRESULT __cdecl graphics_1001BE90(int a1, int a2, int a3, int a4) {
  int v4;                    // edi
  int v5;                    // esi
  int v6;                    // ebx
  __int64 v7;                // rax
  int v8;                    // eax
  char v9;                   // al
  char v10;                  // al
  char v11;                  // al
  unsigned __int16 v12;      // cx
  int v13;                   // ebp
  IDirect3DDevice2Vtbl *v14; // edx
  IDirect3DDevice2Vtbl *v15; // edx
  HRESULT result;            // eax
  DWORD v17;                 // eax
  _DWORD *v18;               // esi
  LPDIRECT3DVIEWPORT2 v19;   // edi
  unsigned __int8 v20;       // [esp+D4h] [ebp-A0h]
  float v21;                 // [esp+D4h] [ebp-A0h]
  float v22;                 // [esp+D4h] [ebp-A0h]
  float v23;                 // [esp+D4h] [ebp-A0h]
  float v24;                 // [esp+D4h] [ebp-A0h]
  unsigned __int8 v25;       // [esp+D8h] [ebp-9Ch]
  float v26;                 // [esp+D8h] [ebp-9Ch]
  float v27;                 // [esp+D8h] [ebp-9Ch]
  float v28;                 // [esp+D8h] [ebp-9Ch]
  char v29;                  // [esp+DFh] [ebp-95h]
  unsigned __int8 v30;       // [esp+E0h] [ebp-94h]
  float v31;                 // [esp+E0h] [ebp-94h]
  float v32;                 // [esp+E0h] [ebp-94h]
  int v33[8];                // [esp+E4h] [ebp-90h] BYREF
  int v34;                   // [esp+104h] [ebp-70h] BYREF
  float v35;                 // [esp+108h] [ebp-6Ch]
  int v36;                   // [esp+10Ch] [ebp-68h]
  int v37;                   // [esp+110h] [ebp-64h]
  char v38[32];              // [esp+114h] [ebp-60h] BYREF
  char v39[32];              // [esp+134h] [ebp-40h] BYREF
  char v40[32];              // [esp+154h] [ebp-20h] BYREF

  v4 = a1;
  if (a1 < minX) {
    v4 = minX;
    a1 = minX;
  }
  if (a2 < dword_104C5170)
    a2 = dword_104C5170;
  v5 = a3;
  if (a3 > gWidth2) {
    v5 = gWidth2;
    a3 = gWidth2;
  }
  v6 = a4;
  if (a4 > gHeight2) {
    a4 = gHeight2;
    v6 = gHeight2;
  }
  if (dword_104C5158 == -50331649 && dword_104C515C == -133381) {
    v30 = (__int64)(flt_104C5154 * 255.0);
    v25 = (__int64)(flt_104C5160 * 255.0);
    v20 = (__int64)(flt_104C1690 * 255.0);
    v7 = (__int64)(flt_104C0BA8 * 255.0);
  } else {
    v30 = byte_104BBF00;
    LOBYTE(v7) = byte_104C15CC;
    v25 = byte_104BC194;
    v20 = byte_104C5150;
  }
  v29 = v7;
  if (dword_104C1694 == 5260096) {
    off_100A79EC = graphics_1001C690;
    if (!*(_DWORD *)&gUnk06594.gap1C8[12496])
      off_100A79EC = graphics_1001BC90;
    dword_10277380 = 5;
    v8 = dword_10277370;
    if (dword_10277400 == 5)
      LOBYTE(v8) = dword_10277370 & 0xFB;
    else
      LOBYTE(v8) = dword_10277370 | 4;
    dword_10277384 = 6;
    if (dword_10277404 == 6)
      LOBYTE(v8) = v8 & 0xF7;
    else
      v8 |= 8u;
    dword_10277390 = 0;
    if (dword_10277410)
      v9 = v8 | 0x40;
    else
      v9 = v8 & 0xBF;
    dword_104BBE28 = 8;
    dword_10277394 = 8;
    if (dword_10277414 == 8)
      v10 = v9 & 0x7F;
    else
      v10 = v9 | 0x80;
    renderState = 0;
    if (dword_102773FC)
      v11 = v10 | 2;
    else
      v11 = v10 & 0xFD;
    dword_102773A0 = 1;
    if (dword_10277420 == 1)
      BYTE1(v8) &= 0xFBu;
    else
      BYTE1(v8) |= 4u;
    dword_104C16A0 = 8;
    dword_1027738C = 8;
    if (dword_1027740C == 8)
      LOBYTE(v8) = v11 & 0xDF;
    else
      LOBYTE(v8) = v11 | 0x20;
    renderState_0 = 0;
    if (dword_102773F8)
      v8 |= 1u;
    else
      LOBYTE(v8) = v8 & 0xFE;
    dword_10277370 = v8;
    if (v8) {
      if (gIndexedPrimitiveIndexCount) {
        g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                   D3DPT_TRIANGLELIST,
                                                   D3DVT_TLVERTEX,
                                                   &gVertices,
                                                   gVertexCount,
                                                   &g_indexedPrimitiveIndices,
                                                   gIndexedPrimitiveIndexCount,
                                                   12);
        graphics_1001C640();
        LOWORD(v8) = dword_10277370;
      }
      if ((v8 & 1) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
        LOWORD(v8) = dword_10277370;
        dword_102773F8 = renderState_0;
      }
      if ((v8 & 2) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
        dword_102773FC = renderState;
        LOWORD(v8) = dword_10277370;
      }
      if ((v8 & 4) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
        dword_10277400 = dword_10277380;
        LOWORD(v8) = dword_10277370;
      }
      if ((v8 & 8) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
        dword_10277404 = dword_10277384;
        LOWORD(v8) = dword_10277370;
      }
      if ((v8 & 0x10) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
        dword_10277408 = dword_10277388;
        LOWORD(v8) = dword_10277370;
      }
      if ((v8 & 0x20) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
        dword_1027740C = dword_1027738C;
        LOWORD(v8) = dword_10277370;
      }
      if ((v8 & 0x40) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
        dword_10277410 = dword_10277390;
        LOWORD(v8) = dword_10277370;
      }
      if ((v8 & 0x80u) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
        dword_10277414 = dword_10277394;
        BYTE1(v8) = BYTE1(dword_10277370);
      }
      if ((v8 & 0x100) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(
            g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
        dword_10277418 = dword_10277398;
        BYTE1(v8) = BYTE1(dword_10277370);
      }
      if ((v8 & 0x200) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(
            g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
        dword_1027741C = dword_1027739C;
        BYTE1(v8) = BYTE1(dword_10277370);
      }
      if ((v8 & 0x400) != 0) {
        g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
        dword_10277420 = dword_102773A0;
      }
      dword_10277370 = 0;
    }
    HIBYTE(v12) = v29;
    LOBYTE(v12) = v30;
    v13 = v20 | ((v25 | (v12 << 8)) << 8);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, (D3DRENDERSTATETYPE)1, 0);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, 1);
    v33[2] = 0;
    v33[6] = 0;
    v33[7] = 0;
    v33[3] = 1065353216;
    v33[4] = v13;
    v33[5] = -16776961;
    v21 = (float)(gHeight - v6);
    v35 = v21;
    *(float *)&v33[1] = v21;
    v22 = (float)a1;
    *(float *)v33 = v22;
    qmemcpy(v38, v33, sizeof(v38));
    v33[2] = 0;
    v33[3] = 1065353216;
    v33[4] = v13;
    v33[5] = -16776961;
    v33[6] = 1065353216;
    v26 = (float)(gHeight - a2);
    v33[7] = 1065353216;
    *(float *)&v33[1] = v26;
    v31 = (float)a3;
    *(float *)v33 = v31;
    qmemcpy(v39, v33, sizeof(v39));
    *(float *)&v33[1] = v26;
    *(float *)v33 = v22;
    v33[2] = 0;
    v33[3] = 1065353216;
    v33[4] = v13;
    v33[5] = -16776961;
    v33[6] = 0;
    v33[7] = 1065353216;
    v14 = g_D3DDevice2->lpVtbl;
    qmemcpy(v40, v33, sizeof(v40));
    v14->DrawPrimitive(g_D3DDevice2, D3DPT_TRIANGLELIST, D3DVT_TLVERTEX, v38, 3, 9);
    *(float *)v33 = v22;
    v33[2] = 0;
    v33[3] = 1065353216;
    v27 = (float)(gHeight - a4);
    v33[4] = v13;
    *(float *)&v33[1] = v27;
    v33[5] = -16776961;
    v33[6] = 0;
    v33[7] = 0;
    qmemcpy(v38, v33, sizeof(v38));
    *(float *)v33 = v31;
    *(float *)&v33[1] = v27;
    v33[2] = 0;
    v33[3] = 1065353216;
    v33[4] = v13;
    v33[5] = -16776961;
    v33[6] = 1065353216;
    v33[7] = 0;
    qmemcpy(v39, v33, sizeof(v39));
    *(float *)v33 = v31;
    v33[2] = 0;
    v33[3] = 1065353216;
    v23 = (float)(gHeight - a2);
    v35 = v23;
    v15 = g_D3DDevice2->lpVtbl;
    *(float *)&v33[1] = v23;
    v33[4] = v13;
    v33[5] = -16776961;
    v33[6] = 1065353216;
    v33[7] = 1065353216;
    qmemcpy(v40, v33, sizeof(v40));
    v15->DrawPrimitive(g_D3DDevice2, D3DPT_TRIANGLELIST, D3DVT_TLVERTEX, v38, 3, 9);
    result = g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277408);
  } else {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      graphics_1001C640();
    }
    LODWORD(v35) = gHeight - v6;
    v32 = (float)v30;
    v37 = gHeight - a2;
    v34 = v4;
    v36 = v5;
    v17 = gUnk8C->field_8.dwSize;
    *(float *)(v17 + 4) = v32 * 0.0039215689;
    *(_DWORD *)(v17 + 88) = 1;
    v28 = (float)v25;
    *(float *)(v17 + 8) = v28 * 0.0039215689;
    v24 = (float)v20;
    *(float *)(v17 + 12) = v24 * 0.0039215689;
    v18 = (_DWORD *)gUnk8C->field_8.dwSize;
    v19 = gUnk8C->lpDirect3DViewport2;
    v18[19] = 1;
    v18[22] = 1;
    meth_1001C620(v18);
    v19->lpVtbl->SetBackground(v19, v18[20]);
    result = gUnk8C->lpDirect3DViewport2->lpVtbl->Clear(
        gUnk8C->lpDirect3DViewport2, 1, (LPD3DRECT)&v34, 3);
  }
  return result;
}
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 100A81C4: using guessed type int gHeight;
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104BBE28: using guessed type int dword_104BBE28;
// 104BBF00: using guessed type char byte_104BBF00;
// 104BC194: using guessed type char byte_104BC194;
// 104C01A0: using guessed type int gHeight2;
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C15CC: using guessed type char byte_104C15CC;
// 104C1690: using guessed type float flt_104C1690;
// 104C1694: using guessed type int dword_104C1694;
// 104C16A0: using guessed type int dword_104C16A0;
// 104C5150: using guessed type char byte_104C5150;
// 104C5154: using guessed type float flt_104C5154;
// 104C5158: using guessed type int dword_104C5158;
// 104C515C: using guessed type int dword_104C515C;
// 104C5160: using guessed type float flt_104C5160;
// 104C5164: using guessed type int gWidth2;
// 104C516C: using guessed type int minX;
// 104C5170: using guessed type int dword_104C5170;
// 104C5188: using guessed type int gVertexCount;
// 104C518C: using guessed type int gIndexedPrimitiveIndexCount;

//----- (1001C620) --------------------------------------------------------
int __thiscall meth_1001C620(_DWORD *this) {
  int v2; // [esp-8h] [ebp-8h]

  if (!this[0x16])
    return 0;
  v2 = this[21];
  this[22] = 0;
  return (*(int(__stdcall **)(int, _DWORD *))(*(_DWORD *)v2 + 12))(v2, this);
}

//----- (1001C640) --------------------------------------------------------
int graphics_1001C640() {
  int result; // eax
  int *v1;    // ecx
  int v2;     // edi

  result = 0;
  if (dword_104C5190 > 0) {
    v1 = dword_104C0BC0;
    do {
      v2 = *v1;
      ++result;
      ++v1;
      *(_DWORD *)(v2 + 104) = -1;
    } while (result < dword_104C5190);
  }
  gIndexedPrimitiveIndexCount = 0;
  gVertexCount = 0;
  dword_104C5190 = 0;
  return result;
}
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001C690) --------------------------------------------------------
int __cdecl graphics_1001C690(unsigned int a1) {
  int result; // eax
  int v3;     // eax
  int v4;     // ebx
  _DWORD *v5; // esi
  __int64 v6; // rax
  int v7;     // [esp+10h] [ebp-8h]
  int v8;     // [esp+14h] [ebp-4h]
  float v9;   // [esp+20h] [ebp+8h]
  float v10;  // [esp+20h] [ebp+8h]
  float v11;  // [esp+20h] [ebp+8h]

  if (a1 >= (unsigned int)flt_104C16D0 && a1 < (unsigned int)flt_104C4CD0) {
    result = *(_DWORD *)(a1 + 104);
    if (result != -1)
      return result;
    *(_DWORD *)(a1 + 104) = gVertexCount;
    v3 = dword_104C5190;
    dword_104C0BC0[dword_104C5190] = a1;
    dword_104C5190 = v3 + 1;
  }
  v4 = gVertexCount++;
  v9 = *(float *)(a1 + 12) * 255.0;
  v8 = (int)v9;
  v10 = *(float *)(a1 + 16) * 255.0;
  v7 = (int)v10;
  v11 = *(float *)(a1 + 20) * 255.0;
  v5 = (_DWORD *)((char *)&gVertices + 32 * v4);
  *v5 = *(_DWORD *)a1;
  v5[1] = *(_DWORD *)(a1 + 4);
  v5[2] = *(_DWORD *)(a1 + 8);
  v5[3] = *(_DWORD *)(a1 + 32);
  v5[4] = (int)v11 | ((v7 | ((v8 | 0xFFFFFF00) << 8)) << 8);
  v6 = (__int64)(flt_104C15C8 * *(float *)(a1 + 32));
  if ((int)v6 < dword_104BBE30)
    LODWORD(v6) = 0;
  if ((int)v6 > 255)
    LODWORD(v6) = 255;
  v5[5] = (_DWORD)v6 << 24;
  v5[6] = *(_DWORD *)(a1 + 36);
  v5[7] = *(_DWORD *)(a1 + 40);
  return v4;
}
// 104BBE30: using guessed type int dword_104BBE30;
// 104C15C8: using guessed type float flt_104C15C8;
// 104C5188: using guessed type int g_vertexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001C7A0) --------------------------------------------------------
_DWORD *__cdecl graphics_1001C7A0(_DWORD *a1) {
  graphics_1001BE90((int)(a1[1] << 8) >> 20,
                    gHeight - ((int)(*a1 << 20) >> 20) - 1,
                    ((int)(*a1 << 8) >> 20) + 1,
                    gHeight - ((int)(a1[1] << 20) >> 20));
  return a1 + 2;
}
// 100A81C4: using guessed type int g_Height;

//----- (1001C7F0) --------------------------------------------------------
int *__cdecl graphics_1001C7F0(int *a1) {
  dword_104C5158 = *a1;
  dword_104C515C = a1[1];
  graphics_1001C820(dword_104C5158, dword_104C515C);
  return a1 + 2;
}
// 104C5158: using guessed type int dword_104C5158;
// 104C515C: using guessed type int dword_104C515C;

//----- (1001C820) --------------------------------------------------------
int(__cdecl *__cdecl graphics_1001C820(int a1, int a2))(int) {
  int v2;                     // edx
  int(__cdecl * result)(int); // eax

  v2 = 0;
  dword_104C0DC0 = 0;
  if (a1 == -50331649 && a2 == -198532) {
    dword_104C0BB4 = -1;
    goto LABEL_35;
  }
  if (a1 == -50331649 && a2 == -100036) {
    if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
      off_100A79EC = graphics_1001C690;
      goto LABEL_41;
    }
  LABEL_40:
    off_100A79EC = graphics_1001BC90;
    goto LABEL_41;
  }
  if (a1 == -61440340 && a2 == -3079)
    goto LABEL_34;
  if (a1 == -50358273 && a2 == -13762817) {
    if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
      off_100A79EC = graphics_1001C690;
      goto LABEL_41;
    }
    goto LABEL_40;
  }
  if (a1 == -50331649) {
    if (a2 == -134407) {
      if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
        off_100A79EC = graphics_1001C690;
        goto LABEL_41;
      }
      goto LABEL_40;
    }
    if (a2 == -35911) {
      dword_104C0BB4 = -1;
      goto LABEL_35;
    }
  }
  if (a1 != -65896952 || a2 != -201329928) {
    if (a1 == -63865342 && (a2 == 1610544122 || a2 == 1375663098)) {
      off_100A79EC = graphics_1001C690;
      if (!*(_DWORD *)&gUnk06594.gap1C8[12496])
        off_100A79EC = graphics_1001BC90;
      v2 = 1;
      dword_104C0DC0 = 1;
      goto LABEL_41;
    }
    if (a1 != -65896449 || a2 != -1992) {
      if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
        off_100A79EC = graphics_1001C690;
        goto LABEL_41;
      }
      goto LABEL_40;
    }
  LABEL_34:
    dword_104C0BB4 = -16777216;
  LABEL_35:
    if (*(_DWORD *)&gUnk06594.gap1C8[12496])
      off_100A79EC = (int(__cdecl *)(_DWORD))graphics_1001CA90;
    else
      off_100A79EC = (int(__cdecl *)(_DWORD))graphics_1001CA10;
    goto LABEL_41;
  }
  if (*(_DWORD *)&gUnk06594.gap1C8[12500] || *(_DWORD *)&gUnk06594.gap1C8[12508]) {
    if (*(_DWORD *)&gUnk06594.gap1C8[12496]) {
      off_100A79EC = graphics_1001C690;
      goto LABEL_41;
    }
    goto LABEL_40;
  }
LABEL_41:
  result = off_100A7A00[0];
  if (v2) {
    if ((_DWORD * (__cdecl *)(_DWORD *)) off_100A7A00[0] == sub_10021E80)
      off_100A7A00[0] = (int(__cdecl *)(int))sub_10022480;
  } else if ((_DWORD * (__cdecl *)(_DWORD *)) off_100A7A00[0] == sub_10022480) {
    off_100A7A00[0] = (int(__cdecl *)(int))sub_10021E80;
  }
  return result;
}
// 1001C8E7: conditional instruction was optimized away because of '%arg_0.4==FCFFFFFF'
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 100A7A00: using guessed type int (__cdecl *off_100A7A00[180])(int);
// 104C0BB4: using guessed type int dword_104C0BB4;
// 104C0DC0: using guessed type int dword_104C0DC0;

//----- (1001CA10) --------------------------------------------------------
int __cdecl graphics_1001CA10(float *a1) {
  int result; // eax
  int v2;     // eax
  float *v3;  // ecx

  if (a1 >= flt_104C16D0 && a1 < flt_104C4CD0) {
    result = *((_DWORD *)a1 + 26);
    if (result != -1)
      return result;
    *((_DWORD *)a1 + 26) = gVertexCount;
    v2 = dword_104C5190;
    dword_104C0BC0[dword_104C5190] = (int)a1;
    dword_104C5190 = v2 + 1;
  }
  result = gVertexCount++;
  v3 = (float *)((char *)&gVertices + 32 * result);
  *v3 = *a1;
  v3[1] = a1[1];
  v3[2] = a1[2];
  v3[3] = a1[8];
  *((_DWORD *)v3 + 4) = dword_104C0BB4;
  v3[6] = a1[9];
  v3[7] = a1[10];
  return result;
}
// 104C0BB4: using guessed type int dword_104C0BB4;
// 104C5188: using guessed type int g_vertexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001CA90) --------------------------------------------------------
int __cdecl graphics_1001CA90(float *a1) {
  int result; // eax
  int v2;     // eax
  int v3;     // ebx
  int v4;     // esi
  float *v5;  // esi
  __int64 v6; // rax

  if (a1 >= flt_104C16D0 && a1 < flt_104C4CD0) {
    result = *((_DWORD *)a1 + 26);
    if (result != -1)
      return result;
    *((_DWORD *)a1 + 26) = gVertexCount;
    v2 = dword_104C5190;
    dword_104C0BC0[dword_104C5190] = (int)a1;
    dword_104C5190 = v2 + 1;
  }
  v3 = gVertexCount;
  v4 = gVertexCount++;
  v5 = (float *)((char *)&gVertices + 32 * v4);
  *v5 = *a1;
  v5[1] = a1[1];
  v5[2] = a1[2];
  v5[3] = a1[8];
  *((_DWORD *)v5 + 4) = dword_104C0BB4;
  v6 = (__int64)(flt_104C15C8 * a1[8]);
  if ((int)v6 < dword_104BBE30)
    LODWORD(v6) = 0;
  if ((int)v6 > 255)
    LODWORD(v6) = 255;
  *((_DWORD *)v5 + 5) = (_DWORD)v6 << 24;
  v5[6] = a1[9];
  v5[7] = a1[10];
  return v3;
}
// 104BBE30: using guessed type int dword_104BBE30;
// 104C0BB4: using guessed type int dword_104C0BB4;
// 104C15C8: using guessed type float flt_104C15C8;
// 104C5188: using guessed type int gVertexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001CB40) --------------------------------------------------------
int __cdecl sub_1001CB40(int a1) {
  int v2;     // edx
  int result; // eax
  __int64 v4; // [esp+0h] [ebp-8h]
  float v5;   // [esp+Ch] [ebp+4h]
  float v6;   // [esp+Ch] [ebp+4h]
  float v7;   // [esp+Ch] [ebp+4h]
  float v8;   // [esp+Ch] [ebp+4h]

  v5 = (float)HIBYTE(*(_DWORD *)(a1 + 4));
  flt_104BBF04 = v5 * 0.0039215689;
  v6 = (float)(unsigned __int8)BYTE2(*(_DWORD *)(a1 + 4));
  flt_104C0BAC = v6 * 0.0039215689;
  v4 = (unsigned __int8)BYTE1(*(_DWORD *)(a1 + 4));
  v7 = (float)v4;
  flt_104BBEB8 = v7 * 0.0039215689;
  v2 = (unsigned __int8)*(_DWORD *)(a1 + 4);
  result = a1 + 8;
  LODWORD(v4) = v2;
  v8 = (float)v4;
  flt_104BBE2C = v8 * 0.0039215689;
  return result;
}
// 104BBE2C: using guessed type float flt_104BBE2C;
// 104BBEB8: using guessed type float flt_104BBEB8;
// 104BBF04: using guessed type float flt_104BBF04;
// 104C0BAC: using guessed type float flt_104C0BAC;

//----- (1001CC00) --------------------------------------------------------
int __cdecl sub_1001CC00(int a1) {
  int result; // eax

  byte_104BBF00 =
      BYTE1(*(_DWORD *)(a1 + 4)) ^ (BYTE1(*(_DWORD *)(a1 + 4)) ^ (*(_DWORD *)(a1 + 4) >> 13)) & 7;
  byte_104BC194 =
      (*(_DWORD *)(a1 + 4) >> 3) ^ ((*(_DWORD *)(a1 + 4) >> 3) ^ BYTE1(*(_DWORD *)(a1 + 4))) & 7;
  byte_104C5150 = (*(_DWORD *)(a1 + 4) >> 3) & 7 | (4 * (*(_BYTE *)(a1 + 4) & 0xFE));
  result = a1 + 8;
  byte_104C15CC = -((*(_DWORD *)(a1 + 4) & 1) != 0);
  return result;
}
// 104BBF00: using guessed type char byte_104BBF00;
// 104BC194: using guessed type char byte_104BC194;
// 104C15CC: using guessed type char byte_104C15CC;
// 104C5150: using guessed type char byte_104C5150;

//----- (1001CC70) --------------------------------------------------------
int __cdecl graphics_1001CC70(int a1) {
  g_D3DDevice2->lpVtbl->SetRenderState(
      g_D3DDevice2, D3DRS_FOGCOLOR, (*(_DWORD *)(a1 + 4) >> 8) | (*(_DWORD *)(a1 + 4) << 24));
  return a1 + 8;
}

//----- (1001CCA0) --------------------------------------------------------
int __cdecl sub_1001CCA0(int a1) {
  int v2;     // edx
  int result; // eax
  __int64 v4; // [esp+0h] [ebp-8h]
  float v5;   // [esp+Ch] [ebp+4h]
  float v6;   // [esp+Ch] [ebp+4h]
  float v7;   // [esp+Ch] [ebp+4h]
  float v8;   // [esp+Ch] [ebp+4h]

  v5 = (float)HIBYTE(*(_DWORD *)(a1 + 4));
  flt_104C5154 = v5 * 0.0039215689;
  v6 = (float)(unsigned __int8)BYTE2(*(_DWORD *)(a1 + 4));
  flt_104C5160 = v6 * 0.0039215689;
  v4 = (unsigned __int8)BYTE1(*(_DWORD *)(a1 + 4));
  v7 = (float)v4;
  flt_104C1690 = v7 * 0.0039215689;
  v2 = (unsigned __int8)*(_DWORD *)(a1 + 4);
  result = a1 + 8;
  LODWORD(v4) = v2;
  v8 = (float)v4;
  flt_104C0BA8 = v8 * 0.0039215689;
  return result;
}
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C1690: using guessed type float flt_104C1690;
// 104C5154: using guessed type float flt_104C5154;
// 104C5160: using guessed type float flt_104C5160;

//----- (1001CD60) --------------------------------------------------------
int __cdecl sub_1001CD60(int a1) {
  int result; // eax

  result = a1 + 8;
  dword_100A79E8 = *(_DWORD *)(a1 + 4);
  return result;
}
// 100A79E8: using guessed type int dword_100A79E8;

//----- (1001CD80) --------------------------------------------------------
int __cdecl sub_1001CD80(int a1) {
  int result; // eax

  result = a1 + 8;
  dword_104C5174 = *(_DWORD *)(a1 + 4);
  return result;
}
// 104C5174: using guessed type int dword_104C5174;

//----- (1001CDA0) --------------------------------------------------------
unsigned int *__cdecl graphics_1001CDA0(unsigned int *a1) {
  unsigned int v1;                        // eax
  unsigned int v2;                        // edx
  signed int maxX;                        // edx
  unsigned int v4;                        // edi
  IDirect3DDevice2Vtbl *d3dDevice2LPVtbl; // ecx
  D3DCLIPSTATUS v7;                       // [esp+8h] [ebp-20h] BYREF

  v7.dwFlags = 2;
  v1 = *a1;
  v7.dwStatus = 0x1FFF000;
  v7.minz = 0.0;
  minX = (v1 >> 14) & 0x3FF;
  v2 = *a1;
  v7.maxz = 1.0;
  gHeight2 = gHeight - ((v2 >> 2) & 0x3FF);
  maxX = (a1[1] >> 14) & 0x3FF;
  v7.minx = (float)minX;
  gWidth2 = maxX;
  v4 = (a1[1] >> 2) & 0x3FF;
  v7.maxx = (float)maxX;
  dword_104C5170 = gHeight - v4;
  v7.miny = (float)(gHeight - gHeight2);
  d3dDevice2LPVtbl = g_D3DDevice2->lpVtbl;
  v7.maxy = (float)(int)(gHeight - (gHeight - v4));
  d3dDevice2LPVtbl->SetClipStatus(g_D3DDevice2, &v7);
  return a1 + 2;
}
// 100A81C4: using guessed type int gHeight;
// 104C01A0: using guessed type int dword_104C01A0;
// 104C5164: using guessed type int dword_104C5164;
// 104C516C: using guessed type int minX;
// 104C5170: using guessed type int dword_104C5170;

//----- (1001CE70) --------------------------------------------------------
unsigned int *__cdecl graphics_1001CE70(unsigned int *a1) {
  unsigned int v1;                        // eax
  unsigned int v2;                        // edx
  unsigned int v3;                        // edx
  double v4;                              // st7
  unsigned int v5;                        // edx
  IDirect3DDevice2Vtbl *d3dDevice2LPVtbl; // ecx
  D3DCLIPSTATUS d3dClipStatus;            // [esp+8h] [ebp-20h] BYREF

  d3dClipStatus.dwFlags = 2;
  v1 = *a1;
  d3dClipStatus.dwStatus = 33550336;
  d3dClipStatus.minz = 0.0;
  minX = (v1 >> 12) & 0xFFF;
  v2 = *a1 & 0xFFF;
  d3dClipStatus.maxz = 1.0;
  gHeight2 = gHeight - v2;
  v3 = a1[1] >> 12;
  d3dClipStatus.minx = (float)minX;
  gWidth2 = v3 & 0xFFF;
  v4 = (double)(v3 & 0xFFF);
  v5 = gHeight - (a1[1] & 0xFFF);
  d3dClipStatus.maxx = v4;
  dword_104C5170 = v5;
  d3dClipStatus.miny = (float)(gHeight - gHeight2);
  d3dDevice2LPVtbl = g_D3DDevice2->lpVtbl;
  d3dClipStatus.maxy = (float)(int)(gHeight - v5);
  d3dDevice2LPVtbl->SetClipStatus(g_D3DDevice2, &d3dClipStatus);
  return a1 + 2;
}
// 100A81C4: using guessed type int g_Height;
// 104C01A0: using guessed type int dword_104C01A0;
// 104C5164: using guessed type int dword_104C5164;
// 104C516C: using guessed type int minX;
// 104C5170: using guessed type int dword_104C5170;

//----- (1001CF30) --------------------------------------------------------
_DWORD *__cdecl sub_1001CF30(_DWORD *a1) {
  int v1;         // edx
  int v2;         // edi
  int v3;         // eax
  int v4;         // ecx
  _DWORD *result; // eax

  dword_118AA080 = (*a1 >> 12) & 0xFFF;
  v1 = dword_118AA080;
  if (dword_118AA080 >= 2048) {
    v1 = dword_118AA080 - 4096;
    dword_118AA080 -= 4096;
  }
  dword_11829838 = *a1 & 0xFFF;
  v2 = dword_11829838;
  if (dword_11829838 >= 2048) {
    v2 = dword_11829838 - 4096;
    dword_11829838 -= 4096;
  }
  dword_1182983C = (a1[1] >> 12) & 0xFFF;
  v3 = dword_1182983C;
  if (dword_1182983C >= 2048) {
    v3 = dword_1182983C - 4096;
    dword_1182983C -= 4096;
  }
  dword_118A9870 = a1[1] & 0xFFF;
  v4 = dword_118A9870;
  if (dword_118A9870 >= 2048) {
    v4 = dword_118A9870 - 4096;
    dword_118A9870 -= 4096;
  }
  dword_11829840 = (v3 - v1 + 4) >> 2;
  result = a1 + 2;
  dword_118AA094 = (v4 - v2 + 4) >> 2;
  return result;
}
// 11829838: using guessed type int dword_11829838;
// 1182983C: using guessed type int dword_1182983C;
// 11829840: using guessed type int dword_11829840;
// 118A9870: using guessed type int dword_118A9870;
// 118AA080: using guessed type int dword_118AA080;
// 118AA094: using guessed type int dword_118AA094;

//----- (1001CFF0) --------------------------------------------------------
unsigned __int8 *__cdecl graphics_1001CFF0(unsigned __int8 *a1) {
  int v1;           // eax
  int *v2;          // ecx
  int v3;           // edi
  int v5;           // eax
  int v6;           // edx
  int v7;           // ecx
  float *v9;        // esi
  float *v10;       // edi
  double v11;       // st7
  float *v12;       // ecx
  WORD v13;         // ax
  int v14;          // ecx
  WORD v15;         // ax
  int v16;          // ecx
  WORD v17;         // ax
  int v18;          // ecx
  unsigned int v19; // edx
  int v20;          // ecx
  int v21;          // [esp+A4h] [ebp+4h]

  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  v5 = 27 * a1[4];
  v6 = 27 * a1[5];
  v7 = 27 * a1[6];
  v21 = dword_104C170C[v5];
  if ((dword_104C170C[v7] & dword_104C170C[v6] & v21) == 0) {
    if (v21 | dword_104C170C[v7] | dword_104C170C[v6]) {
      graphics_1001D420((int)&flt_104C16D0[v7], (int)&flt_104C16D0[v6], (int)&flt_104C16D0[v5]);
      return a1 + 8;
    }
    v9 = &flt_104C16D0[v7];
    v10 = &flt_104C16D0[v6];
    v9[9] = flt_104C1720[v7] * flt_118AA08C;
    v11 = flt_104C1724[v7] * flt_118AA090;
    v12 = &flt_104C16D0[v5];
    v9[10] = v11;
    v10[9] = flt_104C1720[v6] * flt_118AA08C;
    v10[10] = flt_104C1724[v6] * flt_118AA090;
    v12[9] = flt_104C1720[v5] * flt_118AA08C;
    v12[10] = flt_104C1724[v5] * flt_118AA090;
    v13 = off_100A79EC(&flt_104C16D0[v5]);
    v14 = gIndexedPrimitiveIndexCount;
    *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v13;
    gIndexedPrimitiveIndexCount = v14 + 1;
    v15 = off_100A79EC(v10);
    v16 = gIndexedPrimitiveIndexCount;
    *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v15;
    gIndexedPrimitiveIndexCount = v16 + 1;
    v17 = off_100A79EC(v9);
    v18 = gIndexedPrimitiveIndexCount;
    v19 = gVertexCount + 3;
    *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v17;
    v20 = v18 + 1;
    gIndexedPrimitiveIndexCount = v20;
    if (v19 > 0x200 || (unsigned int)(v20 + 3) > 0x200)
      graphics_1001D3A0();
  }
  return a1 + 8;
}
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C170C: using guessed type int dword_104C170C[];
// 104C1720: using guessed type float flt_104C1720[];
// 104C1724: using guessed type float flt_104C1724[];
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001D3A0) --------------------------------------------------------
void graphics_1001D3A0() {
  int v0;  // eax
  int *v1; // ecx
  int v2;  // edi

  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v0 = 0;
    if (dword_104C5190 > 0) {
      v1 = dword_104C0BC0;
      do {
        v2 = *v1;
        ++v0;
        ++v1;
        *(_DWORD *)(v2 + 104) = -1;
      } while (v0 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
}
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001D420) --------------------------------------------------------
int *__cdecl graphics_1001D420(int a1, int a2, int a3) {
  int *result;     // eax
  int *v4;         // ecx
  int *v5;         // edx
  int *v6;         // esi
  int *v7;         // edx
  float *v8;       // ecx
  unsigned int v9; // eax
  int v10;         // esi
  int v11;         // edi
  int v12;         // ebx
  double v13;      // st7
  WORD v14;        // ax
  int v15;         // ecx
  WORD v16;        // ax
  int v17;         // ecx
  WORD v18;        // ax
  int v19;         // ecx
  DWORD v20;       // edx
  DWORD v21;       // ecx
  int *v22;        // ecx
  int v23;         // edx
  _DWORD *v24;     // esi
  int v25;         // ebx
  WORD v26;        // ax
  int v27;         // ecx
  WORD v28;        // ax
  int v29;         // ecx
  WORD v30;        // ax
  int v31;         // ecx
  DWORD v32;       // edx
  DWORD v33;       // ecx
  int *v34;        // ecx
  int v35;         // edx
  int *v36;        // [esp+10h] [ebp-22Ch] BYREF
  int v37;         // [esp+14h] [ebp-228h]
  int v38;         // [esp+18h] [ebp-224h]
  float v39;       // [esp+1Ch] [ebp-220h]
  _DWORD v40[8];   // [esp+20h] [ebp-21Ch] BYREF
  char v41;        // [esp+40h] [ebp-1FCh] BYREF
  int v42[15];     // [esp+5Ch] [ebp-1E0h] BYREF
  _DWORD v43[105]; // [esp+98h] [ebp-1A4h] BYREF

  *(_DWORD *)(a3 + 64) = 0;
  *(_DWORD *)(a2 + 64) = a3 + 64;
  *(_DWORD *)(a1 + 64) = a2 + 64;
  v36 = (int *)(a1 + 64);
  *(_DWORD *)(a3 + 64) = a1 + 64;
  v37 = 3;
  sub_1001DEF0((int)&v36);
  result = (int *)v37;
  if (v37 < 3)
    goto LABEL_8;
  sub_1001D9F0((int)&v36);
  result = (int *)v37;
  if (v37 < 3)
    goto LABEL_8;
  sub_1001DB30((int)&v36);
  result = (int *)v37;
  if (v37 < 3)
    goto LABEL_8;
  sub_1001DDB0((int)&v36);
  result = (int *)v37;
  if (v37 < 3)
    goto LABEL_8;
  sub_1001E030((int)&v36);
  result = (int *)v37;
  if (v37 >= 3 && (sub_1001DC70((int)&v36), result = (int *)v37, v37 >= 3) &&
      (sub_1001D810((int)&v36), result = (int *)v37, v37 >= 3)) {
    v38 = 0;
    v7 = v36;
    v8 = (float *)&v41;
    do {
      v9 = (unsigned int)v7;
      v7 = (int *)*v7;
      v36 = v7;
      v10 = *(_DWORD *)(v9 + 36);
      v11 = *(_DWORD *)(v9 + 32);
      v12 = *(_DWORD *)(v9 + 28);
      v39 = 1.0 / *(float *)(v9 + 24);
      *v8 = v39;
      *(v8 - 8) = *(float *)(v9 + 4) * flt_104BBF08 * v39 + flt_104C0BB0;
      *(v8 - 7) = *(float *)(v9 + 8) * flt_104BC198 * *v8 + flt_104C0BB8;
      v13 = *(float *)(v9 + 12) * flt_100A79E0;
      *((_DWORD *)v8 - 5) = v12;
      *((_DWORD *)v8 - 4) = v11;
      *((_DWORD *)v8 - 3) = v10;
      *(v8 - 6) = v13 * *v8 + flt_100A79E4;
      v8[1] = *(float *)(v9 + 16) * flt_118AA08C;
      v8[2] = *(float *)(v9 + 20) * flt_118AA090;
      if (v9 >= (unsigned int)dword_104C01A8 && v9 < (unsigned int)&flt_104C0BA8) {
        *(_DWORD *)v9 = dword_104C0BBC;
        v7 = v36;
        dword_104C0BBC = v9;
      }
      result = (int *)v37;
      v8 += 15;
      ++v38;
    } while (v38 < v37);
    if (v37 == 3) {
      v14 = off_100A79EC(v43);
      v15 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v14;
      gIndexedPrimitiveIndexCount = v15 + 1;
      v16 = off_100A79EC(v42);
      v17 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v16;
      gIndexedPrimitiveIndexCount = v17 + 1;
      v18 = off_100A79EC(v40);
      v19 = gIndexedPrimitiveIndexCount;
      v20 = gVertexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v18;
      result = (int *)(v20 + 3);
      v21 = v19 + 1;
      gIndexedPrimitiveIndexCount = v21;
      if (v20 + 3 > 0x200 || (result = (int *)(v21 + 3), v21 + 3 > 0x200)) {
        if (v21) {
          g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                     D3DPT_TRIANGLELIST,
                                                     D3DVT_TLVERTEX,
                                                     &gVertices,
                                                     v20,
                                                     &g_indexedPrimitiveIndices,
                                                     v21,
                                                     12);
          result = 0;
          if (dword_104C5190 > 0) {
              v22 = dword_104C0BC0;
              do {
                  v23 = *v22;
                  result = (int *)((char *)result + 1);
                  ++v22;
                  *(_DWORD *)(v23 + 104) = -1;
              } while ((int)result < dword_104C5190);
          }
          gIndexedPrimitiveIndexCount = 0;
          gVertexCount = 0;
          dword_104C5190 = 0;
        }
      }
    } else if (v37 > 2) {
      v24 = v43;
      v25 = v37 - 2;
      do {
        v26 = off_100A79EC(v24);
        v27 = gIndexedPrimitiveIndexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v26;
        gIndexedPrimitiveIndexCount = v27 + 1;
        v28 = off_100A79EC(v24 - 15);
        v29 = gIndexedPrimitiveIndexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v28;
        gIndexedPrimitiveIndexCount = v29 + 1;
        v30 = off_100A79EC(v40);
        v31 = gIndexedPrimitiveIndexCount;
        v32 = gVertexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v30;
        result = (int *)(v32 + 3);
        v33 = v31 + 1;
        gIndexedPrimitiveIndexCount = v33;
        if (v32 + 3 > 0x200 || (result = (int *)(v33 + 3), v33 + 3 > 0x200)) {
          if (v33) {
              g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                         D3DPT_TRIANGLELIST,
                                                         D3DVT_TLVERTEX,
                                                         &gVertices,
                                                         v32,
                                                         &g_indexedPrimitiveIndices,
                                                         v33,
                                                         12);
              result = 0;
              if (dword_104C5190 > 0) {
                  v34 = dword_104C0BC0;
                  do {
                      v35 = *v34;
                      result = (int *)((char *)result + 1);
                      ++v34;
                      *(_DWORD *)(v35 + 104) = -1;
                  } while ((int)result < dword_104C5190);
              }
              gIndexedPrimitiveIndexCount = 0;
              gVertexCount = 0;
              dword_104C5190 = 0;
          }
        }
        v24 += 15;
        --v25;
      } while (v25);
    }
  } else {
  LABEL_8:
    if ((int)result > 0) {
      v4 = v36;
      v5 = (int *)dword_104C0BBC;
      v6 = result;
      do {
        result = v4;
        v4 = (int *)*v4;
        v36 = v4;
        if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
          *result = (int)v5;
          v4 = v36;
          v5 = result;
          dword_104C0BBC = (int)result;
        }
        v6 = (int *)((char *)v6 - 1);
      } while (v6);
    }
  }
  return result;
}
// 1001D548: conditional instruction was optimized away because of '%var_228.4>=3'
// 100A79E0: using guessed type float flt_100A79E0;
// 100A79E4: using guessed type float flt_100A79E4;
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;
// 104C0BBC: using guessed type int dword_104C0BBC;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001D810) --------------------------------------------------------
int *__cdecl sub_1001D810(int a1) {
  int *v2;     // ecx
  int *v3;     // ebp
  int v4;      // esi
  int *v5;     // edi
  char v7;     // c0
  float *v8;   // eax
  int v9;      // eax
  int *v10;    // eax
  float *v11;  // eax
  int *result; // eax
  int *v13;    // ecx
  float v14;   // [esp+0h] [ebp-20h]
  float v15;   // [esp+0h] [ebp-20h]
  float v16;   // [esp+14h] [ebp-Ch]
  int v17;     // [esp+18h] [ebp-8h]
  int v18;     // [esp+1Ch] [ebp-4h]
  float v19;   // [esp+24h] [ebp+4h]

  v2 = *(int **)a1;
  v3 = 0;
  v4 = **(_DWORD **)a1;
  v5 = *(int **)a1;
  v17 = *(_DWORD *)(a1 + 4);
  if (v17 > 0) {
    while (1) {
      v16 = *(float *)(v4 + 24);
      v19 = *((float *)v2 + 6);
      v18 = *(_DWORD *)v4;
      if (v7) {
        v10 = (int *)*v5;
        if (v19 >= 0.0) {
          if (v10)
              *v5 = *v10;
          *(_DWORD *)v4 = v3;
          v3 = (int *)v4;
          v15 = v16 / (v16 - v19);
          v11 = sub_1001D940(v4, (int)v2, v15);
          *(_DWORD *)v11 = *v5;
          *v5 = (int)v11;
          v5 = (int *)v11;
          goto LABEL_14;
        }
        if (v10)
          *v5 = *v10;
        *(_DWORD *)v4 = v3;
        v3 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) - 1;
      } else {
        if (v19 >= 0.0) {
          v5 = (int *)v4;
          goto LABEL_14;
        }
        v14 = v19 / (v19 - v16);
        v8 = sub_1001D940((int)v2, v4, v14);
        *(_DWORD *)v8 = *v5;
        *v5 = (int)v8;
        v5 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) + 1;
      }
      *(_DWORD *)(a1 + 4) = v9;
    LABEL_14:
      v2 = (int *)v4;
      v4 = v18;
      if (*(int *)(a1 + 4) >= 2 && --v17 > 0)
        continue;
      break;
    }
  }
  *(_DWORD *)a1 = v4;
  result = v3;
  if (v3)
    v3 = (int *)*v3;
  if (result) {
    v13 = (int *)dword_104C0BBC;
    do {
      if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
        *result = (int)v13;
        v13 = result;
        dword_104C0BBC = (int)result;
      }
      result = v3;
      if (v3)
        v3 = (int *)*v3;
    } while (result);
  }
  return result;
}
// 1001D861: variable 'v7' is possibly undefined
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BBC: using guessed type int dword_104C0BBC;

//----- (1001D940) --------------------------------------------------------
float *__cdecl sub_1001D940(int a1, int a2, float a3) {
  float *result; // eax

  result = (float *)dword_104C0BBC;
  if (dword_104C0BBC)
    dword_104C0BBC = *(_DWORD *)dword_104C0BBC;
  result[1] = (*(float *)(a2 + 4) - *(float *)(a1 + 4)) * a3 + *(float *)(a1 + 4);
  result[2] = (*(float *)(a2 + 8) - *(float *)(a1 + 8)) * a3 + *(float *)(a1 + 8);
  result[3] = (*(float *)(a2 + 12) - *(float *)(a1 + 12)) * a3 + *(float *)(a1 + 12);
  result[4] = (*(float *)(a2 + 16) - *(float *)(a1 + 16)) * a3 + *(float *)(a1 + 16);
  result[5] = (*(float *)(a2 + 20) - *(float *)(a1 + 20)) * a3 + *(float *)(a1 + 20);
  result[6] = (*(float *)(a2 + 24) - *(float *)(a1 + 24)) * a3 + *(float *)(a1 + 24);
  result[7] = (*(float *)(a2 + 28) - *(float *)(a1 + 28)) * a3 + *(float *)(a1 + 28);
  result[8] = (*(float *)(a2 + 32) - *(float *)(a1 + 32)) * a3 + *(float *)(a1 + 32);
  result[9] = (*(float *)(a2 + 36) - *(float *)(a1 + 36)) * a3 + *(float *)(a1 + 36);
  return result;
}
// 104C0BBC: using guessed type int dword_104C0BBC;

//----- (1001D9F0) --------------------------------------------------------
int *__cdecl sub_1001D9F0(int a1) {
  int *v2;     // ecx
  int *v3;     // ebp
  int v4;      // esi
  int *v5;     // edi
  char v7;     // c0
  float *v8;   // eax
  int v9;      // eax
  int *v10;    // eax
  float *v11;  // eax
  int *result; // eax
  int *v13;    // ecx
  float v14;   // [esp+0h] [ebp-20h]
  float v15;   // [esp+0h] [ebp-20h]
  float v16;   // [esp+14h] [ebp-Ch]
  int v17;     // [esp+18h] [ebp-8h]
  int v18;     // [esp+1Ch] [ebp-4h]
  float v19;   // [esp+24h] [ebp+4h]

  v2 = *(int **)a1;
  v3 = 0;
  v4 = **(_DWORD **)a1;
  v5 = *(int **)a1;
  v17 = *(_DWORD *)(a1 + 4);
  if (v17 > 0) {
    while (1) {
      v16 = *(float *)(v4 + 24) + *(float *)(v4 + 4);
      v18 = *(_DWORD *)v4;
      v19 = *((float *)v2 + 6) + *((float *)v2 + 1);
      if (v7) {
        v10 = (int *)*v5;
        if (v19 >= 0.0) {
          if (v10)
              *v5 = *v10;
          *(_DWORD *)v4 = v3;
          v3 = (int *)v4;
          v15 = v16 / (v16 - v19);
          v11 = sub_1001D940(v4, (int)v2, v15);
          *(_DWORD *)v11 = *v5;
          *v5 = (int)v11;
          v5 = (int *)v11;
          goto LABEL_14;
        }
        if (v10)
          *v5 = *v10;
        *(_DWORD *)v4 = v3;
        v3 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) - 1;
      } else {
        if (v19 >= 0.0) {
          v5 = (int *)v4;
          goto LABEL_14;
        }
        v14 = v19 / (v19 - v16);
        v8 = sub_1001D940((int)v2, v4, v14);
        *(_DWORD *)v8 = *v5;
        *v5 = (int)v8;
        v5 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) + 1;
      }
      *(_DWORD *)(a1 + 4) = v9;
    LABEL_14:
      v2 = (int *)v4;
      v4 = v18;
      if (*(int *)(a1 + 4) >= 2 && --v17 > 0)
        continue;
      break;
    }
  }
  *(_DWORD *)a1 = v4;
  result = v3;
  if (v3)
    v3 = (int *)*v3;
  if (result) {
    v13 = (int *)dword_104C0BBC;
    do {
      if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
        *result = (int)v13;
        v13 = result;
        dword_104C0BBC = (int)result;
      }
      result = v3;
      if (v3)
        v3 = (int *)*v3;
    } while (result);
  }
  return result;
}
// 1001DA49: variable 'v7' is possibly undefined
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BBC: using guessed type int dword_104C0BBC;

//----- (1001DB30) --------------------------------------------------------
int *__cdecl sub_1001DB30(int a1) {
  int *v2;     // ecx
  int *v3;     // ebp
  int v4;      // esi
  int *v5;     // edi
  char v7;     // c0
  float *v8;   // eax
  int v9;      // eax
  int *v10;    // eax
  float *v11;  // eax
  int *result; // eax
  int *v13;    // ecx
  float v14;   // [esp+0h] [ebp-20h]
  float v15;   // [esp+0h] [ebp-20h]
  float v16;   // [esp+14h] [ebp-Ch]
  int v17;     // [esp+18h] [ebp-8h]
  int v18;     // [esp+1Ch] [ebp-4h]
  float v19;   // [esp+24h] [ebp+4h]

  v2 = *(int **)a1;
  v3 = 0;
  v4 = **(_DWORD **)a1;
  v5 = *(int **)a1;
  v17 = *(_DWORD *)(a1 + 4);
  if (v17 > 0) {
    while (1) {
      v16 = *(float *)(v4 + 24) - *(float *)(v4 + 4);
      v18 = *(_DWORD *)v4;
      v19 = *((float *)v2 + 6) - *((float *)v2 + 1);
      if (v7) {
        v10 = (int *)*v5;
        if (v19 >= 0.0) {
          if (v10)
              *v5 = *v10;
          *(_DWORD *)v4 = v3;
          v3 = (int *)v4;
          v15 = v16 / (v16 - v19);
          v11 = sub_1001D940(v4, (int)v2, v15);
          *(_DWORD *)v11 = *v5;
          *v5 = (int)v11;
          v5 = (int *)v11;
          goto LABEL_14;
        }
        if (v10)
          *v5 = *v10;
        *(_DWORD *)v4 = v3;
        v3 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) - 1;
      } else {
        if (v19 >= 0.0) {
          v5 = (int *)v4;
          goto LABEL_14;
        }
        v14 = v19 / (v19 - v16);
        v8 = sub_1001D940((int)v2, v4, v14);
        *(_DWORD *)v8 = *v5;
        *v5 = (int)v8;
        v5 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) + 1;
      }
      *(_DWORD *)(a1 + 4) = v9;
    LABEL_14:
      v2 = (int *)v4;
      v4 = v18;
      if (*(int *)(a1 + 4) >= 2 && --v17 > 0)
        continue;
      break;
    }
  }
  *(_DWORD *)a1 = v4;
  result = v3;
  if (v3)
    v3 = (int *)*v3;
  if (result) {
    v13 = (int *)dword_104C0BBC;
    do {
      if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
        *result = (int)v13;
        v13 = result;
        dword_104C0BBC = (int)result;
      }
      result = v3;
      if (v3)
        v3 = (int *)*v3;
    } while (result);
  }
  return result;
}
// 1001DB89: variable 'v7' is possibly undefined
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BBC: using guessed type int dword_104C0BBC;

//----- (1001DC70) --------------------------------------------------------
int *__cdecl sub_1001DC70(int a1) {
  int *v2;     // ecx
  int *v3;     // ebp
  int v4;      // esi
  int *v5;     // edi
  char v7;     // c0
  float *v8;   // eax
  int v9;      // eax
  int *v10;    // eax
  float *v11;  // eax
  int *result; // eax
  int *v13;    // ecx
  float v14;   // [esp+0h] [ebp-20h]
  float v15;   // [esp+0h] [ebp-20h]
  float v16;   // [esp+14h] [ebp-Ch]
  int v17;     // [esp+18h] [ebp-8h]
  int v18;     // [esp+1Ch] [ebp-4h]
  float v19;   // [esp+24h] [ebp+4h]

  v2 = *(int **)a1;
  v3 = 0;
  v4 = **(_DWORD **)a1;
  v5 = *(int **)a1;
  v17 = *(_DWORD *)(a1 + 4);
  if (v17 > 0) {
    while (1) {
      v16 = *(float *)(v4 + 8) + *(float *)(v4 + 24);
      v18 = *(_DWORD *)v4;
      v19 = *((float *)v2 + 2) + *((float *)v2 + 6);
      if (v7) {
        v10 = (int *)*v5;
        if (v19 >= 0.0) {
          if (v10)
              *v5 = *v10;
          *(_DWORD *)v4 = v3;
          v3 = (int *)v4;
          v15 = v16 / (v16 - v19);
          v11 = sub_1001D940(v4, (int)v2, v15);
          *(_DWORD *)v11 = *v5;
          *v5 = (int)v11;
          v5 = (int *)v11;
          goto LABEL_14;
        }
        if (v10)
          *v5 = *v10;
        *(_DWORD *)v4 = v3;
        v3 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) - 1;
      } else {
        if (v19 >= 0.0) {
          v5 = (int *)v4;
          goto LABEL_14;
        }
        v14 = v19 / (v19 - v16);
        v8 = sub_1001D940((int)v2, v4, v14);
        *(_DWORD *)v8 = *v5;
        *v5 = (int)v8;
        v5 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) + 1;
      }
      *(_DWORD *)(a1 + 4) = v9;
    LABEL_14:
      v2 = (int *)v4;
      v4 = v18;
      if (*(int *)(a1 + 4) >= 2 && --v17 > 0)
        continue;
      break;
    }
  }
  *(_DWORD *)a1 = v4;
  result = v3;
  if (v3)
    v3 = (int *)*v3;
  if (result) {
    v13 = (int *)dword_104C0BBC;
    do {
      if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
        *result = (int)v13;
        v13 = result;
        dword_104C0BBC = (int)result;
      }
      result = v3;
      if (v3)
        v3 = (int *)*v3;
    } while (result);
  }
  return result;
}
// 1001DCC9: variable 'v7' is possibly undefined
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BBC: using guessed type int dword_104C0BBC;

//----- (1001DDB0) --------------------------------------------------------
int *__cdecl sub_1001DDB0(int a1) {
  int *v2;     // ecx
  int *v3;     // ebp
  int v4;      // esi
  int *v5;     // edi
  char v7;     // c0
  float *v8;   // eax
  int v9;      // eax
  int *v10;    // eax
  float *v11;  // eax
  int *result; // eax
  int *v13;    // ecx
  float v14;   // [esp+0h] [ebp-20h]
  float v15;   // [esp+0h] [ebp-20h]
  float v16;   // [esp+14h] [ebp-Ch]
  int v17;     // [esp+18h] [ebp-8h]
  int v18;     // [esp+1Ch] [ebp-4h]
  float v19;   // [esp+24h] [ebp+4h]

  v2 = *(int **)a1;
  v3 = 0;
  v4 = **(_DWORD **)a1;
  v5 = *(int **)a1;
  v17 = *(_DWORD *)(a1 + 4);
  if (v17 > 0) {
    while (1) {
      v16 = *(float *)(v4 + 24) - *(float *)(v4 + 8);
      v18 = *(_DWORD *)v4;
      v19 = *((float *)v2 + 6) - *((float *)v2 + 2);
      if (v7) {
        v10 = (int *)*v5;
        if (v19 >= 0.0) {
          if (v10)
              *v5 = *v10;
          *(_DWORD *)v4 = v3;
          v3 = (int *)v4;
          v15 = v16 / (v16 - v19);
          v11 = sub_1001D940(v4, (int)v2, v15);
          *(_DWORD *)v11 = *v5;
          *v5 = (int)v11;
          v5 = (int *)v11;
          goto LABEL_14;
        }
        if (v10)
          *v5 = *v10;
        *(_DWORD *)v4 = v3;
        v3 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) - 1;
      } else {
        if (v19 >= 0.0) {
          v5 = (int *)v4;
          goto LABEL_14;
        }
        v14 = v19 / (v19 - v16);
        v8 = sub_1001D940((int)v2, v4, v14);
        *(_DWORD *)v8 = *v5;
        *v5 = (int)v8;
        v5 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) + 1;
      }
      *(_DWORD *)(a1 + 4) = v9;
    LABEL_14:
      v2 = (int *)v4;
      v4 = v18;
      if (*(int *)(a1 + 4) >= 2 && --v17 > 0)
        continue;
      break;
    }
  }
  *(_DWORD *)a1 = v4;
  result = v3;
  if (v3)
    v3 = (int *)*v3;
  if (result) {
    v13 = (int *)dword_104C0BBC;
    do {
      if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
        *result = (int)v13;
        v13 = result;
        dword_104C0BBC = (int)result;
      }
      result = v3;
      if (v3)
        v3 = (int *)*v3;
    } while (result);
  }
  return result;
}
// 1001DE09: variable 'v7' is possibly undefined
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BBC: using guessed type int dword_104C0BBC;

//----- (1001DEF0) --------------------------------------------------------
int *__cdecl sub_1001DEF0(int a1) {
  int *v2;     // ecx
  int *v3;     // ebp
  int v4;      // esi
  int *v5;     // edi
  char v7;     // c0
  float *v8;   // eax
  int v9;      // eax
  int *v10;    // eax
  float *v11;  // eax
  int *result; // eax
  int *v13;    // ecx
  float v14;   // [esp+0h] [ebp-20h]
  float v15;   // [esp+0h] [ebp-20h]
  float v16;   // [esp+14h] [ebp-Ch]
  int v17;     // [esp+18h] [ebp-8h]
  int v18;     // [esp+1Ch] [ebp-4h]
  float v19;   // [esp+24h] [ebp+4h]

  v2 = *(int **)a1;
  v3 = 0;
  v4 = **(_DWORD **)a1;
  v5 = *(int **)a1;
  v17 = *(_DWORD *)(a1 + 4);
  if (v17 > 0) {
    while (1) {
      v16 = *(float *)(v4 + 12) + *(float *)(v4 + 24);
      v18 = *(_DWORD *)v4;
      v19 = *((float *)v2 + 3) + *((float *)v2 + 6);
      if (v7) {
        v10 = (int *)*v5;
        if (v19 >= 0.0) {
          if (v10)
              *v5 = *v10;
          *(_DWORD *)v4 = v3;
          v3 = (int *)v4;
          v15 = v16 / (v16 - v19);
          v11 = sub_1001D940(v4, (int)v2, v15);
          *(_DWORD *)v11 = *v5;
          *v5 = (int)v11;
          v5 = (int *)v11;
          goto LABEL_14;
        }
        if (v10)
          *v5 = *v10;
        *(_DWORD *)v4 = v3;
        v3 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) - 1;
      } else {
        if (v19 >= 0.0) {
          v5 = (int *)v4;
          goto LABEL_14;
        }
        v14 = v19 / (v19 - v16);
        v8 = sub_1001D940((int)v2, v4, v14);
        *(_DWORD *)v8 = *v5;
        *v5 = (int)v8;
        v5 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) + 1;
      }
      *(_DWORD *)(a1 + 4) = v9;
    LABEL_14:
      v2 = (int *)v4;
      v4 = v18;
      if (*(int *)(a1 + 4) >= 2 && --v17 > 0)
        continue;
      break;
    }
  }
  *(_DWORD *)a1 = v4;
  result = v3;
  if (v3)
    v3 = (int *)*v3;
  if (result) {
    v13 = (int *)dword_104C0BBC;
    do {
      if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
        *result = (int)v13;
        v13 = result;
        dword_104C0BBC = (int)result;
      }
      result = v3;
      if (v3)
        v3 = (int *)*v3;
    } while (result);
  }
  return result;
}
// 1001DF49: variable 'v7' is possibly undefined
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BBC: using guessed type int dword_104C0BBC;

//----- (1001E030) --------------------------------------------------------
int *__cdecl sub_1001E030(int a1) {
  int *v2;     // ecx
  int *v3;     // ebp
  int v4;      // esi
  int *v5;     // edi
  char v7;     // c0
  float *v8;   // eax
  int v9;      // eax
  int *v10;    // eax
  float *v11;  // eax
  int *result; // eax
  int *v13;    // ecx
  float v14;   // [esp+0h] [ebp-20h]
  float v15;   // [esp+0h] [ebp-20h]
  float v16;   // [esp+14h] [ebp-Ch]
  int v17;     // [esp+18h] [ebp-8h]
  int v18;     // [esp+1Ch] [ebp-4h]
  float v19;   // [esp+24h] [ebp+4h]

  v2 = *(int **)a1;
  v3 = 0;
  v4 = **(_DWORD **)a1;
  v5 = *(int **)a1;
  v17 = *(_DWORD *)(a1 + 4);
  if (v17 > 0) {
    while (1) {
      v16 = *(float *)(v4 + 24) - *(float *)(v4 + 12);
      v18 = *(_DWORD *)v4;
      v19 = *((float *)v2 + 6) - *((float *)v2 + 3);
      if (v7) {
        v10 = (int *)*v5;
        if (v19 >= 0.0) {
          if (v10)
              *v5 = *v10;
          *(_DWORD *)v4 = v3;
          v3 = (int *)v4;
          v15 = v16 / (v16 - v19);
          v11 = sub_1001D940(v4, (int)v2, v15);
          *(_DWORD *)v11 = *v5;
          *v5 = (int)v11;
          v5 = (int *)v11;
          goto LABEL_14;
        }
        if (v10)
          *v5 = *v10;
        *(_DWORD *)v4 = v3;
        v3 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) - 1;
      } else {
        if (v19 >= 0.0) {
          v5 = (int *)v4;
          goto LABEL_14;
        }
        v14 = v19 / (v19 - v16);
        v8 = sub_1001D940((int)v2, v4, v14);
        *(_DWORD *)v8 = *v5;
        *v5 = (int)v8;
        v5 = (int *)v4;
        v9 = *(_DWORD *)(a1 + 4) + 1;
      }
      *(_DWORD *)(a1 + 4) = v9;
    LABEL_14:
      v2 = (int *)v4;
      v4 = v18;
      if (*(int *)(a1 + 4) >= 2 && --v17 > 0)
        continue;
      break;
    }
  }
  *(_DWORD *)a1 = v4;
  result = v3;
  if (v3)
    v3 = (int *)*v3;
  if (result) {
    v13 = (int *)dword_104C0BBC;
    do {
      if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
        *result = (int)v13;
        v13 = result;
        dword_104C0BBC = (int)result;
      }
      result = v3;
      if (v3)
        v3 = (int *)*v3;
    } while (result);
  }
  return result;
}
// 1001E089: variable 'v7' is possibly undefined
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BBC: using guessed type int dword_104C0BBC;

//----- (1001E170) --------------------------------------------------------
unsigned __int8 *__cdecl graphics_1001E170(unsigned __int8 *a1) {
  int v1;     // eax
  int *v2;    // ecx
  int v3;     // edi
  int v5;     // esi
  int v6;     // eax
  int v7;     // edx
  int v8;     // ecx
  int v9;     // esi
  float *v10; // esi
  float *v11; // ebx
  float *v12; // ebp
  int v14;    // [esp+A4h] [ebp+4h]

  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  v5 = a1[2];
  v6 = 27 * a1[1];
  v7 = 27 * *a1;
  v14 = dword_104C170C[v6];
  v8 = 27 * v5;
  v9 = dword_104C170C[27 * v5];
  if ((dword_104C170C[v7] & v9 & v14) == 0) {
    if (v14 | dword_104C170C[v7] | v9) {
      graphics_1001D420((int)&flt_104C16D0[v8], (int)&flt_104C16D0[v6], (int)&flt_104C16D0[v7]);
    } else {
      v10 = &flt_104C16D0[v8];
      v11 = &flt_104C16D0[v6];
      v12 = &flt_104C16D0[v7];
      v10[9] = flt_104C1720[v8] * flt_118AA08C;
      v10[10] = flt_104C1724[v8] * flt_118AA090;
      v11[9] = flt_104C1720[v6] * flt_118AA08C;
      v11[10] = flt_104C1724[v6] * flt_118AA090;
      sub_1001E4B0((int)&flt_104C16D0[v7], (int)&unk_104C1710 + v7 * 4);
      graphics_1001E4E0((int)v10, (int)v11, (int)v12);
    }
  }
  graphics_1001E5D0(a1[6], a1[5], a1[4]);
  return a1 + 8;
}
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C170C: using guessed type int dword_104C170C[];
// 104C1720: using guessed type float flt_104C1720[];
// 104C1724: using guessed type float flt_104C1724[];
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001E4B0) --------------------------------------------------------
int __cdecl sub_1001E4B0(int a1, int a2) {
  int result; // eax

  result = a2;
  *(float *)(a1 + 36) = *(float *)(a2 + 16) * flt_118AA08C;
  *(float *)(a1 + 40) = *(float *)(a2 + 20) * flt_118AA090;
  return result;
}
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001E4E0) --------------------------------------------------------
int __cdecl graphics_1001E4E0(int a1, int a2, int a3) {
  WORD v3;    // ax
  int v4;     // ecx
  WORD v5;    // ax
  int v6;     // ecx
  WORD v7;    // ax
  int v8;     // ecx
  DWORD v9;   // edx
  int result; // eax
  DWORD v11;  // ecx
  int *v12;   // ecx
  int v13;    // edi

  v3 = off_100A79EC(a3);
  v4 = gIndexedPrimitiveIndexCount;
  *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v3;
  gIndexedPrimitiveIndexCount = v4 + 1;
  v5 = off_100A79EC(a2);
  v6 = gIndexedPrimitiveIndexCount;
  *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v5;
  gIndexedPrimitiveIndexCount = v6 + 1;
  v7 = off_100A79EC(a1);
  v8 = gIndexedPrimitiveIndexCount;
  v9 = gVertexCount;
  *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v7;
  result = v9 + 3;
  v11 = v8 + 1;
  gIndexedPrimitiveIndexCount = v11;
  if (v9 + 3 > 0x200 || (result = v11 + 3, v11 + 3 > 0x200)) {
    if (v11) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 v9,
                                                 &g_indexedPrimitiveIndices,
                                                 v11,
                                                 12);
      result = 0;
      if (dword_104C5190 > 0) {
        v12 = dword_104C0BC0;
        do {
          v13 = *v12;
          ++result;
          ++v12;
          *(_DWORD *)(v13 + 104) = -1;
        } while (result < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
  }
  return result;
}
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001E5D0) --------------------------------------------------------
int __cdecl graphics_1001E5D0(int a1, int a2, int a3) {
  int v3;     // edx
  int v4;     // ecx
  int result; // eax
  int v6;     // ebx
  int v7;     // edi
  float *v8;  // esi
  float *v9;  // edi
  float *v10; // eax
  WORD v11;   // ax
  int v12;    // ecx
  WORD v13;   // ax
  int v14;    // ecx
  WORD v15;   // ax
  int v16;    // ecx
  DWORD v17;  // ecx
  int *v18;   // ecx
  int v19;    // edi

  v3 = 27 * a1;
  v4 = 27 * a3;
  result = 108 * a2;
  v6 = dword_104C170C[27 * a3];
  v7 = dword_104C170C[27 * a2];
  if ((v6 & dword_104C170C[27 * a1] & v7) == 0) {
    if (v7 | v6 | dword_104C170C[27 * a1]) {
      result = (int)graphics_1001D420(
          (int)&flt_104C16D0[v3], (int)flt_104C16D0 + result, (int)&flt_104C16D0[v4]);
    } else {
      v8 = &flt_104C16D0[v3];
      v9 = (float *)((char *)flt_104C16D0 + result);
      v8[9] = flt_104C1720[27 * a1] * flt_118AA08C;
      v8[10] = flt_104C1724[27 * a1] * flt_118AA090;
      v9[9] = flt_104C1720[27 * a2] * flt_118AA08C;
      v10 = &flt_104C16D0[v4];
      v9[10] = flt_104C1724[27 * a2] * flt_118AA090;
      v10[9] = flt_104C1720[27 * a3] * flt_118AA08C;
      v10[10] = flt_104C1724[27 * a3] * flt_118AA090;
      v11 = off_100A79EC(&flt_104C16D0[v4]);
      v12 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v11;
      gIndexedPrimitiveIndexCount = v12 + 1;
      v13 = off_100A79EC(v9);
      v14 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v13;
      gIndexedPrimitiveIndexCount = v14 + 1;
      v15 = off_100A79EC(v8);
      v16 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v15;
      result = gVertexCount;
      v17 = v16 + 1;
      gIndexedPrimitiveIndexCount = v17;
      if (((unsigned int)(gVertexCount + 3) > 0x200 || v17 + 3 > 0x200) && v17) {
        g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                   D3DPT_TRIANGLELIST,
                                                   D3DVT_TLVERTEX,
                                                   &gVertices,
                                                   gVertexCount,
                                                   &g_indexedPrimitiveIndices,
                                                   v17,
                                                   12);
        result = 0;
        if (dword_104C5190 > 0) {
          v18 = dword_104C0BC0;
          do {
              v19 = *v18;
              ++result;
              ++v18;
              *(_DWORD *)(v19 + 104) = -1;
          } while (result < dword_104C5190);
        }
        gIndexedPrimitiveIndexCount = 0;
        gVertexCount = 0;
        dword_104C5190 = 0;
      }
    }
  }
  return result;
}
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104C170C: using guessed type int dword_104C170C[];
// 104C1720: using guessed type float flt_104C1720[];
// 104C1724: using guessed type float flt_104C1724[];
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001E790) --------------------------------------------------------
int __cdecl sub_1001E790(int a1) {
  dword_104C517C = dword_104C5178;
  dword_104C5178 &= ~*(_DWORD *)(a1 + 4);
  sub_1001E7C0();
  return a1 + 8;
}
// 104C5178: using guessed type int dword_104C5178;
// 104C517C: using guessed type int dword_104C517C;

//----- (1001E7C0) --------------------------------------------------------
char sub_1001E7C0() {
  int v0; // eax
  int v1; // edx
  int v2; // edx

  LOBYTE(v0) = dword_104C5178 ^ dword_104C517C;
  if ((((unsigned __int16)dword_104C5178 ^ (unsigned __int16)dword_104C517C) & 0x3000) != 0) {
    if ((dword_104C5178 & 0x1000) != 0) {
      dword_10277388 = 2;
      v1 = dword_10277370;
      if (dword_10277408 == 2) {
        v2 = dword_10277370 & 0xFFFFFFEF;
      LABEL_11:
        dword_10277370 = v2;
        goto LABEL_12;
      }
    } else if ((dword_104C5178 & 0x2000) != 0) {
      dword_10277388 = 3;
      v1 = dword_10277370;
      if (dword_10277408 == 3) {
        v2 = dword_10277370 & 0xFFFFFFEF;
        goto LABEL_11;
      }
    } else {
      dword_10277388 = 1;
      v1 = dword_10277370;
      if (dword_10277408 == 1) {
        v2 = dword_10277370 & 0xFFFFFFEF;
        goto LABEL_11;
      }
    }
    v2 = v1 | 0x10;
    goto LABEL_11;
  }
LABEL_12:
  if ((v0 & 1) == 0)
    goto LABEL_20;
  if ((dword_104C5178 & 1) == 0) {
    dword_104C16A0 = 8;
    dword_1027738C = 8;
    v0 = dword_10277370;
    if (dword_1027740C == 8) {
      LOBYTE(v0) = dword_10277370 & 0xDF;
      goto LABEL_19;
    }
  LABEL_18:
    LOBYTE(v0) = v0 | 0x20;
    goto LABEL_19;
  }
  dword_104C16A0 = 2;
  v0 = dword_10277370;
  dword_1027738C = 2;
  if (dword_1027740C != 2)
    goto LABEL_18;
  LOBYTE(v0) = dword_10277370 & 0xDF;
LABEL_19:
  dword_10277370 = v0;
LABEL_20:
  if ((dword_104C5178 & 1) != 0) {
    if ((dword_104C5178 & 0x20000) != 0) {
      LOBYTE(v0) = dword_104C0DC0;
      if (dword_104C0DC0)
        off_100A7A00[0] = (int(__cdecl *)(int))sub_10022480;
      else
        off_100A7A00[0] = (int(__cdecl *)(int))sub_10021E80;
    } else {
      off_100A7A00[0] = (int(__cdecl *)(int))sub_10021BD0;
    }
    if ((dword_104C5178 & 0x40000) != 0) {
      off_100A7A00[0] = (int(__cdecl *)(int))sub_100231D0;
      if ((dword_104C5178 & 0x80000) == 0)
        off_100A7A00[0] = (int(__cdecl *)(int))sub_100228F0;
    }
    if ((dword_104C5178 & 0x200) != 0) {
      off_100A7CEC[0] = (int(__cdecl *)(int))graphics_1001CFF0;
      off_100A7CB4[0] = (int(__cdecl *)(int))graphics_1001E170;
    } else {
      off_100A7CEC[0] = (int(__cdecl *)(int))graphics_1001E980;
      off_100A7CB4[0] = (int(__cdecl *)(int))graphics_10020380;
    }
  } else {
    off_100A7A00[0] = (int(__cdecl *)(int))sub_10023CC0;
    if ((dword_104C5178 & 0x20000) == 0)
      off_100A7A00[0] = (int(__cdecl *)(int))sub_10023A10;
    if ((dword_104C5178 & 0x200) != 0) {
      off_100A7CEC[0] = (int(__cdecl *)(int))graphics_1001FBE0;
      off_100A7CB4[0] = (int(__cdecl *)(int))graphics_10020860;
    } else {
      off_100A7CEC[0] = (int(__cdecl *)(int))graphics_1001F2B0;
      off_100A7CB4[0] = (int(__cdecl *)(int))graphics_100205F0;
    }
  }
  return v0;
}
// 100A7A00: using guessed type int (__cdecl *off_100A7A00[180])(int);
// 100A7CB4: using guessed type int (__cdecl *off_100A7CB4[7])(int);
// 100A7CEC: using guessed type int (__cdecl *off_100A7CEC[65])(int);
// 10277370: using guessed type int dword_10277370;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 104C0DC0: using guessed type int dword_104C0DC0;
// 104C16A0: using guessed type int dword_104C16A0;
// 104C5178: using guessed type int dword_104C5178;
// 104C517C: using guessed type int dword_104C517C;

//----- (1001E980) --------------------------------------------------------
unsigned __int8 *__cdecl graphics_1001E980(unsigned __int8 *a1) {
  int v1;                  // eax
  int *v2;                 // ecx
  int v3;                  // esi
  unsigned __int8 *result; // eax

  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  if (a1[7]) {
    if (a1[7] == 1)
      graphics_1001EC20(a1[5], a1[4], a1[6]);
    else
      graphics_1001EC20(a1[4], a1[6], a1[5]);
    result = a1 + 8;
  } else {
    graphics_1001EC20(a1[6], a1[5], a1[4]);
    result = a1 + 8;
  }
  return result;
}
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001EC20) --------------------------------------------------------
float *__cdecl graphics_1001EC20(int a1, int a2, int a3) {
  int v3;        // edi
  int v4;        // esi
  int v5;        // ebx
  float *result; // eax
  int v7;        // edx
  float *v8;     // ebx
  float *v9;     // ebp
  float *v10;    // ecx
  int v11;       // edx
  int v12;       // edx
  int v13;       // eax
  WORD v14;      // ax
  int v15;       // ecx
  WORD v16;      // ax
  int v17;       // ecx
  WORD v18;      // ax
  int v19;       // ecx
  DWORD v20;     // ecx
  int v21;       // eax
  int *v22;      // ecx
  int v23;       // ebp
  float *v24;    // [esp+20h] [ebp-Ch]
  int v25;       // [esp+24h] [ebp-8h]
  int v26;       // [esp+28h] [ebp-4h]
  int v27;       // [esp+30h] [ebp+4h]
  int v28;       // [esp+34h] [ebp+8h]
  int v29;       // [esp+38h] [ebp+Ch]

  v3 = 27 * a3;
  v4 = 27 * a2;
  v5 = dword_104C170C[27 * a2];
  result = (float *)(108 * a1);
  v7 = dword_104C170C[27 * a1];
  if ((v5 & dword_104C170C[27 * a3] & v7) == 0) {
    if (v7 | v5 | dword_104C170C[27 * a3]) {
      result = graphics_1001EEB0((int)&flt_104C16D0[27 * a1],
                                 (int)&flt_104C16D0[v4],
                                 (int)&flt_104C16D0[v3],
                                 dword_104C172C[27 * a1],
                                 dword_104C1730[27 * a1],
                                 dword_104C1734[27 * a1]);
    } else {
      v8 = (float *)((int)flt_104C16D0 + (_DWORD)result);
      v9 = &flt_104C16D0[v4];
      v10 = &flt_104C16D0[v3];
      v8[9] = flt_104C1720[27 * a1] * flt_118AA08C;
      v8[10] = flt_104C1724[27 * a1] * flt_118AA090;
      v9[9] = flt_104C1720[27 * a2] * flt_118AA08C;
      v9[10] = flt_104C1724[27 * a2] * flt_118AA090;
      v10[9] = flt_104C1720[27 * a3] * flt_118AA08C;
      v10[10] = flt_104C1724[27 * a3] * flt_118AA090;
      v27 = dword_104C16DC[27 * a2];
      v28 = dword_104C16E0[27 * a2];
      v29 = dword_104C16E4[v4];
      v24 = (float *)dword_104C16DC[v3];
      v25 = dword_104C16E0[v3];
      v26 = dword_104C16E4[v3];
      v11 = *(int *)((char *)dword_104C16DC + (_DWORD)result);
      dword_104C16DC[v4] = v11;
      dword_104C16DC[v3] = v11;
      v12 = *(int *)((char *)dword_104C16E0 + (_DWORD)result);
      dword_104C16E0[v4] = v12;
      dword_104C16E0[v3] = v12;
      v13 = *(int *)((char *)dword_104C16E4 + (_DWORD)result);
      dword_104C16E4[v4] = v13;
      dword_104C16E4[v3] = v13;
      v14 = off_100A79EC(&flt_104C16D0[v3]);
      v15 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v14;
      gIndexedPrimitiveIndexCount = v15 + 1;
      v16 = off_100A79EC(&flt_104C16D0[v4]);
      v17 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v16;
      gIndexedPrimitiveIndexCount = v17 + 1;
      v18 = off_100A79EC(v8);
      v19 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v18;
      v20 = v19 + 1;
      gIndexedPrimitiveIndexCount = v20;
      if (((unsigned int)(gVertexCount + 3) > 0x200 || v20 + 3 > 0x200) && v20) {
        g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                   D3DPT_TRIANGLELIST,
                                                   D3DVT_TLVERTEX,
                                                   &gVertices,
                                                   gVertexCount,
                                                   &g_indexedPrimitiveIndices,
                                                   v20,
                                                   12);
        v21 = 0;
        if (dword_104C5190 > 0) {
          v22 = dword_104C0BC0;
          do {
              v23 = *v22;
              ++v21;
              ++v22;
              *(_DWORD *)(v23 + 104) = -1;
          } while (v21 < dword_104C5190);
        }
        gIndexedPrimitiveIndexCount = 0;
        gVertexCount = 0;
        dword_104C5190 = 0;
      }
      dword_104C16DC[v4] = v27;
      result = v24;
      dword_104C16E0[v4] = v28;
      dword_104C16E4[v4] = v29;
      dword_104C16DC[v3] = (int)v24;
      dword_104C16E0[v3] = v25;
      dword_104C16E4[v3] = v26;
    }
  }
  return result;
}
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104C16DC: using guessed type int dword_104C16DC[];
// 104C16E0: using guessed type int dword_104C16E0[];
// 104C16E4: using guessed type int dword_104C16E4[];
// 104C170C: using guessed type int dword_104C170C[];
// 104C1720: using guessed type float flt_104C1720[];
// 104C1724: using guessed type float flt_104C1724[];
// 104C172C: using guessed type int dword_104C172C[];
// 104C1730: using guessed type int dword_104C1730[];
// 104C1734: using guessed type int dword_104C1734[];
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001EEB0) --------------------------------------------------------
float *__cdecl graphics_1001EEB0(int a1, int a2, int a3, int a4, int a5, int a6) {
  float *result;    // eax
  int v7;           // edi
  float *v8;        // ecx
  float *v9;        // edx
  float *v10;       // edx
  unsigned int v11; // ecx
  double v12;       // st7
  WORD v13;         // ax
  int v14;          // ecx
  WORD v15;         // ax
  int v16;          // ecx
  WORD v17;         // ax
  int v18;          // ecx
  DWORD v19;        // edx
  DWORD v20;        // ecx
  int *v21;         // ecx
  int v22;          // edx
  int v23;          // edi
  _DWORD *v24;      // esi
  WORD v25;         // ax
  int v26;          // ecx
  WORD v27;         // ax
  int v28;          // ecx
  WORD v29;         // ax
  int v30;          // ecx
  DWORD v31;        // edx
  DWORD v32;        // ecx
  int *v33;         // ecx
  int v34;          // edx
  float *v35;       // [esp+10h] [ebp-22Ch] BYREF
  int v36;          // [esp+14h] [ebp-228h]
  int v37;          // [esp+18h] [ebp-224h]
  float v38;        // [esp+1Ch] [ebp-220h]
  _DWORD v39[8];    // [esp+20h] [ebp-21Ch] BYREF
  char v40;         // [esp+40h] [ebp-1FCh] BYREF
  int v41[15];      // [esp+5Ch] [ebp-1E0h] BYREF
  _DWORD v42[105];  // [esp+98h] [ebp-1A4h] BYREF

  *(_DWORD *)(a3 + 64) = 0;
  *(_DWORD *)(a2 + 64) = a3 + 64;
  *(_DWORD *)(a1 + 64) = a2 + 64;
  v35 = (float *)(a1 + 64);
  *(_DWORD *)(a3 + 64) = a1 + 64;
  v36 = 3;
  result = (float *)sub_1001DEF0((int)&v35);
  v7 = v36;
  if (v36 < 3)
    goto LABEL_8;
  result = (float *)sub_1001D9F0((int)&v35);
  v7 = v36;
  if (v36 < 3)
    goto LABEL_8;
  result = (float *)sub_1001DB30((int)&v35);
  v7 = v36;
  if (v36 < 3)
    goto LABEL_8;
  result = (float *)sub_1001DDB0((int)&v35);
  v7 = v36;
  if (v36 < 3)
    goto LABEL_8;
  result = (float *)sub_1001E030((int)&v35);
  v7 = v36;
  if (v36 >= 3 && (result = (float *)sub_1001DC70((int)&v35), v7 = v36, v36 >= 3) &&
      (result = (float *)sub_1001D810((int)&v35), v7 = v36, v36 >= 3)) {
    v37 = 0;
    v10 = v35;
    result = (float *)&v40;
    do {
      v11 = (unsigned int)v10;
      v10 = *(float **)v10;
      v35 = v10;
      v38 = 1.0 / *(float *)(v11 + 24);
      *result = v38;
      *(result - 8) = *(float *)(v11 + 4) * flt_104BBF08 * v38 + flt_104C0BB0;
      *(result - 7) = *(float *)(v11 + 8) * flt_104BC198 * *result + flt_104C0BB8;
      v12 = *(float *)(v11 + 12) * flt_100A79E0;
      *((_DWORD *)result - 5) = a4;
      *((_DWORD *)result - 4) = a5;
      *((_DWORD *)result - 3) = a6;
      *(result - 6) = v12 * *result + flt_100A79E4;
      result[1] = *(float *)(v11 + 16) * flt_118AA08C;
      result[2] = *(float *)(v11 + 20) * flt_118AA090;
      if (v11 >= (unsigned int)dword_104C01A8 && v11 < (unsigned int)&flt_104C0BA8) {
        *(_DWORD *)v11 = dword_104C0BBC;
        v10 = v35;
        v7 = v36;
        dword_104C0BBC = v11;
      }
      result += 15;
      ++v37;
    } while (v37 < v7);
    if (v7 == 3) {
      v13 = off_100A79EC(v42);
      v14 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v13;
      gIndexedPrimitiveIndexCount = v14 + 1;
      v15 = off_100A79EC(v41);
      v16 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v15;
      gIndexedPrimitiveIndexCount = v16 + 1;
      v17 = off_100A79EC(v39);
      v18 = gIndexedPrimitiveIndexCount;
      v19 = gVertexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v17;
      result = (float *)(v19 + 3);
      v20 = v18 + 1;
      gIndexedPrimitiveIndexCount = v20;
      if (v19 + 3 > 0x200 || (result = (float *)(v20 + 3), v20 + 3 > 0x200)) {
        if (v20) {
          g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                     D3DPT_TRIANGLELIST,
                                                     D3DVT_TLVERTEX,
                                                     &gVertices,
                                                     v19,
                                                     &g_indexedPrimitiveIndices,
                                                     v20,
                                                     12);
          result = 0;
          if (dword_104C5190 > 0) {
              v21 = dword_104C0BC0;
              do {
                  v22 = *v21;
                  result = (float *)((char *)result + 1);
                  ++v21;
                  *(_DWORD *)(v22 + 104) = -1;
              } while ((int)result < dword_104C5190);
          }
          gIndexedPrimitiveIndexCount = 0;
          gVertexCount = 0;
          dword_104C5190 = 0;
        }
      }
    } else if (v7 > 2) {
      v23 = v7 - 2;
      v24 = v42;
      do {
        v25 = off_100A79EC(v24);
        v26 = gIndexedPrimitiveIndexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v25;
        gIndexedPrimitiveIndexCount = v26 + 1;
        v27 = off_100A79EC(v24 - 15);
        v28 = gIndexedPrimitiveIndexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v27;
        gIndexedPrimitiveIndexCount = v28 + 1;
        v29 = off_100A79EC(v39);
        v30 = gIndexedPrimitiveIndexCount;
        v31 = gVertexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v29;
        result = (float *)(v31 + 3);
        v32 = v30 + 1;
        gIndexedPrimitiveIndexCount = v32;
        if (v31 + 3 > 0x200 || (result = (float *)(v32 + 3), v32 + 3 > 0x200)) {
          if (v32) {
              g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                         D3DPT_TRIANGLELIST,
                                                         D3DVT_TLVERTEX,
                                                         &gVertices,
                                                         v31,
                                                         &g_indexedPrimitiveIndices,
                                                         v32,
                                                         12);
              result = 0;
              if (dword_104C5190 > 0) {
                  v33 = dword_104C0BC0;
                  do {
                      v34 = *v33;
                      result = (float *)((char *)result + 1);
                      ++v33;
                      *(_DWORD *)(v34 + 104) = -1;
                  } while ((int)result < dword_104C5190);
              }
              gIndexedPrimitiveIndexCount = 0;
              gVertexCount = 0;
              dword_104C5190 = 0;
          }
        }
        v24 += 15;
        --v23;
      } while (v23);
    }
  } else {
  LABEL_8:
    if (v7 > 0) {
      v8 = v35;
      v9 = (float *)dword_104C0BBC;
      do {
        result = v8;
        v8 = *(float **)v8;
        v35 = v8;
        if (result >= (float *)dword_104C01A8 && result < &flt_104C0BA8) {
          *(_DWORD *)result = v9;
          v8 = v35;
          v9 = result;
          dword_104C0BBC = (int)result;
        }
        --v7;
      } while (v7);
    }
  }
  return result;
}
// 1001EFD6: conditional instruction was optimized away because of '%var_228.4>=3'
// 100A79E0: using guessed type float flt_100A79E0;
// 100A79E4: using guessed type float flt_100A79E4;
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;
// 104C0BBC: using guessed type int dword_104C0BBC;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001F2B0) --------------------------------------------------------
unsigned __int8 *__cdecl graphics_1001F2B0(unsigned __int8 *a1) {
  int v1;                  // eax
  int *v2;                 // ecx
  int v3;                  // esi
  unsigned __int8 *result; // eax

  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  if (a1[7]) {
    if (a1[7] == 1)
      graphics_1001F550(a1[5], a1[4], a1[6]);
    else
      graphics_1001F550(a1[4], a1[6], a1[5]);
    result = a1 + 8;
  } else {
    graphics_1001F550(a1[6], a1[5], a1[4]);
    result = a1 + 8;
  }
  return result;
}
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (1001F550) --------------------------------------------------------
float *__cdecl graphics_1001F550(int a1, int a2, int a3) {
  int v3;        // edi
  float *result; // eax
  int v5;        // esi
  int v6;        // ebx
  int v7;        // edx
  float *v8;     // ebx
  float *v9;     // ebp
  float *v10;    // ecx
  int v11;       // edx
  int v12;       // edx
  int v13;       // eax
  WORD v14;      // ax
  int v15;       // ecx
  WORD v16;      // ax
  int v17;       // ecx
  WORD v18;      // ax
  int v19;       // ecx
  DWORD v20;     // ecx
  int v21;       // eax
  int *v22;      // ecx
  int v23;       // ebp
  float *v24;    // [esp+20h] [ebp-Ch]
  int v25;       // [esp+24h] [ebp-8h]
  int v26;       // [esp+28h] [ebp-4h]
  int v27;       // [esp+30h] [ebp+4h]
  int v28;       // [esp+34h] [ebp+8h]
  int v29;       // [esp+38h] [ebp+Ch]

  v3 = 27 * a2;
  result = (float *)(108 * a1);
  v5 = 27 * a3;
  v6 = dword_104C170C[27 * a1];
  v7 = dword_104C170C[27 * a3];
  if ((v6 & dword_104C170C[27 * a2] & v7) == 0) {
    if (v7 | v6 | dword_104C170C[27 * a2]) {
      result = graphics_1001F7E0((int)&flt_104C16D0[27 * a1],
                                 (int)&flt_104C16D0[v3],
                                 (int)&flt_104C16D0[v5],
                                 dword_104C172C[27 * a1],
                                 dword_104C1730[27 * a1],
                                 dword_104C1734[27 * a1]);
    } else {
      v8 = (float *)((int)flt_104C16D0 + (_DWORD)result);
      v9 = &flt_104C16D0[v3];
      v10 = &flt_104C16D0[v5];
      v8[9] = flt_104C1720[27 * a1] * flt_118AA08C;
      v8[10] = flt_104C1724[27 * a1] * flt_118AA090;
      v9[9] = flt_104C1720[27 * a2] * flt_118AA08C;
      v9[10] = flt_104C1724[27 * a2] * flt_118AA090;
      v10[9] = flt_104C1720[27 * a3] * flt_118AA08C;
      v10[10] = flt_104C1724[27 * a3] * flt_118AA090;
      v29 = dword_104C16DC[27 * a2];
      v27 = dword_104C16E0[27 * a2];
      v28 = dword_104C16E4[27 * a2];
      v24 = (float *)dword_104C16DC[v5];
      v25 = dword_104C16E0[v5];
      v26 = dword_104C16E4[v5];
      v11 = *(int *)((char *)dword_104C16DC + (_DWORD)result);
      dword_104C16DC[v3] = v11;
      dword_104C16DC[v5] = v11;
      v12 = *(int *)((char *)dword_104C16E0 + (_DWORD)result);
      dword_104C16E0[v3] = v12;
      dword_104C16E0[v5] = v12;
      v13 = *(int *)((char *)dword_104C16E4 + (_DWORD)result);
      dword_104C16E4[v3] = v13;
      dword_104C16E4[v5] = v13;
      v14 = off_100A79EC(&flt_104C16D0[v5]);
      v15 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v14;
      gIndexedPrimitiveIndexCount = v15 + 1;
      v16 = off_100A79EC(&flt_104C16D0[v3]);
      v17 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v16;
      gIndexedPrimitiveIndexCount = v17 + 1;
      v18 = off_100A79EC(v8);
      v19 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v18;
      v20 = v19 + 1;
      gIndexedPrimitiveIndexCount = v20;
      if (((unsigned int)(gVertexCount + 3) > 0x200 || v20 + 3 > 0x200) && v20) {
        g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                   D3DPT_TRIANGLELIST,
                                                   D3DVT_TLVERTEX,
                                                   &gVertices,
                                                   gVertexCount,
                                                   &g_indexedPrimitiveIndices,
                                                   v20,
                                                   12);
        v21 = 0;
        if (dword_104C5190 > 0) {
          v22 = dword_104C0BC0;
          do {
              v23 = *v22;
              ++v21;
              ++v22;
              *(_DWORD *)(v23 + 104) = -1;
          } while (v21 < dword_104C5190);
        }
        gIndexedPrimitiveIndexCount = 0;
        gVertexCount = 0;
        dword_104C5190 = 0;
      }
      dword_104C16DC[v3] = v29;
      result = v24;
      dword_104C16E0[v3] = v27;
      dword_104C16E4[v3] = v28;
      dword_104C16DC[v5] = (int)v24;
      dword_104C16E0[v5] = v25;
      dword_104C16E4[v5] = v26;
    }
  }
  return result;
}
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104C16DC: using guessed type int dword_104C16DC[];
// 104C16E0: using guessed type int dword_104C16E0[];
// 104C16E4: using guessed type int dword_104C16E4[];
// 104C170C: using guessed type int dword_104C170C[];
// 104C1720: using guessed type float flt_104C1720[];
// 104C1724: using guessed type float flt_104C1724[];
// 104C172C: using guessed type int dword_104C172C[];
// 104C1730: using guessed type int dword_104C1730[];
// 104C1734: using guessed type int dword_104C1734[];
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001F7E0) --------------------------------------------------------
float *__cdecl graphics_1001F7E0(int a1, int a2, int a3, int a4, int a5, int a6) {
  float *result;    // eax
  int v7;           // edi
  float *v8;        // ecx
  float *v9;        // edx
  float *v10;       // edx
  unsigned int v11; // ecx
  double v12;       // st7
  double v13;       // st7
  WORD v14;         // ax
  int v15;          // ecx
  WORD v16;         // ax
  int v17;          // ecx
  WORD v18;         // ax
  int v19;          // ecx
  DWORD v20;        // edx
  DWORD v21;        // ecx
  int *v22;         // ecx
  int v23;          // edx
  int v24;          // edi
  _DWORD *v25;      // esi
  WORD v26;         // ax
  int v27;          // ecx
  WORD v28;         // ax
  int v29;          // ecx
  WORD v30;         // ax
  int v31;          // ecx
  DWORD v32;        // edx
  DWORD v33;        // ecx
  int *v34;         // ecx
  int v35;          // edx
  float *v36;       // [esp+10h] [ebp-22Ch] BYREF
  int v37;          // [esp+14h] [ebp-228h]
  int v38;          // [esp+18h] [ebp-224h]
  float v39;        // [esp+1Ch] [ebp-220h]
  _DWORD v40[8];    // [esp+20h] [ebp-21Ch] BYREF
  char v41;         // [esp+40h] [ebp-1FCh] BYREF
  int v42[15];      // [esp+5Ch] [ebp-1E0h] BYREF
  _DWORD v43[105];  // [esp+98h] [ebp-1A4h] BYREF

  *(_DWORD *)(a3 + 64) = 0;
  *(_DWORD *)(a2 + 64) = a3 + 64;
  *(_DWORD *)(a1 + 64) = a2 + 64;
  v36 = (float *)(a1 + 64);
  *(_DWORD *)(a3 + 64) = a1 + 64;
  v37 = 3;
  result = (float *)sub_1001DEF0((int)&v36);
  v7 = v37;
  if (v37 < 3)
    goto LABEL_8;
  result = (float *)sub_1001D9F0((int)&v36);
  v7 = v37;
  if (v37 < 3)
    goto LABEL_8;
  result = (float *)sub_1001DB30((int)&v36);
  v7 = v37;
  if (v37 < 3)
    goto LABEL_8;
  result = (float *)sub_1001DDB0((int)&v36);
  v7 = v37;
  if (v37 < 3)
    goto LABEL_8;
  result = (float *)sub_1001E030((int)&v36);
  v7 = v37;
  if (v37 >= 3 && (result = (float *)sub_1001DC70((int)&v36), v7 = v37, v37 >= 3) &&
      (result = (float *)sub_1001D810((int)&v36), v7 = v37, v37 >= 3)) {
    v38 = 0;
    v10 = v36;
    result = (float *)&v41;
    do {
      v11 = (unsigned int)v10;
      v10 = *(float **)v10;
      v36 = v10;
      v39 = 1.0 / *(float *)(v11 + 24);
      *result = v39;
      *(result - 8) = *(float *)(v11 + 4) * flt_104BBF08 * v39 + flt_104C0BB0;
      v12 = *(float *)(v11 + 8) * flt_104BC198;
      *(result - 6) = 0.99900001;
      *((_DWORD *)result - 5) = a4;
      *((_DWORD *)result - 4) = a5;
      *((_DWORD *)result - 3) = a6;
      v13 = v12 * *result;
      *result = 0.000015259022;
      *(result - 7) = v13 + flt_104C0BB8;
      result[1] = *(float *)(v11 + 16) * flt_118AA08C;
      result[2] = *(float *)(v11 + 20) * flt_118AA090;
      if (v11 >= (unsigned int)dword_104C01A8 && v11 < (unsigned int)&flt_104C0BA8) {
        *(_DWORD *)v11 = dword_104C0BBC;
        v10 = v36;
        v7 = v37;
        dword_104C0BBC = v11;
      }
      result += 15;
      ++v38;
    } while (v38 < v7);
    if (v7 == 3) {
      v14 = off_100A79EC(v43);
      v15 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v14;
      gIndexedPrimitiveIndexCount = v15 + 1;
      v16 = off_100A79EC(v42);
      v17 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v16;
      gIndexedPrimitiveIndexCount = v17 + 1;
      v18 = off_100A79EC(v40);
      v19 = gIndexedPrimitiveIndexCount;
      v20 = gVertexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v18;
      result = (float *)(v20 + 3);
      v21 = v19 + 1;
      gIndexedPrimitiveIndexCount = v21;
      if (v20 + 3 > 0x200 || (result = (float *)(v21 + 3), v21 + 3 > 0x200)) {
        if (v21) {
          g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                     D3DPT_TRIANGLELIST,
                                                     D3DVT_TLVERTEX,
                                                     &gVertices,
                                                     v20,
                                                     &g_indexedPrimitiveIndices,
                                                     v21,
                                                     12);
          result = 0;
          if (dword_104C5190 > 0) {
              v22 = dword_104C0BC0;
              do {
                  v23 = *v22;
                  result = (float *)((char *)result + 1);
                  ++v22;
                  *(_DWORD *)(v23 + 104) = -1;
              } while ((int)result < dword_104C5190);
          }
          gIndexedPrimitiveIndexCount = 0;
          gVertexCount = 0;
          dword_104C5190 = 0;
        }
      }
    } else if (v7 > 2) {
      v24 = v7 - 2;
      v25 = v43;
      do {
        v26 = off_100A79EC(v25);
        v27 = gIndexedPrimitiveIndexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v26;
        gIndexedPrimitiveIndexCount = v27 + 1;
        v28 = off_100A79EC(v25 - 15);
        v29 = gIndexedPrimitiveIndexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v28;
        gIndexedPrimitiveIndexCount = v29 + 1;
        v30 = off_100A79EC(v40);
        v31 = gIndexedPrimitiveIndexCount;
        v32 = gVertexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v30;
        result = (float *)(v32 + 3);
        v33 = v31 + 1;
        gIndexedPrimitiveIndexCount = v33;
        if (v32 + 3 > 0x200 || (result = (float *)(v33 + 3), v33 + 3 > 0x200)) {
          if (v33) {
              g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                         D3DPT_TRIANGLELIST,
                                                         D3DVT_TLVERTEX,
                                                         &gVertices,
                                                         v32,
                                                         &g_indexedPrimitiveIndices,
                                                         v33,
                                                         12);
              result = 0;
              if (dword_104C5190 > 0) {
                  v34 = dword_104C0BC0;
                  do {
                      v35 = *v34;
                      result = (float *)((char *)result + 1);
                      ++v34;
                      *(_DWORD *)(v35 + 104) = -1;
                  } while ((int)result < dword_104C5190);
              }
              gIndexedPrimitiveIndexCount = 0;
              gVertexCount = 0;
              dword_104C5190 = 0;
          }
        }
        v25 += 15;
        --v24;
      } while (v24);
    }
  } else {
  LABEL_8:
    if (v7 > 0) {
      v8 = v36;
      v9 = (float *)dword_104C0BBC;
      do {
        result = v8;
        v8 = *(float **)v8;
        v36 = v8;
        if (result >= (float *)dword_104C01A8 && result < &flt_104C0BA8) {
          *(_DWORD *)result = v9;
          v8 = v36;
          v9 = result;
          dword_104C0BBC = (int)result;
        }
        --v7;
      } while (v7);
    }
  }
  return result;
}
// 1001F906: conditional instruction was optimized away because of '%var_228.4>=3'
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;
// 104C0BBC: using guessed type int dword_104C0BBC;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001FBE0) --------------------------------------------------------
unsigned __int8 *__cdecl graphics_1001FBE0(unsigned __int8 *a1) {
  int v1;           // eax
  int *v2;          // ecx
  int v3;           // edi
  int v5;           // eax
  int v6;           // edx
  int v7;           // ecx
  float *v9;        // esi
  float *v10;       // edi
  double v11;       // st7
  float *v12;       // eax
  WORD v13;         // ax
  int v14;          // ecx
  WORD v15;         // ax
  int v16;          // ecx
  WORD v17;         // ax
  int v18;          // ecx
  unsigned int v19; // edx
  int v20;          // ecx
  int v21;          // [esp+A4h] [ebp+4h]

  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  v5 = 27 * a1[5];
  v6 = 27 * a1[6];
  v7 = 27 * a1[4];
  v21 = dword_104C170C[v5];
  if ((dword_104C170C[v7] & dword_104C170C[v6] & v21) == 0) {
    if (v21 | dword_104C170C[v7] | dword_104C170C[v6]) {
      graphics_1001FF90((int)&flt_104C16D0[v6], (int)&flt_104C16D0[v5], (int)&flt_104C16D0[v7]);
      return a1 + 8;
    }
    v9 = &flt_104C16D0[v6];
    v10 = &flt_104C16D0[v5];
    v9[9] = flt_104C1720[v6] * flt_118AA08C;
    v9[10] = flt_104C1724[v6] * flt_118AA090;
    v10[9] = flt_104C1720[v5] * flt_118AA08C;
    v11 = flt_104C1724[v5] * flt_118AA090;
    v12 = &flt_104C16D0[v7];
    v10[10] = v11;
    v12[9] = flt_104C1720[v7] * flt_118AA08C;
    v12[10] = flt_104C1724[v7] * flt_118AA090;
    v13 = off_100A79EC(&flt_104C16D0[v7]);
    v14 = gIndexedPrimitiveIndexCount;
    *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v13;
    gIndexedPrimitiveIndexCount = v14 + 1;
    v15 = off_100A79EC(v10);
    v16 = gIndexedPrimitiveIndexCount;
    *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v15;
    gIndexedPrimitiveIndexCount = v16 + 1;
    v17 = off_100A79EC(v9);
    v18 = gIndexedPrimitiveIndexCount;
    v19 = gVertexCount + 3;
    *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v17;
    v20 = v18 + 1;
    gIndexedPrimitiveIndexCount = v20;
    if (v19 > 0x200 || (unsigned int)(v20 + 3) > 0x200)
      graphics_1001D3A0();
  }
  return a1 + 8;
}
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C170C: using guessed type int dword_104C170C[];
// 104C1720: using guessed type float flt_104C1720[];
// 104C1724: using guessed type float flt_104C1724[];
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (1001FF90) --------------------------------------------------------
int *__cdecl graphics_1001FF90(int a1, int a2, int a3) {
  int *result;     // eax
  int *v4;         // ecx
  int *v5;         // edx
  int *v6;         // esi
  int *v7;         // edx
  float *v8;       // ecx
  unsigned int v9; // eax
  int v10;         // esi
  int v11;         // edi
  int v12;         // ebx
  double v13;      // st7
  double v14;      // st7
  WORD v15;        // ax
  int v16;         // ecx
  WORD v17;        // ax
  int v18;         // ecx
  WORD v19;        // ax
  int v20;         // ecx
  DWORD v21;       // edx
  DWORD v22;       // ecx
  int *v23;        // ecx
  int v24;         // edx
  _DWORD *v25;     // esi
  int v26;         // ebx
  WORD v27;        // ax
  int v28;         // ecx
  WORD v29;        // ax
  int v30;         // ecx
  WORD v31;        // ax
  int v32;         // ecx
  DWORD v33;       // edx
  DWORD v34;       // ecx
  int *v35;        // ecx
  int v36;         // edx
  int *v37;        // [esp+10h] [ebp-22Ch] BYREF
  int v38;         // [esp+14h] [ebp-228h]
  int v39;         // [esp+18h] [ebp-224h]
  float v40;       // [esp+1Ch] [ebp-220h]
  _DWORD v41[8];   // [esp+20h] [ebp-21Ch] BYREF
  char v42;        // [esp+40h] [ebp-1FCh] BYREF
  int v43[15];     // [esp+5Ch] [ebp-1E0h] BYREF
  _DWORD v44[105]; // [esp+98h] [ebp-1A4h] BYREF

  *(_DWORD *)(a3 + 64) = 0;
  *(_DWORD *)(a2 + 64) = a3 + 64;
  *(_DWORD *)(a1 + 64) = a2 + 64;
  v37 = (int *)(a1 + 64);
  *(_DWORD *)(a3 + 64) = a1 + 64;
  v38 = 3;
  sub_1001DEF0((int)&v37);
  result = (int *)v38;
  if (v38 < 3)
    goto LABEL_8;
  sub_1001D9F0((int)&v37);
  result = (int *)v38;
  if (v38 < 3)
    goto LABEL_8;
  sub_1001DB30((int)&v37);
  result = (int *)v38;
  if (v38 < 3)
    goto LABEL_8;
  sub_1001DDB0((int)&v37);
  result = (int *)v38;
  if (v38 < 3)
    goto LABEL_8;
  sub_1001E030((int)&v37);
  result = (int *)v38;
  if (v38 >= 3 && (sub_1001DC70((int)&v37), result = (int *)v38, v38 >= 3) &&
      (sub_1001D810((int)&v37), result = (int *)v38, v38 >= 3)) {
    v39 = 0;
    v7 = v37;
    v8 = (float *)&v42;
    do {
      v9 = (unsigned int)v7;
      v7 = (int *)*v7;
      v37 = v7;
      v10 = *(_DWORD *)(v9 + 36);
      v11 = *(_DWORD *)(v9 + 32);
      v12 = *(_DWORD *)(v9 + 28);
      v40 = 1.0 / *(float *)(v9 + 24);
      *v8 = v40;
      *(v8 - 8) = *(float *)(v9 + 4) * flt_104BBF08 * v40 + flt_104C0BB0;
      v13 = *(float *)(v9 + 8) * flt_104BC198;
      *(v8 - 6) = 0.99900001;
      *((_DWORD *)v8 - 5) = v12;
      *((_DWORD *)v8 - 4) = v11;
      *((_DWORD *)v8 - 3) = v10;
      v14 = v13 * *v8;
      *v8 = 0.000015259022;
      *(v8 - 7) = v14 + flt_104C0BB8;
      v8[1] = *(float *)(v9 + 16) * flt_118AA08C;
      v8[2] = *(float *)(v9 + 20) * flt_118AA090;
      if (v9 >= (unsigned int)dword_104C01A8 && v9 < (unsigned int)&flt_104C0BA8) {
        *(_DWORD *)v9 = dword_104C0BBC;
        v7 = v37;
        dword_104C0BBC = v9;
      }
      result = (int *)v38;
      v8 += 15;
      ++v39;
    } while (v39 < v38);
    if (v38 == 3) {
      v15 = off_100A79EC(v44);
      v16 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v15;
      gIndexedPrimitiveIndexCount = v16 + 1;
      v17 = off_100A79EC(v43);
      v18 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v17;
      gIndexedPrimitiveIndexCount = v18 + 1;
      v19 = off_100A79EC(v41);
      v20 = gIndexedPrimitiveIndexCount;
      v21 = gVertexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v19;
      result = (int *)(v21 + 3);
      v22 = v20 + 1;
      gIndexedPrimitiveIndexCount = v22;
      if (v21 + 3 > 0x200 || (result = (int *)(v22 + 3), v22 + 3 > 0x200)) {
        if (v22) {
          g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                     D3DPT_TRIANGLELIST,
                                                     D3DVT_TLVERTEX,
                                                     &gVertices,
                                                     v21,
                                                     &g_indexedPrimitiveIndices,
                                                     v22,
                                                     12);
          result = 0;
          if (dword_104C5190 > 0) {
              v23 = dword_104C0BC0;
              do {
                  v24 = *v23;
                  result = (int *)((char *)result + 1);
                  ++v23;
                  *(_DWORD *)(v24 + 104) = -1;
              } while ((int)result < dword_104C5190);
          }
          gIndexedPrimitiveIndexCount = 0;
          gVertexCount = 0;
          dword_104C5190 = 0;
        }
      }
    } else if (v38 > 2) {
      v25 = v44;
      v26 = v38 - 2;
      do {
        v27 = off_100A79EC(v25);
        v28 = gIndexedPrimitiveIndexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v27;
        gIndexedPrimitiveIndexCount = v28 + 1;
        v29 = off_100A79EC(v25 - 15);
        v30 = gIndexedPrimitiveIndexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v29;
        gIndexedPrimitiveIndexCount = v30 + 1;
        v31 = off_100A79EC(v41);
        v32 = gIndexedPrimitiveIndexCount;
        v33 = gVertexCount;
        *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v31;
        result = (int *)(v33 + 3);
        v34 = v32 + 1;
        gIndexedPrimitiveIndexCount = v34;
        if (v33 + 3 > 0x200 || (result = (int *)(v34 + 3), v34 + 3 > 0x200)) {
          if (v34) {
              g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                         D3DPT_TRIANGLELIST,
                                                         D3DVT_TLVERTEX,
                                                         &gVertices,
                                                         v33,
                                                         &g_indexedPrimitiveIndices,
                                                         v34,
                                                         12);
              result = 0;
              if (dword_104C5190 > 0) {
                  v35 = dword_104C0BC0;
                  do {
                      v36 = *v35;
                      result = (int *)((char *)result + 1);
                      ++v35;
                      *(_DWORD *)(v36 + 104) = -1;
                  } while ((int)result < dword_104C5190);
              }
              gIndexedPrimitiveIndexCount = 0;
              gVertexCount = 0;
              dword_104C5190 = 0;
          }
        }
        v25 += 15;
        --v26;
      } while (v26);
    }
  } else {
  LABEL_8:
    if ((int)result > 0) {
      v4 = v37;
      v5 = (int *)dword_104C0BBC;
      v6 = result;
      do {
        result = v4;
        v4 = (int *)*v4;
        v37 = v4;
        if (result >= dword_104C01A8 && result < (int *)&flt_104C0BA8) {
          *result = (int)v5;
          v4 = v37;
          v5 = result;
          dword_104C0BBC = (int)result;
        }
        v6 = (int *)((char *)v6 - 1);
      } while (v6);
    }
  }
  return result;
}
// 100200B8: conditional instruction was optimized away because of '%var_228.4>=3'
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BA8: using guessed type float flt_104C0BA8;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;
// 104C0BBC: using guessed type int dword_104C0BBC;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (10020380) --------------------------------------------------------
unsigned __int8 *__cdecl graphics_10020380(unsigned __int8 *a1) {
  int v1;  // eax
  int *v2; // ecx
  int v3;  // edi

  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  graphics_1001EC20(a1[2], a1[1], *a1);
  graphics_1001EC20(a1[6], a1[5], a1[4]);
  return a1 + 8;
}
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (100205F0) --------------------------------------------------------
unsigned __int8 *__cdecl graphics_100205F0(unsigned __int8 *a1) {
  int v1;  // eax
  int *v2; // ecx
  int v3;  // edi

  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  graphics_1001F550(a1[2], a1[1], *a1);
  graphics_1001F550(a1[6], a1[5], a1[4]);
  return a1 + 8;
}
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (10020860) --------------------------------------------------------
unsigned __int8 *__cdecl graphics_10020860(unsigned __int8 *a1) {
  int v1;     // eax
  int *v2;    // ecx
  int v3;     // edi
  int v5;     // esi
  int v6;     // eax
  int v7;     // edx
  int v8;     // ecx
  int v9;     // esi
  float *v10; // esi
  float *v11; // ebx
  float *v12; // ebp
  int v14;    // [esp+A4h] [ebp+4h]

  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  v5 = a1[2];
  v6 = 27 * a1[1];
  v7 = 27 * *a1;
  v14 = dword_104C170C[v6];
  v8 = 27 * v5;
  v9 = dword_104C170C[27 * v5];
  if ((dword_104C170C[v7] & v9 & v14) == 0) {
    if (v14 | dword_104C170C[v7] | v9) {
      graphics_1001FF90((int)&flt_104C16D0[v8], (int)&flt_104C16D0[v6], (int)&flt_104C16D0[v7]);
    } else {
      v10 = &flt_104C16D0[v8];
      v11 = &flt_104C16D0[v6];
      v12 = &flt_104C16D0[v7];
      v10[9] = flt_104C1720[v8] * flt_118AA08C;
      v10[10] = flt_104C1724[v8] * flt_118AA090;
      v11[9] = flt_104C1720[v6] * flt_118AA08C;
      v11[10] = flt_104C1724[v6] * flt_118AA090;
      sub_1001E4B0((int)&flt_104C16D0[v7], (int)&unk_104C1710 + v7 * 4);
      graphics_1001E4E0((int)v10, (int)v11, (int)v12);
    }
  }
  graphics_10020BA0(a1[6], a1[5], a1[4]);
  return a1 + 8;
}
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C170C: using guessed type int dword_104C170C[];
// 104C1720: using guessed type float flt_104C1720[];
// 104C1724: using guessed type float flt_104C1724[];
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (10020BA0) --------------------------------------------------------
int __cdecl graphics_10020BA0(int a1, int a2, int a3) {
  int v3;     // edx
  int v4;     // ecx
  int result; // eax
  int v6;     // ebx
  int v7;     // edi
  float *v8;  // esi
  float *v9;  // edi
  float *v10; // eax
  WORD v11;   // ax
  int v12;    // ecx
  WORD v13;   // ax
  int v14;    // ecx
  WORD v15;   // ax
  int v16;    // ecx
  DWORD v17;  // ecx
  int *v18;   // ecx
  int v19;    // edi

  v3 = 27 * a1;
  v4 = 27 * a3;
  result = 108 * a2;
  v6 = dword_104C170C[27 * a3];
  v7 = dword_104C170C[27 * a2];
  if ((v6 & dword_104C170C[27 * a1] & v7) == 0) {
    if (v7 | v6 | dword_104C170C[27 * a1]) {
      result = (int)graphics_1001FF90(
          (int)&flt_104C16D0[v3], (int)flt_104C16D0 + result, (int)&flt_104C16D0[v4]);
    } else {
      v8 = &flt_104C16D0[v3];
      v9 = (float *)((char *)flt_104C16D0 + result);
      v8[9] = flt_104C1720[27 * a1] * flt_118AA08C;
      v8[10] = flt_104C1724[27 * a1] * flt_118AA090;
      v9[9] = flt_104C1720[27 * a2] * flt_118AA08C;
      v10 = &flt_104C16D0[v4];
      v9[10] = flt_104C1724[27 * a2] * flt_118AA090;
      v10[9] = flt_104C1720[27 * a3] * flt_118AA08C;
      v10[10] = flt_104C1724[27 * a3] * flt_118AA090;
      v11 = off_100A79EC(&flt_104C16D0[v4]);
      v12 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v11;
      gIndexedPrimitiveIndexCount = v12 + 1;
      v13 = off_100A79EC(v9);
      v14 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v13;
      gIndexedPrimitiveIndexCount = v14 + 1;
      v15 = off_100A79EC(v8);
      v16 = gIndexedPrimitiveIndexCount;
      *(&g_indexedPrimitiveIndices + gIndexedPrimitiveIndexCount) = v15;
      result = gVertexCount;
      v17 = v16 + 1;
      gIndexedPrimitiveIndexCount = v17;
      if (((unsigned int)(gVertexCount + 3) > 0x200 || v17 + 3 > 0x200) && v17) {
        g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                   D3DPT_TRIANGLELIST,
                                                   D3DVT_TLVERTEX,
                                                   &gVertices,
                                                   gVertexCount,
                                                   &g_indexedPrimitiveIndices,
                                                   v17,
                                                   12);
        result = 0;
        if (dword_104C5190 > 0) {
          v18 = dword_104C0BC0;
          do {
              v19 = *v18;
              ++result;
              ++v18;
              *(_DWORD *)(v19 + 104) = -1;
          } while (result < dword_104C5190);
        }
        gIndexedPrimitiveIndexCount = 0;
        gVertexCount = 0;
        dword_104C5190 = 0;
      }
    }
  }
  return result;
}
// 100A79EC: using guessed type int (__cdecl *off_100A79EC)(_DWORD);
// 104C170C: using guessed type int dword_104C170C[];
// 104C1720: using guessed type float flt_104C1720[];
// 104C1724: using guessed type float flt_104C1724[];
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (10020D60) --------------------------------------------------------
int __cdecl sub_10020D60(_DWORD *a1) {
  int v1; // eax

  if ((*a1 & 0xFF0000) == 0) {
    if (dword_104C01A4 == 9)
      exit(1);
    v1 = dword_104C01A4;
    dword_104C16A8[dword_104C01A4] = (int)(a1 + 2);
    dword_104C01A4 = v1 + 1;
  }
  return a1[1];
}
// 104C01A4: using guessed type int dword_104C01A4;

//----- (10020DA0) --------------------------------------------------------
int sub_10020DA0() {
  if (!dword_104C01A4)
    return 0;
  --dword_104C01A4;
  return dword_104C16A8[dword_104C01A4];
}
// 104C01A4: using guessed type int dword_104C01A4;

//----- (10020DC0) --------------------------------------------------------
int *__cdecl sub_10020DC0(int *a1) {
  int v1;        // eax
  float *v2;     // esi
  bool v3;       // zf
  int v4;        // eax
  char *v5;      // edi
  float *v6;     // eax
  int v7;        // eax
  float *v8;     // eax
  float v10[16]; // [esp+10h] [ebp-40h] BYREF

  v1 = *a1;
  v2 = (float *)a1[1];
  if ((*a1 & 0x10000) != 0) {
    if ((v1 & 0x20000) != 0)
      qmemcpy(flt_104BBEC0, v2, 0x40u);
    else
      sub_100306C0(v2, flt_104BBEC0, flt_104BBEC0);
  } else {
    if ((v1 & 0x20000) != 0) {
      v3 = (v1 & 0x40000) == 0;
      v4 = dword_100A79DC;
      if (v3) {
        v5 = (char *)&unk_104BBED0 + 64 * dword_100A79DC;
      } else {
        if (dword_100A79DC == 10)
          v4 = 0;
        dword_100A79DC = v4 + 1;
        v5 = (char *)&unk_104BBED0 + 64 * v4 + 64;
      }
    } else {
      if (dword_100A79DC)
        v6 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
      else
        v6 = 0;
      sub_100306C0(v2, v6, v10);
      if ((*a1 & 0x40000) != 0) {
        v7 = dword_100A79DC;
        if (dword_100A79DC == 10)
          v7 = 0;
        dword_100A79DC = v7 + 1;
        v5 = (char *)&unk_104BBED0 + 64 * v7 + 64;
      } else {
        v5 = (char *)&unk_104BBED0 + 64 * dword_100A79DC;
      }
      v2 = v10;
    }
    qmemcpy(v5, v2, 0x40u);
    dword_104C5180 = 0;
  }
  if (dword_100A79DC)
    v8 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
  else
    v8 = 0;
  sub_100306C0(v8, flt_104BBEC0, &flt_104C4D10);
  return a1 + 2;
}
// 100A79DC: using guessed type int dword_100A79DC;
// 104C4D10: using guessed type float flt_104C4D10;
// 104C5180: using guessed type int dword_104C5180;

//----- (10020EF0) --------------------------------------------------------
int __cdecl sub_10020EF0(int a1) {
  if (dword_100A79DC) {
    if (!--dword_100A79DC)
      dword_100A79DC = 10;
  }
  return a1 + 8;
}
// 100A79DC: using guessed type int dword_100A79DC;

//----- (10020F20) --------------------------------------------------------
int __cdecl sub_10020F20(int a1) {
  dword_104C517C = dword_104C5178;
  dword_104C5178 |= *(_DWORD *)(a1 + 4);
  sub_1001E7C0();
  return a1 + 8;
}
// 104C5178: using guessed type int dword_104C5178;
// 104C517C: using guessed type int dword_104C517C;

//----- (10020F50) --------------------------------------------------------
_DWORD *__cdecl sub_10020F50(_DWORD *a1) {
  int v1; // eax

  v1 = (int)(*a1 << 16) >> 24;
  if (!v1)
    return (_DWORD *)sub_100243D0((int)a1);
  if (v1 == 3)
    return (_DWORD *)sub_10020F80((int)a1);
  return a1 + 2;
}

//----- (10020F80) --------------------------------------------------------
int __cdecl sub_10020F80(int a1) {
  dword_104C1694 = *(_DWORD *)(a1 + 4);
  sub_10020FA0(dword_104C1694);
  return a1 + 8;
}
// 104C1694: using guessed type int dword_104C1694;

//----- (10020FA0) --------------------------------------------------------
char __cdecl sub_10020FA0(int a1) {
  int v1;  // eax
  char v2; // al
  char v3; // al
  char v4; // al
  char v5; // al
  char v6; // al
  char v7; // al
  char v8; // al

  v1 = dword_10277370;
  renderState_0 = 1;
  if (dword_102773F8 == 1)
    LOBYTE(v1) = dword_10277370 & 0xFE;
  else
    v1 = dword_10277370 | 1;
  dword_10277370 = v1;
  switch (a1) {
  case 5263184:
    dword_10277390 = 8;
    if (dword_10277410 == 8)
      v2 = v1 & 0xBF;
    else
      v2 = v1 | 0x40;
    dword_104BBE28 = 7;
    dword_10277394 = 7;
    if (dword_10277414 == 7)
      LOBYTE(v1) = v2 & 0x7F;
    else
      LOBYTE(v1) = v2 | 0x80;
    if (dword_104C5184)
      goto LABEL_31;
    dword_10277380 = 5;
    if (dword_10277400 == 5)
      LOBYTE(v1) = v1 & 0xFB;
    else
      LOBYTE(v1) = v1 | 4;
    dword_10277384 = 6;
    if (dword_10277404 == 6) {
      LOBYTE(v1) = v1 & 0xF7;
    LABEL_31:
      renderState = 1;
      if (dword_102773FC == 1)
        v4 = v1 & 0xFD;
      else
        v4 = v1 | 2;
      dword_102773A0 = 1;
      if (dword_10277420 == 1)
        BYTE1(v1) &= 0xFBu;
      else
        BYTE1(v1) |= 4u;
      dword_104C16A0 = 3;
      dword_1027738C = 3;
      if (dword_1027740C == 3)
        LOBYTE(v1) = v4 & 0xDF;
      else
        LOBYTE(v1) = v4 | 0x20;
      dword_10277370 = v1;
      return v1;
    }
    goto LABEL_30;
  case 4:
    dword_10277390 = 8;
    if (dword_10277410 == 8)
      v3 = v1 & 0xBF;
    else
      v3 = v1 | 0x40;
    dword_104BBE28 = 7;
    dword_10277394 = 7;
    if (dword_10277414 == 7)
      LOBYTE(v1) = v3 & 0x7F;
    else
      LOBYTE(v1) = v3 | 0x80;
    if (dword_104C5184)
      goto LABEL_31;
    dword_10277380 = 5;
    if (dword_10277400 == 5)
      LOBYTE(v1) = v1 & 0xFB;
    else
      LOBYTE(v1) = v1 | 4;
    dword_10277384 = gD3DInvSrcAlpha;
    if (dword_10277404 == gD3DInvSrcAlpha) {
      LOBYTE(v1) = v1 & 0xF7;
      goto LABEL_31;
    }
  LABEL_30:
    v1 |= 8u;
    goto LABEL_31;
  case 202916416:
  case 5259840:
    dword_10277390 = 8;
    if (dword_10277410 == 8)
      v5 = v1 & 0xBF;
    else
      v5 = v1 | 0x40;
    dword_104BBE28 = 7;
    dword_10277394 = 7;
    if (dword_10277414 == 7)
      LOBYTE(v1) = v5 & 0x7F;
    else
      LOBYTE(v1) = v5 | 0x80;
    if (!dword_104C5184) {
      dword_10277380 = 5;
      if (dword_10277400 == 5)
        LOBYTE(v1) = v1 & 0xFB;
      else
        LOBYTE(v1) = v1 | 4;
      dword_10277384 = 6;
      if (dword_10277404 == 6)
        LOBYTE(v1) = v1 & 0xF7;
      else
        v1 |= 8u;
    }
    renderState = 1;
    if (dword_102773FC == 1)
      LOBYTE(v1) = v1 & 0xFD;
    else
      LOBYTE(v1) = v1 | 2;
    dword_102773A0 = 1;
    if (dword_10277420 == 1) {
      BYTE1(v1) &= 0xFBu;
      dword_10277370 = v1;
      return v1;
    }
  LABEL_140:
    BYTE1(v1) |= 4u;
    dword_10277370 = v1;
    return v1;
  case 3:
    dword_104C5184 = 0;
    return v1;
  case 1:
    dword_104C16A0 = 4;
    dword_1027738C = 4;
    if (dword_1027740C == 4)
      LOBYTE(v1) = v1 & 0xDF;
    else
      LOBYTE(v1) = v1 | 0x20;
    renderState_0 = 0;
    if (dword_102773F8)
      v1 |= 1u;
    else
      LOBYTE(v1) = v1 & 0xFE;
    dword_10277370 = v1;
    return v1;
  case 0:
    dword_104C16A0 = 2;
    dword_1027738C = 2;
    if (dword_1027740C == 2)
      LOBYTE(v1) = v1 & 0xDF;
    else
      LOBYTE(v1) = v1 | 0x20;
    renderState = 1;
    if (dword_102773FC == 1)
      LOBYTE(v1) = v1 & 0xFD;
    else
      v1 |= 2u;
    dword_102773A0 = 0;
    if (!dword_10277420) {
      BYTE1(v1) &= 0xFBu;
      dword_10277370 = v1;
      return v1;
    }
    goto LABEL_140;
  }
  if (a1 != 219695576) {
    if ((a1 & 0x1800) == 0) {
      if (!dword_104C5184) {
        dword_10277380 = 2;
        if (dword_10277400 == 2)
          LOBYTE(v1) = v1 & 0xFB;
        else
          LOBYTE(v1) = v1 | 4;
        dword_10277384 = 1;
        if (dword_10277404 == 1)
          LOBYTE(v1) = v1 & 0xF7;
        else
          v1 |= 8u;
      }
      dword_104BBE28 = 8;
      dword_10277394 = 8;
      if (dword_10277414 == 8)
        LOBYTE(v1) = v1 & 0x7F;
      else
        LOBYTE(v1) = v1 | 0x80;
      renderState = 0;
      if (dword_102773FC)
        v1 |= 2u;
      else
        LOBYTE(v1) = v1 & 0xFD;
      dword_102773A0 = 0;
      if (!dword_10277420) {
        BYTE1(v1) &= 0xFBu;
        dword_10277370 = v1;
        return v1;
      }
      goto LABEL_140;
    }
    if ((a1 & 0x10000) != 0) {
      if (!gD3dalphacompar)
        return v1;
      dword_10277390 = 128;
      if (dword_10277410 == 128)
        LOBYTE(v1) = v1 & 0xBF;
      else
        LOBYTE(v1) = v1 | 0x40;
      dword_104BBE28 = 7;
      dword_10277394 = 7;
      if (dword_10277414 != 7) {
        v1 |= 0x80u;
        renderState = 1;
        if (dword_102773FC == 1) {
          LOBYTE(v1) = v1 & 0xFD;
          goto LABEL_123;
        }
        goto LABEL_122;
      }
      LOBYTE(v1) = v1 & 0x7F;
    } else {
      dword_10277390 = 1;
      if (dword_10277410 == 1)
        v7 = v1 & 0xBF;
      else
        v7 = v1 | 0x40;
      dword_104BBE28 = 7;
      dword_10277394 = 7;
      if (dword_10277414 == 7)
        LOBYTE(v1) = v7 & 0x7F;
      else
        LOBYTE(v1) = v7 | 0x80;
      if (!dword_104C5184) {
        dword_10277380 = 5;
        if (dword_10277400 == 5)
          v8 = v1 & 0xFB;
        else
          v8 = v1 | 4;
        dword_10277384 = 6;
        if (dword_10277404 == 6)
          LOBYTE(v1) = v8 & 0xF7;
        else
          LOBYTE(v1) = v8 | 8;
      }
      renderState_0 = 0;
      if (dword_102773F8)
        v1 |= 1u;
      else
        LOBYTE(v1) = v1 & 0xFE;
    }
    renderState = 1;
    if (dword_102773FC == 1) {
      LOBYTE(v1) = v1 & 0xFD;
      goto LABEL_123;
    }
  LABEL_122:
    LOBYTE(v1) = v1 | 2;
  LABEL_123:
    dword_102773A0 = 1;
    if (dword_10277420 == 1) {
      BYTE1(v1) &= 0xFBu;
      dword_10277370 = v1;
      return v1;
    }
    goto LABEL_140;
  }
  dword_10277380 = 3;
  if (dword_10277400 == 3)
    v6 = v1 & 0xFB;
  else
    v6 = v1 | 4;
  dword_10277384 = 2;
  if (dword_10277404 == 2)
    LOBYTE(v1) = v6 & 0xF7;
  else
    LOBYTE(v1) = v6 | 8;
  renderState_0 = 0;
  if (dword_102773F8)
    v1 |= 1u;
  else
    LOBYTE(v1) = v1 & 0xFE;
  dword_102773A0 = 1;
  if (dword_10277420 == 1)
    BYTE1(v1) &= 0xFBu;
  else
    BYTE1(v1) |= 4u;
  dword_104C5184 = 1;
  dword_10277370 = v1;
  return v1;
}
// 100A79D8: using guessed type int g_D3dinvsrcalpha;
// 100AA720: using guessed type int g_D3dalphacompar;
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277420: using guessed type int dword_10277420;
// 104BBE28: using guessed type int dword_104BBE28;
// 104C16A0: using guessed type int dword_104C16A0;
// 104C5184: using guessed type int dword_104C5184;

//----- (10021510) --------------------------------------------------------
_DWORD *__cdecl sub_10021510(_DWORD *a1) {
  graphics_10021560((a1[1] >> 12) & 0xFFF, a1[1] & 0xFFF, (*a1 >> 12) & 0xFFF, *a1 & 0xFFF);
  return a1 + 6;
}

//----- (10021560) --------------------------------------------------------
int *__cdecl graphics_10021560(unsigned int a1, unsigned int a2, int a3, int a4) {
  double v4;    // st6
  double v5;    // st4
  double v6;    // st2
  double v7;    // st6
  double v8;    // st3
  double v9;    // st7
  double v10;   // st2
  double v11;   // st4
  double v12;   // st2
  double v13;   // st6
  double v14;   // rt1
  double v15;   // st2
  double v16;   // st7
  double v17;   // st5
  double v18;   // rtt
  int v19;      // eax
  int v20;      // ecx
  int v21;      // edx
  double v22;   // st6
  double v23;   // st5
  double v24;   // st7
  double v25;   // st4
  double v26;   // st6
  int v27;      // eax
  int v28;      // ecx
  int v29;      // edx
  int v30;      // eax
  int *v31;     // ecx
  int v32;      // edi
  int *result;  // eax
  __int64 v34;  // [esp+98h] [ebp-1BCh]
  __int64 v35;  // [esp+98h] [ebp-1BCh]
  float v36;    // [esp+98h] [ebp-1BCh]
  float v37;    // [esp+98h] [ebp-1BCh]
  float v38;    // [esp+98h] [ebp-1BCh]
  float v39;    // [esp+98h] [ebp-1BCh]
  int v40;      // [esp+98h] [ebp-1BCh]
  int v41;      // [esp+98h] [ebp-1BCh]
  int v42;      // [esp+98h] [ebp-1BCh]
  float v43;    // [esp+98h] [ebp-1BCh]
  float v44;    // [esp+A0h] [ebp-1B4h]
  float v45;    // [esp+A0h] [ebp-1B4h]
  float v46;    // [esp+A0h] [ebp-1B4h]
  char v47[68]; // [esp+A4h] [ebp-1B0h] BYREF
  int v48;      // [esp+E8h] [ebp-16Ch]
  int v49;      // [esp+ECh] [ebp-168h]
  int v50;      // [esp+F0h] [ebp-164h]
  int v51;      // [esp+F4h] [ebp-160h]
  float v52;    // [esp+F8h] [ebp-15Ch]
  int v53;      // [esp+FCh] [ebp-158h]
  int v54;      // [esp+100h] [ebp-154h]
  int v55;      // [esp+104h] [ebp-150h]
  int v56;      // [esp+108h] [ebp-14Ch]
  char v57[68]; // [esp+110h] [ebp-144h] BYREF
  int v58;      // [esp+154h] [ebp-100h]
  int v59;      // [esp+158h] [ebp-FCh]
  int v60;      // [esp+15Ch] [ebp-F8h]
  int v61;      // [esp+160h] [ebp-F4h]
  int v62;      // [esp+164h] [ebp-F0h]
  int v63;      // [esp+168h] [ebp-ECh]
  int v64;      // [esp+16Ch] [ebp-E8h]
  int v65;      // [esp+170h] [ebp-E4h]
  int v66;      // [esp+174h] [ebp-E0h]
  char v67[68]; // [esp+17Ch] [ebp-D8h] BYREF
  int v68;      // [esp+1C0h] [ebp-94h]
  int v69;      // [esp+1C4h] [ebp-90h]
  int v70;      // [esp+1C8h] [ebp-8Ch]
  int v71;      // [esp+1CCh] [ebp-88h]
  int v72;      // [esp+1D0h] [ebp-84h]
  int v73;      // [esp+1D4h] [ebp-80h]
  int v74;      // [esp+1D8h] [ebp-7Ch]
  int v75;      // [esp+1DCh] [ebp-78h]
  int v76;      // [esp+1E0h] [ebp-74h]
  char v77[68]; // [esp+1E8h] [ebp-6Ch] BYREF
  int v78;      // [esp+22Ch] [ebp-28h]
  int v79;      // [esp+230h] [ebp-24h]
  float v80;    // [esp+234h] [ebp-20h]
  int v81;      // [esp+238h] [ebp-1Ch]
  float v82;    // [esp+23Ch] [ebp-18h]
  float v83;    // [esp+240h] [ebp-14h]
  int v84;      // [esp+244h] [ebp-10h]
  int v85;      // [esp+248h] [ebp-Ch]
  int v86;      // [esp+24Ch] [ebp-8h]

  v34 = a2;
  LODWORD(v34) = a4;
  v4 = (double)v34;
  v35 = a1;
  LODWORD(v35) = a3;
  v5 = (double)v35;
  *(float *)&v35 = (float)a2;
  v6 = v4;
  v7 = *(float *)&v35;
  *(float *)&v35 = v6;
  v8 = *(float *)&v35 / 4.0;
  *(float *)&v35 = (float)gWidth;
  v9 = *(float *)&v35;
  *(float *)&v35 = (float)gHeight;
  v44 = (float)a1;
  v10 = v5;
  v11 = v44;
  v45 = v10;
  v12 = v7 / 4.0;
  v13 = v45 / 4.0;
  v14 = *(float *)&v35 - v12;
  v15 = v9 / 2.0;
  v16 = *(float *)&v35 - v8;
  v46 = v15;
  *(float *)&v35 = *(float *)&v35 / 2.0;
  v17 = (v14 - *(float *)&v35) / *(float *)&v35 / *(float *)&dword_100A79E8;
  v18 = (v16 - *(float *)&v35) / *(float *)&v35 / *(float *)&dword_100A79E8;
  *(float *)&v35 = (v11 / 4.0 - v46) / v46 / *(float *)&dword_100A79E8;
  v19 = v35;
  *(float *)&v35 = v17;
  v20 = v35;
  *(float *)&v35 = (v13 - v46) / v46 / *(float *)&dword_100A79E8;
  v21 = v35;
  v78 = v19;
  *(float *)&v35 = v18;
  v58 = v19;
  v79 = v20;
  v48 = v21;
  v49 = v20;
  v59 = v35;
  v68 = v21;
  v69 = v35;
  *(float *)&v70 = *(float *)&dword_104C5174 / *(float *)&dword_100A79E8;
  v60 = v70;
  v50 = v70;
  v80 = *(float *)&v70;
  *(float *)&v73 = 1.0 / *(float *)&dword_100A79E8;
  v63 = v73;
  v53 = v73;
  v83 = *(float *)&v73;
  if (dword_104C0DC0) {
    v54 = LODWORD(flt_104BBF04);
    v84 = LODWORD(flt_104BBF04);
    v55 = LODWORD(flt_104C0BAC);
    v85 = LODWORD(flt_104C0BAC);
    v56 = LODWORD(flt_104BBEB8);
    v86 = LODWORD(flt_104BBEB8);
    v74 = LODWORD(flt_104C5154);
    v64 = LODWORD(flt_104C5154);
    v75 = LODWORD(flt_104C5160);
    v65 = LODWORD(flt_104C5160);
    v76 = LODWORD(flt_104C1690);
    v66 = LODWORD(flt_104C1690);
  } else {
    v74 = 1065353216;
    v64 = 1065353216;
    v54 = 1065353216;
    v84 = 1065353216;
    v75 = 1065353216;
    v65 = 1065353216;
    v55 = 1065353216;
    v85 = 1065353216;
    v76 = 1065353216;
    v66 = 1065353216;
    v56 = 1065353216;
    v86 = 1065353216;
  }
  v36 = (float)dword_118AA080;
  v22 = v36;
  v37 = (float)dword_1182983C;
  v23 = v37;
  v38 = (float)dword_11829838;
  v24 = v38;
  v39 = (float)dword_118A9870;
  v25 = v22;
  v26 = v39;
  *(float *)&v40 = v25 * 8.0;
  v27 = v40;
  *(float *)&v41 = v23 * 8.0;
  v28 = v41;
  *(float *)&v42 = v24 * 8.0;
  v29 = v42;
  v81 = v27;
  v43 = v26 * 8.0;
  v51 = v28;
  v82 = v43;
  v52 = v43;
  v61 = v27;
  v62 = v29;
  v71 = v28;
  v72 = v29;
  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v30 = 0;
      if (dword_104C5190 > 0) {
        v31 = dword_104C0BC0;
        do {
          v32 = *v31;
          ++v30;
          ++v31;
          *(_DWORD *)(v32 + 104) = -1;
        } while (v30 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  if ((dword_104C5178 & 0x1000) != 0) {
    graphics_1001D420((int)v77, (int)v47, (int)v57);
    result = graphics_1001D420((int)v47, (int)v67, (int)v57);
  } else {
    graphics_1001D420((int)v57, (int)v47, (int)v77);
    result = graphics_1001D420((int)v57, (int)v67, (int)v47);
  }
  return result;
}
// 100A79E8: using guessed type int dword_100A79E8;
// 100A81C0: using guessed type int g_Width;
// 100A81C4: using guessed type int g_Height;
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104BBEB8: using guessed type float flt_104BBEB8;
// 104BBF04: using guessed type float flt_104BBF04;
// 104C0BAC: using guessed type float flt_104C0BAC;
// 104C0DC0: using guessed type int dword_104C0DC0;
// 104C1690: using guessed type float flt_104C1690;
// 104C5154: using guessed type float flt_104C5154;
// 104C5160: using guessed type float flt_104C5160;
// 104C5174: using guessed type int dword_104C5174;
// 104C5178: using guessed type int dword_104C5178;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 11829838: using guessed type int dword_11829838;
// 1182983C: using guessed type int dword_1182983C;
// 118A9870: using guessed type int dword_118A9870;
// 118AA080: using guessed type int dword_118AA080;

//----- (10021B80) --------------------------------------------------------
_DWORD *__cdecl sub_10021B80(_DWORD *a1) {
  graphics_10021560(
      (a1[1] >> 10) & 0x3FFC, 4 * (a1[1] & 0xFFF), (*a1 >> 10) & 0x3FFC, 4 * (*a1 & 0xFFF));
  return a1 + 2;
}

//----- (10021BD0) --------------------------------------------------------
int *__cdecl sub_10021BD0(int *a1) {
  int v1;        // eax
  int *v2;       // ecx
  int v3;        // edi
  int a1_index1; // edx
  float *v6;     // edi
  float *v7;     // ecx
  int v8;        // ebx
  int v9;        // esi
  double v10;    // st6
  double v11;    // st7
  double v12;    // st5
  double v13;    // st4
  double v14;    // st6
  int deref_a1;  // [esp+20h] [ebp+4h]
  float v17;     // [esp+20h] [ebp+4h]

  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v1 = 0;
    if (dword_104C5190 > 0) {
      v2 = dword_104C0BC0;
      do {
        v3 = *v2;
        ++v1;
        ++v2;
        *(_DWORD *)(v3 + 104) = -1;
      } while (v1 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
  a1_index1 = a1[1];
  deref_a1 = *a1;
  v6 = &flt_104C16D0[27 * BYTE2(deref_a1)];
  if ((unsigned __int16)deref_a1 >> 10) {
    v7 = v6 + 22;
    v8 = (unsigned __int16)deref_a1 >> 10;
    do {
      v9 = 0;
      *(v7 - 5) = flt_104C4D20 * *(float *)(a1_index1 + 4) +
                  flt_104C4D30 * *(float *)(a1_index1 + 8) + *(float *)a1_index1 * flt_104C4D10 +
                  flt_104C4D40;
      *(v7 - 4) = flt_104C4D24 * *(float *)(a1_index1 + 4) +
                  flt_104C4D34 * *(float *)(a1_index1 + 8) + *(float *)a1_index1 * flt_104C4D14 +
                  flt_104C4D44;
      *(v7 - 3) = flt_104C4D28 * *(float *)(a1_index1 + 4) +
                  flt_104C4D38 * *(float *)(a1_index1 + 8) + *(float *)a1_index1 * flt_104C4D18 +
                  flt_104C4D48;
      *v7 = flt_104C4D2C * *(float *)(a1_index1 + 4) + flt_104C4D3C * *(float *)(a1_index1 + 8) +
            *(float *)a1_index1 * flt_104C4D1C + flt_104C4D4C;
      *(v7 - 2) = *(float *)(a1_index1 + 12);
      *(v7 - 1) = *(float *)(a1_index1 + 16);
      v7[1] = *(float *)(a1_index1 + 20) * 0.0039215689;
      v7[2] = *(float *)(a1_index1 + 24) * 0.0039215689;
      v7[3] = *(float *)(a1_index1 + 28) * 0.0039215689;
      if (*v7 < 0.0)
        v9 = 1;
      if (*(v7 - 3) + *v7 < 0.0)
        v9 |= 2u;
      if (*v7 - *(v7 - 3) < 0.0)
        v9 |= 4u;
      if (*(v7 - 5) + *v7 < 0.0)
        v9 |= 8u;
      if (*v7 - *(v7 - 5) < 0.0)
        v9 |= 0x10u;
      if (*(v7 - 4) + *v7 < 0.0)
        v9 |= 0x20u;
      if (*v7 - *(v7 - 4) < 0.0)
        v9 |= 0x40u;
      *((_DWORD *)v7 - 7) = v9;
      if (!v9) {
        v17 = 1.0 / *v7;
        *(v7 - 14) = v17;
        v10 = v7[1];
        v11 = v7[2];
        v12 = v7[3];
        *v6 = flt_104BBF08 * *(v7 - 5) * v17 + flt_104C0BB0;
        *(v7 - 21) = flt_104BC198 * *(v7 - 14) * *(v7 - 4) + flt_104C0BB8;
        v13 = v10;
        v14 = flt_100A79E0 * *(v7 - 14) * *(v7 - 3) + flt_100A79E4;
        *(v7 - 19) = v13;
        *(v7 - 18) = v11;
        *(v7 - 17) = v12;
        *(v7 - 20) = v14;
      }
      a1_index1 += 32;
      v6 += 27;
      v7 += 27;
      --v8;
    } while (v8);
  }
  return a1 + 2;
}
// 100A79E0: using guessed type float flt_100A79E0;
// 100A79E4: using guessed type float flt_100A79E4;
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;
// 104C4D10: using guessed type float flt_104C4D10;
// 104C4D14: using guessed type float flt_104C4D14;
// 104C4D18: using guessed type float flt_104C4D18;
// 104C4D1C: using guessed type float flt_104C4D1C;
// 104C4D20: using guessed type float flt_104C4D20;
// 104C4D24: using guessed type float flt_104C4D24;
// 104C4D28: using guessed type float flt_104C4D28;
// 104C4D2C: using guessed type float flt_104C4D2C;
// 104C4D30: using guessed type float flt_104C4D30;
// 104C4D34: using guessed type float flt_104C4D34;
// 104C4D38: using guessed type float flt_104C4D38;
// 104C4D3C: using guessed type float flt_104C4D3C;
// 104C4D40: using guessed type float flt_104C4D40;
// 104C4D44: using guessed type float flt_104C4D44;
// 104C4D48: using guessed type float flt_104C4D48;
// 104C4D4C: using guessed type float flt_104C4D4C;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (10021E80) --------------------------------------------------------
_DWORD *__cdecl sub_10021E80(_DWORD *a1) {
  float *v1;  // esi
  double v2;  // st6
  double v3;  // st7
  double v4;  // st7
  int v5;     // eax
  int *v6;    // ecx
  int v7;     // esi
  _DWORD *v8; // edx
  float *v9;  // esi
  float *v10; // ebp
  float *v11; // edi
  int v12;    // ecx
  float v14;  // [esp+18h] [ebp-Ch]
  float v15;  // [esp+1Ch] [ebp-8h]
  float v16;  // [esp+20h] [ebp-4h]
  float v17;  // [esp+20h] [ebp-4h]
  float v18;  // [esp+20h] [ebp-4h]
  float v19;  // [esp+20h] [ebp-4h]
  float v20;  // [esp+20h] [ebp-4h]
  float v21;  // [esp+20h] [ebp-4h]
  float v22;  // [esp+20h] [ebp-4h]
  int v23;    // [esp+20h] [ebp-4h]

  if (!dword_104C5180) {
    if (dword_104BC190) {
      if (dword_100A79DC)
        v1 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
      else
        v1 = 0;
      v16 = (float)LOBYTE(dword_104BBE38[0]);
      v2 = v16;
      v17 = (float)BYTE1(dword_104BBE38[0]);
      v3 = v17;
      v18 = (float)BYTE2(dword_104BBE38[0]);
      flt_104C15D0 = v2 * 0.0039215689;
      flt_104C15D4 = v3 * 0.0039215689;
      flt_104C15D8 = v18 * 0.0039215689;
      v14 = (float)byte_104BBE41;
      v19 = (float)byte_104BBE42;
      v15 = (float)byte_104BBE40;
      flt_104C15DC = (v1[1] * v14 + v1[2] * v19 + *v1 * v15) / 128.0;
      flt_104C15E0 = (v1[5] * v14 + v1[4] * v15 + v1[6] * v19) / 128.0;
      flt_104C15E4 = (v1[9] * v14 + v1[8] * v15 + v1[10] * v19) / 128.0;
      sub_1003AE50(&flt_104C15DC);
      v20 = (float)(unsigned __int8)dword_104BBE48;
      flt_104C15E8 = v20 * 0.0039215689;
      v21 = (float)BYTE1(dword_104BBE48);
      v4 = v21;
      v22 = (float)BYTE2(dword_104BBE48);
      flt_104C15EC = v4 * 0.0039215689;
      flt_104C15F0 = v22 * 0.0039215689;
    }
    dword_104C5180 = 1;
  }
  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v5 = 0;
    if (dword_104C5190 > 0) {
      v6 = dword_104C0BC0;
      do {
        v7 = *v6;
        ++v5;
        ++v6;
        *(_DWORD *)(v7 + 104) = -1;
      } while (v5 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
  v8 = a1;
  v9 = (float *)a1[1];
  v10 = &flt_104C16D0[27 * (unsigned __int8)BYTE2(*a1)];
  if ((unsigned __int16)*a1 >> 10) {
    v11 = v10 + 22;
    v23 = (unsigned __int16)*a1 >> 10;
    do {
      *(v11 - 5) = flt_104C4D30 * v9[2] + flt_104C4D20 * v9[1] + *v9 * flt_104C4D10 + flt_104C4D40;
      *(v11 - 4) = flt_104C4D34 * v9[2] + flt_104C4D24 * v9[1] + *v9 * flt_104C4D14 + flt_104C4D44;
      *(v11 - 3) = flt_104C4D38 * v9[2] + flt_104C4D28 * v9[1] + *v9 * flt_104C4D18 + flt_104C4D48;
      *v11 = flt_104C4D3C * v9[2] + flt_104C4D2C * v9[1] + *v9 * flt_104C4D1C + flt_104C4D4C;
      *(v11 - 2) = v9[3];
      *(v11 - 1) = v9[4];
      sub_10022350(v9, v11 - 6);
      v12 = *v11 < 0.0;
      if (*(v11 - 3) + *v11 < 0.0)
        v12 |= 2u;
      if (*v11 - *(v11 - 3) < 0.0)
        v12 |= 4u;
      if (*(v11 - 5) + *v11 < 0.0)
        v12 |= 8u;
      if (*v11 - *(v11 - 5) < 0.0)
        v12 |= 0x10u;
      if (*(v11 - 4) + *v11 < 0.0)
        v12 |= 0x20u;
      if (*v11 - *(v11 - 4) < 0.0)
        v12 |= 0x40u;
      *((_DWORD *)v11 - 7) = v12;
      if (!v12)
        sub_100222D0(
            (int)v10, v11 - 6, *((_DWORD *)v11 + 1), *((_DWORD *)v11 + 2), *((_DWORD *)v11 + 3));
      v9 += 8;
      v10 += 27;
      v11 += 27;
      --v23;
    } while (v23);
    v8 = a1;
  }
  return v8 + 2;
}
// 100A79DC: using guessed type int dword_100A79DC;
// 104BBE38: using guessed type int dword_104BBE38[];
// 104BBE40: using guessed type char byte_104BBE40;
// 104BBE41: using guessed type char byte_104BBE41;
// 104BBE42: using guessed type char byte_104BBE42;
// 104BBE48: using guessed type int dword_104BBE48;
// 104BC190: using guessed type int dword_104BC190;
// 104C15D0: using guessed type float flt_104C15D0;
// 104C15D4: using guessed type float flt_104C15D4;
// 104C15D8: using guessed type float flt_104C15D8;
// 104C15DC: using guessed type float flt_104C15DC;
// 104C15E0: using guessed type float flt_104C15E0;
// 104C15E4: using guessed type float flt_104C15E4;
// 104C15E8: using guessed type float flt_104C15E8;
// 104C15EC: using guessed type float flt_104C15EC;
// 104C15F0: using guessed type float flt_104C15F0;
// 104C4D10: using guessed type float flt_104C4D10;
// 104C4D14: using guessed type float flt_104C4D14;
// 104C4D18: using guessed type float flt_104C4D18;
// 104C4D1C: using guessed type float flt_104C4D1C;
// 104C4D20: using guessed type float flt_104C4D20;
// 104C4D24: using guessed type float flt_104C4D24;
// 104C4D28: using guessed type float flt_104C4D28;
// 104C4D2C: using guessed type float flt_104C4D2C;
// 104C4D30: using guessed type float flt_104C4D30;
// 104C4D34: using guessed type float flt_104C4D34;
// 104C4D38: using guessed type float flt_104C4D38;
// 104C4D3C: using guessed type float flt_104C4D3C;
// 104C4D40: using guessed type float flt_104C4D40;
// 104C4D44: using guessed type float flt_104C4D44;
// 104C4D48: using guessed type float flt_104C4D48;
// 104C4D4C: using guessed type float flt_104C4D4C;
// 104C5180: using guessed type int dword_104C5180;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (100222D0) --------------------------------------------------------
int __cdecl sub_100222D0(int a1, float *a2, int a3, int a4, int a5) {
  int result; // eax
  double v7;  // st7
  float v8;   // [esp+14h] [ebp+8h]

  result = a1;
  v8 = 1.0 / a2[6];
  *(float *)(a1 + 32) = v8;
  *(float *)a1 = a2[1] * flt_104BBF08 * v8 + flt_104C0BB0;
  *(float *)(a1 + 4) = a2[2] * flt_104BC198 * *(float *)(a1 + 32) + flt_104C0BB8;
  v7 = a2[3] * flt_100A79E0 * *(float *)(a1 + 32) + flt_100A79E4;
  *(_DWORD *)(a1 + 20) = a5;
  *(_DWORD *)(a1 + 16) = a4;
  *(_DWORD *)(a1 + 12) = a3;
  *(float *)(a1 + 8) = v7;
  return result;
}
// 100A79E0: using guessed type float flt_100A79E0;
// 100A79E4: using guessed type float flt_100A79E4;
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;

//----- (10022350) --------------------------------------------------------
int __cdecl sub_10022350(float *a1, float *a2) {
  float v2;   // eax
  float v3;   // eax
  int result; // eax
  float v5;   // [esp+0h] [ebp-4h]
  float v6;   // [esp+8h] [ebp+4h]
  float v7;   // [esp+8h] [ebp+4h]
  float v8;   // [esp+8h] [ebp+4h]

  if (dword_104BC190) {
    v5 = a1[5] * flt_104C15DC + a1[6] * flt_104C15E0 + a1[7] * flt_104C15E4;
    if (v5 < 0.0) {
      result = (int)a2;
      a2[7] = flt_104C15E8;
      a2[8] = flt_104C15EC;
      a2[9] = flt_104C15F0;
    } else {
      v6 = v5 * flt_104C15D0 + flt_104C15E8;
      v2 = 1.0;
      if (v6 <= 1.0)
        v2 = v5 * flt_104C15D0 + flt_104C15E8;
      a2[7] = v2;
      v7 = v5 * flt_104C15D4 + flt_104C15EC;
      v3 = 1.0;
      if (v7 <= 1.0)
        v3 = v5 * flt_104C15D4 + flt_104C15EC;
      a2[8] = v3;
      v8 = v5 * flt_104C15D8 + flt_104C15F0;
      *(float *)&result = 1.0;
      if (v8 <= 1.0)
        *(float *)&result = v5 * flt_104C15D8 + flt_104C15F0;
      a2[9] = *(float *)&result;
    }
  } else {
    result = (int)a2;
    a2[7] = flt_104C5154;
    a2[8] = flt_104C5160;
    a2[9] = flt_104C1690;
  }
  return result;
}
// 104BC190: using guessed type int dword_104BC190;
// 104C15D0: using guessed type float flt_104C15D0;
// 104C15D4: using guessed type float flt_104C15D4;
// 104C15D8: using guessed type float flt_104C15D8;
// 104C15DC: using guessed type float flt_104C15DC;
// 104C15E0: using guessed type float flt_104C15E0;
// 104C15E4: using guessed type float flt_104C15E4;
// 104C15E8: using guessed type float flt_104C15E8;
// 104C15EC: using guessed type float flt_104C15EC;
// 104C15F0: using guessed type float flt_104C15F0;
// 104C1690: using guessed type float flt_104C1690;
// 104C5154: using guessed type float flt_104C5154;
// 104C5160: using guessed type float flt_104C5160;

//----- (10022480) --------------------------------------------------------
_DWORD *__cdecl sub_10022480(_DWORD *a1) {
  float *v1;  // esi
  double v2;  // st6
  double v3;  // st7
  double v4;  // st7
  int v5;     // eax
  int *v6;    // ecx
  int v7;     // esi
  _DWORD *v8; // edx
  float *v9;  // edi
  float *v10; // ebp
  float *v11; // esi
  int v12;    // ecx
  float v14;  // [esp+18h] [ebp-Ch]
  float v15;  // [esp+1Ch] [ebp-8h]
  float v16;  // [esp+20h] [ebp-4h]
  float v17;  // [esp+20h] [ebp-4h]
  float v18;  // [esp+20h] [ebp-4h]
  float v19;  // [esp+20h] [ebp-4h]
  float v20;  // [esp+20h] [ebp-4h]
  float v21;  // [esp+20h] [ebp-4h]
  float v22;  // [esp+20h] [ebp-4h]
  int v23;    // [esp+20h] [ebp-4h]

  if (!dword_104C5180) {
    if (dword_104BC190) {
      if (dword_100A79DC)
        v1 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
      else
        v1 = 0;
      v16 = (float)LOBYTE(dword_104BBE38[0]);
      v2 = v16;
      v17 = (float)BYTE1(dword_104BBE38[0]);
      v3 = v17;
      v18 = (float)BYTE2(dword_104BBE38[0]);
      flt_104C15D0 = v2 * 0.0039215689;
      flt_104C15D4 = v3 * 0.0039215689;
      flt_104C15D8 = v18 * 0.0039215689;
      v15 = (float)byte_104BBE42;
      v14 = (float)byte_104BBE40;
      v19 = (float)byte_104BBE41;
      flt_104C15DC = (*v1 * v14 + v1[2] * v15 + v1[1] * v19) / 128.0;
      flt_104C15E0 = (v1[5] * v19 + v1[4] * v14 + v1[6] * v15) / 128.0;
      flt_104C15E4 = (v1[8] * v14 + v1[10] * v15 + v1[9] * v19) / 128.0;
      sub_1003AE50(&flt_104C15DC);
      v20 = (float)(unsigned __int8)dword_104BBE48;
      flt_104C15E8 = v20 * 0.0039215689;
      v21 = (float)BYTE1(dword_104BBE48);
      v4 = v21;
      v22 = (float)BYTE2(dword_104BBE48);
      flt_104C15EC = v4 * 0.0039215689;
      flt_104C15F0 = v22 * 0.0039215689;
    }
    dword_104C5180 = 1;
  }
  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v5 = 0;
    if (dword_104C5190 > 0) {
      v6 = dword_104C0BC0;
      do {
        v7 = *v6;
        ++v5;
        ++v6;
        *(_DWORD *)(v7 + 104) = -1;
      } while (v5 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
  v8 = a1;
  v9 = (float *)a1[1];
  v10 = &flt_104C16D0[27 * (unsigned __int8)BYTE2(*a1)];
  if ((unsigned __int16)*a1 >> 10) {
    v11 = v10 + 22;
    v23 = (unsigned __int16)*a1 >> 10;
    do {
      *(v11 - 5) = flt_104C4D30 * v9[2] + flt_104C4D20 * v9[1] + *v9 * flt_104C4D10 + flt_104C4D40;
      *(v11 - 4) = flt_104C4D34 * v9[2] + flt_104C4D24 * v9[1] + *v9 * flt_104C4D14 + flt_104C4D44;
      *(v11 - 3) = flt_104C4D38 * v9[2] + flt_104C4D28 * v9[1] + *v9 * flt_104C4D18 + flt_104C4D48;
      *v11 = flt_104C4D3C * v9[2] + flt_104C4D2C * v9[1] + *v9 * flt_104C4D1C + flt_104C4D4C;
      *(v11 - 2) = v9[3];
      *(v11 - 1) = v9[4];
      sub_10022350(v9, v11 - 6);
      v12 = 0;
      v11[1] = flt_104BBF04 * v11[1];
      v11[2] = flt_104C0BAC * v11[2];
      v11[3] = flt_104BBEB8 * v11[3];
      if (*v11 < 0.0)
        v12 = 1;
      if (*(v11 - 3) + *v11 < 0.0)
        v12 |= 2u;
      if (*v11 - *(v11 - 3) < 0.0)
        v12 |= 4u;
      if (*(v11 - 5) + *v11 < 0.0)
        v12 |= 8u;
      if (*v11 - *(v11 - 5) < 0.0)
        v12 |= 0x10u;
      if (*(v11 - 4) + *v11 < 0.0)
        v12 |= 0x20u;
      if (*v11 - *(v11 - 4) < 0.0)
        v12 |= 0x40u;
      *((_DWORD *)v11 - 7) = v12;
      if (!v12)
        sub_100222D0(
            (int)v10, v11 - 6, *((_DWORD *)v11 + 1), *((_DWORD *)v11 + 2), *((_DWORD *)v11 + 3));
      v9 += 8;
      v10 += 27;
      v11 += 27;
      --v23;
    } while (v23);
    v8 = a1;
  }
  return v8 + 2;
}
// 100A79DC: using guessed type int dword_100A79DC;
// 104BBE38: using guessed type int dword_104BBE38[];
// 104BBE40: using guessed type char byte_104BBE40;
// 104BBE41: using guessed type char byte_104BBE41;
// 104BBE42: using guessed type char byte_104BBE42;
// 104BBE48: using guessed type int dword_104BBE48;
// 104BBEB8: using guessed type float flt_104BBEB8;
// 104BBF04: using guessed type float flt_104BBF04;
// 104BC190: using guessed type int dword_104BC190;
// 104C0BAC: using guessed type float flt_104C0BAC;
// 104C15D0: using guessed type float flt_104C15D0;
// 104C15D4: using guessed type float flt_104C15D4;
// 104C15D8: using guessed type float flt_104C15D8;
// 104C15DC: using guessed type float flt_104C15DC;
// 104C15E0: using guessed type float flt_104C15E0;
// 104C15E4: using guessed type float flt_104C15E4;
// 104C15E8: using guessed type float flt_104C15E8;
// 104C15EC: using guessed type float flt_104C15EC;
// 104C15F0: using guessed type float flt_104C15F0;
// 104C4D10: using guessed type float flt_104C4D10;
// 104C4D14: using guessed type float flt_104C4D14;
// 104C4D18: using guessed type float flt_104C4D18;
// 104C4D1C: using guessed type float flt_104C4D1C;
// 104C4D20: using guessed type float flt_104C4D20;
// 104C4D24: using guessed type float flt_104C4D24;
// 104C4D28: using guessed type float flt_104C4D28;
// 104C4D2C: using guessed type float flt_104C4D2C;
// 104C4D30: using guessed type float flt_104C4D30;
// 104C4D34: using guessed type float flt_104C4D34;
// 104C4D38: using guessed type float flt_104C4D38;
// 104C4D3C: using guessed type float flt_104C4D3C;
// 104C4D40: using guessed type float flt_104C4D40;
// 104C4D44: using guessed type float flt_104C4D44;
// 104C4D48: using guessed type float flt_104C4D48;
// 104C4D4C: using guessed type float flt_104C4D4C;
// 104C5180: using guessed type int dword_104C5180;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (100228F0) --------------------------------------------------------
_DWORD *__cdecl sub_100228F0(_DWORD *a1) {
  float *v1;  // esi
  double v2;  // st6
  double v3;  // st7
  double v4;  // st7
  int v5;     // eax
  int *v6;    // ecx
  int v7;     // esi
  _DWORD *v8; // edx
  float *v9;  // esi
  float *v10; // ebp
  float *v11; // edi
  float v12;  // eax
  float v13;  // eax
  float v14;  // eax
  float v15;  // ecx
  int v16;    // eax
  float v18;  // [esp+20h] [ebp-Ch]
  float v19;  // [esp+20h] [ebp-Ch]
  float v20;  // [esp+20h] [ebp-Ch]
  float v21;  // [esp+20h] [ebp-Ch]
  float v22;  // [esp+24h] [ebp-8h]
  float v23;  // [esp+24h] [ebp-8h]
  float v24;  // [esp+28h] [ebp-4h]
  float v25;  // [esp+28h] [ebp-4h]
  float v26;  // [esp+28h] [ebp-4h]
  float v27;  // [esp+28h] [ebp-4h]
  float v28;  // [esp+28h] [ebp-4h]
  float v29;  // [esp+28h] [ebp-4h]
  float v30;  // [esp+28h] [ebp-4h]
  int v31;    // [esp+28h] [ebp-4h]

  if (!dword_104C5180) {
    if (dword_104BC190) {
      if (dword_100A79DC)
        v1 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
      else
        v1 = 0;
      v24 = (float)LOBYTE(dword_104BBE38[0]);
      v2 = v24;
      v25 = (float)BYTE1(dword_104BBE38[0]);
      v3 = v25;
      v26 = (float)BYTE2(dword_104BBE38[0]);
      flt_104C15D0 = v2 * 0.0039215689;
      flt_104C15D4 = v3 * 0.0039215689;
      flt_104C15D8 = v26 * 0.0039215689;
      v22 = (float)byte_104BBE42;
      v18 = (float)byte_104BBE40;
      v27 = (float)byte_104BBE41;
      flt_104C15DC = (*v1 * v18 + v1[2] * v22 + v1[1] * v27) / 128.0;
      flt_104C15E0 = (v1[5] * v27 + v1[6] * v22 + v1[4] * v18) / 128.0;
      flt_104C15E4 = (v1[10] * v22 + v1[8] * v18 + v1[9] * v27) / 128.0;
      sub_1003AE50(&flt_104C15DC);
      v28 = (float)(unsigned __int8)dword_104BBE48;
      flt_104C15E8 = v28 * 0.0039215689;
      v29 = (float)BYTE1(dword_104BBE48);
      v4 = v29;
      v30 = (float)BYTE2(dword_104BBE48);
      flt_104C15EC = v4 * 0.0039215689;
      flt_104C15F0 = v30 * 0.0039215689;
    }
    dword_104C5180 = 1;
  }
  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v5 = 0;
    if (dword_104C5190 > 0) {
      v6 = dword_104C0BC0;
      do {
        v7 = *v6;
        ++v5;
        ++v6;
        *(_DWORD *)(v7 + 104) = -1;
      } while (v5 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
  v8 = a1;
  v9 = (float *)a1[1];
  v10 = &flt_104C16D0[27 * (unsigned __int8)BYTE2(*a1)];
  if ((unsigned __int16)*a1 >> 10) {
    v11 = v10 + 18;
    v31 = (unsigned __int16)*a1 >> 10;
    while (1) {
      *(v11 - 1) = flt_104C4D20 * v9[1] + flt_104C4D30 * v9[2] + *v9 * flt_104C4D10 + flt_104C4D40;
      *v11 = flt_104C4D24 * v9[1] + flt_104C4D34 * v9[2] + *v9 * flt_104C4D14 + flt_104C4D44;
      v11[1] = flt_104C4D28 * v9[1] + flt_104C4D38 * v9[2] + *v9 * flt_104C4D18 + flt_104C4D48;
      v11[4] = flt_104C4D2C * v9[1] + flt_104C4D3C * v9[2] + *v9 * flt_104C4D1C + flt_104C4D4C;
      sub_10022E70(v9, (int)(v11 - 2));
      if (dword_104BC190) {
        v23 = v9[7] * flt_104C15E4 + v9[6] * flt_104C15E0 + v9[5] * flt_104C15DC;
        if (v23 >= 0.0) {
          v19 = v23 * flt_104C15D0 + flt_104C15E8;
          v12 = 1.0;
          if (v19 <= 1.0)
              v12 = v23 * flt_104C15D0 + flt_104C15E8;
          v11[5] = v12;
          v20 = v23 * flt_104C15D4 + flt_104C15EC;
          v13 = 1.0;
          if (v20 <= 1.0)
              v13 = v23 * flt_104C15D4 + flt_104C15EC;
          v11[6] = v13;
          v21 = v23 * flt_104C15D8 + flt_104C15F0;
          v14 = 1.0;
          if (v21 <= 1.0)
              v14 = v23 * flt_104C15D8 + flt_104C15F0;
          v11[7] = v14;
          goto LABEL_27;
        }
        v11[5] = flt_104C15E8;
        v11[6] = flt_104C15EC;
        v15 = flt_104C15F0;
      } else {
        v11[5] = flt_104C5154;
        v11[6] = flt_104C5160;
        v15 = flt_104C1690;
      }
      v11[7] = v15;
    LABEL_27:
      v16 = sub_10022DC0(v11 - 2);
      *((_DWORD *)v11 - 3) = v16;
      if (!v16)
        sub_100222D0(
            (int)v10, v11 - 2, *((_DWORD *)v11 + 5), *((_DWORD *)v11 + 6), *((_DWORD *)v11 + 7));
      v9 += 8;
      v10 += 27;
      v11 += 27;
      if (!--v31) {
        v8 = a1;
        return v8 + 2;
      }
    }
  }
  return v8 + 2;
}
// 100A79DC: using guessed type int dword_100A79DC;
// 104BBE38: using guessed type int dword_104BBE38[];
// 104BBE40: using guessed type char byte_104BBE40;
// 104BBE41: using guessed type char byte_104BBE41;
// 104BBE42: using guessed type char byte_104BBE42;
// 104BBE48: using guessed type int dword_104BBE48;
// 104BC190: using guessed type int dword_104BC190;
// 104C15D0: using guessed type float flt_104C15D0;
// 104C15D4: using guessed type float flt_104C15D4;
// 104C15D8: using guessed type float flt_104C15D8;
// 104C15DC: using guessed type float flt_104C15DC;
// 104C15E0: using guessed type float flt_104C15E0;
// 104C15E4: using guessed type float flt_104C15E4;
// 104C15E8: using guessed type float flt_104C15E8;
// 104C15EC: using guessed type float flt_104C15EC;
// 104C15F0: using guessed type float flt_104C15F0;
// 104C1690: using guessed type float flt_104C1690;
// 104C4D10: using guessed type float flt_104C4D10;
// 104C4D14: using guessed type float flt_104C4D14;
// 104C4D18: using guessed type float flt_104C4D18;
// 104C4D1C: using guessed type float flt_104C4D1C;
// 104C4D20: using guessed type float flt_104C4D20;
// 104C4D24: using guessed type float flt_104C4D24;
// 104C4D28: using guessed type float flt_104C4D28;
// 104C4D2C: using guessed type float flt_104C4D2C;
// 104C4D30: using guessed type float flt_104C4D30;
// 104C4D34: using guessed type float flt_104C4D34;
// 104C4D38: using guessed type float flt_104C4D38;
// 104C4D3C: using guessed type float flt_104C4D3C;
// 104C4D40: using guessed type float flt_104C4D40;
// 104C4D44: using guessed type float flt_104C4D44;
// 104C4D48: using guessed type float flt_104C4D48;
// 104C4D4C: using guessed type float flt_104C4D4C;
// 104C5154: using guessed type float flt_104C5154;
// 104C5160: using guessed type float flt_104C5160;
// 104C5180: using guessed type int dword_104C5180;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (10022DC0) --------------------------------------------------------
int __cdecl sub_10022DC0(float *a1) {
  int v1; // edx

  v1 = a1[6] < 0.0;
  if (a1[3] + a1[6] < 0.0)
    v1 |= 2u;
  if (a1[6] - a1[3] < 0.0)
    v1 |= 4u;
  if (a1[1] + a1[6] < 0.0)
    v1 |= 8u;
  if (a1[6] - a1[1] < 0.0)
    v1 |= 0x10u;
  if (a1[2] + a1[6] < 0.0)
    v1 |= 0x20u;
  if (a1[6] - a1[2] < 0.0)
    v1 |= 0x40u;
  return v1;
}

//----- (10022E70) --------------------------------------------------------
int __cdecl sub_10022E70(float *a1, int a2) {
  float *v2;  // eax
  double v3;  // st6
  double v4;  // st5
  double v5;  // st4
  double v6;  // st2
  double v7;  // st6
  double v8;  // st3
  double v9;  // st5
  double v10; // st2
  double v11; // st4
  double v12; // st7
  double v13; // st6
  double v14; // st5
  int result; // eax
  double v16; // rt1
  double v17; // st7
  double v18; // st6
  double v19; // st6
  double v20; // rt1
  double v21; // st6
  double v22; // st5
  double v24; // st6
  double v25; // st7
  float v26;  // [esp+Ch] [ebp-10h]
  float v27;  // [esp+10h] [ebp-Ch] BYREF
  float v28;  // [esp+14h] [ebp-8h]
  float v29;  // [esp+18h] [ebp-4h]
  float v30;  // [esp+20h] [ebp+4h]
  float v31;  // [esp+20h] [ebp+4h]
  float v32;  // [esp+20h] [ebp+4h]
  float v33;  // [esp+20h] [ebp+4h]
  float v34;  // [esp+20h] [ebp+4h]
  float v35;  // [esp+20h] [ebp+4h]
  float v36;  // [esp+20h] [ebp+4h]
  float v37;  // [esp+20h] [ebp+4h]
  float v38;  // [esp+20h] [ebp+4h]
  float v39;  // [esp+20h] [ebp+4h]
  float v40;  // [esp+20h] [ebp+4h]
  float v41;  // [esp+20h] [ebp+4h]
  float v42;  // [esp+20h] [ebp+4h]
  float v43;  // [esp+20h] [ebp+4h]
  float v44;  // [esp+24h] [ebp+8h]
  float v45;  // [esp+24h] [ebp+8h]
  float v46;  // [esp+24h] [ebp+8h]
  float v47;  // [esp+24h] [ebp+8h]
  float v48;  // [esp+24h] [ebp+8h]
  float v49;  // [esp+24h] [ebp+8h]
  float v50;  // [esp+24h] [ebp+8h]

  if (dword_100A79DC)
    v2 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
  else
    v2 = 0;
  v27 = v2[4] * a1[6] + v2[8] * a1[7] + *v2 * a1[5];
  v28 = v2[5] * a1[6] + v2[9] * a1[7] + v2[1] * a1[5];
  v29 = v2[6] * a1[6] + v2[10] * a1[7] + v2[2] * a1[5];
  sub_1003AE50(&v27);
  v30 = (float)*(char *)(dword_104C169C + 8);
  v3 = v30;
  v31 = (float)*(char *)(dword_104C169C + 9);
  v4 = v31;
  v32 = (float)*(char *)(dword_104C1698 + 8);
  v5 = v32;
  v33 = (float)*(char *)(dword_104C1698 + 10);
  v6 = v3;
  v7 = v33;
  v34 = (float)*(char *)(dword_104C169C + 10);
  v8 = v4;
  v9 = v6 * v27;
  v10 = v5;
  v11 = v34;
  v35 = (float)*(char *)(dword_104C1698 + 9);
  v12 = (v10 * v27 + v7 * v29 + v35 * v28) / 128.0;
  v36 = (v9 + v8 * v28 + v11 * v29) / 128.0;
  v26 = v12;
  if (dword_11829840 == dword_118AA094) {
    v13 = v36;
    v37 = (float)dword_11829840;
    v14 = v13 * v37;
    v38 = (float)dword_118AA080;
    result = a2;
    *(float *)(a2 + 16) = (v14 - -128.0 - v38) / (flt_118AA08C * 256.0);
    v44 = (float)dword_118AA094;
    v16 = v26 * v44;
    v45 = (float)dword_11829838;
    *(float *)(result + 20) = (v16 - -128.0 - v45) / (flt_118AA090 * 256.0);
  } else if (dword_11829840 >= dword_118AA094) {
    v21 = v36;
    v42 = (float)dword_11829840;
    v22 = v21 * v42;
    v43 = (float)dword_118AA080;
    *(float *)(a2 + 16) = (v22 - -128.0 - v43) / (flt_118AA08C * 256.0);
    v48 = (float)dword_118AA094;
    result = dword_11829840 / dword_118AA094;
    v24 = v26 * v48;
    v49 = (float)dword_11829838;
    v25 = (v24 - -128.0 - v49) / (flt_118AA090 * 256.0);
    v50 = (float)(dword_11829840 / dword_118AA094);
    *(float *)(a2 + 20) = v25 * v50;
  } else {
    v17 = v36;
    v39 = (float)dword_11829840;
    v18 = v17 * v39;
    v40 = (float)dword_118AA080;
    v19 = (v18 - -128.0 - v40) / (flt_118AA08C * 256.0);
    result = a2;
    v41 = (float)(dword_118AA094 / dword_11829840);
    *(float *)(a2 + 16) = v19 * v41;
    v46 = (float)dword_118AA094;
    v20 = v26 * v46;
    v47 = (float)dword_11829838;
    *(float *)(result + 20) = (v20 - -128.0 - v47) / (flt_118AA090 * 256.0);
  }
  return result;
}
// 100A79DC: using guessed type int dword_100A79DC;
// 104C1698: using guessed type int dword_104C1698;
// 104C169C: using guessed type int dword_104C169C;
// 11829838: using guessed type int dword_11829838;
// 11829840: using guessed type int dword_11829840;
// 118AA080: using guessed type int dword_118AA080;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;
// 118AA094: using guessed type int dword_118AA094;

//----- (100231D0) --------------------------------------------------------
_DWORD *__cdecl sub_100231D0(_DWORD *a1) {
  float *v1;  // esi
  double v2;  // st6
  double v3;  // st7
  double v4;  // st7
  int v5;     // eax
  int *v6;    // ecx
  int v7;     // esi
  _DWORD *v8; // edx
  float *v9;  // esi
  float *v10; // ebp
  float *v11; // edi
  float v12;  // eax
  float v13;  // eax
  float v14;  // eax
  float v15;  // ecx
  int v16;    // eax
  float v18;  // [esp+20h] [ebp-Ch]
  float v19;  // [esp+20h] [ebp-Ch]
  float v20;  // [esp+20h] [ebp-Ch]
  float v21;  // [esp+20h] [ebp-Ch]
  float v22;  // [esp+24h] [ebp-8h]
  float v23;  // [esp+24h] [ebp-8h]
  float v24;  // [esp+28h] [ebp-4h]
  float v25;  // [esp+28h] [ebp-4h]
  float v26;  // [esp+28h] [ebp-4h]
  float v27;  // [esp+28h] [ebp-4h]
  float v28;  // [esp+28h] [ebp-4h]
  float v29;  // [esp+28h] [ebp-4h]
  float v30;  // [esp+28h] [ebp-4h]
  int v31;    // [esp+28h] [ebp-4h]

  if (!dword_104C5180) {
    if (dword_104BC190) {
      if (dword_100A79DC)
        v1 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
      else
        v1 = 0;
      v24 = (float)LOBYTE(dword_104BBE38[0]);
      v2 = v24;
      v25 = (float)BYTE1(dword_104BBE38[0]);
      v3 = v25;
      v26 = (float)BYTE2(dword_104BBE38[0]);
      flt_104C15D0 = v2 * 0.0039215689;
      flt_104C15D4 = v3 * 0.0039215689;
      flt_104C15D8 = v26 * 0.0039215689;
      v27 = (float)byte_104BBE41;
      v22 = (float)byte_104BBE42;
      v18 = (float)byte_104BBE40;
      flt_104C15DC = (v1[2] * v22 + v1[1] * v27 + *v1 * v18) / 128.0;
      flt_104C15E0 = (v1[5] * v27 + v1[6] * v22 + v1[4] * v18) / 128.0;
      flt_104C15E4 = (v1[10] * v22 + v1[8] * v18 + v1[9] * v27) / 128.0;
      sub_1003AE50(&flt_104C15DC);
      v28 = (float)(unsigned __int8)dword_104BBE48;
      flt_104C15E8 = v28 * 0.0039215689;
      v29 = (float)BYTE1(dword_104BBE48);
      v4 = v29;
      v30 = (float)BYTE2(dword_104BBE48);
      flt_104C15EC = v4 * 0.0039215689;
      flt_104C15F0 = v30 * 0.0039215689;
    }
    dword_104C5180 = 1;
  }
  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v5 = 0;
    if (dword_104C5190 > 0) {
      v6 = dword_104C0BC0;
      do {
        v7 = *v6;
        ++v5;
        ++v6;
        *(_DWORD *)(v7 + 104) = -1;
      } while (v5 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
  v8 = a1;
  v9 = (float *)a1[1];
  v10 = &flt_104C16D0[27 * (unsigned __int8)BYTE2(*a1)];
  if ((unsigned __int16)*a1 >> 10) {
    v11 = v10 + 18;
    v31 = (unsigned __int16)*a1 >> 10;
    while (1) {
      *(v11 - 1) = flt_104C4D30 * v9[2] + flt_104C4D20 * v9[1] + *v9 * flt_104C4D10 + flt_104C4D40;
      *v11 = flt_104C4D34 * v9[2] + flt_104C4D24 * v9[1] + *v9 * flt_104C4D14 + flt_104C4D44;
      v11[1] = flt_104C4D38 * v9[2] + flt_104C4D28 * v9[1] + *v9 * flt_104C4D18 + flt_104C4D48;
      v11[4] = flt_104C4D3C * v9[2] + flt_104C4D2C * v9[1] + *v9 * flt_104C4D1C + flt_104C4D4C;
      sub_100236A0(v9, (int)(v11 - 2));
      if (dword_104BC190) {
        v23 = v9[5] * flt_104C15DC + v9[6] * flt_104C15E0 + v9[7] * flt_104C15E4;
        if (v23 >= 0.0) {
          v19 = v23 * flt_104C15D0 + flt_104C15E8;
          v12 = 1.0;
          if (v19 <= 1.0)
              v12 = v23 * flt_104C15D0 + flt_104C15E8;
          v11[5] = v12;
          v20 = v23 * flt_104C15D4 + flt_104C15EC;
          v13 = 1.0;
          if (v20 <= 1.0)
              v13 = v23 * flt_104C15D4 + flt_104C15EC;
          v11[6] = v13;
          v21 = v23 * flt_104C15D8 + flt_104C15F0;
          v14 = 1.0;
          if (v21 <= 1.0)
              v14 = v23 * flt_104C15D8 + flt_104C15F0;
          v11[7] = v14;
          goto LABEL_27;
        }
        v11[5] = flt_104C15E8;
        v11[6] = flt_104C15EC;
        v15 = flt_104C15F0;
      } else {
        v11[5] = flt_104C5154;
        v11[6] = flt_104C5160;
        v15 = flt_104C1690;
      }
      v11[7] = v15;
    LABEL_27:
      v16 = sub_10022DC0(v11 - 2);
      *((_DWORD *)v11 - 3) = v16;
      if (!v16)
        sub_100222D0(
            (int)v10, v11 - 2, *((_DWORD *)v11 + 5), *((_DWORD *)v11 + 6), *((_DWORD *)v11 + 7));
      v9 += 8;
      v10 += 27;
      v11 += 27;
      if (!--v31) {
        v8 = a1;
        return v8 + 2;
      }
    }
  }
  return v8 + 2;
}
// 100A79DC: using guessed type int dword_100A79DC;
// 104BBE38: using guessed type int dword_104BBE38[];
// 104BBE40: using guessed type char byte_104BBE40;
// 104BBE41: using guessed type char byte_104BBE41;
// 104BBE42: using guessed type char byte_104BBE42;
// 104BBE48: using guessed type int dword_104BBE48;
// 104BC190: using guessed type int dword_104BC190;
// 104C15D0: using guessed type float flt_104C15D0;
// 104C15D4: using guessed type float flt_104C15D4;
// 104C15D8: using guessed type float flt_104C15D8;
// 104C15DC: using guessed type float flt_104C15DC;
// 104C15E0: using guessed type float flt_104C15E0;
// 104C15E4: using guessed type float flt_104C15E4;
// 104C15E8: using guessed type float flt_104C15E8;
// 104C15EC: using guessed type float flt_104C15EC;
// 104C15F0: using guessed type float flt_104C15F0;
// 104C1690: using guessed type float flt_104C1690;
// 104C4D10: using guessed type float flt_104C4D10;
// 104C4D14: using guessed type float flt_104C4D14;
// 104C4D18: using guessed type float flt_104C4D18;
// 104C4D1C: using guessed type float flt_104C4D1C;
// 104C4D20: using guessed type float flt_104C4D20;
// 104C4D24: using guessed type float flt_104C4D24;
// 104C4D28: using guessed type float flt_104C4D28;
// 104C4D2C: using guessed type float flt_104C4D2C;
// 104C4D30: using guessed type float flt_104C4D30;
// 104C4D34: using guessed type float flt_104C4D34;
// 104C4D38: using guessed type float flt_104C4D38;
// 104C4D3C: using guessed type float flt_104C4D3C;
// 104C4D40: using guessed type float flt_104C4D40;
// 104C4D44: using guessed type float flt_104C4D44;
// 104C4D48: using guessed type float flt_104C4D48;
// 104C4D4C: using guessed type float flt_104C4D4C;
// 104C5154: using guessed type float flt_104C5154;
// 104C5160: using guessed type float flt_104C5160;
// 104C5180: using guessed type int dword_104C5180;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (100236A0) --------------------------------------------------------
int __cdecl sub_100236A0(float *a1, int a2) {
  float *v2;  // eax
  double v3;  // st4
  double v4;  // st3
  double v5;  // st2
  double v6;  // st7
  double v7;  // st5
  double v8;  // st6
  double v9;  // st5
  double v10; // st7
  double v11; // rt0
  int result; // eax
  double v13; // st6
  double v14; // st7
  double v15; // st5
  double v16; // rt1
  double v17; // st7
  double v18; // rt2
  double v20; // rt2
  double v21; // st5
  float v22;  // [esp+14h] [ebp-10h]
  float v23;  // [esp+14h] [ebp-10h]
  float v24;  // [esp+18h] [ebp-Ch] BYREF
  float v25;  // [esp+1Ch] [ebp-8h]
  float v26;  // [esp+20h] [ebp-4h]
  float v27;  // [esp+28h] [ebp+4h]
  float v28;  // [esp+28h] [ebp+4h]
  float v29;  // [esp+28h] [ebp+4h]
  float v30;  // [esp+28h] [ebp+4h]
  float v31;  // [esp+28h] [ebp+4h]
  float v32;  // [esp+28h] [ebp+4h]
  float v33;  // [esp+28h] [ebp+4h]
  float v34;  // [esp+28h] [ebp+4h]
  float v35;  // [esp+28h] [ebp+4h]
  float v36;  // [esp+28h] [ebp+4h]
  float v37;  // [esp+28h] [ebp+4h]
  float v38;  // [esp+28h] [ebp+4h]
  float v39;  // [esp+28h] [ebp+4h]
  float v40;  // [esp+28h] [ebp+4h]
  float v41;  // [esp+2Ch] [ebp+8h]
  float v42;  // [esp+2Ch] [ebp+8h]
  float v43;  // [esp+2Ch] [ebp+8h]
  float v44;  // [esp+2Ch] [ebp+8h]
  float v45;  // [esp+2Ch] [ebp+8h]
  float v46;  // [esp+2Ch] [ebp+8h]
  float v47;  // [esp+2Ch] [ebp+8h]

  if (dword_100A79DC)
    v2 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
  else
    v2 = 0;
  v24 = v2[8] * a1[7] + v2[4] * a1[6] + *v2 * a1[5];
  v25 = v2[9] * a1[7] + v2[5] * a1[6] + v2[1] * a1[5];
  v26 = v2[10] * a1[7] + v2[6] * a1[6] + v2[2] * a1[5];
  sub_1003AE50(&v24);
  v27 = (float)*(char *)(dword_104C1698 + 10);
  v3 = v27 * v26;
  v28 = (float)*(char *)(dword_104C169C + 10);
  v4 = v28 * v26;
  v29 = (float)*(char *)(dword_104C1698 + 8);
  v5 = v24 * v29;
  v30 = (float)*(char *)(dword_104C169C + 8);
  v6 = v24 * v30;
  v31 = (float)*(char *)(dword_104C1698 + 9);
  v7 = v31 * v25;
  v32 = (float)*(char *)(dword_104C169C + 9);
  v33 = (v6 + v4 + v32 * v25) / 128.0;
  v22 = asin((v5 + v3 + v7) / 128.0);
  v23 = v22 / 3.1415927;
  v8 = v33;
  v9 = (double)dword_11829840;
  v10 = (double)dword_118AA080;
  if (dword_11829840 == dword_118AA094) {
    v34 = v9;
    v11 = v8 * v34;
    v35 = v10;
    result = a2;
    *(float *)(a2 + 16) = (v11 - -128.0 - v35 * 0.5) / (flt_118AA08C * 256.0);
    v13 = flt_118AA090;
    v41 = (float)dword_118AA094;
    v14 = v23 * v41;
    v42 = (float)dword_11829838;
    v15 = v42;
  LABEL_8:
    *(float *)(result + 20) = (v14 - -128.0 - v15 * 0.5) / (v13 * 256.0);
    return result;
  }
  if (dword_11829840 < dword_118AA094) {
    v36 = v9;
    v16 = v8 * v36;
    v37 = v10;
    v17 = (v16 - -128.0 - v37 * 0.5) / (flt_118AA08C * 256.0);
    result = a2;
    v38 = (float)(dword_118AA094 / dword_11829840);
    *(float *)(a2 + 16) = v17 * v38;
    v13 = flt_118AA090;
    v43 = (float)dword_118AA094;
    v14 = v23 * v43;
    v44 = (float)dword_11829838;
    v15 = v44;
    goto LABEL_8;
  }
  v39 = v9;
  v18 = v8 * v39;
  v40 = v10;
  *(float *)(a2 + 16) = (v18 - -128.0 - v40 * 0.5) / (flt_118AA08C * 256.0);
  v45 = (float)dword_118AA094;
  v20 = v23 * v45;
  v46 = (float)dword_11829838;
  result = dword_11829840 / dword_118AA094;
  v21 = v46 * 0.5;
  v47 = (float)(dword_11829840 / dword_118AA094);
  *(float *)(a2 + 20) = (v20 - -128.0 - v21) / (flt_118AA090 * 256.0) * v47;
  return result;
}
// 100A79DC: using guessed type int dword_100A79DC;
// 104C1698: using guessed type int dword_104C1698;
// 104C169C: using guessed type int dword_104C169C;
// 11829838: using guessed type int dword_11829838;
// 11829840: using guessed type int dword_11829840;
// 118AA080: using guessed type int dword_118AA080;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;
// 118AA094: using guessed type int dword_118AA094;

//----- (10023A10) --------------------------------------------------------
_DWORD *__cdecl sub_10023A10(_DWORD *a1) {
  int v1;     // eax
  int *v2;    // ecx
  int v3;     // edi
  _DWORD *v4; // esi
  float *v5;  // edx
  float *v6;  // edi
  float *v7;  // ecx
  int v8;     // ebx
  int v9;     // esi
  double v10; // st6
  double v11; // st7
  double v12; // st5
  double v13; // st4
  double v14; // st6
  float v16;  // [esp+20h] [ebp-4h]

  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v1 = 0;
    if (dword_104C5190 > 0) {
      v2 = dword_104C0BC0;
      do {
        v3 = *v2;
        ++v1;
        ++v2;
        *(_DWORD *)(v3 + 104) = -1;
      } while (v1 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
  v4 = a1;
  v5 = (float *)a1[1];
  v6 = &flt_104C16D0[27 * (unsigned __int8)BYTE2(*a1)];
  if ((unsigned __int16)*a1 >> 10) {
    v7 = v6 + 22;
    v8 = (unsigned __int16)*a1 >> 10;
    do {
      v9 = 0;
      *(v7 - 5) = flt_104C4D20 * v5[1] + flt_104C4D30 * v5[2] + *v5 * flt_104C4D10 + flt_104C4D40;
      *(v7 - 4) = flt_104C4D24 * v5[1] + flt_104C4D34 * v5[2] + *v5 * flt_104C4D14 + flt_104C4D44;
      *(v7 - 3) = flt_104C4D28 * v5[1] + flt_104C4D38 * v5[2] + *v5 * flt_104C4D18 + flt_104C4D48;
      *v7 = flt_104C4D2C * v5[1] + flt_104C4D3C * v5[2] + *v5 * flt_104C4D1C + flt_104C4D4C;
      *(v7 - 2) = v5[3];
      *(v7 - 1) = v5[4];
      v7[1] = v5[5] * 0.0039215689;
      v7[2] = v5[6] * 0.0039215689;
      v7[3] = v5[7] * 0.0039215689;
      if (*v7 < 0.0)
        v9 = 1;
      if (*(v7 - 3) + *v7 < 0.0)
        v9 |= 2u;
      if (*v7 - *(v7 - 3) < 0.0)
        v9 |= 4u;
      if (*(v7 - 5) + *v7 < 0.0)
        v9 |= 8u;
      if (*v7 - *(v7 - 5) < 0.0)
        v9 |= 0x10u;
      if (*(v7 - 4) + *v7 < 0.0)
        v9 |= 0x20u;
      if (*v7 - *(v7 - 4) < 0.0)
        v9 |= 0x40u;
      *((_DWORD *)v7 - 7) = v9;
      if (!v9) {
        v16 = 1.0 / *v7;
        *(v7 - 14) = v16;
        v10 = v7[1];
        v11 = v7[2];
        v12 = v7[3];
        *v6 = flt_104BBF08 * v16 * *(v7 - 5) + flt_104C0BB0;
        v13 = v10;
        v14 = flt_104BC198 * *(v7 - 14) * *(v7 - 4) + flt_104C0BB8;
        *(v7 - 19) = v13;
        *(v7 - 18) = v11;
        *(v7 - 17) = v12;
        *(v7 - 20) = 0.99900001;
        *(v7 - 14) = 0.000015259022;
        *(v7 - 21) = v14;
      }
      v5 += 8;
      v6 += 27;
      v7 += 27;
      --v8;
    } while (v8);
    v4 = a1;
  }
  return v4 + 2;
}
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;
// 104C4D10: using guessed type float flt_104C4D10;
// 104C4D14: using guessed type float flt_104C4D14;
// 104C4D18: using guessed type float flt_104C4D18;
// 104C4D1C: using guessed type float flt_104C4D1C;
// 104C4D20: using guessed type float flt_104C4D20;
// 104C4D24: using guessed type float flt_104C4D24;
// 104C4D28: using guessed type float flt_104C4D28;
// 104C4D2C: using guessed type float flt_104C4D2C;
// 104C4D30: using guessed type float flt_104C4D30;
// 104C4D34: using guessed type float flt_104C4D34;
// 104C4D38: using guessed type float flt_104C4D38;
// 104C4D3C: using guessed type float flt_104C4D3C;
// 104C4D40: using guessed type float flt_104C4D40;
// 104C4D44: using guessed type float flt_104C4D44;
// 104C4D48: using guessed type float flt_104C4D48;
// 104C4D4C: using guessed type float flt_104C4D4C;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (10023CC0) --------------------------------------------------------
_DWORD *__cdecl sub_10023CC0(_DWORD *a1) {
  float *v1;  // esi
  double v2;  // st6
  double v3;  // st7
  double v4;  // st7
  int v5;     // eax
  int *v6;    // ecx
  int v7;     // esi
  _DWORD *v8; // edx
  float *v9;  // edi
  float *v10; // ebx
  float *v11; // esi
  int v12;    // ebp
  int v13;    // ecx
  double v14; // st6
  double v15; // st7
  double v16; // st5
  double v17; // st4
  double v18; // st6
  float v20;  // [esp+18h] [ebp-Ch]
  float v21;  // [esp+1Ch] [ebp-8h]
  float v22;  // [esp+20h] [ebp-4h]
  float v23;  // [esp+20h] [ebp-4h]
  float v24;  // [esp+20h] [ebp-4h]
  float v25;  // [esp+20h] [ebp-4h]
  float v26;  // [esp+20h] [ebp-4h]
  float v27;  // [esp+20h] [ebp-4h]
  float v28;  // [esp+20h] [ebp-4h]
  float v29;  // [esp+20h] [ebp-4h]

  if (!dword_104C5180) {
    if (dword_104BC190) {
      if (dword_100A79DC)
        v1 = (float *)((char *)&unk_104BBED0 + 64 * dword_100A79DC);
      else
        v1 = 0;
      v22 = (float)LOBYTE(dword_104BBE38[0]);
      v2 = v22;
      v23 = (float)BYTE1(dword_104BBE38[0]);
      v3 = v23;
      v24 = (float)BYTE2(dword_104BBE38[0]);
      flt_104C15D0 = v2 * 0.0039215689;
      flt_104C15D4 = v3 * 0.0039215689;
      flt_104C15D8 = v24 * 0.0039215689;
      v20 = (float)byte_104BBE42;
      v25 = (float)byte_104BBE40;
      v21 = (float)byte_104BBE41;
      flt_104C15DC = (*v1 * v25 + v1[2] * v20 + v1[1] * v21) / 128.0;
      flt_104C15E0 = (v1[4] * v25 + v1[6] * v20 + v1[5] * v21) / 128.0;
      flt_104C15E4 = (v1[10] * v20 + v1[9] * v21 + v1[8] * v25) / 128.0;
      sub_1003AE50(&flt_104C15DC);
      v26 = (float)(unsigned __int8)dword_104BBE48;
      flt_104C15E8 = v26 * 0.0039215689;
      v27 = (float)BYTE1(dword_104BBE48);
      v4 = v27;
      v28 = (float)BYTE2(dword_104BBE48);
      flt_104C15EC = v4 * 0.0039215689;
      flt_104C15F0 = v28 * 0.0039215689;
    }
    dword_104C5180 = 1;
  }
  if (gIndexedPrimitiveIndexCount) {
    g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                               D3DPT_TRIANGLELIST,
                                               D3DVT_TLVERTEX,
                                               &gVertices,
                                               gVertexCount,
                                               &g_indexedPrimitiveIndices,
                                               gIndexedPrimitiveIndexCount,
                                               12);
    v5 = 0;
    if (dword_104C5190 > 0) {
      v6 = dword_104C0BC0;
      do {
        v7 = *v6;
        ++v5;
        ++v6;
        *(_DWORD *)(v7 + 104) = -1;
      } while (v5 < dword_104C5190);
    }
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
  }
  v8 = a1;
  v9 = (float *)a1[1];
  v10 = &flt_104C16D0[27 * (unsigned __int8)BYTE2(*a1)];
  if ((unsigned __int16)*a1 >> 10) {
    v11 = v10 + 22;
    v12 = (unsigned __int16)*a1 >> 10;
    do {
      *(v11 - 5) = flt_104C4D20 * v9[1] + flt_104C4D30 * v9[2] + *v9 * flt_104C4D10 + flt_104C4D40;
      *(v11 - 4) = flt_104C4D24 * v9[1] + flt_104C4D34 * v9[2] + *v9 * flt_104C4D14 + flt_104C4D44;
      *(v11 - 3) = flt_104C4D28 * v9[1] + flt_104C4D38 * v9[2] + *v9 * flt_104C4D18 + flt_104C4D48;
      *v11 = flt_104C4D2C * v9[1] + flt_104C4D3C * v9[2] + *v9 * flt_104C4D1C + flt_104C4D4C;
      *(v11 - 2) = v9[3];
      *(v11 - 1) = v9[4];
      sub_10022350(v9, v11 - 6);
      v13 = *v11 < 0.0;
      if (*v11 + *(v11 - 3) < 0.0)
        v13 |= 2u;
      if (*v11 - *(v11 - 3) < 0.0)
        v13 |= 4u;
      if (*v11 + *(v11 - 5) < 0.0)
        v13 |= 8u;
      if (*v11 - *(v11 - 5) < 0.0)
        v13 |= 0x10u;
      if (*v11 + *(v11 - 4) < 0.0)
        v13 |= 0x20u;
      if (*v11 - *(v11 - 4) < 0.0)
        v13 |= 0x40u;
      *((_DWORD *)v11 - 7) = v13;
      if (!v13) {
        v29 = 1.0 / *v11;
        *(v11 - 14) = v29;
        v14 = v11[1];
        v15 = v11[2];
        v16 = v11[3];
        *v10 = flt_104BBF08 * v29 * *(v11 - 5) + flt_104C0BB0;
        v17 = v14;
        v18 = flt_104BC198 * *(v11 - 14) * *(v11 - 4) + flt_104C0BB8;
        *(v11 - 19) = v17;
        *(v11 - 18) = v15;
        *(v11 - 17) = v16;
        *(v11 - 20) = 0.99900001;
        *(v11 - 14) = 0.000015259022;
        *(v11 - 21) = v18;
      }
      v9 += 8;
      v10 += 27;
      v11 += 27;
      --v12;
    } while (v12);
    v8 = a1;
  }
  return v8 + 2;
}
// 100A79DC: using guessed type int dword_100A79DC;
// 104BBE38: using guessed type int dword_104BBE38[];
// 104BBE40: using guessed type char byte_104BBE40;
// 104BBE41: using guessed type char byte_104BBE41;
// 104BBE42: using guessed type char byte_104BBE42;
// 104BBE48: using guessed type int dword_104BBE48;
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC190: using guessed type int dword_104BC190;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;
// 104C15D0: using guessed type float flt_104C15D0;
// 104C15D4: using guessed type float flt_104C15D4;
// 104C15D8: using guessed type float flt_104C15D8;
// 104C15DC: using guessed type float flt_104C15DC;
// 104C15E0: using guessed type float flt_104C15E0;
// 104C15E4: using guessed type float flt_104C15E4;
// 104C15E8: using guessed type float flt_104C15E8;
// 104C15EC: using guessed type float flt_104C15EC;
// 104C15F0: using guessed type float flt_104C15F0;
// 104C4D10: using guessed type float flt_104C4D10;
// 104C4D14: using guessed type float flt_104C4D14;
// 104C4D18: using guessed type float flt_104C4D18;
// 104C4D1C: using guessed type float flt_104C4D1C;
// 104C4D20: using guessed type float flt_104C4D20;
// 104C4D24: using guessed type float flt_104C4D24;
// 104C4D28: using guessed type float flt_104C4D28;
// 104C4D2C: using guessed type float flt_104C4D2C;
// 104C4D30: using guessed type float flt_104C4D30;
// 104C4D34: using guessed type float flt_104C4D34;
// 104C4D38: using guessed type float flt_104C4D38;
// 104C4D3C: using guessed type float flt_104C4D3C;
// 104C4D40: using guessed type float flt_104C4D40;
// 104C4D44: using guessed type float flt_104C4D44;
// 104C4D48: using guessed type float flt_104C4D48;
// 104C4D4C: using guessed type float flt_104C4D4C;
// 104C5180: using guessed type int dword_104C5180;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (10024150) --------------------------------------------------------
int __cdecl sub_10024150(int a1) {
  int result; // eax

  switch ((unsigned __int8)BYTE2(*(_DWORD *)a1)) {
  case 0x80u:
    result = sub_10024260(a1);
    break;
  case 0x82u:
    dword_104C1698 = *(_DWORD *)(a1 + 4);
    result = a1 + 8;
    break;
  case 0x84u:
    result = a1 + 8;
    dword_104C169C = *(_DWORD *)(a1 + 4);
    break;
  case 0x86u:
  case 0x88u:
  case 0x8Au:
  case 0x8Cu:
  case 0x8Eu:
  case 0x90u:
  case 0x92u:
  case 0x94u:
    qmemcpy(&dword_104BBE38[4 * (((unsigned int)(unsigned __int8)BYTE2(*(_DWORD *)a1) - 134) >> 1)],
            *(const void **)(a1 + 4),
            (unsigned __int16)*(_DWORD *)a1);
    dword_104C5180 = 0;
    goto LABEL_7;
  case 0x9Eu:
    result = sub_10024240(a1);
    break;
  default:
  LABEL_7:
    result = a1 + 8;
    break;
  }
  return result;
}
// 104BBE38: using guessed type int dword_104BBE38[];
// 104C1698: using guessed type int dword_104C1698;
// 104C169C: using guessed type int dword_104C169C;
// 104C5180: using guessed type int dword_104C5180;

//----- (10024240) --------------------------------------------------------
int __cdecl sub_10024240(int a1) {
  qmemcpy(&flt_104C4D10, *(const void **)(a1 + 4), 0x40u);
  return a1 + 8;
}
// 104C4D10: using guessed type float flt_104C4D10;

//----- (10024260) --------------------------------------------------------
int __cdecl sub_10024260(int a1) {
  __int16 *v1; // ecx
  int result;  // eax
  float v3;    // [esp+4h] [ebp+4h]
  float v4;    // [esp+4h] [ebp+4h]
  float v5;    // [esp+4h] [ebp+4h]
  float v6;    // [esp+4h] [ebp+4h]

  v1 = *(__int16 **)(a1 + 4);
  result = a1 + 8;
  v3 = (float)*v1;
  flt_104BBF08 = v3 * 0.25;
  v4 = (float)v1[1];
  flt_104BC198 = v4 * -0.25;
  v5 = (float)v1[4];
  flt_104C0BB0 = v5 * 0.25;
  v6 = (float)v1[5];
  flt_104C0BB8 = v6 * 0.25;
  return result;
}
// 104BBF08: using guessed type float flt_104BBF08;
// 104BC198: using guessed type float flt_104BC198;
// 104C0BB0: using guessed type float flt_104C0BB0;
// 104C0BB8: using guessed type float flt_104C0BB8;

//----- (100242F0) --------------------------------------------------------
_DWORD *__cdecl sub_100242F0(_DWORD *a1) {
  _DWORD *result;  // eax
  unsigned int v2; // eax
  int v3;          // eax
  int v4;          // eax

  switch ((unsigned __int8)*a1) {
  case 2u:
    dword_104BC190 = (a1[1] >> 5) & 0xF;
    result = a1 + 2;
    break;
  case 0xAu:
    v2 = (unsigned __int16)(*a1 >> 8);
    if ((*a1 & 0xF00) != 0) {
      v4 = 16 * (v2 >> 5);
      byte_104BBE3C[v4] = HIBYTE(a1[1]);
      byte_104BBE3D[v4] = BYTE2(a1[1]);
      byte_104BBE3E[v4] = BYTE1(a1[1]);
      dword_104C5180 = 0;
      goto LABEL_6;
    }
    v3 = 4 * (v2 >> 5);
    LOBYTE(dword_104BBE38[v3]) = HIBYTE(a1[1]);
    BYTE1(dword_104BBE38[v3]) = BYTE2(a1[1]);
    BYTE2(dword_104BBE38[v3]) = BYTE1(a1[1]);
    dword_104C5180 = 0;
    result = a1 + 2;
    break;
  default:
  LABEL_6:
    result = a1 + 2;
    break;
  }
  return result;
}
// 104BBE38: using guessed type int dword_104BBE38[];
// 104BC190: using guessed type int dword_104BC190;
// 104C5180: using guessed type int dword_104C5180;

//----- (100243D0) --------------------------------------------------------
int __cdecl sub_100243D0(int a1) {
  return a1 + 8;
}

//----- (100243E0) --------------------------------------------------------
HRESULT sub_100243E0() {
  IDirect3DDevice2Vtbl *v0; // ecx

  if (!MEMORY[0x106C6618])
    return g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_FOGENABLE, 0);
  if (MEMORY[0x106C6624] || MEMORY[0x106C6620] || (flt_104C15C8 = 16384.0, !MEMORY[0x106C661C]))
    flt_104C15C8 = 8192.0;
  v0 = g_D3DDevice2->lpVtbl;
  dword_104BBE30 = 8;
  v0->SetRenderState(g_D3DDevice2, D3DRS_FOGENABLE, 1);
  return g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_FOGTABLEMODE, 0);
}
// 104BBE30: using guessed type int dword_104BBE30;
// 104C15C8: using guessed type float flt_104C15C8;
// 106C6618: using guessed type int dword_106C6618;
// 106C661C: using guessed type int dword_106C661C;
// 106C6620: using guessed type int dword_106C6620;
// 106C6624: using guessed type int dword_106C6624;

//----- (10024460) --------------------------------------------------------
_DWORD *sub_10024460() {
  int v0;         // ecx
  int *v1;        // eax
  _DWORD *v2;     // eax
  _DWORD *result; // eax

  dword_10B501D0 = sub_10024550;
  dword_10B501D4 = sub_100243E0;
  dword_10B501CC = (int (*)(void))meth_DebugPrint;
  v0 = 0;
  v1 = (int *)&unk_104C0B80;
  do {
    *v1 = v0;
    v0 = (int)v1;
    v1 -= 10;
  } while ((int)v1 >= (int)dword_104C01A8);
  dword_104C0BBC = v0;
  dword_104C01A4 = 0;
  dword_100A79DC = 1;
  v2 = &unk_104C1738;
  do {
    *v2 = -1;
    v2 += 27;
  } while ((int)v2 < (int)&flt_104C4D38);
  result = &unk_104BC1B4;
  do {
    *result = 0;
    result += 8;
  } while ((int)result < (int)&unk_104C01B4);
  dword_104C5184 = 0;
  return result;
}
// 10024550: using guessed type int __cdecl sub_10024550(int);
// 100A79DC: using guessed type int dword_100A79DC;
// 104C01A4: using guessed type int dword_104C01A4;
// 104C0BBC: using guessed type int dword_104C0BBC;
// 104C4D38: using guessed type float flt_104C4D38;
// 104C5184: using guessed type int dword_104C5184;
// 10B501CC: using guessed type int (*dword_10B501CC)(void);
// 10B501D0: using guessed type int (__cdecl *dword_10B501D0)(_DWORD);
// 10B501D4: using guessed type int (*dword_10B501D4)(void);

//----- (100244E0) --------------------------------------------------------
HRESULT sub_100244E0() {
  HRESULT hr;    // eax
  D3DRECT rects; // [esp+0h] [ebp-10h] BYREF

  hr = *(&stru_10277680 + 8);
  if (!*(&stru_10277680 + 8)) {
    hr = gD3DClearZBuffer;
    if ( !gD3DClearZBuffer
      || (rects.x1 = 0,
          rects.x2 = gWidth,
          rects.y1 = 0,
          rects.y2 = gHeight,
          (hr = gUnk8C->?->lpVtbl->Clear(gUnk8C->?, 1, &rects, 3)) == 0) )
    {
      *(&stru_10277680 + 8) = 1;
    }
  }
  return hr;
}
// 100A81C0: using guessed type int g_Width;
// 100A81C4: using guessed type int g_Height;
// 104C5168: using guessed type int g_D3Dclearzbuffer;

//----- (10024550) --------------------------------------------------------
int __cdecl sub_10024550(int a1) {
  int result;                             // eax
  IDirect3DDevice2Vtbl *d3dDevice2LPVtbl; // ecx
  _DWORD *v3;                             // eax
  int v4;                                 // eax
  int *v5;                                // ecx
  int v6;                                 // edx
  DWORD v7;                               // eax
  int v8;                                 // edx
  int v9;                                 // ecx
  int v10;                                // ecx
  int v11;                                // ecx
  char v12[32768];                        // [esp+8Ch] [ebp-8000h] BYREF

  sub_100244E0();
  result = g_D3DDevice2->lpVtbl->BeginScene(g_D3DDevice2);
  if (!result)
    goto LABEL_6;
  for (; result == -2005532222; result = g_D3DDevice2->lpVtbl->BeginScene(g_D3DDevice2)) {
    while (meth_unk0008C_1000B2C0(gUnk8C) == -2005532222)
      ;
  }
  if (!result) {
  LABEL_6:
    renderState = 0;
    dword_102773A0 = 0;
    renderState_0 = 1;
    dword_10277380 = 2;
    dword_10277384 = 1;
    dword_10277388 = 3;
    dword_104C16A0 = 2;
    dword_1027738C = 2;
    dword_10277390 = 8;
    dword_104BBE28 = 7;
    dword_10277394 = 7;
    dword_10277398 = 1;
    dword_1027739C = 1;
    dword_10277370 = -1;
    sub_10024850();
    d3dDevice2LPVtbl = g_D3DDevice2->lpVtbl;
    dword_104C5178 = 8193;
    d3dDevice2LPVtbl->SetRenderState(g_D3DDevice2, D3DRS_SPECULARENABLE, 0);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZENABLE, 1);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, (D3DRENDERSTATETYPE)1, 0);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DITHERENABLE, 1);
    if (!gD3dalphacompar)
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SHADEMODE | 0x20, 1);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SHADEMODE, 2);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, (D3DRENDERSTATETYPE)5, 0);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, (D3DRENDERSTATETYPE)6, 0);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, (D3DRENDERSTATETYPE)4, 1);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, (D3DRENDERSTATETYPE)18, 2);
    g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, (D3DRENDERSTATETYPE)17, 2);
    gIndexedPrimitiveIndexCount = 0;
    gVertexCount = 0;
    dword_104C5190 = 0;
    dword_104C01A4 = 0;
    sub_10074FC0();
    sub_10024A90(a1);
    dword_106C0680 = (int)v12;
    sub_100192F0(20);
    text_10019300((int)&unk_118AB478, 0, 60);
    v3 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v3 = -1207959552;
    v3[1] = 0;
    sub_10024A90((int)v12);
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v4 = 0;
      if (dword_104C5190 > 0) {
        v5 = dword_104C0BC0;
        do {
          v6 = *v5;
          ++v4;
          ++v5;
          *(_DWORD *)(v6 + 104) = -1;
        } while (v4 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    result = g_D3DDevice2->lpVtbl->EndScene(g_D3DDevice2);
    if (!result)
      goto LABEL_18;
    for (; result == -2005532222; result = g_D3DDevice2->lpVtbl->EndScene(g_D3DDevice2)) {
      while (meth_unk0008C_1000B2C0(gUnk8C) == -2005532222)
        ;
    }
    if (!result) {
    LABEL_18:
      dword_10690A24();
      v7 = getTicks();
      v8 = dword_100B5420;
      v9 = v7;
      result = v7 - dword_104C5194;
      dword_104C5194 = v9;
      v10 = dword_100B5424;
      dword_104C5198 = result;
      if (dword_100B5424 < 0) {
        v10 = 0;
        if (dword_100B5420 > 0) {
          memset32(dword_10B4FFE8, result, dword_100B5420);
          v10 = v8;
        }
      }
      v11 = v10 + 1;
      dword_100B5424 = v11;
      if (v11 >= v8) {
        v11 = 0;
        dword_100B5424 = 0;
      }
      dword_10B4FFE8[v11] = result;
    }
  }
  return result;
}
// 10024550: using guessed type int __cdecl sub_10024550(int);
// 100AA720: using guessed type int g_D3dalphacompar;
// 100B5420: using guessed type int dword_100B5420;
// 100B5424: using guessed type int dword_100B5424;
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 104BBE28: using guessed type int dword_104BBE28;
// 104C01A4: using guessed type int dword_104C01A4;
// 104C16A0: using guessed type int dword_104C16A0;
// 104C5178: using guessed type int dword_104C5178;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;
// 104C5194: using guessed type int dword_104C5194;
// 104C5198: using guessed type int dword_104C5198;
// 10690A24: using guessed type int (*dword_10690A24)(void);
// 106C0680: using guessed type int dword_106C0680;

//----- (10024850) --------------------------------------------------------
int sub_10024850() {
  int result; // eax
  int v1;     // eax
  int *v2;    // ecx
  int v3;     // edi

  result = dword_10277370;
  if (dword_10277370) {
    if (gIndexedPrimitiveIndexCount) {
      g_D3DDevice2->lpVtbl->DrawIndexedPrimitive(g_D3DDevice2,
                                                 D3DPT_TRIANGLELIST,
                                                 D3DVT_TLVERTEX,
                                                 &gVertices,
                                                 gVertexCount,
                                                 &g_indexedPrimitiveIndices,
                                                 gIndexedPrimitiveIndexCount,
                                                 12);
      v1 = 0;
      if (dword_104C5190 > 0) {
        v2 = dword_104C0BC0;
        do {
          v3 = *v2;
          ++v1;
          ++v2;
          *(_DWORD *)(v3 + 104) = -1;
        } while (v1 < dword_104C5190);
      }
      gIndexedPrimitiveIndexCount = 0;
      gVertexCount = 0;
      dword_104C5190 = 0;
    }
    if ((dword_10277370 & 1) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZWRITEENABLE, renderState_0);
      dword_102773F8 = renderState_0;
    }
    if ((dword_10277370 & 2) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHATESTENABLE, renderState);
      dword_102773FC = renderState;
    }
    if ((dword_10277370 & 4) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_SRCBLEND, dword_10277380);
      dword_10277400 = dword_10277380;
    }
    if ((dword_10277370 & 8) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_DESTBLEND, dword_10277384);
      dword_10277404 = dword_10277384;
    }
    if ((dword_10277370 & 0x10) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_CULLMODE, dword_10277388);
      dword_10277408 = dword_10277388;
    }
    if ((dword_10277370 & 0x20) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ZFUNC, dword_1027738C);
      dword_1027740C = dword_1027738C;
    }
    if ((dword_10277370 & 0x40) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAREF, dword_10277390);
      dword_10277410 = dword_10277390;
    }
    if ((dword_10277370 & 0x80u) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHAFUNC, dword_10277394);
      dword_10277414 = dword_10277394;
    }
    if ((dword_10277370 & 0x100) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGSTART | D3DRS_FILLMODE, dword_10277398);
      dword_10277418 = dword_10277398;
    }
    if ((dword_10277370 & 0x200) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(
          g_D3DDevice2, D3DRS_FOGEND | D3DRS_FILLMODE, dword_1027739C);
      dword_1027741C = dword_1027739C;
    }
    result = dword_10277370;
    if ((dword_10277370 & 0x400) != 0) {
      g_D3DDevice2->lpVtbl->SetRenderState(g_D3DDevice2, D3DRS_ALPHABLENDENABLE, dword_102773A0);
      result = dword_102773A0;
      dword_10277420 = dword_102773A0;
    }
    dword_10277370 = 0;
  }
  return result;
}
// 10277370: using guessed type int dword_10277370;
// 10277378: using guessed type int renderState_0;
// 1027737C: using guessed type int renderState;
// 10277380: using guessed type int dword_10277380;
// 10277384: using guessed type int dword_10277384;
// 10277388: using guessed type int dword_10277388;
// 1027738C: using guessed type int dword_1027738C;
// 10277390: using guessed type int dword_10277390;
// 10277394: using guessed type int dword_10277394;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 102773A0: using guessed type int dword_102773A0;
// 102773F8: using guessed type int dword_102773F8;
// 102773FC: using guessed type int dword_102773FC;
// 10277400: using guessed type int dword_10277400;
// 10277404: using guessed type int dword_10277404;
// 10277408: using guessed type int dword_10277408;
// 1027740C: using guessed type int dword_1027740C;
// 10277410: using guessed type int dword_10277410;
// 10277414: using guessed type int dword_10277414;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 10277420: using guessed type int dword_10277420;
// 104C5188: using guessed type int g_vertexCount;
// 104C518C: using guessed type int g_indexedPrimitiveIndexCount;
// 104C5190: using guessed type int dword_104C5190;

//----- (10024A90) --------------------------------------------------------
int __cdecl sub_10024A90(int a1) {
  int result; // eax

  for (result = a1; result; result = funcs_10024A9E[*(unsigned __int8 *)(result + 3)](result))
    ;
  return result;
}
// 100A79F0: using guessed type int (__cdecl *funcs_10024A9E[4])(int);

//----- (10024AB0) --------------------------------------------------------
void *__cdecl sub_10024AB0(int a1, int a2) {
  void *result; // eax

  result = dword_1057543C;
  *((_DWORD *)dword_1057543C + 174 * a1) = *((_DWORD *)dword_1057543C + 174 * a2);
  return result;
}

//----- (10024AE0) --------------------------------------------------------
int __cdecl sub_10024AE0(int a1) {
  int result; // eax
  int v2;     // edx

  result = sub_10024B60();
  v2 = 696 * result;
  qmemcpy((char *)dword_1057543C + 696 * result, (char *)dword_1057543C + 696 * a1, 0x2B8u);
  *(float *)((char *)dword_1057543C + v2 + 688) =
      *(float *)((char *)dword_1057543C + v2 + 688) * 0.5;
  *(float *)((char *)dword_1057543C + v2 + 692) =
      *(float *)((char *)dword_1057543C + v2 + 692) * 0.5;
  return result;
}

//----- (10024B60) --------------------------------------------------------
int sub_10024B60() {
  int v0; // eax

  v0 = dword_105553F4;
  if (dword_105553F0 >= (unsigned int)dword_105553F4) {
    dword_105553F4 += 256;
    dword_1057543C = CHK_ReAllocateMemory0(dword_1057543C, 696 * (v0 + 256), aAppendtextureA);
  }
  return dword_105553F0++;
}
// 105553F0: using guessed type int dword_105553F0;
// 105553F4: using guessed type int dword_105553F4;

//----- (10024BB0) --------------------------------------------------------
int sub_10024BB0() {
  int result;      // eax
  unsigned int v1; // edi
  int v2;          // esi

  result = dword_105553F0;
  v1 = 0;
  if (dword_105553F0) {
    v2 = 0;
    do {
      meth_graphics_1000A020(*((#511 **)Block + *(_DWORD *)((char *)dword_1057543C + v2)));
      result = dword_105553F0;
      ++v1;
      v2 += 696;
    } while (v1 < dword_105553F0);
  }
  return result;
}
// 105553F0: using guessed type int dword_105553F0;

//----- (10024BF0) --------------------------------------------------------
int __cdecl car_10024BF0(_DWORD *a1, _DWORD *a2, _DWORD *a3) {
  _DWORD *v3;           // ebx
  _BYTE *v4;            // edi
  int v5;               // esi
  int v6;               // ecx
  _DWORD *v7;           // eax
  int v8;               // ecx
  int v9;               // eax
  int v10;              // edx
  int v11;              // ebp
  int v12;              // ecx
  int v13;              // edx
  _DWORD *v14;          // edx
  int v15;              // eax
  int v16;              // eax
  int v17;              // ecx
  char *v18;            // eax
  int v19;              // esi
  _DWORD *v20;          // ebp
  int v21;              // eax
  char *v22;            // eax
  unsigned __int8 *v23; // eax
  _DWORD *v25;          // eax
  int v26;              // ecx
  _DWORD *v27;          // eax
  int v28;              // eax
  int v29;              // ecx
  int v30;              // eax
  int v31;              // edx
  char *v32;            // eax
  int v33;              // esi
  _DWORD *v34;          // ebp
  int v35;              // eax
  char *v36;            // eax
  unsigned __int8 *v37; // eax
  _DWORD *v38;          // eax
  int v39;              // ecx
  unsigned __int8 *v40; // eax
  unsigned int v41;     // edx
  int v42;              // [esp-10h] [ebp-2Ch]
  int v43;              // [esp-Ch] [ebp-28h]
  int v44;              // [esp-Ch] [ebp-28h]
  int v45;              // [esp-8h] [ebp-24h]
  int v46;              // [esp-4h] [ebp-20h]
  int v47;              // [esp+10h] [ebp-Ch] BYREF
  int v48;              // [esp+14h] [ebp-8h] BYREF
  int v49;              // [esp+18h] [ebp-4h] BYREF
  int v50;              // [esp+20h] [ebp+4h]
  int v51;              // [esp+20h] [ebp+4h]

  v3 = a3;
  a3[155] = 0;
  if (dword_118AA088 != 2)
    return 0;
  v4 = (_BYTE *)car_10060F70(gCarIndex, ++dword_10AA3460, 0);
  if (!v4)
    return 0;
  car_10060FB0(gCarIndex, dword_10AA3460, &v49, &v48, &v47, (int *)&a3);
  v5 = v49;
  if (v49) {
    v7 = a3;
    v6 = v48;
  } else {
    v6 = v48;
    if (v48) {
      v7 = a3;
    } else {
      v7 = a3;
      if (!v47 && !a3) {
        v8 = v3[169];
        v9 = v3[170];
        v5 = 0;
        v47 = 0;
        v6 = 2 * v8;
        v7 = (_DWORD *)(2 * v9);
        v49 = 0;
        v48 = v6;
        a3 = v7;
      }
    }
  }
  v10 = v3[169];
  if (v10 == v3[2]) {
    v11 = v3[170];
    if (v11 == v3[3] && dword_100B8C90 <= 0) {
      if (car_10061480((int)v4, v5, v6, v47, (int)v7, (int)byte_11829870, 2 * v10, 2 * v11)) {
        v12 = 2 * v3[3];
        v45 = 2 * v3[2];
        v13 = 4 * v3[16];
        v3[2] = v45;
        v3[3] = v12;
        v3[16] = v13;
        math_pow2ExponentToAdd(v3 + 7, v45, v12);
        v3[6] = v3[7];
        *a1 *= 2;
        *a2 *= 2;
        v14 = a3;
        v3[155] = 1;
        v3[156] = gCarIndex;
        v15 = v47;
        v3[157] = dword_10AA3460;
        v43 = v48;
        v42 = v49;
        v3[158] = 0;
        v16 = sub_100615B0(v4, v42, v43, v15, (int)v14);
        v17 = v3[15];
        v3[159] = v16;
        if (v17)
          v18 = sub_10009660(byte_11829870, byte_11829870, v3[16], v3[4], v3 + 15);
        else
          v18 = graphics_100098A0(byte_11829870, byte_11829870, v3[16], v3[4]);
        v3[164] = v18;
        if (car_10061000() >= 0) {
          v19 = 3;
          v20 = v3 + 163;
          v50 = 3;
          do {
              v21 = car_10060F70(gCarIndex, dword_10AA3460, v19);
              if (v21) {
                  if (car_10061480(v21,
                                   v49,
                                   v48,
                                   v47,
                                   (int)a3,
                                   (int)byte_11829870,
                                   2 * v3[169],
                                   2 * v3[170])) {
                      if (v3[15])
                          v22 = sub_10009660(byte_11829870, byte_11829870, v3[16], v3[4], v3 + 15);
                      else
                          v22 = graphics_100098A0(byte_11829870, byte_11829870, v3[16], v3[4]);
                      v3[164] = v22;
                  }
                  v23 = (unsigned __int8 *)malloc(v3[164]);
                  *v20 = v23;
                  qmemcpy(v23, byte_11829870, v3[164]);
                  v19 = v50;
              } else {
                  *v20 = 0;
              }
              --v19;
              --v20;
              v50 = v19;
          } while (v19 >= 0);
          return 1;
        }
        v25 = v3 + 163;
        v26 = 3;
        do {
          *v25-- = 0;
          --v26;
        } while (v26);
        goto LABEL_50;
      }
      return 1;
    }
  }
  if (!car_10061480((int)v4, v5, v6, v47, (int)v7, (int)&unk_104D51D0, 2 * v10, 2 * v3[170]))
    return 1;
  v27 = a3;
  v3[155] = 1;
  v46 = (int)v27;
  v28 = v49;
  v3[156] = gCarIndex;
  v29 = v47;
  v3[157] = dword_10AA3460;
  v44 = v48;
  v3[158] = 0;
  v30 = sub_100615B0(v4, v28, v44, v29, v46);
  v31 = v3[170];
  v3[159] = v30;
  math_10025350(
      (int)byte_11829870, v3[2], v3[3], COERCE_FLOAT(&unk_104D51D0), 2 * v3[169], 2 * v31);
  if (v3[15])
    v32 = sub_10009660(byte_11829870, byte_11829870, v3[16], v3[4], v3 + 15);
  else
    v32 = graphics_100098A0(byte_11829870, byte_11829870, v3[16], v3[4]);
  v3[164] = v32;
  if (car_10061000() < 0) {
    v38 = v3 + 163;
    v39 = 3;
    do {
      *v38-- = 0;
      --v39;
    } while (v39);
  LABEL_50:
    v40 = (unsigned __int8 *)malloc(v3[164]);
    v41 = v3[164];
    v3[160] = v40;
    qmemcpy(v40, byte_11829870, v41);
    return 1;
  }
  v33 = 3;
  v34 = v3 + 163;
  v51 = 3;
  do {
    v35 = car_10060F70(gCarIndex, dword_10AA3460, v33);
    if (v35) {
      if (car_10061480(v35, v49, v48, v47, (int)a3, (int)&unk_104D51D0, 2 * v3[169], 2 * v3[170])) {
        math_10025350((int)byte_11829870,
                      v3[2],
                      v3[3],
                      COERCE_FLOAT(&unk_104D51D0),
                      2 * v3[169],
                      2 * v3[170]);
        if (v3[15])
          v36 = sub_10009660(byte_11829870, byte_11829870, v3[16], v3[4], v3 + 15);
        else
          v36 = graphics_100098A0(byte_11829870, byte_11829870, v3[16], v3[4]);
        v3[164] = v36;
      }
      v37 = (unsigned __int8 *)malloc(v3[164]);
      *v34 = v37;
      qmemcpy(v37, byte_11829870, v3[164]);
      v33 = v51;
    } else {
      *v34 = 0;
    }
    --v33;
    --v34;
    v51 = v33;
  } while (v33 >= 0);
  return 1;
}
// 100B8C90: using guessed type int dword_100B8C90;
// 10AA3444: using guessed type int dword_10AA3444;
// 10AA3460: using guessed type int dword_10AA3460;
// 118AA088: using guessed type int dword_118AA088;

//----- (100251A0) --------------------------------------------------------
int __cdecl math_pow2ExponentToAdd(DWORD *outExponent, int a2, int a3) {
  int result; // eax

  if (a2 <= a3) {
    if (a3 > 1) {
      if (a3 > 2) {
        if (a3 > 4) {
          if (a3 > 8) {
              if (a3 > 16) {
                  if (a3 > 32) {
                      if (a3 > 64) {
                          if (a3 > 128) {
                              if (a3 > 256) {
                                  result = 0;
                                  *outExponent = 0;
                              } else {
                                  *outExponent = 0;
                                  result = 1;
                              }
                          } else {
                              result = 1;
                              *outExponent = 1;
                          }
                      } else {
                          result = 1;
                          *outExponent = 2;
                      }
                  } else {
                      *outExponent = 3;
                      result = 1;
                  }
              } else {
                  result = 1;
                  *outExponent = 4;
              }
          } else {
              result = 1;
              *outExponent = 5;
          }
        } else {
          *outExponent = 6;
          result = 1;
        }
      } else {
        result = 1;
        *outExponent = 7;
      }
    } else {
      result = 1;
      *outExponent = 8;
    }
  } else if (a2 > 1) {
    if (a2 > 2) {
      if (a2 > 4) {
        if (a2 > 8) {
          if (a2 > 16) {
              if (a2 > 32) {
                  if (a2 > 64) {
                      if (a2 > 128) {
                          if (a2 > 256) {
                              *outExponent = 0;
                              result = 0;
                          } else {
                              result = 1;
                              *outExponent = 0;
                          }
                      } else {
                          result = 1;
                          *outExponent = 1;
                      }
                  } else {
                      *outExponent = 2;
                      result = 1;
                  }
              } else {
                  result = 1;
                  *outExponent = 3;
              }
          } else {
              result = 1;
              *outExponent = 4;
          }
        } else {
          *outExponent = 5;
          result = 1;
        }
      } else {
        result = 1;
        *outExponent = 6;
      }
    } else {
      result = 1;
      *outExponent = 7;
    }
  } else {
    *outExponent = 8;
    result = 1;
  }
  return result;
}

//----- (10025350) --------------------------------------------------------
int __cdecl math_10025350(int a1, int a2, int a3, float a4, int a5, int a6) {
  int result;       // eax
  int v7;           // esi
  double v8;        // st6
  int v10;          // ebp
  int v11;          // ebx
  int v12;          // ecx
  int v13;          // ebx
  int v14;          // ebp
  __int64 v15;      // rax
  double v16;       // st7
  int v17;          // ecx
  unsigned int v18; // eax
  bool v19;         // zf
  float v20;        // [esp+18h] [ebp-1Ch]
  float v21;        // [esp+1Ch] [ebp-18h]
  int v22;          // [esp+20h] [ebp-14h]
  float v23;        // [esp+2Ch] [ebp-8h]
  int v24;          // [esp+30h] [ebp-4h]
  int v25;          // [esp+40h] [ebp+Ch]
  float v26;        // [esp+44h] [ebp+10h]
  int v27;          // [esp+4Ch] [ebp+18h]
  int v28;          // [esp+4Ch] [ebp+18h]
  int v29;          // [esp+50h] [ebp+1Ch]

  *(float *)&result = COERCE_FLOAT(_RTC_NumErrors());
  v7 = result;
  v8 = (double)a6 / (double)a3;
  v20 = (double)a5 / (double)a2;
  *(float *)&v29 = v8 * 0.5 - 0.5;
  if (a3 > 0) {
    v10 = a6 - 1;
    v24 = a6 - 1;
    v22 = a3;
    do {
      v27 = (__int64)floor(*(float *)&v29);
      v11 = v27 + 1;
      v12 = v27 <= 0 ? 0 : v27;
      v23 = *(float *)&v29 - (double)v27;
      if (v27 + 1 >= v10)
        v11 = v10;
      *(float *)&result = v20 * 0.5 - 0.5;
      v25 = result;
      if (a2 > 0) {
        v28 = a2;
        v13 = a5 * v11;
        v14 = a5 * v12;
        do {
          v15 = (__int64)floor(*(float *)&v25);
          v16 = *(float *)&v25 - (double)(int)v15;
          v17 = v15 + 1;
          v18 = (int)v15 <= 0 ? 0 : (unsigned int)v15;
          if (v17 >= a5 - 1)
              v17 = a5 - 1;
          v26 = v16;
          math_100254F0(a1,
                        LODWORD(a4) + v7 * (v14 + v18),
                        LODWORD(a4) + v7 * (v14 + v17),
                        LODWORD(a4) + v7 * (v18 + v13),
                        LODWORD(a4) + v7 * (v17 + v13),
                        v26,
                        v23);
          result = v28 - 1;
          v19 = v28 == 1;
          a1 += v7;
          --v28;
          *(float *)&v25 = *(float *)&v25 + v20;
        } while (!v19);
        v10 = v24;
      }
      v19 = v22-- == 1;
      v21 = v8;
      *(float *)&v29 = *(float *)&v29 + v21;
    } while (!v19);
  }
  return result;
}

//----- (100254F0) --------------------------------------------------------
char __cdecl math_100254F0(int a1, int a2, int a3, int a4, int a5, float a6, float a7) {
  int v7;               // edx
  unsigned __int8 *v8;  // eax
  double v9;            // st7
  int v10;              // eax
  unsigned __int8 *v11; // ecx
  double v12;           // st6
  double v13;           // st7
  double v14;           // st7
  __int64 v15;          // rax
  double v16;           // st7
  double v17;           // st6
  double v18;           // st7
  __int64 v19;          // rax
  double v20;           // st7
  double v21;           // st7
  __int64 v22;          // rax
  double v23;           // st7
  char v24;             // bl
  double v25;           // st7
  char result;          // al
  float v27;            // [esp+Ch] [ebp-24h]
  float v28;            // [esp+10h] [ebp-20h]
  float v29;            // [esp+14h] [ebp-1Ch]
  float v30;            // [esp+18h] [ebp-18h]
  float v31;            // [esp+1Ch] [ebp-14h]
  float v32;            // [esp+20h] [ebp-10h]
  float v33;            // [esp+24h] [ebp-Ch]
  float v34;            // [esp+28h] [ebp-8h]
  float v35;            // [esp+2Ch] [ebp-4h]
  float v36;            // [esp+38h] [ebp+8h]
  char v37;             // [esp+38h] [ebp+8h]
  float v38;            // [esp+3Ch] [ebp+Ch]
  char v39;             // [esp+3Ch] [ebp+Ch]
  float v40;            // [esp+40h] [ebp+10h]

  v7 = *(unsigned __int8 *)(a2 + 1);
  v8 = (unsigned __int8 *)(a2 + 2);
  v36 = (float)*(unsigned __int8 *)a2;
  v27 = (float)v7;
  v28 = (float)*v8;
  v9 = (double)v8[1];
  v10 = a3 + 2;
  v31 = (float)*(unsigned __int8 *)a3;
  v32 = (float)*(unsigned __int8 *)(a3 + 1);
  v34 = (float)*(unsigned __int8 *)(a3 + 2);
  v11 = (unsigned __int8 *)(a4 + 2);
  v38 = (float)*(unsigned __int8 *)a4;
  v40 = (float)*(unsigned __int8 *)(a4 + 1);
  v29 = (float)*v11;
  v12 = (double)v11[1];
  v30 = (float)*(unsigned __int8 *)a5;
  v33 = (float)*(unsigned __int8 *)(a5 + 1);
  v35 = (float)*(unsigned __int8 *)(a5 + 2);
  v13 = v9 + ((double)*(unsigned __int8 *)(v10 + 1) - v9) * a6;
  v14 = floor((v12 + ((double)*(unsigned __int8 *)(a5 + 3) - v12) * a6 - v13) * a7 + v13 - -0.5);
  if (v14 < 0.0)
    v14 = 0.0;
  if (v14 > 255.0)
    v14 = 255.0;
  v15 = (__int64)v14;
  v16 = (v31 - v36) * a6 + v36;
  v17 = (v30 - v38) * a6 + v38;
  v39 = v15;
  v18 = floor((v17 - v16) * a7 + v16 - -0.5);
  if (v18 < 0.0)
    v18 = 0.0;
  if (v18 > 255.0)
    v18 = 255.0;
  v19 = (__int64)v18;
  v20 = (v32 - v27) * a6 + v27;
  v37 = v19;
  v21 = floor(((v33 - v40) * a6 + v40 - v20) * a7 + v20 - -0.5);
  if (v21 < 0.0)
    v21 = 0.0;
  if (v21 > 255.0)
    v21 = 255.0;
  v22 = (__int64)v21;
  v23 = (v34 - v28) * a6 + v28;
  v24 = v22;
  v25 = floor(((v35 - v29) * a6 + v29 - v23) * a7 + v23 - -0.5);
  if (v25 < 0.0)
    v25 = 0.0;
  if (v25 > 255.0)
    v25 = 255.0;
  *(_BYTE *)a1 = v37;
  *(_BYTE *)(a1 + 1) = v24;
  *(_BYTE *)(a1 + 2) = (__int64)v25;
  result = v39;
  *(_BYTE *)(a1 + 3) = v39;
  return result;
}

//----- (10025800) --------------------------------------------------------
int __cdecl sub_10025800(int a1, int a2) {
  int result; // eax

  result = a2;
  *((_DWORD *)dword_1057543C + 174 * a1 + 159) = a2;
  return result;
}

//----- (10025830) --------------------------------------------------------
char *__cdecl graphics_10025830(_WORD *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8) {
  int v8;              // esi
  int v9;              // edi
  int v10;             // eax
  int v11;             // eax
  int v12;             // eax
  int v14;             // [esp+20h] [ebp-29Ch]
  DWORD v15[10];       // [esp+28h] [ebp-294h] BYREF
  int v16;             // [esp+50h] [ebp-26Ch]
  int v17;             // [esp+54h] [ebp-268h]
  int v18;             // [esp+58h] [ebp-264h]
  int v19;             // [esp+5Ch] [ebp-260h]
  int v20;             // [esp+60h] [ebp-25Ch]
  int v21;             // [esp+64h] [ebp-258h]
  int v22;             // [esp+68h] [ebp-254h]
  int v23;             // [esp+6Ch] [ebp-250h]
  int v24;             // [esp+70h] [ebp-24Ch]
  int v25[129];        // [esp+74h] [ebp-248h] BYREF
  int v26;             // [esp+278h] [ebp-44h]
  int v27;             // [esp+27Ch] [ebp-40h]
  int v28;             // [esp+2A4h] [ebp-18h]
  unsigned __int8 v29; // [esp+2A8h] [ebp-14h]
  unsigned __int8 v30; // [esp+2A9h] [ebp-13h]
  unsigned __int8 v31; // [esp+2AAh] [ebp-12h]
  char v32;            // [esp+2ABh] [ebp-11h]
  int v33;             // [esp+2ACh] [ebp-10h]

  v8 = 1 << sub_10027C00(a4);
  v9 = 1 << sub_10027C00(a5);
  v17 = a4;
  v18 = a5;
  math_pow2ExponentToAdd(v15, v8, v9);
  v15[1] = v15[0];
  v23 = 0;
  v25[3] = 0;
  v10 = sub_10027C00(a4);
  v25[16 * v23 + 8] = v10;
  v11 = sub_10027C00(a5);
  dword_10575444 = 0;
  v25[16 * v23 + 9] = v11;
  dword_10575440 = 0;
  v25[16 * v23 + 2] = a6;
  v25[16 * v23 + 1] = a7;
  v25[16 * v23] = a8;
  v24 = 1;
  v33 = 0;
  v26 = 0;
  v27 = 0;
  v32 = 0;
  v31 = 0;
  v30 = 0;
  v29 = 0;
  v28 = 0;
  v14 = sub_10027B90(v25[16 * v23 + 1], v25[16 * v23], 0);
  v12 = v8 * v9 * _RTC_NumErrors();
  v25[128] = dword_118AA088;
  v16 = v12;
  v19 = a2;
  v20 = a3;
  v21 = 0;
  v22 = 0;
  sub_10025AB0(byte_11829870,
               v12,
               v25[16 * v23 + 1],
               a2,
               a3,
               v25[16 * v23],
               0,
               0,
               v23,
               v24,
               v25,
               dword_118AA088,
               v26,
               v28,
               BYTE1(v28),
               BYTE2(v28),
               SHIBYTE(v28),
               v29,
               v30,
               v31,
               v32,
               v33);
  return graphics_100098A0(a1, byte_11829870, v16, v14);
}
// 10575440: using guessed type int dword_10575440;
// 10575444: using guessed type int dword_10575444;
// 118AA088: using guessed type int dword_118AA088;

//----- (10025AB0) --------------------------------------------------------
char __cdecl sub_10025AB0(_DWORD *a1,
                          int a2,
                          int a3,
                          int a4,
                          int a5,
                          int a6,
                          int a7,
                          int a8,
                          int a9,
                          int a10,
                          _DWORD *a11,
                          char a12,
                          int a13,
                          unsigned __int8 a14,
                          unsigned __int8 a15,
                          unsigned __int8 a16,
                          char a17,
                          unsigned __int8 a18,
                          unsigned __int8 a19,
                          unsigned __int8 a20,
                          char a21,
                          int a22) {
  unsigned __int64 v22;   // rax
  int v23;                // edi
  int v25;                // eax
  _BYTE *v26;             // ecx
  int v27;                // ebx
  _BYTE *v28;             // ecx
  int v29;                // edi
  _DWORD *v30;            // esi
  bool v31;               // cc
  _BYTE *v32;             // ecx
  int v33;                // edx
  int v34;                // edi
  _DWORD *v35;            // esi
  int v36;                // ebx
  int v37;                // edi
  _DWORD *v38;            // esi
  int v39;                // ecx
  int v40;                // edi
  _DWORD *v41;            // esi
  _DWORD *v42;            // ebx
  int v43;                // ecx
  int v44;                // edi
  _DWORD *v45;            // esi
  int v46;                // ebx
  int v47;                // ecx
  char v48;               // bl
  int v49;                // edi
  _DWORD *v50;            // esi
  unsigned __int8 v51;    // bl
  int v52;                // edi
  _DWORD *v53;            // esi
  char v54;               // bl
  int v55;                // edi
  _DWORD *v56;            // esi
  int v57;                // ecx
  int v58;                // edi
  _DWORD *v59;            // esi
  int v60;                // ecx
  int v61;                // edi
  _DWORD *v62;            // esi
  int v63;                // ecx
  int v64;                // ebx
  int v65;                // eax
  int v66;                // ecx
  unsigned __int8 *v67;   // eax
  int v68;                // edx
  _BYTE *v69;             // eax
  int v70;                // ecx
  int v71;                // ebx
  int v72;                // edi
  _DWORD *v73;            // esi
  int v74;                // ecx
  unsigned __int16 v75;   // bx
  _BYTE *v76;             // eax
  int v77;                // ebx
  int v78;                // edi
  _DWORD *v79;            // esi
  unsigned __int16 v80;   // bx
  int v81;                // edx
  int v82;                // edi
  _DWORD *v83;            // esi
  int v84;                // ecx
  int v85;                // edx
  unsigned __int16 v86;   // bx
  unsigned __int16 v87;   // bx
  int v88;                // ecx
  int v89;                // edi
  _DWORD *v90;            // esi
  int v91;                // ecx
  int v92;                // edi
  _DWORD *v93;            // esi
  int v94;                // ebx
  int v95;                // ecx
  int v96;                // ecx
  char v97;               // cl
  int v98;                // edi
  _DWORD *v99;            // esi
  int v100;               // edi
  _DWORD *v101;           // esi
  char v102;              // cl
  char v103;              // cl
  int v104;               // edi
  _DWORD *v105;           // esi
  int v106;               // ecx
  int v107;               // edi
  _DWORD *v108;           // esi
  int v109;               // ecx
  int v110;               // edi
  _DWORD *v111;           // esi
  unsigned __int8 *v112;  // ebx
  int v113;               // ecx
  unsigned __int8 *v114;  // ebx
  unsigned __int8 *v115;  // ebx
  int v116;               // ecx
  int v117;               // ebx
  int v118;               // ecx
  int v119;               // ebx
  int v120;               // eax
  int v121;               // ecx
  unsigned __int8 *v122;  // eax
  int v123;               // edx
  _BYTE *v124;            // eax
  int v125;               // ecx
  _BYTE *v126;            // eax
  int v127;               // ecx
  int m;                  // ebx
  int v129;               // ecx
  int v130;               // ecx
  int v131;               // ecx
  int v132;               // ecx
  _DWORD *v133;           // ecx
  _DWORD *v134;           // ebx
  int v135;               // ecx
  int v136;               // edx
  _DWORD *v137;           // ecx
  int v138;               // ebx
  int v139;               // eax
  int v140;               // ecx
  int kk;                 // ecx
  int ll;                 // ecx
  int v143;               // ecx
  int v144;               // ecx
  unsigned __int16 *v145; // ebx
  unsigned __int16 *v146; // ebx
  unsigned __int16 *v147; // ebx
  unsigned __int16 *v148; // ebx
  int v149;               // ecx
  int v150;               // ebx
  int v151;               // ecx
  int v153;               // [esp+10h] [ebp-8Ch]
  int i3;                 // [esp+10h] [ebp-8Ch]
  int nn;                 // [esp+10h] [ebp-8Ch]
  int v156;               // [esp+10h] [ebp-8Ch]
  int i1;                 // [esp+10h] [ebp-8Ch]
  int v158;               // [esp+10h] [ebp-8Ch]
  int i;                  // [esp+10h] [ebp-8Ch]
  int j;                  // [esp+10h] [ebp-8Ch]
  int l;                  // [esp+10h] [ebp-8Ch]
  int v162;               // [esp+10h] [ebp-8Ch]
  int n;                  // [esp+10h] [ebp-8Ch]
  int v164;               // [esp+10h] [ebp-8Ch]
  int v165;               // [esp+10h] [ebp-8Ch]
  int v166;               // [esp+10h] [ebp-8Ch]
  int v167;               // [esp+14h] [ebp-88h]
  int k;                  // [esp+14h] [ebp-88h]
  int v169;               // [esp+14h] [ebp-88h]
  int jj;                 // [esp+14h] [ebp-88h]
  int v171;               // [esp+14h] [ebp-88h]
  int v172;               // [esp+18h] [ebp-84h]
  int v173;               // [esp+18h] [ebp-84h]
  int v174;               // [esp+18h] [ebp-84h]
  int v175;               // [esp+18h] [ebp-84h]
  char *v176;             // [esp+1Ch] [ebp-80h]
  char *v177;             // [esp+1Ch] [ebp-80h]
  unsigned __int8 *v178;  // [esp+1Ch] [ebp-80h]
  int v179;               // [esp+1Ch] [ebp-80h]
  int v180;               // [esp+1Ch] [ebp-80h]
  int v181;               // [esp+1Ch] [ebp-80h]
  int v182;               // [esp+1Ch] [ebp-80h]
  int v183;               // [esp+1Ch] [ebp-80h]
  int v184;               // [esp+1Ch] [ebp-80h]
  int v185;               // [esp+1Ch] [ebp-80h]
  int v186;               // [esp+20h] [ebp-7Ch]
  int v187;               // [esp+20h] [ebp-7Ch]
  int v188;               // [esp+20h] [ebp-7Ch]
  int v189;               // [esp+20h] [ebp-7Ch]
  int v190;               // [esp+20h] [ebp-7Ch]
  int v191;               // [esp+24h] [ebp-78h]
  int v192;               // [esp+24h] [ebp-78h]
  int mm;                 // [esp+24h] [ebp-78h]
  int v194;               // [esp+24h] [ebp-78h]
  int v195;               // [esp+24h] [ebp-78h]
  int v196;               // [esp+24h] [ebp-78h]
  int v197;               // [esp+28h] [ebp-74h]
  int v198;               // [esp+28h] [ebp-74h]
  char v199;              // [esp+28h] [ebp-74h]
  int v200;               // [esp+28h] [ebp-74h]
  int v201;               // [esp+28h] [ebp-74h]
  int v202;               // [esp+28h] [ebp-74h]
  int ii;                 // [esp+28h] [ebp-74h]
  int v204;               // [esp+28h] [ebp-74h]
  int v205;               // [esp+28h] [ebp-74h]
  int v206;               // [esp+2Ch] [ebp-70h]
  int v207;               // [esp+2Ch] [ebp-70h]
  int v208;               // [esp+2Ch] [ebp-70h]
  int v209;               // [esp+2Ch] [ebp-70h]
  int v210;               // [esp+2Ch] [ebp-70h]
  int v211;               // [esp+2Ch] [ebp-70h]
  int v212;               // [esp+2Ch] [ebp-70h]
  int v213;               // [esp+2Ch] [ebp-70h]
  int v214;               // [esp+2Ch] [ebp-70h]
  int v215;               // [esp+2Ch] [ebp-70h]
  int v216;               // [esp+30h] [ebp-6Ch]
  int v217;               // [esp+30h] [ebp-6Ch]
  signed int v218;        // [esp+30h] [ebp-6Ch]
  unsigned __int8 v219;   // [esp+37h] [ebp-65h]
  unsigned __int8 v220;   // [esp+37h] [ebp-65h]
  unsigned __int8 v221;   // [esp+37h] [ebp-65h]
  int v222;               // [esp+38h] [ebp-64h]
  int v223;               // [esp+38h] [ebp-64h]
  int v224;               // [esp+3Ch] [ebp-60h]
  int v225;               // [esp+3Ch] [ebp-60h]
  int v226;               // [esp+3Ch] [ebp-60h]
  int i2;                 // [esp+3Ch] [ebp-60h]
  int v228;               // [esp+3Ch] [ebp-60h]
  int v229;               // [esp+40h] [ebp-5Ch]
  _BYTE *v230;            // [esp+40h] [ebp-5Ch]
  _BYTE *v231;            // [esp+40h] [ebp-5Ch]
  int v232;               // [esp+40h] [ebp-5Ch]
  _BYTE *v233;            // [esp+40h] [ebp-5Ch]
  _BYTE *v234;            // [esp+40h] [ebp-5Ch]
  int v235;               // [esp+44h] [ebp-58h]
  int v236;               // [esp+4Ch] [ebp-50h]
  unsigned __int8 v237;   // [esp+50h] [ebp-4Ch]
  unsigned __int8 v238;   // [esp+68h] [ebp-34h]
  unsigned __int8 v239;   // [esp+70h] [ebp-2Ch]
  unsigned __int8 v240;   // [esp+78h] [ebp-24h]
  unsigned __int8 v241;   // [esp+88h] [ebp-14h]
  unsigned __int8 v242;   // [esp+90h] [ebp-Ch]
  unsigned __int8 v244;   // [esp+98h] [ebp-4h]
  int v245;               // [esp+ACh] [ebp+10h]

  LODWORD(v22) = a9;
  v23 = 0;
  v236 = a9;
  if (a9 >= a10)
    return v22;
  while (1) {
    HIDWORD(v22) = &a11[16 * (_DWORD)v22];
    v222 = HIDWORD(v22);
    v245 = a4 + 8 * *(_DWORD *)(HIDWORD(v22) + 12);
    if (a3) {
      if (a3 == 1) {
        switch (a6) {
        case 2:
          v189 = 0;
          v174 = 1 << *(_DWORD *)(HIDWORD(v22) + 32);
          v195 = 1 << *(_DWORD *)(HIDWORD(v22) + 36);
          if (v195 > 0) {
              do {
                  v112 = (unsigned __int8 *)v245;
                  if ((v189 & a22) != 0) {
                      v113 = 0;
                      for (i = 0; v113 < v174; v112 = v115 + 4) {
                          v114 = v112 + 4;
                          v210 = 0;
                          do {
                              if (v113 >= v174)
                                  break;
                              LODWORD(v22) = sub_10027B10(*(_WORD *)(a5 + 2 * *v114));
                              *a1 = v22;
                              v23 += 4;
                              ++a1;
                              if (v23 >= a2)
                                  return v22;
                              ++v114;
                              v113 = ++i;
                              ++v210;
                          } while (v210 < 4);
                          v115 = v114 - 8;
                          v211 = 0;
                          do {
                              if (v113 >= v174)
                                  break;
                              LODWORD(v22) = sub_10027B10(*(_WORD *)(a5 + 2 * *v115));
                              *a1 = v22;
                              v23 += 4;
                              ++a1;
                              if (v23 >= a2)
                                  return v22;
                              ++v115;
                              v113 = ++i;
                              ++v211;
                          } while (v211 < 4);
                      }
                  } else {
                      for (j = 0; j < v174; ++j) {
                          LODWORD(v22) = sub_10027B10(*(_WORD *)(a5 + 2 * *v112));
                          *a1 = v22;
                          v23 += 4;
                          ++a1;
                          if (v23 >= a2)
                              return v22;
                          ++v112;
                      }
                  }
                  if (a7) {
                      v116 = 0;
                      for (LODWORD(v22) = a1 - 1; v116 < v174; ++v116) {
                          v23 += 4;
                          *a1++ = *(_DWORD *)v22;
                          LODWORD(v22) = v22 - 4;
                          if (v23 >= a2)
                              return v22;
                      }
                  }
                  v31 = v189 + 1 < v195;
                  v245 += *(_DWORD *)(v222 + 8);
                  ++v189;
              } while (v31);
          }
          if (a8) {
              HIDWORD(v22) = a1;
              v190 = 0;
              if (v195 > 0) {
                  v117 = v174;
                  do {
                      LODWORD(v22) = 2 * v117;
                      if (!a7)
                          LODWORD(v22) = v117;
                      HIDWORD(v22) -= 4 * v22;
                      v118 = 2 * v117;
                      LODWORD(v22) = HIDWORD(v22);
                      if (!a7)
                          v118 = v117;
                      if (v118 > 0) {
                          do {
                              v23 += 4;
                              *a1++ = *(_DWORD *)v22;
                              LODWORD(v22) = v22 + 4;
                              if (v23 >= a2)
                                  return v22;
                              --v118;
                          } while (v118 > 0);
                          v117 = v174;
                      }
                      ++v190;
                  } while (v190 < v195);
              }
          }
          break;
        case 3:
          if (a13 == 1) {
              v119 = 1 << *(_DWORD *)(HIDWORD(v22) + 32);
              v120 = 1 << *(_DWORD *)(HIDWORD(v22) + 36);
              v121 = 0;
              v228 = v119;
              v200 = 0;
              for (k = v120; v200 < k; ++v200) {
                  v122 = (unsigned __int8 *)v245;
                  v232 = v245;
                  if ((a22 & v121) != 0) {
                      v123 = 0;
                      for (l = 0; v123 < v119; v122 = v126 + 4) {
                          v124 = v122 + 4;
                          v212 = 0;
                          v233 = v124;
                          do {
                              if (v123 >= v119)
                                  break;
                              v238 = *v124;
                              v23 += 4;
                              ++a1;
                              v125 = v238 & 0xF0 | (v238 >> 4);
                              LODWORD(v22) = *v124 & 0xF;
                              *(a1 - 1) = (((unsigned int)v22 | (16 * (v238 & 0xF))) << 24) |
                                          ((a20 + v125 * (a16 - (unsigned int)a20) / 0xFF) << 16) |
                                          ((a19 + v125 * (a15 - (unsigned int)a19) / 0xFF) << 8) |
                                          (a18 + v125 * (a14 - (unsigned int)a18) / 0xFF);
                              if (v23 >= a2)
                                  return v22;
                              v119 = v228;
                              v124 = v233 + 1;
                              v123 = l + 1;
                              ++v233;
                              v31 = v212 + 1 < 4;
                              ++l;
                              ++v212;
                          } while (v31);
                          v126 = v124 - 8;
                          v213 = 0;
                          v234 = v126;
                          do {
                              if (v123 >= v119)
                                  break;
                              v239 = *v126;
                              v23 += 4;
                              ++a1;
                              v127 = v239 & 0xF0 | (v239 >> 4);
                              LODWORD(v22) = *v126 & 0xF;
                              *(a1 - 1) = (((unsigned int)v22 | (16 * (v239 & 0xF))) << 24) |
                                          ((a20 + v127 * (a16 - (unsigned int)a20) / 0xFF) << 16) |
                                          (a18 + v127 * (a14 - (unsigned int)a18) / 0xFF) |
                                          ((a19 + v127 * (a15 - (unsigned int)a19) / 0xFF) << 8);
                              if (v23 >= a2)
                                  return v22;
                              v119 = v228;
                              v126 = v234 + 1;
                              v123 = l + 1;
                              ++v234;
                              v31 = v213 + 1 < 4;
                              ++l;
                              ++v213;
                          } while (v31);
                      }
                  } else {
                      v162 = 0;
                      if (v119 > 0) {
                          for (m = a15 - a19;; m = a15 - a19) {
                              v23 += 4;
                              v240 = *v122;
                              ++a1;
                              LODWORD(v22) = *v122 & 0xF;
                              *(a1 - 1) = (((unsigned int)v22 | (16 * (v240 & 0xF))) << 24) |
                                          ((a20 + (a16 - a20) * (v240 & 0xF0 | (v240 >> 4)) / 0xFFu)
                                           << 16) |
                                          ((a19 + m * (v240 & 0xF0 | (v240 >> 4)) / 0xFFu) << 8) |
                                          (a18 + (a14 - a18) * (v240 & 0xF0 | (v240 >> 4)) / 0xFFu);
                              if (v23 >= a2)
                                  return v22;
                              v119 = v228;
                              v122 = (unsigned __int8 *)++v232;
                              if (++v162 >= v228)
                                  break;
                          }
                      }
                  }
                  if (a7) {
                      v129 = 0;
                      for (LODWORD(v22) = a1 - 1; v129 < v119; ++v129) {
                          v23 += 4;
                          *a1++ = *(_DWORD *)v22;
                          LODWORD(v22) = v22 - 4;
                          if (v23 >= a2)
                              return v22;
                      }
                  }
                  v245 += *(_DWORD *)(v222 + 8);
                  v120 = k;
                  v121 = v200 + 1;
              }
              if (a8) {
                  HIDWORD(v22) = a1;
                  v201 = 0;
                  if (v120 > 0) {
                      do {
                          LODWORD(v22) = 2 * v119;
                          if (!a7)
                              LODWORD(v22) = v119;
                          HIDWORD(v22) -= 4 * v22;
                          v130 = 2 * v119;
                          LODWORD(v22) = HIDWORD(v22);
                          if (!a7)
                              v130 = v119;
                          for (; v130 > 0; --v130) {
                              v23 += 4;
                              *a1++ = *(_DWORD *)v22;
                              LODWORD(v22) = v22 + 4;
                              if (v23 >= a2)
                                  return v22;
                          }
                          ++v201;
                      } while (v201 < k);
                  }
              }
          } else {
              LODWORD(v22) = 1 << *(_DWORD *)(HIDWORD(v22) + 32);
              v131 = 0;
              v218 = v22;
              v202 = 0;
              v169 = 1 << *(_DWORD *)(HIDWORD(v22) + 36);
              if (v169 > 0) {
                  do {
                      HIDWORD(v22) = v245;
                      if ((a22 & v131) != 0) {
                          v132 = 0;
                          for (n = 0; v132 < (int)v22; HIDWORD(v22) += 4) {
                              HIDWORD(v22) += 4;
                              v214 = 0;
                              do {
                                  if (v132 >= (int)v22)
                                      break;
                                  v23 += 4;
                                  ++a1;
                                  v241 =
                                      *(_BYTE *)HIDWORD(v22) & 0xF0 | (*(_BYTE *)HIDWORD(v22) >> 4);
                                  LODWORD(v22) = (unsigned __int8)(16 * *(_BYTE *)HIDWORD(v22));
                                  *(a1 - 1) =
                                      v241 |
                                      ((v241 |
                                        ((v241 |
                                          (((unsigned int)v22 | *(_BYTE *)HIDWORD(v22) & 0xF) << 8))
                                         << 8))
                                       << 8);
                                  if (v23 >= a2)
                                      return v22;
                                  ++HIDWORD(v22);
                                  v132 = ++n;
                                  ++v214;
                                  LODWORD(v22) = v218;
                              } while (v214 < 4);
                              HIDWORD(v22) -= 8;
                              v215 = 0;
                              do {
                                  if (v132 >= (int)v22)
                                      break;
                                  v23 += 4;
                                  ++a1;
                                  v242 =
                                      *(_BYTE *)HIDWORD(v22) & 0xF0 | (*(_BYTE *)HIDWORD(v22) >> 4);
                                  LODWORD(v22) = *(_BYTE *)HIDWORD(v22) & 0xF;
                                  *(a1 - 1) =
                                      v242 |
                                      ((v242 |
                                        ((v242 | (((unsigned int)v22 |
                                                   (unsigned __int8)(16 * *(_BYTE *)HIDWORD(v22)))
                                                  << 8))
                                         << 8))
                                       << 8);
                                  if (v23 >= a2)
                                      return v22;
                                  ++HIDWORD(v22);
                                  v132 = ++n;
                                  ++v215;
                                  LODWORD(v22) = v218;
                              } while (v215 < 4);
                          }
                      } else {
                          v164 = 0;
                          if ((int)v22 > 0) {
                              do {
                                  v23 += 4;
                                  ++a1;
                                  v244 =
                                      *(_BYTE *)HIDWORD(v22) & 0xF0 | (*(_BYTE *)HIDWORD(v22) >> 4);
                                  LODWORD(v22) = (unsigned __int8)(16 * *(_BYTE *)HIDWORD(v22));
                                  *(a1 - 1) =
                                      v244 |
                                      ((v244 |
                                        ((v244 |
                                          (((unsigned int)v22 | *(_BYTE *)HIDWORD(v22) & 0xF) << 8))
                                         << 8))
                                       << 8);
                                  if (v23 >= a2)
                                      return v22;
                                  v22 = __PAIR64__(HIDWORD(v22), v218) + 0x100000000i64;
                                  ++v164;
                              } while (v164 < v218);
                          }
                      }
                      if (a7) {
                          HIDWORD(v22) = 0;
                          v133 = a1 - 1;
                          if ((int)v22 > 0) {
                              do {
                                  v23 += 4;
                                  *a1++ = *v133--;
                                  if (v23 >= a2)
                                      return v22;
                                  ++HIDWORD(v22);
                              } while (SHIDWORD(v22) < (int)v22);
                          }
                      }
                      v245 += *(_DWORD *)(v222 + 8);
                      v131 = ++v202;
                  } while (v202 < v169);
              }
              if (a8) {
                  v134 = a1;
                  for (ii = 0; ii < v169; ++ii) {
                      v135 = 2 * v22;
                      if (!a7)
                          v135 = v22;
                      v134 -= v135;
                      v136 = 2 * v22;
                      v137 = v134;
                      if (!a7)
                          v136 = v22;
                      for (; v136 > 0; --v136) {
                          v23 += 4;
                          *a1++ = *v137++;
                          if (v23 >= a2)
                              return v22;
                      }
                  }
              }
          }
          break;
        case 4:
          v138 = 1 << *(_DWORD *)(HIDWORD(v22) + 32);
          v139 = 1 << *(_DWORD *)(HIDWORD(v22) + 36);
          v140 = 0;
          v196 = v138;
          v204 = 0;
          for (jj = v139; v204 < jj; ++v204) {
              LODWORD(v22) = v245;
              if ((a22 & v140) != 0) {
                  for (kk = 0; kk < v138; LODWORD(v22) = v22 + 4) {
                      v22 = (unsigned int)(v22 + 4);
                      do {
                          if (kk >= v138)
                              break;
                          v23 += 4;
                          *a1++ = (*(unsigned __int8 *)v22 << 24) | 0xFFFFFF;
                          if (v23 >= a2)
                              return v22;
                          v138 = v196;
                          LODWORD(v22) = v22 + 1;
                          ++kk;
                          ++HIDWORD(v22);
                      } while (SHIDWORD(v22) < 4);
                      v22 = (unsigned int)(v22 - 8);
                      do {
                          if (kk >= v138)
                              break;
                          v23 += 4;
                          *a1++ = (*(unsigned __int8 *)v22 << 24) | 0xFFFFFF;
                          if (v23 >= a2)
                              return v22;
                          v138 = v196;
                          LODWORD(v22) = v22 + 1;
                          ++kk;
                          ++HIDWORD(v22);
                      } while (SHIDWORD(v22) < 4);
                  }
              } else {
                  for (ll = 0; ll < v138; ++ll) {
                      v23 += 4;
                      *a1++ = (*(unsigned __int8 *)v22 << 24) | 0xFFFFFF;
                      if (v23 >= a2)
                          return v22;
                      LODWORD(v22) = v22 + 1;
                  }
              }
              if (a7) {
                  v143 = 0;
                  for (LODWORD(v22) = a1 - 1; v143 < v138; ++v143) {
                      v23 += 4;
                      *a1++ = *(_DWORD *)v22;
                      LODWORD(v22) = v22 - 4;
                      if (v23 >= a2)
                          return v22;
                  }
              }
              v245 += *(_DWORD *)(v222 + 8);
              v139 = jj;
              v140 = v204 + 1;
          }
          if (a8) {
              HIDWORD(v22) = a1;
              v205 = 0;
              if (v139 > 0) {
                  do {
                      LODWORD(v22) = 2 * v138;
                      if (!a7)
                          LODWORD(v22) = v138;
                      HIDWORD(v22) -= 4 * v22;
                      v144 = 2 * v138;
                      LODWORD(v22) = HIDWORD(v22);
                      if (!a7)
                          v144 = v138;
                      for (; v144 > 0; --v144) {
                          v23 += 4;
                          *a1++ = *(_DWORD *)v22;
                          LODWORD(v22) = v22 + 4;
                          if (v23 >= a2)
                              return v22;
                      }
                      ++v205;
                  } while (v205 < jj);
              }
          }
          break;
        }
        goto LABEL_336;
      }
      if (a3 != 2 || a6)
        goto LABEL_336;
      v165 = 0;
      v175 = 1 << *(_DWORD *)(HIDWORD(v22) + 32);
      v171 = 1 << *(_DWORD *)(HIDWORD(v22) + 36);
      if (v171 <= 0) {
      LABEL_324:
        if (a8) {
          HIDWORD(v22) = a1;
          v166 = 0;
          if (v171 > 0) {
              v150 = v175;
              do {
                  LODWORD(v22) = 2 * v150;
                  if (!a7)
                      LODWORD(v22) = v150;
                  HIDWORD(v22) -= 4 * v22;
                  v151 = 2 * v150;
                  LODWORD(v22) = HIDWORD(v22);
                  if (!a7)
                      v151 = v150;
                  if (v151 > 0) {
                      do {
                          v23 += 4;
                          *a1++ = *(_DWORD *)v22;
                          LODWORD(v22) = v22 + 4;
                          if (v23 >= a2)
                              return v22;
                          --v151;
                      } while (v151 > 0);
                      v150 = v175;
                  }
                  ++v166;
              } while (v166 < v171);
          }
        }
        goto LABEL_336;
      }
      while (1) {
        v145 = (unsigned __int16 *)v245;
        HIDWORD(v22) = v175;
        v182 = 0;
        if ((v165 & a22) != 0) {
          if (v175 <= 0)
              goto LABEL_319;
          while (1) {
              *a1++ = sub_10027B10(v145[2]);
              v146 = v145 + 1;
              v23 += 4;
              LOBYTE(v22) = v182 + 1;
              v183 = v182 + 1;
              if (v183 >= v175)
                  break;
              if (v23 >= a2)
                  return v22;
              *a1++ = sub_10027B10(v146[2]);
              v147 = v146 + 1;
              v23 += 4;
              LOBYTE(v22) = v183 + 1;
              v184 = v183 + 1;
              if (v184 >= v175)
                  break;
              if (v23 >= a2)
                  return v22;
              *a1++ = sub_10027B10(*(v147 - 2));
              v148 = v147 + 1;
              v23 += 4;
              LOBYTE(v22) = v184 + 1;
              v185 = v184 + 1;
              if (v185 >= v175)
                  break;
              if (v23 >= a2)
                  return v22;
              *a1++ = sub_10027B10(*(v148 - 2));
              v145 = v148 + 1;
              v23 += 4;
              LOBYTE(v22) = v185 + 1;
              v182 = v185 + 1;
              if (v182 >= v175)
                  break;
              if (v23 >= a2)
                  return v22;
          }
        } else {
          if (v175 <= 0)
              goto LABEL_319;
          do {
              LODWORD(v22) = sub_10027B10(*v145);
              *a1 = v22;
              v23 += 4;
              ++a1;
              ++v145;
              if (v23 >= a2)
                  return v22;
              ++v182;
          } while (v182 < v175);
        }
        HIDWORD(v22) = v175;
      LABEL_319:
        if (a7) {
          v149 = 0;
          for (LODWORD(v22) = a1 - 1; v149 < SHIDWORD(v22); ++v149) {
              v23 += 4;
              *a1++ = *(_DWORD *)v22;
              LODWORD(v22) = v22 - 4;
              if (v23 >= a2)
                  return v22;
          }
        }
        v31 = v165 + 1 < v171;
        v245 += *(_DWORD *)(v222 + 8);
        ++v165;
        if (!v31)
          goto LABEL_324;
      }
    }
    if (a6 != 2) {
      if (a6 == 4) {
        v63 = *(_DWORD *)(HIDWORD(v22) + 32);
        if (a13 == 1) {
          v64 = 1 << (v63 - 1);
          v65 = 1 << *(_DWORD *)(HIDWORD(v22) + 36);
          v66 = 0;
          v216 = v64;
          v206 = 0;
          for (mm = v65; v206 < mm; ++v206) {
              v67 = (unsigned __int8 *)v245;
              v229 = v245;
              if ((v66 & a22) != 0) {
                  v68 = 0;
                  for (nn = 0; v68 < v64; v67 = v76 + 4) {
                      v69 = v67 + 4;
                      v224 = 0;
                      v230 = v69;
                      do {
                          if (v68 >= v64)
                              break;
                          v219 = *v69;
                          v179 = a14 - a18;
                          v70 = (v219 >> 4) | v219 & 0xF0;
                          v71 = (unsigned __int8)(a20 - v70 * (a16 - a20));
                          BYTE1(v71) = a21 - v70 * (a17 - a21);
                          v72 = v23 + 4;
                          v22 = 2155905153i64 * v179 * v70;
                          LOBYTE(v22) = a18;
                          v73 = a1 + 1;
                          *(v73 - 1) =
                              (unsigned __int8)(a18 + (SHIDWORD(v22) >> 7 < 0) +
                                                (SHIDWORD(v22) >> 7)) |
                              (((unsigned __int8)(a19 - v70 * (a15 - a19)) | (v71 << 8)) << 8);
                          if (v72 >= a2)
                              return v22;
                          v23 = v72 + 4;
                          a1 = v73 + 1;
                          v74 = v219 & 0xF | (unsigned __int8)(16 * v219);
                          LOBYTE(v75) = a20 - v74 * (a16 - a20);
                          HIBYTE(v75) = a21 - v74 * (a17 - a21);
                          v22 = 2155905153i64 * v179 * v74;
                          LOBYTE(v22) = a18;
                          *(a1 - 1) =
                              (unsigned __int8)(a18 + (SHIDWORD(v22) >> 7 < 0) +
                                                (SHIDWORD(v22) >> 7)) |
                              (((unsigned __int8)(a19 - v74 * (a15 - a19)) | (v75 << 8)) << 8);
                          if (v23 >= a2)
                              return v22;
                          v64 = v216;
                          v69 = v230 + 1;
                          v68 = nn + 1;
                          ++v230;
                          v31 = v224 + 1 < 4;
                          ++nn;
                          ++v224;
                      } while (v31);
                      v76 = v69 - 8;
                      v225 = 0;
                      v231 = v76;
                      do {
                          if (v68 >= v64)
                              break;
                          v220 = *v76;
                          v237 = (v220 >> 4) | v220 & 0xF0;
                          v180 = a14 - a18;
                          v77 = (unsigned __int8)(a20 - (a16 - a20) * v237);
                          BYTE1(v77) = a21 - (a17 - a21) * v237;
                          v78 = v23 + 4;
                          v22 = 2155905153i64 * v180 * v237;
                          LOBYTE(v22) = a18;
                          v79 = a1 + 1;
                          *(v79 - 1) =
                              (unsigned __int8)(a18 + (SHIDWORD(v22) >> 7 < 0) +
                                                (SHIDWORD(v22) >> 7)) |
                              (((unsigned __int8)(a19 - (a15 - a19) * v237) | (v77 << 8)) << 8);
                          if (v78 >= a2)
                              return v22;
                          v23 = v78 + 4;
                          a1 = v79 + 1;
                          LOBYTE(v80) = a20 - (a16 - a20) * (v220 & 0xF | (16 * v220));
                          HIBYTE(v80) = a21 - (a17 - a21) * (v220 & 0xF | (16 * v220));
                          v22 = 2155905153i64 * v180 * (v220 & 0xFu | (unsigned __int8)(16 * v220));
                          LOBYTE(v22) = a18;
                          *(a1 - 1) =
                              (unsigned __int8)(a18 + (SHIDWORD(v22) >> 7 < 0) +
                                                (SHIDWORD(v22) >> 7)) |
                              (((unsigned __int8)(a19 - (a15 - a19) * (v220 & 0xF | (16 * v220))) |
                                (v80 << 8))
                               << 8);
                          if (v23 >= a2)
                              return v22;
                          v64 = v216;
                          v76 = v231 + 1;
                          v68 = nn + 1;
                          ++v231;
                          v31 = v225 + 1 < 4;
                          ++nn;
                          ++v225;
                      } while (v31);
                  }
              } else {
                  v156 = 0;
                  if (v64 > 0) {
                      v181 = a14 - a18;
                      v173 = a15 - a19;
                      v81 = a16 - a20;
                      v199 = a17 - a21;
                      while (1) {
                          v82 = v23 + 4;
                          v221 = *v67;
                          v83 = a1 + 1;
                          v84 = (v221 >> 4) | v221 & 0xF0;
                          v85 = (int)((unsigned __int64)(2155905153i64 * v81 * v84) >> 32) >> 7;
                          LOBYTE(v86) = a20 + (v85 < 0) + v85;
                          HIBYTE(v86) = a21 - v199 * v84;
                          v22 = 2155905153i64 * v181 * v84;
                          LOBYTE(v22) = a18;
                          *(v83 - 1) = (unsigned __int8)(a18 + (SHIDWORD(v22) >> 7 < 0) +
                                                         (SHIDWORD(v22) >> 7)) |
                                       (((unsigned __int8)(a19 +
                                                           ((int)((unsigned __int64)(2155905153i64 *
                                                                                     v173 * v84) >>
                                                                  32) >>
                                                            7 < 0) +
                                                           ((int)((unsigned __int64)(2155905153i64 *
                                                                                     v173 * v84) >>
                                                                  32) >>
                                                            7)) |
                                         (v86 << 8))
                                        << 8);
                          if (v82 >= a2)
                              return v22;
                          v23 = v82 + 4;
                          a1 = v83 + 1;
                          LOBYTE(v87) = a20 - (a16 - a20) * (v221 & 0xF | (16 * v221));
                          HIBYTE(v87) = a21 - v199 * (v221 & 0xF | (16 * v221));
                          v22 = 2155905153i64 * v181 * (v221 & 0xFu | (unsigned __int8)(16 * v221));
                          LOBYTE(v22) = a18;
                          *(a1 - 1) = (unsigned __int8)(a18 + (SHIDWORD(v22) >> 7 < 0) +
                                                        (SHIDWORD(v22) >> 7)) |
                                      (((unsigned __int8)(a19 - v173 * (v221 & 0xF | (16 * v221))) |
                                        (v87 << 8))
                                       << 8);
                          if (v23 >= a2)
                              return v22;
                          v64 = v216;
                          v67 = (unsigned __int8 *)++v229;
                          if (++v156 >= v216)
                              break;
                          v81 = a16 - a20;
                      }
                  }
              }
              if (a7) {
                  v88 = 0;
                  for (LODWORD(v22) = a1 - 1; v88 < v64; ++v88) {
                      v89 = v23 + 4;
                      *a1 = *(_DWORD *)v22;
                      v90 = a1 + 1;
                      LODWORD(v22) = v22 - 4;
                      if (v89 < a2) {
                          v23 = v89 + 4;
                          *v90 = *(_DWORD *)v22;
                          a1 = v90 + 1;
                          LODWORD(v22) = v22 - 4;
                          if (v23 < a2)
                              continue;
                      }
                      return v22;
                  }
              }
              v245 += *(_DWORD *)(v222 + 8);
              v65 = mm;
              v66 = v206 + 1;
          }
          if (a8) {
              HIDWORD(v22) = a1;
              v207 = 0;
              if (v65 > 0) {
                  do {
                      LODWORD(v22) = 2 * v64;
                      if (!a7)
                          LODWORD(v22) = v64;
                      HIDWORD(v22) -= 8 * v22;
                      v91 = 2 * v64;
                      LODWORD(v22) = HIDWORD(v22);
                      if (!a7)
                          v91 = v64;
                      for (; v91 > 0; --v91) {
                          v92 = v23 + 4;
                          *a1 = *(_DWORD *)v22;
                          v93 = a1 + 1;
                          LODWORD(v22) = v22 + 4;
                          if (v92 < a2) {
                              v23 = v92 + 4;
                              *v93 = *(_DWORD *)v22;
                              a1 = v93 + 1;
                              LODWORD(v22) = v22 + 4;
                              if (v23 < a2)
                                  continue;
                          }
                          return v22;
                      }
                      ++v207;
                  } while (v207 < mm);
              }
          }
        } else {
          v94 = 1 << (v63 - 1);
          v95 = 0;
          v217 = v94;
          v226 = 0;
          v194 = 1 << *(_DWORD *)(HIDWORD(v22) + 36);
          if (v194 > 0) {
              do {
                  HIDWORD(v22) = v245;
                  if ((a22 & v95) != 0) {
                      v96 = 0;
                      for (i1 = 0; v96 < v94; HIDWORD(v22) += 4) {
                          HIDWORD(v22) += 4;
                          v208 = 0;
                          do {
                              if (v96 >= v94)
                                  break;
                              v97 = *(_BYTE *)HIDWORD(v22);
                              v98 = v23 + 4;
                              v99 = a1 + 1;
                              LODWORD(v22) = (unsigned __int8)*(_BYTE *)HIDWORD(v22) >> 4;
                              *(v99 - 1) =
                                  (((unsigned int)v22 | *(_BYTE *)HIDWORD(v22) & 0xF0) << 24) |
                                  0xFFFFFF;
                              if (v98 >= a2)
                                  return v22;
                              v23 = v98 + 4;
                              a1 = v99 + 1;
                              LODWORD(v22) =
                                  ((v97 & 0xF | (unsigned __int8)(16 * v97)) << 24) | 0xFFFFFF;
                              *(a1 - 1) = v22;
                              if (v23 >= a2)
                                  return v22;
                              v94 = v217;
                              ++HIDWORD(v22);
                              v96 = i1 + 1;
                              v31 = v208 + 1 < 4;
                              ++i1;
                              ++v208;
                          } while (v31);
                          HIDWORD(v22) -= 8;
                          v209 = 0;
                          do {
                              if (v96 >= v94)
                                  break;
                              LOBYTE(v22) = *(_BYTE *)HIDWORD(v22);
                              v100 = v23 + 4;
                              v101 = a1 + 1;
                              *(v101 - 1) = ((((unsigned __int8)*(_BYTE *)HIDWORD(v22) >> 4) |
                                              *(_BYTE *)HIDWORD(v22) & 0xF0)
                                             << 24) |
                                            0xFFFFFF;
                              if (v100 >= a2)
                                  return v22;
                              v102 = v22;
                              v23 = v100 + 4;
                              LODWORD(v22) = (unsigned __int8)(16 * v22);
                              a1 = v101 + 1;
                              *(a1 - 1) = (((unsigned int)v22 | v102 & 0xF) << 24) | 0xFFFFFF;
                              if (v23 >= a2)
                                  return v22;
                              v94 = v217;
                              ++HIDWORD(v22);
                              v96 = i1 + 1;
                              v31 = v209 + 1 < 4;
                              ++i1;
                              ++v209;
                          } while (v31);
                      }
                  } else {
                      v158 = 0;
                      if (v94 > 0) {
                          do {
                              v103 = *(_BYTE *)HIDWORD(v22);
                              v104 = v23 + 4;
                              v105 = a1 + 1;
                              LODWORD(v22) = *(_BYTE *)HIDWORD(v22) & 0xF0;
                              *(v105 - 1) = (((unsigned int)v22 |
                                              ((unsigned __int8)*(_BYTE *)HIDWORD(v22) >> 4))
                                             << 24) |
                                            0xFFFFFF;
                              if (v104 >= a2)
                                  return v22;
                              v23 = v104 + 4;
                              a1 = v105 + 1;
                              LODWORD(v22) =
                                  ((v103 & 0xF | (unsigned __int8)(16 * v103)) << 24) | 0xFFFFFF;
                              *(a1 - 1) = v22;
                              if (v23 >= a2)
                                  return v22;
                              v94 = v217;
                              ++HIDWORD(v22);
                              ++v158;
                          } while (v158 < v217);
                      }
                  }
                  if (a7) {
                      v106 = 0;
                      for (LODWORD(v22) = a1 - 1; v106 < v94; ++v106) {
                          v107 = v23 + 4;
                          *a1 = *(_DWORD *)v22;
                          v108 = a1 + 1;
                          LODWORD(v22) = v22 - 4;
                          if (v107 < a2) {
                              v23 = v107 + 4;
                              *v108 = *(_DWORD *)v22;
                              a1 = v108 + 1;
                              LODWORD(v22) = v22 - 4;
                              if (v23 < a2)
                                  continue;
                          }
                          return v22;
                      }
                  }
                  v245 += *(_DWORD *)(v222 + 8);
                  v95 = ++v226;
              } while (v226 < v194);
          }
          if (a8) {
              HIDWORD(v22) = a1;
              for (i2 = 0; i2 < v194; ++i2) {
                  LODWORD(v22) = 2 * v94;
                  if (!a7)
                      LODWORD(v22) = v94;
                  HIDWORD(v22) -= 8 * v22;
                  v109 = 2 * v94;
                  LODWORD(v22) = HIDWORD(v22);
                  if (!a7)
                      v109 = v94;
                  for (; v109 > 0; --v109) {
                      v110 = v23 + 4;
                      *a1 = *(_DWORD *)v22;
                      v111 = a1 + 1;
                      LODWORD(v22) = v22 + 4;
                      if (v110 < a2) {
                          v23 = v110 + 4;
                          *v111 = *(_DWORD *)v22;
                          a1 = v111 + 1;
                          LODWORD(v22) = v22 + 4;
                          if (v23 < a2)
                              continue;
                      }
                      return v22;
                  }
              }
          }
        }
      }
      goto LABEL_336;
    }
    if ((a12 & 2) == 0 || v236 != 1) {
      v46 = 1 << (*(_DWORD *)(HIDWORD(v22) + 32) - 1);
      v47 = 0;
      v188 = v46;
      v153 = 0;
      v192 = 1 << *(_DWORD *)(HIDWORD(v22) + 36);
      if (v192 <= 0) {
      LABEL_73:
        if (a8) {
          HIDWORD(v22) = a1;
          for (i3 = 0; i3 < v192; ++i3) {
              LODWORD(v22) = 2 * v46;
              if (!a7)
                  LODWORD(v22) = v46;
              HIDWORD(v22) -= 8 * v22;
              v60 = 2 * v46;
              LODWORD(v22) = HIDWORD(v22);
              if (!a7)
                  v60 = v46;
              if (v60 > 0) {
                  do {
                      v61 = v23 + 4;
                      *a1 = *(_DWORD *)v22;
                      v62 = a1 + 1;
                      LODWORD(v22) = v22 + 4;
                      if (v61 >= a2)
                          return v22;
                      v23 = v61 + 4;
                      *v62 = *(_DWORD *)v22;
                      a1 = v62 + 1;
                      LODWORD(v22) = v22 + 4;
                      if (v23 >= a2)
                          return v22;
                      --v60;
                  } while (v60 > 0);
                  v46 = v188;
              }
          }
        }
        goto LABEL_336;
      }
      while (2) {
        v176 = (char *)v245;
        v172 = 0;
        if ((a22 & v47) != 0) {
          if (v46 > 0) {
              do {
                  v197 = 0;
                  v177 = v176 + 4;
                  do {
                      if (v172 >= v188)
                          break;
                      v48 = *v177;
                      LODWORD(v22) =
                          sub_10027B10(*(_WORD *)(a5 + 2 * ((unsigned __int8)*v177 >> 4)));
                      *a1 = v22;
                      v49 = v23 + 4;
                      v50 = a1 + 1;
                      if (v49 >= a2)
                          return v22;
                      LODWORD(v22) = sub_10027B10(*(_WORD *)(a5 + 2 * (v48 & 0xF)));
                      *v50 = v22;
                      v23 = v49 + 4;
                      a1 = v50 + 1;
                      if (v23 >= a2)
                          return v22;
                      ++v177;
                      ++v172;
                      ++v197;
                  } while (v197 < 4);
                  v198 = 0;
                  v178 = (unsigned __int8 *)(v177 - 8);
                  do {
                      if (v172 >= v188)
                          break;
                      v51 = *v178;
                      LODWORD(v22) = sub_10027B10(*(_WORD *)(a5 + 2 * (*v178 >> 4)));
                      *a1 = v22;
                      v52 = v23 + 4;
                      v53 = a1 + 1;
                      if (v52 >= a2)
                          return v22;
                      LODWORD(v22) = sub_10027B10(*(_WORD *)(a5 + 2 * (v51 & 0xF)));
                      *v53 = v22;
                      v23 = v52 + 4;
                      a1 = v53 + 1;
                      if (v23 >= a2)
                          return v22;
                      ++v178;
                      ++v172;
                      ++v198;
                  } while (v198 < 4);
                  v176 = (char *)(v178 + 4);
              } while (v172 < v188);
              goto LABEL_66;
          }
        } else if (v46 > 0) {
          do {
              v54 = *v176;
              LODWORD(v22) = sub_10027B10(*(_WORD *)(a5 + 2 * ((unsigned __int8)*v176 >> 4)));
              *a1 = v22;
              v55 = v23 + 4;
              v56 = a1 + 1;
              if (v55 >= a2)
                  return v22;
              LODWORD(v22) = sub_10027B10(*(_WORD *)(a5 + 2 * (v54 & 0xF)));
              *v56 = v22;
              v23 = v55 + 4;
              a1 = v56 + 1;
              if (v23 >= a2)
                  return v22;
              ++v176;
              ++v172;
          } while (v172 < v188);
        LABEL_66:
          v46 = v188;
        }
        if (a7) {
          v57 = 0;
          for (LODWORD(v22) = a1 - 1; v57 < v46; ++v57) {
              v58 = v23 + 4;
              *a1 = *(_DWORD *)v22;
              v59 = a1 + 1;
              LODWORD(v22) = v22 - 4;
              if (v58 < a2) {
                  v23 = v58 + 4;
                  *v59 = *(_DWORD *)v22;
                  a1 = v59 + 1;
                  LODWORD(v22) = v22 - 4;
                  if (v23 < a2)
                      continue;
              }
              return v22;
          }
        }
        v245 += *(_DWORD *)(v222 + 8);
        v47 = ++v153;
        if (v153 >= v192)
          goto LABEL_73;
        continue;
      }
    }
    v25 = 1 << (a11[24] - 1);
    v186 = 0;
    v223 = v25;
    v235 = 1 << a11[25];
    if (v235 > 0)
      break;
  LABEL_33:
    if (a8) {
      v42 = a1;
      v187 = 0;
      if (v235 > 0) {
        HIDWORD(v22) = v223;
        while (1) {
          LODWORD(v22) = 2 * HIDWORD(v22);
          if (!a7)
              LODWORD(v22) = HIDWORD(v22);
          v42 -= 2 * v22;
          v43 = 2 * HIDWORD(v22);
          LODWORD(v22) = v42;
          if (!a7)
              v43 = HIDWORD(v22);
          if (v43 > 0)
              break;
        LABEL_45:
          if (++v187 >= v235)
              goto LABEL_336;
        }
        while (1) {
          v44 = v23 + 4;
          *a1 = *(_DWORD *)v22;
          v45 = a1 + 1;
          LODWORD(v22) = v22 + 4;
          if (v44 >= a2)
              return v22;
          v23 = v44 + 4;
          *v45 = *(_DWORD *)v22;
          a1 = v45 + 1;
          LODWORD(v22) = v22 + 4;
          if (v23 >= a2)
              return v22;
          if (--v43 <= 0) {
              HIDWORD(v22) = v223;
              goto LABEL_45;
          }
        }
      }
    }
  LABEL_336:
    LODWORD(v22) = ++v236;
    if (v236 >= a10)
      return v22;
  }
  while (1) {
    v26 = (_BYTE *)v245;
    if ((a22 & v186) == 0)
      break;
    v27 = 0;
    v191 = 0;
    if (v25 > 0) {
      do {
        v28 = v26 + 4;
        v167 = 0;
        do {
          if (v27 >= v223)
              break;
          v29 = v23 + 4;
          v30 = a1 + 1;
          LOBYTE(v22) = *v28;
          *(v30 - 1) = (unsigned __int8)*v28 >> 4;
          if (v29 >= a2)
              return v22;
          LODWORD(v22) = v22 & 0xF;
          v23 = v29 + 4;
          *v30 = v22;
          a1 = v30 + 1;
          if (v23 >= a2)
              return v22;
          ++v28;
          ++v27;
          v31 = v167 + 1 < 4;
          v191 = v27;
          ++v167;
        } while (v31);
        v32 = v28 - 8;
        v33 = 0;
        do {
          if (v27 >= v223)
              break;
          v34 = v23 + 4;
          v35 = a1 + 1;
          LOBYTE(v22) = *v32;
          *(v35 - 1) = (unsigned __int8)*v32 >> 4;
          if (v34 >= a2)
              return v22;
          LODWORD(v22) = v22 & 0xF;
          v23 = v34 + 4;
          *v35 = v22;
          a1 = v35 + 1;
          if (v23 >= a2)
              return v22;
          ++v32;
          v27 = v191 + 1;
          ++v33;
          ++v191;
        } while (v33 < 4);
        v26 = v32 + 4;
      } while (v27 < v223);
    }
  LABEL_27:
    if (a7) {
      v39 = 0;
      LODWORD(v22) = a1 - 1;
      if (v223 > 0) {
        do {
          v40 = v23 + 4;
          *a1 = *(_DWORD *)v22;
          v41 = a1 + 1;
          LODWORD(v22) = v22 - 4;
          if (v40 >= a2)
              return v22;
          v23 = v40 + 4;
          *v41 = *(_DWORD *)v22;
          a1 = v41 + 1;
          LODWORD(v22) = v22 - 4;
          if (v23 >= a2)
              return v22;
        } while (++v39 < v223);
      }
    }
    v245 += a11[18];
    if (++v186 >= v235)
      goto LABEL_33;
    v25 = v223;
  }
  v36 = 0;
  if (v25 <= 0)
    goto LABEL_27;
  while (1) {
    v37 = v23 + 4;
    v38 = a1 + 1;
    LOBYTE(v22) = *v26;
    *(v38 - 1) = (unsigned __int8)*v26 >> 4;
    if (v37 >= a2)
      return v22;
    LODWORD(v22) = v22 & 0xF;
    v23 = v37 + 4;
    *v38 = v22;
    a1 = v38 + 1;
    if (v23 >= a2)
      return v22;
    ++v26;
    if (++v36 >= v223)
      goto LABEL_27;
  }
}

//----- (10027B10) --------------------------------------------------------
unsigned int __cdecl sub_10027B10(unsigned __int16 a1) {
  unsigned __int16 v1; // dx

  LOBYTE(v1) = 0;
  HIBYTE(v1) = a1;
  return ((((unsigned __int16)(HIBYTE(a1) | v1) >> 3) & 0x700 | (HIBYTE(a1) | v1) & 0xF800u) >> 8) |
         (32 * (((unsigned __int16)(HIBYTE(a1) | v1) >> 3) & 0x38 | (HIBYTE(a1) | v1) & 0x7C0 |
                ((HIBYTE(a1) & 0xE |
                  (8 * (HIBYTE(a1) & 0x3E | ((unsigned __int8)-((a1 & 0x100) != 0) << 6))))
                 << 10)));
}

//----- (10027B90) --------------------------------------------------------
int __cdecl sub_10027B90(int a1, int a2, int a3) {
  int v3; // eax
  int v5; // eax

  if (a1) {
    if (a1 == 1 && a2 != 2) {
      if (a2 == 3) {
        v5 = -(a3 != 1);
        LOBYTE(v5) = v5 & 0xF8;
        return v5 + 12;
      }
      if (a2 == 4)
        return 2;
    }
  } else if (a2 != 2 && a2 == 4) {
    v3 = -(a3 != 1);
    LOBYTE(v3) = v3 & 0xF7;
    return v3 + 11;
  }
  return 11;
}

//----- (10027C00) --------------------------------------------------------
int __cdecl sub_10027C00(int a1) {
  int result; // eax

  if (a1 <= 1)
    return 0;
  if (a1 <= 2)
    return 1;
  if (a1 <= 4)
    return 2;
  if (a1 <= 8)
    return 3;
  if (a1 <= 16)
    return 4;
  if (a1 <= 32)
    return 5;
  if (a1 <= 64)
    return 6;
  result = 7;
  if (a1 > 128)
    result = 8;
  return result;
}

//----- (10027C60) --------------------------------------------------------
int __cdecl tex_sub_10027C60(unsigned __int8 *a1,
                             int a2,
                             int a3,
                             int a4,
                             int a5,
                             int a6,
                             int a7,
                             int a8,
                             int a9,
                             int a10,
                             int a11,
                             int a12,
                             int a13,
                             int a14,
                             int a15) {
  int v15;              // ebp
  int v16;              // ebx
  int v17;              // eax
  int v18;              // eax
  int v19;              // eax
  int v20;              // edi
  int v21;              // esi
  unsigned __int8 *v22; // eax
  int v24;              // [esp-Ch] [ebp-2C8h]
  int v25;              // [esp-8h] [ebp-2C4h]
  int v26;              // [esp+10h] [ebp-2ACh] BYREF
  char v27;             // [esp+14h] [ebp-2A8h]
  int v28;              // [esp+18h] [ebp-2A4h]
  int v29;              // [esp+1Ch] [ebp-2A0h]
  int v30;              // [esp+20h] [ebp-29Ch]
  int v31;              // [esp+24h] [ebp-298h]
  DWORD v32;            // [esp+28h] [ebp-294h] BYREF
  DWORD v33;            // [esp+2Ch] [ebp-290h] BYREF
  _DWORD v34[8];        // [esp+30h] [ebp-28Ch] BYREF
  int v35;              // [esp+50h] [ebp-26Ch]
  int v36;              // [esp+54h] [ebp-268h]
  int v37;              // [esp+58h] [ebp-264h]
  unsigned __int8 *v38; // [esp+5Ch] [ebp-260h]
  int v39;              // [esp+60h] [ebp-25Ch]
  int v40;              // [esp+64h] [ebp-258h]
  int v41;              // [esp+68h] [ebp-254h]
  int v42;              // [esp+6Ch] [ebp-250h]
  int v43;              // [esp+70h] [ebp-24Ch]
  int v44[140];         // [esp+74h] [ebp-248h]
  char v45;             // [esp+2A4h] [ebp-18h]
  char v46;             // [esp+2A5h] [ebp-17h]
  char v47;             // [esp+2A6h] [ebp-16h]
  char v48;             // [esp+2A7h] [ebp-15h]
  char v49;             // [esp+2A8h] [ebp-14h]
  char v50;             // [esp+2A9h] [ebp-13h]
  char v51;             // [esp+2AAh] [ebp-12h]
  char v52;             // [esp+2ABh] [ebp-11h]
  int v53;              // [esp+2ACh] [ebp-10h]
  int v54;              // [esp+2B0h] [ebp-Ch]
  int v55;              // [esp+2B4h] [ebp-8h]
  int v56;              // [esp+2B8h] [ebp-4h]

  v15 = 1 << sub_10027C00(a3);
  v16 = 1 << sub_10027C00(a4);
  v26 = 0;
  v31 = 0;
  v27 = 3;
  v55 = a3;
  v56 = a4;
  v28 = a3;
  v29 = a4;
  v36 = v15;
  v37 = v16;
  math_pow2ExponentToAdd(&v32, v15, v16);
  v33 = v32;
  v42 = 0;
  v44[3] = 0;
  v17 = sub_10027C00(a3);
  v44[16 * v42 + 8] = v17;
  v18 = sub_10027C00(a4);
  v44[16 * v42 + 9] = v18;
  v44[16 * v42 + 2] = a5;
  v44[16 * v42 + 1] = a6;
  v44[16 * v42] = a7;
  v44[16 * v42 + 10] = a12;
  v44[16 * v42 + 11] = a13;
  v44[16 * v42 + 12] = 2;
  v44[16 * v42 + 13] = 2;
  v44[16 * v42 + 14] = 4 * a3 - 2;
  v44[16 * v42 + 15] = 4 * a4 - 2;
  v43 = 1;
  v53 = a15;
  v44[129] = 0;
  v44[130] = 0;
  v52 = 0;
  v51 = 0;
  v50 = 0;
  v49 = 0;
  v48 = 0;
  v47 = 0;
  v46 = 0;
  v45 = 0;
  v25 = v44[16 * v42];
  v24 = v44[16 * v42 + 1];
  dword_10575444 = 0;
  dword_10575440 = 0;
  v30 = sub_10027B90(v24, v25, 0);
  v35 = v15 * v16 * _RTC_NumErrors();
  v34[1] = a10 != 0;
  v38 = a1;
  v39 = a2;
  v40 = a8;
  v34[2] = a11 != 0;
  v41 = a9;
  if ((dword_118AA088 & 2) == 0 || dword_100AC300) {
    dword_100A7DF4 = dword_100A7E04;
    v19 = dword_100A7E08;
  } else {
    dword_100A7DF4 = dword_100A7DFC;
    v19 = dword_100A7E00;
  }
  v20 = v29;
  dword_100A7DF8 = v19;
  if (a8 || a9 || gD3DAlwaysSquareTextures || (g_HWCaps.dpcTriCaps.dwTextureCaps & 0x20) != 0 ||
      (g_HELCaps.dpcTriCaps.dwTextureCaps & 0x20) != 0 ||
      g_HWCaps.dwMaxTextureWidth && v28 > g_HWCaps.dwMaxTextureWidth ||
      g_HWCaps.dwMaxTextureHeight && v29 > g_HWCaps.dwMaxTextureHeight ||
      a14 && (v28 > dword_100A7DF4 || v29 > dword_100A7DF8)) {
    v21 = v28;
    if (a8) {
      v21 = v28 / 2;
      math_pow2ExponentToAdd(&v33, v28 / 2, v29);
      sub_10028200(v34, v28 / 2, v29);
      v32 = dword_10575430 + v33;
    }
    if (v41) {
      v20 = v29 / 2;
      math_pow2ExponentToAdd(&v33, v21, v29 / 2);
      sub_10028200(v34, v21, v29 / 2);
      v32 = dword_10575430 + v33;
    }
    if (g_HWCaps.dwMaxTextureWidth && v21 > g_HWCaps.dwMaxTextureWidth) {
      v21 = g_HWCaps.dwMaxTextureWidth;
      math_pow2ExponentToAdd(&v33, g_HWCaps.dwMaxTextureWidth, v20);
      sub_10028200(v34, v21, v20);
      v32 = dword_10575430 + v33;
    }
    if (g_HWCaps.dwMaxTextureHeight && v20 > g_HWCaps.dwMaxTextureHeight) {
      v20 = g_HWCaps.dwMaxTextureHeight;
      math_pow2ExponentToAdd(&v33, v21, g_HWCaps.dwMaxTextureHeight);
      sub_10028200(v34, v21, v20);
      v32 = dword_10575430 + v33;
    }
    if (a14) {
      if (v21 > dword_100A7DF4) {
        v21 = dword_100A7DF4;
        math_pow2ExponentToAdd(&v33, dword_100A7DF4, v20);
        sub_10028200(v34, v21, v20);
        v32 = dword_10575430 + v33;
      }
      if (v20 > dword_100A7DF8) {
        v20 = dword_100A7DF8;
        math_pow2ExponentToAdd(&v33, v21, dword_100A7DF8);
        sub_10028200(v34, v21, v20);
        v32 = dword_10575430 + v33;
      }
    }
    if (!gD3DAlwaysSquareTextures && (g_HWCaps.dpcTriCaps.dwTextureCaps & 0x20) == 0 &&
            (g_HELCaps.dpcTriCaps.dwTextureCaps & 0x20) == 0 ||
        v21 == v20) {
      goto label_HWAlwaysSquareTextures;
    }
    if (v21 < v20) {
      if (a14) {
        v21 = dword_100A7DF8;
        if (v20 >= dword_100A7DF8) {
          v20 = dword_100A7DF8;
          goto LABEL_46;
        }
      }
      v20 = 1 << sub_10027C00(v20);
    } else if (!a14 || (v20 = dword_100A7DF4, v21 < dword_100A7DF4)) {
      v21 = 1 << sub_10027C00(v21);
      v20 = v21;
    LABEL_46:
      math_pow2ExponentToAdd(&v33, v21, v20);
      sub_10028200(v34, v21, v20);
      v32 = dword_10575430 + v33;
    label_HWAlwaysSquareTextures:
      v28 = v21;
      v29 = v20;
      sub_10028200(v34, v21, v20);
      goto LABEL_48;
    }
    v21 = v20;
    goto LABEL_46;
  }
  sub_10028200(v34, v15, v16);
LABEL_48:
  v34[7] = 0;
  v34[3] = 1;
  v34[4] = 1;
  v34[5] = 0xC0000000;
  v34[6] = 0;
  v44[128] = dword_118AA088;
  v54 = v35;
  v22 = sub_10028860((#506 *)&v26);
  return graphics_TIDFromTextureAppend(&v26, (int)v22);
}
// 100280A2: conditional instruction was optimized away because of '%arg_34.4!=0'
// 100A7DFC: using guessed type int dword_100A7DFC;
// 100A7E00: using guessed type int dword_100A7E00;
// 100A7E04: using guessed type int dword_100A7E04;
// 100A7E08: using guessed type int dword_100A7E08;
// 100AC300: using guessed type int dword_100AC300;
// 10575420: using guessed type int gD3DAlwaysSquareTextures;
// 10575430: using guessed type int dword_10575430;
// 10575440: using guessed type int dword_10575440;
// 10575444: using guessed type int dword_10575444;
// 118AA088: using guessed type int dword_118AA088;

//----- (10028200) --------------------------------------------------------
int __cdecl sub_10028200(_DWORD *a1, int a2, int a3) {
  int v3;     // eax
  int result; // eax
  int v5;     // eax

  if (a2 <= a3) {
    v5 = 8 * a3 / a2;
    switch (v5) {
    case 64:
      result = 1;
      *a1 = 6;
      break;
    case 32:
      result = 1;
      *a1 = 5;
      break;
    case 16:
      *a1 = 4;
      result = 1;
      break;
    case 8:
      result = 1;
      *a1 = 3;
      break;
    default:
      if (v5 <= 64) {
        if (v5 <= 32) {
          if (v5 <= 16) {
              result = 0;
              *a1 = 3;
          } else {
              result = 0;
              *a1 = 4;
          }
        } else {
          *a1 = 5;
          result = 0;
        }
      } else {
        result = 0;
        *a1 = 6;
      }
      break;
    }
  } else {
    v3 = 8 * a2 / a3;
    switch (v3) {
    case 64:
      *a1 = 0;
      result = 1;
      break;
    case 32:
      result = 1;
      *a1 = 1;
      break;
    case 16:
      result = 1;
      *a1 = 2;
      break;
    default:
      if (v3 <= 64) {
        if (v3 <= 32) {
          if (v3 <= 16) {
              *a1 = 3;
              result = 0;
          } else {
              result = 0;
              *a1 = 2;
          }
        } else {
          result = 0;
          *a1 = 1;
        }
      } else {
        *a1 = 0;
        result = 0;
      }
      break;
    }
  }
  return result;
}

//----- (10028350) --------------------------------------------------------
int __cdecl graphics_TIDFromTextureAppend(_DWORD *a1, int a2) {
  _DWORD *v2;   // esi
  int result;   // eax
  int v4;       // ecx
  bool v5;      // cf
  int v6;       // ebx
  unk00020 *v7; // eax
  int a4;       // [esp+Ch] [ebp-4h] BYREF

  v2 = a1;
  if (dword_118AA09C || (result = sub_10028630((int)a1), result == -1)) {
    v4 = dword_10575428;
    v5 = ++dword_10575424 < (unsigned int)dword_10575428;
    v6 = dword_10575424;
    if (!v5) {
      dword_10575428 += 256;
      Block = CHK_ReAllocateMemory0(Block, 4 * (v4 + 256), aTidfromtexture);
    }
    v7 = (unk00020 *)operator new(0x20u);
    if (v7) {
      v7->field_0 = 0;
      v7->field_4 = 0;
      v7->field_8 = 0;
      v7->field_C = 0;
      v7->field_14 = 0;
      v7->field_10 = 0;
      v7->field_18 = 0;
      v7->last = 0;
    } else {
      v7 = 0;
    }
    *((_DWORD *)Block + v6) = v7;
    sub_10028720(&a4, (int *)&a1, v2[7], v2[8]);
    dword_10575444 = 0;
    dword_10575440 = 0;
    car_10024BF0(&a4, &a1, v2);
    if (v2[15])
      meth_10009C40(*((void **)Block + v6),
                    g_D3DDevice2,
                    (unsigned __int8 *)a2,
                    a4,
                    (DWORD)a1,
                    v2[4],
                    v2[15]);
    else
      meth_10009EA0(
          *((void **)Block + v6), g_D3DDevice2, (unsigned __int8 *)a2, a4, (int)a1, v2[4]);
    result = sub_100284A0(v2, v6);
  }
  return result;
}
// 10575424: using guessed type int dword_10575424;
// 10575428: using guessed type int dword_10575428;
// 10575440: using guessed type int dword_10575440;
// 10575444: using guessed type int dword_10575444;
// 118AA09C: using guessed type int dword_118AA09C;

//----- (100284A0) --------------------------------------------------------
int __cdecl sub_100284A0(_DWORD *a1, int a2) {
  int result;      // eax
  int v3;          // edx
  unsigned int v4; // esi
  double v5;       // st7
  unsigned int v6; // ebx

  result = sub_10024B60();
  v3 = 696 * result;
  qmemcpy((char *)dword_1057543C + 696 * result + 4, a1, 0x2ACu);
  *((_DWORD *)dword_1057543C + 174 * result) = a2;
  *(_DWORD *)((char *)dword_1057543C + v3 + 688) = 1065353216;
  *(_DWORD *)((char *)dword_1057543C + v3 + 692) = 1065353216;
  *(float *)((char *)dword_1057543C + v3 + 688) =
      *(float *)((char *)dword_1057543C + v3 + 688) * 0.03125;
  *(float *)((char *)dword_1057543C + v3 + 692) =
      *(float *)((char *)dword_1057543C + v3 + 692) * 0.03125;
  *(float *)((char *)dword_1057543C + v3 + 688) =
      *(float *)((char *)dword_1057543C + v3 + 688) /
      (double)*(int *)((char *)dword_1057543C + v3 + 72);
  *(float *)((char *)dword_1057543C + v3 + 692) =
      *(float *)((char *)dword_1057543C + v3 + 692) /
      (double)*(int *)((char *)dword_1057543C + v3 + 76);
  v4 = a1[16 * a1[23] + 35];
  if (v4) {
    if (v4 > 0xA)
      v5 = (double)(1 << (16 - v4));
    else
      v5 = (double)(1024 >> v4) * 0.0009765625;
    *(float *)((char *)dword_1057543C + v3 + 688) =
        v5 * *(float *)((char *)dword_1057543C + v3 + 688);
  }
  v6 = a1[16 * a1[23] + 36];
  if (v6) {
    if (v6 > 0xA)
      *(float *)((char *)dword_1057543C + v3 + 692) =
          (double)(1 << (16 - v6)) * *(float *)((char *)dword_1057543C + v3 + 692);
    else
      *(float *)((char *)dword_1057543C + v3 + 692) =
          (double)(1024 >> v6) * 0.0009765625 * *(float *)((char *)dword_1057543C + v3 + 692);
  }
  return result;
}

//----- (10028630) --------------------------------------------------------
int __cdecl sub_10028630(int a1) {
  int v1;  // esi
  char *i; // ecx

  v1 = 0;
  if (!dword_105553F0)
    return -1;
  for (i = (char *)dword_1057543C + 84;
       *((_DWORD *)i - 1) != *(_DWORD *)(a1 + 76) || *(_DWORD *)i != *(_DWORD *)(a1 + 80) ||
       *((_DWORD *)i + 134) == 1 && *(_DWORD *)(a1 + 616) == 1 &&
           (i[580] != *(_BYTE *)(a1 + 660) || i[581] != *(_BYTE *)(a1 + 661) ||
            i[582] != *(_BYTE *)(a1 + 662) || i[583] != *(_BYTE *)(a1 + 663) ||
            i[584] != *(_BYTE *)(a1 + 664) || i[585] != *(_BYTE *)(a1 + 665) ||
            i[586] != *(_BYTE *)(a1 + 666) || i[587] != *(_BYTE *)(a1 + 667));
       i += 696) {
    if (++v1 >= (unsigned int)dword_105553F0)
      return -1;
  }
  return v1;
}
// 105553F0: using guessed type int dword_105553F0;

//----- (10028720) --------------------------------------------------------
int *__cdecl sub_10028720(int *a1, int *a2, int a3, int a4) {
  int *v4;     // ecx
  int *result; // eax
  int v6;      // eax
  int v7;      // eax
  int v8;      // eax

  switch (a3) {
  case 0:
    v4 = a1;
    *a1 = 256;
    break;
  case 1:
    v4 = a1;
    *a1 = 128;
    break;
  case 2:
    v4 = a1;
    *a1 = 64;
    break;
  case 3:
    v4 = a1;
    *a1 = 32;
    break;
  case 4:
    v4 = a1;
    *a1 = 16;
    break;
  case 5:
    v4 = a1;
    *a1 = 8;
    break;
  case 6:
    v4 = a1;
    *a1 = 4;
    break;
  case 7:
    v4 = a1;
    *a1 = 2;
    break;
  default:
    v4 = a1;
    *a1 = 1;
    break;
  }
  result = (int *)a4;
  switch (a4) {
  case 0:
    result = (int *)(*v4 / 8);
    *a2 = (int)result;
    break;
  case 1:
    result = (int *)(*v4 / 4);
    *a2 = (int)result;
    break;
  case 2:
    result = (int *)(*v4 / 2);
    *a2 = (int)result;
    break;
  case 3:
    result = a2;
    *a2 = *v4;
    break;
  case 4:
    v6 = *v4;
    *a2 = *v4;
    result = (int *)(v6 / 2);
    *v4 = (int)result;
    break;
  case 5:
    v7 = *v4;
    *a2 = *v4;
    result = (int *)(v7 / 4);
    *v4 = (int)result;
    break;
  case 6:
    v8 = *v4;
    *a2 = *v4;
    result = (int *)(v8 / 8);
    *v4 = (int)result;
    break;
  default:
    return result;
  }
  return result;
}

//----- (10028860) --------------------------------------------------------
unsigned __int8 *__cdecl sub_10028860(#506 * a1) {
  int v1;                  // edx
  unsigned __int8 *result; // eax
  unsigned __int8 *v3;     // edi
  int v4;                  // eax
  int v5;                  // eax

  v1 = *((_DWORD *)a1 + 153);
  if ((v1 & 0x40) != 0) {
    dword_105553F8 = *((_DWORD *)a1 + 168);
    result = (unsigned __int8 *)*((_DWORD *)a1 + 19);
  } else {
    v3 = byte_11829870;
    if (*((_DWORD *)a1 + 155)) {
      result = (unsigned __int8 *)*((_DWORD *)a1 + *((_DWORD *)a1 + 158) + 160);
      if (!result)
        result = (unsigned __int8 *)*((_DWORD *)a1 + 160);
      dword_105553F8 = *((_DWORD *)a1 + 164);
    } else {
      if ((v1 & 0x10) == 0)
        sub_10025AB0(byte_11829870,
                     *((_DWORD *)a1 + 168),
                     *((_DWORD *)a1 + 16 * *((_DWORD *)a1 + 23) + 26),
                     *((_DWORD *)a1 + 19),
                     *((_DWORD *)a1 + 20),
                     *((_DWORD *)a1 + 16 * *((_DWORD *)a1 + 23) + 25),
                     *((_DWORD *)a1 + 21),
                     *((_DWORD *)a1 + 22),
                     *((_DWORD *)a1 + 23),
                     *((_DWORD *)a1 + 24),
                     (_DWORD *)a1 + 25,
                     v1,
                     *((_DWORD *)a1 + 154),
                     *((_BYTE *)a1 + 660),
                     *((_BYTE *)a1 + 661),
                     *((_BYTE *)a1 + 662),
                     *((_BYTE *)a1 + 663),
                     *((_BYTE *)a1 + 664),
                     *((_BYTE *)a1 + 665),
                     *((_BYTE *)a1 + 666),
                     *((_BYTE *)a1 + 667),
                     *((_DWORD *)a1 + 167));
      dword_105553F8 = *((_DWORD *)a1 + 168);
      v4 = *((_DWORD *)a1 + 153);
      if ((v4 & 2) != 0 && (v4 & 0x80u) != 0) {
        *((_DWORD *)a1 + 6) = *((_DWORD *)a1 + 7);
        sub_10028A10((int)a1, (int *)byte_11829870);
      }
      if (*((_DWORD *)a1 + 169) != *((_DWORD *)a1 + 2) ||
          *((_DWORD *)a1 + 170) != *((_DWORD *)a1 + 3)) {
        v5 = sub_10028B20((int)&unk_104D51D0, COERCE_FLOAT(byte_11829870), (int)a1);
        *((_DWORD *)a1 + 16) = v5;
        dword_105553F8 = v5;
        v3 = (unsigned __int8 *)&unk_104D51D0;
      }
      if (*((_DWORD *)a1 + 15))
        dword_105553F8 =
            (int)sub_10009660(v3, v3, *((_DWORD *)a1 + 16), *((_DWORD *)a1 + 4), (int *)a1 + 15);
      else
        dword_105553F8 = (int)graphics_100098A0(v3, v3, *((_DWORD *)a1 + 16), *((_DWORD *)a1 + 4));
      result = v3;
    }
  }
  return result;
}
// 105553F8: using guessed type int dword_105553F8;

//----- (10028A10) --------------------------------------------------------
int __cdecl sub_10028A10(int a1, int *a2) {
  int v2;     // esi
  int *v3;    // edi
  int result; // eax
  int v5;     // ebp
  int v6;     // [esp+Ch] [ebp-8h]
  int v7;     // [esp+10h] [ebp-4h]
  _DWORD *v8; // [esp+1Ch] [ebp+8h]

  v2 = a1;
  v3 = a2;
  math_10025350((int)&unk_104D51D0,
                *(_DWORD *)(a1 + 676),
                *(_DWORD *)(a1 + 680),
                COERCE_FLOAT(&a2[*(_DWORD *)(a1 + 680) * *(_DWORD *)(a1 + 676)]),
                *(_DWORD *)(a1 + 676) / 2,
                *(_DWORD *)(a1 + 680) / 2);
  result = *(_DWORD *)(a1 + 680);
  v8 = &unk_104D51D0;
  v6 = 0;
  if (result > 0) {
    do {
      v5 = 0;
      if (*(int *)(v2 + 676) > 0) {
        do {
          v7 = *v3++;
          v2 = a1;
          *(v3 - 1) = v7 & 0xFF000000 | (*v8 * (unsigned int)(unsigned __int8)v7 / 0xF) |
                      (((*v8 * (unsigned int)BYTE1(v7) / 0xF) |
                        ((*v8 * (unsigned int)BYTE2(v7) / 0xF) << 8))
                       << 8);
          ++v5;
          ++v8;
        } while (v5 < *(_DWORD *)(a1 + 676));
      }
      result = ++v6;
    } while (v6 < *(_DWORD *)(v2 + 680));
  }
  return result;
}

//----- (10028B20) --------------------------------------------------------
int __cdecl sub_10028B20(int a1, float a2, int a3) {
  int v4;    // eax
  int v5;    // edi
  int v6;    // ebx
  int v7;    // ebp
  int v8;    // ecx
  int v9;    // eax
  float v10; // edx
  int v12;   // [esp+10h] [ebp-Ch]
  int v13;   // [esp+14h] [ebp-8h]
  int v14;   // [esp+18h] [ebp-4h]
  int v15;   // [esp+28h] [ebp+Ch]

  v12 = 0;
  v4 = _RTC_NumErrors();
  v5 = *(_DWORD *)(a3 + 676);
  v6 = *(_DWORD *)(a3 + 680);
  v7 = *(_DWORD *)(a3 + 8);
  v13 = v4;
  v15 = *(_DWORD *)(a3 + 12);
  v8 = *(_DWORD *)(a3 + 96);
  *(_DWORD *)(a3 + 72) = v6;
  *(_DWORD *)(a3 + 68) = v5;
  v14 = dword_1057544C;
  if (dword_1057544C < v8) {
    do {
      math_10025350(a1, v7, v15, a2, v5, v6);
      v9 = v13 * v7 * v15;
      v12 += v9;
      a1 += v9;
      LODWORD(v10) = v13 * v5 * v6 + LODWORD(a2);
      v7 >>= 1;
      v15 >>= 1;
      v5 >>= 1;
      v6 >>= 1;
      a2 = v10;
      ++v14;
    } while (v14 < *(_DWORD *)(a3 + 96));
  }
  return v12;
}
// 1057544C: using guessed type int dword_1057544C;

//----- (10028BF0) --------------------------------------------------------
int __cdecl graphics_10028BF0(int a1,
                              int a2,
                              int a3,
                              int a4,
                              int a5,
                              int a6,
                              int a7,
                              int a8,
                              int a9,
                              int a10,
                              int a11,
                              int a12,
                              int a13,
                              int a14) {
  int v14; // ebx
  int v15; // eax

  v14 = 1 << sub_10027C00(a3);
  v15 = sub_10028C70(a5);
  return graphics_dword_118AA0AC(
      a1, a2, a3, a4, 8 * (v14 / v15), a5, a6, a7, a8, a9, a10, a11, a12, a13, a14);
}
// 118AA0AC: using guessed type int (__cdecl *graphics_dword_118AA0AC)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10028C70) --------------------------------------------------------
int __cdecl sub_10028C70(int a1) {
  switch (a1) {
  case 0:
    return 16;
  case 1:
    return 8;
  case 2:
    return 4;
  }
  return 2;
}

//----- (10028CA0) --------------------------------------------------------
void *__cdecl graphics_10028CA0(int a1) {
  void *result; // eax
  int v2;       // esi
  int v3;       // edx
  int v4;       // ecx
  int v5;       // edx

  result = (void *)dword_104D51B8;
  if (a1 != dword_104D51B8) {
    v2 = 696 * a1;
    g_D3DDevice2->lpVtbl->SetRenderState(
        g_D3DDevice2,
        (D3DRENDERSTATETYPE)1,
        *(_DWORD *)(*((_DWORD *)Block + *((_DWORD *)dword_1057543C + 174 * a1)) + 12));
    result = dword_1057543C;
    if (*((_DWORD *)dword_1057543C + 174 * a1 + 10) == 1) {
      dword_10277398 = 3;
      v3 = dword_10277370;
      if (dword_10277418 == 3) {
        BYTE1(v3) = BYTE1(dword_10277370) & 0xFE;
        goto LABEL_8;
      }
    } else {
      dword_10277398 = 1;
      v3 = dword_10277370;
      if (dword_10277418 == 1) {
        BYTE1(v3) = BYTE1(dword_10277370) & 0xFE;
        goto LABEL_8;
      }
    }
    BYTE1(v3) |= 1u;
  LABEL_8:
    dword_10277370 = v3;
    if (*(_DWORD *)((char *)dword_1057543C + v2 + 44) == 1) {
      dword_1027739C = 3;
      v4 = dword_10277370;
      if (dword_1027741C == 3) {
        BYTE1(v4) = BYTE1(dword_10277370) & 0xFD;
      LABEL_14:
        dword_10277370 = v4;
        flt_118AA08C = *(float *)((char *)dword_1057543C + v2 + 688);
        flt_118AA090 = *(float *)((char *)dword_1057543C + v2 + 692);
        dword_118AA080 = *(_DWORD *)((char *)dword_1057543C +
                                     64 * *(_DWORD *)((char *)dword_1057543C + v2 + 96) + v2 + 152);
        dword_11829838 = *(_DWORD *)((char *)dword_1057543C +
                                     64 * *(_DWORD *)((char *)dword_1057543C + v2 + 96) + v2 + 156);
        dword_1182983C = *(_DWORD *)((char *)dword_1057543C +
                                     64 * *(_DWORD *)((char *)dword_1057543C + v2 + 96) + v2 + 160);
        v5 = *(_DWORD *)((char *)dword_1057543C +
                         64 * *(_DWORD *)((char *)dword_1057543C + v2 + 96) + v2 + 164);
        dword_104D51B8 = a1;
        dword_118A9870 = v5;
        return result;
      }
    } else {
      dword_1027739C = 1;
      v4 = dword_10277370;
      if (dword_1027741C == 1) {
        BYTE1(v4) = BYTE1(dword_10277370) & 0xFD;
        goto LABEL_14;
      }
    }
    BYTE1(v4) |= 2u;
    goto LABEL_14;
  }
  return result;
}
// 10277370: using guessed type int dword_10277370;
// 10277398: using guessed type int dword_10277398;
// 1027739C: using guessed type int dword_1027739C;
// 10277418: using guessed type int dword_10277418;
// 1027741C: using guessed type int dword_1027741C;
// 104D51B8: using guessed type int dword_104D51B8;
// 11829838: using guessed type int dword_11829838;
// 1182983C: using guessed type int dword_1182983C;
// 118A9870: using guessed type int dword_118A9870;
// 118AA080: using guessed type int dword_118AA080;
// 118AA08C: using guessed type float flt_118AA08C;
// 118AA090: using guessed type float flt_118AA090;

//----- (10028E00) --------------------------------------------------------
BOOL __cdecl sub_10028E00(LONG a1, char *a2) {
  LONG v2;     // ecx
  BOOL result; // eax
  int v4;      // esi
  LONG v5;     // [esp+0h] [ebp-4h] BYREF

  v5 = v2;
  result = a1;
  if (a1 != dword_105553E4) {
    v4 = 696 * a1;
    sub_10028720(&v5,
                 &a1,
                 *((_DWORD *)dword_1057543C + 174 * a1 + 8),
                 *((_DWORD *)dword_1057543C + 174 * a1 + 9));
    result = meth_graphics_10009ED0(
        *((void **)Block + *(_DWORD *)((char *)dword_1057543C + v4)), a2, v5, a1);
  }
  return result;
}
// 10028E00: variable 'v2' is possibly undefined
// 105553E4: using guessed type int dword_105553E4;

//----- (10028E70) --------------------------------------------------------
unsigned __int8 *__cdecl sub_10028E70(int a1, _DWORD *a2) {
  _DWORD *v2;              // esi
  unsigned __int8 *v3;     // edi
  int v4;                  // ebx
  int v5;                  // ecx
  int v6;                  // eax
  int v7;                  // edx
  int v8;                  // ecx
  int v9;                  // eax
  unsigned __int8 *result; // eax
  int v11;                 // [esp+Ch] [ebp-Ch] BYREF
  int v12;                 // [esp+10h] [ebp-8h] BYREF
  int v13;                 // [esp+14h] [ebp-4h] BYREF

  v2 = (char *)dword_1057543C + 696 * a1 + 4;
  if (*((_DWORD *)dword_1057543C + 174 * a1 + 156)) {
    v3 = byte_11829870;
    v4 = car_10060F70(*((_DWORD *)dword_1057543C + 174 * a1 + 157),
                      *((_DWORD *)dword_1057543C + 174 * a1 + 158),
                      *((_DWORD *)dword_1057543C + 174 * a1 + 159));
    if (!v4)
      goto LABEL_17;
    car_10060FB0(v2[156], v2[157], &v13, &a1, &v12, &v11);
    v5 = v13;
    v6 = a1;
    if (!v13 && !a1 && !v12 && !v11) {
      v5 = 0;
      v6 = 2 * v2[169];
      v7 = 2 * v2[170];
      v13 = 0;
      a1 = v6;
      v12 = 0;
      v11 = v7;
    }
    if (car_10061480(v4, v5, v6, v12, v11, (int)byte_11829870, 2 * v2[169], 2 * v2[170])) {
      v8 = v2[2];
      v9 = 2 * v2[169];
      if (v9 != v8 || 2 * v2[170] != v2[3]) {
        math_10025350((int)&unk_104D51D0, v8, v2[3], COERCE_FLOAT(byte_11829870), v9, 2 * v2[170]);
        v3 = (unsigned __int8 *)&unk_104D51D0;
      }
      dword_105553F8 = v2[168];
      if (v2[15])
        dword_105553F8 = (int)sub_10009660(v3, v3, v2[16], v2[4], v2 + 15);
      else
        dword_105553F8 = (int)graphics_100098A0(v3, v3, v2[16], v2[4]);
      result = v3;
      *a2 = dword_105553F8;
    } else {
    LABEL_17:
      result = (unsigned __int8 *)a1;
      *a2 = dword_105553F8;
    }
  } else {
    result = sub_10028860((#506 *)((char *)dword_1057543C + 696 * a1 + 4));
    *a2 = dword_105553F8;
  }
  return result;
}
// 105553F8: using guessed type int dword_105553F8;

//----- (10029060) --------------------------------------------------------
int __cdecl sub_10029060(int a1) {
  unsigned __int8 *v1; // eax

  v1 = sub_10028860((#506 *)((char *)dword_1057543C + 696 * a1 + 4));
  return dword_118AA0B8(a1, v1);
}
// 10029060: using guessed type int __cdecl sub_10029060(int);
// 118AA0B8: using guessed type int (__cdecl *dword_118AA0B8)(_DWORD, _DWORD);

//----- (100290A0) --------------------------------------------------------
int *__cdecl sub_100290A0(int *a1, int *a2, int a3) {
  return sub_10028720(a1,
                      a2,
                      *((_DWORD *)dword_1057543C + 174 * a3 + 8),
                      *((_DWORD *)dword_1057543C + 174 * a3 + 9));
}

//----- (100290E0) --------------------------------------------------------
void __cdecl sub_100290E0(_DWORD *a1) {
  _DWORD *v1; // esi

  v1 = a1;
  if (a1) {
    dword_1057544C = 0;
    dword_10575430 = 0;
    dword_10575448 = 0;
    dword_104D51AC = 0;
    dword_10575438 = 0;
    while (2) {
      switch ((char)HIBYTE(*v1)) {
      case 4:
      case -79:
      case -65:
        sub_10029410((int)v1);
        v1 += 2;
        continue;
      case -72:
        return;
      case -71:
        sub_1002A1A0(v1);
        sub_10029E60((int)v1);
        v1 += 2;
        continue;
      case -70:
        sub_1002A210(v1);
        v1 += 2;
        continue;
      case -69:
        sub_10029E80(v1);
        v1 += 2;
        continue;
      case -26:
        sub_10029F80();
        v1 += 2;
        continue;
      case -25:
        sub_1002A000();
        v1 += 2;
        continue;
      case -24:
        sub_1002A020();
        v1 += 2;
        continue;
      case -16:
        sub_10029F10(v1);
        v1 += 2;
        continue;
      case -14:
        sub_1002A140(v1);
        v1 += 2;
        continue;
      case -13:
        sub_10029FA0(v1);
        v1 += 2;
        continue;
      case -11:
        sub_1002A040(v1);
        v1 += 2;
        continue;
      case -6:
        byte_10555400 = HIBYTE(v1[1]);
        byte_10575410 = BYTE2(v1[1]);
        byte_105553D8 = BYTE1(v1[1]);
        byte_105551D0 = *((_BYTE *)v1 + 4);
        dword_10575444 = 1;
        v1 += 2;
        continue;
      case -5:
        byte_104D51B0 = HIBYTE(v1[1]);
        byte_105551D4 = BYTE2(v1[1]);
        byte_104D51A8 = BYTE1(v1[1]);
        byte_104C51A0 = *((_BYTE *)v1 + 4);
        dword_10575440 = 1;
        v1 += 2;
        continue;
      case -4:
        if (*v1 == -61800956 && v1[1] == 1073607672) {
          dword_10575448 = 1;
          v1 += 2;
        } else {
          dword_10575448 = 0;
          v1 += 2;
        }
        continue;
      case -3:
        sub_10029EB0(v1);
        v1 += 2;
        continue;
      default:
        sub_10029E60((int)v1);
        v1 += 2;
        continue;
      }
    }
  }
}
// 104C51A0: using guessed type char byte_104C51A0;
// 104D51A8: using guessed type char byte_104D51A8;
// 104D51AC: using guessed type int dword_104D51AC;
// 104D51B0: using guessed type char byte_104D51B0;
// 105551D0: using guessed type char byte_105551D0;
// 105551D4: using guessed type char byte_105551D4;
// 105553D8: using guessed type char byte_105553D8;
// 10555400: using guessed type char byte_10555400;
// 10575410: using guessed type char byte_10575410;
// 10575430: using guessed type int dword_10575430;
// 10575438: using guessed type int dword_10575438;
// 10575440: using guessed type int dword_10575440;
// 10575444: using guessed type int dword_10575444;
// 10575448: using guessed type int dword_10575448;
// 1057544C: using guessed type int dword_1057544C;

//----- (10029410) --------------------------------------------------------
int __cdecl sub_10029410(int a1) {
  int result; // eax
  int v2;     // ecx

  result = dword_104D51AC;
  if (dword_104D51AC) {
    if (!dword_10575438)
      dword_10575438 = a1;
    result = sub_10029470();
    if (result != -1) {
      v2 = dword_105553FC;
      result = result & 0xFFFFFF | 0xDC000000;
      *(_DWORD *)dword_105553FC = result;
      *(_DWORD *)(v2 + 4) = (dword_10575438 - dword_105553FC) >> 3;
    }
    dword_104D51AC = 0;
  }
  return result;
}
// 104D51AC: using guessed type int dword_104D51AC;
// 105553FC: using guessed type int dword_105553FC;
// 10575438: using guessed type int dword_10575438;

//----- (10029470) --------------------------------------------------------
int sub_10029470() {
  int result;               // eax
  int v1;                   // esi
  int v2;                   // edi
  int v3;                   // ecx
  int v4;                   // ebp
  int v5;                   // ebx
  int v6;                   // ecx
  int *v7;                  // edx
  int v8;                   // edx
  int v9;                   // ebp
  int v10;                  // edi
  int v11;                  // esi
  bool v12;                 // zf
  int v13;                  // ebp
  int v14;                  // ecx
  int v15;                  // ecx
  int v16;                  // esi
  BOOL v17;                 // ebp
  int v18;                  // eax
  int v19;                  // edi
  int v20;                  // esi
  unsigned int v21;         // edx
  int v22;                  // ecx
  int v23;                  // eax
  int v24;                  // eax
  int v25;                  // eax
  int v26;                  // eax
  unsigned __int8 *v27;     // eax
  int v28;                  // esi
  int v29;                  // eax
  __int16 v30;              // bp
  __int16 v31;              // bx
  unsigned __int8 *v32;     // edi
  unsigned int v33;         // eax
  unsigned __int8 *v34;     // edi
  unsigned int v35;         // eax
  unsigned int v36;         // eax
  int v37;                  // [esp+4h] [ebp-2B8h] BYREF
  int v38;                  // [esp+8h] [ebp-2B4h] BYREF
  unsigned int v39;         // [esp+Ch] [ebp-2B0h]
  int a1;                   // [esp+10h] [ebp-2ACh] BYREF
  char v41;                 // [esp+14h] [ebp-2A8h]
  int a2;                   // [esp+18h] [ebp-2A4h] BYREF
  int a3[3];                // [esp+1Ch] [ebp-2A0h] BYREF
  DWORD v44;                // [esp+28h] [ebp-294h] BYREF
  DWORD outExponent;        // [esp+2Ch] [ebp-290h] BYREF
  int v46;                  // [esp+30h] [ebp-28Ch] BYREF
  BOOL v47;                 // [esp+34h] [ebp-288h]
  BOOL v48;                 // [esp+38h] [ebp-284h]
  int v49;                  // [esp+3Ch] [ebp-280h]
  int v50;                  // [esp+40h] [ebp-27Ch]
  int v51;                  // [esp+44h] [ebp-278h]
  int v52;                  // [esp+48h] [ebp-274h]
  int v53;                  // [esp+4Ch] [ebp-270h]
  unsigned int elementSize; // [esp+50h] [ebp-26Ch]
  int v55;                  // [esp+54h] [ebp-268h]
  int v56;                  // [esp+58h] [ebp-264h]
  int v57;                  // [esp+5Ch] [ebp-260h]
  __int16 *v58;             // [esp+60h] [ebp-25Ch]
  unsigned int v59;         // [esp+64h] [ebp-258h]
  int v60;                  // [esp+68h] [ebp-254h]
  int v61;                  // [esp+6Ch] [ebp-250h]
  int v62;                  // [esp+70h] [ebp-24Ch]
  char v63[512];            // [esp+74h] [ebp-248h] BYREF
  int v64;                  // [esp+274h] [ebp-48h]
  int v65;                  // [esp+278h] [ebp-44h]
  int v66;                  // [esp+27Ch] [ebp-40h]
  int v67;                  // [esp+28Ch] [ebp-30h]
  char v68;                 // [esp+2A4h] [ebp-18h]
  char v69;                 // [esp+2A5h] [ebp-17h]
  char v70;                 // [esp+2A6h] [ebp-16h]
  char v71;                 // [esp+2A7h] [ebp-15h]
  char v72;                 // [esp+2A8h] [ebp-14h]
  char v73;                 // [esp+2A9h] [ebp-13h]
  char v74;                 // [esp+2AAh] [ebp-12h]
  char v75;                 // [esp+2ABh] [ebp-11h]
  int v76;                  // [esp+2ACh] [ebp-10h]
  unsigned int v77;         // [esp+2B0h] [ebp-Ch]
  int v78;                  // [esp+2B4h] [ebp-8h]
  int v79;                  // [esp+2B8h] [ebp-4h]

  v65 = dword_10575448;
  v57 = dword_104C51A4;
  v58 = (__int16 *)dword_10575434;
  v70 = byte_104D51A8;
  v68 = byte_104D51B0;
  v69 = byte_105551D4;
  v73 = byte_10575410;
  v71 = byte_104C51A0;
  v72 = byte_10555400;
  v66 = 0;
  v74 = byte_105553D8;
  v75 = byte_105551D0;
  result = sub_10028630((int)&a1);
  if (result != -1)
    return result;
  v1 = dword_10575430;
  v61 = dword_1057544C;
  if (dword_10575430 < dword_1057544C) {
    v1 = dword_1057544C;
    dword_10575430 = dword_1057544C;
  }
  a1 = 0;
  v2 = dword_105551F8[16 * dword_1057544C];
  v41 = 3;
  v3 = dword_105551FC[16 * dword_1057544C];
  v4 = 1 << v3;
  a2 = 1 << v2;
  v55 = 1 << v2;
  a3[0] = 1 << v3;
  v56 = 1 << v3;
  if (v1 > dword_1057544C) {
    v5 = v3;
    v6 = dword_1057544C + 1;
    if (dword_1057544C + 1 <= v1) {
      v7 = &dword_105551FC[16 * v6];
      while (*(v7 - 1) == --v2) {
        if (*v7 != --v5)
          break;
        ++v6;
        v7 += 16;
        if (v6 > v1)
          goto LABEL_12;
      }
      dword_10575430 = v6 - 1;
    }
  }
LABEL_12:
  v8 = dword_105551F0[16 * dword_1057544C];
  v39 = dword_105551E8[16 * dword_1057544C];
  v37 = v8;
  if (v39)
    a2 *= 2;
  if (v8)
    a3[0] = 2 * v4;
  a3[1] = sub_10027B90(
      dword_105551DC[16 * dword_1057544C], dword_105551D8[16 * dword_1057544C], dword_10575448);
  v44 = 8;
  outExponent = 8;
  a3[2] = 2;
  v9 = dword_105551F4[16 * v61];
  v10 = dword_10555208[16 * v61];
  v11 = dword_10555214[16 * v61];
  v12 = dword_105551EC[16 * v61] == 0;
  v46 = 3;
  v47 = !v12;
  v12 = v9 == 0;
  v13 = dword_1055520C[16 * v61];
  v14 = dword_10555210[16 * v61] - v10;
  v48 = !v12;
  v15 = (v14 + 4) >> 2;
  v16 = (v11 - v13 + 4) >> 2;
  if (v15 != v55) {
    if (v15 == a2) {
      v55 = v15;
    } else if (v15 > a2 && a2 * (v15 / a2) == v15) {
      v47 = 0;
    }
  }
  if (v16 != v56) {
    if (v16 == a3[0]) {
      v56 = v16;
    } else if (v16 > a3[0] && a3[0] * (v16 / a3[0]) == v16) {
      v48 = 0;
    }
  }
  math_pow2ExponentToAdd(&outExponent, a2, a3[0]);
  v17 = sub_10028200(&v46, a2, a3[0]) == 0;
  math_pow2ExponentToAdd(
      &v44, a2 >> (dword_10575430 - dword_1057544C), a3[0] >> (dword_10575430 - dword_1057544C));
  if (dword_100B8C90 > 1) {
    v44 = outExponent;
    dword_10575430 = dword_1057544C;
  }
  v49 = 1;
  v50 = 1;
  v51 = -1073741824;
  v52 = 0;
  v18 = sub_10029E10(v44, outExponent, v46);
  if (v18 > 0x80000)
    v18 = 0x80000;
  elementSize = v18;
  qmemcpy(v63, dword_105551D8, sizeof(v63));
  v19 = a2;
  v20 = a3[0];
  v62 = dword_10575430 + 1;
  v59 = v39;
  v60 = v37;
  v76 = 1;
  v78 = a2;
  v79 = a3[0];
  v55 = a2;
  v56 = a3[0];
  if ((dword_118AA088 & 2) == 0 || dword_100AC300) {
    dword_100A7DF4 = dword_100A7E04;
    dword_100A7DF8 = dword_100A7E08;
  } else {
    dword_100A7DF4 = dword_100A7DFC;
    dword_100A7DF8 = dword_100A7E00;
  }
  v21 = g_HWCaps.dwMaxTextureWidth;
  if (v17 || v39 || v37 || gD3DAlwaysSquareTextures ||
      (g_HWCaps.dpcTriCaps.dwTextureCaps & 0x20) != 0 ||
      (g_HELCaps.dpcTriCaps.dwTextureCaps & 0x20) != 0 ||
      g_HWCaps.dwMaxTextureWidth && a2 > g_HWCaps.dwMaxTextureWidth ||
      g_HWCaps.dwMaxTextureHeight && a3[0] > g_HWCaps.dwMaxTextureHeight || a2 > dword_100A7DF4 ||
      a3[0] > dword_100A7DF8) {
    v22 = a2;
    v23 = a3[0];
    v38 = a2;
    v37 = a3[0];
    if (v39 && dword_100B8C90 > 1) {
      v38 = a2 / 2;
      math_pow2ExponentToAdd(&outExponent, a2 / 2, a3[0]);
      v24 = sub_10028200(&v46, v38, v37);
      v20 = a3[0];
      v19 = a2;
      v21 = g_HWCaps.dwMaxTextureWidth;
      v17 = v24 == 0;
      v22 = v38;
      v44 = dword_10575430 + outExponent - dword_1057544C;
      v23 = v37;
    }
    if (v60 && dword_100B8C90 > 1) {
      v37 = v23 / 2;
      math_pow2ExponentToAdd(&outExponent, v22, v23 / 2);
      v25 = sub_10028200(&v46, v38, v37);
      v20 = a3[0];
      v19 = a2;
      v22 = v38;
      v17 = v25 == 0;
      v23 = v37;
      v44 = dword_10575430 + outExponent - dword_1057544C;
      v21 = g_HWCaps.dwMaxTextureWidth;
    }
    if (!v17)
      goto LABEL_62;
    if (v19 < v20) {
      if (v20 > 1) {
        v20 /= 2;
        goto LABEL_60;
      }
    } else if (v19 > 1) {
      v19 /= 2;
    LABEL_60:
      math_pow2ExponentToAdd(&outExponent, v19, v20);
      sub_10028200(&v46, v19, v20);
      v44 = dword_10575430 + outExponent - dword_1057544C;
      goto LABEL_61;
    }
  LABEL_61:
    sub_10028720(&v38, &v37, outExponent, v46);
    v21 = g_HWCaps.dwMaxTextureWidth;
    v22 = v38;
    v23 = v37;
  LABEL_62:
    if (v21 && v22 > v21) {
      v38 = v21;
      math_pow2ExponentToAdd(&outExponent, v21, v23);
      sub_10028200(&v46, v38, v37);
      v22 = v38;
      v23 = v37;
      v44 = dword_10575430 + outExponent - dword_1057544C;
    }
    if (g_HWCaps.dwMaxTextureHeight && v23 > g_HWCaps.dwMaxTextureHeight) {
      v37 = g_HWCaps.dwMaxTextureHeight;
      math_pow2ExponentToAdd(&outExponent, v22, g_HWCaps.dwMaxTextureHeight);
      sub_10028200(&v46, v38, v37);
      v23 = v37;
      v44 = dword_10575430 + outExponent - dword_1057544C;
      v22 = v38;
    }
    if (v22 > dword_100A7DF4) {
      v38 = dword_100A7DF4;
      math_pow2ExponentToAdd(&outExponent, dword_100A7DF4, v23);
      sub_10028200(&v46, v38, v37);
      v22 = v38;
      v44 = dword_10575430 + outExponent - dword_1057544C;
      v23 = v37;
    }
    if (v23 > dword_100A7DF8) {
      v37 = dword_100A7DF8;
      math_pow2ExponentToAdd(&outExponent, v22, dword_100A7DF8);
      sub_10028200(&v46, v38, v37);
      v22 = v38;
      v23 = v37;
      v44 = dword_10575430 + outExponent - dword_1057544C;
    }
    if ((gD3DAlwaysSquareTextures || (g_HWCaps.dpcTriCaps.dwTextureCaps & 0x20) != 0 ||
         (g_HELCaps.dpcTriCaps.dwTextureCaps & 0x20) != 0) &&
        v22 != v23) {
      if (v22 < v23) {
        v22 = dword_100A7DF8;
        if (v23 < dword_100A7DF8) {
          v22 = v23;
        } else {
          v23 = dword_100A7DF8;
          v37 = dword_100A7DF8;
        }
        v38 = v22;
      } else {
        v23 = dword_100A7DF4;
        if (v22 < dword_100A7DF4) {
          v23 = v22;
          v37 = v22;
        } else {
          v22 = dword_100A7DF4;
          v37 = dword_100A7DF4;
          v38 = dword_100A7DF4;
        }
      }
      math_pow2ExponentToAdd(&outExponent, v22, v23);
      sub_10028200(&v46, v38, v37);
      v23 = v37;
      v44 = dword_10575430 + outExponent - dword_1057544C;
      v22 = v38;
    }
    a2 = v22;
    a3[0] = v23;
  }
  if (!dword_10575414 || (v53 = 1, gD3dalphacompar))
    v53 = 0;
  if (dword_100B8C90 > 1 && sub_10037930(v57, &a2, a3)) {
    math_pow2ExponentToAdd(&outExponent, a2, a3[0]);
    sub_10028200(&v46, a2, a3[0]);
    v44 = dword_10575430 + outExponent - dword_1057544C;
  }
  v64 = dword_118AA088;
  v77 = elementSize;
  if ((dword_118AA088 & 2) != 0 && v62 == 2) {
    v26 = v64;
    LOBYTE(v26) = v64 | 0x80;
    v64 = v26;
  }
  v27 = sub_10028860((#506 *)&a1);
  v28 = graphics_TIDFromTextureAppend(&a1, (int)v27);
  if (*((_DWORD *)dword_1057543C + 174 * v28 + 156)) {
    v29 = car_10061000();
    if (v29 >= 0 && v29 < 8)
      dword_11829850[v29] = v28;
  }
  if ((v64 & 2) != 0) {
    if (v66) {
      if (v67) {
        sub_10037030(v28);
        return v28;
      }
    } else if (sub_10037070((int)v58)) {
      v30 = *v58;
      v31 = v58[1];
      *v58 = -1;
      v58[1] = -1;
      v32 = sub_10028860((#506 *)&a1);
      dword_118AA0B8(v28, v32);
      v33 = CalculateChecksum(0, 0, 0);
      v39 = CalculateChecksum(v33, v32, elementSize);
      *v58 = v30;
      v58[1] = v31;
      v34 = sub_10028860((#506 *)&a1);
      dword_118AA0B8(v28, v34);
      v35 = CalculateChecksum(0, 0, 0);
      v36 = CalculateChecksum(v35, v34, elementSize);
      if (v36 != v39)
        sub_10037030(v28);
    }
  }
  return v28;
}
// 100A7DFC: using guessed type int dword_100A7DFC;
// 100A7E00: using guessed type int dword_100A7E00;
// 100A7E04: using guessed type int dword_100A7E04;
// 100A7E08: using guessed type int dword_100A7E08;
// 100AA720: using guessed type int gD3dalphacompar;
// 100AC300: using guessed type int dword_100AC300;
// 100B8C90: using guessed type int dword_100B8C90;
// 104C51A0: using guessed type char byte_104C51A0;
// 104C51A4: using guessed type int dword_104C51A4;
// 104D51A8: using guessed type char byte_104D51A8;
// 104D51B0: using guessed type char byte_104D51B0;
// 105551D0: using guessed type char byte_105551D0;
// 105551D4: using guessed type char byte_105551D4;
// 105551D8: using guessed type int dword_105551D8[];
// 105551DC: using guessed type int dword_105551DC[];
// 105551E8: using guessed type int dword_105551E8[];
// 105551EC: using guessed type int dword_105551EC[];
// 105551F0: using guessed type int dword_105551F0[];
// 105551F4: using guessed type int dword_105551F4[];
// 105551F8: using guessed type int dword_105551F8[];
// 105551FC: using guessed type int dword_105551FC[];
// 10555208: using guessed type int dword_10555208[];
// 1055520C: using guessed type int dword_1055520C[];
// 10555210: using guessed type int dword_10555210[];
// 105553D8: using guessed type char byte_105553D8;
// 10555400: using guessed type char byte_10555400;
// 10575410: using guessed type char byte_10575410;
// 10575414: using guessed type int dword_10575414;
// 10575420: using guessed type int gD3DAlwaysSquareTextures;
// 10575430: using guessed type int dword_10575430;
// 10575434: using guessed type int dword_10575434;
// 10575448: using guessed type int dword_10575448;
// 1057544C: using guessed type int dword_1057544C;
// 118AA088: using guessed type int dword_118AA088;
// 118AA0B8: using guessed type int (__cdecl *dword_118AA0B8)(_DWORD, _DWORD);

//----- (10029E10) --------------------------------------------------------
int __cdecl sub_10029E10(int a1, int a2, int a3) {
  int v3;     // esi
  int result; // eax
  int v5;     // edx
  int v6;     // esi
  int v7;     // ecx
  int v8;     // edi

  v3 = a2;
  sub_10028720(&a2, &a3, a2, a3);
  result = 0;
  if (a1 - v3 >= 0) {
    v5 = a3;
    v6 = a1 - v3 + 1;
    v7 = a2;
    do {
      v8 = v7 * v5;
      v7 >>= 1;
      v5 >>= 1;
      --v6;
      result += 4 * v8;
    } while (v6);
  }
  return result;
}

//----- (10029E60) --------------------------------------------------------
int __cdecl sub_10029E60(int a1) {
  int result; // eax

  result = dword_10575438;
  if (!dword_10575438) {
    result = a1;
    dword_10575438 = a1;
  }
  return result;
}
// 10575438: using guessed type int dword_10575438;

//----- (10029E80) --------------------------------------------------------
_DWORD *__cdecl sub_10029E80(_DWORD *a1) {
  _DWORD *result; // eax

  result = a1;
  dword_105553E8 = (*a1 >> 8) & 7;
  dword_105553E0 = (*a1 >> 11) & 7;
  return result;
}
// 105553E0: using guessed type int dword_105553E0;
// 105553E8: using guessed type int dword_105553E8;

//----- (10029EB0) --------------------------------------------------------
_DWORD *__cdecl sub_10029EB0(_DWORD *a1) {
  _DWORD *result; // eax

  if (!dword_104D51AC || dword_104D51AC == 3 || dword_104D51AC == 6) {
    result = a1;
    dword_104D51B4 = (*a1 >> 19) & 3;
    dword_104D51BC = a1[1];
    dword_10575434 = 0;
    if (!dword_104D51AC) {
      dword_105553FC = (int)a1;
      dword_10575438 = 0;
    }
    dword_104D51AC = 1;
  }
  return result;
}
// 104D51AC: using guessed type int dword_104D51AC;
// 104D51B4: using guessed type int dword_104D51B4;
// 104D51BC: using guessed type int dword_104D51BC;
// 105553FC: using guessed type int dword_105553FC;
// 10575434: using guessed type int dword_10575434;
// 10575438: using guessed type int dword_10575438;

//----- (10029F10) --------------------------------------------------------
void __cdecl sub_10029F10(_DWORD *a1) {
  unsigned int v1; // eax

  if (dword_104D51AC == 1) {
    v1 = 2 * (((a1[1] >> 12) & 0xFFF) - ((*a1 >> 12) & 0xFFF) + 1) *
         ((a1[1] & 0xFFF) - (*a1 & 0xFFF) + 1);
    dword_10575434 = dword_104D51BC;
    qmemcpy(off_100A7DF0, (const void *)dword_104D51BC, v1);
    dword_104D51AC = 7;
  }
}
// 100A7DF0: using guessed type void *off_100A7DF0;
// 104D51AC: using guessed type int dword_104D51AC;
// 104D51BC: using guessed type int dword_104D51BC;
// 10575434: using guessed type int dword_10575434;

//----- (10029F80) --------------------------------------------------------
void sub_10029F80() {
  if (dword_104D51AC == 1)
    dword_104D51AC = 2;
}
// 104D51AC: using guessed type int dword_104D51AC;

//----- (10029FA0) --------------------------------------------------------
void __cdecl sub_10029FA0(_DWORD *a1) {
  int v1; // ecx

  if (dword_104D51AC == 2) {
    v1 = ((a1[1] >> 12) & 0xFFF) - ((*a1 >> 12) & 0xFFF);
    dword_104C51A4 = dword_104D51BC;
    dword_105553EC = 2 * v1 + 2;
    qmemcpy(&unk_104C51A8, (const void *)dword_104D51BC, dword_105553EC);
    dword_104D51AC = 3;
  }
}
// 104C51A4: using guessed type int dword_104C51A4;
// 104D51AC: using guessed type int dword_104D51AC;
// 104D51BC: using guessed type int dword_104D51BC;
// 105553EC: using guessed type int dword_105553EC;

//----- (1002A000) --------------------------------------------------------
int sub_1002A000() {
  int result; // eax

  result = dword_104D51AC;
  if (dword_104D51AC) {
    if (dword_104D51AC == 7)
      dword_104D51AC = 8;
  }
  return result;
}
// 104D51AC: using guessed type int dword_104D51AC;

//----- (1002A020) --------------------------------------------------------
int sub_1002A020() {
  int result; // eax

  result = dword_104D51AC;
  if (dword_104D51AC == 3 || dword_104D51AC == 7)
    dword_104D51AC = 4;
  return result;
}
// 104D51AC: using guessed type int dword_104D51AC;

//----- (1002A040) --------------------------------------------------------
int __cdecl sub_1002A040(_DWORD *a1) {
  int v1;     // edx
  int v2;     // eax
  int result; // eax

  v1 = HIBYTE(a1[1]) & 7;
  v2 = v1 << 6;
  *(int *)((char *)&dword_105551D8 + v2) = (*a1 >> 21) & 7;
  *(int *)((char *)&dword_105551DC + v2) = (*a1 >> 19) & 3;
  *(int *)((char *)&dword_105551E0 + v2) = 8 * ((*a1 >> 9) & 0x1FF);
  *(int *)((char *)&dword_105551E4 + v2) = *a1 & 0x1FF;
  *(int *)((char *)&dword_105551E8 + v2) = (a1[1] >> 8) & 1;
  *(int *)((char *)&dword_105551EC + v2) = (a1[1] >> 9) & 1;
  *(int *)((char *)&dword_105551F0 + v2) = (a1[1] >> 18) & 1;
  *(int *)((char *)&dword_105551F4 + v2) = (a1[1] >> 19) & 1;
  *(int *)((char *)&dword_105551F8 + v2) = (a1[1] >> 4) & 0xF;
  *(int *)((char *)&dword_105551FC + v2) = (a1[1] >> 14) & 0xF;
  *(int *)((char *)&dword_10555200 + v2) = a1[1] & 0xF;
  *(int *)((char *)&dword_10555204 + v2) = (a1[1] >> 10) & 0xF;
  result = dword_104D51AC;
  if (dword_104D51AC == 3 || dword_104D51AC == 4 || dword_104D51AC == 7 || v1 > dword_10575430)
    dword_10575430 = v1;
  dword_104D51AC = 5;
  return result;
}
// 104D51AC: using guessed type int dword_104D51AC;
// 105551D8: using guessed type int dword_105551D8;
// 105551DC: using guessed type int dword_105551DC;
// 105551E0: using guessed type int dword_105551E0;
// 105551E4: using guessed type int dword_105551E4;
// 105551E8: using guessed type int dword_105551E8;
// 105551EC: using guessed type int dword_105551EC;
// 105551F0: using guessed type int dword_105551F0;
// 105551F4: using guessed type int dword_105551F4;
// 105551F8: using guessed type int dword_105551F8;
// 105551FC: using guessed type int dword_105551FC;
// 10555200: using guessed type int dword_10555200;
// 10555204: using guessed type int dword_10555204;
// 10575430: using guessed type int dword_10575430;

//----- (1002A140) --------------------------------------------------------
int __cdecl sub_1002A140(_DWORD *a1) {
  int result; // eax
  int v2;     // ecx

  result = (HIBYTE(a1[1]) & 7) << 6;
  *(int *)((char *)&dword_10555208 + result) = (*a1 >> 12) & 0xFFF;
  *(int *)((char *)&dword_1055520C + result) = *a1 & 0xFFF;
  *(int *)((char *)&dword_10555210 + result) = (a1[1] >> 12) & 0xFFF;
  v2 = a1[1] & 0xFFF;
  dword_104D51AC = 6;
  *(int *)((char *)&dword_10555214 + result) = v2;
  return result;
}
// 104D51AC: using guessed type int dword_104D51AC;
// 10555208: using guessed type int dword_10555208;
// 1055520C: using guessed type int dword_1055520C;
// 10555210: using guessed type int dword_10555210;
// 10555214: using guessed type int dword_10555214;

//----- (1002A1A0) --------------------------------------------------------
unsigned int __cdecl sub_1002A1A0(_DWORD *a1) {
  unsigned int result; // eax

  result = (unsigned int)a1;
  if ((*a1 & 0xFF00) == 768) {
    result = a1[1];
    switch (result) {
    case 0x504F50u:
      dword_10575414 = 0;
      break;
    case 0xC184240u:
      dword_10575414 = 0;
      break;
    case 0x504240u:
      dword_10575414 = 0;
      break;
    default:
      if (result && (result & 0x1800) != 0) {
        result = HIWORD(result) & 1;
        dword_10575414 = result;
      } else {
        dword_10575414 = 0;
      }
      break;
    }
  }
  return result;
}
// 10575414: using guessed type int dword_10575414;

//----- (1002A210) --------------------------------------------------------
int __cdecl sub_1002A210(_DWORD *a1) {
  int result; // eax

  result = *a1 & 0xFF00;
  if (result == 3584)
    return sub_1002A250((int)a1);
  if (result == 4352) {
    result = a1[1] == 0x40000;
    dword_1057544C = result;
  }
  return result;
}
// 1057544C: using guessed type int dword_1057544C;

//----- (1002A250) --------------------------------------------------------
int __cdecl sub_1002A250(int a1) {
  int result; // eax

  result = *(_DWORD *)(a1 + 4);
  if (result) {
    if (result == 0x8000) {
      dword_105553DC = 0;
    } else if (result == 49152) {
      dword_105553DC = 3;
    }
  }
  return result;
}
// 105553DC: using guessed type int dword_105553DC;

//----- (1002A280) --------------------------------------------------------
void __cdecl sub_1002A280(int a1, int a2) {
  unsigned int v2; // eax
  int v3;          // ecx
  int v4;          // edx
  char v5;         // al
  int v6;          // [esp-30h] [ebp-34h]
  int v7;          // [esp-2Ch] [ebp-30h]
  int v8;          // [esp-28h] [ebp-2Ch]
  unsigned int v9; // [esp-24h] [ebp-28h]
  int v10;         // [esp-20h] [ebp-24h]
  int v11;         // [esp-1Ch] [ebp-20h]
  int v12;         // [esp-18h] [ebp-1Ch]

  if (*(_DWORD *)a1) {
    v2 = *(_DWORD *)(a1 + 32);
    if ((v2 & 0x100000) == 0) {
      if ((v2 & 0xF000000) == 0x1000000) {
        v3 = 0;
        v4 = 2;
      } else if ((v2 & 0xF000000) == 0x4000000) {
        v3 = 1;
        v4 = 4;
      } else {
        v3 = 2;
        v4 = 0;
      }
      v12 = (v2 >> 28) & 1;
      v11 = (v2 >> 29) & 1;
      v10 = (v2 >> 30) & 1;
      v9 = v2 >> 31;
      v8 = v4;
      v7 = v3;
      v6 = 1 << sub_10027C00(*(unsigned __int16 *)(a1 + 14));
      v5 = sub_10027C00(*(unsigned __int16 *)(a1 + 12));
      *(_DWORD *)a1 = dword_118AA0B0(
          *(_DWORD *)a1, *(_DWORD *)(a1 + 4), 1 << v5, v6, v7, v8, v9, v10, v11, v12, 0, 0, 1, a2);
    }
  }
}
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (1002A350) --------------------------------------------------------
int __cdecl sub_1002A350(int a1, unsigned __int8 *a2, int a3) {
  unsigned __int8 *v3; // eax
  int result;          // eax
  int v5[171];         // [esp+8h] [ebp-2ACh] BYREF

  dword_118AA09C = 1;
  qmemcpy(v5, (char *)dword_1057543C + 696 * a1 + 4, sizeof(v5));
  v5[19] = (int)a2;
  v5[20] = a3;
  if (v5[155]) {
    v5[16] /= 4;
    v5[2] /= 2;
    v5[3] /= 2;
    math_pow2ExponentToAdd((DWORD *)&v5[7], v5[2], v5[3]);
    v5[6] = v5[7];
    v5[155] = 0;
  }
  v3 = sub_10028860((#506 *)v5);
  result = graphics_TIDFromTextureAppend(v5, (int)v3);
  dword_118AA09C = 0;
  return result;
}
// 118AA09C: using guessed type int dword_118AA09C;

//----- (1002A430) --------------------------------------------------------
int __cdecl sub_1002A430(int a1, int a2) {
  int result;           // eax
  unsigned int v3;      // edi
  _DWORD *v4;           // ebp
  int v5;               // ebx
  __int16 v6;           // si
  unsigned int v7;      // eax
  _DWORD *v8;           // ecx
  int v9;               // ebx
  int v10;              // ecx
  int v11;              // eax
  int v12;              // eax
  unsigned __int8 *v13; // eax
  int v14;              // [esp+0h] [ebp-2BCh]
  int v15;              // [esp+4h] [ebp-2B8h]
  int v16;              // [esp+8h] [ebp-2B4h]
  unsigned int v17;     // [esp+Ch] [ebp-2B0h]
  int v18[171];         // [esp+10h] [ebp-2ACh] BYREF

  result = a2;
  if (a2 > 0) {
    v3 = dword_105553F0;
    v4 = (_DWORD *)(a1 + 8);
    v15 = a2;
    do {
      v5 = *(v4 - 2);
      if (v5) {
        if ((v4[6] & 0x100000) != 0) {
          v6 = *(_WORD *)(*v4 + 2);
          if (v6 != 2 || *(_DWORD *)(*v4 + 8) != -1) {
              v7 = 0;
              if (v3) {
                  v8 = (char *)dword_1057543C + 80;
                  do {
                      if (*v8 == v5)
                          break;
                      ++v7;
                      v8 += 174;
                  } while (v7 < v3);
              }
              v14 = 0;
              if (v6) {
                  v9 = 12;
                  v10 = 696 * v7;
                  v16 = 696 * v7;
                  v17 = v7 << 16;
                  while (1) {
                      v11 = *v4;
                      qmemcpy(v18, (char *)dword_1057543C + v10 + 4, sizeof(v18));
                      v18[19] = dword_10690BEC + *(_DWORD *)(v11 + v9);
                      v12 = *(_DWORD *)(v11 + v9 + 4);
                      if (v12 > 0) {
                          v18[20] = dword_10690BEC + v12;
                          qmemcpy(off_100A7DF0, (const void *)(dword_10690BEC + v12), 0x200u);
                      }
                      dword_10575444 = 0;
                      dword_10575440 = 0;
                      v13 = sub_10028860((#506 *)v18);
                      *(_DWORD *)(v9 + *v4) = v17 | graphics_TIDFromTextureAppend(v18, (int)v13);
                      v9 += 12;
                      if (++v14 >= *(unsigned __int16 *)(*v4 + 2))
                          break;
                      v10 = v16;
                  }
                  v3 = dword_105553F0;
              }
          }
        }
      }
      v4 += 9;
      result = --v15;
    } while (v15);
  }
  return result;
}
// 1002A430: using guessed type int __cdecl sub_1002A430(int, int);
// 100A7DF0: using guessed type void *off_100A7DF0;
// 105553F0: using guessed type int dword_105553F0;
// 10575440: using guessed type int dword_10575440;
// 10575444: using guessed type int dword_10575444;
// 10690BEC: using guessed type int dword_10690BEC;

//----- (1002A5A0) --------------------------------------------------------
int sub_1002A5A0() {
  int result; // eax

  if (dword_11829844 <= (unsigned int)dword_11829848 || gD3DAlwaysSquareTextures) {
    dword_100B8C90 = 2;
    dword_100A7DFC = 64;
    dword_100A7E00 = 64;
    result = 32;
    dword_100A7E04 = 32;
    dword_100A7E08 = 32;
  } else {
    if ((unsigned int)gTotalPhys <= 0x2000000) {
      result = 256;
      dword_100B8C90 = 1;
    } else {
      dword_100B8C90 = (unsigned int)dword_11829844 < 0x3D0900;
      result = 256;
    }
    dword_100A7DFC = 256;
    dword_100A7E00 = 256;
    dword_100A7E04 = 256;
    dword_100A7E08 = 256;
  }
  return result;
}
// 100A7DFC: using guessed type int dword_100A7DFC;
// 100A7E00: using guessed type int dword_100A7E00;
// 100A7E04: using guessed type int dword_100A7E04;
// 100A7E08: using guessed type int dword_100A7E08;
// 100B8C90: using guessed type int dword_100B8C90;
// 1022B348: using guessed type int g_dwTotalPhys;
// 10575420: using guessed type int g_D3dalwayssquar;
// 11829844: using guessed type int dword_11829844;
// 11829848: using guessed type int dword_11829848;

//----- (1002A640) --------------------------------------------------------
HANDLE sub_1002A640() {
  dword_118AA0A4 = (int(__cdecl *)(_DWORD, _DWORD))sub_10024AB0;
  dword_118AA0A8 = (int(__cdecl *)(
      _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))graphics_10025830;
  graphics_dword_118AA0AC = (int(__cdecl *)(_DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD,
                                            _DWORD))tex_sub_10027C60;
  dword_118AA0B0 = graphics_10028BF0;
  dword_118AA0B4 = (int(__cdecl *)(_DWORD))graphics_10028CA0;
  dword_118AA0B8 = (int(__cdecl *)(_DWORD, _DWORD))sub_10028E00;
  dword_118AA0BC = (int(__cdecl *)(_DWORD, _DWORD))sub_10028E70;
  dword_118AA0C0 = sub_10029060;
  dword_118AA0C4 = (int(__cdecl *)(_DWORD))sub_100290E0;
  dword_118AA0C8 = (int(__cdecl *)(_DWORD, _DWORD))sub_1002A280;
  dword_118AA084 = (int(__cdecl *)(_DWORD, _DWORD, _DWORD))sub_1002A350;
  dword_118AA0CC = sub_1002A430;
  dword_118AA0D0 = (int (*)(void))sub_1002A7A0;
  dword_10575424 = 0;
  dword_10575428 = 0;
  free(Block);
  Block = 0;
  dword_11829844 = sub_1003E220();
  sub_1002A5A0();
  dword_104D51B8 = -1;
  dword_105553F0 = 0;
  dword_105553F4 = 0;
  free(dword_1057543C);
  dword_1057543C = 0;
  dword_105553E8 = 0;
  dword_105553E0 = 0;
  dword_10575414 = 0;
  sub_1002A740();
  return sub_10074F20();
}
// 10029060: using guessed type int __cdecl sub_10029060(int);
// 1002A430: using guessed type int __cdecl sub_1002A430(int, int);
// 104D51B8: using guessed type int dword_104D51B8;
// 105553E0: using guessed type int dword_105553E0;
// 105553E8: using guessed type int dword_105553E8;
// 105553F0: using guessed type int dword_105553F0;
// 105553F4: using guessed type int dword_105553F4;
// 10575414: using guessed type int dword_10575414;
// 10575424: using guessed type int dword_10575424;
// 10575428: using guessed type int dword_10575428;
// 11829844: using guessed type int dword_11829844;
// 118AA084: using guessed type int (__cdecl *dword_118AA084)(_DWORD, _DWORD, _DWORD);
// 118AA0A4: using guessed type int (__cdecl *dword_118AA0A4)(_DWORD, _DWORD);
// 118AA0A8: using guessed type int (__cdecl *dword_118AA0A8)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 118AA0AC: using guessed type int (__cdecl *tex_sub_dword_118AA0AC)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 118AA0B4: using guessed type int (__cdecl *dword_118AA0B4)(_DWORD);
// 118AA0B8: using guessed type int (__cdecl *dword_118AA0B8)(_DWORD, _DWORD);
// 118AA0BC: using guessed type int (__cdecl *dword_118AA0BC)(_DWORD, _DWORD);
// 118AA0C0: using guessed type int (__cdecl *dword_118AA0C0)(_DWORD);
// 118AA0C4: using guessed type int (__cdecl *dword_118AA0C4)(_DWORD);
// 118AA0C8: using guessed type int (__cdecl *dword_118AA0C8)(_DWORD, _DWORD);
// 118AA0CC: using guessed type int (__cdecl *dword_118AA0CC)(_DWORD, _DWORD);
// 118AA0D0: using guessed type int (*dword_118AA0D0)(void);

//----- (1002A740) --------------------------------------------------------
int sub_1002A740() {
  char v0;    // cl
  char *v1;   // eax
  int result; // eax

  if (gChosenWeather0 == 2 || (v0 = 0x80, gChosenWeather0 == 3))
    v0 = 32;
  v1 = (char *)&unk_104D51C1;
  do {
    *(v1 - 1) = v0;
    *v1 = v0;
    v1[1] = v0;
    v1[2] = v0;
    v1 += 4;
  } while ((int)v1 < (int)&unk_104D51D1);
  result = dword_118AA0B0(&unk_104D51C0, 0, 4, 4, 1, 4, 0, 0, 1, 1, 0, 0, 1, 0);
  dword_105553E4 = result;
  return result;
}
// 1022B350: using guessed type int g_ChosenWeather;
// 105553E4: using guessed type int dword_105553E4;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (1002A7A0) --------------------------------------------------------
void sub_1002A7A0() {
  unsigned int i;  // esi
  char *v1;        // ecx
  int v2;          // ebx
  int v3;          // esi
  int v4;          // edi
  unsigned int v5; // [esp+10h] [ebp-4h]

  sub_10074F40();
  for (i = 1; i <= dword_10575424; ++i) {
    meth_1000A0B0(*((#511 **)Block + i));
    operator delete(*((void **)Block + i));
  }
  free(Block);
  dword_10575424 = 0;
  dword_10575428 = 0;
  Block = 0;
  v5 = 0;
  if (dword_105553F0) {
    v1 = (char *)dword_1057543C;
    v2 = 0;
    do {
      if (*(_DWORD *)&v1[v2 + 624]) {
        v3 = v2 + 644;
        v4 = 4;
        do {
          if (*(_DWORD *)&v1[v3]) {
              free(*(void **)&v1[v3]);
              *(_DWORD *)((char *)dword_1057543C + v3) = 0;
              v1 = (char *)dword_1057543C;
          }
          v3 += 4;
          --v4;
        } while (v4);
      }
      v2 += 696;
      ++v5;
    } while (v5 < dword_105553F0);
  } else {
    v1 = (char *)dword_1057543C;
  }
  dword_105553F0 = 0;
  dword_105553F4 = 0;
  free(v1);
  dword_1057543C = 0;
}
// 105553F0: using guessed type int dword_105553F0;
// 105553F4: using guessed type int dword_105553F4;
// 10575424: using guessed type int dword_10575424;
// 10575428: using guessed type int dword_10575428;

//----- (1002A8A0) --------------------------------------------------------
HMODULE __cdecl pm_loadEARDLL(int useEarpdsDll) {
  HMODULE result;           // eax
  const char *dllFilename;  // edi
  CHAR finalModuleName[12]; // [esp+10h] [ebp-Ch] BYREF

  if (hModule && EAR_DLL_UpdateEar)
    return (HMODULE)1;
  if (useEarpdsDll) {
    dword_105754DC = 1;
    dllFilename = aEarpdsDll;
  } else {
    dllFilename = aEariasDll;
  }
  strcpy(finalModuleName, dllFilename);
  result = GetModuleHandleA(finalModuleName);
  hModule = result;
  if (result)
    goto LABEL_12;
  dword_105754D4 = 1;
  result = LoadLibraryA(finalModuleName);
  hModule = result;
  if (result || useEarpdsDll ||
      (dword_105754D4 = 0,
       dword_105754D8 = 1,
       result = GetModuleHandleA(aEarpdsDll),
       (hModule = result) != 0) ||
      (dword_105754D4 = 1, result = LoadLibraryA(aEarpdsDll), (hModule = result) != 0)) {
  LABEL_12:
    if (!EAR_DLL_UpdateEar) {
      EAR_DLL_AAA_Validate = (int(__stdcall *)(_DWORD))GetProcAddress(result, ProcName);
      EAR_DLL_AssignHwnd = (int(__stdcall *)(_DWORD))GetProcAddress(hModule, aEarDllAssignhw);
      EAR_DLL_ChangeChannelControl =
          (int(__stdcall *)(_DWORD, _DWORD))GetProcAddress(hModule, aEarDllChangech);
      EAR_DLL_ClearChannel =
          (int(__stdcall *)(_DWORD, _DWORD))GetProcAddress(hModule, aEarDllClearcha);
      EAR_DLL_EarInactive = (int)GetProcAddress(hModule, aEarDllEarinact);
      EAR_DLL_GetEventStatus = (int)GetProcAddress(hModule, aEarDllGetevent);
      EAR_DLL_GetLastError = GetProcAddress(hModule, aEarDllGetlaste);
      EAR_DLL_GetVersion = (int)GetProcAddress(hModule, aEarDllGetversi);
      EAR_DLL_InitializeEar = (int(__stdcall *)(_DWORD))GetProcAddress(hModule, aEarDllInitiali);
      EAR_DLL_MixEvent = (int(__stdcall *)(_DWORD))GetProcAddress(hModule, aEarDllMixevent);
      EAR_DLL_MoveEvent = (int)GetProcAddress(hModule, aEarDllMoveeven);
      EAR_DLL_RegisterBank = (int)GetProcAddress(hModule, aEarDllRegister);
      EAR_DLL_RegisterChannel = (int(__stdcall *)(_DWORD, _DWORD, _DWORD, _DWORD))GetProcAddress(
          hModule, aEarDllRegister_0);
      EAR_DLL_RegisterEnvironment = (int)GetProcAddress(hModule, aEarDllRegister_1);
      EAR_DLL_RegisterMatrix = (int(__stdcall *)(_DWORD))GetProcAddress(hModule, aEarDllRegister_2);
      EAR_DLL_RegisterPreset = (int)GetProcAddress(hModule, aEarDllRegister_3);
      EAR_DLL_ResetEar = (int)GetProcAddress(hModule, aEarDllResetear);
      EAR_DLL_SetAttenuationLevel =
          (int(__stdcall *)(_DWORD, _DWORD))GetProcAddress(hModule, aEarDllSetatten);
      EAR_DLL_SetUserDistanceUnit = (int)GetProcAddress(hModule, aEarDllSetuserd);
      EAR_DLL_ShowLastError = GetProcAddress(hModule, aEarDllShowlast);
      EAR_DLL_ShutDownBank = (int)GetProcAddress(hModule, aEarDllShutdown);
      EAR_DLL_ShutDownChannel =
          (int(__stdcall *)(_DWORD))GetProcAddress(hModule, aEarDllShutdown_0);
      EAR_DLL_ShutDownEar = GetProcAddress(hModule, aEarDllShutdown_1);
      EAR_DLL_ShutDownEnvironment = (int)GetProcAddress(hModule, aEarDllShutdown_2);
      EAR_DLL_ShutDownEvent = (int)GetProcAddress(hModule, aEarDllShutdown_3);
      EAR_DLL_ShutDownMatrix = (int)GetProcAddress(hModule, aEarDllShutdown_4);
      EAR_DLL_ShutDownPreset = (int)GetProcAddress(hModule, aEarDllShutdown_5);
      EAR_DLL_StartEvent = (int)GetProcAddress(hModule, aEarDllStarteve);
      EAR_DLL_StartTimer = (int)GetProcAddress(hModule, aEarDllStarttim);
      EAR_DLL_ShutDownTimer = (int)GetProcAddress(hModule, aEarDllShutdown_6);
      EAR_DLL_UpdateEar = (int)GetProcAddress(hModule, aEarDllUpdateea);
      if (EAR_DLL_EarInactive == 0 || EAR_DLL_GetEventStatus == 0 ||
          EAR_DLL_ChangeChannelControl == 0 || EAR_DLL_ClearChannel == 0 ||
          EAR_DLL_AAA_Validate == 0 || EAR_DLL_AssignHwnd == 0 || EAR_DLL_ShutDownBank == 0 ||
          EAR_DLL_ShutDownChannel == 0 || EAR_DLL_SetUserDistanceUnit == 0 ||
          EAR_DLL_ShowLastError == 0 || EAR_DLL_ResetEar == 0 || EAR_DLL_SetAttenuationLevel == 0 ||
          EAR_DLL_RegisterMatrix == 0 || EAR_DLL_RegisterPreset == 0 ||
          EAR_DLL_RegisterChannel == 0 || EAR_DLL_RegisterEnvironment == 0 ||
          EAR_DLL_MoveEvent == 0 || EAR_DLL_RegisterBank == 0 || EAR_DLL_InitializeEar == 0 ||
          EAR_DLL_MixEvent == 0 || EAR_DLL_GetLastError == 0 || EAR_DLL_GetVersion == 0 ||
          EAR_DLL_UpdateEar == 0 || EAR_DLL_StartEvent == 0 || EAR_DLL_StartTimer == 0 ||
          EAR_DLL_ShutDownPreset == 0 || EAR_DLL_ShutDownTimer == 0 || EAR_DLL_ShutDownEvent == 0 ||
          EAR_DLL_ShutDownMatrix == 0 || EAR_DLL_ShutDownEar == 0 ||
          EAR_DLL_ShutDownEnvironment == 0) {
        return 0;
      }
      aEarInteractiveMessageID = RegisterWindowMessageA(aEarInteractive);
    }
    result = (HMODULE)1;
  }
  return result;
}
// 10575450: using guessed type int EAR_DLL_GetVersion;
// 10575454: using guessed type int (__stdcall *EAR_DLL_SetAttenuationLevel)(_DWORD, _DWORD);
// 10575458: using guessed type int EAR_DLL_ShutDownBank;
// 1057545C: using guessed type int EAR_DLL_ShutDownMatrix;
// 10575460: using guessed type int EAR_DLL_EarInactive;
// 10575468: using guessed type int EAR_DLL_ShutDownTimer;
// 1057546C: using guessed type int (__stdcall *EAR_DLL_MixEvent)(_DWORD);
// 10575470: using guessed type int (__stdcall *EAR_DLL_ShutDownChannel)(_DWORD);
// 10575474: using guessed type int (*EAR_DLL_ShutDownEar)(void);
// 10575478: using guessed type int aEarInteractiveMessageID;
// 1057547C: using guessed type int EAR_DLL_StartEvent;
// 10575480: using guessed type int (__stdcall *EAR_DLL_ClearChannel)(_DWORD, _DWORD);
// 10575484: using guessed type int (__stdcall *EAR_DLL_ChangeChannelControl)(_DWORD, _DWORD);
// 10575488: using guessed type int EAR_DLL_MoveEvent;
// 1057548C: using guessed type int (__stdcall *EAR_DLL_AssignHwnd)(_DWORD);
// 10575490: using guessed type int EAR_DLL_ShutDownPreset;
// 10575494: using guessed type int EAR_DLL_ResetEar;
// 10575498: using guessed type int EAR_DLL_ShutDownEvent;
// 1057549C: using guessed type int EAR_DLL_StartTimer;
// 105754A0: using guessed type int (__stdcall *EAR_DLL_RegisterChannel)(_DWORD, _DWORD, _DWORD, _DWORD);
// 105754A4: using guessed type int EAR_DLL_ShutDownEnvironment;
// 105754A8: using guessed type int (*EAR_DLL_ShowLastError)(void);
// 105754AC: using guessed type int EAR_DLL_RegisterEnvironment;
// 105754B0: using guessed type int (__stdcall *EAR_DLL_AAA_Validate)(_DWORD);
// 105754B4: using guessed type int EAR_DLL_GetEventStatus;
// 105754B8: using guessed type int EAR_DLL_SetUserDistanceUnit;
// 105754BC: using guessed type int EAR_DLL_UpdateEar;
// 105754C0: using guessed type int (__stdcall *EAR_DLL_InitializeEar)(_DWORD);
// 105754C4: using guessed type int (*EAR_DLL_GetLastError)(void);
// 105754C8: using guessed type int EAR_DLL_RegisterPreset;
// 105754CC: using guessed type int EAR_DLL_RegisterBank;
// 105754D0: using guessed type int (__stdcall *EAR_DLL_RegisterMatrix)(_DWORD);
// 105754D4: using guessed type int dword_105754D4;
// 105754D8: using guessed type int dword_105754D8;
// 105754DC: using guessed type int dword_105754DC;

//----- (1002ADC0) --------------------------------------------------------
int __cdecl pm_setupEAR(HWND hWnd) {
  const CHAR *v2; // eax
  const CHAR *v3; // eax
  const CHAR *v4; // [esp-10h] [ebp-10h]
  const CHAR *v5; // [esp-10h] [ebp-10h]

  if (++dword_105754E0 != 1)
    return 1;
  if (!pm_loadEARDLL(dword_100A81A8)) {
    v4 = GetStringWithIndex(0xFDu);
    v2 = GetStringWithIndex(0xFEu);
    MessageBoxA(hWnd, v2, v4, 0x10u);
    exit(1);
  }
  EAR_DLL_AAA_Validate(10217929);
  EAR_DLL_AssignHwnd(hWnd);
  if (!EAR_DLL_InitializeEar(0)) {
    if (EAR_DLL_GetLastError() == 3) {
      v5 = GetStringWithIndex(0xFDu);
      v3 = GetStringWithIndex(0x12Eu);
      MessageBoxA(hWnd, v3, v5, 0x10u);
      exit(1);
    }
    EAR_DLL_ShowLastError();
    exit(1);
  }
  return 1;
}
// 100A81A8: using guessed type int dword_100A81A8;
// 1057548C: using guessed type int (__stdcall *EAR_DLL_AssignHwnd)(_DWORD);
// 105754A8: using guessed type int (*EAR_DLL_ShowLastError)(void);
// 105754B0: using guessed type int (__stdcall *EAR_DLL_AAA_Validate)(_DWORD);
// 105754C0: using guessed type int (__stdcall *EAR_DLL_InitializeEar)(_DWORD);
// 105754C4: using guessed type int (*EAR_DLL_GetLastError)(void);
// 105754E0: using guessed type int dword_105754E0;

//----- (1002AEA0) --------------------------------------------------------
int sub_1002AEA0() {
  if (!--dword_105754E0)
    EAR_DLL_ShutDownEar();
  return 1;
}
// 10575474: using guessed type int (*EAR_DLL_ShutDownEar)(void);
// 105754E0: using guessed type int dword_105754E0;

//----- (1002AED0) --------------------------------------------------------
int sub_1002AED0() {
  int result; // eax

  result = gWidth;
  dword_10575500 = gWidth;
  dword_105754FC = gHeight;
  return result;
}
// 100A81C0: using guessed type int g_Width;
// 100A81C4: using guessed type int g_Height;
// 105754FC: using guessed type int dword_105754FC;
// 10575500: using guessed type int dword_10575500;

//----- (1002AEF0) --------------------------------------------------------
void sub_1002AEF0() {
  flt_10575504 = 0.0;
  flt_105754F8 = 0.0;
}
// 105754F8: using guessed type float flt_105754F8;
// 10575504: using guessed type float flt_10575504;

//----- (1002AF10) --------------------------------------------------------
void __cdecl sub_1002AF10(int a1, float a2) {
  _DWORD *v2;        // eax
  _DWORD *v3;        // eax
  _DWORD *v4;        // eax
  _DWORD *v5;        // esi
  _DWORD *v6;        // eax
  unsigned int *v7;  // ecx
  _DWORD *v8;        // eax
  _DWORD *v9;        // eax
  unsigned int *v10; // [esp-50h] [ebp-50h]
  unsigned int *v11; // [esp-50h] [ebp-50h]

  if (a2 >= 0.1) {
    if (a2 > 0.69999999)
      a2 = 0.69999999;
    v2 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v2 = -419430400;
    v2[1] = 0;
    v3 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v3 = -1174399998;
    v3[1] = 0;
    v4 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v4 = -1191181539;
    v4[1] = 5260096;
    v10 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    sub_1002F900(v10, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1003);
    v5 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v5 = -100663296;
    v5[1] = (__int64)(a2 * 255.0) | 0xFFFFFF00;
    v6 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v6 = -1174403582;
    v6[1] = 192;
    v7 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    *v7 =
        ((*(_DWORD *)(a1 + 88 * MEMORY[0x106C5708]) + *(_DWORD *)(a1 + 88 * MEMORY[0x106C5708] + 8))
         << 12) &
            0xFFF000 |
        ((unsigned __int16)*(_DWORD *)(a1 + 88 * MEMORY[0x106C5708] + 4) +
         (unsigned __int16)*(_DWORD *)(a1 + 88 * MEMORY[0x106C5708] + 12)) &
            0xFFF |
        0xE1000000;
    v7[1] = ((*(_DWORD *)(a1 + 88 * MEMORY[0x106C5708]) & 0xFFF) << 12) |
            *(_DWORD *)(a1 + 88 * MEMORY[0x106C5708] + 4) & 0xFFF;
    v11 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    sub_1002F900(v11, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1000, 0, 0, 0, 1000);
    v8 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v8 = -419430400;
    v8[1] = 0;
    v9 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v9 = -1174403582;
    v9[1] = dword_106C0688;
  }
}
// 106C0680: using guessed type int dword_106C0680;
// 106C0688: using guessed type int dword_106C0688;
// 106C5708: using guessed type int dword_106C5708;

//----- (1002B130) --------------------------------------------------------
void __cdecl sub_1002B130(float a1, float a2) {
  dword_10575524 = 1;
  if (a1 < (double)*(float *)&dword_10575518 || a1 == 0.0) {
    if (*(float *)&dword_10575518 == 1.0 || flt_10575514 <= 0.0) {
      dword_10575510 = LODWORD(a1);
      flt_10575514 = -1.0 / a2;
    } else {
      dword_10575530 = 1;
    }
  } else {
    dword_10575510 = LODWORD(a1);
    flt_10575514 = 1.0 / a2;
  }
}
// 10575510: using guessed type int dword_10575510;
// 10575514: using guessed type float flt_10575514;
// 10575518: using guessed type int dword_10575518;
// 10575524: using guessed type int dword_10575524;
// 10575530: using guessed type int dword_10575530;

//----- (1002B1C0) --------------------------------------------------------
void __cdecl sub_1002B1C0(float a1, float a2) {
  dword_1057552C = 1;
  dword_100A81B4 = LODWORD(a1);
  if (a1 - flt_100A81B8 < 0.0 || a1 == 0.0)
    flt_10575520 = -1.0 / a2;
  else
    flt_10575520 = 1.0 / a2;
}
// 100A81B4: using guessed type int dword_100A81B4;
// 100A81B8: using guessed type float flt_100A81B8;
// 10575520: using guessed type float flt_10575520;
// 1057552C: using guessed type int dword_1057552C;

//----- (1002B220) --------------------------------------------------------
void __cdecl sub_1002B220(float a1, float a2) {
  dword_10575528 = 1;
  dword_100A81AC = LODWORD(a1);
  if (a1 - flt_100A81B0 < 0.0 || a1 == 0.0)
    flt_1057551C = -1.0 / a2;
  else
    flt_1057551C = 1.0 / a2;
}
// 100A81AC: using guessed type int dword_100A81AC;
// 100A81B0: using guessed type float flt_100A81B0;
// 1057551C: using guessed type float flt_1057551C;
// 10575528: using guessed type int dword_10575528;

//----- (1002B280) --------------------------------------------------------
int __cdecl sub_1002B280(int a1) {
  int result; // eax

  result = a1;
  dword_10575510 = a1;
  dword_10575518 = a1;
  return result;
}
// 10575510: using guessed type int dword_10575510;
// 10575518: using guessed type int dword_10575518;

//----- (1002B2A0) --------------------------------------------------------
BOOL sub_1002B2A0() {
  return flt_10575514 < 0.0 || dword_10575530;
}
// 10575514: using guessed type float flt_10575514;
// 10575530: using guessed type int dword_10575530;

//----- (1002B2D0) --------------------------------------------------------
BOOL sub_1002B2D0() {
  return *(float *)&dword_10575518 == *(float *)&dword_10575510 && !dword_10575530;
}
// 10575510: using guessed type int dword_10575510;
// 10575518: using guessed type int dword_10575518;
// 10575530: using guessed type int dword_10575530;

//----- (1002B300) --------------------------------------------------------
BOOL sub_1002B300() {
  return flt_10575514 < 0.0 && *(float *)&dword_10575518 == 0.0 && !dword_10575530;
}
// 10575514: using guessed type float flt_10575514;
// 10575518: using guessed type int dword_10575518;
// 10575530: using guessed type int dword_10575530;

//----- (1002B340) --------------------------------------------------------
void sub_1002B340() {
  _DWORD *v0;        // eax
  _DWORD *v1;        // eax
  _DWORD *v2;        // eax
  _DWORD *v3;        // esi
  _DWORD *v4;        // eax
  int v5;            // esi
  _DWORD *v6;        // eax
  _DWORD *v7;        // eax
  unsigned int *v8;  // eax
  int v9;            // esi
  int v10;           // edx
  int v11;           // eax
  unsigned int *v12; // esi
  unsigned int *v13; // eax
  _DWORD *v14;       // eax
  unsigned int *v15; // [esp-54h] [ebp-58h]
  unsigned int *v16; // [esp-54h] [ebp-58h]

  if (*(float *)&dword_10575518 != 1.0) {
    v0 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v0 = -419430400;
    v0[1] = 0;
    v1 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v1 = -1174399998;
    v1[1] = 0;
    v2 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v2 = -1191181539;
    v2[1] = 252329984;
    v15 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    sub_1002F900(v15, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1003);
    v3 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v3 = -503316480;
    v3[1] = (((__int64)(double)(g_Width1 << MEMORY[0x106C65E4]) & 0xFFF) << 12) |
            (__int64)(double)(g_Height1 << MEMORY[0x106C65E4]) & 0xFFF;
    v4 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v4 = -100597761;
    v4[1] = 0;
    v5 = dword_10575508;
    if (dword_10575508) {
      if (sub_1002B300())
        dword_100A81BC = 3;
      v6 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v6 = -1191181539;
      v6[1] = 5260096;
      v16 = (unsigned int *)dword_106C0680;
      dword_106C0680 += 8;
      sub_1002F900(v16, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1003);
      v7 = (_DWORD *)dword_106C0680;
      dword_106C0680 += 8;
      *v7 = -100663296;
      v7[1] = 255;
      v8 = (unsigned int *)dword_106C0680;
      dword_106C0680 += 8;
      v9 = v5 << MEMORY[0x106C65E4];
      v10 = g_Height1 << MEMORY[0x106C65E4];
      v8[1] = 0;
      *v8 = ((_WORD)v10 - 1) & 0xFFF | ((v9 + 0xFFFFF) << 12) & 0xFFF000 | 0xE1000000;
    }
    v11 = dword_10575500;
    if (dword_10575500 >= g_Width1) {
      if (*(float *)&dword_10575518 == 0.0 && dword_100A81BC) {
        v13 = (unsigned int *)dword_106C0680;
        dword_106C0680 += 8;
        --dword_100A81BC;
        *v13 = ((unsigned __int16)(g_Height1 << MEMORY[0x106C65E4]) - 1) & 0xFFF |
               (((g_Width1 << MEMORY[0x106C65E4]) + 0xFFFFF) << 12) & 0xFFF000 | 0xE1000000;
        v13[1] = 0;
      }
    } else if (dword_100A81BC) {
      v12 = (unsigned int *)dword_106C0680;
      dword_106C0680 += 8;
      --dword_100A81BC;
      *v12 = ((unsigned __int16)(g_Height1 << MEMORY[0x106C65E4]) - 1) & 0xFFF |
             (((g_Width1 << MEMORY[0x106C65E4]) + 0xFFFFF) << 12) & 0xFFF000 | 0xE1000000;
      v12[1] = ((v11 << MEMORY[0x106C65E4]) & 0xFFF) << 12;
    }
    v14 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    v14[1] = 0;
    *v14 = -419430400;
  }
}
// 100A81BC: using guessed type int dword_100A81BC;
// 10575500: using guessed type int dword_10575500;
// 10575508: using guessed type int dword_10575508;
// 10575518: using guessed type int dword_10575518;
// 106C0680: using guessed type int dword_106C0680;
// 106C0684: using guessed type int g_Width1;
// 106C299C: using guessed type int g_Height1;
// 106C65E4: using guessed type int dword_106C65E4;
// 106C65EC: using guessed type int dword_106C65EC;

//----- (1002B670) --------------------------------------------------------
__int64 sub_1002B670() {
  char v1;        // c0
  bool v2;        // c0
  bool v3;        // c3
  int v4;         // eax
  int v5;         // esi
  int v6;         // edi
  int v7;         // edx
  int v8;         // eax
  int v9;         // eax
  char v11;       // c0
  char v13;       // c0
  __int64 result; // rax

  if (dword_10575524) {
    dword_10575524 = 0;
  } else if (*(float *)&dword_10575518 != *(float *)&dword_10575510) {
    *(float *)&dword_10575518 =
        flt_10575514 * *(float *)&dword_106C2CFC + *(float *)&dword_10575518;
    if (v1) {
      if (*(float *)&dword_10575518 < (double)*(float *)&dword_10575510)
        dword_10575518 = dword_10575510;
    } else if (*(float *)&dword_10575518 >= (double)*(float *)&dword_10575510) {
      dword_10575518 = dword_10575510;
      if (dword_10575530) {
        flt_10575514 = -flt_10575514;
        dword_10575510 = 0;
        dword_10575530 = 0;
      }
    }
  }
  v2 = flt_10575514 < 0.0;
  v3 = flt_10575514 == 0.0;
  v4 = MEMORY[0x106C65EC];
  v5 = dword_10575508;
  v6 = dword_10575500;
  v7 = g_Height1;
  dword_105754F0[MEMORY[0x106C65EC]] = dword_10575508;
  dword_105754E8[v4] = v6;
  dword_1057550C = 0;
  dword_105754FC = v7;
  if (!v2 && !v3) {
    dword_10575508 = 0;
    v8 = (__int64)((double)g_Width1 * *(float *)&dword_10575518) + 3;
    LOBYTE(v8) = v8 & 0xFC;
  LABEL_16:
    dword_10575500 = v8;
    goto LABEL_17;
  }
  if (flt_10575514 >= 0.0) {
    v8 = g_Width1;
    dword_10575508 = 0;
    goto LABEL_16;
  }
  v9 = g_Width1 - (__int64)((double)g_Width1 * *(float *)&dword_10575518) - v5 + 3;
  LOBYTE(v9) = v9 & 0xFC;
  dword_10575508 = v9 + v5;
  dword_10575500 = v9 + v6;
  if (v9 + v6 > g_Width1)
    dword_10575500 = g_Width1;
LABEL_17:
  if (dword_1057552C) {
    dword_1057552C = 0;
  } else if (flt_100A81B8 != *(float *)&dword_100A81B4) {
    flt_100A81B8 = flt_10575520 * *(float *)&dword_106C2CFC + flt_100A81B8;
    if (v11) {
      if (flt_100A81B8 < (double)*(float *)&dword_100A81B4)
        LODWORD(flt_100A81B8) = dword_100A81B4;
    } else if (flt_100A81B8 > (double)*(float *)&dword_100A81B4) {
      LODWORD(flt_100A81B8) = dword_100A81B4;
    }
  }
  byte_100BBAE4 = (__int64)(flt_100A81B8 * 255.0);
  if (dword_10575528) {
    dword_10575528 = 0;
  } else if (flt_100A81B0 != *(float *)&dword_100A81AC) {
    flt_100A81B0 = flt_1057551C * *(float *)&dword_106C2CFC + flt_100A81B0;
    if (v13) {
      if (flt_100A81B0 < (double)*(float *)&dword_100A81AC)
        LODWORD(flt_100A81B0) = dword_100A81AC;
    } else if (flt_100A81B0 > (double)*(float *)&dword_100A81AC) {
      LODWORD(flt_100A81B0) = dword_100A81AC;
    }
  }
  result = (__int64)(flt_100A81B0 * 255.0);
  byte_100BBADC = result;
  return result;
}
// 1002B6D2: variable 'v1' is possibly undefined
// 100A81AC: using guessed type int dword_100A81AC;
// 100A81B0: using guessed type float flt_100A81B0;
// 100A81B4: using guessed type int dword_100A81B4;
// 100A81B8: using guessed type float flt_100A81B8;
// 100BBADC: using guessed type char byte_100BBADC;
// 100BBAE4: using guessed type char byte_100BBAE4;
// 105754E8: using guessed type int dword_105754E8[];
// 105754F0: using guessed type int dword_105754F0[];
// 105754FC: using guessed type int dword_105754FC;
// 10575500: using guessed type int dword_10575500;
// 10575508: using guessed type int dword_10575508;
// 1057550C: using guessed type int dword_1057550C;
// 10575510: using guessed type int dword_10575510;
// 10575514: using guessed type float flt_10575514;
// 10575518: using guessed type int dword_10575518;
// 1057551C: using guessed type float flt_1057551C;
// 10575520: using guessed type float flt_10575520;
// 10575524: using guessed type int dword_10575524;
// 10575528: using guessed type int dword_10575528;
// 1057552C: using guessed type int dword_1057552C;
// 10575530: using guessed type int dword_10575530;
// 106C0684: using guessed type int g_Width1;
// 106C299C: using guessed type int g_Height1;
// 106C2CFC: using guessed type int dword_106C2CFC;
// 106C65EC: using guessed type int dword_106C65EC;

//----- (1002B920) --------------------------------------------------------
__int64 __cdecl sub_1002B920(float a1) {
  return (__int64)a1;
}

//----- (1002B930) --------------------------------------------------------
void __cdecl qmemcpy32(void *a1, const void *a2) {
  qmemcpy(a1, a2, 32u);
}

//----- (1002B950) --------------------------------------------------------
void sub_1002B950() {
  dword_1067D550 = 0;
  off_100A81C8 = &unk_10575540;
}
// 100A81C8: using guessed type void *off_100A81C8;
// 1067D550: using guessed type int dword_1067D550;

//----- (1002B970) --------------------------------------------------------
int __cdecl sub_1002B970(int *a1) {
  int result; // eax

  result = *a1;
  if (*a1) {
    if (result >= dword_1057553C)
      *a1 = result + dword_10575538 - dword_1057553C;
    else
      *a1 = 0;
  }
  return result;
}
// 10575538: using guessed type int dword_10575538;
// 1057553C: using guessed type int dword_1057553C;

//----- (1002B9A0) --------------------------------------------------------
int __cdecl sub_1002B9A0(int a1, int a2) {
  int result; // eax

  sub_1002B9C0();
  result = a1;
  dword_1057553C = a1;
  dword_10575538 = a2;
  return result;
}
// 10575538: using guessed type int dword_10575538;
// 1057553C: using guessed type int dword_1057553C;

//----- (1002B9C0) --------------------------------------------------------
int sub_1002B9C0() {
  int result; // eax

  result = 0;
  dword_1067B54C = 0;
  dword_1067B548 = 0;
  return result;
}
// 1067B548: using guessed type int dword_1067B548;
// 1067B54C: using guessed type int dword_1067B54C;

//----- (1002B9D0) --------------------------------------------------------
int __cdecl sub_1002B9D0(int a1) {
  int result; // eax

  result = a1;
  dword_10675540 = a1;
  return result;
}
// 10675540: using guessed type int dword_10675540;

//----- (1002B9E0) --------------------------------------------------------
void __cdecl sub_1002B9E0(_BYTE *a1, int a2) {
  int v2;     // ecx
  __int16 v4; // dx

  v2 = a2;
  if (a2 > 0) {
    do {
      LOBYTE(v4) = a1[1];
      HIBYTE(v4) = *a1;
      *(_WORD *)a1 = v4;
      a1 += 2;
      --v2;
    } while (v2);
  }
}

//----- (1002BA00) --------------------------------------------------------
_BYTE *__cdecl sub_1002BA00(_BYTE *a1, int a2) {
  int v2;        // edi
  _BYTE *result; // eax

  v2 = a2;
  if (a2 > 0) {
    do {
      result = sub_1002BA20(a1);
      a1 += 8;
      --v2;
    } while (v2);
  }
  return result;
}

//----- (1002BA20) --------------------------------------------------------
_BYTE *__cdecl sub_1002BA20(_BYTE *a1) {
  _BYTE *result; // eax
  __int16 v2;    // cx
  __int16 v3;    // dx

  result = a1;
  LOBYTE(v2) = a1[1];
  LOBYTE(v3) = a1[3];
  HIBYTE(v2) = *a1;
  HIBYTE(v3) = a1[2];
  *(_WORD *)a1 = v2;
  *((_WORD *)a1 + 1) = v3;
  LOBYTE(v2) = a1[5];
  LOBYTE(v3) = a1[7];
  HIBYTE(v2) = a1[4];
  HIBYTE(v3) = a1[6];
  *((_WORD *)a1 + 2) = v2;
  *((_WORD *)a1 + 3) = v3;
  return result;
}

//----- (1002BA60) --------------------------------------------------------
_BYTE *__cdecl sub_1002BA60(_BYTE *a1, int a2) {
  int v2;        // edi
  _BYTE *result; // eax

  v2 = a2;
  if (a2 > 0) {
    do {
      result = sub_100383C0(a1);
      a1 += 12;
      --v2;
    } while (v2);
  }
  return result;
}

//----- (1002BA80) --------------------------------------------------------
int __cdecl sub_1002BA80(int a1, int a2) {
  int v2;     // edi
  int result; // eax

  v2 = a2;
  if (a2 > 0) {
    do {
      result = sub_1002BAA0(a1);
      a1 += 36;
      --v2;
    } while (v2);
  }
  return result;
}

//----- (1002BAA0) --------------------------------------------------------
int __cdecl sub_1002BAA0(int a1) {
  char v1;              // al
  char v2;              // dl
  char v3;              // al
  char v4;              // al
  char v5;              // dl
  _DWORD *v6;           // ebp
  char v7;              // al
  char v8;              // al
  char v9;              // dl
  _BYTE **v10;          // esi
  unsigned __int16 v11; // cx
  __int16 v12;          // ax
  __int16 v13;          // dx
  int v14;              // eax
  int v15;              // ecx
  int v16;              // edi
  int v17;              // esi
  int v18;              // edx
  int v19;              // eax
  void *v20;            // edi
  const void *v21;      // esi
  unsigned int v22;     // ecx
  int v23;              // esi

  v1 = *(_BYTE *)(a1 + 3);
  v2 = *(_BYTE *)(a1 + 1);
  *(_BYTE *)(a1 + 3) = *(_BYTE *)a1;
  *(_BYTE *)a1 = v1;
  v3 = *(_BYTE *)(a1 + 2);
  *(_BYTE *)(a1 + 2) = v2;
  *(_BYTE *)(a1 + 1) = v3;
  sub_1002B970((int *)a1);
  v4 = *(_BYTE *)(a1 + 7);
  v5 = *(_BYTE *)(a1 + 5);
  v6 = (_DWORD *)(a1 + 4);
  *(_BYTE *)(a1 + 7) = *(_BYTE *)(a1 + 4);
  *(_BYTE *)(a1 + 4) = v4;
  v7 = *(_BYTE *)(a1 + 6);
  *(_BYTE *)(a1 + 6) = v5;
  *(_BYTE *)(a1 + 5) = v7;
  sub_1002B970((int *)(a1 + 4));
  v8 = *(_BYTE *)(a1 + 11);
  v9 = *(_BYTE *)(a1 + 9);
  v10 = (_BYTE **)(a1 + 8);
  *(_BYTE *)(a1 + 11) = *(_BYTE *)(a1 + 8);
  LOBYTE(v11) = *(_BYTE *)(a1 + 15);
  *(_BYTE *)(a1 + 8) = v8;
  HIBYTE(v11) = *(_BYTE *)(a1 + 14);
  *(_BYTE *)(a1 + 9) = *(_BYTE *)(a1 + 10);
  LOBYTE(v12) = *(_BYTE *)(a1 + 13);
  *(_BYTE *)(a1 + 10) = v9;
  HIBYTE(v12) = *(_BYTE *)(a1 + 12);
  *(_WORD *)(a1 + 14) = v11;
  *(_WORD *)(a1 + 12) = v12;
  LOBYTE(v12) = *(_BYTE *)(a1 + 19);
  LOBYTE(v13) = *(_BYTE *)(a1 + 17);
  HIBYTE(v12) = *(_BYTE *)(a1 + 18);
  HIBYTE(v13) = *(_BYTE *)(a1 + 16);
  LOBYTE(v11) = *(_BYTE *)(a1 + 21);
  *(_WORD *)(a1 + 18) = v12;
  HIBYTE(v11) = *(_BYTE *)(a1 + 20);
  v14 = *(_DWORD *)(a1 + 32);
  *(_WORD *)(a1 + 16) = v13;
  *(_WORD *)(a1 + 20) = v11;
  LOBYTE(v11) = 0;
  LOBYTE(v13) = *(_BYTE *)(a1 + 23);
  HIBYTE(v13) = *(_BYTE *)(a1 + 22);
  HIBYTE(v11) = v14;
  *(_WORD *)(a1 + 22) = v13;
  v15 = HIBYTE(v14) | ((BYTE2(v14) | ((BYTE1(v14) | v11) << 8)) << 8);
  *(_DWORD *)(a1 + 32) = v15;
  if (dword_10675540) {
    if ((v15 & 0x100000) != 0) {
      v16 = 0;
      sub_1002B970((int *)(a1 + 8));
      sub_1002BC90(*v10);
      v17 = (int)*v10;
      if (*(_WORD *)(v17 + 2) == 2 && *(_DWORD *)(v17 + 8) == -1)
        v16 = 1;
      v18 = *(_DWORD *)(v17 + 12 * v16 + 16);
      v19 = *(_DWORD *)(v17 + 12 * (v16 + 1));
      if (!v16 && (*(_DWORD *)(a1 + 32) & 0x3FFFF) != 0 && v19 != -1)
        qmemcpy(*(void **)a1,
                (const void *)(v19 + dword_10690BEC),
                4 * ((*(_DWORD *)(a1 + 32) & 0x3FFFFu) >> 2) + (*(_BYTE *)(a1 + 32) & 3));
      v20 = (void *)*v6;
      if (*v6 && v18 != -1) {
        v21 = (const void *)(v18 + dword_10690BEC);
        v22 = (*(_DWORD *)(a1 + 32) & 0xF000000) != 0x1000000 ? 512 : 32;
      LABEL_15:
        qmemcpy(v20, v21, v22);
        return nullsub_2(*v6);
      }
    } else {
      v20 = (void *)*v6;
      v23 = 32 * ((unsigned int)*v10 & 0xFFF);
      if (*v6) {
        v22 = (v15 & 0xF000000) != 0x1000000 ? 512 : 32;
        v21 = (const void *)(dword_10690BEC + v23);
        goto LABEL_15;
      }
    }
  }
  return nullsub_2(*v6);
}
// 10075330: using guessed type int __cdecl nullsub_2(_DWORD);
// 10675540: using guessed type int dword_10675540;
// 10690BEC: using guessed type int dword_10690BEC;

//----- (1002BC90) --------------------------------------------------------
void __cdecl sub_1002BC90(_BYTE *a1) {
  __int16 v1;          // cx
  unsigned __int16 v2; // dx
  __int16 v3;          // ax
  int v4;              // edi
  int v5;              // ecx
  unsigned __int8 *v6; // eax
  unsigned __int16 v7; // dx
  int v8;              // ecx

  if (a1) {
    LOBYTE(v1) = 0;
    HIBYTE(v1) = a1[2];
    LOBYTE(v2) = a1[5];
    HIBYTE(v2) = a1[4];
    v3 = v1 | (unsigned __int8)a1[3];
    v4 = 0;
    v5 = (unsigned __int8)a1[6];
    *((_WORD *)a1 + 1) = v3;
    *((_DWORD *)a1 + 1) = (unsigned __int8)a1[7] | ((v5 | (v2 << 8)) << 8);
    if (v3) {
      v6 = a1 + 10;
      do {
        LOBYTE(v7) = *(v6 - 1);
        v8 = *v6;
        HIBYTE(v7) = *(v6 - 2);
        v6 += 12;
        *(_DWORD *)(v6 - 14) = *(v6 - 11) | ((v8 | (v7 << 8)) << 8);
        LOBYTE(v7) = *(v6 - 9);
        HIBYTE(v7) = *(v6 - 10);
        *(_DWORD *)(v6 - 10) = *(v6 - 7) | ((*(v6 - 8) | (v7 << 8)) << 8);
        LOBYTE(v7) = *(v6 - 5);
        HIBYTE(v7) = *(v6 - 6);
        ++v4;
        *(_DWORD *)(v6 - 6) = *(v6 - 3) | ((*(v6 - 4) | (v7 << 8)) << 8);
      } while (v4 < *((unsigned __int16 *)a1 + 1));
    }
  }
}

//----- (1002BD50) --------------------------------------------------------
void __cdecl sub_1002BD50(__int16 **a1, int a2) {
  __int16 *v2; // esi
  int v3;      // ecx
  int *v4;     // eax
  __int16 *v5; // esi

  v2 = *a1;
  if (*a1 && a2) {
    v3 = 0;
    if (dword_1067B54C <= 0) {
    LABEL_8:
      sub_1002BDD0(v2, a2);
      v5 = (__int16 *)sub_1002BE30(*a1, a2);
      sub_1002BF00(*a1, a2, v5);
      *a1 = v5;
    } else {
      v4 = &dword_1067554C;
      while ((__int16 *)*(v4 - 1) != v2 || *v4 != a2) {
        ++v3;
        v4 += 3;
        if (v3 >= dword_1067B54C)
          goto LABEL_8;
      }
      *a1 = (__int16 *)dword_10675550[3 * v3];
    }
  }
}
// 1002BDD0: using guessed type _DWORD __cdecl sub_1002BDD0(_DWORD, _DWORD);
// 1002BF00: using guessed type _DWORD __cdecl sub_1002BF00(_DWORD, _DWORD, _DWORD);
// 1067554C: using guessed type int dword_1067554C;
// 1067B54C: using guessed type int dword_1067B54C;

//----- (1002BDD0) --------------------------------------------------------
void __cdecl sub_1002BDD0(_BYTE *a1, int a2) {
  int v2;     // ecx
  __int16 v4; // dx

  v2 = a2;
  if (a2 > 0) {
    do {
      HIBYTE(v4) = *a1;
      LOBYTE(v4) = a1[1];
      *(_WORD *)a1 = v4;
      HIBYTE(v4) = a1[2];
      LOBYTE(v4) = a1[3];
      *((_WORD *)a1 + 1) = v4;
      LOBYTE(v4) = a1[5];
      HIBYTE(v4) = a1[4];
      *((_WORD *)a1 + 2) = v4;
      LOBYTE(v4) = a1[7];
      HIBYTE(v4) = a1[6];
      *((_WORD *)a1 + 3) = v4;
      LOBYTE(v4) = a1[9];
      HIBYTE(v4) = a1[8];
      *((_WORD *)a1 + 4) = v4;
      LOBYTE(v4) = a1[11];
      HIBYTE(v4) = a1[10];
      *((_WORD *)a1 + 5) = v4;
      a1 += 16;
      --v2;
    } while (v2);
  }
}

//----- (1002BE30) --------------------------------------------------------
void *__cdecl sub_1002BE30(__int16 *a1, int a2) {
  float *v2;    // edx
  int v3;       // esi
  void *result; // eax
  int v6;       // [esp+Ch] [ebp+8h]

  v2 = (float *)off_100A81C8;
  v3 = a2;
  result = off_100A81C8;
  if (a2 > 0) {
    do {
      v6 = *a1;
      a1 += 8;
      *v2 = (float)v6;
      v2[1] = (float)*(a1 - 7);
      v2[2] = (float)*(a1 - 6);
      v2[3] = (float)*(a1 - 4);
      v2[4] = (float)*(a1 - 3);
      v2[5] = (double)*((char *)a1 - 4) * 0.0078125;
      v2[6] = (double)*((char *)a1 - 3) * 0.0078125;
      v2[7] = (double)*((char *)a1 - 2) * 0.0078125;
      v2 = (float *)((char *)off_100A81C8 + 32);
      --v3;
      off_100A81C8 = (char *)off_100A81C8 + 32;
      ++dword_1067D550;
    } while (v3);
  }
  return result;
}
// 100A81C8: using guessed type void *off_100A81C8;
// 1067D550: using guessed type int dword_1067D550;

//----- (1002BF00) --------------------------------------------------------
int __cdecl sub_1002BF00(int a1, int a2, int a3) {
  int result; // eax
  int v4;     // ecx

  if (dword_1067B54C < 2048) {
    result = 3 * dword_1067B54C;
    v4 = dword_1067B54C + 1;
    dword_10675548[result] = a1;
    dword_1067554C[result] = a2;
    dword_10675550[result] = a3;
    dword_1067B54C = v4;
  }
  return result * 4;
}
// 10675548: using guessed type int dword_10675548[];
// 1067554C: using guessed type int dword_1067554C[];
// 1067B54C: using guessed type int dword_1067B54C;

//----- (1002BF40) --------------------------------------------------------
int __cdecl sub_1002BF40(int a1) {
  int v2; // eax
  int *i; // ecx

  if (!a1)
    return 1;
  v2 = 0;
  if (dword_1067B548 <= 0)
    return 0;
  for (i = dword_1067B550; *i != a1; ++i) {
    if (++v2 >= dword_1067B548)
      return 0;
  }
  return 1;
}
// 1067B548: using guessed type int dword_1067B548;

//----- (1002BF80) --------------------------------------------------------
int __cdecl sub_1002BF80(int a1) {
  int v1;              // esi
  unsigned __int16 v2; // ax
  int v3;              // ecx
  int v4;              // eax
  int v5;              // edx
  int result;          // eax

  v1 = a1;
  if (a1) {
    sub_1002C1F0(a1);
    while (1) {
      HIBYTE(v2) = *(_BYTE *)v1;
      LOBYTE(v2) = *(_BYTE *)(v1 + 1);
      v3 = *(unsigned __int8 *)(v1 + 5);
      BYTE1(v3) = *(_BYTE *)(v1 + 4);
      v4 = *(unsigned __int8 *)(v1 + 3) | ((*(unsigned __int8 *)(v1 + 2) | (v2 << 8)) << 8);
      v5 = *(unsigned __int8 *)(v1 + 6);
      *(_DWORD *)v1 = v4;
      result = HIBYTE(v4) - 4;
      *(_DWORD *)(v1 + 4) = *(unsigned __int8 *)(v1 + 7) | ((v5 | (v3 << 8)) << 8);
      switch (result) {
      case 0:
        sub_1002C150(v1);
        v1 += 8;
        continue;
      case 173:
        sub_1002C1B0((_BYTE *)v1);
        v1 += 8;
        continue;
      case 180:
        return result;
      case 187:
        sub_1002C190((_BYTE *)v1);
        v1 += 8;
        continue;
      case 249:
        sub_1002B970((int *)(v1 + 4));
        goto LABEL_8;
      default:
      LABEL_8:
        v1 += 8;
        break;
      }
    }
  }
  return result;
}

//----- (1002C150) --------------------------------------------------------
void __cdecl sub_1002C150(int a1) {
  *(_DWORD *)(a1 + 4) = dword_1057553C ^ (*(_DWORD *)(a1 + 4) ^ dword_1057553C) & 0xFFFFFF;
  sub_1002B970((int *)(a1 + 4));
  sub_1002BD50((__int16 **)(a1 + 4), (unsigned __int8)HIBYTE(*(_WORD *)a1) >> 2);
}
// 1057553C: using guessed type int dword_1057553C;

//----- (1002C190) --------------------------------------------------------
_BYTE *__cdecl sub_1002C190(_BYTE *a1) {
  _BYTE *result; // eax

  result = a1;
  a1[6] >>= 1;
  a1[5] >>= 1;
  a1[4] >>= 1;
  return result;
}

//----- (1002C1B0) --------------------------------------------------------
_BYTE *__cdecl sub_1002C1B0(_BYTE *a1) {
  _BYTE *result; // eax

  result = a1;
  a1[2] >>= 1;
  a1[1] >>= 1;
  *a1 >>= 1;
  a1[6] >>= 1;
  a1[5] >>= 1;
  a1[4] >>= 1;
  return result;
}

//----- (1002C1F0) --------------------------------------------------------
int __cdecl sub_1002C1F0(int a1) {
  int result; // eax

  result = dword_1067B548;
  if (dword_1067B548 < 2048) {
    dword_1067B550[dword_1067B548] = a1;
    dword_1067B548 = ++result;
  }
  return result;
}
// 1067B548: using guessed type int dword_1067B548;

//----- (1002C210) --------------------------------------------------------
_DWORD *__thiscall meth_1002C210(void *this) {
  int i;          // esi
  _DWORD *result; // eax
  _DWORD *v3;     // ecx
  int v4;         // ecx

  for (i = 0; i < 3; ++i)
    meth_DebugPrint(this);
  dword_1067D570 ^= 1u;
  dword_1067D578 = thunk_10060E90();
  dword_1067D57C = 0;
  result = (_DWORD *)((char *)&unk_1067D584 + 6144 * dword_1067D570);
  v3 = (_DWORD *)((char *)&unk_1067D558 + 12 * dword_1067D570);
  *v3 = 0;
  v3[1] = 0;
  v3[2] = 0;
  v4 = 3;
  do {
    *result = 0;
    result += 512;
    --v4;
  } while (v4);
  return result;
}
// 1002C222: variable 'this' is possibly undefined
// 1067D570: using guessed type int dword_1067D570;
// 1067D578: using guessed type int dword_1067D578;
// 1067D57C: using guessed type int dword_1067D57C;

//----- (1002C290) --------------------------------------------------------
int sub_1002C290() {
  unknown_libname_3();
  return atexit(unknown_libname_4);
}
// 1002C2A0: using guessed type int unknown_libname_3(void);

//----- (1002C2D0) --------------------------------------------------------
int __thiscall meth_1002C2D0(void *this) {
  int result; // eax
  void *v2;   // eax

  result = dword_106909B0;
  if (dword_106909B0) {
    if (dword_106909B0 == -1) {
      v2 = (void *)dword_106C2CFC;
      dword_106C2CFC = 0;
      this = v2;
    }
    sub_1003563A(C);
    result = dword_106909B0;
    if (dword_106909B0 == -1)
      dword_106C2CFC = (int)this;
  }
  return result;
}
// 106909B0: using guessed type int dword_106909B0;
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (1002C320) --------------------------------------------------------
void __thiscall meth_1002C320(void *this) {
  void *v1; // ecx
  void *v2; // ecx
  void *v3; // ecx

  if (!dword_106909B4) {
    meth_DebugPrint(this);
    meth_1002C2D0(v1);
    meth_DebugPrint(v2);
    sub_100397C0();
    meth_DebugPrint(v3);
  }
}
// 1002C347: variable 'v1' is possibly undefined
// 1002C35C: variable 'v2' is possibly undefined
// 1002C379: variable 'v3' is possibly undefined
// 106909B4: using guessed type int dword_106909B4;

//----- (1002C390) --------------------------------------------------------
int sub_1002C390() {
  gGameMode = GAME_MODE_4;
  dword_106805B8 = 2;
  return sub_10034C66((int)sub_1002C500);
}
// 106805B8: using guessed type int dword_106805B8;

//----- (1002C3C0) --------------------------------------------------------
char (*sub_1002C3C0())[8] {
  char(*result)[8]; // eax
  int v1;           // edi
  int *v2;          // ecx
  int v3;           // eax
  int v4;           // edi

  result = off_100A66FC;
  v1 = g_Height1;
  if (off_100A66FC) {
    v2 = (int *)&unk_100A66F4;
    do {
      v3 = *v2;
      v2 += 4;
      v4 = 3 * v3 / 4 + v1;
      *(v2 - 5) = v4;
      result = (char(*)[8])v2[2];
      v1 = *(v2 - 4) + *(v2 - 3) - 3 * *(v2 - 4) / 4 + v4;
    } while (result);
  }
  return result;
}
// 100A66FC: using guessed type char (*off_100A66FC)[8];
// 106C299C: using guessed type int g_Height1;

//----- (1002C410) --------------------------------------------------------
char (*sub_1002C410())[8] {
  char(*result)[8]; // eax
  int v1;           // ecx

  result = off_100A66FC;
  if (off_100A66FC) {
    result = (char(*)[8]) & unk_100A66F0;
    do {
      v1 = *(_DWORD *)result;
      result += 2;
      *(_DWORD *)&(*result)[-16] = v1 - 1;
    } while (*(_DWORD *)&(*result)[12]);
  }
  return result;
}
// 100A66FC: using guessed type char (*off_100A66FC)[8];

//----- (1002C430) --------------------------------------------------------
void __cdecl sub_1002C430(int a1) {
  float v1; // [esp+0h] [ebp-Ch]

  if (*(_DWORD *)(a1 + 1840)) {
    v1 = *(float *)(a1 + 488) * *(float *)(a1 + 488) + *(float *)(a1 + 492) * *(float *)(a1 + 492) +
         *(float *)(a1 + 496) * *(float *)(a1 + 496);
    *(float *)(a1 + 4144) = sqrt_(v1) * 2.24;
  }
  meth_10075F10(a1);
}

//----- (1002C4A0) --------------------------------------------------------
int sub_1002C4A0() {
  int result; // eax
  int v1;     // esi
  char *v2;   // edi

  result = dword_100B36F8;
  v1 = 0;
  if (dword_100B36F8 > 0) {
    v2 = (char *)&unk_10ACD498;
    do {
      meth_100664C0((int)v2);
      result = dword_100B36F8;
      ++v1;
      v2 += 128;
    } while (v1 < dword_100B36F8);
  }
  return result;
}
// 100B36F8: using guessed type int dword_100B36F8;

//----- (1002C4D0) --------------------------------------------------------
unsigned int sub_1002C4D0() {
  meth_10075190(stru_106806B0);
  dword_1068093C = -1;
  dword_100A66E8 = 1;
  return sub_10075100();
}
// 100A66E8: using guessed type int dword_100A66E8;
// 1068093C: using guessed type int dword_1068093C;

//----- (1002C500) --------------------------------------------------------
int __usercall sub_1002C500 @<eax>(double a1 @<st0>) {
  DWORD ticks;               // eax
  int oldTicks;              // esi
  DWORD ticks_1;             // edx
  int v4;                    // eax
  int ticksDiff;             // edx
  int v6;                    // esi
  void *v7;                  // ecx
  int v8;                    // eax
  void *v9;                  // ecx
  void *v10;                 // ecx
  int chosenTrack1;          // eax
  void *v12;                 // ecx
  int v13;                   // eax
  int *v14;                  // eax
  int v15;                   // ecx
  void **v16;                // eax
  _DWORD *v17;               // edx
  int savedRecordingLength;  // ecx
  int v19;                   // eax
  int v20;                   // ecx
  char *v21;                 // ecx
  _DWORD *v22;               // ecx
  int v23;                   // edi
  void **v24;                // eax
  int v25;                   // ecx
  char *v26;                 // esi
  char *v27;                 // edx
  _BYTE *v28;                // edx
  void *v29;                 // ecx
  void *v30;                 // ecx
  int v31;                   // eax
  bool v32;                  // zf
  int chosenTrack;           // eax
  void *v34;                 // ecx
  void *v35;                 // ecx
  int v36;                   // edi
  _BYTE *v37;                // esi
  int v38;                   // ecx
  void *v39;                 // eax
  int v40;                   // ecx
# 505 ** v41;                // eax
# 505 * v42;                 // edx
  int v43;                   // edx
  int *v44;                  // eax
  int v45;                   // edx
  int v46;                   // eax
  int v47;                   // edi
  void(__cdecl * *v48)(int); // esi
  enum MACRO_GAME_MODE v49;  // eax
  bool v50;                  // cc
  char *v51;                 // esi
  char *v52;                 // ebx
  char v53;                  // al
  _DWORD *v54;               // ebp
  _WORD *v55;                // edi
  char v56;                  // al
  unsigned __int16 v57;      // ax
  char *v58;                 // ebp
  char *v59;                 // edi
  int v60;                   // eax
  char *v61;                 // eax
  char *v62;                 // eax
  int v63;                   // eax
  int v64;                   // edx
  int v65;                   // edi
  _DWORD *v66;               // esi
  enum MACRO_GAME_MODE v67;  // eax
  int v68;                   // edx
  void *v69;                 // ecx
  int v70;                   // eax
  int v71;                   // edi
  unk00144 *v72;             // esi
  _DWORD *v73;               // ecx
  int v74;                   // edx
  int *v75;                  // eax
  int v76;                   // edi
  int *v77;                  // esi
  LPCSTR v78;                // eax
  int v79;                   // edi
  int *v80;                  // esi
  LPCSTR v81;                // eax
  int v82;                   // edi
  char *v83;                 // esi
  __int16 v84;               // dx
  char *v85;                 // eax
  int v86;                   // edi
  enum MACRO_GAME_MODE v87;  // esi
  int j;                     // edi
  int v89;                   // eax
  int v90;                   // edx
  int v91;                   // edx
  int v92;                   // eax
  int v93;                   // esi
  unk00144 *v94;             // edi
  int v95;                   // eax
  int v96;                   // esi
  _DWORD *v97;               // edi
  int v98;                   // esi
  char *v99;                 // edi
  int v100;                  // esi
  _DWORD *v101;              // edi
  int v102;                  // edi
  unk00144 *v103;            // esi
  void *v104;                // ecx
  void *v105;                // ecx
  void *v106;                // ecx
  int v107;                  // edx
  int *v108;                 // esi
  int v109;                  // eax
  int v110;                  // ebx
  int v111;                  // ecx
  float *v112;               // edi
  double v113;               // st7
  double v115;               // st7
  unsigned __int8 v116;      // c0
  unsigned __int8 v117;      // c3
  int v118;                  // edi
  unk00144 *v119;            // esi
  int *v120;                 // ebx
  void *v121;                // ecx
  int v122;                  // edi
  int v123;                  // ebp
  int *v124;                 // esi
  void *v125;                // ecx
  int v126;                  // ebx
  int v127;                  // ebp
  unsigned int k;            // eax
  int v129;                  // ecx
  int v130;                  // edx
  char *v131;                // ecx
  char *v132;                // ecx
  int v133;                  // ebx
  _DWORD *v134;              // ebp
  int v135;                  // eax
  int v136;                  // edi
  int v137;                  // edx
  int **v138;                // esi
  int v139;                  // ecx
  int v140;                  // eax
  int *v141;                 // esi
  double v142;               // st7
  int v143;                  // ecx
  void **v144;               // esi
  int v145;                  // edx
  int v146;                  // eax
  int v147;                  // edi
  int *v148;                 // esi
  int v149;                  // eax
  int v150;                  // ecx
  int v151;                  // edi
  int v152;                  // esi
  int *v153;                 // ebx
  int v154;                  // edx
  int v155;                  // ecx
  void **v156;               // esi
  int v157;                  // ebx
  char *v158;                // edx
  int v159;                  // ebp
  void **v160;               // ebx
  int v161;                  // esi
  int v162;                  // edi
  int v163;                  // eax
  void **v164;               // eax
  _DWORD *v165;              // ecx
  int v166;                  // edx
  int v167;                  // eax
  int result;                // eax
  int v169;                  // esi
  DWORD v170;                // eax
  int v171;                  // ecx
  int v172;                  // [esp+0h] [ebp-48h]
  float v173;                // [esp+0h] [ebp-48h]
  float v174;                // [esp+0h] [ebp-48h]
  float v175;                // [esp+0h] [ebp-48h]
  _DWORD *v176;              // [esp+14h] [ebp-34h]
  int v177;                  // [esp+14h] [ebp-34h]
  int v178;                  // [esp+18h] [ebp-30h]
  int v179;                  // [esp+18h] [ebp-30h]
  float v180;                // [esp+18h] [ebp-30h]
  int *v181;                 // [esp+18h] [ebp-30h]
  int v182;                  // [esp+1Ch] [ebp-2Ch]
  int i;                     // [esp+1Ch] [ebp-2Ch]
  int v184;                  // [esp+1Ch] [ebp-2Ch]
  int *v185;                 // [esp+20h] [ebp-28h]
  int v186;                  // [esp+20h] [ebp-28h]
  int v187;                  // [esp+20h] [ebp-28h]
  int v188;                  // [esp+20h] [ebp-28h]
  int v189;                  // [esp+20h] [ebp-28h]
  int v190[3];               // [esp+24h] [ebp-24h] BYREF
  int v191[3];               // [esp+30h] [ebp-18h] BYREF
  float v192[3];             // [esp+3Ch] [ebp-Ch] BYREF

  ticks = getTicks();
  oldTicks = gTicks;
  ticks_1 = ticks;
  gTicks = ticks;
  v4 = dword_100AA00C;
  ticksDiff = ticks_1 - oldTicks;
  v6 = dword_100AA008;
  if (dword_100AA00C < 0) {
    v4 = 0;
    if (dword_100AA008 > 0) {
      memset32(dword_10680758, ticksDiff, dword_100AA008);
      v4 = v6;
    }
  }
  v7 = (void *)++dword_1068093C;
  if (dword_1068093C)
    dword_106909D4 += ticksDiff;
  else
    dword_106909D4 = 0;
  v8 = v4 + 1;
  dword_100AA00C = v8;
  if (v8 >= v6) {
    v8 = 0;
    dword_100AA00C = 0;
  }
  dword_10680758[v8] = ticksDiff;
  if (dword_106909EC) {
    if (gNetworkPlay) {
      v70 = atomic_sub_10005D90();
      if (v70 >= 0 && !dword_106909E0)
        sub_1002F230(v70);
    }
    goto LABEL_177;
  }
  *(_DWORD *)&gUnk06594.gap1C8[12460] = 1;
  meth_DebugPrint(v7);
  sub_1000F620();
  if (!dword_106909E0) {
    meth_DebugPrint(v9);
    meth_DebugPrint(v10);
    dword_10B501CC();
    dword_118AA0D0();
    off_100B8C94();
    chosenTrack1 = 12;
    if (gGameMode != GAME_MODE_5)
      chosenTrack1 = gChosenTrack;
    ParseHNDFileFromIndex(chosenTrack1);
    sub_10074DD0();
    dword_10B501C8();
    sub_1002B950();
  }
  sub_10032873(dword_106C1628);
  meth_DebugPrint(v12);
  sub_10032873(dword_106C1628);
  sub_1003BD40(123);
  dword_106909E4 = 0;
  if (gGameMode != GAME_MODE_1 && gGameMode != GAME_MODE_6 && gGameMode != GAME_MODE_2)
    dword_100BD3E0 = 3;
  dword_117554E8 = 0;
  switch (gGameMode) {
  case GAME_MODE_0:
    dword_100B36F8 = 20;
    dword_100B36FC = 3;
    meth_10076AE0(&stru_10ACDEA8, gChosenCar);
    goto LABEL_31;
  case GAME_MODE_1:
    dword_100B36F8 = 2;
    dword_100B36FC = 2;
    meth_10076AE0(&stru_10ACDEA8, gChosenCar);
    meth_10076AE0(dword_10AD0A10, gChosenCar);
    dword_10AD33C4 = 0;
    goto LABEL_31;
  case GAME_MODE_2:
    meth_10076AE0(&stru_10ACDEA8, gChosenCar);
    dword_106909E4 = 0;
    dword_10680610 = 1;
    dword_100B36F8 = dword_100B4050 + 1;
    dword_100B36FC = dword_100B4050 + 1;
    savedRecordingLength = 1389 * dword_100B4050;
    *((_DWORD *)*(&dword_10AD0868 + 2778 * dword_100B4050) + 17) = &unk_117554F0;
    meth_DebugPrint((void *)savedRecordingLength);
    qmemcpy(
        *((void **)*(&dword_10AD0868 + 2778 * dword_100B4050) + 17), dword_10680738, ElementCount);
    v19 = 2778 * dword_100B4050;
    v20 = *(char *)(*((_DWORD *)*(&dword_10AD0868 + 2778 * dword_100B4050) + 17) + 1);
    dword_10AD084C[v19] = v20;
    meth_10076AE0(&stru_10ACDEA8.gap0[v19 * 4], v20);
    sub_1006ABB0();
    v21 = (char *)*((_DWORD *)*(&dword_10AD0868 + 2778 * dword_100B4050) + 17);
    if (*v21 == gChosenTrack && (v21 = (char *)v21[7], v21 == (char *)gChosenWeather0)) {
      meth_DebugPrint(v21);
      v22 = *(&dword_10AD0868 + 2778 * dword_100B4050);
      v22[18] = 8;
      meth_DebugPrint(v22);
      *((_DWORD *)*(&dword_10AD0868 + 2778 * dword_100B4050) + 19) = ElementCount;
    } else {
      meth_DebugPrint(v21); // wrong track
      *((_DWORD *)*(&dword_10AD0868 + 2778 * dword_100B4050) + 17) = 0;
      dword_100B36FC = 1;
      dword_100B36F8 = 1;
    }
    v23 = 0;
    if (dword_100B4050 > 0) {
      v24 = &dword_10AD0868;
      v25 = 44;
      v26 = (char *)&unk_117644F0;
      do {
        v27 = (char *)*v24;
        ++v23;
        v24 += 2778;
        *(_DWORD *)&v27[v25] = v26;
        v26 += 61440;
        v28 = *(_BYTE **)((char *)*(v24 - 2778) + v25);
        v25 += 4;
        *v28 = gChosenTrack;
        *(_BYTE *)(*(_DWORD *)((char *)*(v24 - 2778) + v25 - 4) + 1) = *((_BYTE *)v24 - 11136);
        *(_BYTE *)(*(_DWORD *)((char *)*(v24 - 2778) + v25 - 4) + 2) =
            *((_BYTE *)*(v24 - 4519) + 248);
        *(_BYTE *)(*(_DWORD *)((char *)*(v24 - 2778) + v25 - 4) + 3) =
            *((_BYTE *)*(v24 - 4519) + 252);
        *(_BYTE *)(*(_DWORD *)((char *)*(v24 - 2778) + v25 - 4) + 4) =
            *((_BYTE *)*(v24 - 4519) + 256);
        *(_BYTE *)(*(_DWORD *)((char *)*(v24 - 2778) + v25 - 4) + 5) =
            *((_BYTE *)*(v24 - 4519) + 260);
        *(_BYTE *)(*(_DWORD *)((char *)*(v24 - 2778) + v25 - 4) + 6) =
            *((_BYTE *)*(v24 - 4519) + 264);
        *(_BYTE *)(*(_DWORD *)((char *)*(v24 - 2778) + v25 - 4) + 7) = gChosenWeather0;
        *(_DWORD *)((char *)*(v24 - 2778) + v25 + 4) = 8;
        *(_DWORD *)((char *)*(v24 - 2778) + v25 + 12) = 56924;
      } while (v23 < dword_100B4050);
    }
    goto LABEL_61;
  case GAME_MODE_4:
    gChosenWeather1 = 1;
    dword_100B4050 = 1;
    dword_100B36F8 = 1;
    dword_100B36FC = 1;
    dword_106909E4 = 0;
    dword_10ACED30 = 0;
    *((_DWORD *)dword_10AD0868 + 17) = dword_10680738;
    if (dword_106805B8) {
      if (dword_106805B8 == 1) {
        sub_10070AF0(aRallycreditsDa, 0);
      } else {
        if (dword_106805B8 != 2)
          goto LABEL_51;
        sub_1002C3C0();
        sub_10070AF0(kRallyOutroDat, 0);
      }
    } else {
      if (gNeedToPlayIntro2)
        sub_10070AF0(kRallyIntro2Dat, 0);
      else
        sub_10070AF0(kRallyIntro1Dat, 0);
      if (++gNeedToPlayIntro2 > 1)
        gNeedToPlayIntro2 = 0;
    }
    sub_1006ABB0();
    dword_10680938 = 0;
  LABEL_51:
    *((_DWORD *)dword_10AD0868 + 11) = 0;
    *((_DWORD *)dword_10AD0868 + 12) = 0;
    byte_10AD0854[0] = -1;
    byte_10AD0855[0] = -1;
    byte_10AD0856[0] = -1;
    gChosenTrack = **((char **)dword_10AD0868 + 17);
    dword_10AD084C[0] = *(char *)(*((_DWORD *)dword_10AD0868 + 17) + 1);
    meth_10076AE0(&stru_10ACDEA8, dword_10AD084C[0]);
    dword_10ACED40 = *(char *)(*((_DWORD *)dword_10AD0868 + 17) + 2);
    dword_10ACED44 = *(char *)(*((_DWORD *)dword_10AD0868 + 17) + 3);
    dword_10ACED38 = *(char *)(*((_DWORD *)dword_10AD0868 + 17) + 4);
    dword_10ACED3C[0] = *(char *)(*((_DWORD *)dword_10AD0868 + 17) + 5);
    *((_BYTE *)dword_10AD0868 + 37) = *(_BYTE *)(*((_DWORD *)dword_10AD0868 + 17) + 6);
    gChosenWeather0 = *(char *)(*((_DWORD *)dword_10AD0868 + 17) + 7);
    gChosenWeather1 = gChosenWeather0;
  LABEL_61:
    if (gGameMode == GAME_MODE_5)
      dword_106C3364 = 0;
    else
      dword_106C3364 = ((unsigned int)gTrackData[gChosenTrack]->field_4 >> 4) & 1;
    sub_10069740(gChosenWeather1);
    if (gGameMode != GAME_MODE_4 && !dword_106909E0) {
      meth_DebugPrint(v29);
      meth_DebugPrint(v30);
    }
    car_MakeEnemyCarColorPanels();
    v31 = dword_106909E0;
    v32 = dword_106909E0 == 0;
    if (!dword_106909E0) {
      chosenTrack = 12;
      if (gGameMode != GAME_MODE_5)
        chosenTrack = gChosenTrack;
      LoadTrack(chosenTrack);
      v31 = dword_106909E0;
      v32 = dword_106909E0 == 0;
      if (!dword_106909E0) {
        dword_10680624 = 0;
        dword_1068061C = 0;
        dword_10680618 = 0;
        dword_10680638 = 0;
        dword_10680634 = 0;
        dword_1068063C = 0;
        dword_10680640 = 0;
        dword_10680628 = 0;
        dword_1068062C = 0;
        meth_DebugPrint(v34);
        v36 = 0;
        dword_10680940 = 0;
        if (*(int *)&gUnk06594.gap4A2C[192] > 0) {
          v37 = gUnk06594.gap4A2C;
          do {
              switch (v37[8]) {
              case 3:
                  dword_10680618 = *(void **)v37;
                  goto LABEL_79;
              case 4:
                  dword_1068062C = *((_DWORD *)v37 + 1);
                  dword_10680634 = *(_DWORD *)v37;
                  goto LABEL_79;
              case 5:
                  dword_10680638 = *(_DWORD *)v37;
                  goto LABEL_79;
              case 6:
                  dword_1068061C = *(_DWORD *)v37;
                  goto LABEL_79;
              case 7:
                  v38 = dword_10680940;
                  dword_106805D0[dword_10680940] = *(_DWORD *)v37;
                  v35 = (void *)(v38 + 1);
                  dword_10680940 = (int)v35;
              LABEL_79:
                  meth_DebugPrint(v35);
                  break;
              default:
                  break;
              }
              ++v36;
              v37 += 12;
          } while (v36 < *(int *)&gUnk06594.gap4A2C[192]);
        }
        if (dword_1068061C && dword_10680634 && dword_10680638) {
          v39 = dword_10680618;
        } else {
          v39 = 0;
          dword_10680618 = 0;
        }
        if (v39) {
          v191[0] = 1065353216;
          v191[1] = 0;
          v191[2] = 0;
          sub_1003B1F0((float *)v191,
                       (float *)v191,
                       (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)v39));
          flt_10680630 = sub_1003B170((float *)v191);
        }
        v31 = dword_106909E0;
        v32 = dword_106909E0 == 0;
        dword_10680620 = dword_100BD3E0 - 1;
      }
    }
    dword_100AA8B4 = 1;
    if (v32)
      dword_100AA8B4 = dword_100B4050;
    dword_106C1638 = v31 != 0 ? dword_10680668 : 0;
    dword_106C1690 = dword_106C1638 == 0;
    if (gGameMode == GAME_MODE_4) {
      dword_10AD05DC[0] = (int)&unk_10AD0628;
      dword_10AF9BB0 = 180;
      goto LABEL_108;
    }
    v40 = 0;
    if (dword_100B4050 <= 0)
      goto LABEL_102;
    v41 = &dword_10ACED34;
    break;
  case GAME_MODE_5:
    dword_100B4050 = 1;
    dword_100B36F8 = 1;
    dword_100B36FC = 1;
    dword_106909E4 = 0;
    dword_106909E0 = 0;
    dword_10ACED30 = 0;
    dword_10AD05DC[0] = (int)&unk_10AD0628;
    dword_10AF9BB0 = 0;
    goto LABEL_61;
  case GAME_MODE_6:
    if (dword_106909E0)
      goto LABEL_32;
    dword_100B4050 = 1;
    if (dword_1022AF1C) {
      dword_100B36F8 = 0;
      dword_100B36FC = 0;
    } else {
      dword_100B36F8 = 1;
      dword_100B36FC = 1;
    }
    meth_10076AE0(&stru_10ACDEA8, gChosenCar);
    if (gNetworkPlay) {
      atomic_sub_10005960();
      atomic_sub_10006090();
      np_sub_10004A90();
      dword_10ACDFEC[0] = sub_10005D30();
      strcpy(byte_10ACDFF0, dplay4aShortName);
      np_sub_10005EE0(dword_10ACDFEC[0], dplay4aShortName);
    }
    while (dword_100B36FC < (unsigned int)sub_1000C670()) {
      v13 = atomic_sub_10005D40();
      if (v13 >= 0)
        sub_1002F130(v13);
    }
  LABEL_31:
    if (dword_106909E0) {
    LABEL_32:
      sub_10067960((int)&unk_1020AB98 - 89992 * dword_10680668);
      v14 = dword_118AC730;
      do {
        v14[1] = 0;
        *v14 = 0;
        v14 += 6;
      } while ((int)v14 < (int)&unk_118AC898);
    } else {
      v15 = 0;
      if (dword_100B4050 > 0) {
        v16 = &dword_10AD0868;
        do {
          v17 = *v16;
          ++v15;
          v16 += 2778;
          v17[17] = 0;
          *((_DWORD *)*(v16 - 2778) + 11) = 0;
          *((_DWORD *)*(v16 - 2778) + 12) = 0;
        } while (v15 < dword_100B4050);
      }
    }
    dword_106909E4 = dword_106909E0 == 0;
    goto LABEL_61;
  default:
    meth_10076AE0(&stru_10ACDEA8, gChosenCar);
    dword_106909E4 = 0;
    dword_100B36F8 = dword_100B4050;
    dword_100B36FC = dword_100B4050;
    goto LABEL_61;
  }
  do {
    v41[4] = (#505 *)*((_DWORD *)*v41 + 63);
    v41[2] = (#505 *)*((_DWORD *)*v41 + 65);
    v41[1] = (#505 *)*((_DWORD *)*v41 + 64);
    v41[3] = (#505 *)*((_DWORD *)*v41 + 62);
    if (gConfigJoystickIndex == 1 || gConfigJoystickIndex == 2) {
      v42 = v41[1741];
    } else {
      v42 = v41[1741];
      if (gConfigJoystickIndex != 3) {
        *((_BYTE *)v42 + 37) = 2;
        goto LABEL_101;
      }
    }
    *((_BYTE *)v42 + 37) = 5;
  LABEL_101:
    ++v40;
    v41 += 2778;
  } while (v40 < dword_100B4050);
LABEL_102:
  if (gGameMode == GAME_MODE_2 && (v43 = *(_DWORD *)(dword_10AD33D0 + 68)) != 0) {
    dword_10AD18A8 = *(char *)(v43 + 2);
    dword_10AD18AC = *(char *)(*(_DWORD *)(dword_10AD33D0 + 68) + 3);
    dword_10AD18A0 = *(char *)(*(_DWORD *)(dword_10AD33D0 + 68) + 4);
    dword_10AD18A4 = *(char *)(*(_DWORD *)(dword_10AD33D0 + 68) + 5);
    *(_BYTE *)(dword_10AD33D0 + 37) = *(_BYTE *)(*(_DWORD *)(dword_10AD33D0 + 68) + 6);
  } else if (v40 < dword_100B36FC) {
    v44 = &dword_10ACED3C[2778 * v40];
    do {
      v44[2] = 1;
      *v44 = 1;
      *(v44 - 1) = 2;
      v44[1] = 0;
      v45 = v44[1739];
      ++v40;
      v44 += 2778;
      *(_BYTE *)(v45 + 37) = 0;
    } while (v40 < dword_100B36FC);
  }
LABEL_108:
  if (!dword_106909E0) {
    v46 = dword_100B36FC;
    v47 = 0;
    dword_106909B8 = 0;
    if (dword_100B36FC > 0) {
      v48 = (void(__cdecl **)(int)) & unk_10ACEDB0;
      while (1) {
        v49 = gGameMode;
        v50 = v47 < dword_100B4050;
        v48[1706] = (void(__cdecl *)(int))1065353216;
        if (v50)
          break;
        if (v49 != GAME_MODE_2) {
          if (v49 == GAME_MODE_6) {
              *v48 = sub_1002C430;
          } else {
              meth_10063420(v48 - 962);
              *v48 = sub_10065620;
          }
          goto LABEL_118;
        }
        *v48 = sub_10063FE0;
        *((_BYTE *)v48 + 6823) = 2;
        v48[1706] = (void(__cdecl *)(int))1052770304;
      LABEL_119:
        if (!*(v48 - 32))
          meth_10076A70((unsigned __int8 *)v48 - 3848, v47, (int)v48[1704]);
        meth_10065740(v48 - 962);
        v46 = dword_100B36FC;
        v48[29] = 0;
        v48[61] = 0;
        v48[63] = 0;
        ++v47;
        v48 += 2778;
        if (v47 >= v46)
          goto LABEL_122;
      }
      *v48 = sub_10063FE0;
    LABEL_118:
      *((_BYTE *)v48 + 6823) = 0;
      goto LABEL_119;
    }
  LABEL_122:
    if (!v46) {
      memset(byte_100C12A0, 0, sizeof(byte_100C12A0));
      meth_10076A40(&stru_10ACDEA8, 0);
      meth_10065740(&stru_10ACDEA8);
      meth_100019D0((#479 *)&stru_10ACDEA8);
      flt_10AD061C = flt_10AD061C - -1.0;
    }
    v178 = 0;
    if (dword_100AA8B4 > 0) {
      v185 = dword_100A73A8;
      v176 = &unk_106C163C;
      do {
        v51 = &byte_100C12A0[89992 * *(v176 - 1)];
        v52 = v51 + 768;
        if (gChosenWeather1 != 4)
          v52 = v51 + 256;
        *v176 = graphics_dword_118AA0AC(
            v51 + 1280, v52, v51[228], v51[229], v51[228], 1, 2, 0, 0, 1, 1, 0, 0, 0, 0);
        v53 = v51[219];
        if (v53 == 1 || v53 == 2) {
          v54 = v176 + 1;
          dword_118AA09C = 1;
          v55 = v52 + 510;
          v182 = 15;
          do {
              v56 = v51[219];
              if (v56 == 1) {
                  v57 = *v55 & 0x3000;
                  HIBYTE(v57) |= 8u;
                  *v55 = (unsigned __int8)((unsigned __int16)((32 * (*v55 & 0xC6)) | (v57 >> 11)) >>
                                           8);
              } else if (v56 == 2) {
                  *v55 &= 0xFEFFu;
              }
              *v54++ = graphics_dword_118AA0AC(
                  v51 + 1280, v52, v51[228], v51[229], v51[228], 1, 2, 0, 0, 1, 1, 0, 0, 0, 0);
              --v55;
              --v182;
          } while (v182);
          dword_118AA09C = 0;
        }
        v58 = v51 + 1280;
        v176[16] = graphics_dword_118AA0AC(&v51[v51[229] * v51[228] + 1280],
                                           v52,
                                           v51[232],
                                           v51[233],
                                           v51[232],
                                           1,
                                           2,
                                           0,
                                           0,
                                           1,
                                           1,
                                           0,
                                           0,
                                           1,
                                           0);
        v59 = &v51[-(v51[233] * v51[232] * (v51[216] + 2)) + 0x8000];
        memcpy(v59, &v51[v51[229] * v51[228] + 1280], v51[233] * v51[232] * (v51[216] + 2));
        for (i = 0; i < v51[216] + 2; ++i) {
          v60 = dword_118AA0A8(v58, v59, v52, v51[232], v51[233], v51[232], 1, 2);
          v58 += v60;
          *((_DWORD *)v51 + 63) = v60;
          if (v58 > v59) {
              v61 = (char *)GetStringWithIndex(0x12Cu);
              s_noreturn_10008CF0(v61);
          }
          v59 += v51[233] * v51[232];
          if (v58 - v51 > 0x8000) {
              v62 = (char *)GetStringWithIndex(0x12Du);
              s_noreturn_10008CF0(v62);
          }
        }
        *v185++ = -1;
        ++v178;
        v176 += 22;
      } while (v178 < dword_100AA8B4);
    }
  }
  if (dword_106909E0)
    v63 = 4;
  else
    v63 = gGameMode != GAME_MODE_5 ? 0 : 4;
  a1 = flt_100AA22C[2 * v63];
  v64 = dword_100AA228[2 * v63];
  dword_106805A8 = v63;
  flt_106806D8 = a1;
  dword_10680750 = v64;
  if (!dword_106909E0) {
    v65 = 0;
    dword_118AB470 = 0;
    if (dword_100B36F8 > 0) {
      v66 = &unk_10ACD498;
      do {
        meth_100662A0(v66);
        ++v65;
        v66 += 32;
      } while (v65 < dword_100B36F8);
    }
  }
  sub_100697C0(gChosenWeather1);
  if (!*(_DWORD *)&gUnk06594.gap1C8[12500] && (!gChosenTrack || gChosenTrack == 6))
    dword_10680618 = 0;
  sub_1002B130(1.0, 0.2);
  sub_1002B1C0(1.0, 0.2);
  sub_1002B220(1.0, 0.2);
  dword_106909EC = 1;
  if (!dword_106909E0) {
    C = (unsigned int)&unk_10680950;
    sub_10036BD0((int)&unk_10680950, (int)aMiscModellight);
    _ismbbkprint(C);
  }
  sub_1003A4D0();
  sub_1006AE20();
  dword_106909B4 = 0;
  dword_106909F0 = 0;
  dword_106806E0 = -1;
  dword_106806DC = 0;
  dword_106805C0 = 0;
  *(_DWORD *)&gUnk06594.gap1C8[12544] = 1;
  if (!dword_106909E0) {
    _cfltcvt_init();
    sub_10067DC0();
  }
  *(_DWORD *)&gUnk06594.gap1C8[12460] = 0;
  if (dword_106909E0) {
    sub_1006ABB0();
  } else {
    sub_1006AA50();
    v67 = gGameMode;
    if (gGameMode == GAME_MODE_4) {
      __setargv_0();
      v67 = gGameMode;
    }
    if (byte_100BBAD8) {
      if (v67 == GAME_MODE_4 && dword_106805B8 == 2) {
        pm_sub_100027C0(12);
      } else if (v67 == GAME_MODE_4 && dword_106805B8 == 1) {
        pm_sub_100027C0(13);
      } else {
        v172 = pm_sub_100028D0();
        pm_sub_100027C0(v172);
      }
      LOBYTE(v68) = byte_100BBAD8;
      pm_sub_100029F0(v68);
    }
  }
  sub_10016910();
  meth_DebugPrint(v69);
  sub_1002C4D0();
LABEL_177:
  word_11782BC0 = 0;
  if (dword_10680750 == 4) {
    v71 = 0;
    if (dword_100B4050 > 0) {
      v72 = &stru_10ACDEA8;
      do {
        meth_100679C0(v72);
        ++v71;
        v72 = (unk00144 *)((char *)v72 + 11112);
      } while (v71 < dword_100B4050);
    }
  }
  if (gGameMode != GAME_MODE_4 && !dword_106909B4)
    dword_117554E8 ^= 1u;
  sub_10034AD5();
  dword_106909B0 = 0;
  v177 = dword_106909B4;
  dword_106909D0 = 0;
  if (dword_10680750 < 3) {
    if (gIsGameMode4) {
      v74 = dword_100B4050;
      if (dword_100B4050 > 0) {
        v75 = &dword_10ACEEB0;
        v73 = (_DWORD *)dword_100B4050;
        do {
          *(v75 - 1) = 0;
          *v75 = 1008981770;
          v75 += 2778;
          v73 = (_DWORD *)((char *)v73 - 1);
        } while (v73);
      }
    } else if (gNetworkPlay && dword_118ABDC0) {
      v74 = dword_100B4050;
      v76 = 0;
      if (dword_100B4050 > 0) {
        v77 = &dword_10ACEEB0;
        do {
          v78 = GetStringWithIndex(0xEDu);
          v74 = dword_100B4050;
          *(v77 - 1) = (int)v78;
          *v77 = 1008981770;
          ++v76;
          v77 += 2778;
        } while (v76 < v74);
      }
    } else {
      v74 = dword_100B4050;
      v79 = 0;
      if (dword_100B4050 > 0) {
        v80 = &dword_10ACEEB0;
        do {
          v81 = GetStringWithIndex(0xEEu);
          v74 = dword_100B4050;
          *(v80 - 1) = (int)v81;
          *v80 = 1008981770;
          ++v79;
          v80 += 2778;
        } while (v79 < v74);
      }
    }
    v82 = 0;
    dword_106909D0 = 1;
    if (dword_100B36F8 > 0) {
      v83 = byte_10ACD500;
      while (1) {
        *(_DWORD *)v83 |= 1u;
        v73 = (_DWORD *)*((_DWORD *)v83 - 2);
        if (v73 && v73[80] < v74) {
          if (gGameMode == GAME_MODE_1 || gGameMode == GAME_MODE_6) {
              v84 = gChosenWeather1 - 1;
              if ((__int16)(gChosenWeather1 - 1) > 2 || v84 < 0)
                  v84 = 0;
              v73[1020] = *(_DWORD *)&gTrackData[gChosenTrack]->last[84 * v73[921] + 24 + 28 * v84];
          }
          v73[1024] = 1065353216;
          if (dword_10680750) {
              if (dword_10680750 == 2) {
                  v73 = (_DWORD *)dword_106909CC;
                  dword_106909B0 = 1;
                  a1 = flt_100AA1F8[dword_106909CC];
                  if (a1 > flt_106806D8) {
                      if (++dword_106909CC == 4)
                          sub_10067D90();
                      else
                          sub_10067D80();
                  }
              }
          } else {
              dword_106909B0 = -1;
              dword_106909CC = 0;
          }
        }
        ++v82;
        v83 += 128;
        if (v82 >= dword_100B36F8)
          break;
        v74 = dword_100B4050;
      }
    }
    dword_106805BC = 0;
    goto LABEL_263;
  }
  switch (dword_10680750) {
  case 3:
    v73 = (_DWORD *)dword_100B36F8;
    dword_106909B0 = 1;
    dword_106909D0 = 1;
    if (dword_100B36F8 > 0) {
      v85 = byte_10ACD500;
      do {
        v86 = *(_DWORD *)v85;
        v85 += 128;
        v73 = (_DWORD *)((char *)v73 - 1);
        *((_DWORD *)v85 - 32) = v86 & 0xFFFFFFFE;
      } while (v73);
    }
    a1 = (flt_100AA22C[2 * dword_106805A8] - flt_106806D8) / flt_100AA22C[2 * dword_106805A8];
    *(float *)&dword_106805BC = a1 * a1 * 15.0;
  LABEL_263:
    if (!dword_106909B4) {
      a1 = flt_106806D8 - *(float *)&dword_106C2CFC;
      flt_106806D8 = a1;
      if (a1 < 0.0) {
      LABEL_265:
        if (gIsGameMode4) {
          ++dword_106805A8;
          a1 = flt_100AA22C[2 * dword_106805A8];
          v73 = (_DWORD *)dword_100AA228[2 * dword_106805A8];
          flt_106806D8 = flt_100AA22C[2 * dword_106805A8];
          dword_10680750 = (int)v73;
        }
      }
    }
    goto LABEL_272;
  case 4:
    v87 = gGameMode;
    v179 = 1;
    if (gGameMode == GAME_MODE_4) {
      if (dword_106805B8 == 2) {
        a1 = flt_10ACEE94;
        if (flt_10ACEE94 <= 140.0)
          goto LABEL_230;
      LABEL_232:
        if (!sub_1002B2A0()) {
          sub_1002B130(0.0, 0.2);
          sub_1002B1C0(0.0, 0.2);
          dword_106909F0 = 1;
          dword_106909E0 = 0;
          dword_106909E4 = 0;
          v179 = 0;
        }
        v87 = gGameMode;
      LABEL_235:
        v73 = (_DWORD *)dword_100B4050;
        for (j = 0; j < (int)v73; ++j) {
          if ((byte_10ACD500[128 * j] & 2) != 0) {
              if (v87 == GAME_MODE_2 && *((_DWORD *)*(&dword_10AD0868 + 2778 * j) + j + 11)) {
                  if (!j && (!dword_10ACEEA0 || SLOBYTE(dword_10680738[0]) != gChosenTrack ||
                             (int)ElementCount <= 8)) {
                      meth_DebugPrint(
                          (void *)(*((_DWORD *)dword_10AD0868 + 13) < (int)ElementCount));
                      ElementCount = 16;
                      v89 = *((_DWORD *)dword_10AD0868 + 11);
                      dword_10680738[0] = *(int **)v89;
                      v90 = *(_DWORD *)(v89 + 4);
                      dword_10680740 = 0;
                      dword_1068073C = v90;
                      dword_10680744 = 0;
                      dword_10ACEEA4 = (int)GetStringWithIndex(0xEFu);
                      dword_10ACEEA8 = 1065353216;
                      CreateMinuteSecondsString(byte_10ACEEB4, flt_10ACEE94);
                      dword_10ACEEAC = (int)byte_10ACEEB4;
                      dword_10ACEEB0 = 1065353216;
                      dword_10680610 = 1;
                  }
                  *((_DWORD *)*(&dword_10AD0868 + 2778 * j) + j + 11) = 0;
                  v87 = gGameMode;
                  v73 = (_DWORD *)dword_100B4050;
              } else if (v87 == GAME_MODE_1 || v87 == GAME_MODE_6) {
                  v91 = 0;
                  if ((int)v73 > 0) {
                      v92 = 60;
                      do {
                          ++v91;
                          *(_DWORD *)((char *)*(&dword_10AD0868 + 2778 * j) + v92) =
                              *(_DWORD *)((char *)*(&dword_10AD0868 + 2778 * j) + v92 - 8);
                          v73 = (_DWORD *)dword_100B4050;
                          v92 += 4;
                      } while (v91 < dword_100B4050);
                      v87 = gGameMode;
                  }
              }
          } else {
              v179 = 0;
          }
        }
        if (v179)
          goto LABEL_265;
        goto LABEL_272;
      }
      a1 = flt_10ACEE94;
      if (flt_10ACEE94 > 39.599998)
        goto LABEL_232;
    }
  LABEL_230:
    if (gGameMode == GAME_MODE_5) {
      a1 = flt_10ACEE94;
      if (flt_10ACEE94 > 16.0)
        goto LABEL_232;
    }
    goto LABEL_235;
  case 5:
    if ((gGameMode == GAME_MODE_2 || gGameMode == GAME_MODE_1 || gGameMode == GAME_MODE_0 ||
         gGameMode == GAME_MODE_6) &&
        !dword_106909E0) {
      sub_1002F2A0();
    }
    goto LABEL_265;
  case 6:
    goto LABEL_263;
  }
  if (dword_10680750 == 7 && !dword_106909F0) {
    sub_1002B1C0(0.0, 0.2);
    if (!dword_106909E4)
      sub_1002B220(0.0, 0.2);
    sub_1002B130(0.0, 0.2);
    dword_106909F0 = 1;
  }
LABEL_272:
  meth_DebugPrint(v73);
  sub_100633E0();
  v93 = 0;
  if (dword_100B36FC > 0) {
    v94 = &stru_10ACDEA8;
    do {
      meth_100683C0(v94);
      ++v93;
      v94 = (unk00144 *)((char *)v94 + 11112);
    } while (v93 < dword_100B36FC);
  }
  v95 = dword_100B36F8;
  v96 = 0;
  if (dword_100B36F8 > 0) {
    v97 = &unk_10ACD498;
    do {
      meth_10068EF0(v97);
      v95 = dword_100B36F8;
      ++v96;
      v97 += 32;
    } while (v96 < dword_100B36F8);
  }
  if (gNetworkPlay || dword_106909E0) {
    v98 = 0;
    if (v95 > 0) {
      v99 = (char *)&unk_10ACD498;
      do {
        sub_10069330((int)v99, a1);
        v95 = dword_100B36F8;
        ++v98;
        v99 += 128;
      } while (v98 < dword_100B36F8);
    }
  }
  v100 = 0;
  if (v95 > 0) {
    v101 = &unk_10ACD498;
    do {
      meth_10069370(v101);
      ++v100;
      v101 += 32;
    } while (v100 < dword_100B36F8);
  }
  if (gGameMode == GAME_MODE_0) {
    v102 = 0;
    if (dword_100B4050 > 0) {
      v103 = &stru_10ACDEA8;
      do {
        meth_10066650(v103);
        ++v102;
        v103 = (unk00144 *)((char *)v103 + 11112);
      } while (v102 < dword_100B4050);
    }
  }
  sub_10066510();
  if (!dword_106909B4 && dword_106909E0 != 2) {
    meth_DebugPrint(v104);
    sub_1003A530();
    meth_DebugPrint(v105);
    meth_100196D0(v106);
    if (dword_10680618 && !dword_10680624 &&
        (!*(_DWORD *)&gUnk06594.gap1C8[12508] && !*(_DWORD *)&gUnk06594.gap1C8[12504] &&
             !*(_DWORD *)&gUnk06594.gap1C8[12500] ||
         gChosenTrack != 2 && gChosenTrack != 8) &&
        dword_100B4050 > 0) {
      v107 = 0;
      v108 = (int *)&unk_10AD07F4;
      v186 = dword_100B4050;
      do {
        v109 = 0;
        if (*v108 > 0) {
          while (*(v108 - 1641) != dword_10680620 ||
                 (unsigned __int16)word_10AD07B4[v109 + v107] != dword_1068061C) {
              if (++v109 >= *v108)
                  goto LABEL_307;
          }
          dword_10680624 = 1;
        }
      LABEL_307:
        v107 += 5556;
        v108 += 2778;
        --v186;
      } while (v186);
    }
    v110 = 0;
    if (*(int *)&gUnk06594.gap4A2C[192] > 0) {
      v111 = dword_10680628;
      v112 = (float *)gUnk06594.gap4A2C;
      do {
        switch (*((_BYTE *)v112 + 8)) {
        case 0:
          sub_10030EE0((int)flt_106C08E0, v112[1], 0.0, 0.0, 1.0);
          goto LABEL_314;
        case 1:
          sub_10030EE0((int)flt_106C08E0, v112[1], 1.0, 0.0, 0.0);
          goto LABEL_314;
        case 2:
          sub_10030EE0((int)flt_106C08E0, v112[1], 0.0, 1.0, 0.0);
        LABEL_314:
          sub_100306C0(flt_106C08E0,
                       (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * *(_DWORD *)v112),
                       (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * *(_DWORD *)v112));
          *(_WORD *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * *(_DWORD *)v112 + 76) &= 0xDFFFu;
          goto LABEL_337;
        case 3:
          if (!dword_10680618 || !dword_10680624)
              goto LABEL_338;
          if (gChosenTrack == 1 || gChosenTrack == 7)
              v113 = *(float *)&dword_106C2CFC * -18.0;
          else
              v113 = *(float *)&dword_106C2CFC * -50.0;
          *(float *)&dword_1068063C = *(float *)&dword_1068063C - v113;
          if (*(float *)&dword_1068063C <= (double)*(float *)&dword_10680640)
              goto LABEL_332;
          break;
        default:
          goto LABEL_338;
        }
        while (1) {
          dword_10680628 = ++v111;
          *(float *)&dword_1068063C = *(float *)&dword_1068063C - *(float *)&dword_10680640;
          if (v111 >= dword_1068062C)
              break;
          sub_1003B050((float *)v191,
                       (float *)(dword_10680634 + 12 * v111 - 12),
                       (float *)(dword_10680638 + 12 * v111 - 12));
          sub_1003B050((float *)v190,
                       (float *)(12 * dword_10680628 + dword_10680634),
                       (float *)(12 * dword_10680628 + dword_10680638));
          *(float *)&dword_10680640 = sub_1003B0E0((float *)v191, (float *)v190);
          sub_1003AEE0((float *)&dword_10680650, (float *)v190, (float *)v191);
          sub_1003AE50((float *)&dword_10680650);
          v111 = dword_10680628;
          if (dword_10680628 >= 2) {
              sub_1003B050(v192,
                           (float *)(12 * (dword_10680628 - 2) + dword_10680634),
                           (float *)(12 * (dword_10680628 - 2) + dword_10680638));
              sub_1003AEE0((float *)&dword_10680644, (float *)v191, v192);
              sub_1003AE50((float *)&dword_10680644);
              v111 = dword_10680628;
          } else {
              dword_10680644 = dword_10680650;
              dword_10680648 = dword_10680654;
              dword_1068064C = dword_10680658;
          }
          if (v111 + 1 == dword_1068062C) {
              dword_1068065C = dword_10680650;
              dword_10680660 = dword_10680654;
              dword_10680664 = dword_10680658;
          } else {
              sub_1003B050(v192,
                           (float *)(12 * (v111 + 1) + dword_10680634),
                           (float *)(12 * (v111 + 1) + dword_10680638));
              sub_1003AEE0((float *)&dword_1068065C, v192, (float *)v190);
              sub_1003AE50((float *)&dword_1068065C);
              v111 = dword_10680628;
          }
          if (*(float *)&dword_1068063C <= (double)*(float *)&dword_10680640)
              goto LABEL_332;
        }
        dword_10680618 = 0;
      LABEL_332:
        if (dword_10680618) {
          v180 = *(float *)&dword_1068063C / *(float *)&dword_10680640;
          sub_1003AFA0(
              (int)v191, dword_10680634 + 12 * v111, dword_10680634 + 12 * v111 - 12, v180);
          sub_1003AFA0((int)v190,
                       dword_10680638 + 12 * dword_10680628,
                       dword_10680638 + 12 * dword_10680628 - 12,
                       v180);
          sub_1003B050(
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 48),
              (float *)v191,
              (float *)v190);
          v115 = v180;
          if (v116 | v117) {
              v174 = v115 - -0.5;
              sub_1003AFA0(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618,
                           (int)&dword_10680650,
                           (int)&dword_10680644,
                           v174);
          } else {
              v173 = v115 - 0.5;
              sub_1003AFA0(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618,
                           (int)&dword_1068065C,
                           (int)&dword_10680650,
                           v173);
          }
          sub_1003AE50((float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618));
          sub_1003AEE0(
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 32),
              (float *)v191,
              (float *)v190);
          sub_1003AC30(
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 16),
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618),
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 32));
          sub_1003AE50(
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 16));
          sub_1003AC30(
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 32),
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 16),
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618));
          sub_1003AE50(
              (float *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 32));
          sub_1003AD10(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618,
                       flt_10680630);
          v175 = -flt_10680630;
          sub_1003AD10(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 32, v175);
          sub_1003AD10(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 16,
                       flt_10680630);
        LABEL_337:
          v111 = dword_10680628;
        }
      LABEL_338:
        ++v110;
        v112 += 3;
      } while (v110 < *(int *)&gUnk06594.gap4A2C[192]);
    }
  }
  v118 = 0;
  if (dword_100B36FC > 0) {
    v119 = &stru_10ACDEA8;
    do {
      meth_10068400(v119);
      ++v118;
      v119 = (unk00144 *)((char *)v119 + 11112);
    } while (v118 < dword_100B36FC);
  }
  sub_10067DA0();
  v187 = 0;
  if (dword_100AA8B4 > 0) {
    v120 = &dword_106C1638;
    do {
      v121 = dword_10680618;
      v122 = dword_10AD05DC[2778 * *v120];
      if (dword_10680618 && dword_10680624) {
        sub_10068180((int)dword_10680618,
                     (int *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * (_DWORD)dword_10680618 + 48),
                     dword_10AD05DC[2778 * *v120]);
        v121 = dword_10680618;
      }
      v123 = 0;
      if (v122) {
        v124 = dword_106805D0;
        while (v123 < dword_10680940) {
          sub_10068210(
              (int)v121, (int *)(*(_DWORD *)&gUnk06594.gap4918[16] + 84 * *v124 + 48), v122);
          v121 = dword_10680618;
          ++v123;
          ++v124;
        }
      }
      meth_DebugPrint(v121);
      v120 += 22;
      ++v187;
    } while (v187 < dword_100AA8B4);
  }
  sub_10067ED0();
  meth_1002C320(v125);
  v126 = sub_100169B0();
  v127 = 0;
  v184 = v126;
  for (k = 0;; k += 11112) {
  LABEL_353:
    v129 = dword_100B36FC;
    if (!dword_100B36FC)
      v129 = 1;
    if (v127 >= v129)
      break;
    v130 = 188656 * v126 + k;
    qmemcpy((char *)flt_1039C168 + v130, &stru_10ACDEA8.gap0[k], 0x2B68u);
    v131 = (char *)dword_10AD05DC[k / 4];
    if (v131) {
      if (v131 == (char *)&unk_10AD05E4 + k) {
        *(int *)((char *)&dword_1039E89C + v130) = (int)&flt_1039E8A4 + v130;
      } else if (v131 == (char *)&unk_10AD0738 + k) {
        *(int *)((char *)&dword_1039E89C + v130) = (int)&unk_1039E9F8 + v130;
      } else if (v131 == (char *)&unk_10AD0628 + k) {
        *(int *)((char *)&dword_1039E89C + v130) = (int)&flt_1039E8E8 + v130;
      } else if (v131 == (char *)&unk_10AD066C + k) {
        *(int *)((char *)&dword_1039E89C + v130) = (int)&flt_1039E92C + v130;
      } else if (v131 == (char *)&unk_10AD06B0 + k) {
        *(int *)((char *)&dword_1039E89C + v130) = (int)&flt_1039E970 + v130;
      } else {
        *(int *)((char *)&dword_1039E89C + v130) = 0;
      }
    }
    v132 = (char *)dword_10AD05E0[k / 4];
    if (v132) {
      if (v132 == (char *)&unk_10AD05E4 + k) {
        ++v127;
        *(int *)((char *)&dword_1039E8A0 + v130) = (int)&flt_1039E8A4 + v130;
        k += 11112;
        goto LABEL_353;
      }
      if (v132 == (char *)&unk_10AD0738 + k) {
        ++v127;
        *(int *)((char *)&dword_1039E8A0 + v130) = (int)&unk_1039E9F8 + v130;
        k += 11112;
        goto LABEL_353;
      }
      if (v132 == (char *)&unk_10AD0628 + k) {
        ++v127;
        *(int *)((char *)&dword_1039E8A0 + v130) = (int)&flt_1039E8E8 + v130;
        k += 11112;
        goto LABEL_353;
      }
      if (v132 == (char *)&unk_10AD066C + k) {
        ++v127;
        *(int *)((char *)&dword_1039E8A0 + v130) = (int)&flt_1039E92C + v130;
        k += 11112;
        goto LABEL_353;
      }
      if (v132 == (char *)&unk_10AD06B0 + k) {
        ++v127;
        *(int *)((char *)&dword_1039E8A0 + v130) = (int)&flt_1039E970 + v130;
        k += 11112;
        goto LABEL_353;
      }
      *(int *)((char *)&dword_1039E8A0 + v130) = 0;
    }
    ++v127;
  }
  if (dword_100B36F8 > 0) {
    v181 = &dword_10ACD4F8;
    v188 = dword_100B36F8;
    v133 = 47164 * v126;
    v134 = (_DWORD *)((char *)&unk_1039B7C4 + 188656 * v184);
    do {
      v135 = *v181;
      v32 = *v181 == 0;
      qmemcpy(v134 - 24, v181 - 24, 0x80u);
      if (!v32)
        *v134 = &flt_1039C168[2778 * ((v135 - (int)&stru_10ACDEA8) / 11112) + v133];
      v134 += 32;
      v32 = v188 == 1;
      v181 += 32;
      --v188;
    } while (!v32);
  }
  qmemcpy((char *)&unk_103C77E8 + 188656 * v184, dword_106C1628, 0x58u);
  sub_1003A610(&word_103C7844[94328 * v184]);
  if (dword_100A66E8) {
    dword_10680948 = getTicks();
    dword_106805C4 = 0;
    dword_100A66E8 = 0;
    dword_106909F8 = 0;
  } else {
    v169 = 1;
    v50 = dword_106805C4 + 1 <= 2;
    dword_10680948 += dword_100AA268[dword_106805C4++];
    if (!v50)
      dword_106805C4 = 0;
    if (++dword_106909F8 <= 3) {
      v170 = getTicks();
    LABEL_562:
      v171 = dword_106909FC;
      while ((v170 < dword_10680948 || v170 > v171 + 333) && v169) {
        v169 = sub_10015C70(v171 + 333 < v170);
        v170 = getTicks();
        if (!v169)
          goto LABEL_562;
        v171 = v170;
        dword_106909F8 = 0;
        dword_106909FC = v170;
      }
    } else if (sub_10015C70(1)) {
      dword_106909F8 = 0;
      dword_106909FC = getTicks();
    }
  }
  if (dword_106909B4 != 2) {
    if (!dword_106909B4) {
      if (gGameMode == GAME_MODE_4 || gGameMode == GAME_MODE_5) {
        if (!sub_1002B2A0()) {
          v141 = (int *)&gUnk06594.gap1C8[12592];
          do {
              if ((dword_118ABAD0 & 0x4000) != 0) {
                  meth_10035FA0(v141, 49168);
                  dword_10680938 = 1;
                  dword_106909F0 = 1;
                  dword_106909E4 = 0;
                  sub_1002B1C0(0.0, 0.2);
                  sub_1002B130(0.0, 0.2);
              }
              v141 += 87;
          } while ((int)v141 < (int)&gUnk06594.gap1C8[13288]);
        }
      } else {
        v140 = 0;
        if (dword_100B4050 > 0) {
          while (!dword_1022AF20) {
              if (++v140 >= dword_100B4050)
                  goto LABEL_469;
          }
          dword_1022AF20 = 0;
          if (dword_106909E0) {
              sub_1002B130(0.0, 0.2);
              dword_106909E4 = 0;
              dword_106909F0 = 1;
          } else {
              v177 = 1;
              dword_10680734 = 0;
          }
          sub_1002B1C0(0.0, 0.2);
          sub_1002B220(0.0, 0.2);
          meth_10035FA0((int *)dword_10AD0868, 0x4000);
          meth_10035FA0((int *)dword_10AD33D0, 0x4000);
        }
      }
      goto LABEL_469;
    }
    v136 = 0;
    if (dword_100B4050 <= 0)
      goto LABEL_451;
    v137 = dword_10680734;
    v138 = (int **)&dword_10AD0868;
    while (1) {
      if ((dword_118ABAD0 & 0x8000) != 0 || !v137 && (dword_118ABAD0 & 4) != 0 &&
                                                (dword_118ABAD0 & 0x3000) == 0 &&
                                                (dword_118ABAD0 & 3) == 0) {
        if (v137 || (*(_BYTE *)*v138 & 0x10) == 0) {
          meth_10035FA0(*v138, 49168);
          v137 = dword_10680734;
        }
        switch (v137) {
        case 0:
          if (gNetworkPlay && gIsGameMode4) {
              atomic_sub_10004C20();
          } else {
              sub_1002B1C0(1.0, 0.2);
              sub_1002B220(1.0, 0.2);
              dword_106909BC = 2;
              v177 = 0;
          }
          goto LABEL_427;
        case 1:
          sub_1002B130(0.0, 0.2);
          dword_106909F0 = 0;
          dword_106909E4 = 0;
          dword_106909EC = 0;
          sub_1002C4A0();
          gIsGameMode4 = 0;
          sub_100734F0();
          sub_10016990();
          goto LABEL_427;
        case 4:
          sub_1002B130(0.0, 0.2);
          sub_1002B1C0(0.0, 0.2);
          sub_1002B220(0.0, 0.2);
          dword_106909E4 = 0;
          dword_106909F0 = 1;
          if (byte_100BBAD8) {
              pm_sub_10002BD0();
              LOBYTE(v139) = byte_100BBAD8;
              pm_sub_100029F0(v139);
          }
          if (gGameMode == GAME_MODE_6) {
              sub_1003DAE0();
              atomic_sub_100060C0();
          }
        LABEL_427:
          v137 = dword_10680734;
          break;
        case 5:
          v137 = 1;
          v177 = 2;
          dword_106909B4 = 2;
          dword_10680734 = 1;
          break;
        default:
          break;
        }
      }
      if (dword_106909D8) {
        dword_106909D8 = 0;
        sub_1002B1C0(1.0, 0.2);
        sub_1002B220(1.0, 0.2);
        v137 = dword_10680734;
        dword_106909BC = 2;
        v177 = 0;
      }
      if ((dword_118ABAD0 & 0x1000) != 0) {
        v137 = (v137 + 5) % 6;
        dword_10680734 = v137;
        if (gNetworkPlay) {
          if (v137 == 1) {
              v137 = 0;
              dword_10680734 = 0;
          }
        }
      }
      if ((dword_118ABAD0 & 0x2000) != 0) {
        v137 = (v137 + 1) % 6;
        dword_10680734 = v137;
        if (gNetworkPlay) {
          if (v137 == 1) {
              v137 = 2;
              dword_10680734 = 2;
          }
        }
      }
      if ((dword_118ABAD0 & 1) != 0) {
        if (v137 == 2) {
          sub_10060D70();
        } else {
          if (v137 != 3)
              goto LABEL_444;
          sub_10060DE0();
        }
        v137 = dword_10680734;
      }
    LABEL_444:
      if ((dword_118ABAD0 & 2) != 0) {
        if (v137 == 2) {
          sub_10060D50();
          goto LABEL_449;
        }
        if (v137 == 3) {
          sub_10060DC0();
        LABEL_449:
          v137 = dword_10680734;
          goto LABEL_450;
        }
      }
    LABEL_450:
      ++v136;
      v138 += 2778;
      if (v136 >= dword_100B4050)
        goto LABEL_451;
    }
  }
  if ((dword_118ABAD0 & 0x8000) != 0) {
    if (dword_10680734) {
      if (dword_10680734 == 1) {
        if (gNetworkPlay && gIsGameMode4) {
          atomic_sub_10004C20();
        } else {
          sub_1002B1C0(1.0, 0.2);
          sub_1002B220(1.0, 0.2);
          dword_106909BC = 2;
          v177 = 0;
        }
      }
    } else {
      sub_1002B130(0.0, 0.2);
      sub_1002B1C0(0.0, 0.2);
      sub_1002B220(0.0, 0.2);
      dword_106909E4 = 0;
      dword_106909F0 = 2;
    }
  }
  if ((dword_118ABAD0 & 0x1000) != 0)
    dword_10680734 = 1 - dword_10680734;
  if ((dword_118ABAD0 & 0x2000) != 0)
    dword_10680734 = 1 - dword_10680734;
  if (dword_106909D8) {
    dword_106909D8 = 0;
    sub_1002B1C0(1.0, 0.2);
    sub_1002B220(1.0, 0.2);
    dword_106909BC = 2;
    v177 = 0;
    if (gNetworkPlay && gIsGameMode4)
      goto LABEL_404;
    goto LABEL_469;
  }
LABEL_451:
  if (gNetworkPlay && gIsGameMode4)
  LABEL_404:
    np_sub_10005090();
LABEL_469:
  if (gGameMode == GAME_MODE_4) {
    if (dword_106805B8 == 2)
      sub_1002C410();
    if (gGameMode == GAME_MODE_4 && dword_106805B8 == 1) {
      if ((&off_100AA018)[8 * dword_106805C0]) {
        v142 = *(float *)&dword_106806DC + *(float *)&dword_106C2CFC;
        *(float *)&dword_106806DC = v142;
        if (v142 > flt_100AA01C[8 * dword_106805C0]) {
          dword_106806DC = 0;
          ++dword_106805C0;
        }
      }
    }
  }
  if (!sub_1002B2A0() || !sub_1002B2D0())
    goto LABEL_533;
  v143 = dword_100B4050;
  v144 = &dword_10AD0868;
  do {
    v145 = 0;
    if (v143 > 0) {
      v146 = 60;
      do {
        ++v145;
        *(_DWORD *)((char *)*v144 + v146) = *(_DWORD *)((char *)*v144 + v146 - 8);
        v143 = dword_100B4050;
        v146 += 4;
      } while (v145 < dword_100B4050);
    }
    v144 += 2778;
  } while ((int)v144 < (int)&unk_10AFBEE8);
  dword_118290F4 = 0;
  v147 = 0;
  v148 = dword_118AC730;
  do {
    v148[1] = 0;
    *v148 = 0;
    *(v148 - 2) = 0;
    *(v148 - 1) = 0;
    *(v148 - 4) = (int)&unk_118AC70C;
    sub_10072580(v147);
    v148 += 6;
    ++v147;
  } while ((int)v148 < (int)&unk_118AC898);
  *(_DWORD *)&gUnk06594.gap1C8[12544] = 0;
  if (!dword_106909F0)
    goto LABEL_531;
  if (!dword_106909E4) {
    sub_1003348E();
    dword_106C3364 = 0;
    if (gGameMode == GAME_MODE_5) {
      if (*((_BYTE *)dword_10ACED34 + 4)) {
        gGameMode = GAME_MODE_0;
        sub_1002F460();
        byte_11782DDC = 1;
        sub_10034C66((int)sub_10071120);
      } else {
        sub_1002C390();
      }
      goto LABEL_527;
    }
    if (gGameMode != GAME_MODE_4 || dword_106805B8 != 2) {
      if (dword_106909B8 && (gGameMode == GAME_MODE_2 || gGameMode == GAME_MODE_1 ||
                             gGameMode == GAME_MODE_0 || gGameMode == GAME_MODE_6)) {
        sub_1002F320();
        sub_10034C66((int)sub_10002140);
      LABEL_527:
        v163 = 0;
        goto LABEL_528;
      }
      if ((gGameMode != GAME_MODE_4 || dword_106805B8 != 1 && (dword_106805B8 || dword_10680938)) &&
          dword_106909F0 == 2) {
        if (*(_DWORD *)&gUnk06594.gap1C8[8584] != dword_10B4E708 ||
            dword_106C29A4 != dword_10B4E70C)
          meth_BossRallyConfig_WriteConfigFile(&gConfig, gBossRallyCfgPath);
        cleanUpAndExitWithCode(0);
      }
    }
    sub_10034C66((int)sub_10039000);
    goto LABEL_527;
  }
  if (!dword_106909E0) {
    v149 = dword_100B4050;
    v150 = 1;
    v151 = *((_DWORD *)dword_10AD0868 + 13);
    dword_106909C8 = v151;
    dword_10680668 = 0;
    if (dword_100B4050 > 1) {
      v152 = 56;
      v153 = &dword_10AD33D0;
      do {
        v154 = *(_DWORD *)(*v153 + v152);
        if (v151 > v154) {
          v151 = *(_DWORD *)(*v153 + v152);
          dword_10680668 = v150;
          dword_106909C8 = v154;
        }
        ++v150;
        v152 += 4;
        v153 += 2778;
      } while (v150 < dword_100B4050);
    }
    v155 = 0;
    if (dword_100B4050 > 0) {
      v156 = &dword_10AD0868;
      v157 = 4 * dword_10680668 + 44;
      v189 = 4 * dword_10680668 + 52;
      do {
        v158 = (char *)*v156;
        ++v155;
        v156 += 2778;
        dword_1068066C[v155] = *(_DWORD *)&v158[v157];
        dword_106806E4[v155] = *(_DWORD *)&v158[v189];
      } while (v155 < v149);
      v159 = 0;
      if (v149 > 0) {
        v160 = &dword_10AD0868;
        do {
          v161 = 0;
          if (v149 > 0) {
              v162 = 44;
              do {
                  meth_DebugPrint((void *)v155);
                  v155 = (int)*v160;
                  ++v161;
                  *(_DWORD *)((char *)*v160 + v162) = 0;
                  v149 = dword_100B4050;
                  v162 += 4;
              } while (v161 < dword_100B4050);
          }
          ++v159;
          v160 += 2778;
        } while (v159 < v149);
      }
    }
    meth_DebugPrint((void *)v155);
  }
  v163 = 1;
LABEL_528:
  dword_106909E0 = v163;
  dword_106909EC = 0;
  if (!v163)
    sub_1002C4A0();
  sub_10016990();
LABEL_531:
  word_11782BC0 = 1;
  v164 = &dword_10AD0868;
  do {
    v165 = *v164;
    v164 += 2778;
    v165[17] = 0;
  } while ((int)v164 < (int)&unk_10AFBEE8);
LABEL_533:
  if (dword_106909B4 != v177) {
    if (v177) {
      sub_10067980();
      pm_sub_10002B70();
      sub_10072E00();
      sub_100683D0();
    } else {
      sub_100679A0();
      if (byte_100BBAD8) {
        pm_sub_10002BD0();
        LOBYTE(v166) = byte_100BBAD8;
        pm_sub_100029F0(v166);
      }
    }
    dword_106909B4 = v177;
  }
  if (gGameMode == GAME_MODE_6)
    atomic_sub_100060F0();
  v167 = *(_DWORD *)(dword_10ACE010 + 436) || *(_DWORD *)(dword_10ACE014 + 436);
  input_10078F20((unsigned __int8)byte_10ACE215, v167, dword_10ACED38);
  if (gPlaysfx && !dword_106909B4)
    sub_10072E60();
  if (dword_106909E0)
    sub_1006AD10();
  else
    sub_1006AB20();
  sub_10017740();
  result = sub_10075150();
  if (!gIsGameMode4) {
    if (gNetworkPlay)
      np_sub_10006160();
    result = sub_10075100();
  }
  return result;
}
// 1002C5AA: variable 'v9' is possibly undefined
// 1002C5AF: variable 'v10' is possibly undefined
// 1002C601: variable 'v12' is possibly undefined
// 1002CCF9: variable 'v29' is possibly undefined
// 1002CCFE: variable 'v30' is possibly undefined
// 1002CD88: variable 'v34' is possibly undefined
// 1002CE1D: variable 'v35' is possibly undefined
// 1002D5DD: variable 'v68' is possibly undefined
// 1002D5EA: variable 'v69' is possibly undefined
// 1002DC0D: variable 'v73' is possibly undefined
// 1002DD1A: variable 'v104' is possibly undefined
// 1002DD38: variable 'v105' is possibly undefined
// 1002DD40: variable 'v106' is possibly undefined
// 1002E168: variable 'v116' is possibly undefined
// 1002E168: variable 'v117' is possibly undefined
// 1002E40B: variable 'v125' is possibly undefined
// 1002E951: variable 'v139' is possibly undefined
// 1002EF64: variable 'v166' is possibly undefined
// 10039000: using guessed type int sub_10039000();
// 100A66E8: using guessed type int dword_100A66E8;
// 100A73A8: using guessed type int dword_100A73A8[];
// 100AA008: using guessed type int dword_100AA008;
// 100AA00C: using guessed type int dword_100AA00C;
// 100AA018: using guessed type char (*off_100AA018)[8];
// 100AA01C: using guessed type float flt_100AA01C[];
// 100AA228: using guessed type int dword_100AA228[];
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100B36F8: using guessed type int dword_100B36F8;
// 100B36FC: using guessed type int dword_100B36FC;
// 100B380C: using guessed type int gChosenTrack;
// 100B4050: using guessed type int dword_100B4050;
// 100B5DE8: using guessed type int gPlaysfx;
// 100B8C94: using guessed type int (*off_100B8C94)(void);
// 100BBAD8: using guessed type char byte_100BBAD8;
// 1022AF14: using guessed type int gIsGameMode4;
// 1022AF18: using guessed type int gNetworkPlay;
// 1022AF1C: using guessed type int dword_1022AF1C;
// 1022AF20: using guessed type int dword_1022AF20;
// 1022B34C: using guessed type int gChosenCar;
// 1022B350: using guessed type int gChosenWeather0;
// 1039C168: using guessed type float flt_1039C168[];
// 1039E89C: using guessed type int dword_1039E89C;
// 1039E8A0: using guessed type int dword_1039E8A0;
// 1039E8A4: using guessed type float flt_1039E8A4;
// 1039E8E8: using guessed type float flt_1039E8E8;
// 1039E92C: using guessed type float flt_1039E92C;
// 1039E970: using guessed type float flt_1039E970;
// 104BBE08: using guessed type int gChosenWeather1;
// 106805A8: using guessed type int dword_106805A8;
// 106805B8: using guessed type int dword_106805B8;
// 106805BC: using guessed type int dword_106805BC;
// 106805C0: using guessed type int dword_106805C0;
// 106805C4: using guessed type int dword_106805C4;
// 10680610: using guessed type int dword_10680610;
// 1068061C: using guessed type int dword_1068061C;
// 10680620: using guessed type int dword_10680620;
// 10680624: using guessed type int dword_10680624;
// 10680628: using guessed type int dword_10680628;
// 1068062C: using guessed type int dword_1068062C;
// 10680634: using guessed type int dword_10680634;
// 10680638: using guessed type int dword_10680638;
// 1068063C: using guessed type int dword_1068063C;
// 10680640: using guessed type int dword_10680640;
// 10680644: using guessed type int dword_10680644;
// 10680648: using guessed type int dword_10680648;
// 1068064C: using guessed type int dword_1068064C;
// 10680650: using guessed type int dword_10680650;
// 10680654: using guessed type int dword_10680654;
// 10680658: using guessed type int dword_10680658;
// 1068065C: using guessed type int dword_1068065C;
// 10680660: using guessed type int dword_10680660;
// 10680664: using guessed type int dword_10680664;
// 10680668: using guessed type int dword_10680668;
// 106806D8: using guessed type float flt_106806D8;
// 106806DC: using guessed type int dword_106806DC;
// 106806E0: using guessed type int dword_106806E0;
// 10680734: using guessed type int dword_10680734;
// 1068073C: using guessed type int dword_1068073C;
// 10680740: using guessed type int dword_10680740;
// 10680744: using guessed type int dword_10680744;
// 10680750: using guessed type int dword_10680750;
// 10680938: using guessed type int dword_10680938;
// 1068093C: using guessed type int dword_1068093C;
// 10680940: using guessed type int dword_10680940;
// 10680948: using guessed type int dword_10680948;
// 106909B0: using guessed type int dword_106909B0;
// 106909B4: using guessed type int dword_106909B4;
// 106909B8: using guessed type int dword_106909B8;
// 106909BC: using guessed type int dword_106909BC;
// 106909C8: using guessed type int dword_106909C8;
// 106909CC: using guessed type int dword_106909CC;
// 106909D0: using guessed type int dword_106909D0;
// 106909D4: using guessed type int dword_106909D4;
// 106909D8: using guessed type int dword_106909D8;
// 106909E0: using guessed type int dword_106909E0;
// 106909E4: using guessed type int dword_106909E4;
// 106909E8: using guessed type int gTicks;
// 106909EC: using guessed type int dword_106909EC;
// 106909F0: using guessed type int dword_106909F0;
// 106909F4: using guessed type int gNeedToPlayIntro2;
// 106909F8: using guessed type int dword_106909F8;
// 106909FC: using guessed type int dword_106909FC;
// 106C1638: using guessed type int dword_106C1638;
// 106C1690: using guessed type int dword_106C1690;
// 106C29A4: using guessed type int dword_106C29A4;
// 106C2CFC: using guessed type int dword_106C2CFC;
// 106C3364: using guessed type int dword_106C3364;
// 10ACD4F8: using guessed type int dword_10ACD4F8;
// 10ACDFEC: using guessed type int dword_10ACDFEC[];
// 10ACE010: using guessed type int dword_10ACE010;
// 10ACE014: using guessed type int dword_10ACE014;
// 10ACE215: using guessed type char byte_10ACE215;
// 10ACED30: using guessed type int dword_10ACED30;
// 10ACED38: using guessed type int dword_10ACED38;
// 10ACED3C: using guessed type int dword_10ACED3C[];
// 10ACED40: using guessed type int dword_10ACED40;
// 10ACED44: using guessed type int dword_10ACED44;
// 10ACEEA0: using guessed type int dword_10ACEEA0;
// 10ACEEA4: using guessed type int dword_10ACEEA4;
// 10ACEEA8: using guessed type int dword_10ACEEA8;
// 10ACEEAC: using guessed type int dword_10ACEEAC;
// 10ACEEB0: using guessed type int dword_10ACEEB0;
// 10AD05DC: using guessed type int dword_10AD05DC[];
// 10AD05E0: using guessed type int dword_10AD05E0[];
// 10AD061C: using guessed type float flt_10AD061C;
// 10AD084C: using guessed type int dword_10AD084C[];
// 10AD18A0: using guessed type int dword_10AD18A0;
// 10AD18A4: using guessed type int dword_10AD18A4;
// 10AD18A8: using guessed type int dword_10AD18A8;
// 10AD18AC: using guessed type int dword_10AD18AC;
// 10AD33C4: using guessed type int dword_10AD33C4;
// 10AD33D0: using guessed type int dword_10AD33D0;
// 10AF9BB0: using guessed type int dword_10AF9BB0;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E708: using guessed type int dword_10B4E708;
// 10B4E70C: using guessed type int dword_10B4E70C;
// 10B501C8: using guessed type int (*dword_10B501C8)(void);
// 10B501CC: using guessed type int (*dword_10B501CC)(void);
// 117554E8: using guessed type int dword_117554E8;
// 11782BC0: using guessed type __int16 word_11782BC0;
// 11782DDC: using guessed type char byte_11782DDC;
// 118290F4: using guessed type int dword_118290F4;
// 118AA09C: using guessed type int dword_118AA09C;
// 118AA0A8: using guessed type int (__cdecl *dword_118AA0A8)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 118AA0AC: using guessed type int (__cdecl *graphics_dword_118AA0AC)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 118AA0D0: using guessed type int (*dword_118AA0D0)(void);
// 118AB470: using guessed type int dword_118AB470;
// 118ABAD0: using guessed type int dword_118ABAD0;
// 118ABDC0: using guessed type int dword_118ABDC0;
// 118AC730: using guessed type int dword_118AC730[];

//----- (1002F130) --------------------------------------------------------
int __cdecl sub_1002F130(int a1) {
  int v1;     // eax
  int v2;     // ebx
  char *v3;   // edi
  int v4;     // edx
  int v5;     // eax
  int v6;     // edx
  int result; // eax

  v1 = atomic_sub_10005DE0(a1,
                           &byte_10AD0854[11112 * dword_100B36FC],
                           &byte_10AD0855[11112 * dword_100B36FC],
                           &byte_10AD0856[11112 * dword_100B36FC]);
  meth_10076AE0(&stru_10ACDEA8[2778 * dword_100B36FC], v1);
  v2 = 2778 * dword_100B36FC;
  v3 = atomic_sub_10005E70(a1);
  v4 = dword_100B36FC;
  strcpy(&byte_10ACDFF0[v2 * 4], v3);
  sub_10068260(v4, dword_10AD0850[v2]);
  v5 = 463 * dword_100B36FC++;
  v6 = 3 * v5;
  result = dword_100B36F8 + 1;
  dword_10ACDFEC[2 * v6] = a1;
  dword_100B36F8 = result;
  return result;
}
// 100B36F8: using guessed type int dword_100B36F8;
// 100B36FC: using guessed type int dword_100B36FC;
// 10ACDFEC: using guessed type int dword_10ACDFEC[];
// 10AD0850: using guessed type int dword_10AD0850[];

//----- (1002F230) --------------------------------------------------------
int __cdecl sub_1002F230(int a1) {
  int result; // eax
  int v2;     // ebx
  int v3;     // edi
  _DWORD *v4; // esi
  int v5;     // ecx
  int *v6;    // eax

  result = dword_100B36FC;
  v2 = 0;
  if (dword_100B36FC > 0) {
    v3 = 0;
    v4 = &unk_10ACEDB0;
    do {
      if (*(v4 - 881) == a1) {
        *v4 = 0;
        sub_10072580(v3);
        v5 = dword_100B36F8;
        if (dword_100B36F8 > 0) {
          v6 = &dword_10ACD4F8;
          do {
              if ((_DWORD *)*v6 == v4 - 962)
                  *v6 = 0;
              v6 += 32;
              --v5;
          } while (v5);
        }
      }
      result = dword_100B36FC;
      ++v2;
      v3 += 2;
      v4 += 2778;
    } while (v2 < dword_100B36FC);
  }
  return result;
}
// 100B36F8: using guessed type int dword_100B36F8;
// 100B36FC: using guessed type int dword_100B36FC;
// 10ACD4F8: using guessed type int dword_10ACD4F8;

//----- (1002F2A0) --------------------------------------------------------
int sub_1002F2A0() {
  __int64 v0; // rax
  char *v1;   // ebp
  _DWORD *v2; // ebx

  v0 = (unsigned int)dword_100B4050;
  if (dword_100B4050 > 0) {
    v1 = (char *)&unk_10690950;
    v2 = &unk_106909C0;
    LODWORD(v0) = &flt_10ACEE94;
    do {
      dword_106805C8[HIDWORD(v0)] = *(_DWORD *)(v0 + 12);
      dword_10680728[HIDWORD(v0)] = *(_DWORD *)v0;
      *v2 = *(_DWORD *)(v0 - 8);
      dword_10680748[HIDWORD(v0)] = *(_DWORD *)(v0 - 4);
      dword_106805B0[HIDWORD(v0)] = *(_DWORD *)(v0 - 68);
      if (dword_100BD3E0 > 0)
        qmemcpy(v1, (const void *)(v0 - 56), 4 * dword_100BD3E0);
      ++HIDWORD(v0);
      ++v2;
      v1 += 48;
      LODWORD(v0) = v0 + 11112;
    } while (SHIDWORD(v0) < dword_100B4050);
  }
  dword_106909B8 = 1;
  return v0;
}
// 100B4050: using guessed type int dword_100B4050;
// 106805B0: using guessed type int dword_106805B0[];
// 106805C8: using guessed type int dword_106805C8[];
// 10680728: using guessed type int dword_10680728[];
// 10680748: using guessed type int dword_10680748[];
// 106909B8: using guessed type int dword_106909B8;

//----- (1002F320) --------------------------------------------------------
int sub_1002F320() {
  int v0;         // esi
# 505 ** v1;      // edi
  __int64 v2;     // rax
  const void *v3; // esi
  int *v4;        // ebp
  int *v5;        // ebx
  char *v7;       // [esp+10h] [ebp-4h]

  if (!gGameMode) {
    if (dword_106909B8) {
      v0 = 0;
      if (dword_100B4050 > 0) {
        v1 = &dword_10ACED34;
        do {
          *((_WORD *)*v1 + 4 * *((unsigned __int8 *)*v1 + 4) + *((unsigned __int8 *)*v1 + 5) + 15) =
              byte_100AA210[dword_106805C8[v0]];
          *((_BYTE *)*v1 + 4 * *((unsigned __int8 *)*v1 + 4) + *((unsigned __int8 *)*v1 + 5) + 6) =
              dword_106805C8[v0];
          *((_DWORD *)*v1 + 4 * *((unsigned __int8 *)*v1 + 4) + *((unsigned __int8 *)*v1 + 5) +
            20) = dword_10680728[v0];
          meth_DebugPrint(
              (void *)(*((unsigned __int8 *)*v1 + 5) + 4 * *((unsigned __int8 *)*v1 + 4)));
          ++v0;
          v1 += 2778;
        } while (v0 < dword_100B4050);
      }
    }
  }
  v2 = (unsigned int)dword_100B4050;
  if (dword_100B4050 > 0) {
    v3 = &unk_10690950;
    v4 = dword_106805C8;
    v5 = dword_10680728;
    LODWORD(v2) = &dword_10ACEE50;
    v7 = (char *)&unk_10690950;
    do {
      if (dword_100BD3E0 > 0)
        qmemcpy((void *)(v2 + 12), v3, 4 * dword_100BD3E0);
      *(_DWORD *)v2 = dword_106805B0[HIDWORD(v2)];
      *(_DWORD *)(v2 + 64) = dword_10680748[HIDWORD(v2)];
      *(_DWORD *)(v2 + 68) = *v5;
      *(_DWORD *)(v2 + 80) = *v4;
      ++HIDWORD(v2);
      v3 = v7 + 48;
      ++v5;
      ++v4;
      LODWORD(v2) = v2 + 11112;
      v7 += 48;
    } while (SHIDWORD(v2) < dword_100B4050);
  }
  return v2;
}
// 100AA010: using guessed type int g_GameMode;
// 100B4050: using guessed type int dword_100B4050;
// 106805B0: using guessed type int dword_106805B0[];
// 106805C8: using guessed type int dword_106805C8[];
// 10680728: using guessed type int dword_10680728[];
// 10680748: using guessed type int dword_10680748[];
// 106909B8: using guessed type int dword_106909B8;
// 10ACEE50: using guessed type int dword_10ACEE50;

//----- (1002F460) --------------------------------------------------------
int sub_1002F460() {
  int v0;     // ecx
  int v1;     // ecx
  int result; // eax

  v0 = (unsigned __int8)byte_100B3820[24 * *((unsigned __int8 *)dword_10ACED34 + 4) +
                                      2 * *((unsigned __int8 *)dword_10ACED34 + 5)];
  gChosenTrack = v0;
  if ((*(_BYTE *)dword_10ACED34 & 1) != 0) {
    if (v0 >= 6)
      v1 = v0 - 6;
    else
      v1 = v0 + 6;
    gChosenTrack = v1;
  }
  result = *((unsigned __int8 *)dword_10ACED34 + 5) + 12 * *((unsigned __int8 *)dword_10ACED34 + 4);
  gChosenWeather1 = (unsigned __int8)byte_100B3821[2 * result];
  return result;
}
// 100B380C: using guessed type int gChosenTrack;
// 104BBE08: using guessed type int gChosenWeather1;

//----- (1002F4C0) --------------------------------------------------------
int sub_1002F4C0() {
  int result;           // eax
  int v1;               // ebp
# 505 ** v2;            // esi
  int v3;               // edx
  int v4;               // edi
  unsigned __int16 *v5; // ecx
  unsigned __int16 v6;  // bx
# 505 * v7;             // eax
  int v8;               // ecx
  _BYTE *v9;            // edx
  __int16 v10;          // cx
# 505 * v11;            // eax
  int v12;              // ecx
# 505 * v13;            // eax
  char v14;             // cl
  int v15;              // edx

  result = gGameMode;
  if (!gGameMode) {
    result = dword_106909B8;
    if (dword_106909B8) {
      result = dword_100B4050;
      v1 = 0;
      if (dword_100B4050 > 0) {
        v2 = &dword_10ACED34;
        while (1) {
          v3 = 0;
          v4 = 4;
          v5 = (unsigned __int16 *)((char *)*v2 + 8 * *((unsigned __int8 *)*v2 + 4) + 30);
          do {
              v6 = *v5++;
              v3 += v6;
              --v4;
          } while (v4);
          if ((unsigned __int8)++*((_BYTE *)*v2 + 5) ==
              dword_100B3814[6 * *((unsigned __int8 *)*v2 + 4)]) {
              *((_BYTE *)*v2 + 5) = 0;
              if (v3 >= dword_100B3818[6 * *((unsigned __int8 *)*v2 + 4)]) {
                  *((_WORD *)*v2 + 120) |=
                      word_100B381E[12 * (unsigned __int8)(*((_BYTE *)*v2 + 4))++];
                  v7 = *v2;
                  if (*((_BYTE *)*v2 + 4) == 6)
                      break;
              }
          }
        LABEL_31:
          v13 = *v2;
          v14 =
              byte_100B3820[24 * *((unsigned __int8 *)*v2 + 4) + 2 * *((unsigned __int8 *)*v2 + 5)];
          v15 = -((*(_DWORD *)*v2 & 1) != 0);
          v2 += 2778;
          *((_WORD *)v13 + 121) |= 1 << ((v15 & 6) + v14);
          *((_WORD *)*(v2 - 2778) + 122) |=
              1 << byte_100B3821[24 * *((unsigned __int8 *)*(v2 - 2778) + 4) +
                                 2 * *((unsigned __int8 *)*(v2 - 2778) + 5)];
          result = dword_100B4050;
          if (++v1 >= dword_100B4050)
              return result;
        }
        v8 = 0;
        if (dword_100B388C > 0) {
          v9 = (char *)v7 + 26;
          while (!*v9) {
              ++v8;
              ++v9;
              if (v8 >= dword_100B388C)
                  goto LABEL_14;
          }
          goto LABEL_20;
        }
      LABEL_14:
        v10 = *((_WORD *)v7 + 121);
        if ((*(_BYTE *)v7 & 1) != 0) {
          if ((v10 & 0x200) == 0) {
              HIBYTE(v10) |= 2u;
          LABEL_19:
              *((_WORD *)v7 + 121) = v10;
              goto LABEL_20;
          }
        } else if ((v10 & 8) == 0) {
          v10 |= 8u;
          goto LABEL_19;
        }
      LABEL_20:
        v11 = *v2;
        v12 = *(_DWORD *)*v2;
        if (v12) {
          switch (v12) {
          case 1:
              *((_BYTE *)v11 + 241) |= 0x22u;
              break;
          case 2:
              *((_BYTE *)v11 + 241) |= 8u;
              break;
          case 3:
              *((_BYTE *)v11 + 241) |= 0x50u;
              break;
          case 4:
              *((_BYTE *)v11 + 241) |= 0x80u;
              break;
          }
        } else {
          *((_BYTE *)v11 + 241) |= 4u;
        }
        *((_BYTE *)*v2 + 4) = 0;
        ++*(_DWORD *)*v2;
        goto LABEL_31;
      }
    }
  }
  return result;
}
// 100AA010: using guessed type int g_GameMode;
// 100B3814: using guessed type int dword_100B3814[];
// 100B3818: using guessed type int dword_100B3818[];
// 100B381E: using guessed type __int16 word_100B381E[];
// 100B388C: using guessed type int dword_100B388C;
// 100B4050: using guessed type int dword_100B4050;
// 106909B8: using guessed type int dword_106909B8;

//----- (1002F690) --------------------------------------------------------
void sub_1002F690() {
  dword_100AC300 = 1;
  dword_10690A14 = 4;
}
// 100AC300: using guessed type int dword_100AC300;
// 10690A14: using guessed type int dword_10690A14;

//----- (1002F8F0) --------------------------------------------------------
int sub_1002F8F0() {
  int result;   // eax
  unk000C8 *v1; // ecx
  DWORD ticks;  // eax
  unk00334 *v3; // eax

  switch (dword_10690A14) {
  case 0:
    sub_10038EC0();
    pm_sub_10073320(0);
    sub_1005FDB0();
    dword_10690A14 = 4;
    return 1;
  case 1:
    dword_10690A14 = 2;
    return 1;
  case 2:
    ++dword_10690A10;
    sub_10034C73();
    return dword_100AA5A8;
  case 3:
    sub_1006A9C0(1, gWidth1, gHeight1, gBitDepth, dword_10B4E6F4);
    ShowStaticImage(gUnk8C, aLoadingImg, 0);
    sub_1006A9C0(1, gWidth1, gHeight1, gBitDepth, dword_10B4E6F4);
    sub_10069840();
    dword_10690A14 = 1;
    return 1;
  case 4:
    v1 = gUnkC8Ptr1;
    if (!gUnkC8Ptr1 && !dword_100AC300) {
      sub_100734F0();
      dword_10690A14 = 3;
      return 1;
    }
    if (!gUnkC8Ptr1 && dword_100AC300) {
      pm_sub_10073320(0);
      graphics_1005D440();
      ticks = getTicks();
      v1 = gUnkC8Ptr1;
      g_TickCount = ticks;
    }
    if (gRunBenchmark) {
      result = 1;
      gGameMode = GAME_MODE_1;
      gChosenTrack = 2;
      gChosenCar = 5;
      gChosenWeather0 = 0;
      gConfigJoystickIndex = 0;
      gConfigJoystickPtr = (BossRallyConfigJoystick *)&gConfig;
      gHandlingType = 1;
      gSuspensionType = 1;
      gTireType = 2;
      gTransmissionType = 1;
      dword_100AC300 = 0;
      dword_10690A14 = 3;
      return result;
    }
    if (v1->field_C) {
      v1->lpVtbl->meth3(v1);
    } else {
      v3 = (unk00334 *)gUnk8C->? ;
      if (v3) {
        meth_unk00334_1001AC80(v3, &width, &height, &bitDepth, &dword_10690A04);
        v1 = gUnkC8Ptr1;
      }
      ((void(__thiscall *)(unk000C8 *))v1->lpVtbl->meth4)(v1);
    }
    if (!gUnkC8Ptr1 || !dword_100AC300)
      return 1;
    if (g_unkC8AreSamePtr) {
      if (g_TickCount + 90000 < getTicks()) {
        gUnkC8Ptr1->field_68 = 0;
        gUnkC8Ptr1->lpVtbl->meth6(gUnkC8Ptr1, 0);
        gGameMode = GAME_MODE_4;
        dword_106805B8 = 0;
        return 1;
      }
    } else {
      g_TickCount = getTicks();
    }
    return 1;
  }
}
// 10094350: using guessed type int gHandlingType;
// 10094354: using guessed type int gTransmissionType;
// 10094358: using guessed type int gSuspensionType;
// 100AA5A8: using guessed type int dword_100AA5A8;
// 100AC300: using guessed type int dword_100AC300;
// 100B380C: using guessed type int gChosenTrack;
// 1022B34C: using guessed type int gChosenCar;
// 1022B350: using guessed type int gChosenWeather0;
// 106805B8: using guessed type int dword_106805B8;
// 10690A10: using guessed type int dword_10690A10;
// 10690A14: using guessed type int dword_10690A14;
// 10AA2868: using guessed type int g_unkC8AreSamePtr;
// 10AA33E8: using guessed type int g_TickCount;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E6E8: using guessed type int dword_10B4E6E8;
// 10B4E6EC: using guessed type int dword_10B4E6EC;
// 10B4E6F0: using guessed type int dword_10B4E6F0;
// 10B4E6F4: using guessed type int dword_10B4E6F4;
// 118ABDC4: using guessed type int gRunBenchmark;

//----- (1002F900) --------------------------------------------------------
int __cdecl sub_1002F900(unsigned int *a1,
                         int a2,
                         int a3,
                         int a4,
                         int a5,
                         int a6,
                         int a7,
                         int a8,
                         int a9,
                         int a10,
                         int a11,
                         int a12,
                         int a13,
                         int a14,
                         int a15,
                         int a16,
                         int a17) {
  char v17;   // bl
  int v18;    // esi
  char v19;   // di
  char v20;   // bp
  int result; // eax
  char v22;   // [esp+28h] [ebp+18h]
  char v23;   // [esp+2Ch] [ebp+1Ch]
  char v24;   // [esp+30h] [ebp+20h]
  char v25;   // [esp+34h] [ebp+24h]
  char v26;   // [esp+38h] [ebp+28h]
  char v27;   // [esp+3Ch] [ebp+2Ch]
  char v28;   // [esp+40h] [ebp+30h]
  char v29;   // [esp+44h] [ebp+34h]
  char v30;   // [esp+48h] [ebp+38h]
  char v31;   // [esp+4Ch] [ebp+3Ch]
  char v32;   // [esp+50h] [ebp+40h]

  v17 = sub_1002FAF0(a2);
  v18 = sub_1002FAF0(a3);
  v19 = sub_1002FAF0(a4);
  v20 = sub_1002FAF0(a5);
  v22 = sub_1002FAC0(a6);
  v23 = sub_1002FAC0(a7);
  v24 = sub_1002FAC0(a8);
  v25 = sub_1002FAC0(a9);
  v26 = sub_1002FAF0(a10);
  v27 = sub_1002FAF0(a11);
  v28 = sub_1002FAF0(a12);
  v29 = sub_1002FAF0(a13);
  v30 = sub_1002FAC0(a14);
  v31 = sub_1002FAC0(a15);
  v32 = sub_1002FAC0(a16);
  result = sub_1002FAC0(a17) & 7;
  *a1 =
      v28 & 0x1F |
      (32 *
       (v26 & 0xF |
        (16 * (v24 & 7 | (8 * (v22 & 7 | (8 * ((32 * (v17 & 0xF | 0xFFFFFFC0)) | v19 & 0x1F))))))));
  a1[1] =
      result |
      (8 *
       (v31 & 7 |
        (8 * (v29 & 7 |
              (8 * (v25 & 7 |
                    (8 * (v23 & 7 |
                          (8 * (v20 & 7 |
                                (8 * (v32 & 7 |
                                      (8 * (v30 & 7 | (8 * (v27 & 0xF | (16 * v18)))))))))))))))));
  return result;
}

//----- (1002FAC0) --------------------------------------------------------
int __cdecl sub_1002FAC0(int a1) {
  switch (a1) {
  case 0:
    return 7;
  case 1:
    return 6;
  case 1013:
    return 0;
  }
  return a1 - 1000;
}

//----- (1002FAF0) --------------------------------------------------------
int __cdecl sub_1002FAF0(int a1) {
  if (!a1)
    return 31;
  if (a1 == 1)
    return 6;
  return a1 - 1000;
}

//----- (1002FB20) --------------------------------------------------------
_DWORD *__cdecl sub_1002FB20(unsigned int a1, int a2) {
  _DWORD *v2;        // eax
  _DWORD *v3;        // eax
  _DWORD *v4;        // eax
  _DWORD *v5;        // eax
  _DWORD *v6;        // eax
  _DWORD *v7;        // eax
  _DWORD *v8;        // eax
  _DWORD *v9;        // eax
  _DWORD *v10;       // eax
  _DWORD *v11;       // eax
  _DWORD *v12;       // eax
  _DWORD *v13;       // eax
  _DWORD *v14;       // eax
  _DWORD *v15;       // eax
  _DWORD *v16;       // eax
  _DWORD *v17;       // eax
  _DWORD *v18;       // eax
  _DWORD *v19;       // eax
  char *v20;         // esi
  _DWORD *v21;       // eax
  _DWORD *v22;       // eax
  char *v23;         // esi
  unsigned int v24;  // edx
  _DWORD *v25;       // eax
  _DWORD *v26;       // eax
  _DWORD *v27;       // eax
  _DWORD *v28;       // eax
  _DWORD *v29;       // eax
  _DWORD *v30;       // eax
  _DWORD *v31;       // eax
  int v32;           // eax
  unsigned int v33;  // esi
  _DWORD *v34;       // eax
  _DWORD *v35;       // eax
  _DWORD *v36;       // eax
  _DWORD *v37;       // eax
  _DWORD *v38;       // eax
  _DWORD *v39;       // eax
  _DWORD *v40;       // eax
  _DWORD *v41;       // eax
  char *v42;         // edi
  _DWORD *v43;       // eax
  _DWORD *v44;       // eax
  _DWORD *v45;       // eax
  _DWORD *v46;       // eax
  _DWORD *v47;       // eax
  _DWORD *v48;       // eax
  _DWORD *v49;       // eax
  _DWORD *v50;       // eax
  _DWORD *v51;       // eax
  _DWORD *result;    // eax
  unsigned int *v53; // [esp-44h] [ebp-5Ch]
  int v54;           // [esp+10h] [ebp-8h]
  BOOL v55;          // [esp+14h] [ebp-4h]
  unsigned int v56;  // [esp+20h] [ebp+8h]

  v2 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v2 = -419430400;
  v2[1] = 0;
  v3 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v3 = -1174399998;
  v3[1] = 0x100000;
  v4 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  if (dword_10690A1C) {
    *v4 = -1191181539;
    v4[1] = 202973192;
    dword_10690A1C = 0;
  } else {
    *v4 = -1191181539;
    v4[1] = 202973240;
  }
  v53 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  sub_1002F900(
      v53, 1002, 1001, 1013, 1001, 1002, 1001, 1013, 1001, 1000, 0, 1004, 0, 0, 0, 0, 1000);
  v5 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v5 = -117440512;
  v5[1] = 0;
  v6 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = -1174400766;
  v6[1] = 0;
  v7 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v7 = -1174401023;
  v7[1] = 0;
  v8 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v8 = -1174401534;
  v8[1] = 0;
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = -1174402046;
  v9[1] = dword_106C0258;
  v10 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = -1174403582;
  v10[1] = dword_106C0688;
  v11 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v11 = -1174404094;
  v11[1] = dword_106C0920;
  v12 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v12 = -1224736768;
  v12[1] = 1;
  v13 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v13 = -1191182334;
  v13[1] = 1;
  v14 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v14 = -1174400766;
  v14[1] = 0;
  v15 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v15 = -1174401023;
  v15[1] = 0x10000;
  v16 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v16 = -1174401534;
  v16[1] = 0;
  v17 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v17 = -1174402046;
  v17[1] = dword_106C0258;
  v18 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v18 = -1241513984;
  v18[1] = 8729088;
  v19 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v19 = -1224736768;
  v19[1] = (dword_106C1174 != dword_106C3364 ? 4096 : 0x2000) | 0xA0205;
  v20 = sub_10069530();
  sub_10030E20((int)&flt_106C08A0, (int)v20, 0.0, -1.0, 15.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
  v21 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v21 = 58982416;
  v21[1] = v20;
  v22 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v22 = 58851344;
  v22[1] = v20 + 16;
  v23 = sub_10069490();
  sub_100307A0(a2, v23);
  v25 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v25 = 17039424;
  v25[1] = v23;
  v26 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v26 = -1157627903;
  v26[1] = -1;
  v27 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v27 = -1241513984;
  v27[1] = 786432;
  v28 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v28 = -402653184;
  v28[1] = 0;
  v29 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v29 = -183500800;
  v29[1] = 117440512;
  v30 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v30 = -184548880;
  v30[1] = 100663296;
  v31 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v31 = -184549120;
  v31[1] = 83886080;
  v32 = 0;
  v54 = 0;
  do {
    v56 = 0;
    if (*(_WORD *)(a1 + 2)) {
      v55 = v32 == 0;
      v33 = a1 + 12;
      do {
        LOBYTE(v24) = ~(unsigned __int8)*(_WORD *)v33;
        if (v55 == ((v24 >> 3) & 1) && *(_DWORD *)(v33 - 4)) {
          if ((*(_WORD *)v33 & 0x400) != 0) {
              v34 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v34 = -1140850678;
              v34[1] = 0;
              v35 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v35 = -1140849654;
              v35[1] = 0;
              v36 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v36 = -1140842486;
              v36[1] = dword_100AA5D0[*(_BYTE *)v33 & 3];
              v37 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v37 = -1140841462;
              v37[1] = dword_100AA5D0[*(_BYTE *)v33 & 3];
          }
          if ((*(_BYTE *)v33 & 4) != 0) {
              v38 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v38 = -1241513984;
              v38[1] = 12288;
          }
          if (*(char *)v33 < 0 && dword_100AA880) {
              v39 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v39 = -1241513984;
              v39[1] = 512;
          }
          v40 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v40 = -1157627903;
          v40[1] = -1;
          v41 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v41 = -402653184;
          v41[1] = 0;
          v42 = sub_10069490();
          sub_10031140(
              &flt_106C0860, *(_DWORD *)(v33 + 4), *(_DWORD *)(v33 + 8), *(_DWORD *)(v33 + 12));
          sub_100307A0((int)&flt_106C0860, v42);
          v43 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v43 = 17039424;
          v43[1] = v42;
          v44 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v44 = 100663296;
          v44[1] = *(_DWORD *)(v33 - 4);
          v45 = (_DWORD *)dword_106C0680;
          dword_106C0680 += 8;
          *v45 = -1124073472;
          v45[1] = 0;
          if (*(char *)v33 < 0 && dword_100AA880) {
              v46 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v46 = -1224736768;
              v46[1] = 512;
          }
          if ((*(_BYTE *)v33 & 4) != 0) {
              v47 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v47 = -1224736768;
              v47[1] = dword_106C1174 != dword_106C3364 ? 4096 : 0x2000;
          }
          if ((*(_BYTE *)(v33 + 1) & 4) != 0) {
              v48 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v48 = -1140850678;
              v48[1] = -256;
              v49 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v49 = -1140849654;
              v49[1] = -256;
              v50 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v50 = -1140842486;
              v50[1] = 1077952512;
              v51 = (_DWORD *)dword_106C0680;
              dword_106C0680 += 8;
              *v51 = -1140841462;
              v51[1] = 1077952512;
          }
        }
        v24 = a1;
        v33 += 20;
        ++v56;
      } while (v56 < *(unsigned __int16 *)(a1 + 2));
      v32 = v54;
    }
    v54 = ++v32;
  } while (v32 < 2);
  result = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  result[1] = 0;
  *result = -1124073472;
  return result;
}
// 1002FF37: variable 'v24' is possibly undefined
// 100AA880: using guessed type int dword_100AA880;
// 10690A1C: using guessed type int dword_10690A1C;
// 106C0258: using guessed type int dword_106C0258;
// 106C0680: using guessed type int dword_106C0680;
// 106C0688: using guessed type int dword_106C0688;
// 106C0860: using guessed type float flt_106C0860;
// 106C08A0: using guessed type float flt_106C08A0;
// 106C0920: using guessed type int dword_106C0920;
// 106C1174: using guessed type int dword_106C1174;
// 106C3364: using guessed type int dword_106C3364;

//----- (10030210) --------------------------------------------------------
void __cdecl GetDirectXVersion(_DWORD *dxVersion, _DWORD *out_b) {
  DWORD result;                                                                            // eax
  HMODULE dinputDllHmod;                                                                   // eax
  HMODULE dinputDllHmod_2;                                                                 // esi
  HRESULT(__stdcall * DirectInputCreateA)(HINSTANCE, DWORD, LPDIRECTINPUTA *, LPUNKNOWN);  // ebx
  HMODULE drawDllHmod;                                                                     // eax
  HMODULE drawDllHmod_2;                                                                   // esi
  HRESULT(__stdcall * DirectDrawCreatePA)(GUID *, LPDIRECTDRAW *, IUnknown *);             // eax
  IDirectDrawVtbl *ddrawVtbl;                                                              // ecx
  HMODULE dinputDllHmod_3;                                                                 // eax
  HMODULE dinputDllHmod_4;                                                                 // ebp
  HRESULT(__stdcall * DirectInputCreatePA)(HINSTANCE, DWORD, LPDIRECTINPUTA *, LPUNKNOWN); // edi
  IDirectDraw *ppvDDraw;                                                                   // eax
  IDirectDrawVtbl *ddrawVtbl_2;                                                            // ecx
  IDirectDrawSurfaceVtbl *ppvDDrawSurfaceVtbl;                                             // ecx
  IDirectDrawSurface *ppvDDrawSurface;                                                     // eax
  LPDIRECTDRAW lpDDraw;                      // [esp+38h] [ebp-130h]
  IDirectDraw *ppvDDraw3;                    // [esp+38h] [ebp-130h]
  IDirectDrawSurface *ppvDDrawSurfaceC;      // [esp+38h] [ebp-130h]
  IDirectDraw *lplpDD;                       // [esp+54h] [ebp-114h] BYREF
  IDirectDrawSurface *ppvDDrawSurfaceB;      // [esp+58h] [ebp-110h] BYREF
  IDirectDraw2 *ppvDDraw2;                   // [esp+5Ch] [ebp-10Ch] BYREF
  IDirectDrawSurface3 *ppvDDrawSurface3;     // [esp+60h] [ebp-108h] BYREF
  IDirectDrawSurface4 *ppvDDrawSurface4;     // [esp+64h] [ebp-104h] BYREF
  DDSURFACEDESC surfaceDesc;                 // [esp+68h] [ebp-100h] BYREF
  struct _OSVERSIONINFOA VersionInformation; // [esp+D4h] [ebp-94h] BYREF

  lplpDD = 0;
  ppvDDraw2 = 0;
  ppvDDrawSurfaceB = 0;
  ppvDDrawSurface3 = 0;
  ppvDDrawSurface4 = 0;
  VersionInformation.dwOSVersionInfoSize = 148;
  if (!GetVersionExA(&VersionInformation)) {
    *dxVersion = 0;
    *out_b = 0;
    return;
  }
  if (VersionInformation.dwPlatformId == 2) {
    result = VersionInformation.dwMajorVersion;
    *out_b = 2;
    if (result < 4) {
      *out_b = 0;
      return;
    }
    if (result == 4) {
      *dxVersion = 512;
      dinputDllHmod = LoadLibraryA(g_DINPUT_DLL);
      dinputDllHmod_2 = dinputDllHmod;
      if (dinputDllHmod) {
        DirectInputCreateA =
            (HRESULT(__stdcall *)(HINSTANCE, DWORD, LPDIRECTINPUTA *, LPUNKNOWN))GetProcAddress(
                dinputDllHmod, aDirectinputcre);
        FreeLibrary(dinputDllHmod_2);
        if (DirectInputCreateA)
          *dxVersion = 768;
        else
          OutputDebugStringA(aCouldnTGetproc);
      } else {
        OutputDebugStringA(aCouldnTLoadlib);
      }
      return;
    }
  } else {
    *out_b = 1;
  }
  drawDllHmod = LoadLibraryA(LibFileName);
  drawDllHmod_2 = drawDllHmod;
  if (drawDllHmod) {
    DirectDrawCreatePA = (HRESULT(__stdcall *)(GUID *, LPDIRECTDRAW *, IUnknown *))GetProcAddress(
        drawDllHmod, aDirectdrawcrea);
    if (DirectDrawCreatePA) {
      if (DirectDrawCreatePA(0, &lplpDD, 0) >= 0) {
        ddrawVtbl = lplpDD->lpVtbl;
        lpDDraw = lplpDD;
        *dxVersion = 256;
        if (ddrawVtbl->QueryInterface(lpDDraw, &CLSID_IDirectDraw2, &ppvDDraw2) >= 0) {
          ppvDDraw2->lpVtbl->Release(ppvDDraw2);
          *dxVersion = 512;
          dinputDllHmod_3 = LoadLibraryA(g_DINPUT_DLL);
          dinputDllHmod_4 = dinputDllHmod_3;
          if (dinputDllHmod_3) {
              DirectInputCreatePA = (HRESULT(__stdcall *)(
                  HINSTANCE, DWORD, LPDIRECTINPUTA *, LPUNKNOWN))GetProcAddress(dinputDllHmod_3,
                                                                                aDirectinputcre);
              FreeLibrary(dinputDllHmod_4);
              if (DirectInputCreatePA) {
                  memset(&surfaceDesc, 0, sizeof(surfaceDesc));
                  ppvDDraw = lplpDD;
                  ppvDDraw3 = lplpDD;
                  *dxVersion = 768;
                  ddrawVtbl_2 = ppvDDraw->lpVtbl;
                  surfaceDesc.dwSize = 108;         // sizeof(DDSURFACEDESC)
                  surfaceDesc.dwFlags = 1;          // DDSD_CAPS
                  surfaceDesc.ddsCaps.dwCaps = 512; // DDSCAPS_PRIMARYSURFACE
                  if (ddrawVtbl_2->SetCooperativeLevel(ppvDDraw3, 0, 8) >= 0) {
                      if (lplpDD->lpVtbl->CreateSurface(
                              lplpDD, &surfaceDesc, &ppvDDrawSurfaceB, 0) >= 0) {
                          if (ppvDDrawSurfaceB->lpVtbl->QueryInterface(
                                  ppvDDrawSurfaceB,
                                  &CLSID_IDirectDrawSurface3,
                                  (LPVOID *)&ppvDDrawSurface3) >= 0) {
                              ppvDDrawSurfaceVtbl = ppvDDrawSurfaceB->lpVtbl;
                              ppvDDrawSurfaceC = ppvDDrawSurfaceB;
                              *dxVersion = 1280;
                              if (ppvDDrawSurfaceVtbl->QueryInterface(
                                      ppvDDrawSurfaceC,
                                      &CLSID_IDirectDrawSurface4,
                                      (LPVOID *)&ppvDDrawSurface4) >= 0) {
                                  ppvDDrawSurface = ppvDDrawSurfaceB;
                                  *dxVersion = 1536;
                                  ppvDDrawSurface->lpVtbl->Release(ppvDDrawSurface);
                              }
                          }
                          lplpDD->lpVtbl->Release(lplpDD);
                          FreeLibrary(drawDllHmod_2);
                      } else {
                          lplpDD->lpVtbl->Release(lplpDD);
                          FreeLibrary(drawDllHmod_2);
                          *dxVersion = 0;
                          OutputDebugStringA(aCouldnTCreates);
                      }
                  } else {
                      lplpDD->lpVtbl->Release(lplpDD);
                      FreeLibrary(drawDllHmod_2);
                      *dxVersion = 0;
                      OutputDebugStringA(aCouldnTSetCoop);
                  }
              } else {
                  FreeLibrary(drawDllHmod_2);
                  lplpDD->lpVtbl->Release(lplpDD);
                  OutputDebugStringA(aCouldnTGetproc);
              }
          } else {
              OutputDebugStringA(aCouldnTLoadlib);
              lplpDD->lpVtbl->Release(lplpDD);
              FreeLibrary(drawDllHmod_2);
          }
        } else {
          lplpDD->lpVtbl->Release(lplpDD);
          FreeLibrary(drawDllHmod_2);
          OutputDebugStringA(aCouldnTQiDdraw);
        }
      } else {
        *dxVersion = 0;
        *out_b = 0;
        FreeLibrary(drawDllHmod_2);
        OutputDebugStringA(aCouldnTCreateD);
      }
    } else {
      *dxVersion = 0;
      *out_b = 0;
      FreeLibrary(drawDllHmod_2);
      OutputDebugStringA(aCouldnTLoadlib_0);
    }
  } else {
    *dxVersion = 0;
    *out_b = 0;
    FreeLibrary(0);
  }
}

//----- (100305B0) --------------------------------------------------------
double __cdecl sub_100305B0(double *a1) {
  return a1[1] * a1[1] + a1[2] * a1[2] + *a1 * *a1;
}

//----- (100305F0) --------------------------------------------------------
long double __cdecl sub_100305F0(double *a1) {
  return sqrt(sub_100305B0(a1));
}

//----- (10030600) --------------------------------------------------------
double *__cdecl sub_10030600(double *a1) {
  double v1; // st7

  v1 = sub_100305F0(a1);
  if (v1 != 0.0) {
    *a1 = *a1 / v1;
    a1[1] = a1[1] / v1;
    a1[2] = a1[2] / v1;
  }
  return a1;
}

//----- (10030640) --------------------------------------------------------
double __cdecl sub_10030640(double *a1, double *a2) {
  return a2[1] * a1[1] + a2[2] * a1[2] + *a2 * *a1;
}

//----- (10030670) --------------------------------------------------------
double *__cdecl sub_10030670(double *a1, double *a2, double *a3) {
  double *result; // eax

  result = a3;
  *a3 = a2[2] * a1[1] - a1[2] * a2[1];
  a3[1] = a1[2] * *a2 - a2[2] * *a1;
  a3[2] = a2[1] * *a1 - a1[1] * *a2;
  return result;
}

//----- (100306C0) --------------------------------------------------------
float *__cdecl sub_100306C0(float *a1, float *a2, float *a3) {
  float *result; // eax
  float *v4;     // edx
  float *v5;     // ecx
  int v6;        // edi
  int v7;        // esi
  double v8;     // st6
  double v9;     // st7
  char *v10;     // edx
  float *v11;    // ecx
  int v12;       // ebx
  int v13;       // esi
  double v14;    // st6
  double v15;    // st7
  char v16[64];  // [esp+10h] [ebp-40h] BYREF

  result = a1;
  if (a1 && a2) {
    if (a1 == a3 || a2 == a3) {
      v10 = v16;
      v11 = a1 + 2;
      v12 = 4;
      do {
        result = a2 + 8;
        v13 = 4;
        do {
          v14 = *v11 * *result;
          v15 = result[4] * v11[1] + *(result - 4) * *(v11 - 1) + *(result - 8) * *(v11 - 2);
          ++result;
          v10 += 4;
          --v13;
          *((float *)v10 - 1) = v15 + v14;
        } while (v13);
        v11 += 4;
        --v12;
      } while (v12);
      qmemcpy(a3, v16, 0x40u);
    } else {
      v4 = a3;
      v5 = a1 + 2;
      v6 = 4;
      do {
        result = a2 + 8;
        v7 = 4;
        do {
          v8 = *(result - 4) * *(v5 - 1);
          v9 = *v5 * *result + result[4] * v5[1] + *(result - 8) * *(v5 - 2);
          ++result;
          ++v4;
          --v7;
          *(v4 - 1) = v9 + v8;
        } while (v7);
        v5 += 4;
        --v6;
      } while (v6);
    }
  }
  return result;
}

//----- (100307A0) --------------------------------------------------------
_DWORD *__cdecl sub_100307A0(float *a1, _DWORD *a2) {
  _DWORD *result; // eax
  int v3;         // ebx
  int v4;         // edx

  result = a2;
  v3 = 4;
  do {
    v4 = 4;
    do {
      *result = *(_DWORD *)((char *)result + (char *)a1 - (char *)a2);
      ++result;
      --v4;
    } while (v4);
    --v3;
  } while (v3);
  return result;
}

//----- (100307D0) --------------------------------------------------------
_DWORD *__cdecl sub_100307D0(_DWORD *a1) {
  _DWORD *result; // eax

  result = a1;
  *a1 = 1065353216;
  a1[1] = 0;
  a1[2] = 0;
  a1[3] = 0;
  a1[4] = 0;
  a1[5] = 1065353216;
  a1[6] = 0;
  a1[7] = 0;
  a1[8] = 0;
  a1[9] = 0;
  a1[10] = 1065353216;
  a1[11] = 0;
  a1[12] = 0;
  a1[13] = 0;
  a1[14] = 0;
  a1[15] = 1065353216;
  return result;
}

//----- (10030810) --------------------------------------------------------
float *__cdecl maybe_guFrustumF(
    float *a1, float a2, float a3, float a4, float a5, float a6, float a7) {
  double v7;     // st5
  double v8;     // st1
  double v9;     // rt2
  double v10;    // st1
  double v11;    // st0
  double v12;    // st5
  float *result; // eax
  double v14;    // st4
  double v15;    // rtt
  float a6a;     // [esp+18h] [ebp+18h]
  float a6b;     // [esp+18h] [ebp+18h]
  float a6c;     // [esp+18h] [ebp+18h]
  float a7a;     // [esp+1Ch] [ebp+1Ch]

  if (a2 == a3 || a5 == a4 || a6 == a7)
    return (float *)printf("Error: guFrustumF(): unable to compute matrix\n");
  v7 = a7 + a6;
  v8 = a7 * a6 + a7 * a6;
  a7a = a7 - a6;
  v9 = v8;
  v10 = a6 + a6;
  a6a = v10;
  v11 = v7;
  v12 = a6a;
  result = a1;
  a1[4] = 0.0;
  a1[12] = 0.0;
  a1[1] = 0.0;
  a1[13] = 0.0;
  a1[2] = 0.0;
  a1[6] = 0.0;
  a1[3] = 0.0;
  a1[7] = 0.0;
  a1[11] = -1.0;
  a1[15] = 0.0;
  a6b = a3 - a2;
  v14 = v10 / a6b;
  v15 = (a3 + a2) / a6b;
  a6c = a5 - a4;
  *a1 = v14;
  a1[8] = v15;
  a1[5] = v12 / a6c;
  a1[9] = (a5 + a4) / a6c;
  a1[10] = -(v11 / a7a);
  a1[14] = -(v9 / a7a);
  return result;
}

//----- (10030930) --------------------------------------------------------
WORD *__cdecl sub_10030930(float *a1, WORD *a2, float a3, float a4, float a5, float a7) {
  long double v6; // st7
  long double v7; // st6
  double v8;      // st7
  float v9;       // eax
  WORD *result;   // eax
  float a2a;      // [esp+0h] [ebp-1Ch]
  float a4a;      // [esp+8h] [ebp-14h]
  float a3a;      // [esp+30h] [ebp+14h]
  float a3b;      // [esp+30h] [ebp+14h]

  v6 = tan(a3 * 0.008726646259971648) * a5;
  a3a = v6;
  v7 = v6 * a4;
  v8 = a3a;
  v9 = a3a;
  a3b = v7;
  a4a = -v8;
  a2a = -a3b;
  maybe_guFrustumF(a1, a2a, a3b, a4a, v9, a5, a7);
  result = a2;
  *a2 = 1;
  return result;
}

//----- (100309A0) --------------------------------------------------------
int __cdecl sub_100309A0(int a1,
                         float a2,
                         float a3,
                         float a4,
                         float a5,
                         float a6,
                         float a7,
                         float a8,
                         float a9,
                         float a10) {
  double v10; // st7
  int result; // eax
  double v12; // st2
  double v13; // st1
  double v14; // st6
  double v15; // st7
  double v16; // st5
  double v17; // st4
  double v18; // st3
  double v19; // st0
  double v20; // st2
  double v21; // st0
  double v22; // st1
  double v23; // st0
  double v24; // st6
  double v25; // st6
  double v26; // st7
  double v27; // [esp+0h] [ebp-48h] BYREF
  double v28; // [esp+8h] [ebp-40h]
  double v29; // [esp+10h] [ebp-38h]
  double v30; // [esp+18h] [ebp-30h] BYREF
  double v31; // [esp+20h] [ebp-28h]
  double v32; // [esp+28h] [ebp-20h]
  double v33; // [esp+30h] [ebp-18h] BYREF
  double v34; // [esp+38h] [ebp-10h]
  double v35; // [esp+40h] [ebp-8h]

  v30 = a2 - a5;
  v31 = a3 - a6;
  v32 = a4 - a7;
  sub_10030600(&v30);
  v27 = a8;
  v28 = a9;
  v29 = a10;
  v10 = sub_10030640(&v27, &v30);
  v27 = v27 - v10 * v30;
  v28 = v28 - v10 * v31;
  v29 = v29 - v10 * v32;
  sub_10030600(&v27);
  sub_10030670(&v27, &v30, &v33);
  result = a1;
  v12 = v34;
  v13 = v35;
  v14 = v27;
  v15 = -(a2 * v33) - a3 * v34 - a4 * v35;
  v16 = v28;
  v17 = -(a2 * v27) - a3 * v28 - a4 * v29;
  v18 = v29;
  *(float *)a1 = v33;
  v19 = v12;
  v20 = v30;
  *(float *)(a1 + 16) = v19;
  v21 = v13;
  v22 = v31;
  *(float *)(a1 + 32) = v21;
  v23 = v14;
  v24 = v32;
  *(float *)(a1 + 4) = v23;
  *(float *)(a1 + 20) = v16;
  *(float *)(a1 + 36) = v18;
  *(float *)(a1 + 8) = v20;
  *(float *)(a1 + 24) = v22;
  *(float *)(a1 + 40) = v24;
  *(float *)(a1 + 48) = v15;
  *(float *)(a1 + 52) = v17;
  v25 = a4 * v32;
  v26 = -(a2 * v30) - a3 * v31;
  *(_DWORD *)(a1 + 44) = 0;
  *(_DWORD *)(a1 + 28) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  *(_DWORD *)(a1 + 60) = 1065353216;
  *(float *)(a1 + 56) = v26 - v25;
  return result;
}

//----- (10030B50) --------------------------------------------------------
__int64 __cdecl sub_10030B50(int a1,
                             int a2,
                             int a3,
                             float a4,
                             float a5,
                             float a6,
                             float a7,
                             float a8,
                             float a9,
                             float a10,
                             float a11,
                             float a12,
                             float a13,
                             float a14,
                             float a15,
                             float a16,
                             float a17,
                             float a18,
                             int a19,
                             int a20) {
  long double v21; // st7
  long double v22; // st5
  long double v23; // st7
  __int64 result;  // rax
  double v25;      // [esp+14h] [ebp-30h] BYREF
  double v26;      // [esp+1Ch] [ebp-28h]
  double v27;      // [esp+24h] [ebp-20h]
  long double v28; // [esp+34h] [ebp-10h]

  sub_100309A0(a1, a4, a5, a6, a7, a8, a9, a10, a11, a12);
  *(_BYTE *)(a2 + 8) = sub_10030DE0(*(float *)a1);
  *(_BYTE *)(a2 + 9) = sub_10030DE0(*(float *)(a1 + 16));
  *(_BYTE *)(a2 + 10) = sub_10030DE0(*(float *)(a1 + 32));
  *(_BYTE *)(a2 + 24) = sub_10030DE0(*(float *)(a1 + 4));
  *(_BYTE *)(a2 + 25) = sub_10030DE0(*(float *)(a1 + 20));
  *(_BYTE *)(a2 + 26) = sub_10030DE0(*(float *)(a1 + 36));
  v25 = a13;
  v26 = a14;
  v27 = a15;
  sub_10030600(&v25);
  v28 = *(float *)(a1 + 36) * v27 + *(float *)(a1 + 4) * v25 + *(float *)(a1 + 20) * v26;
  v21 = v28;
  *(_DWORD *)a3 =
      256 -
      (__int64)(atan2(*(float *)(a1 + 32) * v27 + *(float *)(a1 + 16) * v26 + *(float *)a1 * v25,
                      *(float *)(a1 + 24) * v26 + *(float *)(a1 + 40) * v27 +
                          *(float *)(a1 + 8) * v25) *
                -81.48734781601175);
  v25 = a16;
  v26 = a17;
  v27 = a18;
  *(_DWORD *)(a3 + 4) = 256 - (__int64)(asin(v21) * -81.48734781601175);
  sub_10030600(&v25);
  v22 = atan2(*(float *)(a1 + 32) * v27 + *(float *)(a1 + 16) * v26 + *(float *)a1 * v25,
              *(float *)(a1 + 24) * v26 + *(float *)(a1 + 40) * v27 + *(float *)(a1 + 8) * v25);
  v28 = *(float *)(a1 + 36) * v27 + *(float *)(a1 + 4) * v25 + *(float *)(a1 + 20) * v26;
  v23 = v28;
  *(_DWORD *)(a3 + 8) = 4 * a19 - (__int64)(v22 * (double)(4 * a19) * -0.3183099524062959);
  result = (__int64)(asin(v23) * (double)(4 * a20) * -0.3183099524062959);
  *(_DWORD *)(a3 + 12) = 4 * a20 - result;
  return result;
}

//----- (10030DE0) --------------------------------------------------------
int __cdecl sub_10030DE0(double a1) {
  __int64 v1; // rax

  v1 = (__int64)floor(0.5 - a1 * -128.0);
  if ((int)v1 < -128)
    LODWORD(v1) = -128;
  if ((int)v1 > 127)
    LODWORD(v1) = 127;
  return v1;
}

//----- (10030E20) --------------------------------------------------------
int __cdecl sub_10030E20(int a1,
                         int a2,
                         float a3,
                         float a4,
                         float a5,
                         float a6,
                         float a7,
                         float a8,
                         float a9,
                         float a10,
                         float a11) {
  int result; // eax

  sub_100309A0(a1, a3, a4, a5, a6, a7, a8, a9, a10, a11);
  *(_BYTE *)(a2 + 8) = sub_10030DE0(*(float *)a1);
  *(_BYTE *)(a2 + 9) = sub_10030DE0(*(float *)(a1 + 16));
  *(_BYTE *)(a2 + 10) = sub_10030DE0(*(float *)(a1 + 32));
  *(_BYTE *)(a2 + 24) = sub_10030DE0(*(float *)(a1 + 4));
  *(_BYTE *)(a2 + 25) = sub_10030DE0(*(float *)(a1 + 20));
  result = sub_10030DE0(*(float *)(a1 + 36));
  *(_BYTE *)(a2 + 26) = result;
  return result;
}

//----- (10030EE0) --------------------------------------------------------
float *__cdecl sub_10030EE0(int a1, float a2, float a3, float a4, float a5) {
  float *result;   // eax
  int *v6;         // esi
  float *v7;       // eax
  int v8;          // edi
  int *v9;         // ecx
  int v10;         // edx
  int v11;         // ebx
  long double v12; // rt1
  int v13;         // [esp+0h] [ebp-CCh]
  long double v14; // [esp+4h] [ebp-C8h]
  int v15[16];     // [esp+Ch] [ebp-C0h] BYREF
  int v16[16];     // [esp+4Ch] [ebp-80h] BYREF
  float v17[16];   // [esp+8Ch] [ebp-40h] BYREF

  if (a3 == 0.0 && a4 == 0.0 && a5 == 0.0) {
    result = (float *)a1;
    *(_DWORD *)a1 = 1065353216;
    *(_DWORD *)(a1 + 4) = 0;
    *(_DWORD *)(a1 + 8) = 0;
    *(_DWORD *)(a1 + 12) = 0;
    *(_DWORD *)(a1 + 16) = 0;
    *(_DWORD *)(a1 + 20) = 1065353216;
    *(_DWORD *)(a1 + 24) = 0;
    *(_DWORD *)(a1 + 28) = 0;
    *(_DWORD *)(a1 + 32) = 0;
    *(_DWORD *)(a1 + 36) = 0;
    *(_DWORD *)(a1 + 40) = 1065353216;
    *(_DWORD *)(a1 + 44) = 0;
    *(_DWORD *)(a1 + 48) = 0;
    *(_DWORD *)(a1 + 52) = 0;
    *(_DWORD *)(a1 + 56) = 0;
    *(_DWORD *)(a1 + 60) = 1065353216;
  } else {
    sub_100309A0((int)v16, a3, a4, a5, 0.0, 0.0, 0.0, a4, a5, a3);
    v16[3] = 0;
    v16[7] = 0;
    v16[11] = 0;
    v16[12] = 0;
    v16[13] = 0;
    v16[14] = 0;
    v16[15] = 1065353216;
    v6 = v16;
    v7 = v17;
    v8 = 4;
    do {
      v9 = v6;
      v10 = 4;
      do {
        v11 = *v9;
        v9 += 4;
        *(_DWORD *)v7++ = v11;
        --v10;
      } while (v10);
      ++v6;
      --v8;
    } while (v8);
    v14 = a2 * 0.0174532925199433;
    v15[2] = 0;
    v15[3] = 0;
    v15[6] = 0;
    v15[7] = 0;
    v15[8] = 0;
    v15[9] = 0;
    v15[10] = 1065353216;
    v15[11] = 0;
    v15[12] = 0;
    v15[13] = 0;
    v15[14] = 0;
    v15[15] = 1065353216;
    v12 = sin(v14);
    *(float *)&v13 = v12;
    *(float *)&v14 = cos(v14);
    v15[1] = v13;
    *(float *)&v15[4] = -v12;
    v15[0] = LODWORD(v14);
    v15[5] = LODWORD(v14);
    sub_100306C0((float *)v16, (float *)v15, (float *)a1);
    result = sub_100306C0((float *)a1, v17, (float *)a1);
  }
  return result;
}

//----- (100310F0) --------------------------------------------------------
int __cdecl sub_100310F0(int a1, float a2, int a3, int a4) {
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 20) = a3;
  *(float *)a1 = a2;
  *(_DWORD *)(a1 + 40) = a4;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  *(_DWORD *)(a1 + 16) = 0;
  *(_DWORD *)(a1 + 24) = 0;
  *(_DWORD *)(a1 + 28) = 0;
  *(_DWORD *)(a1 + 32) = 0;
  *(_DWORD *)(a1 + 36) = 0;
  *(_DWORD *)(a1 + 44) = 0;
  *(_DWORD *)(a1 + 48) = 0;
  *(_DWORD *)(a1 + 52) = 0;
  *(_DWORD *)(a1 + 56) = 0;
  *(_DWORD *)(a1 + 60) = 1065353216;
  return result;
}

//----- (10031140) --------------------------------------------------------
_DWORD *__cdecl sub_10031140(_DWORD *a1, int a2, int a3, int a4) {
  _DWORD *result; // eax

  result = a1;
  a1[1] = 0;
  a1[2] = 0;
  a1[3] = 0;
  a1[4] = 0;
  a1[6] = 0;
  a1[7] = 0;
  a1[8] = 0;
  a1[9] = 0;
  a1[11] = 0;
  a1[12] = a2;
  a1[13] = a3;
  *a1 = 1065353216;
  a1[5] = 1065353216;
  a1[10] = 1065353216;
  a1[14] = a4;
  a1[15] = 1065353216;
  return result;
}

//----- (10031190) --------------------------------------------------------
char *__thiscall sub_10031190(unk06594 *this) {
  if (*(_DWORD *)&gUnk06594.gap1C8[12436] == 32)
    meth_unk1A5E0_3(this);
  else
    ++*(_DWORD *)&gUnk06594.gap1C8[12436];
  *(_DWORD *)&gUnk06594.gap1C8[12432] = (*(_DWORD *)&gUnk06594.gap1C8[12432] + 1) % 32;
  return (char *)&unk_106C29F0 + 24 * *(_DWORD *)&gUnk06594.gap1C8[12432];
}

//----- (10031227) --------------------------------------------------------
int sub_10031227() {
  int result; // eax

  dword_106C32CC = 0;
  MEMORY[0x106C56DC] = 0;
  dword_106C1178 = 0;
  dword_106C161C = 0;
  dword_106C1610 = 0;
  MEMORY[0x106C33B8] = 0;
  result = 0;
  dword_106C06A4 = 0;
  dword_106C069C = 0;
  return result;
}
// 106C069C: using guessed type int dword_106C069C;
// 106C06A4: using guessed type int dword_106C06A4;
// 106C1178: using guessed type int dword_106C1178;
// 106C1610: using guessed type int dword_106C1610;
// 106C161C: using guessed type int dword_106C161C;
// 106C32CC: using guessed type int dword_106C32CC;
// 106C33B8: using guessed type int dword_106C33B8;
// 106C56DC: using guessed type int dword_106C56DC;

//----- (10031282) --------------------------------------------------------
int sub_10031282() {
  return sub_1003128C();
}

//----- (1003128C) --------------------------------------------------------
int sub_1003128C() {
  int result; // eax

  result = gWidth;
  g_Width1 = gWidth;
  g_Height1 = gHeight;
  return result;
}
// 100A81C0: using guessed type int g_Width;
// 100A81C4: using guessed type int g_Height;
// 106C0684: using guessed type int g_Width1;
// 106C299C: using guessed type int g_Height1;

//----- (100312A7) --------------------------------------------------------
double __cdecl sub_100312A7(float *a1) {
  double result; // st7
  float v2;      // [esp+0h] [ebp-18h]
  float v3;      // [esp+0h] [ebp-18h]
  float v4;      // [esp+4h] [ebp-14h]
  float *i;      // [esp+Ch] [ebp-Ch]
  float v6;      // [esp+14h] [ebp-4h]

  v6 = 0.0;
  v2 = 0.0;
  for (i = a1; i < a1 + 12; ++i) {
    v4 = *i;
    if (v4 >= 0.0) {
      if (v6 < (double)v4)
        v6 = v4;
    } else if (v2 > (double)v4) {
      v2 = v4;
    }
  }
  v3 = -v2;
  if (v3 <= (double)v6)
    result = v6;
  else
    result = v3;
  return result;
}

//----- (10031342) --------------------------------------------------------
void sub_10031342() {
  ;
}

//----- (10031481) --------------------------------------------------------
int __cdecl sub_10031481(int a1, int a2) {
  int result;       // eax
  unsigned int *v3; // [esp+0h] [ebp-4h]

  result = 36 * a1;
  if (((*(_DWORD *)(a2 + 36 * a1 + 32) >> 20) & 1) == 0) {
    v3 = (unsigned int *)dword_106C0680;
    dword_106C0680 += 8;
    *v3 = *(_DWORD *)(a2 + 36 * a1) & 0xFFFFFF | 0xDC000000;
    result = (int)v3;
    v3[1] = 1;
  }
  return result;
}
// 106C0680: using guessed type int dword_106C0680;

//----- (100314DE) --------------------------------------------------------
void sub_100314DE() {
  ;
}

//----- (100314E3) --------------------------------------------------------
void sub_100314E3() {
  ;
}

//----- (100314E8) --------------------------------------------------------
_DWORD *__cdecl sub_100314E8(__int16 a1, __int16 a2, int a3) {
  unsigned __int16 v3; // ax
  _DWORD *result;      // eax
  _DWORD *v5;          // [esp+0h] [ebp-20h]
  _DWORD *v6;          // [esp+4h] [ebp-1Ch]
  unsigned int *v7;    // [esp+8h] [ebp-18h]
  _DWORD *v8;          // [esp+Ch] [ebp-14h]
  _DWORD *v9;          // [esp+10h] [ebp-10h]
  _DWORD *v10;         // [esp+14h] [ebp-Ch]
  _DWORD *v11;         // [esp+18h] [ebp-8h]

  v3 = (a3 >> 2) & 0x3E | (8 * a2) & 0x7C0 | (a1 << 8) & 0xF800;
  LOBYTE(v3) = (a3 >> 2) & 0x3E | (8 * a2) & 0xC0 | 1;
  v11 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v11 = -419430400;
  v11[1] = 0;
  v10 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = -1191181539;
  v10[1] = 252329984;
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = -1174399998;
  v9[1] = 3145728;
  v8 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v8 = -150994944;
  v8[1] = (v3 << 16) | v3;
  v7 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v7 = ((unsigned __int16)(g_Height1 << MEMORY[0x106C65E4]) - 1) & 0xFFF |
        ((((unsigned __int16)(g_Width1 << MEMORY[0x106C65E4]) - 1) & 0xFFF) << 12) | 0xE1000000;
  v7[1] = 0;
  v6 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = -419430400;
  v6[1] = 0;
  v5 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  result = v5;
  *v5 = -1174399998;
  v5[1] = 0;
  return result;
}
// 106C0680: using guessed type int dword_106C0680;
// 106C0684: using guessed type int g_Width1;
// 106C299C: using guessed type int g_Height1;
// 106C65E4: using guessed type int dword_106C65E4;

//----- (10031688) --------------------------------------------------------
_DWORD *__cdecl sub_10031688(int a1, int a2, int a3, int a4, __int16 a5, __int16 a6, int a7) {
  _DWORD *result;       // eax
  _DWORD *v8;           // [esp+0h] [ebp-20h]
  _DWORD *v9;           // [esp+4h] [ebp-1Ch]
  unsigned int *v10;    // [esp+8h] [ebp-18h]
  _DWORD *v11;          // [esp+Ch] [ebp-14h]
  _DWORD *v12;          // [esp+10h] [ebp-10h]
  _DWORD *v13;          // [esp+14h] [ebp-Ch]
  _DWORD *v14;          // [esp+18h] [ebp-8h]
  unsigned __int16 v15; // [esp+1Ch] [ebp-4h]

  if (MEMORY[0x106C65E4]) {
    a1 *= 2;
    a2 *= 2;
    a3 *= 2;
    a4 *= 2;
  }
  v15 = (a7 >> 2) & 0x3E | (8 * a6) & 0x7C0 | (a5 << 8) & 0xF800 | 1;
  v14 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v14 = -419430400;
  v14[1] = 0;
  v13 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v13 = -1191181539;
  v13[1] = 252329984;
  v12 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v12 = -1174399998;
  v12[1] = 3145728;
  v11 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v11 = -150994944;
  v11[1] = (v15 << 16) | v15;
  v10 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = ((unsigned __int16)((a4 + a2) << MEMORY[0x106C65E4]) - 1) & 0xFFF |
         ((((unsigned __int16)((a3 + a1) << MEMORY[0x106C65E4]) - 1) & 0xFFF) << 12) | 0xE1000000;
  v10[1] = a2 & 0xFFF | ((a1 & 0xFFF) << 12);
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = -419430400;
  v9[1] = 0;
  v8 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v8 = -1174399998;
  result = v8;
  v8[1] = 0;
  return result;
}
// 106C0680: using guessed type int dword_106C0680;
// 106C65E4: using guessed type int dword_106C65E4;

//----- (10031866) --------------------------------------------------------
char sub_10031866() {
  int v0;     // eax
  float v2;   // [esp+4h] [ebp-44h]
  float v3;   // [esp+Ch] [ebp-3Ch]
  float v4;   // [esp+14h] [ebp-34h]
  float v5;   // [esp+1Ch] [ebp-2Ch]
  float v6;   // [esp+24h] [ebp-24h]
  float v7;   // [esp+2Ch] [ebp-1Ch]
  _DWORD *v8; // [esp+34h] [ebp-14h]
  _DWORD *v9; // [esp+38h] [ebp-10h]
  float v10;  // [esp+3Ch] [ebp-Ch]
  int v11;    // [esp+40h] [ebp-8h]
  float v12;  // [esp+44h] [ebp-4h]

  if (MEMORY[0x106C661C]) {
    byte_106C0200 = 0;
    byte_106C1614 = 0;
    byte_106C0260 = 0;
    byte_10690BE8 = 64;
    if (dword_100B4050 == 2)
      MEMORY[0x106C3398] = 992;
    else
      MEMORY[0x106C3398] = 968;
    MEMORY[0x106C64D8] = 1020;
  } else if (MEMORY[0x106C6620]) {
    byte_106C0260 = -72;
    byte_106C1614 = -72;
    byte_106C0200 = -40;
    byte_10690BE8 = 64;
    if (dword_100B4050 == 2) {
      MEMORY[0x106C3398] = 950;
      MEMORY[0x106C64D8] = 1000;
    } else {
      MEMORY[0x106C3398] = 800;
      MEMORY[0x106C64D8] = 1050;
    }
  } else if (MEMORY[0x106C6624]) {
    byte_106C0260 = 96;
    byte_106C1614 = 104;
    byte_106C0200 = 112;
    byte_10690BE8 = 64;
    if (dword_100A79CC > 0 && (dword_100A79CC & 1) != 0) {
      v12 = 100.0 / (sub_1003B0A0((float *)MEMORY[0x106C6490] + 12, &flt_104B0378) + 100.0);
      v7 = (float)(unsigned __int8)byte_106C0260;
      byte_106C0260 = (__int64)((1.0 - v12) * v7 + 240.0 * v12);
      v6 = (float)(unsigned __int8)byte_106C1614;
      byte_106C1614 = (__int64)((1.0 - v12) * v6 + 248.0 * v12);
      v5 = (float)(unsigned __int8)byte_106C0200;
      byte_106C0200 = (__int64)((1.0 - v12) * v5 + 255.0 * v12);
    }
    if (dword_100B4050 == 2) {
      MEMORY[0x106C3398] = 930;
      MEMORY[0x106C64D8] = 1000;
    } else {
      MEMORY[0x106C3398] = 850;
      MEMORY[0x106C64D8] = 1025;
    }
  } else if (MEMORY[0x106C6618]) {
    v11 = (__int64)((*(float *)(dword_106C2CF8 + 56) - MEMORY[0x106C7C80]) /
                    (MEMORY[0x106C7C84] - MEMORY[0x106C7C80]) * 255.0);
    if (v11 >= 0) {
      if (v11 > 255)
        LOBYTE(v11) = -1;
    } else {
      LOBYTE(v11) = 0;
    }
    if (gChosenTrack) {
      byte_106C0260 = MEMORY[0x106C7CC8];
      byte_106C1614 = MEMORY[0x106C7CC9];
      byte_106C0200 = MEMORY[0x106C7CCA];
    } else {
      if (*((float *)MEMORY[0x106C6490] + 13) <= 1024.0)
        v10 = 0.0;
      else
        v10 = *((float *)MEMORY[0x106C6490] + 12) * 0.00043945311 *
              ((*((float *)MEMORY[0x106C6490] + 13) - 1024.0) * 0.00087890623);
      v4 = (float)(unsigned __int8)MEMORY[0x106C7CC8];
      byte_106C0260 = (__int64)((1.0 - v10) * v4 + 160.0 * v10);
      v3 = (float)(unsigned __int8)MEMORY[0x106C7CC9];
      byte_106C1614 = (__int64)((1.0 - v10) * v3 + 160.0 * v10);
      v2 = (float)(unsigned __int8)MEMORY[0x106C7CCA];
      byte_106C0200 = (__int64)((1.0 - v10) * v2 + 160.0 * v10);
    }
    byte_10690BE8 = v11;
    if (dword_100B4050 == 2)
      MEMORY[0x106C3398] = 995;
    else
      MEMORY[0x106C3398] = 980;
    MEMORY[0x106C64D8] = 1000;
  } else {
    byte_106C0260 = 0;
    byte_106C1614 = 0;
    byte_106C0200 = 0;
    byte_10690BE8 = -1;
    MEMORY[0x106C3398] = 0;
    MEMORY[0x106C64D8] = 1000;
  }
  dword_106C2CF4 = 128000 / (MEMORY[0x106C64D8] - MEMORY[0x106C3398]);
  dword_106C1618 = ((500 - MEMORY[0x106C3398]) << 8) / (MEMORY[0x106C64D8] - MEMORY[0x106C3398]);
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = -1140850680;
  v9[1] = (unsigned __int16)(((500 - MEMORY[0x106C3398]) << 8) /
                             (MEMORY[0x106C64D8] - MEMORY[0x106C3398])) |
          ((unsigned __int16)(128000 / (MEMORY[0x106C64D8] - MEMORY[0x106C3398])) << 16);
  v8 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v8 = -134217728;
  v0 = ((unsigned __int8)byte_106C0200 << 8) | ((unsigned __int8)byte_106C1614 << 16) |
       ((unsigned __int8)byte_106C0260 << 24);
  LOBYTE(v0) = -1;
  v8[1] = v0;
  return v0;
}
// 100A79CC: using guessed type int dword_100A79CC;
// 100B380C: using guessed type int g_chosenTrack;
// 100B4050: using guessed type int dword_100B4050;
// 104B0378: using guessed type float flt_104B0378;
// 10690BE8: using guessed type char byte_10690BE8;
// 106C0200: using guessed type char byte_106C0200;
// 106C0260: using guessed type char byte_106C0260;
// 106C0680: using guessed type int dword_106C0680;
// 106C1614: using guessed type char byte_106C1614;
// 106C1618: using guessed type int dword_106C1618;
// 106C2CF4: using guessed type int dword_106C2CF4;
// 106C2CF8: using guessed type int dword_106C2CF8;
// 106C3398: using guessed type int dword_106C3398;
// 106C64D8: using guessed type int dword_106C64D8;
// 106C6618: using guessed type int dword_106C6618;
// 106C661C: using guessed type int dword_106C661C;
// 106C6620: using guessed type int dword_106C6620;
// 106C6624: using guessed type int dword_106C6624;
// 106C7C80: using guessed type float flt_106C7C80;
// 106C7C84: using guessed type float flt_106C7C84;
// 106C7CC8: using guessed type char byte_106C7CC8;
// 106C7CC9: using guessed type char byte_106C7CC9;
// 106C7CCA: using guessed type char byte_106C7CCA;

//----- (10031D3F) --------------------------------------------------------
double __cdecl sub_10031D3F(float *a1) {
  float v2;    // [esp+0h] [ebp-1Ch]
  float v3;    // [esp+4h] [ebp-18h]
  float v4;    // [esp+8h] [ebp-14h]
  float v5[2]; // [esp+Ch] [ebp-10h] BYREF
  float v6;    // [esp+14h] [ebp-8h]
  float v7;    // [esp+18h] [ebp-4h]

  if (!MEMORY[0x106C6618])
    return 0.0;
  sub_1003B2A0(v5, a1, &flt_106C29A8);
  v6 = v6 / v7;
  v3 = (float)dword_106C2CF4;
  v2 = (float)dword_106C1618;
  v4 = (v6 * v3 + v2) * 0.0039215689;
  if (v4 < 0.0)
    return 0.0;
  if (v4 <= 1.0)
    return v4;
  return 1.0;
}
// 106C1618: using guessed type int dword_106C1618;
// 106C29A8: using guessed type float flt_106C29A8;
// 106C2CF4: using guessed type int dword_106C2CF4;
// 106C6618: using guessed type int dword_106C6618;

//----- (10031DCF) --------------------------------------------------------
int sub_10031DCF() {
  int result; // eax
  int i;      // [esp+0h] [ebp-4h]

  if (!MEMORY[0x106C661C]) {
    dword_106C0670 = 1097859072;
    dword_106C0674 = 1092616192;
    dword_106C0678 = 1101004800;
    sub_1003AE50((float *)&dword_106C0670);
  }
  if (MEMORY[0x106C6620] || MEMORY[0x106C6624]) {
    byte_106C1580 = ((unsigned __int8)byte_106C0260 + 765) >> 2;
    byte_106C335C = ((unsigned __int8)byte_106C1614 + 765) >> 2;
    byte_106C0968 = ((unsigned __int8)byte_106C0200 + 612) >> 2;
    byte_10690BF0 = 5 * (unsigned __int8)byte_106C0260 / 8;
    byte_106C0960 = 5 * (unsigned __int8)byte_106C1614 / 8;
    MEMORY[0x106C65BC] = 5 * (unsigned __int8)byte_106C0200 / 8;
  } else if (MEMORY[0x106C661C]) {
    byte_106C1580 = -35;
    byte_106C335C = -18;
    byte_106C0968 = -1;
    byte_10690BF0 = 60;
    byte_106C0960 = 57;
    MEMORY[0x106C65BC] = 54;
  } else if (MEMORY[0x106C6618]) {
    byte_106C1580 =
        (255 * (255 - (unsigned __int8)byte_10690BE8) +
         (unsigned __int8)byte_10690BE8 * (((unsigned __int8)byte_106C0260 + 255) >> 1)) /
        255;
    byte_106C335C =
        (255 * (255 - (unsigned __int8)byte_10690BE8) +
         (unsigned __int8)byte_10690BE8 * (((unsigned __int8)byte_106C1614 + 255) >> 1)) /
        255;
    byte_106C0968 =
        (204 * (255 - (unsigned __int8)byte_10690BE8) +
         (unsigned __int8)byte_10690BE8 * (((unsigned __int8)byte_106C0200 + 204) >> 1)) /
        255;
    byte_10690BF0 = (102 * (255 - (unsigned __int8)byte_10690BE8) +
                     (unsigned __int8)byte_10690BE8 * (4 * (unsigned __int8)byte_106C0260 / 5)) /
                    255;
    byte_106C0960 = (102 * (255 - (unsigned __int8)byte_10690BE8) +
                     (unsigned __int8)byte_10690BE8 * (4 * (unsigned __int8)byte_106C1614 / 5)) /
                    255;
    MEMORY[0x106C65BC] =
        (119 * (255 - (unsigned __int8)byte_10690BE8) +
         (unsigned __int8)byte_10690BE8 * (4 * (unsigned __int8)byte_106C0200 / 5)) /
        255;
  } else {
    byte_106C1580 = -1;
    byte_106C335C = -1;
    byte_106C0968 = -52;
    byte_10690BF0 = 102;
    byte_106C0960 = 102;
    MEMORY[0x106C65BC] = 119;
  }
  if (MEMORY[0x106C661C]) {
    byte_10690FF8[0] = 34;
    MEMORY[0x106C6494][0] = 34;
    byte_106C3358[0] = 34;
    byte_10690FF9 = 68;
    MEMORY[0x106C6495] = 68;
    byte_106C3359 = 68;
    byte_10690FFA = 102;
    MEMORY[0x106C6496] = 102;
    byte_106C335A = 102;
    byte_10690FFB = -1;
    MEMORY[0x106C6497] = -1;
    byte_106C335B = -1;
  } else if (MEMORY[0x106C6620]) {
    byte_10690FF8[0] = -48;
    MEMORY[0x106C6494][0] = -48;
    byte_106C3358[0] = -16;
    byte_10690FF9 = -32;
    MEMORY[0x106C6495] = -32;
    byte_106C3359 = -1;
    byte_10690FFA = -16;
    MEMORY[0x106C6496] = -16;
    byte_106C335A = -1;
    byte_10690FFB = -1;
    MEMORY[0x106C6497] = -1;
    byte_106C335B = -1;
  } else {
    byte_10690FF8[0] = (int)(unsigned __int8)byte_106C1580 >> 2;
    MEMORY[0x106C6494][0] = (int)(unsigned __int8)byte_106C335C >> 2;
    byte_106C3358[0] = (int)(unsigned __int8)byte_106C0968 >> 2;
    byte_10690FF9 = (int)(unsigned __int8)byte_106C1580 >> 1;
    MEMORY[0x106C6495] = (int)(unsigned __int8)byte_106C335C >> 1;
    byte_106C3359 = (int)(unsigned __int8)byte_106C0968 >> 1;
    byte_10690FFA =
        ((int)(unsigned __int8)byte_106C1580 >> 2) + ((int)(unsigned __int8)byte_106C1580 >> 1);
    MEMORY[0x106C6496] =
        ((int)(unsigned __int8)byte_106C335C >> 2) + ((int)(unsigned __int8)byte_106C335C >> 1);
    byte_106C335A =
        ((int)(unsigned __int8)byte_106C0968 >> 2) + ((int)(unsigned __int8)byte_106C0968 >> 1);
    byte_10690FFB = byte_106C1580;
    MEMORY[0x106C6497] = byte_106C335C;
    byte_106C335B = byte_106C0968;
  }
  dword_106C29E8 = ((unsigned __int8)MEMORY[0x106C65BC] << 8) |
                   ((unsigned __int8)byte_106C0960 << 16) | ((unsigned __int8)byte_10690BF0 << 24);
  result = (unsigned __int8)byte_106C335C << 16;
  MEMORY[0x106C5AB0] =
      ((unsigned __int8)byte_106C0968 << 8) | result | ((unsigned __int8)byte_106C1580 << 24);
  for (i = 0; i < 4; ++i) {
    result = (unsigned __int8)byte_106C3358[i] << 8;
    dword_106C0950[i] = result | ((unsigned __int8)MEMORY[0x106C6494][i] << 16) |
                        ((unsigned __int8)byte_10690FF8[i] << 24);
  }
  return result;
}
// 10690BE8: using guessed type char byte_10690BE8;
// 10690BF0: using guessed type char byte_10690BF0;
// 10690FF9: using guessed type char byte_10690FF9;
// 10690FFA: using guessed type char byte_10690FFA;
// 10690FFB: using guessed type char byte_10690FFB;
// 106C0200: using guessed type char byte_106C0200;
// 106C0260: using guessed type char byte_106C0260;
// 106C0670: using guessed type int dword_106C0670;
// 106C0674: using guessed type int dword_106C0674;
// 106C0678: using guessed type int dword_106C0678;
// 106C0950: using guessed type int dword_106C0950[];
// 106C0960: using guessed type char byte_106C0960;
// 106C0968: using guessed type char byte_106C0968;
// 106C1580: using guessed type char byte_106C1580;
// 106C1614: using guessed type char byte_106C1614;
// 106C29E8: using guessed type int dword_106C29E8;
// 106C3359: using guessed type char byte_106C3359;
// 106C335A: using guessed type char byte_106C335A;
// 106C335B: using guessed type char byte_106C335B;
// 106C335C: using guessed type char byte_106C335C;
// 106C5AB0: using guessed type int dword_106C5AB0;
// 106C6495: using guessed type char byte_106C6495;
// 106C6496: using guessed type char byte_106C6496;
// 106C6497: using guessed type char byte_106C6497;
// 106C65BC: using guessed type char byte_106C65BC;
// 106C6618: using guessed type int dword_106C6618;
// 106C661C: using guessed type int dword_106C661C;
// 106C6620: using guessed type int dword_106C6620;
// 106C6624: using guessed type int dword_106C6624;

//----- (100322E6) --------------------------------------------------------
void __cdecl sub_100322E6(_DWORD *a1, void *a2) {
  void *v3;         // ecx
  void *v4;         // ecx
  unsigned int *v5; // [esp-44h] [ebp-A4h]
  _DWORD *v6;       // [esp+8h] [ebp-58h]
  _DWORD *v7;       // [esp+Ch] [ebp-54h]
  _DWORD *v8;       // [esp+10h] [ebp-50h]
  _DWORD *v9;       // [esp+14h] [ebp-4Ch]
  _DWORD *v10;      // [esp+18h] [ebp-48h]
  _DWORD *v11;      // [esp+1Ch] [ebp-44h]
  _DWORD *v12;      // [esp+20h] [ebp-40h]
  _DWORD *v13;      // [esp+24h] [ebp-3Ch]
  _DWORD *v14;      // [esp+28h] [ebp-38h]
  _DWORD *v15;      // [esp+2Ch] [ebp-34h]
  _DWORD *v16;      // [esp+30h] [ebp-30h]
  _DWORD *v17;      // [esp+34h] [ebp-2Ch]
  _DWORD *v18;      // [esp+38h] [ebp-28h]
  _DWORD *v19;      // [esp+3Ch] [ebp-24h]
  _DWORD *v20;      // [esp+40h] [ebp-20h]
  _DWORD *v21;      // [esp+44h] [ebp-1Ch]
  _DWORD *v22;      // [esp+48h] [ebp-18h]
  _DWORD *v23;      // [esp+4Ch] [ebp-14h]
  _DWORD *v24;      // [esp+50h] [ebp-10h]
  _DWORD *v25;      // [esp+54h] [ebp-Ch]
  _DWORD *v26;      // [esp+58h] [ebp-8h]
  _DWORD *v27;      // [esp+5Ch] [ebp-4h]

  if (MEMORY[0x106C65E4] != (unsigned int)a2) {
    MEMORY[0x106C65E0] = 1;
    MEMORY[0x106C65E4] = (int)a2;
  }
  meth_DebugPrint(a2);
  if (dword_100AA8B4 == 1) {
    *a1 = 0;
    a1[1] = 0;
    a1[2] = gWidth;
    a1[3] = gHeight;
  } else if (dword_100AA8B4 == 2) {
    a1[22] = 8;
    a1[23] = (g_Height1 >> 1) + 1;
    a1[24] = g_Width1 - 96;
    a1[25] = (g_Height1 >> 1) - 8;
    *a1 = 8;
    a1[1] = 8;
    a1[2] = g_Width1 - 96;
    a1[3] = (g_Height1 >> 1) - 8;
  }
  sub_10031227();
  sub_10069580();
  dword_106C0258 = dword_100AA890 != 0 ? 0x2000 : 0;
  dword_106C0688 = 64;
  dword_106C0920 = 0;
  v27 = (_DWORD *)(dword_106C0944 + 96000 * MEMORY[0x106C65EC] + 512);
  dword_106C0680 = dword_106C0944 + 96000 * MEMORY[0x106C65EC] + 520;
  *v27 = -1140850682;
  v27[1] = 0;
  v26 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v26 = -419430400;
  v26[1] = 0;
  sub_1003289F(0, 0, g_Width1, g_Height1);
  v5 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  sub_1002F900(v5, 0, 0, 0, 1003, 0, 0, 0, 1003, 0, 0, 0, 1000, 0, 0, 0, 1000);
  v25 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v25 = -1174401023;
  v25[1] = 0;
  v24 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v24 = -1174401534;
  v24[1] = 0;
  v23 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v23 = -1174400766;
  v23[1] = 0;
  v22 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v22 = -1174400255;
  v22[1] = 0x80000;
  v21 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v21 = -1174402046;
  v21[1] = dword_106C0258;
  v20 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v20 = -1174402813;
  v20[1] = 3072;
  v19 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v19 = -1174403071;
  v19[1] = 0;
  v18 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v18 = -1191182334;
  v18[1] = 1;
  v17 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v17 = -1191181539;
  v17[1] = 252329984;
  v16 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v16 = -1174403582;
  v16[1] = dword_106C0688;
  v15 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v15 = -1174403582;
  v15[1] = dword_106C0920;
  v14 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v14 = -1174399998;
  v14[1] = 0;
  v13 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v13 = -117440512;
  v13[1] = 0;
  v12 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v12 = 16908352;
  v12[1] = &unk_100AA730;
  v11 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v11 = -1241513984;
  v11[1] = 2044420;
  v10 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = -1224736768;
  v10[1] = 0x2000;
  if (dword_100AA884) {
    v9 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v9 = -1224736768;
    v9[1] = 0x800000;
  } else {
    v8 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v8 = -1241513984;
    v8[1] = 0x800000;
  }
  v7 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v7 = 100663296;
  v7[1] = (char *)&unk_100AA770 + 40 * MEMORY[0x106C65FC];
  v6 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = -1157627904;
  v6[1] = 0;
  meth_DebugPrint(v6);
  meth_DebugPrint(v3);
  meth_DebugPrint(v4);
}
// 1003231C: variable 'a2' is possibly undefined
// 10032852: variable 'v3' is possibly undefined
// 10032867: variable 'v4' is possibly undefined
// 100A81C0: using guessed type int g_Width;
// 100A81C4: using guessed type int g_Height;
// 100AA884: using guessed type int dword_100AA884;
// 100AA890: using guessed type int dword_100AA890;
// 100AA8B4: using guessed type int dword_100AA8B4;
// 106C0258: using guessed type int dword_106C0258;
// 106C0680: using guessed type int dword_106C0680;
// 106C0684: using guessed type int g_Width1;
// 106C0688: using guessed type int dword_106C0688;
// 106C0920: using guessed type int dword_106C0920;
// 106C0944: using guessed type int dword_106C0944;
// 106C299C: using guessed type int g_Height1;
// 106C65E0: using guessed type int dword_106C65E0;
// 106C65E4: using guessed type int dword_106C65E4;
// 106C65EC: using guessed type int dword_106C65EC;
// 106C65FC: using guessed type int dword_106C65FC;

//----- (10032873) --------------------------------------------------------
void __cdecl sub_10032873(_DWORD *a1) {
  sub_100322E6(a1, 0);
}

//----- (1003289F) --------------------------------------------------------
int __cdecl sub_1003289F(int a1, int a2, int a3, int a4) {
  int result;  // eax
  float v5;    // [esp+4h] [ebp-20h]
  float v6;    // [esp+Ch] [ebp-18h]
  float v7;    // [esp+14h] [ebp-10h]
  float v8;    // [esp+18h] [ebp-Ch]
  _DWORD *v9;  // [esp+1Ch] [ebp-8h]
  _DWORD *v10; // [esp+20h] [ebp-4h]

  if (a1 < dword_10575508) {
    a3 -= dword_10575508 - a1;
    a1 = dword_10575508;
  }
  if (a3 + a1 > dword_10575500)
    a3 = dword_10575500 - a1;
  if (a3 < 0)
    a3 = 0;
  if (a2 < dword_1057550C) {
    a4 -= dword_1057550C - a2;
    a2 = dword_1057550C;
  }
  if (a4 + a2 > dword_105754FC)
    a4 = dword_105754FC - a2;
  if (a4 < 0)
    a4 = 0;
  if (MEMORY[0x106C65E4]) {
    a1 *= 2;
    a2 *= 2;
    a3 *= 2;
    a4 *= 2;
  }
  v10 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = -419430400;
  v10[1] = 0;
  v9 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  v8 = (float)a1;
  v7 = (float)a2;
  *v9 = (__int64)(v7 * 1.0) & 0xFFF | (((__int64)(v8 * 1.0) & 0xFFF) << 12) | 0xE2000000;
  v6 = (float)(a3 + a1);
  v5 = (float)(a4 + a2);
  result = (__int64)(v5 * 1.0) & 0xFFF;
  v9[1] = result | (((__int64)(v6 * 1.0) & 0xFFF) << 12);
  return result;
}
// 105754FC: using guessed type int dword_105754FC;
// 10575500: using guessed type int dword_10575500;
// 10575508: using guessed type int dword_10575508;
// 1057550C: using guessed type int dword_1057550C;
// 106C0680: using guessed type int dword_106C0680;
// 106C65E4: using guessed type int dword_106C65E4;

//----- (10032A42) --------------------------------------------------------
int __cdecl sub_10032A42(int a1, int a2, int a3, int a4, int a5) {
  int result; // eax
  _DWORD *v6; // [esp+4h] [ebp-4h]

  MEMORY[0x106C6654] = ((_BYTE)MEMORY[0x106C6654] + 1) & 0x1F;
  if (a5) {
    if (a3 >= 0)
      sub_1003289F(a1, a2, a3, a4);
    else
      sub_1003289F(a1, a2, -a3, a4);
  }
  if (MEMORY[0x106C65E4]) {
    LOWORD(a1) = 2 * a1;
    LOWORD(a2) = 2 * a2;
    a3 *= 2;
    LOWORD(a4) = 2 * a4;
  }
  if (a3 >= 0) {
    if (dword_106C3364)
      word_106C1788[8 * MEMORY[0x106C6654]] = -2 * a3;
    else
      word_106C1788[8 * MEMORY[0x106C6654]] = 2 * a3;
    dword_106C1174 = 0;
  } else {
    if (dword_106C3364)
      word_106C1788[8 * MEMORY[0x106C6654]] = -2 * a3;
    else
      word_106C1788[8 * MEMORY[0x106C6654]] = 2 * a3;
    a3 = -a3;
    dword_106C1174 = 1;
  }
  word_106C178A[8 * MEMORY[0x106C6654]] = 2 * a4;
  word_106C178C[8 * MEMORY[0x106C6654]] = 511;
  word_106C178E[8 * MEMORY[0x106C6654]] = 0;
  word_106C1790[8 * MEMORY[0x106C6654]] = 2 * (a3 + 2 * a1);
  word_106C1792[8 * MEMORY[0x106C6654]] = 2 * (a4 + 2 * a2);
  word_106C1794[8 * MEMORY[0x106C6654]] = 511;
  word_106C1796[8 * MEMORY[0x106C6654]] = 0;
  v6 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = 58720272;
  v6[1] = &word_106C1788[8 * MEMORY[0x106C6654]];
  MEMORY[0x106C62D8] = word_106C178C[8 * MEMORY[0x106C6654]];
  result = word_106C1794[8 * MEMORY[0x106C6654]];
  MEMORY[0x106C65B8] = result;
  return result;
}
// 106C0680: using guessed type int dword_106C0680;
// 106C1174: using guessed type int dword_106C1174;
// 106C1788: using guessed type __int16 word_106C1788[];
// 106C178A: using guessed type __int16 word_106C178A[];
// 106C178C: using guessed type __int16 word_106C178C[];
// 106C178E: using guessed type __int16 word_106C178E[];
// 106C1790: using guessed type __int16 word_106C1790[];
// 106C1792: using guessed type __int16 word_106C1792[];
// 106C1794: using guessed type __int16 word_106C1794[];
// 106C3364: using guessed type int dword_106C3364;
// 106C62D8: using guessed type int dword_106C62D8;
// 106C65B8: using guessed type int dword_106C65B8;
// 106C65E4: using guessed type int dword_106C65E4;
// 106C6654: using guessed type int dword_106C6654;

//----- (10032C38) --------------------------------------------------------
int __cdecl sub_10032C38(int a1, int a2, int a3, int a4, int a5) {
  int result; // eax
  _DWORD *v6; // [esp+4h] [ebp-8h]
  _DWORD *v7; // [esp+8h] [ebp-4h]

  MEMORY[0x106C6654] = ((_BYTE)MEMORY[0x106C6654] + 1) & 0x1F;
  if (a5) {
    v7 = (_DWORD *)dword_106C0680;
    dword_106C0680 += 8;
    *v7 = -419430400;
    v7[1] = 0;
    if (a3 >= 0)
      sub_1003289F(a1, a2, a3, a4);
    else
      sub_1003289F(a1, a2, -a3, a4);
  }
  dword_106C1174 = 0;
  word_106C1788[8 * MEMORY[0x106C6654]] = 2 * gWidth;
  word_106C178A[8 * MEMORY[0x106C6654]] = 2 * gHeight;
  word_106C178C[8 * MEMORY[0x106C6654]] = 511;
  word_106C178E[8 * MEMORY[0x106C6654]] = 0;
  word_106C1790[8 * MEMORY[0x106C6654]] = 4 * (gWidth / 2);
  word_106C1792[8 * MEMORY[0x106C6654]] = 4 * (gHeight / 2);
  word_106C1794[8 * MEMORY[0x106C6654]] = 511;
  word_106C1796[8 * MEMORY[0x106C6654]] = 0;
  v6 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = 58720272;
  v6[1] = &word_106C1788[8 * MEMORY[0x106C6654]];
  MEMORY[0x106C62D8] = word_106C178C[8 * MEMORY[0x106C6654]];
  result = 16 * MEMORY[0x106C6654];
  MEMORY[0x106C65B8] = word_106C1794[8 * MEMORY[0x106C6654]];
  return result;
}
// 100A81C0: using guessed type int g_Width;
// 100A81C4: using guessed type int g_Height;
// 106C0680: using guessed type int dword_106C0680;
// 106C1174: using guessed type int dword_106C1174;
// 106C1788: using guessed type __int16 word_106C1788[];
// 106C178A: using guessed type __int16 word_106C178A[];
// 106C178C: using guessed type __int16 word_106C178C[];
// 106C178E: using guessed type __int16 word_106C178E[];
// 106C1790: using guessed type __int16 word_106C1790[];
// 106C1792: using guessed type __int16 word_106C1792[];
// 106C1794: using guessed type __int16 word_106C1794[];
// 106C62D8: using guessed type int dword_106C62D8;
// 106C65B8: using guessed type int dword_106C65B8;
// 106C65E4: using guessed type int dword_106C65E4;
// 106C6654: using guessed type int dword_106C6654;

//----- (10032DF2) --------------------------------------------------------
int sub_10032DF2() {
  int result; // eax
  _DWORD *v1; // [esp+0h] [ebp-4h]

  v1 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v1 = 58720272;
  v1[1] = &word_106C1788[8 * MEMORY[0x106C6654]];
  result = word_106C178C[8 * MEMORY[0x106C6654]];
  MEMORY[0x106C62D8] = result;
  MEMORY[0x106C65B8] = word_106C1794[8 * MEMORY[0x106C6654]];
  return result;
}
// 106C0680: using guessed type int dword_106C0680;
// 106C1788: using guessed type __int16 word_106C1788[];
// 106C178C: using guessed type __int16 word_106C178C[];
// 106C1794: using guessed type __int16 word_106C1794[];
// 106C62D8: using guessed type int dword_106C62D8;
// 106C65B8: using guessed type int dword_106C65B8;
// 106C6654: using guessed type int dword_106C6654;

//----- (10032E58) --------------------------------------------------------
void sub_10032E58() {
  ;
}

//----- (10032E5D) --------------------------------------------------------
int __cdecl sub_10032E5D(__int16 a1, __int16 a2, __int16 a3, __int16 a4) {
  int result;        // eax
  unsigned int *v5;  // [esp+0h] [ebp-58h]
  unsigned int *v6;  // [esp+4h] [ebp-54h]
  unsigned int *v7;  // [esp+8h] [ebp-50h]
  unsigned int *v8;  // [esp+Ch] [ebp-4Ch]
  unsigned int *v9;  // [esp+10h] [ebp-48h]
  unsigned int *v10; // [esp+14h] [ebp-44h]
  unsigned int *v11; // [esp+18h] [ebp-40h]
  unsigned int *v12; // [esp+1Ch] [ebp-3Ch]
  _DWORD *v13;       // [esp+20h] [ebp-38h]
  _DWORD *v14;       // [esp+24h] [ebp-34h]
  _DWORD *v15;       // [esp+28h] [ebp-30h]
  _DWORD *v16;       // [esp+2Ch] [ebp-2Ch]
  unsigned int *v17; // [esp+30h] [ebp-28h]
  unsigned int *v18; // [esp+34h] [ebp-24h]
  unsigned int *v19; // [esp+38h] [ebp-20h]
  unsigned int *v20; // [esp+3Ch] [ebp-1Ch]
  _DWORD *v21;       // [esp+40h] [ebp-18h]
  _DWORD *v22;       // [esp+44h] [ebp-14h]
  _DWORD *v23;       // [esp+48h] [ebp-10h]
  _DWORD *v24;       // [esp+4Ch] [ebp-Ch]
  _DWORD *v25;       // [esp+50h] [ebp-8h]

  v25 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v25 = -419430400;
  v25[1] = 0;
  v24 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v24 = -1191181539;
  v24[1] = 252329984;
  v23 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v23 = -1174399998;
  v23[1] = 3145728;
  v22 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v22 = -150994944;
  v22[1] = 65537;
  v21 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v21 = -134217728;
  v21[1] = 255;
  v20 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v20 = (a2 - 1) & 0xFFF | (((a3 + a1) & 0xFFF) << 12) | 0xE1000000;
  v20[1] = (a2 - 2) & 0xFFF | (((a1 - 1) & 0xFFF) << 12);
  v19 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v19 = (a2 + a4 + 1) & 0xFFF | (((a3 + a1) & 0xFFF) << 12) | 0xE1000000;
  v19[1] = (a4 + a2) & 0xFFF | (((a1 - 1) & 0xFFF) << 12);
  v18 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v18 = (a4 + a2) & 0xFFF | (((a1 - 1) & 0xFFF) << 12) | 0xE1000000;
  v18[1] = (a2 - 1) & 0xFFF | (((a1 - 2) & 0xFFF) << 12);
  v17 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v17 = (a4 + a2) & 0xFFF | (((a1 + a3 + 1) & 0xFFF) << 12) | 0xE1000000;
  v17[1] = (a2 - 1) & 0xFFF | (((a3 + a1) & 0xFFF) << 12);
  v16 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v16 = -419430400;
  v16[1] = 0;
  v15 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v15 = -1191181539;
  v15[1] = 1426080320;
  v14 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v14 = -1174399998;
  v14[1] = 0;
  v13 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v13 = -134217728;
  v13[1] = 255;
  v12 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v12 = (a2 + 1) & 0xFFF | (((a3 + a1) & 0xFFF) << 12) | 0xE1000000;
  v12[1] = a2 & 0xFFF | ((a1 & 0xFFF) << 12);
  v11 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v11 = (a4 + a2) & 0xFFF | (((a3 + a1) & 0xFFF) << 12) | 0xE1000000;
  v11[1] = (a2 + a4 - 1) & 0xFFF | ((a1 & 0xFFF) << 12);
  v10 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v10 = (a4 + a2) & 0xFFF | (((a1 + 1) & 0xFFF) << 12) | 0xE1000000;
  v10[1] = a2 & 0xFFF | ((a1 & 0xFFF) << 12);
  v9 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v9 = (a4 + a2) & 0xFFF | (((a3 + a1) & 0xFFF) << 12) | 0xE1000000;
  v9[1] = a2 & 0xFFF | (((a1 + a3 - 1) & 0xFFF) << 12);
  v8 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v8 = (a2 - 2) & 0xFFF | (((a1 + a3 + 3) & 0xFFF) << 12) | 0xE1000000;
  v8[1] = (a2 - 3) & 0xFFF | (((a1 - 3) & 0xFFF) << 12);
  v7 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v7 = (a2 + a4 + 3) & 0xFFF | (((a1 + a3 + 3) & 0xFFF) << 12) | 0xE1000000;
  v7[1] = (a2 + a4 + 2) & 0xFFF | (((a1 - 3) & 0xFFF) << 12);
  v6 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v6 = (a2 + a4 + 3) & 0xFFF | (((a1 - 2) & 0xFFF) << 12) | 0xE1000000;
  v6[1] = (a2 - 3) & 0xFFF | (((a1 - 3) & 0xFFF) << 12);
  v5 = (unsigned int *)dword_106C0680;
  dword_106C0680 += 8;
  *v5 = (a2 + a4 + 3) & 0xFFF | (((a1 + a3 + 3) & 0xFFF) << 12) | 0xE1000000;
  result = (a2 - 3) & 0xFFF;
  v5[1] = result | (((a1 + a3 + 2) & 0xFFF) << 12);
  return result;
}
// 106C0680: using guessed type int dword_106C0680;

//----- (1003348E) --------------------------------------------------------
void sub_1003348E() {
  ;
}

//----- (10033498) --------------------------------------------------------
int sub_10033498() {
  unk06594 *v0;    // ecx
  int result;      // eax
  BOOL v2;         // [esp+4h] [ebp-20h]
  int i;           // [esp+Ch] [ebp-18h]
  int v4;          // [esp+14h] [ebp-10h]
  int j;           // [esp+18h] [ebp-Ch]
  int v6;          // [esp+18h] [ebp-Ch]
  unsigned int v7; // [esp+1Ch] [ebp-8h]
  int v8;          // [esp+20h] [ebp-4h]

  v2 = *(_DWORD *)&gUnk06594.gap1C8[12504] && gChosenTrack != 2 && gChosenTrack != 8;
  for (i = 0; i < *(int *)&gUnk06594.gap1C8[18200]; ++i) {
    if (!*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i))
      continue;
    if ((*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 32) & 0x100000) == 0) {
      if (dword_100AA8A0 == *(_DWORD *)&gUnk06594.gap1C8[12504])
        continue;
      v8 = 32 * (*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) & 0xFFF);
      goto LABEL_26;
    }
    if ((*(_WORD *)(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) + 2) != 2 ||
         *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) + 8) != -1) &&
        !dword_106909B4 && dword_106909E0 != 2) {
      if (v2 &&
          (HIBYTE(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 32)) & 0xF) == 11) {
        j = 1;
      } else {
        for (j = 1;
             j <
             *(unsigned __int16 *)(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) +
                                   2);
             ++j) {
          v7 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) +
                           12 * (*(unsigned __int16 *)(*(_DWORD *)(*(_DWORD *)&gUnk06594
                                                                        .gap1C8[18204] +
                                                                   36 * i + 8) +
                                                       2) -
                                 1) +
                           8) -
               *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) + 8);
          if (*(_DWORD *)&gUnk06594.gap1C8[8592] - v7 * (*(_DWORD *)&gUnk06594.gap1C8[8592] / v7) <
              *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) + 12 * j +
                          8))
              break;
        }
      }
      v6 = j - 1;
      v4 =
          *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) + 12 * v6 + 12);
      v8 =
          *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 8) + 12 * v6 + 16);
      if ((*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 32) & 0x3FFFF) != 0 &&
          v4 != -1)
        dword_118AA0A4(HIWORD(v4), (unsigned __int16)v4);
    LABEL_26:
      if (*(_DWORD *)(*(_DWORD *)&gUnk06594.gap1C8[18204] + 36 * i + 4)) {
        if (v8 != -1) {
          sub_10031190((unk06594 *)(v8 + dword_10690BEC));
          meth_unk1A5E0_3(v0);
        }
      }
      continue;
    }
  }
  result = *(_DWORD *)&gUnk06594.gap1C8[12504];
  dword_100AA8A0 = *(_DWORD *)&gUnk06594.gap1C8[12504];
  return result;
}
// 10033733: variable 'v0' is possibly undefined
// 100AA8A0: using guessed type int dword_100AA8A0;
// 100B380C: using guessed type int gChosenTrack;
// 106909B4: using guessed type int dword_106909B4;
// 106909E0: using guessed type int dword_106909E0;
// 10690BEC: using guessed type int dword_10690BEC;
// 118AA0A4: using guessed type int (__cdecl *dword_118AA0A4)(_DWORD, _DWORD);

//----- (10033780) --------------------------------------------------------
int __thiscall sub_10033780(unk06594 *this) {
  int result; // eax

  if (!*(_DWORD *)&gUnk06594.gap1C8[8608]) {
    *(_DWORD *)&gUnk06594.gap1C8[8608] = 1;
    word_100B5D90 = 0;
    result = meth_unk1A5E0_3(this);
  }
  return result;
}
// 100B5D90: using guessed type __int16 word_100B5D90;

//----- (100337AE) --------------------------------------------------------
int __thiscall sub_100337AE(unk06594 *this) {
  unk06594 *v1; // ecx
  int result;   // eax

  sub_10033780(this);
  meth_unk1A5E0_3(v1);
  result = sub_10060E00((int)&gUnk06594.gap1C8[12376]);
  word_100B5D90 = 1;
  *(_DWORD *)&gUnk06594.gap1C8[8608] = 0;
  return result;
}
// 100337BF: variable 'v1' is possibly undefined
// 100B5D90: using guessed type __int16 word_100B5D90;

//----- (100337E9) --------------------------------------------------------
int __thiscall meth_100337E9(void *this) {
  int result; // eax
  int i;      // [esp+0h] [ebp-4h]

  result = sub_100337AE((unk06594 *)this);
  for (i = 0; i < 1; ++i) {
    meth_10035CE0((int *)&gUnk06594.gap1C8[0x15C * i + 0x3130]);
    meth_10035FC0(&gUnk06594.gap1C8[348 * i + 12592]);
    result = i + 1;
  }
  return result;
}

//----- (10033838) --------------------------------------------------------
int sub_10033838() {
  void *v0;     // ecx
  void *v1;     // ecx
  unk06594 *v2; // ecx
  void *v3;     // ecx
  void *v4;     // ecx
  unk06594 *v5; // ecx
  void *v6;     // ecx
  void *v7;     // ecx
  void *v8;     // ecx
  void *v9;     // ecx
  void *v10;    // ecx
  void *v11;    // ecx
  void *v12;    // ecx
  void *v13;    // ecx
  void *v14;    // ecx
  int result;   // eax
  _DWORD *v16;  // [esp+0h] [ebp-10h]
  _DWORD *v17;  // [esp+4h] [ebp-Ch]
  _DWORD *v18;  // [esp+Ch] [ebp-4h]

  v17 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v17 = -385875968;
  v17[1] = 0;
  v16 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v16 = -1207959552;
  v16[1] = 0;
  v18 = (_DWORD *)((char *)&unk_106C1588 + 64 * *(_DWORD *)&gUnk06594.gap1C8[12452]);
  *v18 = 1;
  v18[4] = &unk_118AB150;
  v18[6] = &unk_118AB160;
  v18[1] = 2;
  v18[1] |= 4u;
  v18[10] = dword_100AA728;
  v18[11] = dword_100AA72C - 8 * *(_DWORD *)&gUnk06594.gap1C8[12576];
  v18[5] = 4096;
  v18[7] = 2048;
  v18[8] = (unsigned int)&unk_106C2D0F & 0xFFFFFFF0;
  v18[9] = 1024;
  v18[12] = dword_106C0944 + 96000 * *(_DWORD *)&gUnk06594.gap1C8[12452] + 512;
  v18[13] =
      8 *
      ((dword_106C0680 - (dword_106C0944 + 96000 * *(_DWORD *)&gUnk06594.gap1C8[12452] + 512)) >>
       3);
  if ((dword_106C0680 - (dword_106C0944 + 96000 * *(_DWORD *)&gUnk06594.gap1C8[12452] + 512)) >> 3 >
      *(int *)&gUnk06594.gap1C8[12568])
    *(_DWORD *)&gUnk06594.gap1C8[12568] =
        (dword_106C0680 - (dword_106C0944 + 96000 * *(_DWORD *)&gUnk06594.gap1C8[12452] + 512)) >>
        3;
  if ((dword_10363FF0 - dword_102E5EC8) >> 3 > *(int *)&gUnk06594.gap1C8[12560])
    *(_DWORD *)&gUnk06594.gap1C8[12560] = (dword_10363FF0 - dword_102E5EC8) >> 3;
  if ((dword_10364304 - dword_103643BC) >> 5 > *(int *)&gUnk06594.gap1C8[12564])
    *(_DWORD *)&gUnk06594.gap1C8[12564] = (dword_10364304 - dword_103643BC) >> 5;
  v0 = (void *)(dword_106C0944 + 96000 * *(_DWORD *)&gUnk06594.gap1C8[12452] + 512);
  dword_106C1170 = (dword_106C0680 - (int)v0) >> 3;
  if (dword_106C1170 > 12000)
    sub_10035BBA((int)aHugeGlistError);
  meth_DebugPrint(v0);
  if (*(_DWORD *)&gUnk06594.gap1C8[12572]) {
    meth_DebugPrint(v1);
    meth_unk1A5E0_3(v2);
    meth_DebugPrint(v3);
    if (dword_106C198C) {
      dword_106C198C();
      dword_106C198C = 0;
    }
    meth_DebugPrint(v4);
    meth_unk1A5E0_3(v5);
    if (dword_106C1608) {
      dword_106C198C();
      dword_106C198C = 0;
    }
    meth_DebugPrint(v6);
    dword_106C020C = thunk_10060E90();
    dword_106C1620 = dword_106C020C - dword_106C0208;
    if (*(_DWORD *)&gUnk06594.gap1C8[12440]) {
      v7 = (void *)--*(_DWORD *)&gUnk06594.gap1C8[12440];
      if (!*(_DWORD *)&gUnk06594.gap1C8[12440]) {
        meth_DebugPrint(v7);
        meth_DebugPrint(v8);
        *(_DWORD *)&gUnk06594.gap1C8[12448] = *(_DWORD *)&gUnk06594.gap1C8[12444];
      }
    }
    meth_DebugPrint(v7);
    meth_DebugPrint(v9);
    meth_DebugPrint(v10);
    if (!*(_DWORD *)&gUnk06594.gap1C8[12460] && !*(_DWORD *)&gUnk06594.gap1C8[12464])
      meth_DebugPrint(v11);
    if (*(_DWORD *)&gUnk06594.gap1C8[12464])
      --*(_DWORD *)&gUnk06594.gap1C8[12464];
    meth_1002C210(v11);
    dword_106C0208 = thunk_10060E90();
    dword_106C020C = thunk_10060E90() - dword_106C020C;
  } else {
    v12 = (void *)++*(_DWORD *)&gUnk06594.gap1C8[12572];
  }
  meth_DebugPrint(v12);
  *(_DWORD *)&gUnk06594.gap1C8[8604] = *(_DWORD *)&gUnk06594.gap1C8[12368];
  meth_DebugPrint(v13);
  meth_DebugPrint(v14);
  result = dword_10B501D0(v18[12]);
  *(_DWORD *)&gUnk06594.gap1C8[12452] ^= 1u;
  return result;
}
// 10033A5B: variable 'v1' is possibly undefined
// 10033A6C: variable 'v2' is possibly undefined
// 10033A87: variable 'v3' is possibly undefined
// 10033AB5: variable 'v4' is possibly undefined
// 10033AC6: variable 'v5' is possibly undefined
// 10033AE7: variable 'v6' is possibly undefined
// 10033B82: variable 'v8' is possibly undefined
// 10033BA3: variable 'v7' is possibly undefined
// 10033BB8: variable 'v9' is possibly undefined
// 10033BCD: variable 'v10' is possibly undefined
// 10033BE9: variable 'v11' is possibly undefined
// 10033C4A: variable 'v12' is possibly undefined
// 10033C6E: variable 'v13' is possibly undefined
// 10033C86: variable 'v14' is possibly undefined
// 100AA728: using guessed type int dword_100AA728;
// 100AA72C: using guessed type int dword_100AA72C;
// 102E5EC8: using guessed type int dword_102E5EC8;
// 10363FF0: using guessed type int dword_10363FF0;
// 10364304: using guessed type int dword_10364304;
// 103643BC: using guessed type int dword_103643BC;
// 106C0208: using guessed type int dword_106C0208;
// 106C020C: using guessed type int dword_106C020C;
// 106C0680: using guessed type int dword_106C0680;
// 106C0944: using guessed type int dword_106C0944;
// 106C1170: using guessed type int dword_106C1170;
// 106C1608: using guessed type int dword_106C1608;
// 106C1620: using guessed type int dword_106C1620;
// 106C198C: using guessed type int (*dword_106C198C)(void);
// 10B501D0: using guessed type int (__cdecl *dword_10B501D0)(_DWORD);

//----- (10033CB1) --------------------------------------------------------
int __cdecl sub_10033CB1(int a1, float a2, float a3, float a4, float a5) {
  int result; // eax
  float v6;   // [esp+0h] [ebp-8h]
  float v7;   // [esp+4h] [ebp-4h]

  v7 = sin_(a2) * a3;
  v6 = v7 * a5 / a4;
  if (dword_100AA8B4 == 2)
    v6 = v6 / 2.0;
  sub_10035C70(&dword_106C3310, (_DWORD *)(a1 + 48));
  sub_1003AFE0((int)flt_106C2990, (int)&dword_106C3310, a1, a3);
  sub_1003ACE0((int)MEMORY[0x106C56F8], a1 + 16, v7);
  sub_1003ACE0((int)flt_106C0690, a1 + 32, v6);
  sub_10035C70(&dword_106C334C, flt_106C2990);
  sub_1003AF40(&dword_106C331C, flt_106C2990, MEMORY[0x106C56F8]);
  sub_1003AF70(&dword_106C331C, flt_106C0690);
  sub_1003AF40(&dword_106C3340, flt_106C2990, MEMORY[0x106C56F8]);
  sub_1003AF10(&dword_106C3340, flt_106C0690);
  sub_1003AEE0(&dword_106C3328, flt_106C2990, MEMORY[0x106C56F8]);
  sub_1003AF70(&dword_106C3328, flt_106C0690);
  sub_1003AEE0(&dword_106C3334, flt_106C2990, MEMORY[0x106C56F8]);
  sub_1003AF10(&dword_106C3334, flt_106C0690);
  sub_1003AFA0((int)&dword_106C3328, (int)&dword_106C3328, (int)&dword_106C3310, 0.75);
  sub_1003AFA0((int)&dword_106C3334, (int)&dword_106C3334, (int)&dword_106C3310, 0.75);
  sub_1003AFA0((int)&dword_106C331C, (int)&dword_106C331C, (int)&dword_106C3310, 0.75);
  sub_1003AFA0((int)&dword_106C3340, (int)&dword_106C3340, (int)&dword_106C3310, 0.75);
  flt_106C0210 = a3;
  result = LODWORD(a2);
  MEMORY[0x106C53C0] = LODWORD(a2);
  return result;
}
// 100AA8B4: using guessed type int dword_100AA8B4;
// 106C0210: using guessed type float flt_106C0210;
// 106C53C0: using guessed type int dword_106C53C0;

//----- (10033E83) --------------------------------------------------------
_DWORD *__cdecl sub_10033E83(int a1, float a2, float a3, float a4, float a5) {
  float v6;  // [esp+0h] [ebp-18h]
  float a3a; // [esp+4h] [ebp-14h]
  float a3b; // [esp+4h] [ebp-14h]
  float a4a; // [esp+8h] [ebp-10h]
  float a4b; // [esp+8h] [ebp-10h]

  a4a = *(float *)(a1 + 56) + *(float *)(a1 + 8);
  a3a = *(float *)(a1 + 52) + *(float *)(a1 + 4);
  v6 = *(float *)(a1 + 48) + *(float *)a1;
  sub_100309A0((int)&gUnk06594.gap1C8[9080],
               *(float *)(a1 + 48),
               *(float *)(a1 + 52),
               *(float *)(a1 + 56),
               v6,
               a3a,
               a4a,
               *(float *)(a1 + 32),
               *(float *)(a1 + 36),
               *(float *)(a1 + 40));
  *(float *)&gUnk06594.gap1C8[9580] = a3;
  dword_106C3360 = 0.80000001;
  a4b = a4 / a5;
  a3b = a2 * 1.3333334 * (a5 / a4) * 57.295776;
  sub_10030930(flt_106C0218, &word_106C067C, a3b, a4b, 0.80000001, a3);
  sub_100306C0((float *)&gUnk06594.gap1C8[9080], flt_106C0218, &flt_106C29A8);
  dword_106C32D0 = (int)sub_10069490();
  return sub_100307A0(&flt_106C29A8, (_DWORD *)dword_106C32D0);
}
// 106C29A8: using guessed type float flt_106C29A8;
// 106C32D0: using guessed type int dword_106C32D0;

//----- (1003407D) --------------------------------------------------------
int __cdecl sub_1003407D(float a1, float a2) {
  int result; // eax
  _DWORD *v3; // [esp+0h] [ebp-8h]
  _DWORD *v4; // [esp+4h] [ebp-4h]

  flt_106C29A8 = 2.0 / a1;
  flt_106C29AC = 0.0;
  flt_106C29B0 = 0.0;
  flt_106C29B4 = 0.0;
  flt_106C29B8 = 0.0;
  flt_106C29BC = 2.0 / a2;
  flt_106C29C0 = 0.0;
  flt_106C29C4 = 0.0;
  flt_106C29C8 = 0.0;
  flt_106C29CC = 0.0;
  flt_106C29D0 = 0.0;
  flt_106C29D4 = 0.0;
  flt_106C29D8 = -1.0;
  flt_106C29DC = -1.0;
  flt_106C29E0 = 0.0;
  flt_106C29E4 = 1.0;
  v4 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v4 = -1140850674;
  v4[1] = (unsigned __int16)word_106C067C;
  dword_106C32D0 = (int)sub_10069490();
  sub_100307A0((int)&flt_106C29A8, (_DWORD *)dword_106C32D0);
  v3 = (_DWORD *)dword_106C0680;
  dword_106C0680 += 8;
  *v3 = 16973888;
  result = dword_106C32D0;
  v3[1] = dword_106C32D0;
  return result;
}
// 106C067C: using guessed type __int16 word_106C067C;
// 106C0680: using guessed type int dword_106C0680;
// 106C29A8: using guessed type float flt_106C29A8;
// 106C29AC: using guessed type float flt_106C29AC;
// 106C29B0: using guessed type float flt_106C29B0;
// 106C29B4: using guessed type float flt_106C29B4;
// 106C29B8: using guessed type float flt_106C29B8;
// 106C29BC: using guessed type float flt_106C29BC;
// 106C29C0: using guessed type float flt_106C29C0;
// 106C29C4: using guessed type float flt_106C29C4;
// 106C29C8: using guessed type float flt_106C29C8;
// 106C29CC: using guessed type float flt_106C29CC;
// 106C29D0: using guessed type float flt_106C29D0;
// 106C29D4: using guessed type float flt_106C29D4;
// 106C29D8: using guessed type float flt_106C29D8;
// 106C29DC: using guessed type float flt_106C29DC;
// 106C29E0: using guessed type float flt_106C29E0;
// 106C29E4: using guessed type float flt_106C29E4;
// 106C32D0: using guessed type int dword_106C32D0;

//----- (100341B3) --------------------------------------------------------
int __cdecl sub_100341B3(_DWORD *a1, int a2) {
  BOOL v3; // [esp+4h] [ebp-18h]
  int v4;  // [esp+8h] [ebp-14h]
  int i;   // [esp+Ch] [ebp-10h]
  int v6;  // [esp+Ch] [ebp-10h]
  int j;   // [esp+Ch] [ebp-10h]
  BOOL v8; // [esp+14h] [ebp-8h]
  int v9;  // [esp+18h] [ebp-4h]

  v4 = 0;
  v3 = !MEMORY[0x106C661C] && !MEMORY[0x106C6624];
  v9 = MEMORY[0x106C6618] + !v3 + 1;
  v8 = 0;
  if (a1) {
    while (1) {
      switch ((char)HIBYTE(*a1)) {
      case -72:
        goto LABEL_42;
      case -71:
        for (i = 0;; ++i) {
          if (i >= 6)
              goto LABEL_7;
          if (*a1 == *(_DWORD *)(a2 + 32 * i) && a1[1] == *(_DWORD *)(a2 + 32 * i + 4))
              break;
        }
        *a1 = *(_DWORD *)(32 * i + a2 + 8 * v9);
        a1[1] = *(_DWORD *)(32 * i + a2 + 8 * v9 + 4);
        if (i >= 3)
          v4 = 1;
        goto LABEL_7;
      case -6:
        if (v8 && MEMORY[0x106C6620])
          a1[1] = 1618513920;
        goto LABEL_7;
      case -5:
        if (v8 && MEMORY[0x106C6620])
          a1[1] = -1935890432;
        goto LABEL_7;
      case -4:
        if (!v3)
          goto LABEL_25;
        v6 = 0;
        break;
      default:
        goto LABEL_7;
      }
      while (1) {
        if (v6 >= 1)
          goto LABEL_25;
        if (*a1 == dword_100AA8B8[4 * v6] && a1[1] == dword_100AA8BC[4 * v6])
          break;
        ++v6;
      }
      *a1 = dword_100AA8C0[4 * v6];
      a1[1] = dword_100AA8C4[4 * v6];
    LABEL_25:
      if (MEMORY[0x106C6620] && MEMORY[0x106C666C]) {
        for (j = 0; j < 2 && (*a1 != dword_100AA8C8[2 * j] || a1[1] != dword_100AA8CC[2 * j]); ++j)
          ;
        v8 = j < 2;
      }
    LABEL_7:
      a1 += 2;
    }
  }
LABEL_42:
  MEMORY[0x106C666C] = 0;
  return v4;
}
// 100AA8B8: using guessed type int dword_100AA8B8[];
// 100AA8BC: using guessed type int dword_100AA8BC[];
// 100AA8C0: using guessed type int dword_100AA8C0[];
// 100AA8C4: using guessed type int dword_100AA8C4[];
// 100AA8C8: using guessed type int dword_100AA8C8[];
// 106C6618: using guessed type int dword_106C6618;
// 106C661C: using guessed type int dword_106C661C;
// 106C6620: using guessed type int dword_106C6620;
// 106C6624: using guessed type int dword_106C6624;
// 106C666C: using guessed type int dword_106C666C;

//----- (1003445A) --------------------------------------------------------
int __cdecl sub_1003445A(int a1) {
  int result; // eax
  __int16 v2; // cx
  BOOL v3;    // [esp+0h] [ebp-8h]

  MEMORY[0x106C666C] = 0;
  v3 = gChosenTrack != 2 && gChosenTrack != 8;
  if ((*(_WORD *)(a1 + 76) & 4) == 0)
    MEMORY[0x106C666C] = v3;
  result = sub_100341B3(*(_DWORD **)(a1 + 68), (int)&unk_100AA8D8);
  if (result) {
    result = a1;
    v2 = *(_WORD *)(a1 + 76);
    LOBYTE(v2) = v2 | 8;
    *(_WORD *)(a1 + 76) = v2;
  }
  return result;
}
// 100B380C: using guessed type int g_chosenTrack;
// 106C666C: using guessed type int dword_106C666C;

//----- (100344D7) --------------------------------------------------------
int sub_100344D7() {
  int j; // [esp+0h] [ebp-Ch]
  int k; // [esp+4h] [ebp-8h]
  int l; // [esp+4h] [ebp-8h]
  int m; // [esp+4h] [ebp-8h]
  int n; // [esp+4h] [ebp-8h]
  int i; // [esp+8h] [ebp-4h]

  MEMORY[0x106C666C] = 0;
  for (i = 0; i < dword_100B36FC; ++i) {
    for (j = 0; j < 3; ++j) {
      if (byte_10AD0857[11112 * i] == 2) {
        for (k = 0; k < 10; ++k)
          sub_100341B3(*(_DWORD **)(dword_10AD086C[2778 * i] + 40 * j + 32792 + 4 * k),
                       (int)&unk_100AA998);
        for (l = 0; l < 3; ++l)
          sub_100341B3(*(_DWORD **)(dword_10AD086C[2778 * i] + 12 * j + 32956 + 4 * l),
                       (int)&unk_100AAA58);
      } else {
        for (m = 0; m < 10; ++m)
          sub_100341B3(*(_DWORD **)(dword_10AD086C[2778 * i] + 40 * j + 32792 + 4 * m),
                       (int)&unk_100AA8D8);
        for (n = 0; n < 3; ++n)
          sub_100341B3(*(_DWORD **)(dword_10AD086C[2778 * i] + 12 * j + 32956 + 4 * n),
                       (int)&unk_100AA8D8);
      }
    }
  }
  return dword_10B501D4();
}
// 100B36FC: using guessed type int dword_100B36FC;
// 106C666C: using guessed type int dword_106C666C;
// 10AD086C: using guessed type int dword_10AD086C[];
// 10B501D4: using guessed type int (*dword_10B501D4)(void);

//----- (1003467F) --------------------------------------------------------
void __thiscall __noreturn meth_1003467F(void *this) {
  void *v1;     // ecx
  unk06594 *v2; // ecx
  void *v3;     // ecx

  meth_DebugPrint(this);
  meth_DebugPrint(v1);
  while (1) {
    meth_unk1A5E0_3(v2);
    meth_DebugPrint(v3);
    meth_unk1A5E0_3(dword_106C06A8);
  }
}
// 100346A3: variable 'v1' is possibly undefined
// 100346B4: variable 'v2' is possibly undefined
// 100346C9: variable 'v3' is possibly undefined

//----- (100346E9) --------------------------------------------------------
void __thiscall __noreturn meth_100346E9(void *this) {
  void *v1;     // ecx
  unk06594 *v2; // ecx
  void *v3;     // ecx

  meth_DebugPrint(this);
  meth_DebugPrint(v1);
  while (1) {
    meth_unk1A5E0_3(v2);
    meth_DebugPrint(v3);
    meth_unk1A5E0_3(dword_106C06A8);
  }
}
// 1003470D: variable 'v1' is possibly undefined
// 1003471E: variable 'v2' is possibly undefined
// 10034733: variable 'v3' is possibly undefined

//----- (100347BA) --------------------------------------------------------
void __cdecl sub_100347BA(int a1, float a2) {
  if (a2 > 2.5)
    a2 = 2.5;
  MEMORY[0x106C5468][a1] = MEMORY[0x106C5468][a1] + a2;
  if (MEMORY[0x106C5468][a1] > 5.0)
    MEMORY[0x106C5468][a1] = 5.0;
}

//----- (10034812) --------------------------------------------------------
HANDLE __thiscall meth_CreateMutexWrapper(void *this) {
  void *v1;      // ecx
  void *v2;      // ecx
  void *v3;      // ecx
  void *v4;      // ecx
  void *v5;      // ecx
  void *v6;      // ecx
  void *v7;      // ecx
  void *v8;      // ecx
  void *v9;      // ecx
  unk06594 *v10; // ecx
  void *v11;     // ecx
  void *v12;     // ecx
  HANDLE result; // eax
  int v14;       // [esp+0h] [ebp-28h]
  char v15[28];  // [esp+4h] [ebp-24h] BYREF
  int i;         // [esp+20h] [ebp-8h]

  dword_106C0944 = (int)&stru_10691000.gapC[12];
  meth_DebugPrint(this);
  meth_DebugPrint(v1);
  meth_DebugPrint(v2);
  meth_DebugPrint(v3);
  meth_DebugPrint(dword_106C06A8);
  meth_DebugPrint(v4);
  meth_DebugPrint(v5);
  meth_DebugPrint(v6);
  meth_DebugPrint(v7);
  meth_DebugPrint(dword_10B02434);
  meth_DebugPrint(v8);
  *(_DWORD *)&gUnk06594.gap1C8[8600] = 1194793728;
  meth_DebugPrint(v9);
  meth_DebugPrint(v15);
  meth_unk1A5E0_3(v10);
  meth_DebugPrint(v11);
  meth_DebugPrint(v12);
  for (i = 0; i < 4; ++i) {
    byte_106C06A0[i] = 0;
    if ((((int)(unsigned __int8)v15[24] >> i) & 1) != 0 && (byte_106C092B[4 * i] & 8) == 0 &&
        (word_106C0928[2 * i] & 4) != 0 && (byte_106C092A[4 * i] & 1) != 0) {
      v14 = ReturnZero();
      if (v14) {
        if (v14 > 9 && v14 <= 11 && !ReturnZero()) {
          byte_106C06A0[i] = 1;
          ReturnZero();
        }
      }
    }
  }
  result = CreateMutexA(0, 0, 0);
  *(_DWORD *)&gUnk06594.gap1C8[12552] = result;
  return result;
}
// 10034842: variable 'v1' is possibly undefined
// 10034857: variable 'v2' is possibly undefined
// 1003486B: variable 'v3' is possibly undefined
// 10034895: variable 'v4' is possibly undefined
// 100348AB: variable 'v5' is possibly undefined
// 100348CC: variable 'v6' is possibly undefined
// 100348D9: variable 'v7' is possibly undefined
// 10034908: variable 'v8' is possibly undefined
// 10034924: variable 'v9' is possibly undefined
// 10034949: variable 'v10' is possibly undefined
// 1003495D: variable 'v11' is possibly undefined
// 1003496E: variable 'v12' is possibly undefined
// 106C0928: using guessed type __int16 word_106C0928[];
// 106C0944: using guessed type int dword_106C0944;

//----- (10034A85) --------------------------------------------------------
void sub_10034A85() {
  ;
}

//----- (10034C32) --------------------------------------------------------
void sub_10034C32() {
  ;
}

//----- (10034C51) --------------------------------------------------------
BOOL __cdecl sub_10034C51(int (*a1)(void)) {
  return a1 == dword_106C0964;
}
// 106C0964: using guessed type int (*dword_106C0964)(void);

//----- (10034C66) --------------------------------------------------------
int __cdecl sub_10034C66(int callback) {
  int result; // eax

  result = callback;
  dword_106C0964 = (int (*)(void))callback;
  return result;
}
// 106C0964: using guessed type int (*dword_106C0964)(void);

//----- (10034C73) --------------------------------------------------------
int sub_10034C73() {
  return dword_106C0964();
}
// 106C0964: using guessed type int (*dword_106C0964)(void);

//----- (10034C7E) --------------------------------------------------------
void sub_10034C7E() {
  ;
}

//----- (10034C83) --------------------------------------------------------
void sub_10034C83() {
  ;
}

//----- (10035060) --------------------------------------------------------
_DWORD *__cdecl sub_10035060(_DWORD *a1, unsigned int a2, unsigned int a3, int a4) {
  _DWORD *result; // eax

  result = a1;
  if (*a1 >= a2) {
    result = (_DWORD *)*a1;
    if (*a1 < a3) {
      result = a1;
      *a1 = a4 + *a1 - a2;
    }
  }
  return result;
}

//----- (100350EE) --------------------------------------------------------
_WORD *__usercall sub_100350EE
    @<eax>(_WORD *result @<eax>, int a2, __int16 a3, __int16 a4, __int16 a5) {
  __int16 v5; // [esp+0h] [ebp-14h]
  __int16 v6; // [esp+0h] [ebp-14h]
  _WORD *v7;  // [esp+4h] [ebp-10h]
  int i;      // [esp+8h] [ebp-Ch]
  int j;      // [esp+8h] [ebp-Ch]
  int v10;    // [esp+Ch] [ebp-8h]
  _WORD *v11; // [esp+10h] [ebp-4h]

  if (dword_100B36FC) {
    for (i = 0; i < 12; ++i) {
      v10 = 36 * *(unsigned __int8 *)(i + a2 + 33040) + *(_DWORD *)(a2 + 32788);
      v7 = *(_WORD **)(v10 + 4);
      if (v7) {
        if ((HIBYTE(*(_DWORD *)(v10 + 32)) & 0xF) == 1) {
          v5 = (2 * a5) | (a4 << 6) | (a3 << 11) | v7[i] & 1;
          *v7 = HIBYTE(v5) | (unsigned __int16)(v5 << 8);
          v6 = a5 & 0x1E | (32 * (a4 & 0x1E)) | ((a3 & 0x1E) << 10) | v7[i] & 1;
          v7[1] = HIBYTE(v6) | (unsigned __int16)(v6 << 8);
        }
      }
    }
    for (j = 0; j < *(_DWORD *)(a2 + 124); ++j)
      dword_118AA0C0(*(_DWORD *)(a2 + 4 * j + 4));
    result = *(_WORD **)(*(_DWORD *)(a2 + 32788) + 36 * *(unsigned __int8 *)(a2 + 33051) + 4);
    v11 = result;
    if (result) {
      if (!dword_100AC300) {
        if (*(_DWORD *)(a2 + 132)) {
          if (MEMORY[0x106C661C] || MEMORY[0x106C6624]) {
              result[15] = 112;
              result[10] = -32112;
          } else {
              result[15] = 400;
              result[10] = 416;
          }
          result[14] = 400;
          result[13] = result[15];
          result[9] = 416;
          result[8] = result[10];
          result[12] = -32391;
          result[7] = 16786;
          result[11] = 27565;
          result[6] = 12742;
          dword_118AA0C0(*(_DWORD *)(a2 + 132));
        }
        if (*(_DWORD *)(a2 + 136)) {
          v11[14] = 192;
          v11[13] = v11[14];
          v11[9] = 1273;
          v11[8] = v11[9];
          v11[11] = 27565;
          v11[6] = 12742;
          dword_118AA0C0(*(_DWORD *)(a2 + 136));
        }
        result = (_WORD *)a2;
        if (*(_DWORD *)(a2 + 140)) {
          v11[14] = 400;
          v11[13] = v11[15];
          v11[9] = 416;
          v11[8] = v11[10];
          v11[11] = 14567;
          v11[6] = -257;
          result = (_WORD *)dword_118AA0C0(*(_DWORD *)(a2 + 140));
        }
        if (*(_DWORD *)(a2 + 144)) {
          v11[14] = 192;
          v11[13] = v11[14];
          v11[9] = 1273;
          v11[8] = v11[9];
          v11[11] = 14567;
          v11[6] = -257;
          result = (_WORD *)dword_118AA0C0(*(_DWORD *)(a2 + 144));
        }
      }
    }
  }
  return result;
}
// 100AC300: using guessed type int dword_100AC300;
// 100B36FC: using guessed type int dword_100B36FC;
// 106C661C: using guessed type int dword_106C661C;
// 106C6624: using guessed type int dword_106C6624;
// 118AA0C0: using guessed type int (__cdecl *dword_118AA0C0)(_DWORD);

//----- (1003551B) --------------------------------------------------------
void sub_1003551B() {
  ;
}

//----- (10035520) --------------------------------------------------------
int __cdecl LoadCar(int a1, int carIndex, int a3) {
  int result; // eax

  if (a3) // Never runs
    s_noreturn_10008CF0(aLoadcar);
  ReadCarFileIntoBuffer(&byte_100C12A0[0x15F88 * a1], carIndex);
  sub_1003551B();
  result = a1;
  *(_DWORD *)&gUnk06594.gap1C8[4 * a1 + 0x3010] = carIndex;
  return result;
}

//----- (10035585) --------------------------------------------------------
int __cdecl sub_10035585(int a1, __int16 a2, int a3) {
  int result; // eax
  int v4;     // [esp+0h] [ebp-Ch]
  int v5;     // [esp+4h] [ebp-8h]
  int i;      // [esp+8h] [ebp-4h]
  __int16 v7; // [esp+1Ch] [ebp+10h]

  result = ~a3;
  v7 = ~(_WORD)a3;
  if (*(_DWORD *)(a1 + 4)) {
    v4 = **(_DWORD **)(a1 + 4);
    for (i = 0;; ++i) {
      result = i;
      if (i >= v4)
        break;
      v5 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4 * i + 4);
      *(_WORD *)(v5 + 16) |= a2;
      *(_WORD *)(v5 + 16) &= v7;
    }
  }
  return result;
}

//----- (1003563A) --------------------------------------------------------
void __cdecl sub_1003563A(int a1) {
  __int16 v1;   // cx
  float v2;     // [esp+0h] [ebp-64h]
  float v3;     // [esp+8h] [ebp-5Ch]
  float v4;     // [esp+10h] [ebp-54h]
  float v5;     // [esp+24h] [ebp-40h]
  float v6;     // [esp+24h] [ebp-40h]
  float v7;     // [esp+28h] [ebp-3Ch]
  float v8;     // [esp+28h] [ebp-3Ch]
  char *v9;     // [esp+2Ch] [ebp-38h]
  int j;        // [esp+30h] [ebp-34h]
  float k;      // [esp+30h] [ebp-34h]
  int v12;      // [esp+34h] [ebp-30h]
  int v13;      // [esp+38h] [ebp-2Ch]
  int v14;      // [esp+3Ch] [ebp-28h]
  float v15;    // [esp+40h] [ebp-24h]
  __int16 *v16; // [esp+44h] [ebp-20h]
  __int16 *v17; // [esp+48h] [ebp-1Ch]
  float *v18;   // [esp+4Ch] [ebp-18h]
  float *v19;   // [esp+50h] [ebp-14h]
  float *v20;   // [esp+54h] [ebp-10h]
  float v21;    // [esp+58h] [ebp-Ch]
  float v22;    // [esp+58h] [ebp-Ch]
  int i;        // [esp+5Ch] [ebp-8h]
  char *v24;    // [esp+60h] [ebp-4h]

  if (*(_DWORD *)(a1 + 4)) {
    v13 = **(_DWORD **)(a1 + 4);
    for (i = 0;; ++i) {
      if (i >= v13)
        return;
      v18 = *(float **)(*(_DWORD *)(a1 + 4) + 4 * i + 4);
      if (((_WORD)v18[4] & 4) != 0)
        break;
      v18[7] = v18[7] + *(float *)&dword_106C2CFC;
      v21 = v18[7];
      if (v21 >= (double)v18[5]) {
        if (v21 < (double)v18[6]) {
          if (v21 < (double)v18[5])
              continue;
          goto LABEL_8;
        }
        if (((_WORD)v18[4] & 1) != 0) {
          if (((_WORD)v18[4] & 2) != 0) {
              v5 = (v18[6] - v18[5]) * 2.0;
              v7 = v18[6] + v5;
              while (v21 > (double)v7)
                  v21 = v21 - v5;
              v6 = v5 * 0.5;
              v8 = v7 - v6;
              if (v21 <= (double)v8) {
                  v21 = 2.0 * v18[6] - v21;
                  v18[7] = v21;
                  v1 = *((_WORD *)v18 + 8);
                  LOBYTE(v1) = v1 | 4;
                  *((_WORD *)v18 + 8) = v1;
                  goto LABEL_36;
              }
          } else {
              v6 = v18[6] - v18[5];
              v8 = v18[6] + v6;
          }
          while (v21 > (double)v8)
              v21 = v21 - v6;
          v21 = v21 - (v18[6] - v18[5]);
          v18[7] = v21;
        LABEL_36:
          *((_WORD *)v18 + 9) = 0;
        LABEL_8:
          for (j = *((unsigned __int16 *)v18 + 9);
               j < *((_DWORD *)v18 + 3) && *(float *)LODWORD(v18[j + 8]) <= (double)v21;
               ++j) {
              ;
          }
          v19 = (float *)LODWORD(v18[j + 8]);
          v20 = (float *)LODWORD(v18[j + 7]);
          v22 = (v21 - *v20) / (*v19 - *v20);
          goto LABEL_13;
        }
        v19 = (float *)LODWORD(v18[*((_DWORD *)v18 + 3) + 7]);
        v20 = v19;
        v22 = 0.0;
      } else {
        v19 = (float *)*((_DWORD *)v18 + 8);
        v20 = v19;
        v22 = 0.0;
      }
    LABEL_13:
      v14 = (__int64)(v22 * 4096.0);
      v15 = *v18;
      v17 = (__int16 *)(v20 + 1);
      v16 = (__int16 *)(v19 + 1);
      v9 = (char *)v20 + 6 * *(_DWORD *)v18 + 4;
      v24 = (char *)v19 + 6 * *(_DWORD *)v18 + 4;
      v12 = *((_DWORD *)v18 + 1);
      for (k = 0.0; SLODWORD(k) < SLODWORD(v15); ++LODWORD(k)) {
        *(float *)(v12 + 32 * LODWORD(k)) = (float)(__int16)(*v17 + ((v14 * (*v16 - *v17)) >> 12));
        *(float *)(v12 + 32 * LODWORD(k) + 4) =
            (float)(__int16)(v17[1] + ((v14 * (v16[1] - v17[1])) >> 12));
        *(float *)(v12 + 32 * LODWORD(k) + 8) =
            (float)(__int16)(v17[2] + ((v14 * (v16[2] - v17[2])) >> 12));
        v4 = (float)(char)(*v9 + ((v14 * (*v24 - *v9)) >> 12));
        *(float *)(v12 + 32 * LODWORD(k) + 20) = v4 * 0.0078125;
        v3 = (float)(char)(v9[1] + ((v14 * (v24[1] - v9[1])) >> 12));
        *(float *)(v12 + 32 * LODWORD(k) + 24) = v3 * 0.0078125;
        v2 = (float)(char)(v9[2] + ((v14 * (v24[2] - v9[2])) >> 12));
        *(float *)(v12 + 32 * LODWORD(k) + 28) = v2 * 0.0078125;
        v17 += 3;
        v16 += 3;
        v9 += 3;
        v24 += 3;
      }
    LABEL_3:;
    }
    v18[7] = v18[7] - *(float *)&dword_106C2CFC;
    v21 = v18[7];
    if (v21 < (double)v18[5]) {
      if (((_WORD)v18[4] & 1) == 0)
        goto LABEL_3;
      v21 = 2.0 * v18[5] - v21;
      v18[7] = v21;
      *((_WORD *)v18 + 8) &= 0xFFFBu;
      *((_WORD *)v18 + 9) = 0;
    } else if (v21 >= (double)v18[6]) {
      goto LABEL_3;
    }
    goto LABEL_8;
  }
}
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (10035BA7) --------------------------------------------------------
void __noreturn sub_10035BA7() {
  s_noreturn_10008CF0(dword_106C2CF0);
}
// 106C2CF0: using guessed type int dword_106C2CF0;

//----- (10035BBA) --------------------------------------------------------
void __cdecl __noreturn sub_10035BBA(int a1) {
  dword_106C2CF0 = a1;
  sub_10035BA7(0);
}
// 10035BA7: using guessed type int __cdecl sub_10035BA7(_DWORD);
// 106C2CF0: using guessed type int dword_106C2CF0;

//----- (10035BD1) --------------------------------------------------------
CarPart *sub_10035BD1() {
  if (MEMORY[0x106C56D0] != dword_10B4E708 || dword_106C29A4 != dword_10B4E70C)
    meth_BossRallyConfig_WriteConfigFile(&gConfig, gBossRallyCfgPath);
  sub_100734F0();
  input_10079550();
  if (gNetworkPlay) {
    if (gNetworkPlay > 1)
      sub_100713B0();
    atomic_sub_10005960();
  }
  sub_1002F690();
  CloseHandle(MEMORY[0x106C6650]);
  MEMORY[0x106C6650] = 0;
  meth_unk0008C_FlipSurfaces(gUnk8C);
  sub_1006A9C0(1, 640, 480, 16, 0);
  return car_100613B0();
}
// 100713B0: using guessed type int sub_100713B0(void);
// 1022AF18: using guessed type int g_NetworkPlay;
// 106C29A4: using guessed type int dword_106C29A4;
// 106C56D0: using guessed type int dword_106C56D0;
// 10B4E708: using guessed type int dword_10B4E708;
// 10B4E70C: using guessed type int dword_10B4E70C;

//----- (10035C70) --------------------------------------------------------
_DWORD *__cdecl sub_10035C70(_DWORD *a1, _DWORD *a2) {
  _DWORD *result; // eax

  *a1 = *a2;
  a1[1] = a2[1];
  result = a1;
  a1[2] = a2[2];
  return result;
}

//----- (10035CA0) --------------------------------------------------------
_BYTE *__thiscall meth_10035CA0(_BYTE *this, char a2, char a3, char a4) {
  _BYTE *result; // eax

  result = this;
  this[0x29AC] = a2;
  LOBYTE(result) = a3;
  this[10669] = a3;
  this[10670] = a4;
  return result;
}

//----- (10035CE0) --------------------------------------------------------
void __thiscall meth_10035CE0(int *this) {
  int v2;              // eax
  char v3;             // cl
  __int16 v4;          // ax
  int v5;              // ecx
  int v6;              // ecx
  int v7;              // ecx
  int v8;              // ecx
  int v9;              // ecx
  int v10;             // ecx
  int v11;             // ecx
  int v12;             // eax
  int v13;             // eax
  int v14;             // eax
  int v15;             // eax
  int *v16;            // eax
  int v17;             // edx
  int v18;             // eax
  double v19;          // st7
  double v20;          // st7
  unsigned __int8 v22; // c0
  unsigned __int8 v23; // c3

  v2 = this[86];
  v3 = *(_BYTE *)(v2 + 4);
  if (v3) {
    this[10] = v3 == 8;
    *(_BYTE *)(v2 + 2) = 0;
    *(_BYTE *)(this[86] + 3) = 0;
    *(_WORD *)this[86] = 0;
  } else {
    this[10] = 0;
  }
  v4 = *(_WORD *)this[86];
  *this = 0;
  if ((v4 & 0x800) != 0)
    *this = 8;
  if ((v4 & 0x400) != 0)
    *this |= 2u;
  if ((v4 & 0x200) != 0)
    *this |= 4u;
  if ((v4 & 0x100) != 0)
    *this |= 1u;
  if (v4 < 0)
    *this |= 0x10u;
  if ((v4 & 0x4000) != 0)
    *this |= 0x20u;
  if ((v4 & 0x20) != 0) {
    v5 = *this;
    BYTE1(v5) = BYTE1(*this) | 0x10;
    *this = v5;
  }
  if ((v4 & 0x10) != 0) {
    v6 = *this;
    BYTE1(v6) = BYTE1(*this) | 0x20;
    *this = v6;
  }
  if ((v4 & 0x2000) != 0) {
    v7 = *this;
    BYTE1(v7) = BYTE1(*this) | 0x80;
    *this = v7;
  }
  if ((v4 & 0x1000) != 0) {
    v8 = *this;
    BYTE1(v8) = BYTE1(*this) | 0x40;
    *this = v8;
  }
  if ((v4 & 8) != 0) {
    v9 = *this;
    BYTE1(v9) = BYTE1(*this) | 1;
    *this = v9;
  }
  if ((v4 & 1) != 0) {
    v10 = *this;
    BYTE1(v10) = BYTE1(*this) | 2;
    *this = v10;
  }
  if ((v4 & 4) != 0) {
    v11 = *this;
    BYTE1(v11) = BYTE1(*this) | 4;
    *this = v11;
  }
  if ((v4 & 2) != 0) {
    v12 = *this;
    BYTE1(v12) = BYTE1(*this) | 8;
    *this = v12;
  }
  if (sub_10034C51((int (*)(void))sub_1002C500)) {
    if ((*this & 0x1000) != 0)
      *this |= 0x200000u;
    if ((*this & 0x2000) != 0)
      *this |= 0x100000u;
    if ((gConfigJoystickPtr->field_0 & 0x8000) != 0 || gConfigJoystickPtr->field_7 < 0) {
      *((_BYTE *)this + 36) = *(_BYTE *)(this[86] + 2);
      goto LABEL_46;
    }
    v13 = *this;
    if ((*this & 4) != 0) {
      if ((v13 & 1) == 0) {
        *((_BYTE *)this + 36) = -80;
      LABEL_46:
        if ((*this & 0x10) != 0) {
          if (*(char *)(this[86] + 3) < -64)
              *this |= 0x20000u;
          *this |= 0x10000u;
        }
        v14 = *this;
        if ((*this & 0x20) != 0) {
          if ((v14 & 0x10000) != 0)
              v15 = v14 | 0x80000;
          else
              v15 = v14 | 0x40000;
          *this = v15;
        }
        if ((*this & 0x100) != 0)
          *this |= 0x1000000u;
        if ((*this & 0x400) != 0)
          *this |= 0x4000000u;
        if ((*this & 0x800) != 0)
          *this |= 0x8000000u;
        goto LABEL_61;
      }
    } else if ((v13 & 1) != 0) {
      *((_BYTE *)this + 36) = 80;
      goto LABEL_46;
    }
    *((_BYTE *)this + 36) = 0;
    goto LABEL_46;
  }
LABEL_61:
  if (this[11] || this[12]) {
    v16 = this + 13;
    v17 = 2;
    do {
      if (*(v16 - 2) && *v16 < v16[2] && !dword_106909B4)
        *v16 += 2;
      ++v16;
      --v17;
    } while (v17);
  }
  v18 = this[86];
  v19 = (double)*((char *)this + 36);
  *((float *)this + 6) = (double)*(char *)(v18 + 2) * 0.014285714;
  v20 = v19 * 0.014285714;
  *((float *)this + 7) = (double)*(char *)(v18 + 3) * 0.014285714;
  *((float *)this + 8) = v20;
  if (v22 | v23) {
    if (*((float *)this + 6) < -1.0)
      this[6] = 0xBF800000;
  } else {
    this[6] = 0x3F800000;
  }
  if (*((float *)this + 7) <= 1.0) {
    if (*((float *)this + 7) < -1.0)
      this[7] = 0xBF800000;
  } else {
    this[7] = 0x3F800000;
  }
  if (v20 <= 1.0) {
    if (v20 < -1.0)
      this[8] = 0xBF800000;
  } else {
    this[8] = 0x3F800000;
  }
}
// 10035F1B: variable 'v22' is possibly undefined
// 10035F1B: variable 'v23' is possibly undefined
// 106909B4: using guessed type int dword_106909B4;

//----- (10035FA0) --------------------------------------------------------
int __thiscall meth_10035FA0(int *this, int a2) {
  int v2;     // edx
  int result; // eax

  v2 = *this;
  this[1] |= *this & a2;
  result = v2 & ~a2;
  *this = result;
  return result;
}

//----- (10035FC0) --------------------------------------------------------
int __thiscall meth_10035FC0(_DWORD *this) {
  int result; // eax

  result = this[1] & *this;
  *this &= ~this[1];
  this[1] = result;
  return result;
}

//----- (10035FE0) --------------------------------------------------------
char *__thiscall meth_10035FE0(char *this) {
  int v1;       // edx
  char *result; // eax

  *((_DWORD *)this + 12) = 0;
  *((_DWORD *)this + 11) = 0;
  *((_DWORD *)this + 17) = 0;
  v1 = (this - &gUnk06594.gap1C8[12592]) / 348;
  *((_DWORD *)this + 85) = v1;
  result = &gUnk06594.gap1C8[6 * v1 + 12376];
  *((_DWORD *)this + 86) = result;
  return result;
}

//----- (10036020) --------------------------------------------------------
void sub_10036020() {
  MEMORY[0x106C7C38] = -2146868224;
}
// 106C7C38: using guessed type int dword_106C7C38;

//----- (10036030) --------------------------------------------------------
int __cdecl sub_10036030(HANDLE a1) {
  HANDLE *v2; // esi
  HANDLE v3;  // ebx
  HANDLE v4;  // edi
  int v5;     // edi
  HANDLE *v6; // esi
  bool v7;    // bl
  int v8;     // [esp+10h] [ebp-4h]

  if (a1 == HANDLE_FLAG_INHERIT)
    return 0;
  v8 = 1;
  v2 = (HANDLE *)&unk_11787194;
  do {
    WaitForSingleObject(*v2, 0xFFFFFFFF);
    v3 = v2[1];
    v4 = v2[11];
    ReleaseMutex(*v2);
    if (((unsigned __int8)v4 & 0x3F) != 0 && v3 == a1)
      return v8;
    v2 += 603;
    ++v8;
  } while ((int)v2 < (int)&dword_1178FEE8);
  v5 = 1;
  v6 = (HANDLE *)&unk_11787194;
  while (1) {
    WaitForSingleObject(*v6, 0xFFFFFFFF);
    v7 = ((unsigned __int8)v6[11] & 0x3F) == 0;
    ReleaseMutex(*v6);
    if (v7)
      break;
    v6 += 603;
    ++v5;
    if ((int)v6 >= (int)&dword_1178FEE8)
      return -1;
  }
  return v5;
}
// 1178FEE8: using guessed type int dword_1178FEE8;

//----- (100360F0) --------------------------------------------------------
void __cdecl sub_100360F0(int a1, int a2, int a3, void *a4) {
  void(__stdcall * v4)(HANDLE, DWORD); // edi
  void(__stdcall * v5)(HANDLE);        // ebx
  char v6;                             // al
  int v7;                              // ebx
  int v8;                              // esi
  int v9;                              // ebx
  int v10;                             // edi
  int v11;                             // edi
  int v12;                             // ebp
  int v13;                             // edx
  int v14;                             // ecx
  int v15;                             // esi
  int v16;                             // ecx
  unsigned int v17;                    // ebp
  int v18;                             // eax
  int *v19;                            // edi
  int v20;                             // eax
  unsigned int v21;                    // edi
  int *v22;                            // edx
  int v23;                             // ebp
  unsigned int v24;                    // edi
  int v25;                             // eax
  int *v26;                            // ecx
  int v27;                             // eax
  int v28;                             // ecx
  int *v29;                            // edx
  int v30;                             // edx
  int v31;                             // eax
  int v32;                             // eax
  int v33;                             // edi
  int v34;                             // ebp
  int i;                               // edi
  int v36;                             // eax
  int v37;                             // esi
  HANDLE *v38;                         // ebp
  char *v39;                           // ebx
  _DWORD *v40;                         // edx
  int v41;                             // ebx
  int *v42;                            // esi
  int *v43;                            // esi
  int v44;                             // eax
  int *v45;                            // esi
  int v46;                             // eax
  char v47;                            // [esp+11h] [ebp-79Bh]
  char v48;                            // [esp+11h] [ebp-79Bh]
  char v49;                            // [esp+12h] [ebp-79Ah]
  char v50;                            // [esp+12h] [ebp-79Ah]
  char v51;                            // [esp+13h] [ebp-799h]
  char v52;                            // [esp+13h] [ebp-799h]
  int v53;                             // [esp+14h] [ebp-798h]
  unsigned int v54;                    // [esp+14h] [ebp-798h]
  int v55;                             // [esp+14h] [ebp-798h]
  unsigned int v56;                    // [esp+18h] [ebp-794h]
  int v57;                             // [esp+1Ch] [ebp-790h]
  int v58;                             // [esp+1Ch] [ebp-790h]
  int v59;                             // [esp+1Ch] [ebp-790h]
  int v60;                             // [esp+20h] [ebp-78Ch]
  int v61;                             // [esp+20h] [ebp-78Ch]
  int v62;                             // [esp+24h] [ebp-788h]
  int v63;                             // [esp+28h] [ebp-784h]
  float v64;                           // [esp+2Ch] [ebp-780h]
  int v65;                             // [esp+30h] [ebp-77Ch]
  int v66;                             // [esp+34h] [ebp-778h]
  int v67[133];                        // [esp+4Ch] [ebp-760h] BYREF
  float v68[40];                       // [esp+260h] [ebp-54Ch] BYREF
  char v69[160];                       // [esp+300h] [ebp-4ACh] BYREF
  char v70[24];                        // [esp+3A0h] [ebp-40Ch] BYREF
  char v71;                            // [esp+3B8h] [ebp-3F4h]
  int v72;                             // [esp+7A8h] [ebp-4h]

  v63 = 0;
  v62 = 0;
  meth_10073B60(v67, a2, a3);
  v72 = 0;
  Concurrency::details::StructuredWorkStealingQueue<
      Concurrency::details::_UnrealizedChore,
      Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(v67);
  v56 = meth_10073C10(v67);
  v4 = (void(__stdcall *)(HANDLE, DWORD))WaitForSingleObject;
  v5 = (void(__stdcall *)(HANDLE))ReleaseMutex;
  if (meth_10073D40(v67))
    goto LABEL_88;
  while (2) {
    v6 = meth_10073BC0(v67);
    v7 = v6 & 0x10;
    v8 = v6 & 0xF;
    v65 = v7;
    switch (v6 & 0xE0) {
    case 0:
      v60 = (unsigned __int8)meth_10073BC0(v67);
      v9 = (unsigned __int8)meth_10073BC0(v67);
      v57 = (unsigned __int8)meth_10073BC0(v67);
      v51 = meth_10073BC0(v67);
      v47 = meth_10073BC0(v67);
      v49 = meth_10073BC0(v67);
      v10 = 0;
      v66 = meth_10073C40(v67);
      v53 = 0;
      if ((v9 & 0x3Fu) <= 2) {
        do
          v70[v10++] = meth_10073BC0(v67);
        while (v10 < 24);
        v53 = v10;
        v71 = 0;
      }
      if ((v9 & 0x3F) == 4)
        meth_10073C10(v67);
      v11 = 2412 * v8;
      WaitForSingleObject(*(&dword_11786828 + 603 * v8), 0xFFFFFFFF);
      if ((dword_11786854[603 * v8] & 0x3F) == 0 || a4 != (void *)dword_1178682C[603 * v8])
        goto LABEL_29;
      if (v65) {
        v12 = 603 * (v60 + 16 * v8);
        WaitForSingleObject((HANDLE)dword_1178FEF8[v12], 0xFFFFFFFF);
        if (v56 >= dword_1178FF00[v12]) {
          if (v8 == v60) {
              if ((v9 & 0x40) != 0) {
                  v13 = dword_11786854[603 * v8];
                  LOBYTE(v13) = v13 & 0x3F;
                  LOBYTE(v9) = v9 & 0x3F;
                  dword_11786854[603 * v8] = v13;
              }
              if (v8 == v60 && (v9 & 0x80u) != 0) {
                  v14 = dword_11786854[603 * v8];
                  LOBYTE(v14) = v14 & 0x3F;
                  LOBYTE(v9) = v9 & 0x3F;
                  dword_11786854[603 * v8] = v14;
              }
          }
          dword_1178FF00[v12] = v56;
          dword_1178FF24[v12] = v9;
          dword_1178FF28[v12] = v57;
          byte_1178FF2C[v12 * 4] = v51;
          byte_1178FF2D[v12 * 4] = v47;
          byte_1178FF2E[v12 * 4] = v49;
          dword_1178FEFC[v12] = v66;
          if (v53) {
              strcpy(&byte_11790454[v12 * 4], v70);
              v11 = 2412 * v8;
          }
        }
        ReleaseMutex((HANDLE)dword_1178FEF8[v12]);
        ReleaseMutex(*(HANDLE *)((char *)&dword_11786828 + v11));
        goto LABEL_86;
      }
      if (v8 == v60) {
        if ((v9 & 0x40) != 0)
          v62 = 1;
        if ((v9 & 0x80u) != 0)
          v63 = 1;
        dword_11786854[603 * v8] = v9;
      }
      goto LABEL_29;
    case 0x40:
      v15 = 603 * v8;
      v4(*(HANDLE *)((char *)&dword_11786828 + v15 * 4), 0xFFFFFFFF);
      if ((dword_11786854[v15] & 0x3Fu) < 2 || a4 != (void *)dword_1178682C[v15])
        goto LABEL_70;
      if (v56 <= dword_11786834[dword_11786D80[v15] + v15]) {
        math_10006EC0((int)v69, v67);
        ReleaseMutex(*(HANDLE *)((char *)&dword_11786828 + v15 * 4));
      } else {
        v16 = 0;
        v17 = -1;
        v18 = 0;
        v19 = &dword_11786834[v15];
        do {
          if (*v19 <= v17) {
              v16 = v18;
              v17 = *v19;
          }
          ++v18;
          ++v19;
        } while (v18 < 8);
        dword_11786D80[v15] = v16;
        dword_11786834[v16 + v15] = v56;
        dword_11786860[dword_11786D80[v15] + v15] = 64;
        math_10006EC0((int)&unk_11786880 + 160 * dword_11786D80[v15] + v15 * 4, v67);
        if (dword_11787190[v15] || flt_117868F8[40 * dword_11786D80[v15] + v15] < 4188888.0) {
        LABEL_70:
          ReleaseMutex(*(HANDLE *)((char *)&dword_11786828 + v15 * 4));
        } else {
          dword_11787190[v15] = sub_100713A0();
          ReleaseMutex(*(HANDLE *)((char *)&dword_11786828 + v15 * 4));
        }
      }
    LABEL_86:
      if (!meth_10073D40(v67)) {
        v4 = (void(__stdcall *)(HANDLE, DWORD))WaitForSingleObject;
        continue;
      }
      v4 = (void(__stdcall *)(HANDLE, DWORD))WaitForSingleObject;
      v5 = (void(__stdcall *)(HANDLE))ReleaseMutex;
    LABEL_88:
      if (v63) {
        v43 = dword_11786854;
        do {
          v4((HANDLE) * (v43 - 11), 0xFFFFFFFF);
          v44 = *v43;
          if ((*v43 & 0x3Fu) >= 2 && (*v43 & 0x3Fu) <= 4) {
              LOBYTE(v44) = v44 & 0xBF | 0x80;
              *v43 = v44;
          }
          v5((HANDLE) * (v43 - 11));
          v43 += 603;
        } while ((int)v43 < (int)&unk_1178FF14);
      }
      if (v62) {
        v45 = dword_11786854;
        do {
          v4((HANDLE) * (v45 - 11), 0xFFFFFFFF);
          v46 = *v45;
          if ((*v45 & 0x3Fu) >= 2 && (*v45 & 0x3Fu) <= 4) {
              LOBYTE(v46) = v46 & 0x7F | 0x40;
              *v45 = v46;
          }
          v5((HANDLE) * (v45 - 11));
          v45 += 603;
        } while ((int)v45 < (int)&unk_1178FF14);
      }
      if (a4 != (void *)1 &&
          ((*((_BYTE *)meth_unk00214_GetField10((unk00214 *)v67) + 3) & 0xE0) == 64 ||
           (*((_BYTE *)meth_unk00214_GetField10((unk00214 *)v67) + 3) & 0xE0) == 0x80 ||
           (*((_BYTE *)meth_unk00214_GetField10((unk00214 *)v67) + 3) & 0xE0) == 96)) {
        np_sub_10003580(a1, a2, a3, (int)a4);
      }
    LABEL_105:
      v72 = -1;
      meth_DebugPrint(v67);
      return;
    case 0x60:
      Concurrency::details::StructuredWorkStealingQueue<
          Concurrency::details::_UnrealizedChore,
          Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(v67);
      v32 = meth_unk00214_10073F40((unk00214 *)v67);
      meth_10073BA0(v67, v32);
      goto LABEL_86;
    case 0x80:
      v15 = 603 * v8;
      v4(*(HANDLE *)((char *)&dword_11786828 + v15 * 4), 0xFFFFFFFF);
      if ((dword_11786854[v15] & 0x3Fu) >= 2 && a4 == (void *)dword_1178682C[v15]) {
        if (v56 <= dword_11786834[dword_11786D80[v15] + v15]) {
          math_100073E0(v68, v68, v67);
        } else {
          v20 = 0;
          v58 = 0;
          v21 = -1;
          v22 = &dword_11786834[v15];
          do {
              if (*v22 <= v21) {
                  v58 = v20;
                  v21 = *v22;
              }
              ++v20;
              ++v22;
          } while (v20 < 8);
          v23 = 0;
          v24 = 0;
          v25 = 0;
          v26 = &dword_11786834[v15];
          do {
              if (v26[11] == 64 && *v26 > v24) {
                  v23 = v25;
                  v24 = *v26;
              }
              ++v25;
              ++v26;
          } while (v25 < 8);
          v27 = 0;
          v28 = 0;
          v54 = 0;
          v29 = &dword_11786834[v15];
          do {
              if (v29[11] == 64 && *v29 > v54 && v27 != v23) {
                  v28 = v27;
                  v54 = *v29;
              }
              ++v27;
              ++v29;
          } while (v27 < 8);
          v30 = dword_11786834[v28 + v15];
          v31 = dword_11786834[v23 + v15] - v30;
          if (v31)
              v64 = (double)(v56 - v30) / (double)v31;
          else
              v64 = 1.0;
          dword_11786D80[v15] = v58;
          dword_11786834[v58 + v15] = v56;
          dword_11786860[dword_11786D80[v15] + v15] = 128;
          math_100079E0((int)&unk_11786880 + 160 * dword_11786D80[v15] + v15 * 4,
                        v64,
                        (int)&unk_11786880 + 160 * v28 + v15 * 4,
                        (int)&unk_11786880 + 160 * v23 + v15 * 4);
          math_100073E0((float *)((char *)&unk_11786880 + 160 * dword_11786D80[v15] + v15 * 4),
                        (float *)((char *)&unk_11786880 + 160 * v23 + v15 * 4),
                        v67);
        }
      }
      goto LABEL_70;
    case 0xC0:
      v33 = meth_10073C10(v67);
      v34 = sub_100713A0() - v33;
      v15 = 603 * v8;
      WaitForSingleObject(*(HANDLE *)((char *)&dword_11786828 + v15 * 4), 0xFFFFFFFF);
      if ((dword_11786854[v15] & 0x3F) != 0 && a4 == (void *)dword_1178682C[v15] && v7) {
        dword_11787188[v15] = v33;
        dword_1178718C[v15] = v34;
      }
      goto LABEL_70;
    case 0xE0:
      v61 = (unsigned __int8)meth_10073BC0(v67);
      v59 = (unsigned __int8)meth_10073BC0(v67);
      v52 = meth_10073BC0(v67);
      v48 = meth_10073BC0(v67);
      v50 = meth_10073BC0(v67);
      for (i = 0; i < 24; ++i)
        v70[i] = meth_10073BC0(v67);
      v71 = 0;
      if (v7) {
        WaitForSingleObject(*(&dword_11786828 + 603 * v8), 0xFFFFFFFF);
        if ((dword_11786854[603 * v8] & 0x3F) != 0 && a4 == (void *)dword_1178682C[603 * v8] &&
            v8 == v61) {
          dword_11786858[603 * v8] = v59;
          byte_1178685C[2412 * v8] = v52;
          byte_1178685D[2412 * v8] = v48;
          byte_1178685E[2412 * v8] = v50;
          strcpy((char *)&unk_11786D84 + 2412 * v8, v70);
          dword_11786854[603 * v8] = 2;
        }
      LABEL_29:
        ReleaseMutex(*(&dword_11786828 + 603 * v8));
      } else if (!dword_1178FEF0) {
        v36 = sub_10036030(a4);
        v37 = v36;
        if (v36 != -1) {
          v38 = &dword_11786828 + 603 * v36;
          WaitForSingleObject(*v38, 0xFFFFFFFF);
          v39 = (char *)(v38 + 22);
          v38[1] = a4;
          v40 = v38 + 14;
          v55 = 8;
          do {
              *(v40 - 11) = 0;
              *v40++ = 0;
              memset(v39, 0, 0xA0u);
              v39 += 160;
              --v55;
          } while (v55);
          v38[11] = HANDLE_FLAG_INHERIT;
          v38[342] = 0;
          v38[599] = (HANDLE)sub_100713A0();
          v41 = 16;
          v42 = &dword_1178FEF8[9648 * v37];
          do {
              WaitForSingleObject((HANDLE)*v42, 0xFFFFFFFF);
              v42[2] = 0;
              v42[11] = 0;
              ReleaseMutex((HANDLE)*v42);
              v42 += 603;
              --v41;
          } while (v41);
          ReleaseMutex(*v38);
        }
      }
      goto LABEL_86;
    default:
      goto LABEL_105;
    }
  }
}
// 10073B90: using guessed type int __thiscall Concurrency::details::StructuredWorkStealingQueue<Concurrency::details::_UnrealizedChore,Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(_DWORD);
// 1178682C: using guessed type int dword_1178682C[];
// 11786854: using guessed type int dword_11786854[];
// 11786858: using guessed type int dword_11786858[];
// 11786860: using guessed type int dword_11786860[];
// 11786D80: using guessed type int dword_11786D80[];
// 11787188: using guessed type int dword_11787188[];
// 1178718C: using guessed type int dword_1178718C[];
// 11787190: using guessed type int dword_11787190[];
// 1178FEF0: using guessed type int dword_1178FEF0;
// 1178FEF8: using guessed type int dword_1178FEF8[];
// 1178FEFC: using guessed type int dword_1178FEFC[];
// 1178FF00: using guessed type int dword_1178FF00[];
// 1178FF24: using guessed type int dword_1178FF24[];
// 1178FF28: using guessed type int dword_1178FF28[];

//----- (10036BD0) --------------------------------------------------------
int __cdecl sub_10036BD0(int a1, int a2) {
  int v2; // esi

  v2 = meth_Pod_100088B0(&gPod, a2, a1);
  sub_1002B9A0(0, v2);
  sub_10036C00(v2);
  return v2;
}

//----- (10036C00) --------------------------------------------------------
__int16 __cdecl sub_10036C00(int a1) {
  int v1;               // ebp
  __int16 v2;           // cx
  int v3;               // eax
  int *v4;              // esi
  char v5;              // dl
  char v6;              // cl
  char v7;              // al
  unsigned __int16 v8;  // dx
  int v9;               // edx
  int v10;              // edi
  int v11;              // ebx
  char v12;             // cl
  int v13;              // eax
  char v14;             // cl
  _BYTE *v15;           // eax
  unsigned __int16 v16; // cx
  int v17;              // eax
  int v18;              // eax
  int v19;              // eax
  char v20;             // cl
  int v21;              // eax
  char v22;             // cl
  _BYTE *v23;           // eax
  unsigned __int16 v24; // cx
  int v25;              // eax
  int v26;              // eax
  int v27;              // eax
  int v28;              // eax
  int v29;              // eax
  int v30;              // eax
  int v31;              // eax
  int v32;              // eax
  int v33;              // eax
  int v34;              // ebx
  char v35;             // cl
  int v36;              // ecx
  char v37;             // dl
  int v38;              // eax
  _BYTE *v39;           // eax
  char v40;             // cl
  int v41;              // eax
  char v42;             // cl
  _DWORD *v43;          // eax
  int v44;              // ecx
  int v45;              // ebp
  __int16 v46;          // ax
  unsigned int v47;     // ebx
  _BYTE *v48;           // esi
  int *v49;             // edi
  char v50;             // al
  char v51;             // al
  __int16 v52;          // dx
  __int16 v53;          // ax
  int v55;              // [esp+10h] [ebp-Ch]
  int v56;              // [esp+14h] [ebp-8h]
  int v57;              // [esp+18h] [ebp-4h]

  v1 = a1;
  LOBYTE(v3) = *(_BYTE *)(a1 + 3);
  LOBYTE(v2) = *(_BYTE *)(a1 + 1);
  BYTE1(v3) = *(_BYTE *)(a1 + 2);
  HIBYTE(v2) = *(_BYTE *)a1;
  v4 = (int *)(a1 + 4);
  *(_WORD *)(a1 + 2) = v3;
  *(_WORD *)a1 = v2;
  if (*(_DWORD *)(a1 + 4)) {
    v5 = *(_BYTE *)v4;
    v6 = *(_BYTE *)(a1 + 5);
    *(_BYTE *)v4 = *(_BYTE *)(a1 + 7);
    v7 = *(_BYTE *)(a1 + 6);
    *(_BYTE *)(a1 + 7) = v5;
    *(_BYTE *)(a1 + 6) = v6;
    *(_BYTE *)(a1 + 5) = v7;
    sub_1002B970(v4);
    LOBYTE(v8) = *(_BYTE *)(*v4 + 1);
    HIBYTE(v8) = *(_BYTE *)*v4;
    *(_DWORD *)*v4 =
        *(unsigned __int8 *)(*v4 + 3) | ((*(unsigned __int8 *)(*v4 + 2) | (v8 << 8)) << 8);
    v3 = *v4;
    v9 = 0;
    v56 = 0;
    if (*(int *)*v4 > 0) {
      while (1) {
        v10 = 4 * v9 + 4;
        v11 = 4 * v9;
        v12 = *(_BYTE *)(4 * v9 + v3 + 7);
        *(_BYTE *)(v11 + v3 + 7) = *(_BYTE *)(v10 + v3);
        *(_BYTE *)(v10 + *v4) = v12;
        v13 = 4 * v9 + *v4;
        v14 = *(_BYTE *)(v13 + 6);
        *(_BYTE *)(v13 + 6) = *(_BYTE *)(v13 + 5);
        *(_BYTE *)(v11 + *v4 + 5) = v14;
        sub_1002B970((int *)(*v4 + v10));
        v15 = *(_BYTE **)(v10 + *v4);
        LOBYTE(v16) = v15[1];
        HIBYTE(v16) = *v15;
        *(_DWORD *)v15 = (unsigned __int8)v15[3] | (((unsigned __int8)v15[2] | (v16 << 8)) << 8);
        v17 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v16) = *(_BYTE *)(v17 + 7);
        *(_BYTE *)(v17 + 7) = *(_BYTE *)(v17 + 4);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 4) = v16;
        v18 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v16) = *(_BYTE *)(v18 + 6);
        *(_BYTE *)(v18 + 6) = *(_BYTE *)(v18 + 5);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 5) = v16;
        sub_1002B970((int *)(*(_DWORD *)(v10 + *v4) + 4));
        sub_1002BD50((__int16 **)(*(_DWORD *)(v10 + *v4) + 4), **(_DWORD **)(v10 + *v4));
        v19 = *(_DWORD *)(v10 + *v4);
        v20 = *(_BYTE *)(v19 + 11);
        *(_BYTE *)(v19 + 11) = *(_BYTE *)(v19 + 8);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 8) = v20;
        v21 = *(_DWORD *)(v10 + *v4);
        v22 = *(_BYTE *)(v21 + 10);
        *(_BYTE *)(v21 + 10) = *(_BYTE *)(v21 + 9);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 9) = v22;
        sub_1002B970((int *)(*(_DWORD *)(v10 + *v4) + 8));
        v57 = 0;
        v23 = *(_BYTE **)(v10 + *v4);
        LOBYTE(v24) = v23[13];
        HIBYTE(v24) = v23[12];
        *((_DWORD *)v23 + 3) =
            (unsigned __int8)v23[15] | (((unsigned __int8)v23[14] | (v24 << 8)) << 8);
        v25 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v24) = *(_BYTE *)(v25 + 17);
        HIBYTE(v24) = *(_BYTE *)(v25 + 16);
        *(_WORD *)(v25 + 16) = v24;
        v26 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v24) = *(_BYTE *)(v26 + 19);
        HIBYTE(v24) = *(_BYTE *)(v26 + 18);
        *(_WORD *)(v26 + 18) = v24;
        v27 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v24) = *(_BYTE *)(v27 + 23);
        *(_BYTE *)(v27 + 23) = *(_BYTE *)(v27 + 20);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 20) = v24;
        v28 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v24) = *(_BYTE *)(v28 + 22);
        *(_BYTE *)(v28 + 22) = *(_BYTE *)(v28 + 21);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 21) = v24;
        v29 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v24) = *(_BYTE *)(v29 + 27);
        *(_BYTE *)(v29 + 27) = *(_BYTE *)(v29 + 24);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 24) = v24;
        v30 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v24) = *(_BYTE *)(v30 + 26);
        *(_BYTE *)(v30 + 26) = *(_BYTE *)(v30 + 25);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 25) = v24;
        v31 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v24) = *(_BYTE *)(v31 + 31);
        *(_BYTE *)(v31 + 31) = *(_BYTE *)(v31 + 28);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 28) = v24;
        v32 = *(_DWORD *)(v10 + *v4);
        LOBYTE(v24) = *(_BYTE *)(v32 + 30);
        *(_BYTE *)(v32 + 30) = *(_BYTE *)(v32 + 29);
        *(_BYTE *)(*(_DWORD *)(v10 + *v4) + 29) = v24;
        v33 = *(_DWORD *)(v10 + *v4);
        if (*(int *)(v33 + 12) > 0) {
          v34 = 32;
          do {
              v35 = *(_BYTE *)(v34 + v33 + 3);
              *(_BYTE *)(v34 + v33 + 3) = *(_BYTE *)(v34 + v33);
              *(_BYTE *)(*(_DWORD *)(v10 + *v4) + v34) = v35;
              v36 = *(_DWORD *)(v10 + *v4);
              v37 = *(_BYTE *)(v36 + v34 + 1);
              v38 = v36 + v34 - 32;
              LOBYTE(v36) = *(_BYTE *)(v36 + v34 + 2);
              *(_BYTE *)(v38 + 34) = v37;
              *(_BYTE *)(*(_DWORD *)(v10 + *v4) + v34 + 1) = v36;
              sub_1002B970((int *)(v34 + *(_DWORD *)(v10 + *v4)));
              v55 = 0;
              v39 = *(_BYTE **)(*(_DWORD *)(v10 + *v4) + v34);
              v40 = v39[3];
              v39[3] = *v39;
              **(_BYTE **)(*(_DWORD *)(v10 + *v4) + v34) = v40;
              v41 = *(_DWORD *)(*(_DWORD *)(v10 + *v4) + v34);
              v42 = *(_BYTE *)(v41 + 2);
              *(_BYTE *)(v41 + 2) = *(_BYTE *)(v41 + 1);
              *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v10 + *v4) + v34) + 1) = v42;
              v43 = *(_DWORD **)(v10 + *v4);
              if (3 * *v43 > 0) {
                  v44 = 4;
                  do {
                      v45 = v43[v34 / 4u];
                      LOBYTE(v46) = *(_BYTE *)(v44 + v45 + 1);
                      ++v55;
                      HIBYTE(v46) = *(_BYTE *)(v44 + v45);
                      *(_WORD *)(v44 + v45) = v46;
                      v44 += 2;
                      v43 = *(_DWORD **)(v10 + *v4);
                  } while (v55 < 3 * *v43);
                  v1 = a1;
              }
              v34 += 4;
              v33 = *(_DWORD *)(v10 + *v4);
              ++v57;
          } while (v57 < *(_DWORD *)(v33 + 12));
        }
        v3 = *v4;
        if (++v56 >= *(_DWORD *)*v4)
          break;
        v9 = v56;
      }
    }
  }
  v47 = 0;
  if (*(_WORD *)(v1 + 2)) {
    v48 = (_BYTE *)(v1 + 10);
    do {
      v3 = *(_DWORD *)(v48 - 2);
      v49 = (int *)(v48 - 2);
      if (v3) {
        v50 = v48[1];
        v48[1] = *(_BYTE *)v49;
        *(_BYTE *)v49 = v50;
        v51 = *v48;
        *v48 = *(v48 - 1);
        *(v48 - 1) = v51;
        sub_1002B970((int *)(v48 - 2));
        LOBYTE(v52) = v48[3];
        HIBYTE(v52) = v48[2];
        *((_WORD *)v48 + 1) = v52;
        LOBYTE(v53) = v48[5];
        HIBYTE(v53) = v48[4];
        *((_WORD *)v48 + 2) = v53;
        LOBYTE(v53) = v48[9];
        v48[9] = v48[6];
        v48[6] = v53;
        LOBYTE(v53) = v48[8];
        v48[8] = v48[7];
        v48[7] = v53;
        LOBYTE(v53) = v48[13];
        v48[13] = v48[10];
        v48[10] = v53;
        LOBYTE(v53) = v48[12];
        v48[12] = v48[11];
        v48[11] = v53;
        LOBYTE(v53) = v48[17];
        v48[17] = v48[14];
        v48[14] = v53;
        LOBYTE(v53) = v48[16];
        v48[16] = v48[15];
        v48[15] = v53;
        sub_1002BF80(*v49);
        sub_10074DC0(8);
        LOWORD(v3) = dword_118AA0C4(*v49);
      }
      ++v47;
      v48 += 20;
    } while (v47 < *(unsigned __int16 *)(v1 + 2));
  }
  return v3;
}
// 118AA0C4: using guessed type int (__cdecl *dword_118AA0C4)(_DWORD);

//----- (10037030) --------------------------------------------------------
int __cdecl sub_10037030(int a1) {
  int result; // eax

  result = *(_DWORD *)(MEMORY[0x106C7C3C] + 124);
  if (result >= 30) {
    ++MEMORY[0x106C7C40];
    result = *(_DWORD *)(MEMORY[0x106C7C3C] + 124) + 1;
    *(_DWORD *)(MEMORY[0x106C7C3C] + 124) = result;
  } else {
    *(_DWORD *)(MEMORY[0x106C7C3C] + 4 * result + 4) = a1;
    ++*(_DWORD *)(MEMORY[0x106C7C3C] + 124);
  }
  return result;
}
// 106C7C3C: using guessed type int dword_106C7C3C;
// 106C7C40: using guessed type int dword_106C7C40;

//----- (10037070) --------------------------------------------------------
int __cdecl sub_10037070(int a1) {
  int v1; // edx
  int v2; // edi
  int v3; // ecx

  v1 = 0;
  v2 = *(_DWORD *)(MEMORY[0x106C7C3C] + 32788);
  while (1) {
    v3 = *(_DWORD *)(v2 + 36 * *(unsigned __int8 *)(v1 + MEMORY[0x106C7C3C] + 33040) + 4);
    if (v3) {
      if ((*(_DWORD *)(v2 + 36 * *(unsigned __int8 *)(v1 + MEMORY[0x106C7C3C] + 33040) + 32) &
           0xF000000) == 0x1000000 &&
          v3 == a1) {
        break;
      }
    }
    if (++v1 >= 12)
      return 0;
  }
  return 1;
}
// 106C7C3C: using guessed type int dword_106C7C3C;

//----- (100370D0) --------------------------------------------------------
int __cdecl sub_100370D0(char *outBuffer) {
  unsigned __int16 v2; // ax
  char v3;             // cl
  char v4;             // cl
  unsigned __int16 v5; // ax
  char v6;             // cl
  char v7;             // cl
  unsigned __int16 v8; // ax
  char *v9;            // ebx
  int v10;             // eax
  int v11;             // eax
  int v12;             // ecx
  char *v13;           // edi
  int v14;             // ebp
  char v15;            // al
  char v16;            // al
  char v17;            // al
  char v18;            // al
  char v19;            // al
  char v20;            // dl
  char v21;            // cl
  char v22;            // al
  char v23;            // dl
  char v24;            // al
  char v25;            // cl
  char v26;            // al
  char v27;            // dl
  char v28;            // al
  char v29;            // cl
  char v30;            // al
  char v31;            // dl
  char v32;            // al
  char v33;            // cl
  char v34;            // al
  char v35;            // dl
  char v36;            // al
  char v37;            // cl
  char v38;            // al
  char v39;            // dl
  char *v40;           // eax
  int v41;             // edi
  char v42;            // cl
  char v43;            // cl
  char *v44;           // edi
  int v45;             // ebp
  char v46;            // al
  char v47;            // al
  _WORD *v48;          // edi
  int *v49;            // ebp
  int v50;             // ebx
  __int16 v51;         // ax
  __int16 v52;         // cx
  __int16 v53;         // cx
  __int16 v54;         // dx
  char *v55;           // eax
  int v56;             // ebp
  int v57;             // edi
  char v58;            // cl
  char v59;            // cl
  char v60;            // cl
  char v61;            // dl
  char v62;            // cl
  int outBuffera;      // [esp+14h] [ebp+4h]
  int outBufferb;      // [esp+14h] [ebp+4h]

  sub_1002B9A0(-2143518720, (int)(outBuffer + 0x8000));
  sub_1002B9D0(0);
  *(_DWORD *)&gUnk06594.gap1C8[18164] = outBuffer;
  *((_DWORD *)outBuffer + 31) = 0;
  LOBYTE(v2) = outBuffer[32769];
  HIBYTE(v2) = outBuffer[0x8000];
  *((_DWORD *)outBuffer + 0x2000) =
      (unsigned __int8)outBuffer[32771] | (((unsigned __int8)outBuffer[32770] | (v2 << 8)) << 8);
  v3 = outBuffer[32775];
  outBuffer[32775] = outBuffer[32772];
  outBuffer[32772] = v3;
  v4 = outBuffer[32774];
  outBuffer[32774] = outBuffer[32773];
  outBuffer[32773] = v4;
  sub_1002B970((int *)outBuffer + 8193);
  LOBYTE(v5) = outBuffer[32777];
  HIBYTE(v5) = outBuffer[32776];
  *((_DWORD *)outBuffer + 8194) =
      (unsigned __int8)outBuffer[32779] | (((unsigned __int8)outBuffer[32778] | (v5 << 8)) << 8);
  v6 = outBuffer[32783];
  outBuffer[32783] = outBuffer[32780];
  outBuffer[32780] = v6;
  v7 = outBuffer[32782];
  outBuffer[32782] = outBuffer[32781];
  outBuffer[32781] = v7;
  sub_1002B970((int *)outBuffer + 8195);
  LOBYTE(v8) = outBuffer[32785];
  HIBYTE(v8) = outBuffer[32784];
  v9 = outBuffer + 32788;
  *((_DWORD *)outBuffer + 8196) =
      (unsigned __int8)outBuffer[32787] | (((unsigned __int8)outBuffer[32786] | (v8 << 8)) << 8);
  LOBYTE(v8) = outBuffer[32791];
  outBuffer[32791] = outBuffer[32788];
  outBuffer[32788] = v8;
  LOBYTE(v8) = outBuffer[32790];
  outBuffer[32790] = outBuffer[32789];
  outBuffer[32789] = v8;
  sub_1002B970((int *)outBuffer + 8197);
  sub_1002BA80(*((_DWORD *)outBuffer + 8197), *((_DWORD *)outBuffer + 8196));
  v10 = *(_DWORD *)(*((_DWORD *)outBuffer + 8197) + 36 * (unsigned __int8)outBuffer[33050] + 4);
  if (v10) {
    v11 = v10 + 24;
    v12 = 4;
    do {
      if (*(_DWORD *)&gUnk06594.gap1C8[12500] || *(_DWORD *)&gUnk06594.gap1C8[12508])
        *(_WORD *)v11 &= 0xFEFFu;
      else
        *(_BYTE *)(v11 + 1) |= 1u;
      v11 += 2;
      --v12;
    } while (v12);
  }
  sub_10074E00();
  v13 = outBuffer + 32792;
  outBuffera = 3;
  do {
    v14 = 10;
    do {
      v15 = v13[3];
      v13[3] = *v13;
      *v13 = v15;
      v16 = v13[2];
      v13[2] = v13[1];
      v13[1] = v16;
      sub_1002B970((int *)v13);
      if (!sub_1002BF40(*(_DWORD *)v13)) {
        sub_1002BF80(*(_DWORD *)v13);
        sub_10074DC0(2);
        dword_118AA0C4(*(_DWORD *)v13);
      }
      v13 += 4;
      --v14;
    } while (v14);
    --outBuffera;
  } while (outBuffera);
  v17 = outBuffer[32915];
  outBuffer[32915] = outBuffer[32912];
  outBuffer[32912] = v17;
  v18 = outBuffer[32914];
  outBuffer[32914] = outBuffer[32913];
  outBuffer[32913] = v18;
  sub_1002B970((int *)outBuffer + 8229);
  v19 = outBuffer[32923];
  v20 = outBuffer[32921];
  outBuffer[32923] = outBuffer[32920];
  v21 = outBuffer[32924];
  outBuffer[32920] = v19;
  v22 = outBuffer[32922];
  outBuffer[32922] = v20;
  v23 = outBuffer[32925];
  outBuffer[32921] = v22;
  v24 = outBuffer[32927];
  outBuffer[32927] = v21;
  v25 = outBuffer[32928];
  outBuffer[32924] = v24;
  v26 = outBuffer[32926];
  outBuffer[32926] = v23;
  v27 = outBuffer[32929];
  outBuffer[32925] = v26;
  v28 = outBuffer[32931];
  outBuffer[32931] = v25;
  v29 = outBuffer[32932];
  outBuffer[32928] = v28;
  v30 = outBuffer[32930];
  outBuffer[32930] = v27;
  v31 = outBuffer[32933];
  outBuffer[32929] = v30;
  v32 = outBuffer[32935];
  outBuffer[32935] = v29;
  v33 = outBuffer[32936];
  outBuffer[32932] = v32;
  v34 = outBuffer[32934];
  outBuffer[32934] = v31;
  v35 = outBuffer[32937];
  outBuffer[32933] = v34;
  v36 = outBuffer[32939];
  outBuffer[32939] = v33;
  v37 = outBuffer[32940];
  outBuffer[32936] = v36;
  v38 = outBuffer[32938];
  outBuffer[32938] = v35;
  v39 = outBuffer[32941];
  outBuffer[32937] = v38;
  outBuffer[32940] = outBuffer[32943];
  outBuffer[32941] = outBuffer[32942];
  outBuffer[32943] = v37;
  outBuffer[32942] = v39;
  v40 = outBuffer + 32944;
  v41 = 3;
  do {
    v42 = v40[3];
    v40[3] = *v40;
    *v40 = v42;
    v43 = v40[2];
    v40[2] = v40[1];
    v40[1] = v43;
    v40 += 4;
    --v41;
  } while (v41);
  v44 = outBuffer + 32956;
  outBufferb = 3;
  do {
    v45 = 3;
    do {
      v46 = v44[3];
      v44[3] = *v44;
      *v44 = v46;
      v47 = v44[2];
      v44[2] = v44[1];
      v44[1] = v47;
      sub_1002B970((int *)v44);
      if (!sub_1002BF40(*(_DWORD *)v44)) {
        sub_1002BF80(*(_DWORD *)v44);
        sub_10074DC0(2);
        dword_118AA0C4(*(_DWORD *)v44);
      }
      v44 += 4;
      --v45;
    } while (v45);
    --outBufferb;
  } while (outBufferb);
  sub_10074DC0(2);
  dword_118AA0C8(*(_DWORD *)v9 + 216, 0);
  dword_118AA0C8(*(_DWORD *)v9 + 108, 0);
  dword_118AA0C8(*(_DWORD *)v9 + 180, 0);
  v48 = *(_WORD **)(*(_DWORD *)v9 + 36 * (unsigned __int8)outBuffer[33051] + 4);
  v49 = (int *)(*(_DWORD *)v9 + 36 * (unsigned __int8)outBuffer[33051]);
  if (!v48 || dword_100AC300) {
    *((_DWORD *)outBuffer + 36) = 0;
    *((_DWORD *)outBuffer + 35) = 0;
    *((_DWORD *)outBuffer + 34) = 0;
    *((_DWORD *)outBuffer + 33) = 0;
    *((_DWORD *)outBuffer + 32) = 0;
  } else {
    v50 = *v49;
    dword_118AA0C8(v49, 1);
    *((_DWORD *)outBuffer + 32) = *v49;
    if (*(_DWORD *)&gUnk06594.gap1C8[12500] || *(_DWORD *)&gUnk06594.gap1C8[12508]) {
      v48[15] = 112;
      v48[10] = -32112;
    } else {
      v48[15] = 400;
      v48[10] = 416;
    }
    v51 = v48[15];
    v52 = v48[10];
    v48[14] = 400;
    v48[13] = v51;
    v48[9] = 416;
    v48[8] = v52;
    v48[12] = -32391;
    v48[7] = 16786;
    v48[11] = 27565;
    v48[6] = 12742;
    *((_DWORD *)outBuffer + 33) = dword_118AA084(*((_DWORD *)outBuffer + 32), v50, v48);
    v48[14] = 192;
    v48[13] = 192;
    v48[9] = 1273;
    v48[8] = 1273;
    v48[11] = 27565;
    v48[6] = 12742;
    *((_DWORD *)outBuffer + 34) = dword_118AA084(*((_DWORD *)outBuffer + 32), v50, v48);
    v53 = v48[15];
    v54 = v48[10];
    v48[14] = 400;
    v48[13] = v53;
    v48[9] = 416;
    v48[8] = v54;
    v48[11] = 14567;
    v48[6] = -257;
    *((_DWORD *)outBuffer + 35) = dword_118AA084(*((_DWORD *)outBuffer + 32), v50, v48);
    v48[9] = 1273;
    v48[14] = 192;
    v48[13] = 192;
    v48[8] = 1273;
    v48[11] = 14567;
    v48[6] = -257;
    *((_DWORD *)outBuffer + 36) = dword_118AA084(*((_DWORD *)outBuffer + 32), v50, v48);
  }
  v55 = outBuffer + 32994;
  v56 = 4;
  do {
    v57 = 3;
    do {
      v58 = v55[1];
      v55[1] = *(v55 - 2);
      *(v55 - 2) = v58;
      v59 = *v55;
      *v55 = *(v55 - 1);
      *(v55 - 1) = v59;
      v55 += 4;
      --v57;
    } while (v57);
    --v56;
  } while (v56);
  v60 = outBuffer[33055];
  outBuffer[33055] = outBuffer[33052];
  v61 = outBuffer[33053];
  outBuffer[33052] = v60;
  v62 = outBuffer[33054];
  outBuffer[33054] = v61;
  outBuffer[33053] = v62;
  return sub_1002B970((int *)outBuffer + 8263);
}
// 100AC300: using guessed type int dword_100AC300;
// 118AA084: using guessed type int (__cdecl *dword_118AA084)(_DWORD, _DWORD, _DWORD);
// 118AA0C4: using guessed type int (__cdecl *dword_118AA0C4)(_DWORD);
// 118AA0C8: using guessed type int (__cdecl *dword_118AA0C8)(_DWORD, _DWORD);

//----- (10037740) --------------------------------------------------------
int __cdecl ReadCarFileIntoBuffer(char *outBuffer, int carIndex) {
  int result;             // eax
  int v3;                 // [esp+10h] [ebp-504h]
  char buffer[256];       // [esp+14h] [ebp-500h] BYREF
  char carFilepath[1024]; // [esp+114h] [ebp-400h] BYREF

  gCarIndex = carIndex;
  if (outBuffer == byte_100C12A0) {
    car_LoadCarPaint(carIndex, 1);
  } else {
    v3 = dword_100B8C90;
    if (!dword_100B8C90)
      dword_100B8C90 = 1;
    car_LoadCarPaint(carIndex, 0);
  }
  dword_10AA3460 = 0;
  strcpy(carFilepath, kCarsSlash);
  strcat(carFilepath, gCarNames[carIndex]);
  strcat(carFilepath, kRCA);
  ReadFilenameToBuffer(outBuffer, carFilepath, -1);
  if (strncmp(outBuffer, kRCar, 4u)) {
    sprintf(buffer, "not a car file: %s", buffer);
    s_noreturn_10008CF0(buffer);
  }
  result = sub_100370D0(outBuffer);
  if (outBuffer != byte_100C12A0)
    dword_100B8C90 = v3;
  return result;
}
// 10037881: variable 'v3' is possibly undefined
// 100B84F8: using guessed type char *gCarNames[16];
// 100B8C90: using guessed type int dword_100B8C90;
// 10AA3444: using guessed type int gCarIndex;
// 10AA3460: using guessed type int dword_10AA3460;

//----- (100378B0) --------------------------------------------------------
void __cdecl ReadFilenameToBuffer(void *outBuffer, char *filename, int elementCount) {
  CHK_File *cFile;   // esi
  intptr_t filesize; // eax
  void *v5;          // [esp+0h] [ebp-204h]
  char Buffer[512];  // [esp+4h] [ebp-200h] BYREF

  if (!CHK_FileExists(filename)) {
    sprintf(Buffer, "File %s missing", filename);
    s_noreturn_10008CF0(Buffer);
  }
  cFile = CHK_FReadOpen(filename);
  filesize = elementCount;
  if (elementCount < 0)
    filesize = CHK_GetFileSize(cFile, v5);
  CHK_FReadReportError((void *)elementCount, 1u, filesize, cFile);
  CHK_FClose(cFile);
}
// 10037902: variable 'v5' is possibly undefined

//----- (10037930) --------------------------------------------------------
int __cdecl sub_10037930(int a1, _DWORD *a2, _DWORD *a3) {
  int v3;    // eax
  _DWORD *i; // ecx
  int v6;    // eax

  v3 = dword_10A99778 - 1;
  if (dword_10A99778 - 1 < 0)
    return 0;
  for (i = (_DWORD *)((char *)&MEMORY[0x106C7E7C] + 16 * v3); dword_10A9977C + a1 != *i; i -= 4) {
    if (--v3 < 0)
      return 0;
  }
  v6 = 4 * v3;
  *a2 = MEMORY[0x106C7E80][v6];
  *a3 = MEMORY[0x106C7E84][v6];
  return 1;
}
// 106C7E80: using guessed type int dword_106C7E80[];
// 10A99778: using guessed type int dword_10A99778;
// 10A9977C: using guessed type int dword_10A9977C;

//----- (10037990) --------------------------------------------------------
int __cdecl ParseHNDFile(char *hndFilepath) {
  CHK_File *v1;      // esi
  char Buffer[1024]; // [esp+4h] [ebp-400h] BYREF

  dword_10A99778 = 0;
  dword_11829848 = 3145728;
  if (CHK_FileExists(hndFilepath)) {
    v1 = CHK_FReadOpen(hndFilepath);
    if (CHK_ReadLine(Buffer, 1024, &v1->pfil)) {
      sscanf(Buffer, "%u", &dword_11829848);
      if (CHK_ReadLine(Buffer, 1024, &v1->pfil)) {
        do {
          sscanf(Buffer,
                 "%u %x %d %d",
                 (char *)&MEMORY[0x106C7E78] + 16 * dword_10A99778,
                 (char *)&MEMORY[0x106C7E7C] + 16 * dword_10A99778,
                 &MEMORY[0x106C7E80][4 * dword_10A99778],
                 &MEMORY[0x106C7E84][4 * dword_10A99778]);
          ++dword_10A99778;
        } while (dword_10A99778 < 256 && CHK_ReadLine(Buffer, 1024, &v1->pfil));
      }
    }
    CHK_FClose(v1);
  }
  return sub_1002A5A0();
}
// 106C7E80: using guessed type int dword_106C7E80[];
// 10A99778: using guessed type int dword_10A99778;
// 11829848: using guessed type int dword_11829848;

//----- (10037A90) --------------------------------------------------------
int __cdecl ParseHNDFileFromIndex(int trackIndex) {
  char trackHndFilepath[1024]; // [esp+8h] [ebp-400h] BYREF

  sprintf(trackHndFilepath, "%s%s", kTracksSlash, gTrackFilenames[trackIndex]);
  strcpy(strrchr(trackHndFilepath, 46), kHND);
  return ParseHNDFile(trackHndFilepath);
}
// 100B80B8: using guessed type char *gTrackFilenames[15];

//----- (10037B10) --------------------------------------------------------
int __cdecl LoadTrack(int trackIndex) {
  CHK_File *cFile;     // esi
  signed int filesize; // edi
  int trackInstances;  // eax
  int v4;              // edi
  int v5;              // esi
  double v6;           // st7
  double v7;           // st7
  int v8;              // ecx
  void *_;             // [esp+0h] [ebp-418h]
  int v11;             // [esp+14h] [ebp-404h] BYREF
  char *trackFilepath; // [esp+18h] [ebp-400h] BYREF
  int v13;             // [esp+1Ch] [ebp-3FCh]

  ParseHNDFileFromIndex(trackIndex);
  dword_10A9977C = -2147329024 - (_DWORD)&MEMORY[0x106C8E78];
  sub_1002B9A0(-2147329024, (int)&MEMORY[0x106C8E78]);
  sub_1002B9D0(1);
  strcpy((char *)&trackFilepath, kTracksSlash);
  strcat((char *)&trackFilepath, gTrackFilenames[trackIndex]);
  cFile = CHK_FReadOpen((const char *)&trackFilepath);
  filesize = CHK_GetFileSize(cFile, _);
  ParseTrackHeader((int)&MEMORY[0x106C7C48], cFile);
  if (filesize > 0x3D0900) // ~3.81 MiB
  {
    printf("Track %d is too big (%d vs. %d)\n", trackIndex, filesize, 0x3D0900);
    exit(1);
  }
  CHK_FReadReportError(&MEMORY[0x106C90A8], 1u, filesize - 560, cFile);
  CHK_FClose(cFile);
  sub_10038B20(&MEMORY[0x106C7C48]);
  ReadFilenameToBuffer(&lutBuffer, (&MEMORY[0x100BBB04])[95 * trackIndex], 32);
  ReadFilenameToBuffer(&lutBuffer_0, (&MEMORY[0x100BBB04])[95 * trackIndex] + 32, -1);
  ReadFilenameToBuffer(&ciBuffer, (&MEMORY[0x100BBB0C])[95 * trackIndex], 32);
  ReadFilenameToBuffer(&ciBuffer_0, (&MEMORY[0x100BBB0C])[95 * trackIndex] + 32, -1);
  sub_10073AC0();
  sub_10073B00();
  MEMORY[0x106C56EC] = (int)&MEMORY[0x106C8E78] - MEMORY[0x106C7C4C];
  dword_10690BEC = (int)&MEMORY[0x106C8E78] + MEMORY[0x106C7C48];
  sub_10037E10(&MEMORY[0x106C7C48]);
  trackInstances = MEMORY[0x106C7CAC];
  v4 = 0;
  dword_100AA89C = -1;
  dword_100AA8A0 = -1;
  if (MEMORY[0x106C7CAC] > 0) {
    v5 = 0;
    do {
      v11 = 1065353216;
      trackFilepath = 0;
      v13 = 0;
      sub_1003B3F0((float *)&v11, (float *)&v11, (float *)(v5 + MEMORY[0x106C7CA8]));
      v6 = sub_1003B170((float *)&v11);
      if (v6 != 0.0) {
        v7 = 1.0 / v6;
        v8 = MEMORY[0x106C7CA8];
        if (v7 * *(float *)(MEMORY[0x106C7CA8] + v5) == 1.0 &&
            *(float *)(MEMORY[0x106C7CA8] + v5 + 20) * v7 == 1.0 &&
            *(float *)(MEMORY[0x106C7CA8] + v5 + 40) * v7 == 1.0) {
          *(_BYTE *)(MEMORY[0x106C7CA8] + v5 + 77) |= 0x20u;
          v8 = MEMORY[0x106C7CA8];
        }
        *(float *)(v8 + v5 + 64) = v7;
      }
      trackInstances = MEMORY[0x106C7CAC];
      ++v4;
      v5 += 84;
    } while (v4 < MEMORY[0x106C7CAC]);
  }
  if (trackInstances > 2048) {
    printf("ERROR: instances (%d) > MAX_INSTANCES (%d)\n", trackInstances, 2048);
    exit(1);
  }
  if (MEMORY[0x106C7C4C] != 560) {
    printf("Error: Track header size mismatch(%d != %d)\n", MEMORY[0x106C7C4C], 560);
    exit(1);
  }
  sub_10061700();
  return sub_10070580(trackIndex);
}
// 10037BBA: variable '_' is possibly undefined
// 100AA89C: using guessed type int dword_100AA89C;
// 100AA8A0: using guessed type int dword_100AA8A0;
// 100B80B8: using guessed type char *off_100B80B8[15];
// 100BBB04: using guessed type char *pLutsArray;
// 100BBB0C: using guessed type char *ciArray;
// 10690BEC: using guessed type int dword_10690BEC;
// 106C56EC: using guessed type int dword_106C56EC;
// 106C7C48: using guessed type int g_TrackHeader;
// 106C7C4C: using guessed type int g_TrackHeaderSize;
// 106C7CA8: using guessed type int dword_106C7CA8;
// 106C7CAC: using guessed type int g_TrackInstances;
// 10A9977C: using guessed type int dword_10A9977C;

//----- (10037E10) --------------------------------------------------------
int __cdecl sub_10037E10(_DWORD *a1) {
  int v2;     // edi
  int v3;     // eax
  int v4;     // edx
  _WORD *v5;  // ecx
  int v6;     // eax
  int v7;     // ecx
  _WORD *v8;  // edx
  int v9;     // eax
  _BYTE *v10; // edx
  _WORD *i;   // eax

  sub_1002BA60((_BYTE *)a1[5], a1[4]);
  sub_1002BA80(a1[7], a1[6]);
  sub_1002B9E0((_BYTE *)a1[9], 4097);
  sub_1002B9E0((_BYTE *)a1[8], *(unsigned __int16 *)(a1[9] + 0x2000));
  v2 = 0;
  v3 = *(unsigned __int16 *)(a1[9] + 0x2000) - 1;
  if (v3 >= 1) {
    v4 = *(unsigned __int16 *)(a1[9] + 0x2000) - 1;
    v5 = (_WORD *)(a1[8] + 2 * v3);
    do {
      HIWORD(v6) = 0;
      if ((unsigned __int16)*v5 > v2) {
        LOWORD(v6) = *v5;
        v2 = v6;
      }
      --v5;
      --v4;
    } while (v4);
  }
  sub_1002B9E0((_BYTE *)a1[36], v2 + 1);
  v7 = 0;
  if (v2 >= 1) {
    v8 = (_WORD *)(a1[36] + 2 * v2);
    do {
      HIWORD(v9) = 0;
      if ((unsigned __int16)*v8 > v7) {
        LOWORD(v9) = *v8;
        v7 = v9;
      }
      --v8;
      --v2;
    } while (v2);
  }
  v10 = (_BYTE *)a1[35];
  for (i = &v10[2 * v7]; *i; ++v7)
    ++i;
  sub_1002B9E0(v10, v7);
  sub_10037FA0(a1);
  sub_1002BA00((_BYTE *)a1[3], a1[2]);
  sub_1002BF80(a1[20]);
  sub_10074DC0(4);
  if (gChosenWeather1 == 3)
    sub_10038450(a1[7], a1[6]);
  dword_118AA0C4(a1[20]);
  sub_10037FE0((int)a1);
  sub_10074DC0(1);
  dword_118AA0CC(a1[7], a1[6]);
  sub_1002B9E0((_BYTE *)a1[27], 4097);
  sub_1002B9E0((_BYTE *)a1[26], *(unsigned __int16 *)(a1[27] + 0x2000));
  sub_10038250((int)a1);
  return sub_10038410((int)a1);
}
// 104BBE08: using guessed type int dword_104BBE08;
// 118AA0C4: using guessed type int (__cdecl *dword_118AA0C4)(_DWORD);
// 118AA0CC: using guessed type int (__cdecl *dword_118AA0CC)(_DWORD, _DWORD);

//----- (10037FA0) --------------------------------------------------------
int __cdecl sub_10037FA0(_DWORD *a1) {
  int v1;               // edx
  int result;           // eax
  unsigned __int16 *v3; // ecx
  int v4;               // esi

  v1 = 0;
  result = *(unsigned __int16 *)(a1[9] + 0x2000);
  if ((unsigned __int16)result > 1u) {
    v3 = (unsigned __int16 *)(a1[8] + 2);
    v4 = result - 1;
    do {
      result = *v3;
      if (result > v1)
        v1 = *v3;
      ++v3;
      --v4;
    } while (v4);
  }
  a1[2] = v1 + 1;
  return result;
}

//----- (10037FE0) --------------------------------------------------------
int __cdecl sub_10037FE0(int a1) {
  int result; // eax
  _BYTE *v2;  // esi
  int i;      // edi

  result = *(_DWORD *)(a1 + 100);
  v2 = *(_BYTE **)(a1 + 96);
  for (i = 0; i < result; ++i) {
    sub_10038010(v2);
    result = *(_DWORD *)(a1 + 100);
    v2 += 84;
  }
  return result;
}

//----- (10038010) --------------------------------------------------------
int __cdecl sub_10038010(_BYTE *a1) {
  char v1;     // al
  char v2;     // al
  char v3;     // al
  char v4;     // al
  char v5;     // al
  char v6;     // al
  char v7;     // al
  char v8;     // al
  char v9;     // al
  char v10;    // al
  char v11;    // al
  char v12;    // al
  char v13;    // al
  char v14;    // al
  char v15;    // al
  char v16;    // al
  char v17;    // al
  char v18;    // al
  char v19;    // al
  char v20;    // al
  char v21;    // al
  char v22;    // al
  char v23;    // al
  char v24;    // al
  char v25;    // al
  char v26;    // al
  char v27;    // al
  char v28;    // al
  char v29;    // al
  char v30;    // cl
  char v31;    // al
  char v32;    // dl
  char v33;    // al
  char v34;    // cl
  char v35;    // al
  char v36;    // dl
  char v37;    // al
  char v38;    // cl
  char v39;    // dl
  char v40;    // al
  __int16 v41; // ax
  __int16 v42; // cx
  __int16 v43; // dx
  int v45;     // [esp-4h] [ebp-Ch]

  v1 = a1[3];
  a1[3] = *a1;
  *a1 = v1;
  v2 = a1[2];
  a1[2] = a1[1];
  a1[1] = v2;
  v3 = a1[7];
  a1[7] = a1[4];
  a1[4] = v3;
  v4 = a1[6];
  a1[6] = a1[5];
  a1[5] = v4;
  v5 = a1[11];
  a1[11] = a1[8];
  a1[8] = v5;
  v6 = a1[10];
  a1[10] = a1[9];
  a1[9] = v6;
  v7 = a1[15];
  a1[15] = a1[12];
  a1[12] = v7;
  v8 = a1[14];
  a1[14] = a1[13];
  a1[13] = v8;
  v9 = a1[19];
  a1[19] = a1[16];
  a1[16] = v9;
  v10 = a1[18];
  a1[18] = a1[17];
  a1[17] = v10;
  v11 = a1[23];
  a1[23] = a1[20];
  a1[20] = v11;
  v12 = a1[22];
  a1[22] = a1[21];
  a1[21] = v12;
  v13 = a1[27];
  a1[27] = a1[24];
  a1[24] = v13;
  v14 = a1[26];
  a1[26] = a1[25];
  a1[25] = v14;
  v15 = a1[31];
  a1[31] = a1[28];
  a1[28] = v15;
  v16 = a1[30];
  a1[30] = a1[29];
  a1[29] = v16;
  v17 = a1[35];
  a1[35] = a1[32];
  a1[32] = v17;
  v18 = a1[34];
  a1[34] = a1[33];
  a1[33] = v18;
  v19 = a1[39];
  a1[39] = a1[36];
  a1[36] = v19;
  v20 = a1[38];
  a1[38] = a1[37];
  a1[37] = v20;
  v21 = a1[43];
  a1[43] = a1[40];
  a1[40] = v21;
  v22 = a1[42];
  a1[42] = a1[41];
  a1[41] = v22;
  v23 = a1[47];
  a1[47] = a1[44];
  a1[44] = v23;
  v24 = a1[46];
  a1[46] = a1[45];
  a1[45] = v24;
  v25 = a1[51];
  a1[51] = a1[48];
  a1[48] = v25;
  v26 = a1[50];
  a1[50] = a1[49];
  a1[49] = v26;
  v27 = a1[55];
  a1[55] = a1[52];
  a1[52] = v27;
  v28 = a1[54];
  a1[54] = a1[53];
  a1[53] = v28;
  v29 = a1[59];
  a1[59] = a1[56];
  v30 = a1[60];
  a1[56] = v29;
  v31 = a1[58];
  a1[58] = a1[57];
  v32 = a1[61];
  a1[57] = v31;
  v33 = a1[63];
  a1[63] = v30;
  v34 = a1[64];
  a1[60] = v33;
  v35 = a1[62];
  a1[62] = v32;
  v36 = a1[65];
  a1[61] = v35;
  a1[64] = a1[67];
  a1[65] = a1[66];
  v37 = a1[71];
  a1[67] = v34;
  v38 = a1[68];
  a1[66] = v36;
  v39 = a1[69];
  a1[68] = v37;
  v40 = a1[70];
  a1[71] = v38;
  a1[70] = v39;
  a1[69] = v40;
  sub_1002B970((int *)a1 + 17);
  LOBYTE(v41) = a1[73];
  LOBYTE(v42) = a1[75];
  HIBYTE(v41) = a1[72];
  HIBYTE(v42) = a1[74];
  LOBYTE(v43) = a1[77];
  *((_WORD *)a1 + 36) = v41;
  HIBYTE(v43) = a1[76];
  *((_WORD *)a1 + 37) = v42;
  *((_WORD *)a1 + 38) = v43;
  LOBYTE(v41) = a1[79];
  HIBYTE(v41) = a1[78];
  LOBYTE(v42) = a1[81];
  HIBYTE(v42) = a1[80];
  LOBYTE(v43) = a1[83];
  *((_WORD *)a1 + 39) = v41;
  HIBYTE(v43) = a1[82];
  v45 = *((_DWORD *)a1 + 17);
  *((_WORD *)a1 + 40) = v42;
  *((_WORD *)a1 + 41) = v43;
  sub_1002BF80(v45);
  sub_1003445A((int)a1);
  sub_10074DC0(1);
  return dword_118AA0C4(*((_DWORD *)a1 + 17));
}
// 118AA0C4: using guessed type int (__cdecl *dword_118AA0C4)(_DWORD);

//----- (10038250) --------------------------------------------------------
int __cdecl sub_10038250(int a1) {
  int result; // eax
  int *v2;    // esi
  int i;      // edi
  char v4;    // cl
  char v5;    // dl
  char v6;    // al

  result = *(_DWORD *)(a1 + 124);
  v2 = *(int **)(a1 + 120);
  for (i = 0; i < result; ++i) {
    v4 = *(_BYTE *)v2;
    v5 = *((_BYTE *)v2 + 1);
    *(_BYTE *)v2 = *((_BYTE *)v2 + 3);
    v6 = *((_BYTE *)v2 + 2);
    *((_BYTE *)v2 + 3) = v4;
    *((_BYTE *)v2 + 2) = v5;
    *((_BYTE *)v2 + 1) = v6;
    sub_1002B970(v2);
    sub_100382A0((char *)*v2);
    result = *(_DWORD *)(a1 + 124);
    ++v2;
  }
  return result;
}

//----- (100382A0) --------------------------------------------------------
unsigned __int16 __cdecl sub_100382A0(char *a1) {
  char v1;                 // cl
  char v2;                 // dl
  char v3;                 // al
  char v4;                 // cl
  char v5;                 // dl
  char v6;                 // cl
  char v7;                 // cl
  char v8;                 // dl
  char v9;                 // cl
  char v10;                // cl
  char v11;                // dl
  char v12;                // cl
  __int16 v13;             // ax
  __int16 v14;             // cx
  int v15;                 // edi
  char *v16;               // ebx
  unsigned __int16 result; // ax

  v1 = *a1;
  v2 = a1[1];
  *a1 = a1[3];
  v3 = a1[2];
  a1[3] = v1;
  a1[2] = v2;
  a1[1] = v3;
  sub_1002B970((int *)a1);
  v4 = a1[7];
  a1[7] = a1[4];
  v5 = a1[5];
  a1[4] = v4;
  v6 = a1[6];
  a1[6] = v5;
  a1[5] = v6;
  sub_1002B970((int *)a1 + 1);
  v7 = a1[11];
  a1[11] = a1[8];
  v8 = a1[9];
  a1[8] = v7;
  v9 = a1[10];
  a1[10] = v8;
  a1[9] = v9;
  sub_1002B970((int *)a1 + 2);
  v10 = a1[15];
  a1[15] = a1[12];
  v11 = a1[13];
  a1[12] = v10;
  v12 = a1[14];
  a1[14] = v11;
  a1[13] = v12;
  sub_1002B970((int *)a1 + 3);
  LOBYTE(v13) = a1[21];
  LOBYTE(v14) = a1[23];
  HIBYTE(v13) = a1[20];
  HIBYTE(v14) = a1[22];
  *((_WORD *)a1 + 10) = v13;
  *((_WORD *)a1 + 11) = v14;
  sub_10038380(a1 + 24);
  v15 = 0;
  v16 = a1 + 64;
  do {
    sub_10038380(v16);
    result = *((_WORD *)a1 + 10);
    ++v15;
    v16 += 40;
  } while (v15 <= result);
  return result;
}

//----- (10038380) --------------------------------------------------------
char __cdecl sub_10038380(_BYTE *a1) {
  char v1;     // dl
  char v2;     // cl
  char result; // al

  sub_100383C0(a1);
  sub_100383C0(a1 + 12);
  sub_100383C0(a1 + 24);
  v1 = a1[36];
  v2 = a1[37];
  a1[36] = a1[39];
  result = a1[38];
  a1[39] = v1;
  a1[38] = v2;
  a1[37] = result;
  return result;
}

//----- (100383C0) --------------------------------------------------------
_BYTE *__cdecl sub_100383C0(_BYTE *a1) {
  _BYTE *result; // eax
  char v2;       // cl
  char v3;       // dl
  char v4;       // cl
  char v5;       // dl
  char v6;       // cl
  char v7;       // dl
  char v8;       // cl
  char v9;       // dl
  char v10;      // cl
  char v11;      // dl
  char v12;      // cl

  result = a1;
  v2 = a1[3];
  a1[3] = *a1;
  v3 = a1[1];
  *a1 = v2;
  v4 = a1[2];
  a1[2] = v3;
  v5 = a1[4];
  a1[1] = v4;
  v6 = a1[7];
  a1[7] = v5;
  v7 = a1[5];
  a1[4] = v6;
  v8 = a1[6];
  a1[6] = v7;
  v9 = a1[8];
  a1[5] = v8;
  v10 = a1[11];
  a1[11] = v9;
  v11 = a1[9];
  a1[8] = v10;
  v12 = a1[10];
  a1[10] = v11;
  a1[9] = v12;
  return result;
}

//----- (10038410) --------------------------------------------------------
int __cdecl sub_10038410(int a1) {
  int result; // eax
  _BYTE *v2;  // esi
  int i;      // edi

  result = *(_DWORD *)(a1 + 136);
  v2 = *(_BYTE **)(a1 + 132);
  for (i = 0; i < result; ++i) {
    sub_100383C0(v2);
    result = *(_DWORD *)(a1 + 136);
    v2 += 12;
  }
  return result;
}

//----- (10038450) --------------------------------------------------------
void __cdecl sub_10038450(int a1, int a2) {
  _DWORD *v2; // eax
  int v3;     // ebp
  void *v4;   // edi
  int v5;     // ecx
  int v6;     // edx
  int v7;     // ecx
  void *v8;   // edi

  if (a2 > 0) {
    v2 = (_DWORD *)(a1 + 8);
    v3 = a2;
    do {
      v4 = (void *)*(v2 - 2);
      if (v4) {
        v5 = v2[6];
        if ((v5 & 0x100000) != 0) {
          v6 = *v2;
          if (*(_WORD *)(*v2 + 2) == 2 && *(_DWORD *)(v6 + 8) == -1) {
              v7 = v5 & 0x3FFFF;
              if (v7) {
                  qmemcpy(v4, (const void *)(dword_10690BEC + *(_DWORD *)(v6 + 12)), v7);
                  v8 = (void *)*(v2 - 1);
                  if (v8)
                      qmemcpy(v8,
                              (const void *)(dword_10690BEC + *(_DWORD *)(*v2 + 16)),
                              (*(_DWORD *)((char *)v2 + -8 - a1 + MEMORY[0x106C7C64] + 32) &
                               0xF000000) != 0x1000000 ?
                                  512 :
                                  32);
              }
          }
        }
      }
      v2 += 9;
      --v3;
    } while (v3);
  }
}
// 10690BEC: using guessed type int dword_10690BEC;
// 106C7C64: using guessed type int dword_106C7C64;

//----- (10038510) --------------------------------------------------------
int __cdecl ParseTrackHeader(int outBuffer, CHK_File *fp) {
  unsigned __int16 v3;  // cx
  char v4;              // al
  unsigned __int16 v5;  // dx
  char v6;              // al
  char v7;              // al
  char v8;              // al
  char v9;              // al
  char v10;             // al
  char v11;             // al
  char v12;             // al
  char v13;             // al
  char v14;             // al
  char v15;             // al
  char v16;             // al
  char v17;             // al
  char v18;             // al
  char v19;             // al
  char v20;             // al
  char v21;             // al
  _BYTE *v22;           // eax
  int v23;              // ecx
  char v24;             // dl
  char v25;             // dl
  char v26;             // al
  char v27;             // al
  char v28;             // al
  char v29;             // al
  char v30;             // al
  char v31;             // al
  int v32;              // ecx
  char v33;             // al
  char v34;             // al
  unsigned __int16 v35; // dx
  char v36;             // al
  char v37;             // al
  char v38;             // al
  char v39;             // al
  char v40;             // al
  int v41;              // eax
  _BYTE *v42;           // eax
  char v43;             // cl
  char v44;             // cl
  char v45;             // cl
  char v46;             // cl
  char v47;             // cl
  char v48;             // cl
  char v49;             // cl
  char v50;             // cl
  char v51;             // cl
  char v52;             // cl
  unsigned __int16 v53; // ax
  int *Buffera;         // [esp+50h] [ebp+4h]
  int fpa;              // [esp+54h] [ebp+8h]

  CHK_FReadReportError((void *)outBuffer, 1u, 0x230u, fp);
  LOBYTE(v3) = *(_BYTE *)(outBuffer + 1);
  HIBYTE(v3) = *(_BYTE *)outBuffer;
  *(_DWORD *)outBuffer = *(unsigned __int8 *)(outBuffer + 3) |
                         ((*(unsigned __int8 *)(outBuffer + 2) | (v3 << 8)) << 8);
  LOBYTE(v3) = *(_BYTE *)(outBuffer + 5);
  HIBYTE(v3) = *(_BYTE *)(outBuffer + 4);
  *(_DWORD *)(outBuffer + 4) = *(unsigned __int8 *)(outBuffer + 7) |
                               ((*(unsigned __int8 *)(outBuffer + 6) | (v3 << 8)) << 8);
  LOBYTE(v3) = *(_BYTE *)(outBuffer + 9);
  HIBYTE(v3) = *(_BYTE *)(outBuffer + 8);
  *(_DWORD *)(outBuffer + 8) = *(unsigned __int8 *)(outBuffer + 11) |
                               ((*(unsigned __int8 *)(outBuffer + 10) | (v3 << 8)) << 8);
  LOBYTE(v3) = *(_BYTE *)(outBuffer + 15);
  Buffera = (int *)(outBuffer + 12);
  *(_BYTE *)(outBuffer + 15) = *(_BYTE *)(outBuffer + 12);
  *(_BYTE *)(outBuffer + 12) = v3;
  v4 = *(_BYTE *)(outBuffer + 14);
  *(_BYTE *)(outBuffer + 14) = *(_BYTE *)(outBuffer + 13);
  *(_BYTE *)(outBuffer + 13) = v4;
  LOBYTE(v5) = *(_BYTE *)(outBuffer + 17);
  HIBYTE(v5) = *(_BYTE *)(outBuffer + 16);
  *(_DWORD *)(outBuffer + 16) = *(unsigned __int8 *)(outBuffer + 19) |
                                ((*(unsigned __int8 *)(outBuffer + 18) | (v5 << 8)) << 8);
  LOBYTE(v3) = *(_BYTE *)(outBuffer + 23);
  *(_BYTE *)(outBuffer + 23) = *(_BYTE *)(outBuffer + 20);
  *(_BYTE *)(outBuffer + 20) = v3;
  v6 = *(_BYTE *)(outBuffer + 22);
  *(_BYTE *)(outBuffer + 22) = *(_BYTE *)(outBuffer + 21);
  *(_BYTE *)(outBuffer + 21) = v6;
  LOBYTE(v5) = *(_BYTE *)(outBuffer + 25);
  HIBYTE(v5) = *(_BYTE *)(outBuffer + 24);
  *(_DWORD *)(outBuffer + 24) = *(unsigned __int8 *)(outBuffer + 27) |
                                ((*(unsigned __int8 *)(outBuffer + 26) | (v5 << 8)) << 8);
  LOBYTE(v3) = *(_BYTE *)(outBuffer + 31);
  *(_BYTE *)(outBuffer + 31) = *(_BYTE *)(outBuffer + 28);
  *(_BYTE *)(outBuffer + 28) = v3;
  v7 = *(_BYTE *)(outBuffer + 30);
  *(_BYTE *)(outBuffer + 30) = *(_BYTE *)(outBuffer + 29);
  *(_BYTE *)(outBuffer + 29) = v7;
  LOBYTE(v3) = *(_BYTE *)(outBuffer + 35);
  *(_BYTE *)(outBuffer + 35) = *(_BYTE *)(outBuffer + 32);
  *(_BYTE *)(outBuffer + 32) = v3;
  v8 = *(_BYTE *)(outBuffer + 34);
  *(_BYTE *)(outBuffer + 34) = *(_BYTE *)(outBuffer + 33);
  *(_BYTE *)(outBuffer + 33) = v8;
  LOBYTE(v3) = *(_BYTE *)(outBuffer + 39);
  *(_BYTE *)(outBuffer + 39) = *(_BYTE *)(outBuffer + 36);
  *(_BYTE *)(outBuffer + 36) = v3;
  v9 = *(_BYTE *)(outBuffer + 38);
  *(_BYTE *)(outBuffer + 38) = *(_BYTE *)(outBuffer + 37);
  *(_BYTE *)(outBuffer + 37) = v9;
  v10 = *(_BYTE *)(outBuffer + 43);
  *(_BYTE *)(outBuffer + 43) = *(_BYTE *)(outBuffer + 40);
  *(_BYTE *)(outBuffer + 40) = v10;
  v11 = *(_BYTE *)(outBuffer + 42);
  *(_BYTE *)(outBuffer + 42) = *(_BYTE *)(outBuffer + 41);
  *(_BYTE *)(outBuffer + 41) = v11;
  v12 = *(_BYTE *)(outBuffer + 47);
  *(_BYTE *)(outBuffer + 47) = *(_BYTE *)(outBuffer + 44);
  *(_BYTE *)(outBuffer + 44) = v12;
  v13 = *(_BYTE *)(outBuffer + 46);
  *(_BYTE *)(outBuffer + 46) = *(_BYTE *)(outBuffer + 45);
  *(_BYTE *)(outBuffer + 45) = v13;
  v14 = *(_BYTE *)(outBuffer + 51);
  *(_BYTE *)(outBuffer + 51) = *(_BYTE *)(outBuffer + 48);
  *(_BYTE *)(outBuffer + 48) = v14;
  v15 = *(_BYTE *)(outBuffer + 50);
  *(_BYTE *)(outBuffer + 50) = *(_BYTE *)(outBuffer + 49);
  *(_BYTE *)(outBuffer + 49) = v15;
  v16 = *(_BYTE *)(outBuffer + 55);
  *(_BYTE *)(outBuffer + 55) = *(_BYTE *)(outBuffer + 52);
  *(_BYTE *)(outBuffer + 52) = v16;
  v17 = *(_BYTE *)(outBuffer + 54);
  *(_BYTE *)(outBuffer + 54) = *(_BYTE *)(outBuffer + 53);
  *(_BYTE *)(outBuffer + 53) = v17;
  v18 = *(_BYTE *)(outBuffer + 59);
  *(_BYTE *)(outBuffer + 59) = *(_BYTE *)(outBuffer + 56);
  *(_BYTE *)(outBuffer + 56) = v18;
  v19 = *(_BYTE *)(outBuffer + 58);
  *(_BYTE *)(outBuffer + 58) = *(_BYTE *)(outBuffer + 57);
  *(_BYTE *)(outBuffer + 57) = v19;
  v20 = *(_BYTE *)(outBuffer + 63);
  *(_BYTE *)(outBuffer + 63) = *(_BYTE *)(outBuffer + 60);
  *(_BYTE *)(outBuffer + 60) = v20;
  v21 = *(_BYTE *)(outBuffer + 62);
  *(_BYTE *)(outBuffer + 62) = *(_BYTE *)(outBuffer + 61);
  *(_BYTE *)(outBuffer + 61) = v21;
  v22 = (_BYTE *)(outBuffer + 64);
  v23 = 4;
  do {
    v24 = v22[3];
    v22[3] = *v22;
    *v22 = v24;
    v25 = v22[2];
    v22[2] = v22[1];
    v22[1] = v25;
    v22 += 4;
    --v23;
  } while (v23);
  v26 = *(_BYTE *)(outBuffer + 83);
  *(_BYTE *)(outBuffer + 83) = *(_BYTE *)(outBuffer + 80);
  *(_BYTE *)(outBuffer + 80) = v26;
  v27 = *(_BYTE *)(outBuffer + 82);
  *(_BYTE *)(outBuffer + 82) = *(_BYTE *)(outBuffer + 81);
  *(_BYTE *)(outBuffer + 81) = v27;
  v28 = *(_BYTE *)(outBuffer + 87);
  *(_BYTE *)(outBuffer + 87) = *(_BYTE *)(outBuffer + 84);
  *(_BYTE *)(outBuffer + 84) = v28;
  v29 = *(_BYTE *)(outBuffer + 86);
  *(_BYTE *)(outBuffer + 86) = *(_BYTE *)(outBuffer + 85);
  *(_BYTE *)(outBuffer + 85) = v29;
  v30 = *(_BYTE *)(outBuffer + 91);
  *(_BYTE *)(outBuffer + 91) = *(_BYTE *)(outBuffer + 88);
  *(_BYTE *)(outBuffer + 88) = v30;
  v31 = *(_BYTE *)(outBuffer + 90);
  *(_BYTE *)(outBuffer + 90) = *(_BYTE *)(outBuffer + 89);
  *(_BYTE *)(outBuffer + 89) = v31;
  v32 = *(unsigned __int8 *)(outBuffer + 95);
  *(_BYTE *)(outBuffer + 95) = *(_BYTE *)(outBuffer + 92);
  *(_BYTE *)(outBuffer + 92) = v32;
  v33 = *(_BYTE *)(outBuffer + 94);
  *(_BYTE *)(outBuffer + 94) = *(_BYTE *)(outBuffer + 93);
  *(_BYTE *)(outBuffer + 93) = v33;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 99);
  *(_BYTE *)(outBuffer + 99) = *(_BYTE *)(outBuffer + 96);
  *(_BYTE *)(outBuffer + 96) = v32;
  v34 = *(_BYTE *)(outBuffer + 98);
  *(_BYTE *)(outBuffer + 98) = *(_BYTE *)(outBuffer + 97);
  *(_BYTE *)(outBuffer + 97) = v34;
  LOBYTE(v35) = *(_BYTE *)(outBuffer + 101);
  HIBYTE(v35) = *(_BYTE *)(outBuffer + 100);
  *(_DWORD *)(outBuffer + 100) = *(unsigned __int8 *)(outBuffer + 103) |
                                 ((*(unsigned __int8 *)(outBuffer + 102) | (v35 << 8)) << 8);
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 107);
  *(_BYTE *)(outBuffer + 107) = *(_BYTE *)(outBuffer + 104);
  *(_BYTE *)(outBuffer + 104) = v32;
  v36 = *(_BYTE *)(outBuffer + 106);
  *(_BYTE *)(outBuffer + 106) = *(_BYTE *)(outBuffer + 105);
  *(_BYTE *)(outBuffer + 105) = v36;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 111);
  *(_BYTE *)(outBuffer + 111) = *(_BYTE *)(outBuffer + 108);
  *(_BYTE *)(outBuffer + 108) = v32;
  v37 = *(_BYTE *)(outBuffer + 110);
  *(_BYTE *)(outBuffer + 110) = *(_BYTE *)(outBuffer + 109);
  *(_BYTE *)(outBuffer + 109) = v37;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 115);
  *(_BYTE *)(outBuffer + 115) = *(_BYTE *)(outBuffer + 112);
  *(_BYTE *)(outBuffer + 112) = v32;
  v38 = *(_BYTE *)(outBuffer + 114);
  *(_BYTE *)(outBuffer + 114) = *(_BYTE *)(outBuffer + 113);
  *(_BYTE *)(outBuffer + 113) = v38;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 119);
  *(_BYTE *)(outBuffer + 119) = *(_BYTE *)(outBuffer + 116);
  *(_BYTE *)(outBuffer + 116) = v32;
  v39 = *(_BYTE *)(outBuffer + 118);
  *(_BYTE *)(outBuffer + 118) = *(_BYTE *)(outBuffer + 117);
  *(_BYTE *)(outBuffer + 117) = v39;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 123);
  *(_BYTE *)(outBuffer + 123) = *(_BYTE *)(outBuffer + 120);
  *(_BYTE *)(outBuffer + 120) = v32;
  v40 = *(_BYTE *)(outBuffer + 122);
  LOBYTE(v35) = *(_BYTE *)(outBuffer + 125);
  *(_BYTE *)(outBuffer + 122) = *(_BYTE *)(outBuffer + 121);
  HIBYTE(v35) = *(_BYTE *)(outBuffer + 124);
  *(_BYTE *)(outBuffer + 121) = v40;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 135);
  *(_DWORD *)(outBuffer + 124) = *(unsigned __int8 *)(outBuffer + 127) |
                                 ((*(unsigned __int8 *)(outBuffer + 126) | (v35 << 8)) << 8);
  *(_BYTE *)(outBuffer + 135) = *(_BYTE *)(outBuffer + 132);
  *(_BYTE *)(outBuffer + 132) = v32;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 133);
  LOBYTE(v35) = *(_BYTE *)(outBuffer + 137);
  *(_BYTE *)(outBuffer + 133) = *(_BYTE *)(outBuffer + 134);
  HIBYTE(v35) = *(_BYTE *)(outBuffer + 136);
  v41 = *(unsigned __int8 *)(outBuffer + 138);
  *(_BYTE *)(outBuffer + 134) = v32;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 143);
  *(_DWORD *)(outBuffer + 136) = *(unsigned __int8 *)(outBuffer + 139) | ((v41 | (v35 << 8)) << 8);
  LOBYTE(v35) = *(_BYTE *)(outBuffer + 140);
  *(_BYTE *)(outBuffer + 140) = v32;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 141);
  *(_BYTE *)(outBuffer + 141) = *(_BYTE *)(outBuffer + 142);
  *(_BYTE *)(outBuffer + 142) = v32;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 147);
  *(_BYTE *)(outBuffer + 143) = v35;
  LOBYTE(v35) = *(_BYTE *)(outBuffer + 144);
  *(_BYTE *)(outBuffer + 144) = v32;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 145);
  LOBYTE(v41) = *(_BYTE *)(outBuffer + 146);
  *(_BYTE *)(outBuffer + 147) = v35;
  *(_BYTE *)(outBuffer + 146) = v32;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 151);
  LOBYTE(v35) = *(_BYTE *)(outBuffer + 148);
  *(_BYTE *)(outBuffer + 145) = v41;
  *(_BYTE *)(outBuffer + 151) = v35;
  *(_BYTE *)(outBuffer + 148) = v32;
  LOBYTE(v32) = *(_BYTE *)(outBuffer + 149);
  *(_BYTE *)(outBuffer + 149) = *(_BYTE *)(outBuffer + 150);
  *(_BYTE *)(outBuffer + 150) = v32;
  v42 = (_BYTE *)(outBuffer + 152);
  fpa = 10;
  do {
    v43 = v42[3];
    v42[3] = *v42;
    *v42 = v43;
    v44 = v42[2];
    v42[2] = v42[1];
    v42[1] = v44;
    v45 = v42[7];
    v42[7] = v42[4];
    v42[4] = v45;
    v46 = v42[6];
    v42[6] = v42[5];
    v42[5] = v46;
    v47 = v42[11];
    v42[11] = v42[8];
    v42[8] = v47;
    v48 = v42[10];
    v42[10] = v42[9];
    v42[9] = v48;
    v49 = v42[15];
    v42[15] = v42[12];
    v42[12] = v49;
    v50 = v42[14];
    v42[14] = v42[13];
    v42[13] = v50;
    v51 = v42[19];
    v42[19] = v42[16];
    v42[16] = v51;
    v52 = v42[18];
    v42[18] = v42[17];
    v42[17] = v52;
    v42 += 20;
    --fpa;
  } while (fpa);
  LOBYTE(v53) = *(_BYTE *)(outBuffer + 353);
  HIBYTE(v53) = *(_BYTE *)(outBuffer + 352);
  *(_DWORD *)(outBuffer + 352) = *(unsigned __int8 *)(outBuffer + 355) |
                                 ((*(unsigned __int8 *)(outBuffer + 354) | (v53 << 8)) << 8);
  sub_1002B970(Buffera);
  sub_1002B970((int *)(outBuffer + 20));
  sub_1002B970((int *)(outBuffer + 28));
  sub_1002B970((int *)(outBuffer + 32));
  sub_1002B970((int *)(outBuffer + 36));
  sub_1002B970((int *)(outBuffer + 80));
  sub_1002B970((int *)(outBuffer + 84));
  sub_1002B970((int *)(outBuffer + 88));
  sub_1002B970((int *)(outBuffer + 92));
  sub_1002B970((int *)(outBuffer + 96));
  sub_1002B970((int *)(outBuffer + 104));
  sub_1002B970((int *)(outBuffer + 108));
  sub_1002B970((int *)(outBuffer + 112));
  sub_1002B970((int *)(outBuffer + 116));
  sub_1002B970((int *)(outBuffer + 120));
  sub_1002B970((int *)(outBuffer + 132));
  sub_1002B970((int *)(outBuffer + 140));
  sub_1002B970((int *)(outBuffer + 144));
  return sub_1002B970((int *)(outBuffer + 148));
}

//----- (10038B20) --------------------------------------------------------
int __cdecl sub_10038B20(_BYTE *a1) {
  _BYTE *v1;            // ebx
  unsigned __int16 v2;  // ax
  int v3;               // ebp
  int result;           // eax
  _BYTE *v5;            // esi
  char v6;              // al
  char v7;              // al
  char v8;              // al
  char v9;              // al
  char v10;             // al
  char v11;             // al
  unsigned __int16 v12; // ax
  int v13;              // eax
  _BYTE *v14;           // edi
  int v15;              // ebx
  char v16;             // al
  char v17;             // al
  _BYTE *v18;           // edi
  int v19;              // ebx
  unsigned __int16 v20; // ax
  int v21;              // [esp+8h] [ebp-4h]

  v1 = a1;
  LOBYTE(v2) = a1[549];
  HIBYTE(v2) = a1[548];
  v3 = 0;
  result = (unsigned __int8)a1[551] | (((unsigned __int8)a1[550] | (v2 << 8)) << 8);
  v21 = 0;
  *((_DWORD *)a1 + 137) = result;
  if (result > 0) {
    v5 = a1 + 361;
    do {
      switch (v5[3]) {
      case 0:
      case 1:
      case 2:
        v6 = *(v5 - 2);
        *(v5 - 2) = *(v5 - 5);
        *(v5 - 5) = v6;
        v7 = *(v5 - 3);
        *(v5 - 3) = *(v5 - 4);
        *(v5 - 4) = v7;
        v8 = v5[2];
        v5[2] = *(v5 - 1);
        *(v5 - 1) = v8;
        v9 = v5[1];
        v5[1] = *v5;
        *v5 = v9;
        break;
      case 3:
      case 6:
      case 7:
        HIBYTE(v20) = *(v5 - 5);
        LOBYTE(v20) = *(v5 - 4);
        *(_DWORD *)(v5 - 5) =
            (unsigned __int8)*(v5 - 2) | (((unsigned __int8)*(v5 - 3) | (v20 << 8)) << 8);
        break;
      case 4:
        v10 = *(v5 - 2);
        *(v5 - 2) = *(v5 - 5);
        *(v5 - 5) = v10;
        v11 = *(v5 - 3);
        *(v5 - 3) = *(v5 - 4);
        *(v5 - 4) = v11;
        sub_1002B970((int *)(v5 - 5));
        HIBYTE(v12) = *(v5 - 1);
        LOBYTE(v12) = *v5;
        v13 = (unsigned __int8)v5[2] | (((unsigned __int8)v5[1] | (v12 << 8)) << 8);
        *(_DWORD *)(v5 - 1) = v13;
        v14 = *(_BYTE **)(v5 - 5);
        v3 = v13;
        if (v13 > 0) {
          v15 = v13;
          do {
              sub_100383C0(v14);
              v14 += 12;
              --v15;
          } while (v15);
          v1 = a1;
        }
        break;
      case 5:
        v16 = *(v5 - 2);
        *(v5 - 2) = *(v5 - 5);
        *(v5 - 5) = v16;
        v17 = *(v5 - 3);
        *(v5 - 3) = *(v5 - 4);
        *(v5 - 4) = v17;
        sub_1002B970((int *)(v5 - 5));
        v18 = *(_BYTE **)(v5 - 5);
        if (v3 > 0) {
          v19 = v3;
          do {
              sub_100383C0(v18);
              v18 += 12;
              --v19;
          } while (v19);
          v1 = a1;
        }
        break;
      default:
        break;
      }
      result = v21 + 1;
      v5 += 12;
      ++v21;
    } while (v21 < *((_DWORD *)v1 + 137));
  }
  return result;
}

//----- (10038CB0) --------------------------------------------------------
HRESULT __cdecl SetupDirectPlayPlayer(#503 * u1) {
  DPLCONNECTION *dplConnection;     // ebx
  HRESULT hr;                       // ebp
  HGLOBAL mem;                      // eax
  IDirectPlay4A *dplay4a_copy;      // eax
  HGLOBAL mem2;                     // eax
  HGLOBAL mem3;                     // eax
  DWORD old_dwFlags;                // esi
  DWORD createPlayerFlags;          // esi
  DWORD idPlayer_copy;              // ecx
  const char *user3;                // edi
  IDirectPlay4A *dplay4a;           // [esp+60h] [ebp-10h] BYREF
  IDirectPlayLobby3A *dplayLobby3a; // [esp+64h] [ebp-Ch] BYREF
  DWORD dwConnSize;                 // [esp+68h] [ebp-8h] BYREF
  DWORD idPlayer;                   // [esp+6Ch] [ebp-4h] BYREF

  dplay4a = 0;
  dplayLobby3a = 0;
  dplConnection = 0;
  hr = CoCreateInstance(
      &CLSID_DirectPlayLobby, 0, 1u, &IID_IDirectPlayLobby3A, (LPVOID *)&dplayLobby3a);
  if (hr < 0)
    goto LABEL_5;
  hr = dplayLobby3a->lpVtbl->GetConnectionSettings(dplayLobby3a, 0, 0, &dwConnSize);
  if (hr != -2005467106)
    goto LABEL_5;
  mem = GlobalAlloc(GHND, dwConnSize);
  dplConnection = (DPLCONNECTION *)GlobalLock(mem);
  if (!dplConnection) {
    hr = -2147024882;
  LABEL_5:
    dplay4a_copy = dplay4a;
    goto LABEL_6;
  }
  hr = dplayLobby3a->lpVtbl->GetConnectionSettings(dplayLobby3a, 0, dplConnection, &dwConnSize);
  if (hr < 0)
    goto LABEL_5;
  old_dwFlags = (unsigned __int8)dplConnection->dwFlags;
  dplConnection->lpSessionDesc->dwFlags = DPSESSION_KEEPALIVE | DPSESSION_MIGRATEHOST;
  dplConnection->lpSessionDesc->dwUser1 = 8;
  createPlayerFlags = (old_dwFlags >> 1) & 1;
  hr = dplayLobby3a->lpVtbl->SetConnectionSettings(dplayLobby3a, 0, 0, dplConnection);
  if (hr < 0)
    goto LABEL_5;
  hr = dplayLobby3a->lpVtbl->ConnectEx(dplayLobby3a, 0, &IID_IDirectPlay4A, (LPVOID *)&dplay4a, 0);
  if (hr < 0)
    goto LABEL_5;
  hr = dplay4a->lpVtbl->CreatePlayer((IDirectPlay4AVtbl *)dplay4a,
                                     &idPlayer,
                                     dplConnection->lpPlayerName,
                                     (HANDLE) * ((_DWORD *)u1 + 1),
                                     0,
                                     0,
                                     createPlayerFlags != 0 ? DPENUMPLAYERS_SERVERPLAYER : 0);
  if (hr < 0)
    goto LABEL_5;
  idPlayer_copy = idPlayer;
  *(_DWORD *)u1 = dplay4a;
  *((_DWORD *)u1 + 2) = idPlayer_copy;
  *((_DWORD *)u1 + 3) = (dplConnection->dwFlags & DPLCONNECTION_CREATESESSION) != 0;
  strcpy(dplay4aShortName, dplConnection->lpPlayerName->lpszShortName);
  user3 = (const char *)dplConnection->lpSessionDesc->dwUser3;
  if (user3)
    strcpy(g_lpSessionDesc_dwUser3, user3);
  dplay4a_copy = 0;
  dplay4a = 0;
LABEL_6:
  if (dplay4a_copy)
    dplay4a_copy->lpVtbl->Release(dplay4a_copy);
  if (dplayLobby3a)
    dplayLobby3a->lpVtbl->Release(dplayLobby3a);
  if (dplConnection) {
    mem2 = GlobalHandle(dplConnection);
    GlobalUnlock(mem2);
    mem3 = GlobalHandle(dplConnection);
    GlobalFree(mem3);
  }
  return hr;
}
// 10090870: using guessed type IID IID_IDirectPlay4A;

//----- (10038E80) --------------------------------------------------------
int sub_10038E80() {
  unknown_libname_7();
  return atexit(unknown_libname_8);
}

//----- (10038EC0) --------------------------------------------------------
int sub_10038EC0() {
  int result;                 // eax
  HGLOBAL v1;                 // eax
  HRESULT hr;                 // esi
  SIZE_T pMetric;             // [esp+10h] [ebp-18h] BYREF
  DSBUFFERDESC1 dsBufferDesc; // [esp+14h] [ebp-14h] BYREF

  meth_Pod_SetPodFilename(&gPod, kBossRallyPod);
  meth_Pod_ReadPodFile(&gPod);
  sub_1006AA20(1);
  thunk_LoadDamageBitmaps();
  input_10078CD0();
  input_100770F0();
  if (gPlayMusic) {
    pm_sub_100025C0(gHwnd);
    sub_10060D90();
    pm_sub_100027C0(2);
  }
  result = gPlaysfx;
  if (gPlaysfx) {
    if (++dword_118290FC != 1)
      return 1;
    memset(dword_11828F08, 0, sizeof(dword_11828F08));
    sub_10073060();
    if (acmMetrics(0, 0x32u, &pMetric))
      return 0;
    v1 = GlobalAlloc(GMEM_ZEROINIT, pMetric);
    result = (int)GlobalLock(v1);
    pMem = (#514 *)result;
    if (result) {
      *(_WORD *)result = 1;
      *((_WORD *)pMem + 1) = 2;
      *((_DWORD *)pMem + 1) = 22050;
      *((_DWORD *)pMem + 2) = 88200;
      *((_WORD *)pMem + 6) = 4;
      *((_WORD *)pMem + 7) = 16;
      *((_WORD *)pMem + 8) = 0;
      hr = CoCreateInstance(
          &CLSID_CLSID_DirectSound, 0, 1u, &CLSID_IDirectSound, (LPVOID *)&g_DSound);
      if (hr < 0 || !g_DSound)
        return hr >= 0;
      hr = g_DSound->lpVtbl->Initialize(g_DSound, 0);
      if (hr >= 0) {
        hr = g_DSound->lpVtbl->SetCooperativeLevel(g_DSound, gHwnd, 2);
        if (hr >= 0) {
          dsBufferDesc.dwSize = 20;
          dsBufferDesc.dwBufferBytes = 0;
          dsBufferDesc.dwFlags = 1;
          dsBufferDesc.dwReserved = 0;
          dsBufferDesc.lpwfxFormat = 0;
          hr = g_DSound->lpVtbl->CreateSoundBuffer(
              g_DSound, (LPCDSBUFFERDESC)&dsBufferDesc, &g_dSoundBuffer, 0);
          if (hr >= 0) {
              hr = g_dSoundBuffer->lpVtbl->Play(g_dSoundBuffer, 0, 0, 1);
              if (hr >= 0)
                  return hr >= 0;
              g_dSoundBuffer->lpVtbl->Release(g_dSoundBuffer);
              g_dSoundBuffer = 0;
          }
        }
      }
      g_DSound->lpVtbl->Release(g_DSound);
      g_DSound = 0;
      return hr >= 0;
    }
  }
  return result;
}
// 100736FE: conditional instruction was optimized away because of 'esi.4<0'
// 10061400: using guessed type int sub_10061400(void);
// 100940A4: using guessed type int g_Playmusic;
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10038F30) --------------------------------------------------------
void __cdecl __noreturn cleanUpAndExitWithCode(int Code) {
  void *v1; // ecx

  if (gUnkC8Ptr1 && dword_100AC300) {
    *((_DWORD *)gUnkC8Ptr1 + 26) = 0;
    (*(void(__thiscall **)(void *, _DWORD))(*(_DWORD *)gUnkC8Ptr1 + 24))(gUnkC8Ptr1, 0);
  }
  sub_1002C4A0();
  sub_10016990();
  if (dword_10B501CC)
    dword_10B501CC();
  input_10079550();
  input_10078BC0();
  input_10078DB0();
  ReleaseDirectSound();
  if (gNetworkPlay)
    np_sub_10005BE0();
  sub_1003BFD0();
  sub_1003BF60();
  if (gPlayMusic)
    pm_sub_10002CF0();
  meth_DebugPrint(v1);
  if (dword_118AA0D0)
    dword_118AA0D0();
  if (dword_10690A28)
    dword_10690A28();
  car_10061620();
  meth_Pod_CleanUpPod(&gPod);
  sub_1002AEA0();
  ReleaseBRString();
  CoUninitialize();
  exit(Code);
}
// 10038FAB: variable 'v1' is possibly undefined
// 100940A4: using guessed type int g_Playmusic;
// 100AC300: using guessed type int dword_100AC300;
// 1022AF18: using guessed type int g_NetworkPlay;
// 10690A28: using guessed type int (*dword_10690A28)(void);
// 10B501CC: using guessed type int (*dword_10B501CC)(void);
// 118AA0D0: using guessed type int (*dword_118AA0D0)(void);

//----- (10039000) --------------------------------------------------------
int sub_10039000() {
  memset(&gGameMode1, 0, 0x118u);
  gGameMode1 = 8;
  return sub_10035BD1();
}
// 10039000: using guessed type int sub_10039000();
// 10220B20: using guessed type int dword_10220B20;

//----- (10039020) --------------------------------------------------------
void __thiscall meth_10039020(int this) {
  __int16 v2;         // ax
  unsigned __int8 v4; // c0
  unsigned __int8 v5; // c3
  int v6;             // eax
  double v7;          // st7
  unsigned int v8;    // esi
  __int16 v9;         // dx
  __int16 v10;        // cx
  int v11;            // eax
  int v12;            // ecx
  double v13;         // st7
  float v14;          // [esp+0h] [ebp-28h]
  float v15;          // [esp+0h] [ebp-28h]
  float v16;          // [esp+14h] [ebp-14h]
  float v17;          // [esp+18h] [ebp-10h]
  float v18;          // [esp+18h] [ebp-10h]
  int v19[3];         // [esp+1Ch] [ebp-Ch] BYREF

  v2 = sub_1003BD50();
  *(float *)(this + 4188) =
      ((double)(v2 & 0x1FFF) * 0.000015258789 - *(float *)(this + 3620) * -0.001 - -1.0) *
          *(float *)&dword_106C2CFC +
      *(float *)(this + 4188);
  if (!(v4 | v5)) {
    v6 = (unsigned __int16)dword_10A99BA8;
    if ((_WORD)dword_10A99BA8) {
      v7 = *(float *)(this + 3620) * 0.001;
      v8 = 32 * (unsigned __int16)dword_10A99BA8;
      *(_DWORD *)(this + 4188) = 0;
      v9 = dword_10A99BB0;
      v17 = v7;
      v10 = word_10A99BD4[16 * v6];
      LOWORD(dword_10A99BB0) = v6;
      LOWORD(dword_10A99BA8) = v10;
      word_10A99BD4[v8 / 2] = v9;
      v14 = -1.5 - v17;
      sub_1003ACE0((int)&flt_10A99BC4[8 * v6], this, v14);
      sub_1003AEE0((float *)v19, (float *)(this + 240), (float *)this);
      sub_1003AFE0((int)v19, (int)v19, this + 32, 0.2);
      sub_1003AFE0((int)v19, (int)v19, this + 16, 0.2);
      v16 = (double)(unsigned __int16)sub_1003BD50() * 0.000015259022;
      sub_1003AEE0(&flt_10A99BB8[v8 / 4], (float *)(this + 4192), (float *)v19);
      v15 = v16 * v16;
      sub_1003AFE0((int)&flt_10A99BB8[v8 / 4], (int)v19, (int)&flt_10A99BB8[v8 / 4], v15);
      v11 = v19[1];
      v12 = v19[2];
      v13 = v17 * 0.1 - -1.0;
      *(_DWORD *)(this + 4192) = v19[0];
      *(_DWORD *)(this + 4196) = v11;
      *(_DWORD *)(this + 4200) = v12;
      v18 = v13;
      flt_10A99BD0[v8 / 4] = v13 * 0.15000001;
      byte_10A99BD6[v8] = (__int64)(1.0 / (sub_1003B170((float *)(this + 4132)) + v18) * 255.0);
      byte_10A99BD7[v8] = -1;
    }
  }
}
// 10039070: variable 'v4' is possibly undefined
// 10039070: variable 'v5' is possibly undefined
// 106C2CFC: using guessed type int dword_106C2CFC;
// 10A99BA8: using guessed type int dword_10A99BA8;
// 10A99BB0: using guessed type int dword_10A99BB0;
// 10A99BB8: using guessed type float flt_10A99BB8[];
// 10A99BC4: using guessed type float flt_10A99BC4[];
// 10A99BD0: using guessed type float flt_10A99BD0[];
// 10A99BD4: using guessed type __int16 word_10A99BD4[];

//----- (10039200) --------------------------------------------------------
int __thiscall meth_10039200(int this) {
  int result;          // eax
  double v3;           // st7
  double v4;           // st7
  _WORD *v5;           // ebx
  int v6;              // ecx
  float *v7;           // esi
  unsigned __int8 v9;  // c0
  unsigned __int8 v10; // c3
  int v11;             // edx
  int v12;             // eax
  int v13;             // ebp
  int v14;             // ebx
  double v15;          // st7
  float v16;           // ecx
  float v17;           // edx
  float v18;           // edx
  float v19;           // eax
  double v20;          // st7
  __int64 v21;         // rax
  double v22;          // st7
  double v23;          // st7
  bool v24;            // cc
  float v25;           // [esp+0h] [ebp-84h]
  float v26;           // [esp+0h] [ebp-84h]
  int v27;             // [esp+14h] [ebp-70h]
  float v28;           // [esp+18h] [ebp-6Ch]
  int v29;             // [esp+1Ch] [ebp-68h]
  int v30;             // [esp+20h] [ebp-64h]
  int *v31;            // [esp+24h] [ebp-60h]
  float v32;           // [esp+28h] [ebp-5Ch]
  int *v33;            // [esp+2Ch] [ebp-58h]
  int v34;             // [esp+30h] [ebp-54h]
  int v35;             // [esp+34h] [ebp-50h]
  int v36;             // [esp+34h] [ebp-50h]
  _WORD *v37;          // [esp+38h] [ebp-4Ch]
  int v38;             // [esp+3Ch] [ebp-48h]
  float v39;           // [esp+40h] [ebp-44h]
  float v40;           // [esp+44h] [ebp-40h]
  int v41;             // [esp+48h] [ebp-3Ch]
  float v42;           // [esp+4Ch] [ebp-38h]
  int v43;             // [esp+50h] [ebp-34h] BYREF
  float v44;           // [esp+54h] [ebp-30h]
  float v45;           // [esp+58h] [ebp-2Ch]
  int v46[2];          // [esp+5Ch] [ebp-28h] BYREF
  float v47;           // [esp+64h] [ebp-20h]
  int v48;             // [esp+68h] [ebp-1Ch]
  float v49;           // [esp+6Ch] [ebp-18h]
  float v50;           // [esp+70h] [ebp-14h]
  int v51[4];          // [esp+74h] [ebp-10h] BYREF

  v38 = 0;
  if (*(_DWORD *)(this + 10572) && (*(_BYTE *)(*(_DWORD *)&gUnk06594.gap4918[16] +
                                               84 * *(unsigned __int16 *)(this + 10508) + 76) &
                                    0x10) != 0) {
    v38 = 1;
  }
  if (!*(_DWORD *)&gUnk06594.gap1C8[12504] || (result = gChosenTrack, gChosenTrack == 2) ||
      gChosenTrack == 8) {
    v3 = *(float *)(this + 4144) - -50.0;
    v51[1] = this + 1404;
    v51[0] = this + 2452;
    v51[2] = this + 880;
    v51[3] = this + 1928;
    v42 = (1.0 - 50.0 / v3) * 3.0;
    v4 = sub_1003AC90((float *)this, (float *)(this + 4132));
    if (v4 < 0.0)
      v4 = -v4;
    v33 = v51;
    v37 = (_WORD *)(this + 9856);
    v5 = (_WORD *)(this + 8998);
    v6 = this + 4268;
    v27 = 0;
    v7 = (float *)(this + 4416);
    v35 = this + 8998;
    v31 = (int *)(this + 112);
    v29 = this + 4332;
    v34 = this + 4268;
    v40 = (1.0 - 25.0 / (25.0 - v4 * -2.24)) * 3.0;
    while (1) {
      v32 = *(float *)(v6 + 32) - *(float *)&dword_106C2CFC * -4.0;
      *(float *)(v6 + 32) = v32;
      if (v9 | v10) {
        v30 = 1;
        *(_DWORD *)(v6 + 48) = 0;
        v11 = 1;
      } else {
        v11 = 0;
        v30 = 0;
        if (v32 < 1.7)
          *(_DWORD *)(v6 + 32) = 0;
        else
          *(float *)(v6 + 32) = v32 - 1.0;
        *(_DWORD *)(v6 + 48) = 1;
      }
      v12 = *v33;
      if (*(_DWORD *)(*v33 + 436)) {
        *(_DWORD *)v6 = 1077936128;
        *(_DWORD *)(v6 + 16) = *(char *)(v12 + 416);
      } else if (*(float *)v6 != 0.0) {
        *(float *)v6 = *(float *)v6 - 1.0;
      }
      v13 = *(_DWORD *)(v6 + 16);
      if (*(float *)v6 == 0.0) {
      LABEL_52:
        sub_1003B090(v46);
        v18 = *((float *)v31 + 1);
        v19 = *((float *)v31 + 2);
        v43 = *v31;
        v44 = v18;
        v45 = v19;
        goto LABEL_53;
      }
      if (v11) {
        v28 = 1.5;
      } else if (v13 == 4) {
        v28 = 2.5;
      } else {
        if (v13 != 3 || !*(_DWORD *)&gUnk06594.gap1C8[12508] || v38)
          goto LABEL_52;
        v28 = 1.5;
        *(_DWORD *)(v6 + 32) = 1089994752;
      }
      if (!v11) {
        sub_1003ACE0((int)v46, this + 32, v28);
        if (v13 == 3) {
          sub_1003AD10((int)v46, v40);
          if (v40 == 0.0)
              goto LABEL_42;
          if (v27 >= 2)
              v47 = v47 + v47;
          v14 = this + 16;
          v15 = sub_1003AC90((float *)(this + 16), (float *)(this + 4132)) * 0.30000001;
        } else {
          if (v27 && v27 < 3) {
              v39 = -v28;
              sub_1003B020((int)v46, this + 16, v39);
          } else {
              sub_1003B020((int)v46, this + 16, v28);
          }
          sub_1003AD10((int)v46, v42);
          sub_1003B020((int)v46, this + 4132, 0.30000001);
          v14 = this + 16;
          v15 = sub_1003AC90((float *)(this + 16), (float *)(this + 4132)) * 0.5;
        }
        v25 = v15;
        sub_1003B020((int)v46, v14, v25);
        v5 = (_WORD *)v35;
      }
    LABEL_42:
      sub_1003AFE0((int)&v43, (int)v31, this + 32, -0.25);
      if (v13 != 3 || v27 < 2) {
        if (!v27 || (v41 = -1105618534, v27 >= 3))
          v41 = 1041865114;
        sub_1003B020((int)&v43, this + 16, *(float *)&v41);
      }
      v48 = v43;
      v49 = v44;
      v50 = v45;
      if (!v30 && sub_1003B130((float *)&v43, (float *)v29) < 256.0) {
        v36 = (unsigned __int16)sub_1003BD50();
        v26 = (double)v36 * 0.000015259022 * ((double)v36 * 0.000015259022);
        sub_1003AFA0((int)&v43, v29, (int)&v43, v26);
      }
      v16 = v49;
      *(_DWORD *)v29 = v48;
      v17 = v50;
      *(float *)(v29 + 4) = v16;
      *(float *)(v29 + 8) = v17;
    LABEL_53:
      if (!v30) {
        v20 = *(float *)&v46[1] * 127.0;
        *v5 = (__int64)(*(float *)v46 * 127.0);
        v21 = (__int64)v20;
        v22 = v47 * 127.0;
        v5[1] = v21;
        v5[2] = (__int64)v22;
        if (v13 == 3 && *(_DWORD *)&gUnk06594.gap1C8[12508]) {
          *(v5 - 3) = *v5;
          *(v5 - 2) = v5[1];
        } else {
          *(v5 - 3) = (__int16)*v5 >> 1;
          *(v5 - 2) = (__int16)v5[1] >> 1;
        }
        *(v5 - 1) = 0;
      }
      v23 = *(float *)&v43;
      *v37 = v13;
      *v7 = (float)(__int16)(__int64)((v23 - *(float *)(this + 9928)) * 127.0);
      v7[1] = (float)(__int16)(__int64)((v44 - *(float *)(this + 9932)) * 127.0);
      v5 += 108;
      v29 += 12;
      v7[2] = (float)(__int16)(__int64)((v45 - *(float *)(this + 9936)) * 127.0);
      v35 = (int)v5;
      *(v7 - 8) = *v7;
      *(v7 - 7) = v7[1];
      *(v7 - 6) = v7[2];
      result = v27 + 1;
      ++v33;
      v31 += 16;
      v7 += 288;
      v24 = ++v27 < 4;
      v34 += 4;
      v37 += 9;
      if (!v24)
        return result;
      v6 = v34;
    }
  }
  return result;
}
// 100394A1: conditional instruction was optimized away because of 'ebp.4!=3'
// 10039356: variable 'v9' is possibly undefined
// 10039356: variable 'v10' is possibly undefined
// 100B380C: using guessed type int gChosenTrack;
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (100397C0) --------------------------------------------------------
int sub_100397C0() {
  __int64 v0;   // rax
  int v1;       // ebx
  double v2;    // st7
  double v3;    // st7
  double v4;    // st7
  _WORD *v5;    // ecx
  float *v6;    // edx
  double v7;    // st6
  double v8;    // st7
  double v9;    // st6
  double v10;   // st7
  double v11;   // st7
  double v12;   // st6
  double v13;   // st7
  double v14;   // st6
  int v15;      // eax
  int v16;      // ebp
  int v17;      // eax
  int v18;      // ecx
  double v19;   // st7
  __int16 *v20; // esi
  double v21;   // st7
  double v22;   // st7
  double v23;   // st5
  double v24;   // st6
  double v25;   // st7
  bool v26;     // cc
  int v28;      // [esp+4h] [ebp-84h]
  int v29;      // [esp+4h] [ebp-84h]
  int v30;      // [esp+8h] [ebp-80h]
  _WORD *v31;   // [esp+8h] [ebp-80h]
  int v32;      // [esp+Ch] [ebp-7Ch]
  _DWORD *v33;  // [esp+10h] [ebp-78h]
  int v34;      // [esp+14h] [ebp-74h]
  float v35;    // [esp+18h] [ebp-70h]
  int v36;      // [esp+1Ch] [ebp-6Ch]
  int *i;       // [esp+20h] [ebp-68h]
  float v38;    // [esp+24h] [ebp-64h]
  float v39;    // [esp+28h] [ebp-60h]
  int v40;      // [esp+2Ch] [ebp-5Ch]
  char *v41;    // [esp+30h] [ebp-58h]
  int v42;      // [esp+34h] [ebp-54h]
  int v43;      // [esp+38h] [ebp-50h]
  int v44;      // [esp+3Ch] [ebp-4Ch]
  __int16 v45;  // [esp+40h] [ebp-48h]
  int v46;      // [esp+44h] [ebp-44h]
  int v47[16];  // [esp+48h] [ebp-40h] BYREF

  v32 = (__int64)(*(float *)&dword_106C2CFC * 4096.0);
  v0 = (__int64)(*(float *)&dword_106C2CFC * 9.8100004 * 127.0);
  v45 = v0;
  if (!dword_106909B4 && dword_106909E0 != 2) {
    LODWORD(v0) = dword_100B36F8;
    v43 = 0;
    if (dword_100B36F8 > 0) {
      for (i = &dword_10ACD4F8;; i += 32) {
        v1 = *i;
        if (*i)
          break;
      LABEL_48:
        LODWORD(v0) = v43 + 1;
        v26 = ++v43 < dword_100B36F8;
        if (!v26)
          return v0;
      }
      v40 = (__int16)(__int64)((*(float *)(v1 + 9928) - *(float *)(v1 + 48)) * 127.0);
      v2 = (double)v40;
      v38 = v2;
      v42 = (__int16)(__int64)((*(float *)(v1 + 9932) - *(float *)(v1 + 52)) * 127.0);
      v44 = (__int16)(__int64)((*(float *)(v1 + 9936) - *(float *)(v1 + 56)) * 127.0);
      *(float *)&v30 = *(float *)(v1 + 9928) - v2 * 0.0078740157;
      *(float *)(v1 + 9928) = *(float *)&v30;
      v3 = (double)v42;
      v39 = v3;
      *(float *)&v28 = *(float *)(v1 + 9932) - v3 * 0.0078740157;
      *(float *)(v1 + 9932) = *(float *)&v28;
      v4 = (double)v44;
      v35 = v4;
      *(float *)&v36 = *(float *)(v1 + 9936) - v4 * 0.0078740157;
      *(float *)(v1 + 9936) = *(float *)&v36;
      sub_10031140((_DWORD *)(v1 + 9940), v30, v28, v36);
      sub_100310F0((int)v47, 0.0078740157, 1006699012, 1006699012);
      sub_100306C0((float *)v47, (float *)(v1 + 9940), (float *)(v1 + 9940));
      v5 = (_WORD *)(v1 + 9856);
      v41 = (char *)(v1 + 9016);
      v34 = 0;
      v33 = (_DWORD *)(v1 + 4316);
      v31 = (_WORD *)(v1 + 9856);
      v6 = (float *)(v1 + 4404);
      while (1) {
        if (!*v33)
          goto LABEL_30;
        if (!*v5)
          break;
        if (*v5 != 3) {
          if (*v5 == 4) {
              if (gChosenTrack == 2 || gChosenTrack == 8) {
                  if (MEMORY[0x106C6620]) {
                      *v6 = 70.0;
                      v6[1] = 100.0;
                      v6[2] = 100.0;
                      v6[8] = 215.0;
                      v6[9] = 235.0;
                      v6[10] = 195.0;
                  } else {
                      *v6 = 50.0;
                      v6[1] = 100.0;
                      v6[2] = 95.0;
                      v6[8] = 210.0;
                      v6[9] = 240.0;
                      v6[10] = 190.0;
                  }
              } else if (gChosenTrack == 3 || gChosenTrack == 9) {
                  *v6 = 16.0;
                  v6[1] = 16.0;
                  v6[2] = 0.0;
                  v6[8] = 64.0;
                  v6[9] = 64.0;
                  v6[10] = 16.0;
              } else {
                  *v6 = 48.0;
                  v6[1] = 24.0;
                  v6[2] = 8.0;
                  v6[8] = 128.0;
                  v6[9] = 96.0;
                  v6[10] = 64.0;
              }
              if (MEMORY[0x106C6624]) {
                  v7 = v6[2] * -0.5;
                  v8 = 32.0 - v6[1] * -0.5;
                  *v6 = 32.0 - *v6 * -0.5;
                  v6[1] = v8;
                  v6[2] = 32.0 - v7;
                  v9 = v6[10] * -0.5;
                  v10 = 32.0 - v6[9] * -0.5;
                  v6[8] = 32.0 - v6[8] * -0.5;
                  v6[9] = v10;
                  v6[10] = 32.0 - v9;
              } else if (MEMORY[0x106C661C]) {
                  v11 = v6[1] * 0.5;
                  v12 = v6[2] * 0.5;
                  *v6 = *v6 * 0.5;
                  v6[1] = v11;
                  v6[2] = v12;
                  v13 = v6[9] * 0.5;
                  v14 = v6[10] * 0.5;
                  v6[8] = v6[8] * 0.5;
                  v6[9] = v13;
                  v6[10] = v14;
              }
              goto LABEL_29;
          }
        LABEL_26:
          *v5 = -1;
          v6[8] = v6[40];
          v6[9] = v6[41];
          v6[10] = v6[42];
          *v6 = v6[32];
          v6[1] = v6[33];
          v15 = *((_DWORD *)v6 + 34);
        LABEL_28:
          *((_DWORD *)v6 + 2) = v15;
          goto LABEL_29;
        }
        if (!MEMORY[0x106C6624])
          goto LABEL_26;
        *v6 = 100.0;
        v6[1] = 104.0;
        v6[2] = 108.0;
        v6[8] = 160.0;
        v6[9] = 168.0;
        v6[10] = 176.0;
      LABEL_29:
        qmemcpy(v6 + 27, v6 - 5, 0x80u);
        qmemcpy(v41, v41 - 24, 0x18u);
        v31[1] = *v31;
      LABEL_30:
        v16 = 8;
        v17 = v34 + 4928;
        v29 = v34 + 4928;
        do {
          if (v16 == 1 || *v33) {
              qmemcpy((void *)(v1 + ((v16 + v34) << 7) + 4384),
                      (const void *)(v1 + ((v16 + v34) << 7) + 4256),
                      0x80u);
              v29 = v17;
              qmemcpy((void *)(v1 + 24 * (v16 + v34) + 8992),
                      (const void *)(v1 + 24 * (v16 + v34) + 8968),
                      0x18u);
              *(_WORD *)(v1 + 2 * (v16 + v17)) = *(_WORD *)(v1 + 2 * (v16 + v17) - 2);
          }
          v46 = *(__int16 *)(v1 + 2 * (v16 + v29));
          v18 = v1 + ((v16 + v34) << 7);
          if (v46 == 3) {
              *(_DWORD *)(v18 + 4396) = 1149370368;
              *(_DWORD *)(v18 + 4428) = 1098907648;
          } else {
              *(_DWORD *)(v18 + 4396) = 1098907648;
              *(_DWORD *)(v18 + 4428) = 1149370368;
          }
          v19 = (double)(v16 << 11);
          *(float *)(v18 + 4400) = v19;
          *(float *)(v18 + 4432) = v19;
          if (v46 == -1 || v16 == 1 || v16 == 2 && *v33) {
              v22 = v39 + *(float *)(v18 + 4388);
              v23 = v35 + *(float *)(v18 + 4392);
              *(float *)(v18 + 4384) = *(float *)(v18 + 4384) + v38;
              *(float *)(v18 + 4388) = v22;
              *(float *)(v18 + 4392) = v23;
              v24 = v39 + *(float *)(v18 + 4420);
              v25 = v35 + *(float *)(v18 + 4424);
              *(float *)(v18 + 4416) = *(float *)(v18 + 4416) + v38;
              *(float *)(v18 + 4420) = v24;
              *(float *)(v18 + 4424) = v25;
          } else if (v16 != 8) {
              v20 = (__int16 *)(v1 + 24 * (v16 + v34));
              *(float *)(v18 + 4384) =
                  (double)(v40 + ((v32 * v20[4496]) >> 12)) + *(float *)(v18 + 4384);
              *(float *)(v18 + 4388) =
                  (double)(v42 + ((v32 * v20[4497]) >> 12)) + *(float *)(v18 + 4388);
              *(float *)(v18 + 4392) = v35 + *(float *)(v18 + 4392);
              *(float *)(v18 + 4416) =
                  (double)(v40 + ((v32 * v20[4499]) >> 12)) + *(float *)(v18 + 4416);
              *(float *)(v18 + 4420) =
                  (double)(v42 + ((v32 * v20[4500]) >> 12)) + *(float *)(v18 + 4420);
              v21 = (double)(v44 + ((v20[4501] * v32) >> 12)) + *(float *)(v18 + 4424);
              *(float *)(v18 + 4424) = v21;
              if (v21 >= *(float *)(v18 + 4392)) {
                  v17 = v34 + 4928;
                  v20[4501] -= v45;
              } else {
                  *(_DWORD *)(v18 + 4424) = *(_DWORD *)(v18 + 4392);
                  v17 = v34 + 4928;
              }
          }
          --v16;
        } while (v16 > 0);
        v41 += 216;
        v6 += 288;
        v5 = v31 + 9;
        v26 = v34 + 9 < 36;
        v31 += 9;
        ++v33;
        v34 += 9;
        if (!v26)
          goto LABEL_48;
      }
      v6[8] = 48.0;
      *v6 = 48.0;
      v6[9] = 32.0;
      v6[1] = 32.0;
      v15 = 1098907648;
      v6[10] = 16.0;
      goto LABEL_28;
    }
  }
  return v0;
}
// 100B36F8: using guessed type int dword_100B36F8;
// 100B380C: using guessed type int g_chosenTrack;
// 106909B4: using guessed type int dword_106909B4;
// 106909E0: using guessed type int dword_106909E0;
// 106C2CFC: using guessed type int dword_106C2CFC;
// 106C661C: using guessed type int dword_106C661C;
// 106C6620: using guessed type int dword_106C6620;
// 106C6624: using guessed type int dword_106C6624;
// 10ACD4F8: using guessed type int dword_10ACD4F8;

//----- (10039F20) --------------------------------------------------------
void __thiscall meth_10039F20(int this) {
  int v2;             // ebx
  unsigned __int8 v4; // c0
  unsigned __int8 v5; // c3
  int v6;             // ecx
  char v7;            // al
  int v8;             // eax
  unsigned int v9;    // edi
  __int16 v10;        // cx
  __int16 v11;        // dx
  float v12;          // [esp+0h] [ebp-48h]
  int v13;            // [esp+14h] [ebp-34h]
  int v14;            // [esp+18h] [ebp-30h]
  float v15;          // [esp+1Ch] [ebp-2Ch]
  float *v16;         // [esp+20h] [ebp-28h]
  float v17;          // [esp+24h] [ebp-24h]
  int v18;            // [esp+28h] [ebp-20h]
  float v19;          // [esp+2Ch] [ebp-1Ch]
  float v20;          // [esp+30h] [ebp-18h]
  float v21;          // [esp+34h] [ebp-14h]
  int v22[4];         // [esp+38h] [ebp-10h]

  if (*(_BYTE *)(this + 877) && *(float *)(this + 4144) > 40.0) {
    v2 = 0;
    v17 = *(float *)&dword_106C2CFC * 0.5 - *(float *)(this + 4144) * -0.00066006603;
    do {
      *(float *)(this + 4 * v2 + 4204) =
          (double)*(unsigned __int8 *)(this + 877) * 0.029999999 * v17 +
          *(float *)(this + 4 * v2 + 4204);
      if (!(v4 | v5)) {
        v22[0] = this + 2452;
        v22[1] = this + 1404;
        v22[2] = this + 880;
        v22[3] = this + 1928;
        v6 = v22[v2];
        *(_DWORD *)(this + 4 * v2 + 4204) = 0;
        if (*(_DWORD *)(v6 + 436)) {
          v7 = *(_BYTE *)(v6 + 416);
          if (v7 > 0 && v7 <= 3) {
              v8 = (unsigned __int16)dword_10A99BA8;
              if ((_WORD)dword_10A99BA8) {
                  v9 = 32 * (unsigned __int16)dword_10A99BA8;
                  LOWORD(dword_10A99BA8) = word_10A99BD4[v9 / 2];
                  if (*(_BYTE *)(v6 + 416) == 3) {
                      v11 = dword_10A99BB4;
                      LOWORD(dword_10A99BB4) = v8;
                      word_10A99BD4[16 * v8] = v11;
                  } else {
                      v10 = dword_10A99BAC;
                      LOWORD(dword_10A99BAC) = v8;
                      word_10A99BD4[16 * v8] = v10;
                  }
                  sub_1003ACE0((int)&flt_10A99BC4[v9 / 4], this + 4132, 0.2);
                  v13 = 1048576000;
                  if (v2 >= 2)
                      v13 = 0x40000000;
                  sub_1003B020((int)&flt_10A99BC4[v9 / 4], this + 32, *(float *)&v13);
                  if (v2 < 2) {
                      v14 = -1090519040;
                      if (!v2)
                          v14 = 1056964608;
                      sub_1003B020((int)&flt_10A99BC4[v9 / 4], this + 16, *(float *)&v14);
                  }
                  sub_1003AF10(&flt_10A99BC4[v9 / 4], (float *)this);
                  v15 = 1.0 - 50.0 / (*(float *)(this + 4144) - -50.0);
                  sub_1003AD10((int)&flt_10A99BC4[v9 / 4], v15);
                  sub_1003AEE0(
                      &flt_10A99BB8[v9 / 4], (float *)((v2 << 6) + this + 112), (float *)this);
                  flt_10A99BC0[v9 / 4] = flt_10A99BC0[v9 / 4] - *(float *)(this + 10644) * -0.5;
                  v19 = flt_10A99BB8[v9 / 4];
                  v20 = flt_10A99BB8[v9 / 4 + 1];
                  v21 = flt_10A99BB8[v9 / 4 + 2];
                  v16 = (float *)(this + 12 * v2 + 4220);
                  if (sub_1003B130(&flt_10A99BB8[v9 / 4], v16) < 256.0) {
                      v18 = (unsigned __int16)sub_1003BD50();
                      v12 = (double)v18 * 0.000015259022 * ((double)v18 * 0.000015259022);
                      sub_1003AFA0(
                          (int)&flt_10A99BB8[v9 / 4], (int)v16, (int)&flt_10A99BB8[v9 / 4], v12);
                  }
                  *v16 = v19;
                  *(float *)(this + 12 * v2 + 4224) = v20;
                  *(float *)(this + 12 * v2 + 4228) = v21;
                  flt_10A99BD0[v9 / 4] = 0.40000001;
                  byte_10A99BD6[v9] = 25;
                  byte_10A99BD7[v9] = (__int64)(16.0 - v15 * -167.3);
              }
          }
        }
      }
      ++v2;
    } while (v2 < 4);
  }
}
// 10039FA0: variable 'v4' is possibly undefined
// 10039FA0: variable 'v5' is possibly undefined
// 106C2CFC: using guessed type int dword_106C2CFC;
// 10A99BA8: using guessed type int dword_10A99BA8;
// 10A99BAC: using guessed type int dword_10A99BAC;
// 10A99BB4: using guessed type int dword_10A99BB4;
// 10A99BB8: using guessed type float flt_10A99BB8[];
// 10A99BC0: using guessed type float flt_10A99BC0[];
// 10A99BC4: using guessed type float flt_10A99BC4[];
// 10A99BD0: using guessed type float flt_10A99BD0[];
// 10A99BD4: using guessed type __int16 word_10A99BD4[];

//----- (1003A200) --------------------------------------------------------
void sub_1003A200() {
  int v0;      // ebp
  int v1;      // esi
  int v2;      // ebx
  __int16 *v3; // edi
  double v4;   // st7
  __int16 *v5; // [esp+4h] [ebp-Ch]
  float v6;    // [esp+8h] [ebp-8h]

  v0 = (unsigned __int16)dword_10A99BB0;
  v5 = (__int16 *)&dword_10A99BB0;
  v6 = *(float *)&dword_106C2CFC * 0.30000001;
  if ((_WORD)dword_10A99BB0) {
    do {
      v1 = 8 * v0;
      v2 = (unsigned __int16)word_10A99BD4[16 * v0];
      v3 = &word_10A99BD4[16 * v0];
      flt_10A99BD0[v1] = v6 + flt_10A99BD0[8 * v0];
      v4 = (double)((unsigned __int8)byte_10A99BD6[32 * v0] *
                    (unsigned __int8)byte_10A99BD7[32 * v0]) *
           0.000015318628;
      flt_10A99BB8[v1] = flt_10A99BC4[8 * v0] * v4 * *(float *)&dword_106C2CFC + flt_104B2560 +
                         flt_10A99BB8[8 * v0];
      flt_10A99BBC[v1] = flt_10A99BC8[8 * v0] * v4 * *(float *)&dword_106C2CFC + flt_104B2564 +
                         flt_10A99BBC[8 * v0];
      flt_10A99BC0[v1] = (flt_10A99BCC[8 * v0] * v4 - -0.80000001) * *(float *)&dword_106C2CFC +
                         *(float *)&dword_104B2568 + flt_10A99BC0[8 * v0];
      byte_10A99BD6[32 * v0] = (__int64)(5.7375007 / (flt_10A99BD0[8 * v0] * flt_10A99BD0[8 * v0]));
      if (v4 >= 0.03125) {
        v5 = &word_10A99BD4[16 * v0];
      } else {
        *v5 = *v3;
        *v3 = dword_10A99BA8;
        LOWORD(dword_10A99BA8) = v0;
      }
      v0 = v2;
    } while (v2);
  }
}
// 104B2560: using guessed type float flt_104B2560;
// 104B2564: using guessed type float flt_104B2564;
// 104B2568: using guessed type int dword_104B2568;
// 106C2CFC: using guessed type int dword_106C2CFC;
// 10A99BA8: using guessed type int dword_10A99BA8;
// 10A99BB0: using guessed type int dword_10A99BB0;
// 10A99BB8: using guessed type float flt_10A99BB8[];
// 10A99BBC: using guessed type float flt_10A99BBC[];
// 10A99BC0: using guessed type float flt_10A99BC0[];
// 10A99BC4: using guessed type float flt_10A99BC4[];
// 10A99BC8: using guessed type float flt_10A99BC8[];
// 10A99BCC: using guessed type float flt_10A99BCC[];
// 10A99BD0: using guessed type float flt_10A99BD0[];
// 10A99BD4: using guessed type __int16 word_10A99BD4[];

//----- (1003A340) --------------------------------------------------------
int sub_1003A340() {
  double v0;   // st7
  int result;  // eax
  int v2;      // edi
  int v3;      // esi
  int v4;      // ebp
  __int16 *v5; // ebx
  double v6;   // st5
  double v7;   // st6
  int *v8;     // [esp+10h] [ebp-Ch]
  int v9;      // [esp+14h] [ebp-8h]

  v0 = *(float *)&dword_106C2CFC * 0.69999999;
  result = 0;
  v9 = 0;
  do {
    if (result) {
      LOWORD(v2) = dword_10A99BAC;
      v8 = &dword_10A99BAC;
    } else {
      LOWORD(v2) = dword_10A99BB4;
      v8 = &dword_10A99BB4;
    }
    v2 = (unsigned __int16)v2;
    if ((_WORD)v2) {
      do {
        v3 = 8 * v2;
        v4 = (unsigned __int16)word_10A99BD4[16 * v2];
        v5 = &word_10A99BD4[16 * v2];
        flt_10A99BD0[v3] = v0 + flt_10A99BD0[8 * v2];
        v6 = *(float *)&dword_106C2CFC * 19.620001;
        v7 = (double)((unsigned __int8)byte_10A99BD6[32 * v2] *
                      (unsigned __int8)byte_10A99BD7[32 * v2]) *
             0.000015318628;
        flt_10A99BB8[v3] = flt_10A99BC4[8 * v2] * v7 * *(float *)&dword_106C2CFC + flt_104B2560 +
                           flt_10A99BB8[8 * v2];
        flt_10A99BBC[v3] = flt_10A99BC8[8 * v2] * v7 * *(float *)&dword_106C2CFC + flt_104B2564 +
                           flt_10A99BBC[8 * v2];
        flt_10A99BC0[v3] = (v7 * flt_10A99BCC[8 * v2] - -0.80000001) * *(float *)&dword_106C2CFC +
                           *(float *)&dword_104B2568 + flt_10A99BC0[8 * v2];
        flt_10A99BCC[v3] = flt_10A99BCC[8 * v2] - v6;
        byte_10A99BD6[32 * v2] = (__int64)(102.0 / flt_10A99BD0[8 * v2]);
        if (v7 < 0.03125 || flt_10A99BCC[8 * v2] < -30.0) {
          *(_WORD *)v8 = *v5;
          *v5 = dword_10A99BA8;
          LOWORD(dword_10A99BA8) = v2;
        } else {
          v8 = (int *)&word_10A99BD4[16 * v2];
        }
        v2 = v4;
      } while (v4);
      result = v9;
    }
    v9 = ++result;
  } while (result < 2);
  return result;
}
// 104B2560: using guessed type float flt_104B2560;
// 104B2564: using guessed type float flt_104B2564;
// 104B2568: using guessed type int dword_104B2568;
// 106C2CFC: using guessed type int dword_106C2CFC;
// 10A99BA8: using guessed type int dword_10A99BA8;
// 10A99BAC: using guessed type int dword_10A99BAC;
// 10A99BB4: using guessed type int dword_10A99BB4;
// 10A99BB8: using guessed type float flt_10A99BB8[];
// 10A99BBC: using guessed type float flt_10A99BBC[];
// 10A99BC0: using guessed type float flt_10A99BC0[];
// 10A99BC4: using guessed type float flt_10A99BC4[];
// 10A99BC8: using guessed type float flt_10A99BC8[];
// 10A99BCC: using guessed type float flt_10A99BCC[];
// 10A99BD0: using guessed type float flt_10A99BD0[];
// 10A99BD4: using guessed type __int16 word_10A99BD4[];

//----- (1003A4D0) --------------------------------------------------------
_WORD *sub_1003A4D0() {
  int v0;        // ecx
  _WORD *result; // eax
  int v2;        // ecx

  v0 = 1;
  result = &unk_10A99BF4;
  do {
    *result = ++v0;
    result += 16;
  } while ((int)result < (int)&unk_10A9BBD4);
  v2 = dword_100B36FC;
  word_10A9BBB4 = 0;
  LOWORD(dword_10A99BA8) = 1;
  if (dword_100B36FC > 0) {
    result = &unk_10ACEF04;
    do {
      *(_DWORD *)result = 0;
      result += 5556;
      --v2;
    } while (v2);
  }
  LOWORD(dword_10A99BB0) = 0;
  LOWORD(dword_10A99BAC) = 0;
  LOWORD(dword_10A99BB4) = 0;
  return result;
}
// 100B36FC: using guessed type int dword_100B36FC;
// 10A99BA8: using guessed type int dword_10A99BA8;
// 10A99BAC: using guessed type int dword_10A99BAC;
// 10A99BB0: using guessed type int dword_10A99BB0;
// 10A99BB4: using guessed type int dword_10A99BB4;
// 10A9BBB4: using guessed type __int16 word_10A9BBB4;

//----- (1003A530) --------------------------------------------------------
int sub_1003A530() {
  int result; // eax
  int v1;     // edi
  int *v2;    // esi
  int v3;     // edi
  int *v4;    // esi
  int v5;     // edi
  int *v6;    // esi

  if (!dword_10A9BBB8) {
    sub_1003A4D0();
    dword_10A9BBB8 = 1;
  }
  if (MEMORY[0x106C6620]) {
    sub_1003A200();
    result = dword_100B36F8;
    v1 = 0;
    if (dword_100B36F8 > 0) {
      v2 = &dword_10ACD4F8;
      do {
        if (*v2) {
          meth_10039020(*v2);
          meth_10039200(*v2);
        }
        result = dword_100B36F8;
        ++v1;
        v2 += 32;
      } while (v1 < dword_100B36F8);
    }
  } else if (MEMORY[0x106C661C] || MEMORY[0x106C6624]) {
    result = dword_100B36F8;
    v5 = 0;
    if (dword_100B36F8 > 0) {
      v6 = &dword_10ACD4F8;
      do {
        if (*v6)
          meth_10039200(*v6);
        result = dword_100B36F8;
        ++v5;
        v6 += 32;
      } while (v5 < dword_100B36F8);
    }
  } else {
    sub_1003A340();
    result = dword_100B36F8;
    v3 = 0;
    if (dword_100B36F8 > 0) {
      v4 = &dword_10ACD4F8;
      do {
        if (*v4) {
          meth_10039F20(*v4);
          meth_10039200(*v4);
        }
        result = dword_100B36F8;
        ++v3;
        v4 += 32;
      } while (v3 < dword_100B36F8);
    }
  }
  return result;
}
// 100B36F8: using guessed type int dword_100B36F8;
// 106C661C: using guessed type int dword_106C661C;
// 106C6620: using guessed type int dword_106C6620;
// 106C6624: using guessed type int dword_106C6624;
// 10A9BBB8: using guessed type int dword_10A9BBB8;
// 10ACD4F8: using guessed type int dword_10ACD4F8;

//----- (1003A610) --------------------------------------------------------
_WORD *__cdecl sub_1003A610(_WORD *a1) {
  _WORD *result; // eax

  result = a1;
  *a1 = dword_10A99BA8;
  a1[1] = dword_10A99BB0;
  a1[2] = dword_10A99BAC;
  a1[3] = dword_10A99BB4;
  qmemcpy(a1 + 4, flt_10A99BB8, 0x2000u);
  return result;
}
// 10A99BA8: using guessed type int dword_10A99BA8;
// 10A99BAC: using guessed type int dword_10A99BAC;
// 10A99BB0: using guessed type int dword_10A99BB0;
// 10A99BB4: using guessed type int dword_10A99BB4;
// 10A99BB8: using guessed type float flt_10A99BB8[];

//----- (1003A660) --------------------------------------------------------
int __cdecl sub_1003A660(int a1, int a2) {
  int v2;     // ecx
  int result; // eax

  v2 = a1;
  if (a1 < 0)
    v2 = 0;
  if (v2 >= 64)
    v2 = 63;
  result = a2;
  if (a2 < 0)
    result = 0;
  if (result >= 64)
    result = 63;
  if (v2 < dword_10A9BBD0[result])
    dword_10A9BBD0[result] = v2;
  if (v2 > dword_10A9BCD0[result])
    dword_10A9BCD0[result] = v2;
  return result;
}
// 10A9BBD0: using guessed type int dword_10A9BBD0[];

//----- (1003A6B0) --------------------------------------------------------
void __cdecl sub_1003A6B0(float a1, float a2, float a3, float a4) {
  float v4;   // esi
  int v5;     // eax
  int v6;     // eax
  int v7;     // esi
  int v8;     // eax
  int v9;     // eax
  float v10;  // eax
  double v11; // st7
  double v12; // st7
  int v13;    // esi
  int v14;    // ebx
  double v15; // st7
  double v16; // st7
  int v17;    // edi
  int v18;    // edi
  float v19;  // [esp+0h] [ebp-24h]
  int v20;    // [esp+0h] [ebp-24h]
  float v21;  // [esp+0h] [ebp-24h]
  int v22;    // [esp+0h] [ebp-24h]
  float v23;  // [esp+0h] [ebp-24h]
  float v24;  // [esp+0h] [ebp-24h]
  float v25;  // [esp+0h] [ebp-24h]
  float v26;  // [esp+14h] [ebp-10h]
  float v27;  // [esp+14h] [ebp-10h]
  int i;      // [esp+14h] [ebp-10h]
  float v29;  // [esp+14h] [ebp-10h]
  float v30;  // [esp+14h] [ebp-10h]
  float v31;  // [esp+18h] [ebp-Ch]
  int v32;    // [esp+20h] [ebp-4h]

  v26 = a1 * 0.03125;
  v19 = a2 * 0.03125;
  v4 = v26;
  v20 = sub_1002B920(v19);
  v5 = sub_1002B920(v26);
  sub_1003A660(v5, v20);
  v27 = a3 * 0.03125;
  v21 = a4 * 0.03125;
  v22 = sub_1002B920(v21);
  v6 = sub_1002B920(v27);
  sub_1003A660(v6, v22);
  v7 = sub_1002B920(v4);
  v8 = sub_1002B920(v27);
  if (v7 > v8) {
    v9 = v7 ^ v8;
    v7 ^= v9;
    v8 = v7 ^ v9;
  }
  if (v7 < dword_10A9BBC8)
    dword_10A9BBC8 = v7;
  if (v8 > dword_10A9BBC0)
    dword_10A9BBC0 = v8;
  if (a2 > (double)a4) {
    v10 = a3;
    a3 = a1;
    v11 = a2;
    a1 = v10;
    a2 = a4;
    a4 = v11;
  }
  v12 = a4 - a2;
  v31 = v12;
  if (v12 != 0.0) {
    v23 = a2 * 0.03125;
    v13 = sub_1002B920(v23);
    v24 = a4 * 0.03125;
    v14 = sub_1002B920(v24);
    v32 = v14;
    if (v13 < dword_10A9BBCC)
      dword_10A9BBCC = v13;
    if (v14 > dword_10A9BBC4)
      dword_10A9BBC4 = v14;
    for (i = v13; v13 <= v14; i = v13) {
      v15 = (double)i * 32.0;
      v29 = v15;
      if (v15 >= a2 && v29 <= (double)a4) {
        v16 = (a3 - a1) * (v29 - a2) / v31 + a1;
        v30 = v16;
        v25 = v16 * 0.03125;
        v17 = sub_1002B920(v25);
        sub_1003A660(v17, v13 - 1);
        sub_1003A660(v17, v13);
        if (v30 <= (double)v17 * 32.0) {
          sub_1003A660(v17 - 1, v13 - 1);
          sub_1003A660(v17 - 1, v13);
          v14 = v32;
        }
        v18 = v17 + 1;
        if (v30 >= (double)v18 * 32.0) {
          sub_1003A660(v18, v13 - 1);
          sub_1003A660(v18, v13);
        }
      }
      ++v13;
    }
  }
}
// 10A9BBC0: using guessed type int dword_10A9BBC0;
// 10A9BBC4: using guessed type int dword_10A9BBC4;
// 10A9BBC8: using guessed type int dword_10A9BBC8;
// 10A9BBCC: using guessed type int dword_10A9BBCC;

//----- (1003A910) --------------------------------------------------------
BOOL __cdecl sub_1003A910(int a1, int a2) {
  return a2 >= dword_10A9BBCC && a2 <= dword_10A9BBC4 && a1 >= dword_10A9BBD0[a2] &&
         a1 <= dword_10A9BCD0[a2];
}
// 10A9BBC4: using guessed type int dword_10A9BBC4;
// 10A9BBCC: using guessed type int dword_10A9BBCC;
// 10A9BBD0: using guessed type int dword_10A9BBD0[];

//----- (1003A950) --------------------------------------------------------
BOOL __cdecl sub_1003A950(float a1, float a2) {
  int v2;   // eax
  float v4; // [esp+0h] [ebp-8h]
  float v5; // [esp+4h] [ebp-4h]
  int v6;   // [esp+4h] [ebp-4h]

  v5 = a2 * 0.03125;
  v6 = sub_1002B920(v5);
  v4 = a1 * 0.03125;
  v2 = sub_1002B920(v4);
  return sub_1003A910(v2, v6);
}

//----- (1003A990) --------------------------------------------------------
int sub_1003A990() {
  int result; // eax
  int v1;     // ebp
  int v2;     // esi
  int v3;     // edi
  int i;      // edx
  int j;      // ecx

  memset(dword_10A9BED0, 0, sizeof(dword_10A9BED0));
  memset32(dword_10A9BDD0, 64, 0x40u);
  dword_10A9BBC0 = 0;
  memset(dword_10A9BCD0, 0, sizeof(dword_10A9BCD0));
  dword_10A9BBC4 = 0;
  memset32(dword_10A9BBD0, 64, 0x40u);
  dword_10A9BBC8 = 63;
  dword_10A9BBCC = 63;
  sub_1003A6B0(dword_106C3310, dword_106C3314, dword_106C331C, dword_106C3320);
  sub_1003A6B0(dword_106C3310, dword_106C3314, dword_106C3328, dword_106C332C);
  sub_1003A6B0(dword_106C3310, dword_106C3314, dword_106C3334, dword_106C3338);
  sub_1003A6B0(dword_106C3310, dword_106C3314, dword_106C3340, dword_106C3344);
  sub_1003A6B0(dword_106C334C, dword_106C3350, dword_106C331C, dword_106C3320);
  sub_1003A6B0(dword_106C334C, dword_106C3350, dword_106C3328, dword_106C332C);
  sub_1003A6B0(dword_106C334C, dword_106C3350, dword_106C3334, dword_106C3338);
  sub_1003A6B0(dword_106C334C, dword_106C3350, dword_106C3340, dword_106C3344);
  sub_1003A6B0(dword_106C331C, dword_106C3320, dword_106C3328, dword_106C332C);
  sub_1003A6B0(dword_106C3328, dword_106C332C, dword_106C3334, dword_106C3338);
  sub_1003A6B0(dword_106C3334, dword_106C3338, dword_106C3340, dword_106C3344);
  sub_1003A6B0(dword_106C3340, dword_106C3344, dword_106C331C, dword_106C3320);
  result = dword_10A9BBC8;
  if (dword_10A9BBC8 < 0) {
    result = 0;
    dword_10A9BBC8 = 0;
  }
  v1 = dword_10A9BBCC;
  if (dword_10A9BBCC < 0) {
    v1 = 0;
    dword_10A9BBCC = 0;
  }
  v2 = dword_10A9BBC0;
  if (dword_10A9BBC0 >= 64) {
    v2 = 63;
    dword_10A9BBC0 = 63;
  }
  v3 = dword_10A9BBC4;
  if (dword_10A9BBC4 >= 64) {
    v3 = 63;
    dword_10A9BBC4 = 63;
  }
  for (; result <= v2; ++result) {
    for (i = v1; result < dword_10A9BBD0[i] || result > dword_10A9BCD0[i]; ++i)
      ;
    for (j = v3; result < dword_10A9BBD0[j] || result > dword_10A9BCD0[j]; --j)
      ;
    dword_10A9BDD0[result] = i;
    dword_10A9BED0[result] = j;
  }
  return result;
}
// 10A9BBC0: using guessed type int dword_10A9BBC0;
// 10A9BBC4: using guessed type int dword_10A9BBC4;
// 10A9BBC8: using guessed type int dword_10A9BBC8;
// 10A9BBCC: using guessed type int dword_10A9BBCC;
// 10A9BBD0: using guessed type int dword_10A9BBD0[];

//----- (1003AC30) --------------------------------------------------------
float *__cdecl sub_1003AC30(float *a1, float *a2, float *a3) {
  double v3;     // st6
  double v4;     // st7
  double v5;     // st5
  float *result; // eax
  float v7;      // [esp+8h] [ebp+8h]

  v3 = *a2 * a3[1] - *a3 * a2[1];
  v4 = a3[2] * a2[1];
  v5 = a2[2] * a3[1];
  v7 = *a3 * a2[2] - *a2 * a3[2];
  result = a1;
  a1[1] = v7;
  a1[2] = v3;
  *a1 = v4 - v5;
  return result;
}

//----- (1003AC90) --------------------------------------------------------
double __cdecl sub_1003AC90(float *a1, float *a2) {
  return a1[1] * a2[1] + a1[2] * a2[2] + *a2 * *a1;
}

//----- (1003ACC0) --------------------------------------------------------
float *__cdecl sub_1003ACC0(float *a1, float *a2) {
  float *result; // eax

  result = a2;
  *a1 = -*a2;
  a1[1] = -a2[1];
  a1[2] = -a2[2];
  return result;
}

//----- (1003ACE0) --------------------------------------------------------
int __cdecl sub_1003ACE0(int a1, int a2, float a3) {
  int result; // eax

  result = a2;
  *(float *)a1 = a3 * *(float *)a2;
  *(float *)(a1 + 4) = *(float *)(a2 + 4) * a3;
  *(float *)(a1 + 8) = *(float *)(a2 + 8) * a3;
  return result;
}

//----- (1003AD10) --------------------------------------------------------
int __cdecl sub_1003AD10(int a1, float a2) {
  int result; // eax
  double v3;  // st7
  double v4;  // st6

  result = a1;
  v3 = a2 * *(float *)(a1 + 4);
  v4 = a2 * *(float *)(a1 + 8);
  *(float *)a1 = a2 * *(float *)a1;
  *(float *)(a1 + 4) = v3;
  *(float *)(a1 + 8) = v4;
  return result;
}

//----- (1003AD40) --------------------------------------------------------
int __cdecl sub_1003AD40(int a1, int a2, float a3) {
  double v3;  // st7
  int result; // eax

  v3 = 1.0 / a3;
  result = a2;
  *(float *)a1 = v3 * *(float *)a2;
  *(float *)(a1 + 4) = *(float *)(a2 + 4) * v3;
  *(float *)(a1 + 8) = *(float *)(a2 + 8) * v3;
  return result;
}

//----- (1003AD70) --------------------------------------------------------
int __cdecl sub_1003AD70(int a1, float a2) {
  double v2;  // st7
  int result; // eax
  double v4;  // st6
  double v5;  // st5
  double v6;  // st7
  double v7;  // rtt

  v2 = 1.0 / a2;
  result = a1;
  v4 = v2 * *(float *)a1;
  v5 = v2;
  v6 = v2 * *(float *)(a1 + 4);
  v7 = v5 * *(float *)(a1 + 8);
  *(float *)a1 = v4;
  *(float *)(a1 + 4) = v6;
  *(float *)(a1 + 8) = v7;
  return result;
}

//----- (1003ADA0) --------------------------------------------------------
float *__cdecl sub_1003ADA0(float *a1, float *a2, float *a3) {
  double v3;      // st6
  double v4;      // st5
  double v5;      // st7
  long double v6; // st7
  long double v7; // st7
  float *result;  // eax
  float v9;       // [esp+0h] [ebp-8h]
  float v10;      // [esp+4h] [ebp-4h]
  float v11;      // [esp+10h] [ebp+8h]
  float v12;      // [esp+14h] [ebp+Ch]

  v3 = a3[1] - a2[1];
  v4 = *a3 - *a2;
  v5 = a3[2] - a2[2];
  v12 = v4;
  v11 = v3;
  v10 = v5;
  v9 = v4 * v12 + v3 * v11 + v10 * v10;
  v6 = sqrt_(v9);
  if (v6 == 0.0) {
    result = a1;
    *a1 = 0.0;
    a1[1] = 0.0;
    a1[2] = 1.0;
  } else {
    v7 = 1.0 / v6;
    result = a1;
    *a1 = v7 * v12;
    a1[1] = v7 * v11;
    a1[2] = v7 * v10;
  }
  return result;
}

//----- (1003AE50) --------------------------------------------------------
void __cdecl sub_1003AE50(float *a1) {
  long double v1; // st7
  long double v2; // st7
  long double v3; // st6
  long double v4; // st5
  long double v5; // st7
  long double v6; // rt1
  float v7;       // [esp+0h] [ebp-Ch]

  v7 = a1[1] * a1[1] + a1[2] * a1[2] + *a1 * *a1;
  v1 = sqrt_(v7);
  if (v1 == 0.0) {
    *a1 = 0.0;
    a1[1] = 0.0;
    a1[2] = 1.0;
  } else {
    v2 = 1.0 / v1;
    v3 = v2 * *a1;
    v4 = v2;
    v5 = v2 * a1[1];
    v6 = v4 * a1[2];
    *a1 = v3;
    a1[1] = v5;
    a1[2] = v6;
  }
}

//----- (1003AEE0) --------------------------------------------------------
float *__cdecl sub_1003AEE0(float *a1, float *a2, float *a3) {
  float *result; // eax

  result = a2;
  *a1 = *a2 - *a3;
  a1[1] = a2[1] - a3[1];
  a1[2] = a2[2] - a3[2];
  return result;
}

//----- (1003AF10) --------------------------------------------------------
float *__cdecl sub_1003AF10(float *a1, float *a2) {
  float *result; // eax
  double v3;     // st6
  double v4;     // st7

  result = a1;
  v3 = a1[1];
  v4 = a1[2];
  *a1 = *a1 - *a2;
  a1[1] = v3 - a2[1];
  a1[2] = v4 - a2[2];
  return result;
}

//----- (1003AF40) --------------------------------------------------------
float *__cdecl sub_1003AF40(float *a1, float *a2, float *a3) {
  float *result; // eax

  result = a3;
  *a1 = *a3 + *a2;
  a1[1] = a2[1] + a3[1];
  a1[2] = a2[2] + a3[2];
  return result;
}

//----- (1003AF70) --------------------------------------------------------
float *__cdecl sub_1003AF70(float *a1, float *a2) {
  float *result; // eax

  result = a1;
  *a1 = *a1 + *a2;
  a1[1] = a2[1] + a1[1];
  a1[2] = a2[2] + a1[2];
  return result;
}

//----- (1003AFA0) --------------------------------------------------------
int __cdecl sub_1003AFA0(int a1, int a2, int a3, float a4) {
  int result; // eax

  result = a3;
  *(float *)a1 = (*(float *)a2 - *(float *)a3) * a4 + *(float *)a3;
  *(float *)(a1 + 4) = (*(float *)(a2 + 4) - *(float *)(a3 + 4)) * a4 + *(float *)(a3 + 4);
  *(float *)(a1 + 8) = (*(float *)(a2 + 8) - *(float *)(a3 + 8)) * a4 + *(float *)(a3 + 8);
  return result;
}

//----- (1003AFE0) --------------------------------------------------------
int __cdecl sub_1003AFE0(int a1, int a2, int a3, float a4) {
  int result; // eax

  result = a3;
  *(float *)a1 = a4 * *(float *)a3 + *(float *)a2;
  *(float *)(a1 + 4) = *(float *)(a3 + 4) * a4 + *(float *)(a2 + 4);
  *(float *)(a1 + 8) = *(float *)(a3 + 8) * a4 + *(float *)(a2 + 8);
  return result;
}

//----- (1003B020) --------------------------------------------------------
int __cdecl sub_1003B020(int a1, int a2, float a3) {
  int result; // eax

  result = a1;
  *(float *)a1 = a3 * *(float *)a2 + *(float *)a1;
  *(float *)(a1 + 4) = *(float *)(a2 + 4) * a3 + *(float *)(a1 + 4);
  *(float *)(a1 + 8) = *(float *)(a2 + 8) * a3 + *(float *)(a1 + 8);
  return result;
}

//----- (1003B050) --------------------------------------------------------
float *__cdecl sub_1003B050(float *a1, float *a2, float *a3) {
  float *result; // eax

  result = a3;
  *a1 = (*a3 + *a2) * 0.5;
  a1[1] = (a2[1] + a3[1]) * 0.5;
  a1[2] = (a3[2] + a2[2]) * 0.5;
  return result;
}

//----- (1003B090) --------------------------------------------------------
_DWORD *__cdecl sub_1003B090(_DWORD *a1) {
  _DWORD *result; // eax

  result = a1;
  a1[2] = 0;
  a1[1] = 0;
  *a1 = 0;
  return result;
}

//----- (1003B0A0) --------------------------------------------------------
double __cdecl sub_1003B0A0(float *a1, float *a2) {
  double v2; // st6
  double v3; // st7
  float v5;  // [esp+0h] [ebp-4h]
  float v6;  // [esp+8h] [ebp+4h]

  v2 = *a1 - *a2;
  v3 = a1[1] - a2[1];
  v6 = v2;
  v5 = v2 * v6 + v3 * v3;
  return sqrt_(v5);
}

//----- (1003B0E0) --------------------------------------------------------
double __cdecl sub_1003B0E0(float *a1, float *a2) {
  double v2; // st6
  double v3; // st5
  double v4; // st7
  float v6;  // [esp+0h] [ebp-4h]
  float v7;  // [esp+8h] [ebp+4h]
  float v8;  // [esp+Ch] [ebp+8h]

  v2 = a1[1] - a2[1];
  v3 = *a1 - *a2;
  v4 = a1[2] - a2[2];
  v7 = v3;
  v8 = v2;
  v6 = v3 * v7 + v2 * v8 + v4 * v4;
  return sqrt_(v6);
}

//----- (1003B130) --------------------------------------------------------
double __cdecl sub_1003B130(float *a1, float *a2) {
  double v2; // st6
  double v3; // st5
  double v4; // st7
  float v6;  // [esp+4h] [ebp+4h]
  float v7;  // [esp+8h] [ebp+8h]

  v2 = a1[1] - a2[1];
  v3 = *a1 - *a2;
  v4 = a1[2] - a2[2];
  v6 = v3;
  v7 = v2;
  return v3 * v6 + v2 * v7 + v4 * v4;
}

//----- (1003B170) --------------------------------------------------------
double __cdecl sub_1003B170(float *a1) {
  float v2; // [esp+0h] [ebp-8h]

  v2 = a1[1] * a1[1] + a1[2] * a1[2] + *a1 * *a1;
  return sqrt_(v2);
}

//----- (1003B1C0) --------------------------------------------------------
double __cdecl sub_1003B1C0(float *a1) {
  float v2; // [esp+0h] [ebp-4h]

  v2 = a1[1] * a1[1] + *a1 * *a1;
  return sqrt_(v2);
}

//----- (1003B1F0) --------------------------------------------------------
float *__cdecl sub_1003B1F0(float *a1, float *a2, float *a3) {
  float *result; // eax
  double v4;     // st7
  double v5;     // st6
  double v6;     // st4
  double v7;     // st5

  result = a3;
  v4 = *a2;
  v5 = a2[2];
  v6 = a2[1];
  v7 = 1.0 / (a3[3] * v4 + a3[11] * v5 + a3[7] * v6 + a3[15]);
  *a1 = (v4 * *a3 + a3[8] * v5 + a3[4] * v6 + a3[12]) * v7;
  a1[1] = (a3[9] * v5 + a3[1] * v4 + a3[5] * v6 + a3[13]) * v7;
  a1[2] = (a3[10] * v5 + a3[2] * v4 + a3[6] * v6 + a3[14]) * v7;
  return result;
}

//----- (1003B2A0) --------------------------------------------------------
float *__cdecl sub_1003B2A0(float *a1, float *a2, float *a3) {
  float *result; // eax
  double v4;     // st7
  double v5;     // st6
  double v6;     // st5

  result = a3;
  v4 = *a2;
  v5 = a2[2];
  v6 = a2[1];
  *a1 = a3[8] * v5 + v4 * *a3 + a3[4] * v6 + a3[12];
  a1[1] = a3[9] * v5 + a3[5] * v6 + a3[1] * v4 + a3[13];
  a1[2] = a3[10] * v5 + a3[6] * v6 + a3[2] * v4 + a3[14];
  a1[3] = a3[11] * v5 + a3[7] * v6 + a3[3] * v4 + a3[15];
  return result;
}

//----- (1003B340) --------------------------------------------------------
float *__cdecl sub_1003B340(float *a1, float *a2, float *a3) {
  float *result; // eax
  double v4;     // st7
  double v5;     // st6
  double v6;     // st4
  double v7;     // st5

  result = a3;
  v4 = a2[1];
  v5 = a2[2];
  v6 = *a2;
  v7 = 1.0 / (a3[7] * v4 + a3[11] * v5 + a3[3] * v6 + a3[15]);
  *a1 = (v6 * *a3 + a3[8] * v5 + a3[4] * v4) * v7;
  a1[1] = (a3[9] * v5 + a3[5] * v4 + a3[1] * v6) * v7;
  a1[2] = (a3[10] * v5 + a3[6] * v4 + a3[2] * v6) * v7;
  return result;
}

//----- (1003B3F0) --------------------------------------------------------
float *__cdecl sub_1003B3F0(float *a1, float *a2, float *a3) {
  float *result; // eax
  double v4;     // st7
  double v5;     // st6
  double v6;     // st5

  result = a3;
  v4 = *a2;
  v5 = a2[2];
  v6 = a2[1];
  *a1 = a3[8] * v5 + v4 * *a3 + a3[4] * v6;
  a1[1] = a3[9] * v5 + a3[5] * v6 + a3[1] * v4;
  a1[2] = a3[10] * v5 + a3[6] * v6 + a3[2] * v4;
  return result;
}

//----- (1003B470) --------------------------------------------------------
int __cdecl sub_1003B470(char *a1, float *a2, float *a3) {
  float *v3;    // ebx
  char *v4;     // esi
  float *v5;    // edi
  float *v6;    // esi
  int v7;       // ebp
  float *v8;    // ecx
  double v9;    // st7
  float *v10;   // eax
  int v11;      // edx
  double v12;   // st6
  int result;   // eax
  char *i;      // [esp+10h] [ebp-44h]
  char v15[64]; // [esp+14h] [ebp-40h] BYREF
  int v16;      // [esp+5Ch] [ebp+8h]

  v3 = a2;
  v4 = (char *)(v15 - (char *)a2);
  v16 = 4;
  for (i = v4;; v4 = i) {
    v5 = a3;
    v6 = (float *)&v4[(_DWORD)v3];
    v7 = 4;
    do {
      *v6 = 0.0;
      v8 = v3;
      v9 = *v6;
      v10 = v5;
      v11 = 4;
      do {
        v12 = *v8 * *v10;
        v10 += 4;
        ++v8;
        --v11;
        v9 = v9 + v12;
      } while (v11);
      *v6++ = v9;
      ++v5;
      --v7;
    } while (v7);
    v3 += 4;
    result = --v16;
    if (!v16)
      break;
  }
  qmemcpy(a1, v15, 0x40u);
  return result;
}

//----- (1003B4F0) --------------------------------------------------------
int __cdecl sub_1003B4F0(int a1, float *a2) {
  double v3;  // st7
  double v4;  // st6
  double v5;  // st6
  double v6;  // st5
  double v7;  // st5
  double v8;  // st7
  double v9;  // st7
  int result; // eax
  double v11; // st5
  double v12; // st7
  double v13; // st6
  double v14; // st6
  double v15; // st7
  int i;      // ecx
  int j;      // eax
  int v18;    // edi
  float v19;  // [esp+4h] [ebp-8h]
  float v20;  // [esp+8h] [ebp-4h]
  float v21;  // [esp+14h] [ebp+8h]
  float v22;  // [esp+14h] [ebp+8h]

  v3 = 0.0;
  v19 = a2[5] * a2[10];
  v4 = *a2 * v19;
  v21 = v4;
  if (v4 < 0.0) {
    v3 = v21;
    v5 = 0.0;
  } else {
    v5 = v21;
  }
  v6 = a2[6] * a2[8] * a2[1];
  if (v6 < 0.0)
    v3 = v3 + v6;
  else
    v5 = v5 + v6;
  v7 = a2[4] * a2[2] * a2[9];
  if (v7 < 0.0)
    v3 = v3 + v7;
  else
    v5 = v5 + v7;
  if (-(a2[2] * a2[8] * a2[5]) < 0.0)
    v3 = v3 - a2[2] * a2[8] * a2[5];
  else
    v5 = v5 - a2[2] * a2[8] * a2[5];
  if (-(a2[4] * a2[1] * a2[10]) < 0.0)
    v3 = v3 - a2[4] * a2[1] * a2[10];
  else
    v5 = v5 - a2[4] * a2[1] * a2[10];
  v20 = a2[9] * a2[6];
  if (-(*a2 * v20) < 0.0)
    v3 = v3 - *a2 * v20;
  else
    v5 = v5 - *a2 * v20;
  v22 = v3 + v5;
  v8 = v22 / (v5 - v3);
  if (v8 < 0.0)
    v8 = -v8;
  if (v22 == 0.0 || v8 < 1.0e-15) {
    for (i = 0; i < 4; ++i) {
      for (j = 0; j < 4; ++j) {
        v18 = j + 4 * i;
        if (i == j)
          *(_DWORD *)(a1 + 4 * v18) = 1065353216;
        else
          *(_DWORD *)(a1 + 4 * v18) = 0;
      }
    }
    result = 1;
  } else {
    v9 = 1.0 / v22;
    *(float *)a1 = (v19 - v20) * v9;
    *(float *)(a1 + 16) = -((a2[4] * a2[10] - a2[6] * a2[8]) * v9);
    *(float *)(a1 + 32) = (a2[4] * a2[9] - a2[8] * a2[5]) * v9;
    *(float *)(a1 + 4) = -((a2[1] * a2[10] - a2[2] * a2[9]) * v9);
    *(float *)(a1 + 20) = (*a2 * a2[10] - a2[2] * a2[8]) * v9;
    *(float *)(a1 + 36) = -((*a2 * a2[9] - a2[8] * a2[1]) * v9);
    *(float *)(a1 + 8) = (a2[6] * a2[1] - a2[2] * a2[5]) * v9;
    *(float *)(a1 + 24) = -((*a2 * a2[6] - a2[4] * a2[2]) * v9);
    result = 1;
    *(float *)(a1 + 40) = (*a2 * a2[5] - a2[4] * a2[1]) * v9;
    v11 = *(float *)(a1 + 4);
    v12 = *(float *)(a1 + 20);
    v13 = *(float *)(a1 + 36);
    *(float *)(a1 + 48) =
        -(*(float *)a1 * a2[12] + *(float *)(a1 + 32) * a2[14] + *(float *)(a1 + 16) * a2[13]);
    *(float *)(a1 + 52) = -(v11 * a2[12] + v12 * a2[13] + v13 * a2[14]);
    v14 = a2[14] * *(float *)(a1 + 40);
    v15 = a2[12] * *(float *)(a1 + 8) + a2[13] * *(float *)(a1 + 24);
    *(_DWORD *)(a1 + 44) = 0;
    *(_DWORD *)(a1 + 28) = 0;
    *(_DWORD *)(a1 + 12) = 0;
    *(_DWORD *)(a1 + 60) = 1065353216;
    *(float *)(a1 + 56) = -(v15 + v14);
  }
  return result;
}

//----- (1003B7B0) --------------------------------------------------------
double __cdecl sub_1003B7B0(float a1, float a2) {
  int v2;         // edi
  double v3;      // st7
  double v4;      // st5
  double v5;      // st6
  long double v6; // st7
  double result;  // st7
  int v8;         // esi
  long double v9; // st7
  double v10;     // st7
  float v11;      // [esp+0h] [ebp-14h]
  float v12;      // [esp+Ch] [ebp-8h]
  float v13;      // [esp+10h] [ebp-4h]
  float v14;      // [esp+18h] [ebp+4h]
  float v15;      // [esp+1Ch] [ebp+8h]

  v12 = 0.0;
  v2 = 1;
  if (a2 >= 0.0) {
    v3 = a1;
  } else {
    v3 = -a1;
    a2 = -a2;
    v12 = 3.1415927;
  }
  if (v3 < 0.0) {
    v4 = v3;
    v3 = a2;
    v12 = v12 - -1.5707964;
    a2 = -v4;
  }
  if (v3 < a2) {
    v2 = 0;
    v12 = v12 - -0.78539819;
    v5 = v3;
    v3 = a2;
    a2 = v5;
  }
  v11 = a2 * a2 + v3 * v3;
  v6 = sqrt_(v11);
  if (v6 == 0.0)
    return 0.0;
  v14 = 0.39269909;
  v13 = 0.19634955;
  v8 = 0;
  v15 = a2 / v6;
  do {
    v9 = sin_(v14);
    if (v9 < v15) {
      if (v15 - v9 < 0.0049999999)
        break;
      v10 = v13 + v14;
      goto LABEL_17;
    }
    if (v9 <= v15 || v9 - v15 < 0.0049999999)
      break;
    v10 = v14 - v13;
  LABEL_17:
    v14 = v10;
    ++v8;
    v13 = v13 * 0.5;
  } while (v8 < 16);
  if (v2)
    result = v12 + v14;
  else
    result = v12 - (v14 - 0.78539819);
  return result;
}

//----- (1003B940) --------------------------------------------------------
BOOL __cdecl sub_1003B940(float *a1, float *a2, float *a3, float *a4, int a5) {
  float v6[3];  // [esp+10h] [ebp-48h] BYREF
  float v7[3];  // [esp+1Ch] [ebp-3Ch] BYREF
  float v8[3];  // [esp+28h] [ebp-30h] BYREF
  float v9[3];  // [esp+34h] [ebp-24h] BYREF
  float v10[3]; // [esp+40h] [ebp-18h] BYREF
  float v11[3]; // [esp+4Ch] [ebp-Ch] BYREF

  sub_1003AEE0(v8, a3, a2);
  sub_1003AEE0(v7, a1, a3);
  sub_1003AC30(v6, v8, v7);
  if (sub_1003AC90(v6, (float *)a5) < 0.0)
    return 0;
  sub_1003AEE0(v9, a4, a3);
  sub_1003AC30(v6, v9, v7);
  if (sub_1003AC90(v6, (float *)a5) < 0.0)
    return 0;
  sub_1003AEE0(v11, a2, a4);
  sub_1003AEE0(v10, a1, a2);
  sub_1003AC30(v6, v11, v10);
  return sub_1003AC90(v6, (float *)a5) >= 0.0;
}

//----- (1003BA70) --------------------------------------------------------
int __cdecl sub_1003BA70(float *a1, float *a2, float *a3, float *a4) {
  double v6;  // st7
  double v8;  // st6
  int result; // eax
  double v10; // st7
  double v11; // st6
  double v12; // st7
  double v13; // st6
  double v14; // st7
  double v15; // st6
  double v16; // st6
  double v17; // st5
  double v18; // st7
  char v20;   // c3
  double v21; // st6
  double v22; // st5
  double v23; // st7
  char v25;   // c3
  float v26;  // [esp+Ch] [ebp+4h]
  float v27;  // [esp+10h] [ebp+8h]
  float v28;  // [esp+10h] [ebp+8h]
  float v29;  // [esp+14h] [ebp+Ch]
  float v30;  // [esp+14h] [ebp+Ch]
  float v31;  // [esp+18h] [ebp+10h]

  if (*a1 <= (double)*a2)
    v6 = *a2;
  else
    v6 = *a1;
  if (*a3 >= (double)*a4)
    v8 = *a4;
  else
    v8 = *a3;
  if (v6 < v8)
    return 0;
  if (*a3 <= (double)*a4)
    v10 = *a4;
  else
    v10 = *a3;
  if (*a1 >= (double)*a2)
    v11 = *a2;
  else
    v11 = *a1;
  if (v10 < v11)
    return 0;
  if (a1[1] <= (double)a2[1])
    v12 = a2[1];
  else
    v12 = a1[1];
  if (a3[1] >= (double)a4[1])
    v13 = a4[1];
  else
    v13 = a3[1];
  if (v12 < v13)
    return 0;
  if (a3[1] <= (double)a4[1])
    v14 = a4[1];
  else
    v14 = a3[1];
  if (a1[1] >= (double)a2[1])
    v15 = a2[1];
  else
    v15 = a1[1];
  if (v14 < v15)
    return 0;
  v16 = *a2 - *a1;
  v27 = a2[1] - a1[1];
  v17 = *a4 - *a1;
  v18 = a4[1] - a1[1];
  v26 = (*a3 - *a1) * v27 - (a3[1] - a1[1]) * v16;
  v28 = v17 * v27 - v18 * v16;
  if (!v20 && v28 != 0.0 && v28 * v26 > 0.0)
    return 0;
  v21 = *a4 - *a3;
  v22 = *a1 - *a3;
  v23 = a1[1] - a3[1];
  v29 = a4[1] - a3[1];
  v31 = v22 * v29 - v23 * v21;
  v30 = (*a2 - *a3) * v29 - (a2[1] - a3[1]) * v21;
  if (!v25 && v30 != 0.0 && v30 * v31 > 0.0)
    return 0;
  result = 2;
  if (v26 - v28 != 0.0)
    result = 1;
  return result;
}
// 1003BBBB: variable 'v20' is possibly undefined
// 1003BC41: variable 'v25' is possibly undefined

//----- (1003BC90) --------------------------------------------------------
int __cdecl sub_1003BC90(float *a1, float *a2, float *a3, float *a4) {
  double v5;  // st5
  double v6;  // st7
  double v7;  // st6
  double v8;  // st7
  double v10; // st6
  char v11;   // c3
  int result; // eax
  float v13;  // [esp+4h] [ebp+4h]
  float v14;  // [esp+8h] [ebp+8h]

  v5 = a2[1] - a1[1];
  v6 = *a3 - *a1;
  v7 = a3[1] - a1[1];
  v13 = *a2 - *a1;
  v14 = v5;
  v8 = v6 * v14 - v7 * v13;
  v10 = (*a4 - *a1) * v14 - (a4[1] - a1[1]) * v13;
  if (!v11 && v10 != 0.0 && v10 * v8 > 0.0)
    return 0;
  result = 2;
  if (v8 - v10 != 0.0)
    result = 1;
  return result;
}
// 1003BCFB: variable 'v11' is possibly undefined

//----- (1003BD40) --------------------------------------------------------
int __cdecl sub_1003BD40(int a1) {
  int result; // eax

  result = a1;
  dword_10A9BFD0 = a1;
  return result;
}
// 10A9BFD0: using guessed type int dword_10A9BFD0;

//----- (1003BD50) --------------------------------------------------------
int sub_1003BD50() {
  int result; // eax

  result = (16807 * dword_10A9BFD0) & 0x7FFFFFF;
  dword_10A9BFD0 = result;
  return result;
}
// 10A9BFD0: using guessed type int dword_10A9BFD0;

//----- (1003BD80) --------------------------------------------------------
int sub_1003BD80() {
  int *v0;                 // eax
  HMODULE v1;              // eax
  int v3;                  // eax
  HRESULT v4;              // eax
  int errno;               // esi
  const CHAR *format;      // eax
  const CHAR *v7;          // eax
  int v8;                  // [esp-4h] [ebp-410h]
  char errorMessage[1024]; // [esp+Ch] [ebp-400h] BYREF

  lstrcpyA(String1, String2);
  lstrcpyA(byte_10A9CEF8, String2);
  memset(byte_10B4E740, 0, sizeof(byte_10B4E740));
  memset(byte_10B4E760, 0, sizeof(byte_10B4E760));
  v0 = dword_10A9C0CC;
  do {
    *v0 = 0;
    v0 += 56;
  } while ((int)v0 < (int)&unk_10A9CECC);
  v1 = GetModuleHandleA(0);
  if (sub_1000C5D0((int)v1, &unk) < 0)
    return 0;
  v3 = SetupDirectPlayPlayer((#503 *)&unk);
  if (v3 == -2005466066) {
    unk = 0;
    v4 = sub_1003C520((LPVOID *)&unk);
    errno = v4;
    if (v4 < 0) {
      sprintf(errorMessage, "Could not create DirectPlay object because of error 0x%08X", v4);
      format = GetStringWithIndex(0x12Bu);
      showMessageBox(format, errno);
      return 0;
    }
  } else {
    if (v3 < 0) {
      v8 = v3;
      v7 = GetStringWithIndex(0x12Au);
      showMessageBox(v7, v8);
      exit(1);
    }
    if (dword_10277B4C) {
      gNetworkPlay = 2;
      dword_10AA2884 = 1;
    } else {
      gNetworkPlay = 1;
      dword_10AA2884 = 0;
    }
    dword_10A9D000 = 1;
  }
  dword_10A9D008 = (int)&unk;
  if (dword_10A9D000) {
    dword_10AA2898 = 0;
    if (dword_10AA29D4 && sub_1003CC70(unk) < 0)
      return 0;
    uIDEvent = SetTimer(gHwnd, 1u, 0x3E8u, 0);
    dword_10A9CFFC = 1;
  } else {
    (*(void(__stdcall **)(
        SIZE_T, int *, int(__stdcall *)(IID *, int, SIZE_T, int, int, int), HWND, _DWORD))(
        *(_DWORD *)unk + 140))(unk, &dword_1008F538, sub_1003C430, gHwnd, 0);
    if (sub_1003D7B0(&dword_10A9BFD8) < 0)
      return 0;
  }
  return 1;
}
// 1008F538: using guessed type int dword_1008F538;
// 1022AF18: using guessed type int gNetworkPlay;
// 10277B4C: using guessed type int dword_10277B4C;
// 10A9BFD8: using guessed type int dword_10A9BFD8;
// 10A9C0CC: using guessed type int dword_10A9C0CC[];
// 10A9CFFC: using guessed type int dword_10A9CFFC;
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA29D4: using guessed type int dword_10AA29D4;

//----- (1003BF60) --------------------------------------------------------
int sub_1003BF60() {
  int result; // eax

  sub_100586A0();
  KillTimer(gHwnd, uIDEvent);
  if (dword_10AA2884)
    sub_10072270();
  sub_1003C550();
  result = dword_10AA287C;
  if (dword_10AA287C != 2 && dword_10AA287C != 3) {
    result = dword_10AA29D8;
    if (dword_10AA29D8) {
      *(_BYTE *)(dword_10AA29D8 + 11108) = 0;
      result = dword_10AA29D8;
      *(_DWORD *)(dword_10AA29D8 + 28) &= 0xFFFFFFEF;
    }
  }
  dword_10A9CFFC = 0;
  dword_10AA2884 = 0;
  gNetworkPlay = 0;
  dword_10AA2888 = 0;
  return result;
}
// 1003C550: using guessed type int sub_1003C550(void);
// 10072270: using guessed type int sub_10072270(void);
// 1022AF18: using guessed type int g_NetworkPlay;
// 10A9CFFC: using guessed type int dword_10A9CFFC;
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA2888: using guessed type int dword_10AA2888;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (1003BFD0) --------------------------------------------------------
int sub_1003BFD0() {
  int result;             // eax
  CHAR OutputString[260]; // [esp+0h] [ebp-104h] BYREF

  np_sub_10005BE0();
  sub_1003CFE0();
  sprintf(OutputString, "DirectPlay interface final instance count = %d\n", dword_10A9D004);
  OutputDebugStringA(OutputString);
  result = dword_10A9BFD8;
  if (dword_10A9BFD8)
    result = (*(int(__stdcall **)(int))(*(_DWORD *)dword_10A9BFD8 + 8))(dword_10A9BFD8);
  return result;
}
// 10A9BFD8: using guessed type int dword_10A9BFD8;
// 10A9D004: using guessed type int dword_10A9D004;

//----- (1003C020) --------------------------------------------------------
HANDLE np_sub_1003C020() {
  HANDLE result;     // eax
  int v1;            // [esp+4h] [ebp-408h] BYREF
  SIZE_T v2;         // [esp+8h] [ebp-404h] BYREF
  char Buffer[1024]; // [esp+Ch] [ebp-400h] BYREF

  v1 = 0;
  v2 = 0;
  KillTimer(gHwnd, uIDEvent);
  sub_1003C550();
  result = (HANDLE)sub_1003D480(&v1, &v2);
  if (!v1)
    goto LABEL_13;
  result = (HANDLE)sub_1003C520((LPVOID *)&unk);
  ++dword_10A9D004;
  if ((int)result < 0)
    goto LABEL_13;
  if (!unk)
    goto LABEL_13;
  result = (HANDLE)(*(int(__stdcall **)(SIZE_T, int, _DWORD))(*(_DWORD *)unk + 152))(unk, v1, 0);
  if ((int)result < 0)
    goto LABEL_13;
  if (dword_10AA287C != 2 && dword_10AA287C != 3) {
    if (dword_10AA29D4) {
      result = (HANDLE)sub_1003CC70(unk);
      if ((int)result < 0)
        goto LABEL_13;
    }
    uIDEvent = SetTimer(gHwnd, 1u, 0x3E8u, 0);
    dword_10A9CFFC = 1;
  }
  result = (HANDLE)dword_10277B44;
  if (!dword_10277B44) {
    result = CreateEventA(0, 0, 0, 0);
    dword_10277B44 = (int)result;
    if (!result) {
      result = (HANDLE)-2147024882;
    LABEL_13:
      if (result != (HANDLE)-2005466856)
        result = (HANDLE)sprintf(
            Buffer, "Could not select service provider because of error 0x%08X", result);
      return result;
    }
  }
  return result;
}
// 10277B44: using guessed type int dword_10277B44;
// 10A9CFFC: using guessed type int dword_10A9CFFC;
// 10A9D004: using guessed type int dword_10A9D004;
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA29D4: using guessed type int dword_10AA29D4;

//----- (1003C150) --------------------------------------------------------
int sub_1003C150() {
  int result;        // eax
  int v1;            // eax
  char v2[204];      // [esp+4h] [ebp-4CCh] BYREF
  char Buffer[1024]; // [esp+D0h] [ebp-400h] BYREF

  result = unk;
  if (unk) {
    memset(v2, 0, sizeof(v2));
    sub_1003D130(v2);
    v1 = sub_1003C5C0((int *)unk, (int)v2, (int *)dword_10A9D008);
    if (v1 >= 0) {
      gNetworkPlay = 2;
      sub_10071550();
      result = sub_10005B10();
    } else {
      result = sprintf(Buffer, "Could not host session because of error 0x%08X", v1);
    }
  }
  return result;
}
// 1003D130: using guessed type _DWORD __cdecl sub_1003D130(_DWORD);
// 10071550: using guessed type int sub_10071550(void);
// 1022AF18: using guessed type int g_NetworkPlay;

//----- (1003C1E0) --------------------------------------------------------
int sub_1003C1E0() {
  np_sub_1003C020();
  uIDEvent = SetTimer(gHwnd, 1u, 0x3E8u, 0);
  dword_10A9CFFC = 1;
  if (dword_10AA29D4)
    sub_1003CC70(unk);
  return 1;
}
// 10A9CFFC: using guessed type int dword_10A9CFFC;
// 10AA29D4: using guessed type int dword_10AA29D4;

//----- (1003C230) --------------------------------------------------------
int sub_1003C230() {
  np_sub_1003C020();
  uIDEvent = SetTimer(gHwnd, 1u, 0x3E8u, 0);
  dword_10A9CFFC = 1;
  return 1;
}
// 10A9CFFC: using guessed type int dword_10A9CFFC;

//----- (1003C260) --------------------------------------------------------
int sub_1003C260() {
  int result;       // eax
  int v1;           // esi
  unk06594 *v2;     // ecx
  DWORD pcbBuffer;  // [esp+8h] [ebp-734h] BYREF
  int v4;           // [esp+Ch] [ebp-730h] BYREF
  CHAR Buffer[800]; // [esp+1Ch] [ebp-720h] BYREF
  char v6[1024];    // [esp+33Ch] [ebp-400h] BYREF

  if (!unk)
    return 0;
  if (dword_10AA29D8 && *(_WORD *)(dword_10AA29D4 + 123236)) {
    if (!dword_10A9D000) {
      v1 = sub_1003D030(&v4);
      if (v1 < 0)
        goto LABEL_11;
      memset(Buffer, 0, sizeof(Buffer));
      pcbBuffer = 200;
      GetUserNameA(Buffer, &pcbBuffer);
      v1 = sub_1003C740(unk, (int)&v4, (int)Buffer, dword_10A9D008);
      if (v1 == -2005465056) {
        result = meth_unk1A5E0_3(v2);
        if (!result)
          return result;
        v1 = sub_1003C740(unk, (int)&v4, (int)Buffer, dword_10A9D008);
      }
      if (v1 < 0) {
      LABEL_11:
        sub_1003BF60();
        np_sub_1003C020();
        sprintf(v6, "Could not join session because of error 0x%08X", v1);
        return 0;
      }
    }
    gNetworkPlay = 1;
    sub_10005B10();
    sub_1003CE80();
  }
  return 1;
}
// 1003C314: variable 'v2' is possibly undefined
// 1022AF18: using guessed type int gNetworkPlay;
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA29D4: using guessed type int dword_10AA29D4;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (1003C3A0) --------------------------------------------------------
int __stdcall sub_1003C3A0(HWND a1, int a2, int a3, char *pMem) {
  HGLOBAL v4; // eax
  HGLOBAL v5; // eax

  if (a2 == 275) {
    if (dword_10AA29D4)
      sub_1003CC70(unk);
    if (!dword_10AA2884)
      sub_1003CE80();
    return 0;
  }
  if (a2 != 1281)
    return 0;
  if (gUnk1E214)
    gUnk1E214->field_3838.lpVtbl->meth4(&gUnk1E214->field_3838, pMem, 0, 1, (int)dword_100AB408, 1);
  v4 = GlobalHandle(pMem);
  GlobalUnlock(v4);
  v5 = GlobalHandle(pMem);
  GlobalFree(v5);
  return 0;
}
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA29D4: using guessed type int dword_10AA29D4;

//----- (1003C430) --------------------------------------------------------
int __stdcall sub_1003C430(IID *iid, int a2, SIZE_T dwBytes, int a4, int a5, int a6) {
  int v6;     // ecx
  int v7;     // ebx
  HGLOBAL v8; // eax
  void *v9;   // eax

  if (!memcmp(iid, &DPSPGUID_MODEM, 0x10u)) {
    v6 = 2;
  } else if (!memcmp(iid, &IID_IDirectPlay2A, 0x10u)) {
    v6 = 1;
  } else if (!memcmp(iid, &IID_IDirectPlay2, 0x10u)) {
    v6 = 0;
  } else {
    if (memcmp(iid, &DPSPGUID_SERIAL, 0x10u))
      return 1;
    v6 = 3;
  }
  v7 = 56 * v6;
  qmemcpy((char *)&unk_10A9BFF0 + 224 * v6, *(const void **)(a4 + 8), 0xC8u);
  *((IID *)&unk_10A9C0B8 + 14 * v6) = *iid;
  v8 = GlobalAlloc(0x42u, dwBytes);
  v9 = GlobalLock(v8);
  dword_10A9C0CC[v7] = (int)v9;
  if (v9) {
    qmemcpy(v9, (const void *)a2, dwBytes);
    dword_10A9C0C8[v7] = dwBytes;
  }
  return 1;
}
// 10090890: using guessed type IID IID_IDirectPlay2;
// 100908A0: using guessed type IID IID_IDirectPlay2A;
// 100908B0: using guessed type IID DPSPGUID_SERIAL;
// 100908C0: using guessed type IID DPSPGUID_MODEM;
// 10A9C0C8: using guessed type int dword_10A9C0C8[];
// 10A9C0CC: using guessed type int dword_10A9C0CC[];

//----- (1003C520) --------------------------------------------------------
HRESULT __cdecl sub_1003C520(LPVOID *a1) {
  HRESULT result; // eax
  LPVOID ppv;     // [esp+0h] [ebp-4h] BYREF

  ppv = 0;
  result = CoCreateInstance(&CLSID_DirectPlay, 0, 1u, &IID_IDirectPlay3A, &ppv);
  *a1 = ppv;
  return result;
}

//----- (1003C550) --------------------------------------------------------
int sub_1003C550() {
  _DWORD *v0; // ecx
  int v1;     // edx

  sub_1003D070();
  v0 = (_DWORD *)dword_10A9D008;
  if (*(_DWORD *)dword_10A9D008) {
    v1 = *(_DWORD *)(dword_10A9D008 + 8);
    if (v1) {
      (*(void(__stdcall **)(_DWORD, int))(**(_DWORD **)dword_10A9D008 + 36))(
          *(_DWORD *)dword_10A9D008, v1);
      *(_DWORD *)(dword_10A9D008 + 8) = 0;
      v0 = (_DWORD *)dword_10A9D008;
    }
    (*(void(__stdcall **)(_DWORD))(*(_DWORD *)*v0 + 16))(*v0);
    (*(void(__stdcall **)(_DWORD))(**(_DWORD **)dword_10A9D008 + 8))(*(_DWORD *)dword_10A9D008);
    *(_DWORD *)dword_10A9D008 = 0;
  }
  unk = 0;
  --dword_10A9D004;
  return 0;
}
// 1003D070: using guessed type int sub_1003D070(void);
// 10A9D004: using guessed type int dword_10A9D004;

//----- (1003C5C0) --------------------------------------------------------
int __cdecl sub_1003C5C0(int *a1, int a2, int *a3) {
  int result;  // eax
  int v4;      // ecx
  int v5;      // ebp
  int v6;      // edx
  int v7;      // eax
  int v8;      // ecx
  int v9;      // edx
  int v10;     // eax
  int v11;     // edx
  int v12;     // ecx
  int v13;     // [esp+30h] [ebp-78h] BYREF
  int v14[2];  // [esp+34h] [ebp-74h] BYREF
  char *v15;   // [esp+3Ch] [ebp-6Ch]
  int v16;     // [esp+40h] [ebp-68h]
  int v17;     // [esp+44h] [ebp-64h]
  int v18;     // [esp+50h] [ebp-58h]
  int v19;     // [esp+54h] [ebp-54h]
  int v20[20]; // [esp+58h] [ebp-50h] BYREF

  if (dword_10A9D000)
    return 0;
  if (!a1)
    return -2005467006;
  memset(v20, 0, sizeof(v20));
  v20[7] = 299025032;
  v4 = *(_DWORD *)(a2 + 200);
  v20[6] = -1363573792;
  v5 = *a1;
  v20[9] = (int)&unk_11321608;
  v20[8] = 1610667455;
  v20[17] = gChosenWeather0;
  v20[1] = v4 != 0 ? 320 : 64;
  v20[16] = gChosenTrack;
  v20[0] = 80;
  v20[10] = 8;
  v20[12] = a2;
  v20[18] = dword_10AA2A18;
  v20[19] = dword_100AC658;
  result = (*(int(__stdcall **)(int *, int *, int, _DWORD, _DWORD))(v5 + 156))(a1, v20, 130, 0, 0);
  if (result >= 0) {
    v14[0] = 0;
    v6 = *a3;
    v7 = a3[3];
    v14[1] = 0;
    v17 = v6;
    v15 = 0;
    *a3 = (int)a1;
    v16 = 0;
    v8 = a3[4];
    a3[3] = 1;
    v9 = *(_DWORD *)(a2 + 200);
    v18 = v7;
    v10 = a3[1];
    v19 = v8;
    a3[4] = v9;
    v14[0] = 16;
    v15 = dplay4aShortName;
    result = (*(int(__stdcall **)(int *, int *, int *, int, _DWORD, _DWORD, int))(v5 + 24))(
        a1, &v13, v14, v10, 0, 0, 256);
    if (result < 0) {
      v11 = v18;
      *a3 = v17;
      v12 = v19;
      a3[3] = v11;
      a3[4] = v12;
      return result;
    }
    a3[2] = v13;
    return 0;
  }
  return result;
}
// 1008F538: using guessed type int dword_1008F538;
// 100AC658: using guessed type int dword_100AC658;
// 100B380C: using guessed type int g_chosenTrack;
// 1022B350: using guessed type int g_ChosenWeather;
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA2A18: using guessed type int dword_10AA2A18;

//----- (1003C740) --------------------------------------------------------
int __cdecl sub_1003C740(SIZE_T dwBytes, int a2, int a3, int a4) {
  int *v5;          // edi
  int v6;           // ebp
  int v7;           // edi
  _DWORD *v8;       // eax
  int v9;           // ecx
  int v10;          // ecx
  int v11;          // edx
  unsigned int v12; // eax
  int v13;          // edx
  int v14;          // eax
  HGLOBAL v15;      // eax
  HGLOBAL v16;      // eax
  LPCVOID v17;      // eax
  HGLOBAL v18;      // eax
  HGLOBAL v19;      // eax
  int v20;          // [esp+1Ch] [ebp-A4h]
  LPCVOID pMem;     // [esp+30h] [ebp-90h] BYREF
  int v22[2];       // [esp+34h] [ebp-8Ch] BYREF
  int v23;          // [esp+3Ch] [ebp-84h]
  int v24;          // [esp+40h] [ebp-80h]
  int v25;          // [esp+44h] [ebp-7Ch]
  int v26[4];       // [esp+48h] [ebp-78h] BYREF
  int v27;          // [esp+58h] [ebp-68h] BYREF
  int v28;          // [esp+5Ch] [ebp-64h]
  int v29;          // [esp+68h] [ebp-58h]
  int v30;          // [esp+6Ch] [ebp-54h]
  int v31[20];      // [esp+70h] [ebp-50h] BYREF

  pMem = 0;
  if (!dwBytes)
    return -2005467006;
  memset(v31, 0, sizeof(v31));
  v31[0] = 80;
  v5 = 0;
  v31[2] = *(_DWORD *)a2;
  v31[3] = *(_DWORD *)(a2 + 4);
  v31[4] = *(_DWORD *)(a2 + 8);
  v31[5] = *(_DWORD *)(a2 + 12);
  v23 = 0;
  v22[0] = 20;
  v24 = 0;
  v22[1] = 0;
  v25 = 0;
  if (lstrlenA((LPCSTR)(a3 + 200))) {
    v23 = a3 + 200;
    v5 = v22;
  }
  if (lstrlenA((LPCSTR)(a3 + 400))) {
    v24 = a3 + 400;
    v5 = v22;
  }
  if (lstrlenA((LPCSTR)(a3 + 600))) {
    v25 = a3 + 600;
    v5 = v22;
  }
  v6 = *(_DWORD *)dwBytes;
  v7 = (*(int(__stdcall **)(SIZE_T, int *, int, _DWORD, int *))(*(_DWORD *)dwBytes + 156))(
      dwBytes, v31, 129, 0, v5);
  if (v7 < 0 || (v26[1] = 0,
                 v26[0] = 16,
                 v26[2] = (int)dplay4aShortName,
                 v26[3] = 0,
                 v7 = sub_1003D0B0(dwBytes, (LPDWORD)&pMem),
                 v7 < 0)) {
  LABEL_17:
    v8 = pMem;
    goto LABEL_18;
  }
  v8 = pMem;
  if (*((_DWORD *)pMem + 11) < 8u) {
    v9 = 0;
    if (dword_1022AF1C)
      v9 = 512;
    v20 = v9;
    v10 = *(_DWORD *)(a4 + 4);
    v28 = *(_DWORD *)a4;
    v11 = *(_DWORD *)(a4 + 12);
    *(_DWORD *)a4 = dwBytes;
    *(_DWORD *)(a4 + 12) = 0;
    v12 = v8[1];
    v29 = v11;
    v30 = *(_DWORD *)(a4 + 16);
    *(_DWORD *)(a4 + 16) = (v12 >> 8) & 1;
    v7 = (*(int(__stdcall **)(SIZE_T, int *, int *, int, _DWORD, _DWORD, int))(v6 + 24))(
        dwBytes, &v27, v26, v10, 0, 0, v20);
    if (v7 >= 0) {
      v17 = pMem;
      *(_DWORD *)(a4 + 8) = v27;
      dword_100AC648 = *((_DWORD *)v17 + 16);
      gChosenTrack = dword_100AC648;
      dword_10AA2A00 = *((_DWORD *)v17 + 17);
      gChosenWeather0 = dword_10AA2A00;
      dword_10AA2A18 = *((_DWORD *)v17 + 18);
      dword_100BD3E0 = *((_DWORD *)v17 + 19);
      dword_100AC658 = dword_100BD3E0;
      qmemcpy(g_lpSessionDesc_dwUser3, *((const void **)v17 + 12), sizeof(g_lpSessionDesc_dwUser3));
      v18 = GlobalHandle(v17);
      GlobalUnlock(v18);
      v19 = GlobalHandle(pMem);
      GlobalFree(v19);
      return 0;
    }
    v13 = v29;
    v14 = v30;
    *(_DWORD *)a4 = v28;
    *(_DWORD *)(a4 + 12) = v13;
    *(_DWORD *)(a4 + 16) = v14;
    goto LABEL_17;
  }
  v7 = -2005467096;
LABEL_18:
  if (v8) {
    v15 = GlobalHandle(v8);
    GlobalUnlock(v15);
    v16 = GlobalHandle(pMem);
    GlobalFree(v16);
  }
  return v7;
}
// 100AC648: using guessed type int dword_100AC648;
// 100AC658: using guessed type int dword_100AC658;
// 100B380C: using guessed type int g_chosenTrack;
// 1022AF1C: using guessed type int dword_1022AF1C;
// 1022B350: using guessed type int g_ChosenWeather;
// 10AA2A00: using guessed type int dword_10AA2A00;
// 10AA2A18: using guessed type int dword_10AA2A18;

//----- (1003C9B0) --------------------------------------------------------
int sub_1003C9B0() {
  int result;      // eax
  unsigned int v1; // esi
  unsigned int v2; // edi

  result = dword_10AA29E4;
  if (dword_10AA29E4) {
    v1 = 0;
    v2 = *(unsigned __int16 *)(dword_10AA29E4 + 123236);
    if ((_WORD)v2) {
      while (1) {
        result = (*(int(__thiscall **)(int, unsigned int))(*(_DWORD *)(result + 14392) + 44))(
            result + 14392, v1++);
        if (v1 >= v2)
          break;
        result = dword_10AA29E4;
      }
    }
  }
  return result;
}
// 10AA29E4: using guessed type int dword_10AA29E4;

//----- (1003C9F0) --------------------------------------------------------
int __cdecl sub_1003C9F0(int a1) {
  char v1;    // bl
  int v2;     // edx
  int result; // eax

  v1 = -1;
  v2 = 0;
  result = (int)dword_10AA2538;
  do {
    if (*(_DWORD *)result == a1) {
      result = 3 * v2;
      dword_10AA2540[3 * v2] = 1;
      return result;
    }
    if (*(_DWORD *)result == -1 && v1 < 0)
      v1 = v2;
    result += 12;
    ++v2;
  } while (result < (int)&dword_10AA2598);
  if (v1 >= 0) {
    result = 12 * v1;
    *(int *)((char *)dword_10AA2538 + result) = a1;
    if (a1 == 1) {
      dword_10AA253C[3 * v1] = 1;
      dword_10AA2540[3 * v1] = 1;
    } else {
      dword_10AA253C[3 * v1] = 0;
      dword_10AA2540[3 * v1] = 1;
    }
  }
  return result;
}
// 10AA2538: using guessed type int dword_10AA2538[];
// 10AA253C: using guessed type int dword_10AA253C[];
// 10AA2598: using guessed type int dword_10AA2598;

//----- (1003CA70) --------------------------------------------------------
int *sub_1003CA70() {
  int *result; // eax

  result = dword_10AA2540;
  do {
    if (!*result) {
      *(result - 2) = -1;
      *(result - 1) = 0;
      *result = 0;
    }
    result += 3;
  } while ((int)result < (int)flt_10AA25A0);
  return result;
}

//----- (1003CAA0) --------------------------------------------------------
int __stdcall sub_1003CAA0(int a1, int a2, int a3, __int16 a4, int a5) {
  int result; // eax

  result = dword_10AA29E4;
  if (dword_10AA29E4) {
    if ((a4 & 0x200) == 0) {
      (*(void(__thiscall **)(int, _DWORD, _DWORD, int, void *, int))(
          *(_DWORD *)(dword_10AA29E4 + 14392) + 16))(
          dword_10AA29E4 + 14392, *(_DWORD *)(a3 + 8), 0, 1, &dword_100AB3F8, 1);
      *(_DWORD *)(dword_10AA29E4 + 1080 * *(unsigned __int16 *)(dword_10AA29E4 + 123236) + 14432) =
          a1;
      sub_1003C9F0(a1);
    }
    result = 1;
  }
  return result;
}
// 10AA29E4: using guessed type int dword_10AA29E4;

//----- (1003CB10) --------------------------------------------------------
int __cdecl sub_1003CB10(int a1, int a2, int a3, int a4) {
  int v4;  // esi
  int *v5; // eax
  int v6;  // eax

  v4 = -2147467259;
  if (dword_10AA29E4)
    sub_1003C9B0();
  v5 = dword_10AA2540;
  do {
    *v5 = 0;
    v5 += 3;
  } while ((int)v5 < (int)flt_10AA25A0);
  if (unk)
    v4 = (*(int(__stdcall **)(SIZE_T, int, int, int, int))(*(_DWORD *)unk + 48))(
        unk, a1, a2, a3, a4);
  sub_1003CA70();
  v6 = sub_100586D0(*(_DWORD *)(dword_10A9D008 + 8));
  sub_1003D950(dword_10A9D008, v6);
  return v4;
}
// 1003C9B0: using guessed type int sub_1003C9B0(void);
// 1003CA70: using guessed type int sub_1003CA70(void);
// 1003D950: using guessed type _DWORD __cdecl sub_1003D950(_DWORD, _DWORD);
// 100586D0: using guessed type _DWORD __cdecl sub_100586D0(_DWORD);
// 10AA29E4: using guessed type int dword_10AA29E4;

//----- (1003CB90) --------------------------------------------------------
int __stdcall sub_1003CB90(int a1, int a2, _DWORD *a3, int a4) {
  int v5;     // eax
  HGLOBAL v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // esi

  if (!dword_10AA29D4)
    return 0;
  if (((unsigned __int8)a3 & 1) != 0)
    return 0;
  if (dword_10AA2898) {
    if (*(_DWORD *)(a1 + 44) >= 8u || (*(_BYTE *)(a1 + 4) & 0x20) != 0) {
      v5 = 17;
      LOBYTE(a3) = 0;
    } else {
      v5 = 1;
      LOBYTE(a3) = 1;
    }
    (*(void(__thiscall **)(int, _DWORD, int, _DWORD *, int *, int))(
        *(_DWORD *)(dword_10AA29D4 + 14392) + 16))(
        dword_10AA29D4 + 14392, *(_DWORD *)(a1 + 48), v5, a3, &dword_100AB448, 1);
    v6 = GlobalAlloc(0x42u, 0x10u);
    v7 = GlobalLock(v6);
    v8 = v7;
    if (!v7)
      return 1;
    *v7 = *(_DWORD *)(a1 + 8);
    v7[1] = *(_DWORD *)(a1 + 12);
    v7[2] = *(_DWORD *)(a1 + 16);
    v7[3] = *(_DWORD *)(a1 + 20);
    (*(void(__thiscall **)(int, _DWORD *, int, int))(*(_DWORD *)(dword_10AA29D4 + 14392) + 40))(
        dword_10AA29D4 + 14392, v7, 16, -1);
  } else {
    v8 = a3;
  }
  sub_1003CB10((int)v8, (int)sub_1003CAA0, a4, 0);
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA29D4: using guessed type int dword_10AA29D4;

//----- (1003CC70) --------------------------------------------------------
int __cdecl sub_1003CC70(int a1) {
  int result; // eax
  int v2;     // esi
  int v3;     // eax
  int v4;     // eax
  int v5[20]; // [esp+4h] [ebp-50h] BYREF

  if (!a1)
    return -2005467006;
  sub_1003D070();
  memset(v5, 0, sizeof(v5));
  v5[6] = -1363573792;
  v5[9] = (int)&unk_11321608;
  v5[0] = 80;
  v5[7] = 299025032;
  v5[8] = 1610667455;
  dword_10AA2874 = 1;
  if (dword_10AA2898)
    v2 = (*(int(__stdcall **)(
        int, int *, _DWORD, int(__stdcall *)(int, int, _DWORD *, int), HWND, int))(
        *(_DWORD *)a1 + 52))(a1, v5, 0, sub_1003CB90, gHwnd, 145);
  else
    v2 = a1;
  sub_1003CB10((int)&v5[2], (int)sub_1003CAA0, (int)gHwnd, 0);
  dword_10AA2874 = 0;
  if (dword_10AA29D8 && *(_WORD *)(dword_10AA29D4 + 123236) &&
      (*(_BYTE *)(dword_10AA29D4 + 1080 * dword_10AA2880 + 14440) & 0x10) == 0) {
    v3 = *(_DWORD *)(dword_10AA29D8 + 28);
    LOBYTE(v3) = v3 & 0xEF;
    *(_DWORD *)(dword_10AA29D8 + 28) = v3;
    result = v2;
    *(_BYTE *)(dword_10AA29D8 + 11108) = 1;
  } else {
    v4 = *(_DWORD *)(dword_10AA29D8 + 28);
    LOBYTE(v4) = v4 | 0x10;
    *(_DWORD *)(dword_10AA29D8 + 28) = v4;
    result = v2;
    *(_BYTE *)(dword_10AA29D8 + 11108) = 0;
  }
  return result;
}
// 1008F538: using guessed type int dword_1008F538;
// 10AA2874: using guessed type int dword_10AA2874;
// 10AA2880: using guessed type int dword_10AA2880;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA29D4: using guessed type int dword_10AA29D4;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (1003CDA0) --------------------------------------------------------
int sub_1003CDA0() {
  int result;   // eax
  int v1;       // esi
  HGLOBAL v2;   // eax
  HGLOBAL v3;   // eax
  HGLOBAL v4;   // eax
  HGLOBAL v5;   // eax
  LPCVOID pMem; // [esp+Ch] [ebp-4h] BYREF

  pMem = 0;
  if (!unk)
    return -2005467006;
  v1 = sub_1003D0B0(unk, (LPDWORD)&pMem);
  if (v1 >= 0 &&
      (*((_DWORD *)pMem + 16) = gChosenTrack,
       *((_DWORD *)pMem + 17) = gChosenWeather0,
       *((_DWORD *)pMem + 18) = dword_10AA2A18,
       *((_DWORD *)pMem + 19) = dword_100AC658,
       sub_10044540(),
       v1 = (*(int(__stdcall **)(SIZE_T, LPCVOID, _DWORD))(*(_DWORD *)unk + 124))(unk, pMem, 0),
       v1 >= 0)) {
    v4 = GlobalHandle(pMem);
    GlobalUnlock(v4);
    v5 = GlobalHandle(pMem);
    GlobalFree(v5);
    result = 0;
  } else {
    if (pMem) {
      v2 = GlobalHandle(pMem);
      GlobalUnlock(v2);
      v3 = GlobalHandle(pMem);
      GlobalFree(v3);
    }
    result = v1;
  }
  return result;
}
// 100AC658: using guessed type int dword_100AC658;
// 100B380C: using guessed type int g_chosenTrack;
// 1022B350: using guessed type int g_ChosenWeather;
// 10AA2A18: using guessed type int dword_10AA2A18;

//----- (1003CE80) --------------------------------------------------------
int sub_1003CE80() {
  int result;     // eax
  int v1;         // esi
  HGLOBAL v2;     // eax
  HGLOBAL v3;     // eax
  int v4;         // esi
  int v5;         // eax
  LPCVOID v6;     // edx
  const char *v7; // edi
  HGLOBAL v8;     // eax
  HGLOBAL v9;     // eax
  LPCVOID pMem;   // [esp+8h] [ebp-54h] BYREF
  char v11[80];   // [esp+Ch] [ebp-50h] BYREF

  pMem = 0;
  if (!unk)
    return -2005467006;
  memset(v11, 0, sizeof(v11));
  v1 = sub_1003D0B0(unk, (LPDWORD)&pMem);
  if (v1 >= 0) {
    dword_100AC648 = *((_DWORD *)pMem + 16);
    gChosenTrack = dword_100AC648;
    dword_10AA2A00 = *((_DWORD *)pMem + 17);
    gChosenWeather0 = dword_10AA2A00;
    dword_10AA2A18 = *((_DWORD *)pMem + 18);
    dword_100BD3E0 = *((_DWORD *)pMem + 19);
    dword_100AC658 = dword_100BD3E0;
    sub_10044540();
    v4 = dword_100AC654;
    if (!sub_1003F320(dword_100AC654)) {
      do {
        v5 = ++dword_100AC654;
        if (dword_100AC654 > 31) {
          v5 = 0;
          dword_100AC654 = 0;
        }
      } while (v5 != v4 && !sub_1003F320(v5));
    }
    v6 = pMem;
    v7 = (const char *)*((_DWORD *)pMem + 12);
    if (v7)
      strcpy(g_lpSessionDesc_dwUser3, v7);
    v8 = GlobalHandle(v6);
    GlobalUnlock(v8);
    v9 = GlobalHandle(pMem);
    GlobalFree(v9);
    result = 0;
  } else {
    if (pMem) {
      v2 = GlobalHandle(pMem);
      GlobalUnlock(v2);
      v3 = GlobalHandle(pMem);
      GlobalFree(v3);
    }
    result = v1;
  }
  return result;
}
// 100AC648: using guessed type int dword_100AC648;
// 100AC654: using guessed type int dword_100AC654;
// 100AC658: using guessed type int dword_100AC658;
// 100B380C: using guessed type int g_chosenTrack;
// 1022B350: using guessed type int g_ChosenWeather;
// 10AA2A00: using guessed type int dword_10AA2A00;
// 10AA2A18: using guessed type int dword_10AA2A18;

//----- (1003CFC0) --------------------------------------------------------
int __cdecl sub_1003CFC0(_DWORD *a1) {
  int result; // eax

  result = 0;
  *a1 = (char *)&unk_10A9C0B8 + 224 * dword_10AA287C;
  return result;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (1003CFE0) --------------------------------------------------------
void sub_1003CFE0() {
  LPCVOID *v0; // edi
  LPCVOID v1;  // esi
  HGLOBAL v2;  // eax
  HGLOBAL v3;  // eax

  v0 = (LPCVOID *)dword_10A9C0CC;
  do {
    v1 = *v0;
    if (*v0) {
      v2 = GlobalHandle(*v0);
      GlobalUnlock(v2);
      v3 = GlobalHandle(v1);
      GlobalFree(v3);
      *v0 = 0;
    }
    v0 += 56;
  } while ((int)v0 < (int)&unk_10A9CECC);
}
// 10A9C0CC: using guessed type int dword_10A9C0CC[];

//----- (1003D030) --------------------------------------------------------
int __cdecl sub_1003D030(_DWORD *a1) {
  _DWORD *v1; // eax

  if (dword_10AA29D4) {
    v1 = *(_DWORD **)(dword_10AA29D4 + 8 * dword_10AA2880 + 122440);
    if (v1) {
      *a1 = *v1;
      a1[1] = v1[1];
      a1[2] = v1[2];
      a1[3] = v1[3];
    }
  }
  return 0;
}
// 10AA2880: using guessed type int dword_10AA2880;
// 10AA29D4: using guessed type int dword_10AA29D4;

//----- (1003D070) --------------------------------------------------------
int sub_1003D070() {
  int result;      // eax
  unsigned int v1; // esi
  unsigned int v2; // edi

  result = dword_10AA29D4;
  if (dword_10AA29D4) {
    v1 = 0;
    v2 = *(unsigned __int16 *)(dword_10AA29D4 + 123236);
    if ((_WORD)v2) {
      while (1) {
        result = (*(int(__thiscall **)(int, unsigned int))(*(_DWORD *)(result + 14392) + 44))(
            result + 14392, v1++);
        if (v1 >= v2)
          break;
        result = dword_10AA29D4;
      }
    }
  }
  return result;
}
// 10AA29D4: using guessed type int dword_10AA29D4;

//----- (1003D0B0) --------------------------------------------------------
int __cdecl sub_1003D0B0(SIZE_T dwBytes, LPDWORD a2) {
  SIZE_T size;                                         // ebx
  const void *lpv;                                     // esi
  int(__stdcall * v4)(SIZE_T, const void *, SIZE_T *); // ebp
  int v5;                                              // edi
  HGLOBAL mem;                                         // eax
  HGLOBAL v7;                                          // eax
  HGLOBAL v8;                                          // eax

  size = dwBytes;
  lpv = 0;
  v4 = *(int(__stdcall **)(SIZE_T, const void *, SIZE_T *))(*(_DWORD *)dwBytes + 88);
  v5 = v4(dwBytes, 0, &dwBytes);
  if (v5 == -2005467106) {
    mem = GlobalAlloc(0x42u, dwBytes);
    lpv = GlobalLock(mem);
    if (lpv) {
      v5 = v4(size, lpv, &dwBytes);
      if (v5 >= 0) {
        *a2 = (DWORD)lpv;
        lpv = 0;
      }
    } else {
      v5 = -2147024882;
    }
  }
  if (lpv) {
    v7 = GlobalHandle(lpv);
    GlobalUnlock(v7);
    v8 = GlobalHandle(lpv);
    GlobalFree(v8);
  }
  return v5;
}

//----- (1003D130) --------------------------------------------------------
unsigned int __cdecl sub_1003D130(_DWORD *a1) {
  unsigned int result; // eax

  result = 0;
  if (strlen(g_lpSessionDesc_dwUser3) > 1) {
    result = strlen(g_lpSessionDesc_dwUser3) + 1;
    qmemcpy(a1, g_lpSessionDesc_dwUser3, result);
  }
  a1[50] = 0;
  return result;
}

//----- (1003D180) --------------------------------------------------------
int __cdecl sub_1003D180(SIZE_T dwBytes, int a2, int a3) {
  SIZE_T v3;                                                // ebx
  const void *v4;                                           // edi
  int(__stdcall * v5)(SIZE_T, int, const void *, SIZE_T *); // ebp
  int v6;                                                   // esi
  HGLOBAL v7;                                               // eax
  const void *v8;                                           // eax
  HGLOBAL v9;                                               // eax
  HGLOBAL v10;                                              // eax

  v3 = dwBytes;
  v4 = 0;
  v5 = *(int(__stdcall **)(SIZE_T, int, const void *, SIZE_T *))(*(_DWORD *)dwBytes + 84);
  v6 = v5(dwBytes, a2, 0, &dwBytes);
  if (v6 == -2005467106) {
    v7 = GlobalAlloc(0x42u, dwBytes);
    v8 = GlobalLock(v7);
    v4 = v8;
    if (v8) {
      v6 = v5(v3, a2, v8, &dwBytes);
      if (v6 >= 0) {
        *(_DWORD *)a3 = v4;
        return 0;
      }
    } else {
      v6 = -2147024882;
    }
  }
  if (v4) {
    v9 = GlobalHandle(v4);
    GlobalUnlock(v9);
    v10 = GlobalHandle(v4);
    GlobalFree(v10);
  }
  return v6;
}

//----- (1003D210) --------------------------------------------------------
int __cdecl sub_1003D210(HWND hWnd, int a2, int a3) {
  CHAR *v3;                       // ebp
  HGLOBAL v4;                     // eax
  char *v5;                       // ebx
  int v7;                         // esi
  HGLOBAL v8;                     // eax
  CHAR *v9;                       // eax
  HGLOBAL v10;                    // eax
  HGLOBAL v11;                    // eax
  void(__stdcall * v12)(HGLOBAL); // ebx
  HGLOBAL v13;                    // eax
  HGLOBAL v14;                    // eax
  HGLOBAL v15;                    // eax
  HGLOBAL v16;                    // eax
  LPARAM lParam;                  // [esp+10h] [ebp-4h] BYREF
  int v19;                        // [esp+1Ch] [ebp+8h]

  v3 = 0;
  lParam = 0;
  if (!a2 || !*(_DWORD *)a2 || dword_10AA288C)
    return 0;
  v4 = GlobalAlloc(0x42u, 0xC9u);
  v5 = (char *)GlobalLock(v4);
  if (v5) {
    strcpy(v5, byte_10A9DD28);
    v19 = sub_1003D3A0(*(_DWORD *)a2, *(_DWORD *)(a2 + 8), v5, (int)&lParam, a3);
    if (v19 >= 0) {
      PostMessageA(hWnd, 0x501u, 0, lParam);
      lParam = 0;
      v7 = lstrlenA(v5) + 8;
      v8 = GlobalAlloc(0x42u, v7);
      v9 = (CHAR *)GlobalLock(v8);
      v3 = v9;
      if (v9) {
        *(_DWORD *)v9 = (a3 != 0) + 1610612736;
        lstrcpyA(v9 + 4, v5);
        v19 = sub_1000C4D0(*(_DWORD *)a2, *(_DWORD *)(a2 + 8), 0, 1, (int)v3, v7);
      } else {
        v19 = -2147024882;
      }
    }
  } else {
    v19 = -2147024882;
  }
  if (v5) {
    v10 = GlobalHandle(v5);
    GlobalUnlock(v10);
    v11 = GlobalHandle(v5);
    v12 = (void(__stdcall *)(HGLOBAL))GlobalFree;
    GlobalFree(v11);
  } else {
    v12 = (void(__stdcall *)(HGLOBAL))GlobalFree;
  }
  if (lParam) {
    v13 = GlobalHandle((LPCVOID)lParam);
    GlobalUnlock(v13);
    v14 = GlobalHandle((LPCVOID)lParam);
    v12(v14);
  }
  if (v3) {
    v15 = GlobalHandle(v3);
    GlobalUnlock(v15);
    v16 = GlobalHandle(v3);
    v12(v16);
  }
  return v19;
}
// 10AA288C: using guessed type int dword_10AA288C;

//----- (1003D3A0) --------------------------------------------------------
SIZE_T __cdecl sub_1003D3A0(SIZE_T dwBytes, int a2, LPCSTR lpString, int a4, int a5) {
  SIZE_T result;       // eax
  const CHAR *v6;      // ebp
  const CHAR *v7;      // edi
  int v8;              // ebx
  int v9;              // eax
  HGLOBAL v10;         // eax
  CHAR *v11;           // eax
  CHAR *v12;           // esi
  HGLOBAL v13;         // eax
  HGLOBAL v14;         // eax
  LPCVOID pMem;        // [esp+0h] [ebp-4h] BYREF
  signed int dwBytesa; // [esp+8h] [ebp+4h]
  int v17;             // [esp+18h] [ebp+14h]

  result = dwBytes;
  pMem = 0;
  if (dwBytes) {
    v6 = aSS_0;
    if (!a5)
      v6 = aSS_1;
    dwBytesa = sub_1003D180(dwBytes, a2, (int)&pMem);
    if (dwBytesa >= 0) {
      v7 = (const CHAR *)*((_DWORD *)pMem + 2);
      if (!v7)
        v7 = aUnknown;
      v8 = lstrlenA(v6);
      v17 = lstrlenA(v7) + v8;
      v9 = lstrlenA(lpString);
      v10 = GlobalAlloc(0x42u, v17 + v9 + 1);
      v11 = (CHAR *)GlobalLock(v10);
      v12 = v11;
      if (v11) {
        wsprintfA(v11, v6, v7, lpString);
        *(_DWORD *)a4 = v12;
      } else {
        dwBytesa = -2147024882;
      }
    }
    if (pMem) {
      v13 = GlobalHandle(pMem);
      GlobalUnlock(v13);
      v14 = GlobalHandle(pMem);
      GlobalFree(v14);
    }
    result = dwBytesa;
  }
  return result;
}

//----- (1003D480) --------------------------------------------------------
int __cdecl sub_1003D480(_DWORD *a1, SIZE_T *a2) {
  const void *v2;  // ebp
  int v3;          // edi
  int v4;          // esi
  int v5;          // eax
  int v6;          // edi
  _DWORD *v7;      // eax
  int v8;          // eax
  HGLOBAL v9;      // eax
  HGLOBAL v10;     // eax
  HGLOBAL v11;     // eax
  SIZE_T v13;      // edx
  SIZE_T dwBytes;  // [esp+28h] [ebp-50h] BYREF
  const void *v15; // [esp+2Ch] [ebp-4Ch] BYREF
  int v16;         // [esp+30h] [ebp-48h] BYREF
  int v17;         // [esp+34h] [ebp-44h]
  int v18;         // [esp+38h] [ebp-40h]
  int v19;         // [esp+3Ch] [ebp-3Ch]
  int v20;         // [esp+40h] [ebp-38h]
  IID *v21;        // [esp+44h] [ebp-34h]
  int v22;         // [esp+48h] [ebp-30h]
  int v23;         // [esp+4Ch] [ebp-2Ch]
  int v24;         // [esp+50h] [ebp-28h]
  int v25;         // [esp+54h] [ebp-24h]
  int v26;         // [esp+58h] [ebp-20h]
  CHAR *v27;       // [esp+5Ch] [ebp-1Ch]
  int v28;         // [esp+60h] [ebp-18h]
  int v29;         // [esp+64h] [ebp-14h]
  int v30;         // [esp+68h] [ebp-10h]
  void *v31;       // [esp+6Ch] [ebp-Ch]
  int v32;         // [esp+70h] [ebp-8h]
  CHAR *v33;       // [esp+74h] [ebp-4h]

  v2 = 0;
  dwBytes = 0;
  v3 = sub_1003CFC0(&v15);
  if (v3 >= 0) {
    if (!memcmp(v15, &DPSPGUID_MODEM, 0x10u)) {
      v16 = 131667648;
      v17 = 298836143;
      v18 = -1610592612;
      v19 = 1581385161;
      v4 = 1;
      v20 = 16;
      v21 = &DPSPGUID_MODEM;
      if (strlen(byte_10A9CEF8) > 1) {
        v22 = -153304576;
        v23 = 298885886;
        v24 = -1610592356;
        v25 = 1581385161;
        v5 = lstrlenA(byte_10A9CEF8);
        v27 = byte_10A9CEF8;
        v26 = v5 + 1;
        v4 = 2;
      }
      if (String1) {
        v6 = 24 * v4;
        v7 = (int *)((char *)&v16 + v6);
        *(int *)((char *)&v16 + v6) = 2028767648;
        v7[1] = 298836143;
        v7[2] = -1610592612;
        v7[3] = 1581385161;
        ++v4;
        *(int *)((char *)&v20 + v6) = lstrlenA(String1) + 1;
        *(IID **)((char *)&v21 + v6) = (IID *)String1;
      }
    } else if (!memcmp(v15, &IID_IDirectPlay2A, 0x10u)) {
      v16 = 131667648;
      v17 = 298836143;
      v18 = -1610592612;
      v19 = 1581385161;
      v20 = 16;
      v21 = &IID_IDirectPlay2A;
      if (strlen(byte_10B4E760) <= 1)
        lstrcpyA(byte_10B4E760, String2);
      v22 = -995799648;
      v23 = 298836143;
      v24 = -1610592612;
      v25 = 1581385161;
      v26 = lstrlenA(byte_10B4E760) + 1;
      v27 = byte_10B4E760;
      if (strlen(byte_10B4E740) <= 1)
        lstrcpyA(byte_10B4E740, String2);
      v28 = -464370367;
      v29 = 298946213;
      v30 = 1610651274;
      v31 = &unk_1114B097;
      v8 = lstrlenA(byte_10B4E740);
      v33 = byte_10B4E740;
      v32 = v8 + 1;
      v4 = 3;
    } else {
      v17 = 298836143;
      v16 = 131667648;
      v19 = 1581385161;
      v18 = -1610592612;
      v20 = 16;
      v21 = !memcmp(v15, &IID_IDirectPlay2, 0x10u) ? &IID_IDirectPlay2 : &v15;
      v4 = 1;
    }
    v3 = (*(int(__stdcall **)(int, int *, int, _DWORD, SIZE_T *))(*(_DWORD *)dword_10A9BFD8 + 56))(
        dword_10A9BFD8, &v16, v4, 0, &dwBytes);
    if (v3 == -2005467106) {
      v9 = GlobalAlloc(0x42u, dwBytes);
      v2 = GlobalLock(v9);
      if (v2) {
        v3 = (*(int(__stdcall **)(int, int *, int, const void *, SIZE_T *))(
            *(_DWORD *)dword_10A9BFD8 + 56))(dword_10A9BFD8, &v16, v4, v2, &dwBytes);
        if (v3 >= 0) {
          v13 = dwBytes;
          *a1 = v2;
          *a2 = v13;
          return 0;
        }
      } else {
        v3 = -2147024882;
      }
    }
  }
  if (v2) {
    v10 = GlobalHandle(v2);
    GlobalUnlock(v10);
    v11 = GlobalHandle(v2);
    GlobalFree(v11);
  }
  return v3;
}
// 10090890: using guessed type IID IID_IDirectPlay2;
// 100908A0: using guessed type IID IID_IDirectPlay2A;
// 100908C0: using guessed type IID DPSPGUID_MODEM;
// 100909E0: using guessed type int dword_100909E0;
// 10A9BFD8: using guessed type int dword_10A9BFD8;

//----- (1003D7B0) --------------------------------------------------------
int __cdecl sub_1003D7B0(_DWORD *a1) {
  int v1;     // esi
  int result; // eax
  int v3;     // [esp+10h] [ebp-8h] BYREF
  int v4;     // [esp+14h] [ebp-4h] BYREF

  v3 = 0;
  v4 = 0;
  v1 = DirectPlayLobbyCreateA(0, (int)&v3, 0, 0, 0);
  if (v1 >= 0 &&
      (v1 = (**(int(__stdcall ***)(int, IID *, int *))v3)(v3, &IID_IDirectPlayLobby2A, &v4),
       v1 >= 0)) {
    (*(void(__stdcall **)(int))(*(_DWORD *)v3 + 8))(v3);
    v3 = 0;
    sub_1003D8A0((int)gHwnd, v4);
    result = 0;
    *a1 = v4;
  } else {
    if (v3)
      (*(void(__stdcall **)(int))(*(_DWORD *)v3 + 8))(v3);
    if (v4)
      (*(void(__stdcall **)(int))(*(_DWORD *)v4 + 8))(v4);
    result = v1;
  }
  return result;
}
// 10090910: using guessed type IID IID_IDirectPlayLobby2A;

//----- (1003D850) --------------------------------------------------------
int __stdcall sub_1003D850(int a1, int a2, LPCSTR lpString, int a4) {
  const CHAR *v4; // ebx

  v4 = lpString;
  if (!memcmp((const void *)a1, &dword_100909E0, 0x10u) && lstrlenA(lpString)) {
    do
      v4 += lstrlenA(v4) + 1;
    while (lstrlenA(v4));
  }
  return 1;
}
// 100909E0: using guessed type int dword_100909E0;

//----- (1003D8A0) --------------------------------------------------------
int __cdecl sub_1003D8A0(int a1, int a2) {
  int v2;         // ecx
  const void *v3; // esi
  int v4;         // edi
  HGLOBAL v5;     // eax
  HGLOBAL v6;     // eax
  HGLOBAL v7;     // eax
  SIZE_T dwBytes; // [esp+20h] [ebp-4h] BYREF

  v2 = *(_DWORD *)unk;
  v3 = 0;
  dwBytes = 0;
  v4 = (*(int(__stdcall **)(SIZE_T, _DWORD, _DWORD, SIZE_T *))(v2 + 72))(unk, 0, 0, &dwBytes);
  if (v4 == -2005467106) {
    v5 = GlobalAlloc(0x42u, dwBytes);
    v3 = GlobalLock(v5);
    if (v3) {
      v4 = (*(int(__stdcall **)(SIZE_T, _DWORD, const void *, SIZE_T *))(*(_DWORD *)unk + 72))(
          unk, 0, v3, &dwBytes);
      if (v4 >= 0)
        v4 = (*(int(__stdcall **)(
            int, int(__stdcall *)(int, int, LPCSTR, int), const void *, SIZE_T, int))(
            *(_DWORD *)a2 + 20))(a2, sub_1003D850, v3, dwBytes, a1);
    } else {
      v4 = -2147024882;
    }
  }
  if (v3) {
    v6 = GlobalHandle(v3);
    GlobalUnlock(v6);
    v7 = GlobalHandle(v3);
    GlobalFree(v7);
  }
  return v4;
}

//----- (1003D950) --------------------------------------------------------
int __cdecl sub_1003D950(int *a1, int a2) {
  int v2;    // eax
  int v3;    // ecx
  int v5[2]; // [esp+0h] [ebp-8h] BYREF

  if (!a1)
    return 0;
  v2 = *a1;
  if (!*a1 || dword_10AA288C)
    return 0;
  v3 = a1[2];
  v5[1] = a2;
  v5[0] = 1610612738;
  return sub_1000C4D0(v2, v3, 0, 1, (int)v5, 8);
}
// 10AA288C: using guessed type int dword_10AA288C;

//----- (1003D9A0) --------------------------------------------------------
int __cdecl sub_1003D9A0(int *a1, int a2) {
  int v2;    // eax
  int v3;    // ecx
  int v5[2]; // [esp+0h] [ebp-8h] BYREF

  if (!a1)
    return 0;
  v2 = *a1;
  if (!*a1 || dword_10AA288C)
    return 0;
  v3 = a1[2];
  v5[1] = a2;
  v5[0] = 1610612741;
  return sub_1000C4D0(v2, v3, 0, 1, (int)v5, 8);
}
// 10AA288C: using guessed type int dword_10AA288C;

//----- (1003D9F0) --------------------------------------------------------
int __cdecl sub_1003D9F0(int *a1) {
  int v1; // eax
  int v3; // [esp-14h] [ebp-1Ch]
  int v4; // [esp+0h] [ebp-8h] BYREF

  if (!a1)
    return 0;
  v1 = *a1;
  if (!*a1 || dword_10AA288C)
    return 0;
  v3 = a1[2];
  v4 = 1610612739;
  return sub_1000C4D0(v1, v3, 0, 1, (int)&v4, 8);
}
// 10AA288C: using guessed type int dword_10AA288C;

//----- (1003DA40) --------------------------------------------------------
int __cdecl sub_1003DA40(int *a1, int a2) {
  int v2;    // eax
  int v3;    // ecx
  int v5[2]; // [esp+0h] [ebp-8h] BYREF

  if (!a1)
    return 0;
  v2 = *a1;
  if (!*a1 || dword_10AA288C)
    return 0;
  v3 = a1[2];
  v5[1] = a2;
  v5[0] = 1610612740;
  return sub_1000C4D0(v2, v3, 0, 1, (int)v5, 8);
}
// 10AA288C: using guessed type int dword_10AA288C;

//----- (1003DA90) --------------------------------------------------------
int __cdecl sub_1003DA90(int *a1, int a2) {
  int v2;    // eax
  int v3;    // ecx
  int v5[2]; // [esp+0h] [ebp-8h] BYREF

  if (!a1)
    return 0;
  v2 = *a1;
  if (!*a1)
    return 0;
  v3 = a1[2];
  v5[1] = a2;
  v5[0] = 1610612742;
  return sub_1000C4D0(v2, v3, 0, 1, (int)v5, 8);
}

//----- (1003DAE0) --------------------------------------------------------
int sub_1003DAE0() {
  int result; // eax

  if (dword_10A9D008) {
    result = *(_DWORD *)(dword_10A9D008 + 8);
    if (result)
      result = sub_1003DA90((int *)dword_10A9D008, *(_DWORD *)(dword_10A9D008 + 8));
  }
  return result;
}

//----- (1003DB00) --------------------------------------------------------
int __cdecl sub_1003DB00(int *a1, int a2) {
  int v2;    // eax
  int v3;    // ecx
  int v5[2]; // [esp+0h] [ebp-8h] BYREF

  if (!a1)
    return 0;
  v2 = *a1;
  if (!*a1)
    return 0;
  v3 = a1[2];
  v5[1] = a2;
  v5[0] = 1610612743;
  return sub_1000C4D0(v2, v3, 0, 1, (int)v5, 8);
}

//----- (1003DB50) --------------------------------------------------------
int __cdecl sub_1003DB50(_DWORD *a1, int a2, int a3) {
  int v3;    // eax
  int v5[3]; // [esp+4h] [ebp-Ch] BYREF

  if (!a1 || !*a1)
    return 0;
  v5[1] = a2;
  v3 = a1[3];
  v5[0] = 1610612744;
  v5[2] = a3;
  if (v3)
    np_sub_10003580((int)a1, (int)v5, 12, a1[2]);
  return sub_1000C4D0(*a1, a1[2], 0, 1, v5, 12);
}
// 1000C4D0: using guessed type _DWORD __cdecl sub_1000C4D0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (1003DBC0) --------------------------------------------------------
int __cdecl showMessageBox(LPCSTR format, int errno) {
  char *v2;       // eax
  LPCSTR caption; // eax
  CHAR text[200]; // [esp+0h] [ebp-C8h] BYREF

  v2 = errorString(errno);
  wsprintfA(text, format, v2);
  caption = GetStringWithIndex(0x126u);
  return MessageBoxA(0, text, caption, 0);
}

//----- (1003DC10) --------------------------------------------------------
char *__cdecl errorString(int a1) {
  if (a1 <= -2147467263) {
    if (a1 == -2147467263)
      return aDperrUnsupport;
    if (a1 == -2147483638)
      return aDperrPending;
    goto LABEL_143;
  }
  if (a1 <= -2147467259) {
    if (a1 == -2147467259)
      return aDperrGeneric;
    if (a1 == -2147467262)
      return aDperrNointerfa;
    goto LABEL_143;
  }
  if (a1 <= -2147024809) {
    if (a1 == -2147024809)
      return aDperrInvalidpa;
    if (a1 == -2147024882)
      return aDperrOutofmemo;
    goto LABEL_143;
  }
  if (a1 <= -2005467126) {
    if (a1 == -2005467126)
      return aDperrAccessden;
    if (a1 == -2005467131)
      return aDperrAlreadyin;
    goto LABEL_143;
  }
  if (a1 <= -2005467106) {
    if (a1 == -2005467106)
      return aDperrBuffertoo;
    if (a1 == -2005467116)
      return aDperrActivepla;
    goto LABEL_143;
  }
  if (a1 <= -2005467086) {
    if (a1 == -2005467086)
      return aDperrCantcreat;
    if (a1 == -2005467096)
      return aDperrCantaddpl;
    goto LABEL_143;
  }
  if (a1 <= -2005467066) {
    if (a1 == -2005467066)
      return aDperrCantcreat_1;
    if (a1 == -2005467076)
      return aDperrCantcreat_0;
    goto LABEL_143;
  }
  if (a1 <= -2005467046) {
    if (a1 == -2005467046)
      return aDperrException;
    if (a1 == -2005467056)
      return aDperrCapsnotav;
    goto LABEL_143;
  }
  if (a1 <= -2005467006) {
    if (a1 == -2005467006)
      return aDperrInvalidob;
    if (a1 == -2005467016)
      return aDperrInvalidfl;
    goto LABEL_143;
  }
  if (a1 <= -2005466981) {
    if (a1 == -2005466981)
      return aDperrInvalidgr;
    if (a1 == -2005466986)
      return aDperrInvalidpl;
    goto LABEL_143;
  }
  if (a1 <= -2005466966) {
    if (a1 == -2005466966)
      return aDperrNoconnect;
    if (a1 == -2005466976)
      return aDperrNocaps;
    goto LABEL_143;
  }
  if (a1 <= -2005466936) {
    if (a1 == -2005466936)
      return aDperrNonameser;
    if (a1 == -2005466946)
      return aDperrNomessage;
    goto LABEL_143;
  }
  if (a1 <= -2005466916) {
    if (a1 == -2005466916)
      return aDperrNosession;
    if (a1 == -2005466926)
      return aDperrNoplayers;
    goto LABEL_143;
  }
  if (a1 <= -2005466896) {
    if (a1 == -2005466896)
      return aDperrTimeout;
    if (a1 == -2005466906)
      return aDperrSendtoobi;
    goto LABEL_143;
  }
  if (a1 <= -2005466866) {
    if (a1 == -2005466866)
      return aDperrBusy;
    if (a1 == -2005466886)
      return aDperrUnavailab;
    goto LABEL_143;
  }
  if (a1 <= -2005466846) {
    if (a1 == -2005466846)
      return aDperrCannotcre;
    if (a1 == -2005466856)
      return aDperrUsercance;
    goto LABEL_143;
  }
  if (a1 <= -2005466826) {
    if (a1 == -2005466826)
      return aDperrSessionlo;
    if (a1 == -2005466836)
      return aDperrPlayerlos;
    goto LABEL_143;
  }
  if (a1 <= -2005466806) {
    if (a1 == -2005466806)
      return aDperrNonewplay;
    if (a1 == -2005466816)
      return aDperrUninitial;
    goto LABEL_143;
  }
  if (a1 <= -2005466786) {
    if (a1 == -2005466786)
      return aDperrConnectin;
    if (a1 == -2005466796)
      return aDperrInvalidpa_0;
    goto LABEL_143;
  }
  if (a1 <= -2005466126) {
    if (a1 == -2005466126)
      return aDperrCantcreat_2;
    if (a1 == -2005466136)
      return aDperrBuffertoo_0;
    goto LABEL_143;
  }
  if (a1 <= -2005466106) {
    if (a1 == -2005466106)
      return aDperrInvalidin;
    if (a1 == -2005466116)
      return aDperrAppnotsta;
    goto LABEL_143;
  }
  if (a1 <= -2005466086) {
    if (a1 == -2005466086)
      return aDperrUnknownap;
    if (a1 == -2005466096)
      return aDperrNoservice;
    goto LABEL_143;
  }
  if (a1 <= -2005466056) {
    if (a1 == -2005466056)
      return aDperrServicepr;
    if (a1 == -2005466066)
      return aDperrNotlobbie;
    goto LABEL_143;
  }
  if (a1 <= -2005466036) {
    if (a1 == -2005466036)
      return aDperrNotregist;
    if (a1 == -2005466046)
      return aDperrAlreadyre;
    goto LABEL_143;
  }
  if (a1 <= -2005465126) {
    if (a1 == -2005465126)
      return aDperrCantloads;
    if (a1 == -2005465136)
      return aDperrAuthentic;
    goto LABEL_143;
  }
  if (a1 <= -2005465106) {
    if (a1 == -2005465106)
      return aDperrSignfaile;
    if (a1 == -2005465116)
      return aDperrEncryptio;
    goto LABEL_143;
  }
  if (a1 <= -2005465086) {
    if (a1 == -2005465086)
      return aDperrEncryptio_0;
    if (a1 == -2005465096)
      return aDperrCantloads_0;
    goto LABEL_143;
  }
  if (a1 <= -2005465066) {
    if (a1 == -2005465066)
      return aDperrNotlogged;
    if (a1 == -2005465076)
      return aDperrCantloadc;
    goto LABEL_143;
  }
  if (a1 == -2005465056)
    return aDperrLogondeni;
  if (a1) {
  LABEL_143:
    wsprintfA(byte_10A9BFE0, "0x%08X", a1);
    return byte_10A9BFE0;
  }
  return aDpOk;
}

//----- (1003DFC0) --------------------------------------------------------
int __cdecl sub_1003DFC0() {
  int result; // eax

  result = 0;
  gChosenTrack = 0;
  gChosenWeather0 = 0;
  gChosenCar = 0;
  gTransmissionType = 1;
  gTireType = (void *)2;
  gSuspensionType = 1;
  gConfigJoystickIndex = 0;
  gConfigJoystickPtr = &gConfig;
  gHandlingType = 1;
  return result;
}
// 10094350: using guessed type int g_HandlingType;
// 10094354: using guessed type int g_TransmissionType;
// 10094358: using guessed type int g_SuspensionType;
// 100B380C: using guessed type int g_chosenTrack;
// 1022B34C: using guessed type int g_chosenCar;
// 1022B350: using guessed type int g_ChosenWeather;
// 10B4E1D0: using guessed type int g_ConfigJoystickIndex;

//----- (1003E020) --------------------------------------------------------
int sub_1003E020() {
  int result; // eax

  result = 258;
  LOWORD(dword_10AA27E0) = 258;
  dword_10AA2598 = 258;
  return result;
}
// 10AA2598: using guessed type int dword_10AA2598;
// 10AA27E0: using guessed type int dword_10AA27E0;

//----- (1003E050) --------------------------------------------------------
int sub_1003E050() {
  int result; // eax

  result = 55;
  HIWORD(dword_10AA27E0) = 55;
  dword_10A9D010 = 55;
  return result;
}
// 10A9D010: using guessed type int dword_10A9D010;
// 10AA27E0: using guessed type int dword_10AA27E0;

//----- (1003E080) --------------------------------------------------------
BOOL sub_1003E080() {
  return dword_10AA33D0 || dword_10AA33D4 || dword_10AA33D8 || dword_10AA33DC ||
         !dword_10AA285C && (dword_10AA2AF0 || dword_10AA2CF0 || dword_10AA2DAC || dword_10AA2DB4);
}
// 10AA285C: using guessed type int dword_10AA285C;
// 10AA2AF0: using guessed type int dword_10AA2AF0;
// 10AA2CF0: using guessed type int dword_10AA2CF0;
// 10AA2DAC: using guessed type int dword_10AA2DAC;
// 10AA2DB4: using guessed type int dword_10AA2DB4;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10AA33D8: using guessed type int dword_10AA33D8;
// 10AA33DC: using guessed type int dword_10AA33DC;

//----- (1003E0E0) --------------------------------------------------------
BOOL sub_1003E0E0() {
  BOOL result; // eax

  if (sub_1005FFD0() >= 0 || (result = sub_1003E080()))
    result = 1;
  return result;
}

//----- (1003E100) --------------------------------------------------------
BOOL __cdecl IsBossRallyCDROM(int driveNumber) {
  char drivePath[260];        // [esp+8h] [ebp-208h] BYREF
  CHAR volumeNameBuffer[260]; // [esp+10Ch] [ebp-104h] BYREF

  sprintf(drivePath, "%C:\\", driveNumber + 0x40);
  return !_chdrive(driveNumber) && GetDriveTypeA(NULL) == DRIVE_CDROM && !_chdir(kBackslash) &&
         GetVolumeInformationA(drivePath, volumeNameBuffer, MAX_PATH, 0, 0, 0, 0, 0) &&
         !strcmp(volumeNameBuffer, kWindowName);
}

//----- (1003E1D0) --------------------------------------------------------
int sub_1003E1D0() {
# 505 * v0; // edi
  void *v1; // edi

  v0 = dword_10ACED34;
  if (!dword_10ACED34) {
    v0 = (#505 *)&unk_10AF9890;
    dword_10ACED34 = (#505 *)&unk_10AF9890;
  }
  memset(v0, 0, 0x14Cu);
  v1 = (void *)dword_10AD189C;
  if (!dword_10AD189C) {
    v1 = &unk_10AF99DC;
    dword_10AD189C = (int)&unk_10AF99DC;
  }
  memset(v1, 0, 0x14Cu);
  return 1;
}
// 10AD189C: using guessed type int dword_10AD189C;

//----- (1003E220) --------------------------------------------------------
int sub_1003E220() {
  IUnknown *v0;     // eax
  IUnknownVtbl *v1; // edx
  int v3;           // [esp+Ch] [ebp-Ch] BYREF
  int v4;           // [esp+10h] [ebp-8h] BYREF
  char v5[4];       // [esp+14h] [ebp-4h] BYREF

  v0 = *(IUnknown **)(*(_DWORD *)gUnk334 + 60);
  v1 = v0->lpVtbl;
  v3 = 4096;
  ((void(__stdcall *)(IUnknown *, int *, char *, int *))v1[7].Release)(v0, &v3, v5, &v4);
  return v4;
}
// 118ABE08: using guessed type int dword_118ABE08;

//----- (1003E260) --------------------------------------------------------
void __cdecl sub_1003E260(int a1) {
  LPCSTR text;    // edi
  LPCSTR caption; // eax

  if (a1 <= 8) {
    text = GetStringWithIndex(dword_100AC664[2 * a1]);
    caption = GetStringWithIndex(0xAAu);
    MessageBoxA(gHwnd, text + 1, caption, 0);
    if (dword_100AC660[2 * a1])
      exit(1);
  }
}
// 100AC660: using guessed type int dword_100AC660[];

//----- (1003E2C0) --------------------------------------------------------
unk00334 *__stdcall sub_1003E2C0() {
  int v0;           // ebx
  int v1;           // esi
  int v2;           // edi
  unk00334 *result; // eax

  v0 = gBitDepth;
  v1 = gWidth1;
  v2 = gHeight1;
  gUnk00334Ptr1 = sub_1001A550((CLSID *)&gGUID);
  result = meth_unk00334_1001A570(gUnk00334Ptr1, v1, v2, v0, 0, (unk00228 *)dword_118AC23C);
  gUnk00334Ptr0 = result;
  return result;
}
// 10B4E6E8: using guessed type int gWidth1;
// 10B4E6EC: using guessed type int gHeight1;
// 10B4E6F0: using guessed type int gBitDepth;

//----- (1003E310) --------------------------------------------------------
int sub_1003E310() {
  int result; // eax

  dword_10B4E710 = dword_100AC648;
  dword_10B4E714 = dword_10AA2A00;
  dword_10B4E718 = dword_10AA2A08;
  dword_10B4E71C = dword_100AC64C;
  dword_10B4E720 = dword_100AC650;
  dword_10B4E724 = dword_100AC654;
  dword_10B4E728 = dword_10AA2A0C;
  result = dword_10AA2A14;
  dword_10B4E72C = dword_100AC658;
  dword_10B4E730 = dword_10AA2A10;
  dword_10B4E734 = dword_10AA2A14;
  dword_10B4E738 = dword_100AC65C;
  dword_10B4E73C = dword_10AA2A18;
  return result;
}
// 100AC648: using guessed type int dword_100AC648;
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC658: using guessed type int dword_100AC658;
// 100AC65C: using guessed type int dword_100AC65C;
// 10AA2A00: using guessed type int dword_10AA2A00;
// 10AA2A08: using guessed type int dword_10AA2A08;
// 10AA2A0C: using guessed type int dword_10AA2A0C;
// 10AA2A10: using guessed type int dword_10AA2A10;
// 10AA2A14: using guessed type int dword_10AA2A14;
// 10AA2A18: using guessed type int dword_10AA2A18;
// 10B4E710: using guessed type int dword_10B4E710;
// 10B4E714: using guessed type int dword_10B4E714;
// 10B4E718: using guessed type int dword_10B4E718;
// 10B4E71C: using guessed type int dword_10B4E71C;
// 10B4E720: using guessed type int dword_10B4E720;
// 10B4E724: using guessed type int dword_10B4E724;
// 10B4E728: using guessed type int dword_10B4E728;
// 10B4E72C: using guessed type int dword_10B4E72C;
// 10B4E730: using guessed type int dword_10B4E730;
// 10B4E734: using guessed type int dword_10B4E734;
// 10B4E738: using guessed type int dword_10B4E738;
// 10B4E73C: using guessed type int dword_10B4E73C;

//----- (1003E3A0) --------------------------------------------------------
int sub_1003E3A0() {
  int result; // eax

  gConfigJoystickIndex = dword_100AC520[dword_10AA2A0C];
  switch (gConfigJoystickIndex) {
  case 1:
    gConfigJoystickPtr = gConfig.joystick1;
    break;
  case 2:
    gConfigJoystickPtr = gConfig.joystick2;
    break;
  case 3:
    gConfigJoystickPtr = gConfig.joystick3;
    break;
  default:
    gConfigJoystickPtr = &gConfig;
    break;
  }
  dword_10AA2A1C = dword_10B4E1E0 == 0;
  dword_10AA2A20 = dword_10B4E1D8 == 0;
  dword_10AA2A24 = dword_10B4E1DC == 0;
  dword_10AA2A28 = dword_10B4E7A0 == 0;
  strcpy(String1, byte_10B4E1E4);
  sub_1003E2C0();
  dword_100AC648 = dword_10B4E710;
  dword_10AA2A00 = dword_10B4E714;
  dword_100AC64C = dword_10B4E71C;
  dword_10AA2A08 = dword_10B4E718;
  dword_100AC650 = dword_10B4E720;
  dword_100AC654 = dword_10B4E724;
  dword_10AA2A0C = dword_10B4E728;
  if (dword_10B4E728 == 1)
    dword_10AA2A0C = 2;
  dword_100AC658 = dword_10B4E72C;
  dword_100AC65C = dword_10B4E738;
  word_100AB3E4 |= dword_10B4E730;
  dword_10AA2A10 = dword_10B4E730;
  result = dword_10B4E734 | dword_100AB3EC;
  dword_10AA2A14 = dword_10B4E734;
  dword_10AA2A18 = dword_10B4E73C;
  dword_100AB3EC |= dword_10B4E734;
  return result;
}
// 100AB3E4: using guessed type __int16 word_100AB3E4;
// 100AB3EC: using guessed type int dword_100AB3EC;
// 100AC648: using guessed type int dword_100AC648;
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC658: using guessed type int dword_100AC658;
// 100AC65C: using guessed type int dword_100AC65C;
// 10AA2A00: using guessed type int dword_10AA2A00;
// 10AA2A08: using guessed type int dword_10AA2A08;
// 10AA2A0C: using guessed type int dword_10AA2A0C;
// 10AA2A10: using guessed type int dword_10AA2A10;
// 10AA2A14: using guessed type int dword_10AA2A14;
// 10AA2A18: using guessed type int dword_10AA2A18;
// 10AA2A1C: using guessed type int dword_10AA2A1C;
// 10AA2A20: using guessed type int dword_10AA2A20;
// 10AA2A24: using guessed type int dword_10AA2A24;
// 10AA2A28: using guessed type int dword_10AA2A28;
// 10B4E1D0: using guessed type int g_ConfigJoystickIndex;
// 10B4E1D8: using guessed type int dword_10B4E1D8;
// 10B4E1DC: using guessed type int dword_10B4E1DC;
// 10B4E1E0: using guessed type int dword_10B4E1E0;
// 10B4E710: using guessed type int dword_10B4E710;
// 10B4E714: using guessed type int dword_10B4E714;
// 10B4E718: using guessed type int dword_10B4E718;
// 10B4E71C: using guessed type int dword_10B4E71C;
// 10B4E720: using guessed type int dword_10B4E720;
// 10B4E724: using guessed type int dword_10B4E724;
// 10B4E728: using guessed type int dword_10B4E728;
// 10B4E72C: using guessed type int dword_10B4E72C;
// 10B4E730: using guessed type int dword_10B4E730;
// 10B4E734: using guessed type int dword_10B4E734;
// 10B4E738: using guessed type int dword_10B4E738;
// 10B4E73C: using guessed type int dword_10B4E73C;
// 10B4E7A0: using guessed type int dword_10B4E7A0;

//----- (1003E510) --------------------------------------------------------
int sub_1003E510() {
  int v0;     // esi
  int v1;     // eax
  int v2;     // edx
  int v3;     // esi
  int v4;     // eax
  int v5;     // eax
  int result; // eax
  int v7;     // eax
  int v8;     // edx

  sub_1003E3A0();
  gHandlingType = dword_100AC65C;
  if (gGameMode == 6)
    sub_10044540();
  v0 = dword_100AC654;
  if (sub_1003F320(dword_100AC654)) {
  LABEL_8:
    v1 = dword_100AC654;
  } else {
    while (1) {
      v1 = ++dword_100AC654;
      if (dword_100AC654 > 31) {
        v1 = 0;
        dword_100AC654 = 0;
      }
      if (v1 == v0)
        break;
      if (sub_1003F320(v1))
        goto LABEL_8;
    }
  }
  gChosenCar = dword_100AC420[v1];
  v2 = dword_100AC4B0[dword_100AC650];
  gTireType = (void *)dword_100AC4A0[dword_100AC64C];
  gSuspensionType = v2;
  gTransmissionType = dword_100AC518[dword_10AA2A08];
  if (gGameMode) {
    v3 = dword_100AC648;
    if (!sub_1003F2B0(dword_100AC648)) {
      do {
        v4 = dword_100AC648 + 1;
        dword_100AC648 = v4;
        if (v4 <= (dword_10AA28FC != 0 ? 14 : 11)) {
          if (v4 == v3)
              goto LABEL_16;
        } else {
          v4 = 0;
          dword_100AC648 = 0;
        }
      } while (!sub_1003F2B0(v4));
    }
    v4 = dword_100AC648;
  LABEL_16:
    gChosenTrack = dword_100AC4D8[v4];
    v5 = dword_100AC4C0[dword_10AA2A00];
    dword_100BD3E0 = dword_100AC658;
    gChosenWeather0 = v5;
    result = sub_1005FCF0();
  } else {
    v7 = 2 * (BYTE1(dword_10AA26F4[0]) + 12 * LOBYTE(dword_10AA26F4[0]));
    v8 = (unsigned __int8)byte_100B3821[v7];
    gChosenTrack = (unsigned __int8)byte_100B3820[v7];
    gChosenWeather0 = v8;
    result = sub_1005FCF0();
  }
  return result;
}
// 10094350: using guessed type int g_HandlingType;
// 10094354: using guessed type int g_TransmissionType;
// 10094358: using guessed type int g_SuspensionType;
// 100AA010: using guessed type int g_GameMode;
// 100AC518: using guessed type int dword_100AC518[];
// 100AC648: using guessed type int dword_100AC648;
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC658: using guessed type int dword_100AC658;
// 100AC65C: using guessed type int dword_100AC65C;
// 100B380C: using guessed type int g_chosenTrack;
// 1022B34C: using guessed type int g_chosenCar;
// 1022B350: using guessed type int g_ChosenWeather;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA28FC: using guessed type int dword_10AA28FC;
// 10AA2A00: using guessed type int dword_10AA2A00;
// 10AA2A08: using guessed type int dword_10AA2A08;

//----- (1003E680) --------------------------------------------------------
int __cdecl sub_1003E680() {
  dword_10A9D068 = 0;
  dword_100AC648 = 2;
  dword_10AA2A00 = 0;
  dword_10AA2A04 = 0;
  dword_10AA2A08 = 0;
  dword_100AC64C = 1;
  dword_100AC650 = 1;
  dword_100AC654 = 1;
  dword_100AC658 = 3;
  dword_10AA2A10 = 0;
  dword_10AA2A14 = 0;
  dword_10AA28A0 = 0;
  dword_10AA28A4 = 0;
  dword_10AA28AC = 0;
  dword_10AA28B0 = 0;
  dword_10AA28B4 = 0;
  LOBYTE(dword_10AA28B8) = 0;
  dword_10AA28BC = 0;
  dword_10AA28C0 = 0;
  dword_10AA26E8 = 0;
  dword_10A9D06C = 0;
  dword_10AA28C4 = 0;
  *(_DWORD *)&dword_10AA28C8 = 0;
  dword_10AA28D0 = 0;
  dword_10AA289C = 0;
  sprintf(byte_10AA2518, "%d", 1);
  sprintf(byte_10A9D618, "%d", dword_10AA28A4 + 1);
  sub_1003E1D0();
  dword_10AA289C = 0;
  memset(&dword_10AA26F0, 0, 0x14Cu);
  memset(&unk_10A9DBD8, 0, 0x14Cu);
  memset(&gGameMode1, 0, 0x118u);
  LOWORD(dword_10AA27E0) = 258;
  gGameMode1 = -1;
  return sub_1003E510();
}
// 100AC648: using guessed type int dword_100AC648;
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC658: using guessed type int dword_100AC658;
// 10220B20: using guessed type int dword_10220B20;
// 10A9D068: using guessed type int dword_10A9D068;
// 10A9D06C: using guessed type int dword_10A9D06C;
// 10AA26E8: using guessed type int dword_10AA26E8;
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA27E0: using guessed type int dword_10AA27E0;
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28A0: using guessed type int dword_10AA28A0;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B0: using guessed type int dword_10AA28B0;
// 10AA28B4: using guessed type int dword_10AA28B4;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA28BC: using guessed type int dword_10AA28BC;
// 10AA28C0: using guessed type int dword_10AA28C0;
// 10AA28D0: using guessed type int dword_10AA28D0;
// 10AA2A00: using guessed type int dword_10AA2A00;
// 10AA2A04: using guessed type int dword_10AA2A04;
// 10AA2A08: using guessed type int dword_10AA2A08;
// 10AA2A10: using guessed type int dword_10AA2A10;
// 10AA2A14: using guessed type int dword_10AA2A14;

//----- (1003E7A0) --------------------------------------------------------
int __cdecl sub_1003E7A0(int a1) {
  int v1;                                     // esi
  int v2;                                     // edi
  int v3;                                     // ebp
  int v5;                                     // ebx
  int v6;                                     // eax
  int v8;                                     // [esp+18h] [ebp-8h]
  int v9;                                     // [esp+1Ch] [ebp-4h]
  void(__thiscall * v10)(int, int, int, int); // [esp+24h] [ebp+4h]

  v1 = a1;
  v2 = (__int64)*(float *)(a1 + 12140) - 3;
  v9 = v2;
  v3 = (__int64)*(float *)(a1 + 12144) - 12;
  v5 = *(__int16 *)(a1 + 12134) / 16 + 1;
  v10 = *(void(__thiscall **)(int, int, int, int))(*(_DWORD *)a1 + 20);
  v10(a1, 61, v2 - 8, v3);
  v6 = 0;
  if (v5) {
    v8 = v5;
    do {
      v10(v1, 59, v2, v3);
      v2 += 16;
      --v5;
    } while (v5);
    v6 = v8;
    v2 = v9;
  }
  v10(v1, 60, v2 + 16 * v6, v3);
  return 1;
}

//----- (1003E840) --------------------------------------------------------
int __cdecl sub_1003E840(int a1) {
  const char *v1; // eax

  if (gGameMode || gGameMode1)
    v1 = GetStringWithIndex(0xCu);
  else
    v1 = GetStringWithIndex(0x51u);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(*(_DWORD *)(a1 + 11100) + 4))(a1 + 11100);
  return 1;
}
// 100AA010: using guessed type int g_GameMode;
// 10220B20: using guessed type int dword_10220B20;

//----- (1003E8B0) --------------------------------------------------------
int sub_1003E8B0() {
  int result; // eax

  result = 1;
  byte_10AA28A8 = 1;
  return result;
}
// 1003E8B0: using guessed type int sub_1003E8B0();
// 10AA28A8: using guessed type char byte_10AA28A8;

//----- (1003E8C0) --------------------------------------------------------
int sub_1003E8C0() {
  byte_10AA28A8 = 0;
  return 1;
}
// 1003E8C0: using guessed type int sub_1003E8C0();
// 10AA28A8: using guessed type char byte_10AA28A8;

//----- (1003E8D0) --------------------------------------------------------
int __cdecl sub_1003E8D0(int a1) {
  int v1; // ebx

  _itoa(*((char *)&dword_10AA26E8 + dword_10AA28AC), (char *)(a1 + 11109), 10);
  v1 = *(_DWORD *)(a1 + 11100);
  (*(void(__thiscall **)(int))(v1 + 8))(a1 + 11100);
  if (a1 != -11109)
    (*(void(__thiscall **)(int))(v1 + 44))(a1 + 11100);
  return 1;
}
// 1003E8D0: using guessed type int __cdecl sub_1003E8D0(int);
// 10AA26E8: using guessed type int dword_10AA26E8;
// 10AA28AC: using guessed type int dword_10AA28AC;

//----- (1003E920) --------------------------------------------------------
int __cdecl sub_1003E920(int a1) {
  *(float *)(a1 + 60) = (float)(11 * dword_100AC65C + 61);
  return 1;
}
// 1003E920: using guessed type int __cdecl sub_1003E920(int);
// 100AC65C: using guessed type int dword_100AC65C;

//----- (1003E950) --------------------------------------------------------
int __cdecl sub_1003E950(int a1) {
  __int16 v1; // cx

  v1 = 104;
  if (!dword_100AB3D8)
    v1 = 105;
  *(_WORD *)(a1 + 10816) = v1;
  *(_WORD *)(a1 + 123404) = v1;
  return 1;
}
// 100AB3D8: using guessed type int dword_100AB3D8;

//----- (1003E980) --------------------------------------------------------
int __cdecl sub_1003E980(float *a1) {
  float *v1;                                     // ebx
  int v2;                                        // edi
  __int64 v3;                                    // rax
  int v4;                                        // ebp
  unsigned int i;                                // esi
  void(__thiscall * v8)(float *, int, int, int); // [esp+14h] [ebp+4h]

  v1 = a1;
  v2 = (__int64)a1[15];
  v3 = (__int64)a1[16];
  v4 = v3 + 19;
  v8 = *(void(__thiscall **)(float *, int, int, int))(*(_DWORD *)a1 + 20);
  ((void(__fastcall *)(float *, _DWORD, int, int, _DWORD))v8)(a1, HIDWORD(v3), 116, v2, v3 + 19);
  for (i = 0; i < dword_10B4E708; v2 += 12) {
    v8(v1, 117, v2, v4);
    ++i;
  }
  return 1;
}
// 10B4E708: using guessed type int dword_10B4E708;

//----- (1003E9E0) --------------------------------------------------------
int __cdecl sub_1003E9E0(float *a1) {
  float *v1;                                     // ebx
  int v2;                                        // edi
  __int64 v3;                                    // rax
  int v4;                                        // ebp
  unsigned int i;                                // esi
  void(__thiscall * v8)(float *, int, int, int); // [esp+14h] [ebp+4h]

  v1 = a1;
  v2 = (__int64)a1[15];
  v3 = (__int64)a1[16];
  v4 = v3 + 19;
  v8 = *(void(__thiscall **)(float *, int, int, int))(*(_DWORD *)a1 + 20);
  ((void(__fastcall *)(float *, _DWORD, int, int, _DWORD))v8)(a1, HIDWORD(v3), 116, v2, v3 + 19);
  for (i = 0; i < dword_10B4E70C; v2 += 12) {
    v8(v1, 117, v2, v4);
    ++i;
  }
  return 1;
}
// 10B4E70C: using guessed type int dword_10B4E70C;

//----- (1003EA40) --------------------------------------------------------
int __cdecl sub_1003EA40(int a1) {
  int result; // eax
  int v2;     // [esp+0h] [ebp-4h]

  result = 1;
  if (dword_100AB3D8)
    v2 = 8 * dword_10B4E708 + 74;
  else
    v2 = 8 * dword_10B4E70C + 74;
  *(float *)(a1 + 60) = (float)v2;
  return result;
}
// 100AB3D8: using guessed type int dword_100AB3D8;
// 10B4E708: using guessed type int dword_10B4E708;
// 10B4E70C: using guessed type int dword_10B4E70C;

//----- (1003EA90) --------------------------------------------------------
int __cdecl sub_1003EA90(int a1) {
  int v1; // ebx

  _itoa(*((__int16 *)&dword_10A9D068 + dword_10AA28AC), (char *)(a1 + 11109), 10);
  v1 = *(_DWORD *)(a1 + 11100);
  (*(void(__thiscall **)(int))(v1 + 8))(a1 + 11100);
  if (a1 != -11109)
    (*(void(__thiscall **)(int))(v1 + 44))(a1 + 11100);
  return 1;
}
// 1003EA90: using guessed type int __cdecl sub_1003EA90(int);
// 10A9D068: using guessed type int dword_10A9D068;
// 10AA28AC: using guessed type int dword_10AA28AC;

//----- (1003EAE0) --------------------------------------------------------
int __cdecl sub_1003EAE0(int a1) {
  int v1; // eax

  v1 = (*(int(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, Value);
  if (v1 >= 0)
    Value = v1;
  return 1;
}

//----- (1003EB10) --------------------------------------------------------
int __cdecl sub_1003EB10(int a1) {
  int v1; // edi
  int v2; // eax

  v1 = *(_DWORD *)(a1 + 14392);
  v2 = (*(int(__thiscall **)(int, int))(v1 + 32))(a1 + 14392, Value);
  if (v2 < 0)
    v2 = Value;
  else
    Value = v2;
  if (dword_10AA28D8 && v2 >= 0)
    (*(void(__thiscall **)(int, int))(v1 + 36))(a1 + 14392, v2);
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (1003EB60) --------------------------------------------------------
int __cdecl sub_1003EB60(int a1) {
  int v1; // eax

  v1 = (*(int(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, dword_10AA28AC);
  if (v1 >= 0)
    dword_10AA28AC = v1;
  return 1;
}
// 1003EB60: using guessed type int __cdecl sub_1003EB60(int);
// 10AA28AC: using guessed type int dword_10AA28AC;

//----- (1003EB90) --------------------------------------------------------
int __cdecl sub_1003EB90(int a1) {
  int v1; // eax

  v1 = (*(int(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, dword_10AA2880);
  if (v1 >= 0)
    dword_10AA2880 = v1;
  return 1;
}
// 10AA2880: using guessed type int dword_10AA2880;

//----- (1003EBC0) --------------------------------------------------------
int __cdecl sub_1003EBC0(int a1) {
  (*(void(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, dword_10AA2880);
  return 1;
}
// 1003EBC0: using guessed type int __cdecl sub_1003EBC0(int);
// 10AA2880: using guessed type int dword_10AA2880;

//----- (1003EBE0) --------------------------------------------------------
int __cdecl sub_1003EBE0(int a1) {
  int v1;     // eax
  int v2;     // ecx
  int result; // eax

  v1 = (*(int(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, dword_10AA2880);
  if (v1 < 0)
    v1 = dword_10AA2880;
  else
    dword_10AA2880 = v1;
  v2 = *(_DWORD *)(a1 + 1080 * v1 + 15512);
  result = 1;
  dword_100AB3E0 = v2;
  return result;
}
// 1003EBE0: using guessed type int __cdecl sub_1003EBE0(int);
// 100AB3E0: using guessed type int dword_100AB3E0;
// 10AA2880: using guessed type int dword_10AA2880;

//----- (1003EC30) --------------------------------------------------------
int __cdecl sub_1003EC30(int a1) {
  int v1; // edi
  int v2; // eax

  v1 = *(_DWORD *)(a1 + 14392);
  v2 = (*(int(__thiscall **)(int, int))(v1 + 32))(a1 + 14392, Value);
  if (v2 < 0)
    v2 = Value;
  else
    Value = v2;
  if (dword_10AA28D8 && v2 >= 0)
    (*(void(__thiscall **)(int, int))(v1 + 36))(a1 + 14392, v2);
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (1003EC80) --------------------------------------------------------
int __cdecl sub_1003EC80(int a1) {
  int v1; // eax

  v1 = (*(int(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, dword_10AA2840);
  if (v1 >= 0)
    dword_10AA2840 = v1;
  return 1;
}
// 10AA2840: using guessed type int dword_10AA2840;

//----- (1003ECB0) --------------------------------------------------------
int __cdecl s_unk1E214_1003ECB0(unk1E214 *a1) {
  dword_10AA2860 = dword_10AA2A2C;
  gUnk00334Ptr1 =
      s_CLSID_1007A7D0(*(CLSID **)&gUnk1E214Ptr0->field_3838.gap1A60C[8 * dword_10AA2A2C + 4]);
  gGUID = gUnk00334Ptr1->lpGUID;
  gHeight0 = gUnk00334Ptr1->height;
  gWidth0 = gUnk00334Ptr1->width;
  gGap10 = *(_DWORD *)gUnk00334Ptr1->gap10;
  s_unk1E214_10046620(a1);
  return 0;
}
// 10AA2860: using guessed type int dword_10AA2860;
// 10AA2A2C: using guessed type int dword_10AA2A2C;
// 10B4E6FC: using guessed type int gHeight0;
// 10B4E700: using guessed type int gWidth0;
// 10B4E704: using guessed type int gGap10;

//----- (1003ED10) --------------------------------------------------------
int __cdecl sub_1003ED10(int a1) {
  int v1; // eax

  v1 = (*(int(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, dword_10AA2A2C);
  if (v1 >= 0)
    dword_10AA2A2C = v1;
  return 1;
}
// 10AA2A2C: using guessed type int dword_10AA2A2C;

//----- (1003ED40) --------------------------------------------------------
int __cdecl s_unk1E214_1003ED40(unk1E214 *a1) {
  int width;    // [esp+4h] [ebp-10h] BYREF
  int height;   // [esp+8h] [ebp-Ch] BYREF
  int bitDepth; // [esp+Ch] [ebp-8h] BYREF
  int a5;       // [esp+10h] [ebp-4h] BYREF

  meth_unk00334_1001AC80(
      *((unk00334 **)Base + **(_DWORD **)(dword_10AA29EC + 8 * dword_10AA2A30 + 122440)),
      &width,
      &height,
      &bitDepth,
      &a5);
  dword_10B4E6F4 = a5;
  dword_10AA2864 = dword_10AA2A30;
  gWidth1 = width;
  gHeight1 = height;
  gBitDepth = bitDepth;
  gUnk00334Ptr0 =
      meth_unk00334_1001A570(gUnk00334Ptr1, width, height, bitDepth, 0, (unk00228 *)dword_118AC23C);
  s_unk1E214_10046670(a1);
  return 0;
}
// 10AA2864: using guessed type int dword_10AA2864;
// 10AA29EC: using guessed type int dword_10AA29EC;
// 10AA2A30: using guessed type int dword_10AA2A30;
// 10B4E6E8: using guessed type int gWidth1;
// 10B4E6EC: using guessed type int gHeight1;
// 10B4E6F0: using guessed type int gBitDepth;
// 10B4E6F4: using guessed type int dword_10B4E6F4;

//----- (1003EDF0) --------------------------------------------------------
int __cdecl sub_1003EDF0(int a1) {
  int v1; // eax

  v1 = (*(int(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, dword_10AA2A30);
  if (v1 >= 0)
    dword_10AA2A30 = v1;
  return 1;
}
// 10AA2A30: using guessed type int dword_10AA2A30;

//----- (1003EE20) --------------------------------------------------------
int __cdecl sub_1003EE20(int a1) {
  int v1; // eax
  int v2; // eax

  v1 = dword_10AA2A34;
  if (dword_10AA2A34 < 0 || dword_10AA2A34 >= 12)
    v1 = -1;
  v2 = (*(int(__thiscall **)(int, int))(*(_DWORD *)(a1 + 14392) + 32))(a1 + 14392, v1);
  if (v2 >= 0)
    dword_10AA2A34 = v2;
  return 1;
}
// 10AA2A34: using guessed type int dword_10AA2A34;

//----- (1003EE50) --------------------------------------------------------
int __cdecl sub_1003EE50(int a1, __int16 a2) {
  int v2;                  // esi
  int v3;                  // ebp
  int result;              // eax
  int v5;                  // eax
  void(__cdecl * v6)(int); // eax

  v2 = a1 + 1080 * a2;
  v3 = *(_DWORD *)(v2 + 11100);
  (*(void(__thiscall **)(int))(v3 + 4))(v2 + 11100);
  if (*(_DWORD *)(v2 + 12156)) {
    if ((*(char(__thiscall **)(int))(v3 + 20))(v2 + 11100) <= 0 || (*(_BYTE *)(a1 + 28) & 2) != 0) {
      if (!dword_10AA285C) {
        dword_10AA28D8 = 0;
        *(_DWORD *)(v2 + 12156) = 0;
        v5 = *(_DWORD *)(a1 + 28);
        LOBYTE(v5) = v5 & 0xFD;
        *(_DWORD *)(a1 + 28) = v5;
      }
      unknown_libname_9();
      v6 = *(void(__cdecl **)(int))(a1 + 16);
      if (v6)
        v6(a1);
    }
    (*(void(__thiscall **)(int))(v3 + 16))(v2 + 11100);
    result = 1;
  } else {
    if (v2 != -11109)
      (*(void(__thiscall **)(int))(v3 + 16))(v2 + 11100);
    result = 0;
  }
  return result;
}
// 10AA285C: using guessed type int dword_10AA285C;
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (1003EEF0) --------------------------------------------------------
int __cdecl sub_1003EEF0(int a1) {
  const char *v1; // esi

  sub_1003EE50(a1, 0);
  v1 = (const char *)(a1 + 11109);
  if (strlen((const char *)(a1 + 11109)))
    *(_DWORD *)(dword_10AA29A8 + 28) &= 0xFFFFFFEF;
  if (_strcmpi(dplay4aShortName, v1))
    strcpy(dplay4aShortName, v1);
  return 1;
}
// 10AA29A8: using guessed type int dword_10AA29A8;

//----- (1003EF60) --------------------------------------------------------
int __cdecl sub_1003EF60(int a1) {
  if (strlen((const char *)(a1 + 11109)))
    *(_DWORD *)(dword_10AA29A8 + 28) &= 0xFFFFFFEF;
  return 1;
}
// 10AA29A8: using guessed type int dword_10AA29A8;

//----- (1003EF90) --------------------------------------------------------
int __cdecl sub_1003EF90(int a1) {
  const char *v1; // esi

  sub_1003EE50(a1, 0);
  v1 = (const char *)(a1 + 11109);
  if (strlen((const char *)(a1 + 11109)))
    *(_DWORD *)(dword_10AA29E8 + 28) &= 0xFFFFFFEF;
  if (_strcmpi(String1, v1)) {
    strcpy(String1, v1);
    strcpy(byte_10B4E1E4, String1);
  }
  return 1;
}
// 10AA29E8: using guessed type int dword_10AA29E8;

//----- (1003F020) --------------------------------------------------------
int __cdecl sub_1003F020(int a1) {
  if (strlen((const char *)(a1 + 11109)))
    *(_DWORD *)(dword_10AA29E8 + 28) &= 0xFFFFFFEF;
  return 1;
}
// 10AA29E8: using guessed type int dword_10AA29E8;

//----- (1003F050) --------------------------------------------------------
int __cdecl sub_1003F050(int a1) {
  sub_1003EE50(a1, 0);
  if (_strcmpi(byte_10B4E740, (const char *)(a1 + 11109)))
    strcpy(byte_10B4E740, (const char *)(a1 + 11109));
  return 1;
}

//----- (1003F0B0) --------------------------------------------------------
int __cdecl sub_1003F0B0(int a1) {
  sub_1003EE50(a1, 0);
  if (_strcmpi(byte_10B4E760, (const char *)(a1 + 11109)))
    strcpy(byte_10B4E760, (const char *)(a1 + 11109));
  return 1;
}

//----- (1003F110) --------------------------------------------------------
int __cdecl sub_1003F110(int a1) {
  sub_1003EE50(a1, 0);
  if (_strcmpi(byte_10A9DD28, (const char *)(a1 + 11109)))
    strcpy(byte_10A9DD28, (const char *)(a1 + 11109));
  return 1;
}
// 1003F110: using guessed type int __cdecl sub_1003F110(int);

//----- (1003F170) --------------------------------------------------------
int __cdecl sub_1003F170(int a1) {
  int v1; // eax

  v1 = dword_10A9D008;
  strcpy(byte_10A9DD28, (const char *)(a1 + 11109));
  sub_1003D210(gHwnd, v1, 0);
  strcpy(byte_10A9DD28, String2);
  strcpy((char *)(a1 + 11109), String2);
  return 1;
}

//----- (1003F210) --------------------------------------------------------
int __cdecl sub_1003F210(int a1) {
  const char *v1; // esi

  sub_1003EE50(a1, 0);
  v1 = (const char *)(a1 + 11109);
  if (strlen((const char *)(a1 + 11109)))
    *(_DWORD *)(dword_10AA29BC + 28) &= 0xFFFFFFEF;
  if (_strcmpi(g_lpSessionDesc_dwUser3, v1))
    strcpy(g_lpSessionDesc_dwUser3, v1);
  return 1;
}
// 10AA29BC: using guessed type int dword_10AA29BC;

//----- (1003F280) --------------------------------------------------------
int __cdecl sub_1003F280(int a1) {
  if (strlen((const char *)(a1 + 11109)))
    *(_DWORD *)(dword_10AA29BC + 28) &= 0xFFFFFFEF;
  return 1;
}
// 10AA29BC: using guessed type int dword_10AA29BC;

//----- (1003F2B0) --------------------------------------------------------
int __cdecl sub_1003F2B0(int a1) {
  int result; // eax

  if (a1 == 12)
    return 0;
  if (dword_10AA28F8)
    return 1;
  if (gGameMode) {
    if (dword_10AA28FC && (a1 == 14 || a1 == 13))
      result = 1;
    else
      result = dword_100AB3EC & (1 << a1);
  } else if (dword_10AA289C) {
    result = (unsigned __int16)(HIWORD(dword_10AA27E0) & (1 << a1));
  } else {
    result = dword_10A9D010 & (1 << a1);
  }
  return result;
}
// 100AA010: using guessed type int g_GameMode;
// 100AB3EC: using guessed type int dword_100AB3EC;
// 10A9D010: using guessed type int dword_10A9D010;
// 10AA27E0: using guessed type int dword_10AA27E0;
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28F8: using guessed type int dword_10AA28F8;
// 10AA28FC: using guessed type int dword_10AA28FC;

//----- (1003F320) --------------------------------------------------------
int __cdecl sub_1003F320(int a1) {
  int v1;     // ecx
  int result; // eax

  v1 = a1;
  if (dword_10AA28F4 && a1 > 15)
    v1 = a1 - 16;
  if (dword_10AA289C && v1 > 15 && (dword_10AA27E0 & 0x8000) != 0)
    v1 -= 16;
  if (gGameMode) {
    if (gGameMode == 6) {
      if (v1 == 15)
        v1 = 7;
      if (dword_10AA28F0 && v1 <= 15)
        result = 1;
      else
        result = dword_100AB3E8 & (1 << v1);
    } else if (gGameMode == 2 && v1 == dword_10AD0984) {
      result = 1;
    } else {
      if (v1 == 15)
        v1 = 11;
      if (dword_10AA28F0 && v1 <= 15)
        result = 1;
      else
        result = word_100AB3E4 & (1 << v1);
    }
  } else if (dword_10AA289C) {
    if (v1 == 15)
      v1 = 11;
    if (dword_10AA28F0 && v1 <= 15)
      result = 1;
    else
      result = (unsigned __int16)dword_10AA27E0 & (1 << v1);
  } else {
    if (v1 == 15)
      v1 = 11;
    if (dword_10AA28F0 && v1 <= 15)
      result = 1;
    else
      result = dword_10AA2598 & (1 << v1);
  }
  return result;
}
// 100AA010: using guessed type int g_GameMode;
// 100AB3E4: using guessed type __int16 word_100AB3E4;
// 100AB3E8: using guessed type int dword_100AB3E8;
// 10AA2598: using guessed type int dword_10AA2598;
// 10AA27E0: using guessed type int dword_10AA27E0;
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28F0: using guessed type int dword_10AA28F0;
// 10AA28F4: using guessed type int dword_10AA28F4;
// 10AD0984: using guessed type int dword_10AD0984;

//----- (1003F440) --------------------------------------------------------
int __cdecl sub_1003F440(int a1) {
  int result; // eax

  if (dword_10AA26F0 > 0) {
    switch (dword_10AA26F0) {
    case 1:
      *(_WORD *)(a1 + 123404) = 115;
      break;
    case 2:
      *(_WORD *)(a1 + 123404) = 114;
      break;
    case 3:
      *(_WORD *)(a1 + 123404) = 113;
      break;
    case 4:
      *(_WORD *)(a1 + 123404) = 112;
      break;
    case 5:
      *(_WORD *)(a1 + 123404) = 111;
      break;
    default:
      *(_WORD *)(a1 + 123404) = -1;
      break;
    }
  }
  if (dword_10AA26F0)
    return 1;
  switch (LOBYTE(dword_10AA26F4[0])) {
  case 1:
    *(_WORD *)(a1 + 123404) = 71;
    result = 1;
    break;
  case 2:
    *(_WORD *)(a1 + 123404) = 73;
    result = 1;
    break;
  case 3:
    *(_WORD *)(a1 + 123404) = 75;
    result = 1;
    break;
  case 4:
  case 5:
  case 6:
    *(_WORD *)(a1 + 123404) = 77;
    result = 1;
    break;
  default:
    *(_WORD *)(a1 + 123404) = -1;
    return 1;
  }
  return result;
}
// 1003F440: using guessed type int __cdecl sub_1003F440(int);
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA26F4: using guessed type int dword_10AA26F4[];

//----- (1003F540) --------------------------------------------------------
int __cdecl sub_1003F540(int a1) {
  int result; // eax

  if (dword_10AA26F0 > 0) {
    switch (dword_10AA26F0) {
    case 2:
      *(_WORD *)(a1 + 123404) = 109;
      break;
    case 3:
      *(_WORD *)(a1 + 123404) = 110;
      break;
    case 4:
      *(_WORD *)(a1 + 123404) = 108;
      break;
    default:
      *(_WORD *)(a1 + 123404) = -1;
      break;
    }
  }
  if (dword_10AA26F0)
    return 1;
  if (LOBYTE(dword_10AA26F4[0]) == 1) {
    *(_WORD *)(a1 + 123404) = 72;
    return 1;
  }
  if (LOBYTE(dword_10AA26F4[0]) == 2) {
    *(_WORD *)(a1 + 123404) = 74;
    result = 1;
  } else {
    if (LOBYTE(dword_10AA26F4[0]) == 3)
      *(_WORD *)(a1 + 123404) = 76;
    else
      *(_WORD *)(a1 + 123404) = -1;
    result = 1;
  }
  return result;
}
// 1003F540: using guessed type int __cdecl sub_1003F540(int);
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA26F4: using guessed type int dword_10AA26F4[];

//----- (1003F5E0) --------------------------------------------------------
int __cdecl sub_1003F5E0(int a1) {
  int result; // eax

  switch (dword_10AA2A18) {
  case 0:
    *(_WORD *)(a1 + 123404) = 86;
    result = 1;
    break;
  case 1:
    result = 1;
    *(_WORD *)(a1 + 123404) = 87;
    break;
  case 2:
    result = 1;
    *(_WORD *)(a1 + 123404) = 89;
    break;
  case 3:
    *(_WORD *)(a1 + 123404) = 91;
    result = 1;
    break;
  case 4:
    result = 1;
    *(_WORD *)(a1 + 123404) = 93;
    break;
  default:
    result = 1;
    *(_WORD *)(a1 + 123404) = 86;
    break;
  }
  return result;
}
// 10AA2A18: using guessed type int dword_10AA2A18;

//----- (1003F680) --------------------------------------------------------
int __cdecl sub_1003F680(int a1) {
  int result; // eax

  switch (dword_10AA2A18) {
  case 0:
    *(_WORD *)(a1 + 123404) = -1;
    result = 1;
    break;
  case 1:
    result = 1;
    *(_WORD *)(a1 + 123404) = 88;
    break;
  case 2:
    result = 1;
    *(_WORD *)(a1 + 123404) = 90;
    break;
  case 3:
    *(_WORD *)(a1 + 123404) = 92;
    result = 1;
    break;
  case 4:
    result = 1;
    *(_WORD *)(a1 + 123404) = 94;
    break;
  default:
    result = 1;
    *(_WORD *)(a1 + 123404) = -1;
    break;
  }
  return result;
}
// 10AA2A18: using guessed type int dword_10AA2A18;

//----- (1003F720) --------------------------------------------------------
int __cdecl sub_1003F720(int a1) {
  if (gUnkC8Ptr1 == (void *)gUnkC8Ptr32 && !dword_10AA28E8)
    return -2;
  *(_WORD *)(a1 + 123404) = word_100AC5A8[2 * dword_100AC654];
  return 1;
}
// 1003F720: using guessed type int __cdecl sub_1003F720(int);
// 100AC5A8: using guessed type __int16 word_100AC5A8[];
// 100AC654: using guessed type int dword_100AC654;
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA2964: using guessed type int dword_10AA2964;

//----- (1003F760) --------------------------------------------------------
int __cdecl sub_1003F760(int a1) {
  const char *v1; // eax
  int v2;         // eax
  int v3;         // edx

  if (gUnkC8Ptr1 != (void *)gUnkC8Ptr32 || dword_10AA28E8) {
    v2 = dword_100AC654;
    if (dword_100AC654 > 15)
      v2 = dword_100AC654 - 16;
    v1 = GetStringWithIndex(dword_100AC368[v2]);
  } else {
    v1 = GetStringWithIndex(0x14u);
  }
  v3 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v3 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 1003F760: using guessed type int __cdecl sub_1003F760(int);
// 100AC654: using guessed type int dword_100AC654;
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA2964: using guessed type int dword_10AA2964;

//----- (1003F7F0) --------------------------------------------------------
int __cdecl sub_1003F7F0(int a1) {
  const char *v1; // edi
  int v2;         // edx

  v1 = GetStringWithIndex(dword_100AC348[dword_100AC64C]);
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 1003F7F0: using guessed type int __cdecl sub_1003F7F0(int);
// 100AC64C: using guessed type int dword_100AC64C;

//----- (1003F860) --------------------------------------------------------
int __cdecl sub_1003F860(int a1) {
  const char *v1; // edi
  int v2;         // edx

  v1 = GetStringWithIndex(*(&dword_100AC3A8 + dword_10AA2A08));
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 1003F860: using guessed type int __cdecl sub_1003F860(int);
// 10AA2A08: using guessed type int dword_10AA2A08;

//----- (1003F8D0) --------------------------------------------------------
int __cdecl sub_1003F8D0(int a1) {
  int v1; // ebx

  if (dword_10AA2850) {
    v1 = a1;
    strcpy((char *)(a1 + 11109), GetStringWithIndex(0xAFu));
    if (dword_10A9D5C0[dword_10AA2840])
      *(_BYTE *)(a1 + 11108) = 4;
    else
      *(_BYTE *)(a1 + 11108) = 1;
  } else {
    v1 = a1;
    strcpy((char *)(a1 + 11109), asc_100AD300);
  }
  (*(void(__thiscall **)(int))(*(_DWORD *)(v1 + 11100) + 4))(v1 + 11100);
  sub_1003EE50(v1, 0);
  return 1;
}
// 1003EE50: using guessed type _DWORD __cdecl sub_1003EE50(_DWORD, __int16);
// 10A9D5C0: using guessed type int dword_10A9D5C0[];
// 10AA2840: using guessed type int dword_10AA2840;
// 10AA2850: using guessed type int dword_10AA2850;

//----- (1003F990) --------------------------------------------------------
int __cdecl sub_1003F990(int a1) {
  const char *v1; // edi
  int v2;         // edx

  v1 = GetStringWithIndex(dword_100AC358[dword_100AC650]);
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 1003F990: using guessed type int __cdecl sub_1003F990(int);
// 100AC650: using guessed type int dword_100AC650;

//----- (1003FA00) --------------------------------------------------------
int __cdecl sub_1003FA00(int a1) {
  int v1;           // ebx
  const char *v2;   // edi
  char *v3;         // edx
  const char *v4;   // edi
  int v5;           // edx
  int trackIndex;   // eax
  const char *v7;   // edi
  int v8;           // edx
  unsigned int v9;  // kr14_4
  const char *v10;  // esi
  char *v11;        // edi
  int v12;          // edx
  int v14;          // [esp+Ch] [ebp-84h]
  char buffer[128]; // [esp+10h] [ebp-80h] BYREF

  if (gUnkC8Ptr1 != (unk000C8 *)gUnkC8Ptr32 || dword_10AA28E8) {
    if (gGameMode) {
      strcpy(buffer, GetStringWithIndex(dword_100AC308[dword_100AC648]));
      trackIndex = dword_100AC648;
    } else {
      if (byte_10AA28A8) {
        v4 = GetStringWithIndex(dword_100AC308[(
            unsigned __int8)byte_100B3820[24 * (char)dword_10AA28B8 + 2 * dword_10AA28AC]]);
        v5 = dword_10AA28AC;
      } else {
        v4 = GetStringWithIndex(dword_100AC308[(
            unsigned __int8)byte_100B3820[24 * (char)dword_10AA28B8 + 2 * dword_10AA28A4]]);
        v5 = dword_10AA28A4;
      }
      strcpy(buffer, v4);
      trackIndex = (unsigned __int8)byte_100B3820[24 * (char)dword_10AA28B8 + 2 * v5];
    }
    v1 = a1;
    if ((gTrackData[trackIndex]->field_4 & 0x10) != 0) {
      v14 = *(_DWORD *)(a1 + 64);
      *(_DWORD *)(a1 + 12144) = 1124204544;
      v7 = GetStringWithIndex(0xB0u);
      v8 = *(_DWORD *)(a1 + 11100);
      strcpy((char *)(a1 + 11109), v7);
      (*(void(__thiscall **)(int))(v8 + 4))(a1 + 11100);
      sub_1003EE50(a1, 0);
      *(_DWORD *)(a1 + 12144) = v14;
    }
    v2 = buffer;
    v3 = (char *)(a1 + 11109);
  } else {
    v1 = a1;
    v2 = GetStringWithIndex(0x1Bu);
    v3 = (char *)(a1 + 11109);
  }
  v9 = strlen(v2) + 1;
  v10 = v2;
  v11 = v3;
  v12 = *(_DWORD *)(v1 + 11100);
  qmemcpy(v11, v10, v9);
  (*(void(__thiscall **)(int))(v12 + 4))(v1 + 11100);
  sub_1003EE50(v1, 0);
  return 1;
}
// 1003FA00: using guessed type int __cdecl sub_1003FA00(int);
// 100AC648: using guessed type int dword_100AC648;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28A8: using guessed type char byte_10AA28A8;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA2964: using guessed type int dword_10AA2964;

//----- (1003FC40) --------------------------------------------------------
int __cdecl sub_1003FC40(int a1) {
  const char *v1; // edi
  int v2;         // edx

  v1 = GetStringWithIndex(dword_100AC3F0[dword_10AA287C]);
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (1003FCB0) --------------------------------------------------------
int __cdecl sub_1003FCB0(int a1) {
  const char *v1; // eax
  int v2;         // edx

  if (MEMORY[0x118ABDBC])
    v1 = GetStringWithIndex(dword_100AC400[dword_10AA2A1C]);
  else
    v1 = GetStringWithIndex(0x74u);
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 100AC400: using guessed type int dword_100AC400[];
// 10AA2A1C: using guessed type int dword_10AA2A1C;
// 118ABDBC: using guessed type int dword_118ABDBC;

//----- (1003FD30) --------------------------------------------------------
int __cdecl sub_1003FD30(int a1) {
  const char *v1; // edi
  int v2;         // edx

  v1 = GetStringWithIndex(*(&dword_100AC418 + dword_10AA2A28));
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 10AA2A28: using guessed type int dword_10AA2A28;

//----- (1003FDA0) --------------------------------------------------------
int __cdecl sub_1003FDA0(int a1) {
  const char *v1; // edi
  int v2;         // edx

  v1 = GetStringWithIndex(*(&dword_100AC408 + dword_10AA2A20));
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 10AA2A20: using guessed type int dword_10AA2A20;

//----- (1003FE10) --------------------------------------------------------
int __cdecl sub_1003FE10(int a1) {
  const char *v1; // edi
  int v2;         // edx

  v1 = GetStringWithIndex(*(&dword_100AC410 + dword_10AA2A24));
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 10AA2A24: using guessed type int dword_10AA2A24;

//----- (1003FE80) --------------------------------------------------------
int __cdecl sub_1003FE80(int a1) {
  const char *v1; // edi
  int v2;         // edx
  int result;     // eax
  const char *v4; // eax
  int v5;         // ecx
  int v6;         // edx

  if (gUnkC8Ptr1 == (void *)gUnkC8Ptr32 && !dword_10AA28E8) {
    *(float *)(a1 + 12144) = *(float *)(a1 + 12144) - 8.0;
    v1 = GetStringWithIndex(0x1Cu);
    v2 = *(_DWORD *)(a1 + 11100);
    strcpy((char *)(a1 + 11109), v1);
    (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
    sub_1003EE50(a1, 0);
    result = 1;
    *(float *)(a1 + 12144) = *(float *)(a1 + 12144) - -8.0;
    return result;
  }
  if (gGameMode) {
    v5 = dword_10AA2A00;
    goto LABEL_9;
  }
  if (!byte_10AA28A8) {
    v5 = (unsigned __int8)byte_100B3821[24 * (char)dword_10AA28B8 + 2 * dword_10AA28A4];
  LABEL_9:
    v4 = GetStringWithIndex(dword_100AC3B0[v5]);
    goto LABEL_10;
  }
  v4 = GetStringWithIndex(dword_100AC3B0[(
      unsigned __int8)byte_100B3821[24 * (char)dword_10AA28B8 + 2 * dword_10AA28AC]]);
LABEL_10:
  v6 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v4);
  (*(void(__thiscall **)(int))(v6 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 1003FE80: using guessed type int __cdecl sub_1003FE80(int);
// 100AA010: using guessed type int g_GameMode;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28A8: using guessed type char byte_10AA28A8;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA2964: using guessed type int dword_10AA2964;
// 10AA2A00: using guessed type int dword_10AA2A00;

//----- (1003FFD0) --------------------------------------------------------
int __cdecl sub_1003FFD0(int a1) {
  const char *v1; // edi
  int v2;         // edx

  v1 = GetStringWithIndex(dword_100AC3E0[dword_10AA2A0C]);
  v2 = *(_DWORD *)(a1 + 11100);
  strcpy((char *)(a1 + 11109), v1);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 10AA2A0C: using guessed type int dword_10AA2A0C;

//----- (10040040) --------------------------------------------------------
int __cdecl sub_10040040(int a1, int a2) {
  int result; // eax
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  _DWORD *v5; // ecx
  _DWORD *v6; // ecx

  switch (a1) {
  case 0:
    result = 0;
    v3 = &unk_100B4338;
    while (*v3 != a2) {
      v3 += 9;
      ++result;
      if ((int)v3 >= (int)aRcfg)
        return 0;
    }
    break;
  case 1:
    result = 0;
    v6 = &unk_10B4E910;
    while (*v6 != a2) {
      v6 += 9;
      ++result;
      if ((int)v6 >= (int)gBossRallyCfgPath)
        goto LABEL_17;
    }
    break;
  case 2:
    result = 0;
    v5 = &unk_10B4E910;
    while (*v5 != a2) {
      v5 += 9;
      ++result;
      if ((int)v5 >= (int)gBossRallyCfgPath)
        return 0;
    }
    break;
  case 3:
    result = 0;
    v4 = &unk_10B4E7A8;
    while (*v4 != a2) {
      v4 += 9;
      ++result;
      if ((int)v4 >= (int)&unk_10B4E910)
        return 0;
    }
    break;
  default:
  LABEL_17:
    result = 0;
    break;
  }
  return result;
}

//----- (100400E0) --------------------------------------------------------
int __cdecl sub_100400E0(int a1) {
  unsigned __int8 v2;  // al
  const char *v3;      // edi
  char *v4;            // edx
  unsigned __int8 v5;  // bl
  int v6;              // eax
  unsigned __int8 v7;  // bl
  int v8;              // eax
  int v9;              // eax
  LPCSTR v10;          // eax
  unsigned __int8 v12; // [esp+14h] [ebp+4h]

  if (dword_10AA2844) {
    v10 = GetStringWithIndex(0xB2u);
  } else {
    switch (dword_10AA2A0C) {
    case 0:
      v2 = meth_BossRallyConfig_10069C30(&gConfig, 0, dword_100AB334[2 * dword_10AA2840]);
      v3 = &aEscape[36 * sub_10040040(0, v2)];
      v4 = (char *)(a1 + 11109);
      goto LABEL_17;
    case 1:
      v5 = meth_BossRallyConfig_10069C30(&gConfig, 1, dword_100AB334[2 * dword_10AA2840]);
      v12 = v5;
      if (meth_BossRallyConfig_10069BC0(&gConfig, 1, dword_100AB334[2 * dword_10AA2840])) {
        v6 = sub_10040040(1, v5);
        v4 = (char *)(a1 + 11109);
        v3 = &byte_10B4E914[36 * v6];
        goto LABEL_17;
      }
      if (v5)
        goto LABEL_13;
      goto LABEL_14;
    case 2:
      v7 = meth_BossRallyConfig_10069C30(&gConfig, 2, dword_100AB334[2 * dword_10AA2840]);
      v12 = v7;
      if (!meth_BossRallyConfig_10069BC0(&gConfig, 2, dword_100AB334[2 * dword_10AA2840]))
        goto LABEL_12;
      v8 = sub_10040040(2, v7);
      v4 = (char *)(a1 + 11109);
      v3 = &byte_10B4E914[36 * v8];
      goto LABEL_17;
    case 3:
      v7 = meth_BossRallyConfig_10069C30(&gConfig, 3, dword_100AB334[2 * dword_10AA2840]);
      v12 = v7;
      if (meth_BossRallyConfig_10069BC0(&gConfig, 3, dword_100AB334[2 * dword_10AA2840])) {
        v9 = sub_10040040(3, v7);
        v4 = (char *)(a1 + 11109);
        v3 = &byte_10B4E7AC[36 * v9];
        goto LABEL_17;
      }
    LABEL_12:
      if (v7) {
      LABEL_13:
        v3 = &aEscape[36 * sub_10040040(0, v12)];
        v4 = (char *)(a1 + 11109);
        goto LABEL_17;
      }
    LABEL_14:
      v10 = GetStringWithIndex(0xB1u);
      break;
    default:
      goto LABEL_18;
    }
  }
  v4 = (char *)(a1 + 11109);
  v3 = v10;
LABEL_17:
  strcpy(v4, v3);
LABEL_18:
  (*(void(__thiscall **)(int))(*(_DWORD *)(a1 + 11100) + 4))(a1 + 11100);
  sub_1003EE50(a1, 0);
  return 1;
}
// 100AB334: using guessed type int dword_100AB334[];
// 10AA2840: using guessed type int dword_10AA2840;
// 10AA2844: using guessed type int dword_10AA2844;
// 10AA2A0C: using guessed type int dword_10AA2A0C;

//----- (10040330) --------------------------------------------------------
int __cdecl sub_10040330(int a1) {
  int v1;      // esi
  int *v2;     // ebp
  int *v4;     // ebx
  int *v5;     // esi
  int v6;      // eax
  int v7;      // ebp
  char v8;     // al
  int v10;     // [esp-4h] [ebp-28h]
  _DWORD *v11; // [esp+10h] [ebp-14h]
  int *v12;    // [esp+14h] [ebp-10h]
  int v13;     // [esp+18h] [ebp-Ch]
  int v14;     // [esp+1Ch] [ebp-8h]
  int v15;     // [esp+20h] [ebp-4h]
  char v16;    // [esp+28h] [ebp+4h]

  v1 = 0;
  v2 = dword_10A9D5C0;
  v14 = 0;
  v12 = dword_10A9D5C0;
  v4 = dword_100AB334;
  do {
    v10 = *v4;
    *v2 = 0;
    v13 = meth_BossRallyConfig_10069BC0(gConfig, a1, v10);
    ++v1;
    v16 = meth_BossRallyConfig_10069C30(gConfig, a1, *v4);
    v15 = v1;
    if (v1 < 21) {
      v5 = v4 + 2;
      v11 = v2 + 1;
      do {
        if ((int)v4 >= (int)&unk_100AB394 || (v6 = *v5, *v5 != 12) && v6 != 13 && v6 != 14) {
          v7 = meth_BossRallyConfig_10069BC0(gConfig, a1, *v5);
          v8 = meth_BossRallyConfig_10069C30(gConfig, a1, *v5);
          if ((v13 || v16) && v13 == v7 && v16 == v8) {
              v14 = 1;
              *v11 = 1;
              *v12 = 1;
          }
        }
        v5 += 2;
        ++v11;
      } while ((int)v5 < (int)&word_100AB3DC);
      v2 = v12;
      v1 = v15;
    }
    v4 += 2;
    v12 = ++v2;
  } while ((int)v4 < (int)&word_100AB3DC);
  return v14;
}
// 100AB334: using guessed type int dword_100AB334[];
// 100AB3DC: using guessed type __int16 word_100AB3DC;
// 10A9D5C0: using guessed type int dword_10A9D5C0[];

//----- (10040450) --------------------------------------------------------
int sub_10040450() {
  int v0;  // eax
  int v2;  // ecx
  int *v3; // eax
  int v4;  // [esp-Ch] [ebp-118h]
  int v5;  // [esp+8h] [ebp-104h] BYREF

  if (dword_10AA2844) {
    v0 = sub_1005FFD0();
    dword_100AC6A0 = v0;
    if (v0 == -1 && dword_10AA2A38) {
      dword_10AA33E4 = 0;
      dword_10AA28D8 = 0;
      dword_10AA2844 = 0;
      dword_10AA2A38 = 0;
      return 1;
    }
    switch (dword_10AA2A0C) {
    case 0:
      if (v0 >= 0) {
        dword_10AA2A38 = 1;
        v5 = meth_BossRallyConfig_10069BC0(gConfig, 0, dword_100AB334[2 * dword_10AA2840]);
        meth_BossRallyConfig_10069B10(
            (char *)gConfig, 0, dword_100AB334[2 * dword_10AA2840], v5, dword_100AC6A0);
      }
      dword_10AA2850 = sub_10040330(0);
      return 1;
    case 1:
      if (v0 == -1)
        v0 = input_10077200(&v5);
      else
        v5 = 0;
      if (v0 >= 0) {
        dword_100AC6A0 = v0;
        dword_10AA2A38 = 1;
        meth_BossRallyConfig_10069B10(
            (char *)gConfig, 1, dword_100AB334[2 * dword_10AA2840], v5, v0);
      }
      dword_10AA2850 = sub_10040330(1);
      return 1;
    case 2:
      if (v0 == -1)
        v0 = input_10077200(&v5);
      else
        v5 = 0;
      if (v0 >= 0) {
        dword_100AC6A0 = v0;
        v4 = dword_100AB334[2 * dword_10AA2840];
        dword_10AA2A38 = 1;
        meth_BossRallyConfig_10069B10((char *)gConfig, 2, v4, v5, v0);
      }
      dword_10AA2850 = sub_10040330(2);
      return 1;
    case 3:
      if (v0 == -1) {
        v0 = input_10077310();
        v2 = 768;
      } else {
        v2 = 0;
      }
      v5 = v2;
      if (v0 >= 0) {
        dword_100AC6A0 = v0;
        meth_BossRallyConfig_10069B10(
            (char *)gConfig, 3, dword_100AB334[2 * dword_10AA2840], v2, v0);
        dword_10AA2A3C = 1;
      }
      dword_10AA2850 = sub_10040330(3);
      if (!dword_10AA2A3C)
        return 1;
      input_10077310();
      v3 = dword_10AA33C0;
      break;
    default:
      return 1;
    }
    while (!*v3) {
      if ((int)++v3 >= (int)dword_10AA33D0) {
        dword_10AA2A3C = 0;
        dword_10AA2A38 = 1;
        return 1;
      }
    }
  }
  return 1;
}
// 100AB334: using guessed type int dword_100AB334[];
// 100AC6A0: using guessed type int dword_100AC6A0;
// 10AA2840: using guessed type int dword_10AA2840;
// 10AA2844: using guessed type int dword_10AA2844;
// 10AA2850: using guessed type int dword_10AA2850;
// 10AA28D8: using guessed type int dword_10AA28D8;
// 10AA2A0C: using guessed type int dword_10AA2A0C;
// 10AA2A38: using guessed type int dword_10AA2A38;
// 10AA2A3C: using guessed type int dword_10AA2A3C;
// 10AA33C0: using guessed type int dword_10AA33C0[];
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33E4: using guessed type int dword_10AA33E4;

//----- (10040680) --------------------------------------------------------
int sub_10040680() {
  if (!dword_10AA2844) {
    dword_10AA28D8 = 1;
    dword_10AA2844 = (LPDIRECTINPUTDEVICEA)1;
    dword_10AA33E4 = 0;
    sub_1005FF30();
    sub_1005FF60();
    sub_1005FFF0();
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;
// 10AA33E4: using guessed type int dword_10AA33E4;

//----- (100406C0) --------------------------------------------------------
int sub_100406C0() {
  int result; // eax

  switch (dword_10AA2A0C) {
  case 0:
    meth_BossRallyConfig_10069AA0(&gConfig, 0);
    result = 1;
    break;
  case 1:
    meth_BossRallyConfig_10069AA0(&gConfig, 1);
    result = 1;
    break;
  case 2:
    meth_BossRallyConfig_10069AA0(&gConfig, 2);
    result = 1;
    break;
  case 3:
    meth_BossRallyConfig_10069AA0(&gConfig, 3);
    goto LABEL_6;
  default:
  LABEL_6:
    result = 1;
    break;
  }
  return result;
}
// 10AA2A0C: using guessed type int dword_10AA2A0C;

//----- (10040730) --------------------------------------------------------
int __cdecl sub_10040730(int a1) {
  int v1;     // edx
  int v2;     // eax
  __int16 v3; // cx
  int result; // eax

  if (gGameMode) {
    v2 = dword_100AC648;
  } else {
    if (byte_10AA28A8)
      v1 = dword_10AA28AC + 12 * (char)dword_10AA28B8;
    else
      v1 = dword_10AA28A4 + 12 * (char)dword_10AA28B8;
    v2 = (unsigned __int8)byte_100B3820[2 * v1];
  }
  v3 = word_100AC550[v2];
  result = 1;
  *(_WORD *)(a1 + 123404) = v3;
  return result;
}
// 10040730: using guessed type int __cdecl sub_10040730(int);
// 100AA010: using guessed type int g_GameMode;
// 100AC648: using guessed type int dword_100AC648;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28A8: using guessed type char byte_10AA28A8;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (100407A0) --------------------------------------------------------
int __cdecl sub_100407A0(int a1) {
  if (gUnkC8Ptr1 == (void *)gUnkC8Ptr32 && !dword_10AA28E8)
    return -2;
  *(_WORD *)(a1 + 123404) = word_100AC570[dword_100AC648];
  return 1;
}
// 100AC648: using guessed type int dword_100AC648;
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA2964: using guessed type int dword_10AA2964;

//----- (100407E0) --------------------------------------------------------
int __cdecl sub_100407E0(int a1) {
  int v2; // eax
  int v3; // ecx

  if (gUnkC8Ptr1 == (void *)gUnkC8Ptr32 && !dword_10AA28E8)
    return -2;
  if (gGameMode) {
    v3 = dword_10AA2A00;
  } else {
    if (byte_10AA28A8)
      v2 = dword_10AA28AC + 12 * (char)dword_10AA28B8;
    else
      v2 = dword_10AA28A4 + 12 * (char)dword_10AA28B8;
    v3 = (unsigned __int8)byte_100B3821[2 * v2];
  }
  *(_WORD *)(a1 + 123404) = byte_100AC590[v3];
  return 1;
}
// 100407E0: using guessed type int __cdecl sub_100407E0(int);
// 100AA010: using guessed type int g_GameMode;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28A8: using guessed type char byte_10AA28A8;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA2964: using guessed type int dword_10AA2964;
// 10AA2A00: using guessed type int dword_10AA2A00;

//----- (10040870) --------------------------------------------------------
int __cdecl sub_10040870(int a1) {
  *(_WORD *)(a1 + 123404) = byte_100AC598[dword_10AA2A08];
  return 1;
}
// 10040870: using guessed type int __cdecl sub_10040870(int);
// 10AA2A08: using guessed type int dword_10AA2A08;

//----- (10040890) --------------------------------------------------------
int __cdecl sub_10040890(int a1) {
  *(_WORD *)(a1 + 123404) = byte_100AC59C[dword_100AC64C];
  return 1;
}
// 10040890: using guessed type int __cdecl sub_10040890(int);
// 100AC64C: using guessed type int dword_100AC64C;

//----- (100408B0) --------------------------------------------------------
int __cdecl sub_100408B0(int a1) {
  *(_WORD *)(a1 + 123404) = byte_100AC5A0[dword_100AC650];
  return 1;
}
// 100408B0: using guessed type int __cdecl sub_100408B0(int);
// 100AC650: using guessed type int dword_100AC650;

//----- (100408D0) --------------------------------------------------------
int __cdecl sub_100408D0(int a1) {
  int v1; // ebx

  if (gUnkC8Ptr1 != (void *)gUnkC8Ptr32 || dword_10AA28E8) {
    _itoa(dword_100BD3E0, (char *)(a1 + 11109), 10);
    v1 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v1 + 8))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v1 + 44))(a1 + 11100);
  }
  return 1;
}
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA2964: using guessed type int dword_10AA2964;

//----- (10040930) --------------------------------------------------------
int __cdecl sub_10040930(int a1) {
  *(_WORD *)(a1 + 123404) = byte_100AC62C[dword_10AA287C];
  return 1;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (10040950) --------------------------------------------------------
int __cdecl sub_10040950(int a1) {
  if (MEMORY[0x118ABDBC])
    *(_WORD *)(a1 + 123404) = byte_100AC630[dword_10AA2A1C];
  else
    *(_WORD *)(a1 + 123404) = byte_100AC631;
  return 1;
}
// 100AC631: using guessed type char byte_100AC631;
// 10AA2A1C: using guessed type int dword_10AA2A1C;
// 118ABDBC: using guessed type int dword_118ABDBC;

//----- (10040990) --------------------------------------------------------
int __cdecl sub_10040990(int a1) {
  int result; // eax

  result = 1;
  *(_WORD *)(a1 + 123404) = word_100AC640[2 * dword_10AA2A28];
  return result;
}
// 100AC640: using guessed type __int16 word_100AC640[];
// 10AA2A28: using guessed type int dword_10AA2A28;

//----- (100409B0) --------------------------------------------------------
int __cdecl sub_100409B0(int a1) {
  *(_WORD *)(a1 + 123404) = byte_100AC634[dword_10AA2A20];
  return 1;
}
// 10AA2A20: using guessed type int dword_10AA2A20;

//----- (100409D0) --------------------------------------------------------
int __cdecl sub_100409D0(int a1) {
  *(_WORD *)(a1 + 123404) = byte_100AC638[dword_10AA2A24];
  return 1;
}
// 10AA2A24: using guessed type int dword_10AA2A24;

//----- (100409F0) --------------------------------------------------------
int sub_100409F0() {
  dword_10AA28A0 = dword_10AA25DC;
  LOBYTE(dword_10AA28B8) = byte_10AA25D4;
  dword_10AA28A4 = dword_10AA25D8;
  return 1;
}
// 100409F0: using guessed type int sub_100409F0();
// 10AA25D4: using guessed type char byte_10AA25D4;
// 10AA25D8: using guessed type int dword_10AA25D8;
// 10AA25DC: using guessed type int dword_10AA25DC;
// 10AA28A0: using guessed type int dword_10AA28A0;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (10040A20) --------------------------------------------------------
int sub_10040A20() {
  dword_10AA28A0 = dword_10AA26F0;
  LOBYTE(dword_10AA28B8) = dword_10AA26F4[0];
  dword_10AA28A4 = BYTE1(dword_10AA26F4[0]);
  return 1;
}
// 10040A20: using guessed type int sub_10040A20();
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA28A0: using guessed type int dword_10AA28A0;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (10040A50) --------------------------------------------------------
int __cdecl sub_10040A50(int a1) {
  int v1; // edi

  sprintf(byte_10AA2518, "%d", dword_10AA28A0 + 1);
  strcpy((char *)(a1 + 11109), byte_10AA2518);
  v1 = *(_DWORD *)(a1 + 11100);
  (*(void(__thiscall **)(int))(v1 + 8))(a1 + 11100);
  if (a1 != -11109)
    (*(void(__thiscall **)(int))(v1 + 44))(a1 + 11100);
  return 1;
}
// 10AA28A0: using guessed type int dword_10AA28A0;

//----- (10040AC0) --------------------------------------------------------
int __cdecl sub_10040AC0(int a1) {
  int v1; // edi

  sprintf(byte_10A9D618, "%d", dword_10AA28A4 + 1);
  strcpy((char *)(a1 + 11109), byte_10A9D618);
  v1 = *(_DWORD *)(a1 + 11100);
  (*(void(__thiscall **)(int))(v1 + 8))(a1 + 11100);
  if (a1 != -11109)
    (*(void(__thiscall **)(int))(v1 + 44))(a1 + 11100);
  return 1;
}
// 10AA28A4: using guessed type int dword_10AA28A4;

//----- (10040B30) --------------------------------------------------------
int __cdecl sub_10040B30(int a1) {
  int v1; // edi

  sprintf(byte_10A9D618, "%d", dword_10AA28A4 + 1);
  strcpy((char *)(a1 + 11109), GetStringWithIndex(0x37u));
  strcat((char *)(a1 + 11109), asc_100AD304);
  strcat((char *)(a1 + 11109), byte_10A9D618);
  v1 = *(_DWORD *)(a1 + 11100);
  (*(void(__thiscall **)(int))(v1 + 4))(a1 + 11100);
  if (a1 != -11109)
    (*(void(__thiscall **)(int))(v1 + 16))(a1 + 11100);
  return 1;
}
// 10AA28A4: using guessed type int dword_10AA28A4;

//----- (10040C00) --------------------------------------------------------
int __cdecl sub_10040C00(int a1) {
  double v1;       // st7
  double v2;       // st7
  double v3;       // st6
  int result;      // eax
  int v5;          // edi
  float v6;        // [esp+10h] [ebp-28h]
  char Buffer[32]; // [esp+18h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  if (dword_10AA289C &&
      (v1 = flt_10AA27FC[(
           unsigned __int8)byte_100B3820[24 * (char)dword_10AA28B8 + 2 * dword_10AA28AC]],
       v1 > 0.0)) {
    v2 = (double)(int)(__int64)(v1 * 100.0);
    v3 = (double)(int)(__int64)(v2 * 0.0099999998);
    v6 = v3;
    sprintf(Buffer,
            "%d:%02d.%02d",
            (unsigned int)(__int64)(v6 * 0.016666668),
            (unsigned int)(__int64)(v6 - (double)(int)(__int64)(v6 * 0.016666668) * 60.0),
            (unsigned int)(__int64)(v2 - v3 * 100.0));
  } else {
    strcpy(Buffer, asc_100AD308);
  }
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v5 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v5 + 4))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v5 + 16))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (10040D70) --------------------------------------------------------
int __cdecl sub_10040D70(int a1) {
  double v1;       // st7
  double v2;       // st7
  double v3;       // st6
  int result;      // eax
  int v5;          // edi
  float v6;        // [esp+10h] [ebp-28h]
  char Buffer[32]; // [esp+18h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  if (dword_10AA289C &&
      (v1 = flt_10AA27A0[(
           unsigned __int8)byte_100B3820[24 * (char)dword_10AA28B8 + 2 * dword_10AA28AC]],
       v1 > 0.0)) {
    v2 = (double)(int)(__int64)(v1 * 100.0);
    v3 = (double)(int)(__int64)(v2 * 0.0099999998);
    v6 = v3;
    sprintf(Buffer,
            "%d:%02d.%02d",
            (unsigned int)(__int64)(v6 * 0.016666668),
            (unsigned int)(__int64)(v6 - (double)(int)(__int64)(v6 * 0.016666668) * 60.0),
            (unsigned int)(__int64)(v2 - v3 * 100.0));
  } else {
    strcpy(Buffer, asc_100AD308);
  }
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v5 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v5 + 4))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v5 + 16))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (10040EE0) --------------------------------------------------------
int __cdecl sub_10040EE0(int a1) {
  double v1;       // st7
  double v2;       // st7
  double v3;       // st6
  int result;      // eax
  int v5;          // edi
  float v6;        // [esp+10h] [ebp-28h]
  char Buffer[32]; // [esp+18h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  if (dword_10AA28D0 == 3)
    v1 = *(float *)&dword_10AA28C8;
  else
    v1 = flt_10AA25A0[dword_10AA28D0];
  if (v1 > 0.0) {
    v2 = (double)(int)(__int64)(v1 * 100.0);
    v3 = (double)(int)(__int64)(v2 * 0.0099999998);
    v6 = v3;
    sprintf(Buffer,
            "%d:%02d.%02d",
            (unsigned int)(__int64)(v6 * 0.016666668),
            (unsigned int)(__int64)(v6 - (double)(int)(__int64)(v6 * 0.016666668) * 60.0),
            (unsigned int)(__int64)(v2 - v3 * 100.0));
  } else {
    strcpy(Buffer, asc_100AD308);
  }
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v5 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v5 + 4))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v5 + 16))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 10AA28C8: using guessed type int dword_10AA28C8;
// 10AA28D0: using guessed type int dword_10AA28D0;

//----- (10041040) --------------------------------------------------------
int __cdecl sub_10041040(int a1) {
  double v1;       // st7
  double v2;       // st6
  int result;      // eax
  int v4;          // edi
  float v5;        // [esp+10h] [ebp-28h]
  char Buffer[32]; // [esp+18h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  if (*(float *)&dword_10AA28C8 > 0.0) {
    v1 = (double)(int)(__int64)(*(float *)&dword_10AA28C8 * 100.0);
    v2 = (double)(int)(__int64)(v1 * 0.0099999998);
    v5 = v2;
    sprintf(Buffer,
            "%d:%02d.%02d",
            (unsigned int)(__int64)(v5 * 0.016666668),
            (unsigned int)(__int64)(v5 - (double)(int)(__int64)(v5 * 0.016666668) * 60.0),
            (unsigned int)(__int64)(v1 - v2 * 100.0));
  } else {
    strcpy(Buffer, asc_100AD308);
  }
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v4 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v4 + 4))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v4 + 16))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 10AA28C8: using guessed type int dword_10AA28C8;

//----- (10041180) --------------------------------------------------------
int __cdecl sub_10041180(int a1) {
  double v1;       // st7
  double v2;       // st6
  int result;      // eax
  int v4;          // edi
  float v5;        // [esp+10h] [ebp-28h]
  char Buffer[32]; // [esp+18h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  if (*(float *)&dword_10AA28CC > 0.0) {
    v1 = (double)(int)(__int64)(*(float *)&dword_10AA28CC * 100.0);
    v2 = (double)(int)(__int64)(v1 * 0.0099999998);
    v5 = v2;
    sprintf(Buffer,
            "%d:%02d.%02d",
            (unsigned int)(__int64)(v5 * 0.016666668),
            (unsigned int)(__int64)(v5 - (double)(int)(__int64)(v5 * 0.016666668) * 60.0),
            (unsigned int)(__int64)(v1 - v2 * 100.0));
  } else {
    strcpy(Buffer, asc_100AD308);
  }
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v4 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v4 + 4))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v4 + 16))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 10AA28CC: using guessed type int dword_10AA28CC;

//----- (100412C0) --------------------------------------------------------
int sub_100412C0() {
  dword_10AA28D0 = 0;
  return 1;
}
// 10AA28D0: using guessed type int dword_10AA28D0;

//----- (100412D0) --------------------------------------------------------
int sub_100412D0() {
  int result; // eax

  result = 1;
  dword_10AA28D0 = 1;
  return result;
}
// 10AA28D0: using guessed type int dword_10AA28D0;

//----- (100412E0) --------------------------------------------------------
int sub_100412E0() {
  dword_10AA28D0 = 2;
  return 1;
}
// 10AA28D0: using guessed type int dword_10AA28D0;

//----- (100412F0) --------------------------------------------------------
int sub_100412F0() {
  dword_10AA28D0 = 3;
  return 1;
}
// 10AA28D0: using guessed type int dword_10AA28D0;

//----- (10041300) --------------------------------------------------------
int __cdecl sub_10041300(int a1) {
  int v1;         // eax
  int v2;         // esi
  const char *v3; // edi
  int result;     // eax
  char *v5;       // eax
  int v6;         // edi

  v1 = 0;
  if (dword_10AA289C)
    v1 = (char)dword_10AA28B8;
  v2 = 3 * v1;
  v3 = GetStringWithIndex(*(&dword_100B3810 + 6 * v1));
  result = 0;
  if (strlen(v3)) {
    v5 = (char *)GetStringWithIndex(*(&dword_100B3810 + 2 * v2));
    strcpy((char *)(a1 + 11109), _strupr(v5));
    v6 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v6 + 4))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v6 + 16))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 10041300: using guessed type int __cdecl sub_10041300(int);
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (100413B0) --------------------------------------------------------
int __cdecl sub_100413B0(int a1) {
  LPCSTR v1;        // eax
  int v2;           // edi
  LPCSTR v4;        // [esp-4h] [ebp-90h]
  LPCSTR v5;        // [esp-4h] [ebp-90h]
  char Buffer[128]; // [esp+Ch] [ebp-80h] BYREF

  sprintf(byte_10AA2518, "%d", dword_10AA28A0 + 1);
  if (dword_10AA28A0) {
    if (dword_10AA28A0 == 1) {
      v5 = GetStringWithIndex(0xB4u);
      sprintf(Buffer, "%s%s", byte_10AA2518, v5);
      goto LABEL_9;
    }
    if (dword_10AA28A0 == 2) {
      v4 = GetStringWithIndex(0xB5u);
      sprintf(Buffer, "%s%s", byte_10AA2518, v4);
      goto LABEL_9;
    }
    v1 = GetStringWithIndex(0xB6u);
  } else {
    v1 = GetStringWithIndex(0xB3u);
  }
  sprintf(Buffer, "%s%s", byte_10AA2518, v1);
LABEL_9:
  strcpy((char *)(a1 + 11109), Buffer);
  v2 = *(_DWORD *)(a1 + 11100);
  (*(void(__thiscall **)(int))(v2 + 4))(a1 + 11100);
  if (a1 != -11109)
    (*(void(__thiscall **)(int))(v2 + 16))(a1 + 11100);
  return 1;
}
// 100413B0: using guessed type int __cdecl sub_100413B0(int);
// 10AA28A0: using guessed type int dword_10AA28A0;

//----- (100414B0) --------------------------------------------------------
int __cdecl sub_100414B0(int a1) {
  int v1;              // edx
  int v2;              // ecx
  __int16 *v3;         // eax
  unsigned __int16 v4; // si
  int result;          // eax
  int v6;              // edi
  char Buffer[32];     // [esp+10h] [ebp-20h] BYREF

  v1 = 0;
  memset(Buffer, 0, sizeof(Buffer));
  if (dword_10AA289C) {
    v2 = 4;
    v3 = &word_10AA270E[4 * (char)dword_10AA28B8];
    do {
      v4 = *v3++;
      v1 += v4;
      --v2;
    } while (v2);
    _itoa(v1, Buffer, 10);
  } else {
    strcpy(Buffer, a0);
  }
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v6 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v6 + 8))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v6 + 44))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 10AA270E: using guessed type __int16 word_10AA270E[];
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (100415A0) --------------------------------------------------------
int __cdecl sub_100415A0(int a1) {
  int v1;          // eax
  int v2;          // eax
  int result;      // eax
  int v4;          // edi
  char Buffer[32]; // [esp+10h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  if (dword_10AA289C)
    v1 = dword_100B3818[6 * (char)dword_10AA28B8];
  else
    v1 = dword_100B3818[0];
  v2 = v1 - dword_10AA28C4;
  if (v2 < 0)
    v2 = 0;
  _itoa(v2, Buffer, 10);
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v4 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v4 + 8))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v4 + 44))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 100B3818: using guessed type int dword_100B3818[];
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (10041670) --------------------------------------------------------
int __cdecl sub_10041670(int a1) {
  int result;      // eax
  int v2;          // edi
  char Buffer[32]; // [esp+4h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  _itoa(dword_10AA28A4 + 1, Buffer, 10);
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v2 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v2 + 8))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v2 + 44))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 10AA28A4: using guessed type int dword_10AA28A4;

//----- (10041710) --------------------------------------------------------
int __cdecl sub_10041710(int a1) {
  int result;      // eax
  int v2;          // edi
  char Buffer[32]; // [esp+4h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  _itoa(dword_10AA28C4, Buffer, 10);
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v2 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v2 + 8))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v2 + 44))(a1 + 11100);
    result = 1;
  }
  return result;
}

//----- (100417B0) --------------------------------------------------------
int __cdecl sub_100417B0(int a1) {
  int v1;          // eax
  int result;      // eax
  int v3;          // edi
  char Buffer[32]; // [esp+10h] [ebp-20h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  v1 = dword_100B3818[6 * dword_10220B24] - dword_10AA28C4;
  if (v1 < 0)
    v1 = 0;
  _itoa(v1, Buffer, 10);
  result = 0;
  if (strlen(Buffer)) {
    strcpy((char *)(a1 + 11109), _strupr(Buffer));
    v3 = *(_DWORD *)(a1 + 11100);
    (*(void(__thiscall **)(int))(v3 + 8))(a1 + 11100);
    if (a1 != -11109)
      (*(void(__thiscall **)(int))(v3 + 44))(a1 + 11100);
    result = 1;
  }
  return result;
}
// 100B3818: using guessed type int dword_100B3818[];
// 10220B24: using guessed type int dword_10220B24;

//----- (10041870) --------------------------------------------------------
int __cdecl sub_10041870(int a1) {
  *(_WORD *)(a1 + 123404) = byte_100AC628[dword_10AA2A0C];
  return 1;
}
// 10AA2A0C: using guessed type int dword_10AA2A0C;

//----- (10041890) --------------------------------------------------------
int __cdecl sub_10041890(int a1) {
  int v1; // ecx

  v1 = *(_DWORD *)(a1 + 28);
  if (dword_10AA28E0) {
    *(_DWORD *)(a1 + 28) = v1 & 0xFFFFEFEF;
  } else {
    *(_WORD *)(a1 + 123404) = 2;
    *(_DWORD *)(a1 + 28) = v1 | 0x1010;
    *(_BYTE *)(a1 + 11108) = 0;
  }
  return 1;
}
// 10AA28E0: using guessed type int dword_10AA28E0;

//----- (100418D0) --------------------------------------------------------
int __cdecl sub_100418D0(int a1) {
  if (dword_10AA28E4)
    *(_DWORD *)(a1 + 28) &= 0xFFFFEFEF;
  return 1;
}
// 10AA28E4: using guessed type int dword_10AA28E4;

//----- (100418F0) --------------------------------------------------------
int __cdecl sub_100418F0(int a1) {
  int v1; // ecx

  v1 = *(_DWORD *)(a1 + 28);
  if (dword_10AA28E8) {
    *(_DWORD *)(a1 + 28) = v1 & 0xFFFFEFEF;
  } else {
    *(_WORD *)(a1 + 123404) = 2;
    *(_DWORD *)(a1 + 28) = v1 | 0x1010;
    *(_BYTE *)(a1 + 11108) = 0;
  }
  return 1;
}
// 10AA28E8: using guessed type int dword_10AA28E8;

//----- (10041930) --------------------------------------------------------
int sub_10041930() {
  if (dword_10ACEE50 >= dword_100BD3E0) {
    sub_10044B90();
    sub_10044E20();
  }
  gGameMode = 2;
  return 1;
}
// 100AA010: using guessed type int g_GameMode;
// 10ACEE50: using guessed type int dword_10ACEE50;

//----- (10041970) --------------------------------------------------------
int __cdecl sub_10041970(int a1) {
  sub_100419D0(asc_100AD300);
  gGameMode = GAME_MODE_4;
  if (dword_10AA2A40) {
    dword_106805B8 = 2;
    dword_10AA289C = 0;
  } else {
    dword_106805B8 = 1;
  }
  *(_DWORD *)(*(_DWORD *)(a1 + 0x2AE8) + 0x68) = 0;
  (*(void(__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(a1 + 0x2AE8) + 24))(
      *(_DWORD *)(a1 + 0x2AE8), 0);
  return 0;
}
// 106805B8: using guessed type int dword_106805B8;
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA2A40: using guessed type int dword_10AA2A40;

//----- (100419D0) --------------------------------------------------------
void __cdecl sub_100419D0(LPCSTR a1) {
  unk1E214 *v1; // ecx

  v1 = gUnkC8Ptr1->field_14[0]->field_18[dword_10A9DBD0];
  if (v1)
    v1->lpVtbl->meth13(v1, a1, 1, 1, &unk_100AB558);
}
// 10A9DBD0: using guessed type int dword_10A9DBD0;

//----- (10041A00) --------------------------------------------------------
int __cdecl sub_10041A00(int a1) {
  int v1; // eax

  *(_DWORD *)(*(_DWORD *)(a1 + 10984) + 112) = 0;
  *(_DWORD *)(dword_10AA29CC + 1080 * Value + 1100) =
      *(_DWORD *)(dword_10AA29CC + 1080 * Value + 1100) == 0;
  v1 = dword_10AA29CC + 1080 * Value;
  dword_10AA28D8 = *(_DWORD *)(v1 + 1100);
  if (dword_10AA28D8) {
    strcpy(byte_10A9D078, (const char *)(v1 + 53));
    strcpy((char *)(v1 + 53), String2);
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10041AC0) --------------------------------------------------------
int __cdecl sub_10041AC0(unk1E214 *a1) {
  a1->field_2AE8->field_70 = 0;
  dword_10AA28E4 = 0;
  if (dword_10AA28D8 && byte_10A9D078) {
    strcpy((char *)(dword_10AA29CC + 1080 * Value + 53), byte_10A9D078);
    strcpy(byte_10A9D078, String2);
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;
// 10AA28E4: using guessed type int dword_10AA28E4;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10041B50) --------------------------------------------------------
void sub_10041B50() {
# 505 * v0; // edx

  v0 = dword_10ACED34;
  if (dword_10ACED34) {
    strcpy(aCRallyseasonDatFilepath_ptr, aAutosaveBrf);
    if (!*((_BYTE *)v0 + 4) && !*((_BYTE *)v0 + 5)) {
      memset((char *)v0 + 6, 0, 0x18u);
      memset((char *)dword_10ACED34 + 30, 0, 0x30u);
      memset((char *)dword_10ACED34 + 80, 0, 0x60u);
    }
    sub_100709A0();
  }
}

//----- (10041BD0) --------------------------------------------------------
FILE *sub_10041BD0() {
  FILE *result;        // eax
  int v1;              // esi
  int v2;              // ecx
  int v3;              // edx
  int *v4;             // edi
  int *v5;             // eax
  unsigned __int16 v6; // bp
  int v7;              // edx
  int v8;              // ecx
  int v9;              // eax
  int v10;             // ecx
  int v11;             // [esp+Ch] [ebp-108h]
  char FileName[260];  // [esp+10h] [ebp-104h] BYREF

  gGameMode = 0;
  sub_1003E680();
  dword_10690A18 = 0;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  strcpy(FileName, aAutosaveBrf);
  result = fopen(FileName, Mode);
  if (result) {
    fclose(result);
    strcpy(aCRallyseasonDatFilepath_ptr, FileName);
    if (!sub_10071130(4, (FILE *)1))
      sub_1003E260(7);
    qmemcpy(&dword_10AA26F0, dword_10ACED34, 0x14Cu);
    dword_10AA28E0 = 1;
    v11 = *(_DWORD *)dword_10ACED34;
    dword_10AA28A0 = *(_DWORD *)dword_10ACED34;
    v1 = *((unsigned __int8 *)dword_10ACED34 + 5);
    dword_10AA28AC = v1;
    dword_10AA28A4 = v1;
    LOBYTE(dword_10AA28B8) = *((_BYTE *)dword_10ACED34 + 4);
    dword_10AA2A08 = dword_10AD0978;
    dword_100AC64C = dword_10AD097C;
    dword_100AC650 = dword_10AD0980;
    dword_100AC654 = dword_10AD0984;
    dword_100AC65C = dword_10AD0988;
    dword_10AA289C = 1;
    sub_1003E310();
    sub_1003E510();
    v2 = 0;
    v3 = 4;
    v4 = (int *)&word_10AA270E[4 * (char)dword_10AA28B8];
    v5 = v4;
    do {
      v6 = *(_WORD *)v5;
      v5 = (int *)((char *)v5 + 2);
      v2 += v6;
      --v3;
    } while (v3);
    v7 = *(int *)((char *)&dword_10AA26F4[(char)dword_10AA28B8] + 2);
    dword_10AA28C4 = v2;
    v8 = dword_10AA28A4;
    v9 = 0;
    for (dword_10AA26E8 = v7; v9 < v8; ++v9)
      ++*((_BYTE *)&dword_10AA26E8 + v9);
    v10 = v4[1];
    dword_10A9D068 = *v4;
    dword_10A9D06C = v10;
    sprintf(byte_10AA2518, "%d", v11 + 1);
    result = (FILE *)sprintf(byte_10A9D618, "%d", v1 + 1);
  }
  return result;
}
// 100AA010: using guessed type int g_GameMode;
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC65C: using guessed type int dword_100AC65C;
// 10690A18: using guessed type int dword_10690A18;
// 10A9D068: using guessed type int dword_10A9D068;
// 10A9D06C: using guessed type int dword_10A9D06C;
// 10AA26E8: using guessed type int dword_10AA26E8;
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA270E: using guessed type __int16 word_10AA270E[];
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28A0: using guessed type int dword_10AA28A0;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA28E0: using guessed type int dword_10AA28E0;
// 10AA2A08: using guessed type int dword_10AA2A08;
// 10AD0978: using guessed type int dword_10AD0978;
// 10AD097C: using guessed type int dword_10AD097C;
// 10AD0980: using guessed type int dword_10AD0980;
// 10AD0984: using guessed type int dword_10AD0984;
// 10AD0988: using guessed type int dword_10AD0988;

//----- (10041DF0) --------------------------------------------------------
int __cdecl sub_10041DF0(char *a1, int a2) {
  int v3;         // edx
  char Buffer[4]; // [esp+0h] [ebp-108h] BYREF
  char v5[260];   // [esp+4h] [ebp-104h] BYREF

  if (!dword_10AA289C)
    return 0;
  if (a2 == -1) {
    if (byte_10A9D078) {
      strcpy(&a1[1080 * Value + 53], byte_10A9D078);
      return 1;
    }
  } else {
    v3 = Value;
    if (&a1[1080 * Value] != (char *)0xFFFFFFCB) {
      strcpy(v5, aRallyseason);
      _itoa(v3, Buffer, 10);
      strcat(v5, Buffer);
      strcat(v5, aBrf);
      strcpy(aCRallyseasonDatFilepath_ptr, v5);
      strcpy(&gUnkC8Ptr6->field_C0[260 * Value + 4], &a1[1080 * Value + 53]);
      strcpy(gBuffer1, &a1[1080 * Value + 53]);
      if (!*((_BYTE *)dword_10ACED34 + 4) && !*((_BYTE *)dword_10ACED34 + 5)) {
        memset((char *)dword_10ACED34 + 6, 0, 0x18u);
        memset((char *)dword_10ACED34 + 30, 0, 0x30u);
        memset((char *)dword_10ACED34 + 80, 0, 0x60u);
      }
      sub_100709A0();
      dword_10AA28E4 = 1;
    }
  }
  return 1;
}
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28E4: using guessed type int dword_10AA28E4;

//----- (10042020) --------------------------------------------------------
int __cdecl sub_10042020(int a1, int *a2) {
  int v2;             // edx
  int v3;             // ebx
  FILE *v5;           // eax
  char Buffer[4];     // [esp+4h] [ebp-108h] BYREF
  char FileName[260]; // [esp+8h] [ebp-104h] BYREF

  v2 = *a2;
  v3 = 0;
  if (*a2 < 0)
    return 0;
  dword_10AA29CC = a1;
  Value = v2;
  if (a1 + 1080 * v2 != -53) {
    strcpy(FileName, aRallyseason);
    _itoa(v2, Buffer, 10);
    strcat(FileName, Buffer);
    strcat(FileName, aBrf);
  }
  v5 = fopen(FileName, Mode);
  if (v5)
    fclose(v5);
  else
    v3 = 1;
  unknown_libname_9();
  if (v3)
    sub_10041A00(dword_10AA29C0);
  else
    *(_DWORD *)(*(_DWORD *)(dword_10AA29C0 + 10984) + 112) = 1;
  return 1;
}
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10042170) --------------------------------------------------------
int __cdecl sub_10042170(int a1, int *a2) {
  FILE *v2;            // eax
  int v4;              // esi
  int v5;              // ecx
  int v6;              // edx
  int *v7;             // edi
  int *v8;             // eax
  unsigned __int16 v9; // bp
  int v10;             // edx
  int v11;             // ecx
  int v12;             // eax
  int v13;             // ecx
  char Buffer[4];      // [esp+10h] [ebp-10Ch] BYREF
  int v15;             // [esp+14h] [ebp-108h]
  char FileName[260];  // [esp+18h] [ebp-104h] BYREF

  dword_10AA28E0 = 0;
  gGameMode = 0;
  sub_1003E680();
  dword_10690A18 = 0;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  strcpy(FileName, aRallyseason);
  _itoa(*a2, Buffer, 10);
  strcat(FileName, Buffer);
  strcat(FileName, aBrf);
  v2 = fopen(FileName, Mode);
  if (!v2)
    return 0;
  fclose(v2);
  strcpy(aCRallyseasonDatFilepath_ptr, FileName);
  if (!sub_10071130(4, (FILE *)1))
    sub_1003E260(7);
  qmemcpy(&dword_10AA26F0, dword_10ACED34, 0x14Cu);
  dword_10AA28E0 = 1;
  v15 = *(_DWORD *)dword_10ACED34;
  dword_10AA28A0 = v15;
  v4 = *((unsigned __int8 *)dword_10ACED34 + 5);
  dword_10AA28AC = v4;
  dword_10AA28A4 = v4;
  LOBYTE(dword_10AA28B8) = *((_BYTE *)dword_10ACED34 + 4);
  dword_10AA2A08 = dword_10AD0978;
  dword_100AC64C = dword_10AD097C;
  dword_100AC650 = dword_10AD0980;
  dword_100AC654 = dword_10AD0984;
  dword_100AC65C = dword_10AD0988;
  dword_10AA289C = 1;
  sub_1003E310();
  sub_1003E510();
  v5 = 0;
  v6 = 4;
  v7 = (int *)&word_10AA270E[4 * (char)dword_10AA28B8];
  v8 = v7;
  do {
    v9 = *(_WORD *)v8;
    v8 = (int *)((char *)v8 + 2);
    v5 += v9;
    --v6;
  } while (v6);
  v10 = *(int *)((char *)&dword_10AA26F4[(char)dword_10AA28B8] + 2);
  dword_10AA28C4 = v5;
  v11 = dword_10AA28A4;
  v12 = 0;
  for (dword_10AA26E8 = v10; v12 < v11; ++v12)
    ++*((_BYTE *)&dword_10AA26E8 + v12);
  v13 = v7[1];
  dword_10A9D068 = *v7;
  dword_10A9D06C = v13;
  sprintf(byte_10AA2518, "%d", v15 + 1);
  sprintf(byte_10A9D618, "%d", v4 + 1);
  return 1;
}
// 100AA010: using guessed type int g_GameMode;
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC65C: using guessed type int dword_100AC65C;
// 10690A18: using guessed type int dword_10690A18;
// 10A9D068: using guessed type int dword_10A9D068;
// 10A9D06C: using guessed type int dword_10A9D06C;
// 10AA26E8: using guessed type int dword_10AA26E8;
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA270E: using guessed type __int16 word_10AA270E[];
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28A0: using guessed type int dword_10AA28A0;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA28E0: using guessed type int dword_10AA28E0;
// 10AA2A08: using guessed type int dword_10AA2A08;
// 10AD0978: using guessed type int dword_10AD0978;
// 10AD097C: using guessed type int dword_10AD097C;
// 10AD0980: using guessed type int dword_10AD0980;
// 10AD0984: using guessed type int dword_10AD0984;
// 10AD0988: using guessed type int dword_10AD0988;

//----- (10042410) --------------------------------------------------------
int __cdecl sub_10042410(unk1E214 *a1) {
  int v1; // eax

  a1->field_2AE8->field_70 = 0;
  *(_DWORD *)(dword_10AA29D0 + 1080 * Value + 1100) =
      *(_DWORD *)(dword_10AA29D0 + 1080 * Value + 1100) == 0;
  v1 = dword_10AA29D0 + 1080 * Value;
  dword_10AA28D8 = *(_DWORD *)(v1 + 1100);
  if (dword_10AA28D8) {
    strcpy(byte_10A9D078, (const char *)(v1 + 53));
    strcpy((char *)(v1 + 53), String2);
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;
// 10AA29D0: using guessed type int dword_10AA29D0;

//----- (100424D0) --------------------------------------------------------
int __cdecl sub_100424D0(unk1E214 *a1) {
  a1->field_2AE8->field_70 = 0;
  dword_10AA28EC = 0;
  if (dword_10AA28D8 && byte_10A9D078) {
    strcpy((char *)(dword_10AA29D0 + 1080 * Value + 53), byte_10A9D078);
    strcpy(byte_10A9D078, String2);
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;
// 10AA28EC: using guessed type int dword_10AA28EC;
// 10AA29D0: using guessed type int dword_10AA29D0;

//----- (10042560) --------------------------------------------------------
int __cdecl sub_10042560(char *a1, int a2) {
  int v3;         // edx
  char Buffer[4]; // [esp+10h] [ebp-108h] BYREF
  char v5[260];   // [esp+14h] [ebp-104h] BYREF

  if (a2 == -1) {
    if (byte_10A9D078) {
      strcpy(&a1[1080 * Value + 53], byte_10A9D078);
      return 1;
    }
  } else {
    v3 = Value;
    if (&a1[1080 * Value] != (char *)0xFFFFFFCB) {
      strcpy(v5, aTimeattack);
      _itoa(v3, Buffer, 10);
      strcat(v5, Buffer);
      strcat(v5, aGrf);
      strcpy(aCRallyghostDatFilepath, v5);
      strcpy((char *)&gUnkC8Ptr6->last->field_4 + 0x104 * Value, &a1[1080 * Value + 0x35]);
      strcpy(gBuffer1, &a1[1080 * Value + 0x35]);
      sub_10070E80();
      dword_10AA28EC = 1;
    }
  }
  return 1;
}
// 10AA28EC: using guessed type int dword_10AA28EC;

//----- (10042740) --------------------------------------------------------
int __cdecl sub_10042740(int a1, int *a2) {
  int v2;             // edx
  int v3;             // ebx
  FILE *v4;           // eax
  char Buffer[4];     // [esp+10h] [ebp-108h] BYREF
  char FileName[260]; // [esp+14h] [ebp-104h] BYREF

  v2 = *a2;
  dword_10AA29D0 = a1;
  v3 = 0;
  Value = v2;
  if (a1 + 1080 * v2 != -53) {
    strcpy(FileName, aTimeattack);
    _itoa(v2, Buffer, 10);
    strcat(FileName, Buffer);
    strcat(FileName, aGrf);
  }
  v4 = fopen(FileName, Mode);
  if (v4)
    fclose(v4);
  else
    v3 = 1;
  if (v3)
    sub_10042410(dword_10AA29C4);
  else
    *(_DWORD *)(*(_DWORD *)(dword_10AA29C4 + 10984) + 112) = 1;
  return 1;
}
// 10AA29C4: using guessed type int dword_10AA29C4;
// 10AA29D0: using guessed type int dword_10AA29D0;

//----- (10042880) --------------------------------------------------------
int __cdecl sub_10042880(int a1, int *a2) {
  int v3;         // edx
  int v4;         // eax
  int v5;         // ecx
  char Buffer[4]; // [esp+10h] [ebp-108h] BYREF
  char v7[260];   // [esp+14h] [ebp-104h] BYREF

  gGameMode = 2;
  dword_10AA28E8 = 0;
  dword_10690A18 = 0;
  sub_1003E680();
  strcpy(v7, aTimeattack);
  _itoa(*a2, Buffer, 10);
  strcat(v7, Buffer);
  strcat(v7, aGrf);
  strcpy(aCRallyghostDatFilepath, v7);
  sub_10071130(1, (FILE *)1);
  if ((dword_10680738 & 0x80u) != 0)
    return 0;
  dword_100AC650 = dword_10AD0980;
  dword_100AC64C = dword_10AD097C;
  dword_100AC65C = dword_10AD0988;
  dword_100AC654 = dword_10AD0984;
  dword_100B4050 = 1;
  dword_100AC648 = (char)dword_10680738;
  dword_10AA2A00 = SHIBYTE(dword_1068073C);
  dword_10AA2A08 = dword_10AD0978;
  dword_100AC658 = dword_10AD098C;
  dword_100BD3E0 = dword_10AD098C;
  v3 = dword_100AC4D8[(char)dword_10680738];
  qmemcpy(&dword_10AA26F0, dword_10ACED34, 0x14Cu);
  dword_100BD3E0 = dword_10AD098C;
  gHandlingType = dword_10AD0988;
  v4 = dword_100AC4C0[SHIBYTE(dword_1068073C)];
  v5 = dword_100AC420[dword_10AD0984];
  dword_10AA28E8 = 1;
  gChosenCar = v5;
  gChosenTrack = v3;
  gChosenWeather0 = v4;
  gTireType = (void *)dword_100AC4A0[dword_10AD097C];
  gSuspensionType = dword_100AC4B0[dword_10AD0980];
  gTransmissionType = dword_100AC518[dword_10AD0978];
  sub_1005FCF0();
  dword_10AA289C = 1;
  return 1;
}
// 10094350: using guessed type int g_HandlingType;
// 10094354: using guessed type int g_TransmissionType;
// 10094358: using guessed type int g_SuspensionType;
// 100AA010: using guessed type int g_GameMode;
// 100AC518: using guessed type int dword_100AC518[];
// 100AC648: using guessed type int dword_100AC648;
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC658: using guessed type int dword_100AC658;
// 100AC65C: using guessed type int dword_100AC65C;
// 100B380C: using guessed type int g_chosenTrack;
// 100B4050: using guessed type int dword_100B4050;
// 1022B34C: using guessed type int g_chosenCar;
// 1022B350: using guessed type int g_ChosenWeather;
// 10680738: using guessed type int dword_10680738;
// 1068073C: using guessed type int dword_1068073C;
// 10690A18: using guessed type int dword_10690A18;
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA2A00: using guessed type int dword_10AA2A00;
// 10AA2A08: using guessed type int dword_10AA2A08;
// 10AD0978: using guessed type int dword_10AD0978;
// 10AD097C: using guessed type int dword_10AD097C;
// 10AD0980: using guessed type int dword_10AD0980;
// 10AD0984: using guessed type int dword_10AD0984;
// 10AD0988: using guessed type int dword_10AD0988;
// 10AD098C: using guessed type int dword_10AD098C;

//----- (10042A90) --------------------------------------------------------
int __cdecl sub_10042A90(int a1) {
  if (!dword_10AA28D8) {
    dword_10AA28D8 = 1;
    *(_DWORD *)(a1 + 12156) = *(_DWORD *)(a1 + 12156) == 0;
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (10042AC0) --------------------------------------------------------
int __cdecl sub_10042AC0(int a1) {
  if (!dword_10AA28D8) {
    dword_10AA28D8 = 1;
    *(_DWORD *)(a1 + 12156) = *(_DWORD *)(a1 + 12156) == 0;
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (10042AF0) --------------------------------------------------------
int __thiscall meth_unk1A5E0_3(unk06594 *this) {
  return 1;
}

//----- (10042B00) --------------------------------------------------------
int __cdecl sub_10042B00(int a1) {
  if (!dword_10AA28D8) {
    dword_10AA28D8 = 1;
    *(_DWORD *)(a1 + 12156) = *(_DWORD *)(a1 + 12156) == 0;
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (10042B30) --------------------------------------------------------
int sub_10042B30() {
  int v0;         // eax
  int v1;         // esi
  int v2;         // eax
  int v3;         // eax
  int v4;         // esi
  const char *v5; // eax
  LPCSTR v7;      // [esp-4h] [ebp-Ch]

  if (dword_10AA33D4) {
    v0 = ++dword_100AC654;
    if (dword_100AC654 > 31) {
      v0 = 0;
      dword_100AC654 = 0;
    }
    v1 = v0;
    if (!sub_1003F320(v0)) {
      do {
        v2 = ++dword_100AC654;
        if (dword_100AC654 > 31) {
          v2 = 0;
          dword_100AC654 = 0;
        }
        if (v2 == v1)
          goto LABEL_19;
      } while (!sub_1003F320(v2));
    }
  LABEL_18:
    v2 = dword_100AC654;
    goto LABEL_19;
  }
  if (!dword_10AA33D0[0])
    goto LABEL_18;
  v3 = --dword_100AC654;
  if (dword_100AC654 < 0) {
    v3 = 31;
    dword_100AC654 = 31;
  }
  v4 = v3;
  if (sub_1003F320(v3))
    goto LABEL_18;
  while (1) {
    v2 = --dword_100AC654;
    if (dword_100AC654 < 0) {
      v2 = 31;
      dword_100AC654 = 31;
    }
    if (v2 == v4)
      break;
    if (sub_1003F320(v2))
      goto LABEL_18;
  }
LABEL_19:
  gChosenCar = dword_100AC420[v2];
  if (unk) {
    if (v2 > 15)
      v2 -= 16;
    v7 = GetStringWithIndex(dword_100AC368[v2]);
    v5 = GetStringWithIndex(0xB7u);
    sprintf(byte_10A9DD28, v5, v7);
    sub_1003D210(gHwnd, dword_10A9D008, 1);
    strcpy(byte_10A9DD28, String2);
  }
  return 1;
}
// 10042B30: using guessed type int sub_10042B30();
// 100AC654: using guessed type int dword_100AC654;
// 1022B34C: using guessed type int g_chosenCar;
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (10042C80) --------------------------------------------------------
int sub_10042C80() {
  if (dword_10AA33D4) {
    if (++dword_100AC65C > 7) {
      dword_100AC65C = 0;
      gHandlingType = 0;
      return 1;
    }
  } else if (dword_10AA33D0) {
    if (--dword_100AC65C < 0)
      dword_100AC65C = 7;
  }
  gHandlingType = dword_100AC65C;
  return 1;
}
// 10042C80: using guessed type int sub_10042C80();
// 10094350: using guessed type int g_HandlingType;
// 100AC65C: using guessed type int dword_100AC65C;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (10042CF0) --------------------------------------------------------
int sub_10042CF0() {
  dword_100AB3D8 = 1;
  if (dword_10AA33D4) {
    if (++dword_10B4E708 > 9) {
      dword_10B4E708 = 0;
      sub_10060D90();
      return 1;
    }
  } else if (dword_10AA33D0) {
    if (--dword_10B4E708 < 0)
      dword_10B4E708 = 9;
  }
  sub_10060D90();
  return 1;
}
// 10060D90: using guessed type int sub_10060D90(void);
// 100AB3D8: using guessed type int dword_100AB3D8;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10B4E708: using guessed type int dword_10B4E708;

//----- (10042D60) --------------------------------------------------------
int sub_10042D60() {
  bool v0; // zf
  bool v1; // sf
  bool v2; // of

  dword_100AB3D8 = 0;
  if (dword_10AA33D4) {
    v2 = __OFSUB__(dword_10B4E70C + 1, 9);
    v0 = dword_10B4E70C == 8;
    v1 = dword_10B4E70C - 8 < 0;
    ++dword_10B4E70C;
    if (!(v1 ^ v2 | v0)) {
      dword_10B4E70C = 0;
      sub_10060D90();
      return 1;
    }
  } else if (dword_10AA33D0[0]) {
    if (--dword_10B4E70C < 0)
      dword_10B4E70C = 9;
  }
  sub_10060D90();
  return 1;
}
// 100AB3D8: using guessed type int dword_100AB3D8;
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10B4E70C: using guessed type int dword_10B4E70C;

//----- (10042DC0) --------------------------------------------------------
int sub_10042DC0() {
  int result; // eax

  if (dword_10AA33D4) {
    if (++dword_100AC64C > 2)
      dword_100AC64C = 0;
  } else if (dword_10AA33D0) {
    if (--dword_100AC64C < 0)
      dword_100AC64C = 2;
  }
  result = 1;
  gTireType = (void *)dword_100AC4A0[dword_100AC64C];
  return result;
}
// 10042DC0: using guessed type int sub_10042DC0();
// 100AC64C: using guessed type int dword_100AC64C;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (10042E20) --------------------------------------------------------
int sub_10042E20() {
  int result; // eax

  if (dword_10AA33D4) {
    if (++dword_100AC650 > 2)
      dword_100AC650 = 0;
  } else if (dword_10AA33D0) {
    if (--dword_100AC650 < 0)
      dword_100AC650 = 2;
  }
  result = 1;
  gSuspensionType = dword_100AC4B0[dword_100AC650];
  return result;
}
// 10042E20: using guessed type int sub_10042E20();
// 10094358: using guessed type int g_SuspensionType;
// 100AC650: using guessed type int dword_100AC650;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (10042E80) --------------------------------------------------------
int sub_10042E80() {
  int result; // eax

  if (dword_10AA33D4) {
    if (++dword_10AA2A08 > 1)
      dword_10AA2A08 = 0;
  } else if (dword_10AA33D0) {
    if (--dword_10AA2A08 < 0)
      dword_10AA2A08 = 1;
  }
  result = 1;
  gTransmissionType = dword_100AC518[dword_10AA2A08];
  return result;
}
// 10042E80: using guessed type int sub_10042E80();
// 10094354: using guessed type int g_TransmissionType;
// 100AC518: using guessed type int dword_100AC518[];
// 10AA2A08: using guessed type int dword_10AA2A08;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (10042EE0) --------------------------------------------------------
int sub_10042EE0() {
  int v0;         // eax
  int v1;         // esi
  int v2;         // eax
  int v3;         // eax
  int v4;         // esi
  int v5;         // eax
  const char *v6; // eax
  LPCSTR v8;      // [esp-4h] [ebp-Ch]

  if (dword_10AA33D4) {
    v0 = dword_100AC648 + 1;
    dword_100AC648 = v0;
    if (v0 > (dword_10AA28FC != 0 ? 14 : 11)) {
      v0 = 0;
      dword_100AC648 = 0;
    }
    v1 = v0;
    if (!sub_1003F2B0(v0)) {
      do {
        v2 = dword_100AC648 + 1;
        dword_100AC648 = v2;
        if (v2 <= (dword_10AA28FC != 0 ? 14 : 11)) {
          if (v2 == v1)
              goto LABEL_19;
        } else {
          v2 = 0;
          dword_100AC648 = 0;
        }
      } while (!sub_1003F2B0(v2));
    }
  } else if (dword_10AA33D0[0]) {
    v3 = --dword_100AC648;
    if (dword_100AC648 < 0) {
      v3 = dword_10AA28FC != 0 ? 14 : 11;
      dword_100AC648 = v3;
    }
    v4 = v3;
    if (!sub_1003F2B0(v3)) {
      do {
        v2 = --dword_100AC648;
        if (dword_100AC648 >= 0) {
          if (v2 == v4)
              goto LABEL_19;
        } else {
          v2 = dword_10AA28FC != 0 ? 14 : 11;
          dword_100AC648 = v2;
        }
      } while (!sub_1003F2B0(v2));
    }
  }
  v2 = dword_100AC648;
LABEL_19:
  v5 = dword_100AC4D8[v2];
  gChosenTrack = v5;
  if (unk) {
    v8 = GetStringWithIndex(dword_100AC308[v5]);
    v6 = GetStringWithIndex(0xB8u);
    sprintf(byte_10A9DD28, v6, v8);
    if ((gTrackData[gChosenTrack]->field_4 & 0x10) != 0)
      strcat(byte_10A9DD28, GetStringWithIndex(0xB0u));
    sub_1003D210(gHwnd, dword_10A9D008, 1);
    strcpy(byte_10A9DD28, String2);
  }
  return 1;
}
// 100AC648: using guessed type int dword_100AC648;
// 100B380C: using guessed type int gChosenTrack;
// 10AA28FC: using guessed type int dword_10AA28FC;
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (100430B0) --------------------------------------------------------
int sub_100430B0() {
  int v0;          // eax
  const char *v1;  // eax
  char Buffer[32]; // [esp+8h] [ebp-20h] BYREF

  if (dword_10AA33D4) {
    v0 = ++dword_100BD3E0;
    if (dword_100BD3E0 <= 12)
      goto LABEL_8;
    v0 = 1;
    goto LABEL_7;
  }
  v0 = dword_100BD3E0;
  if (dword_10AA33D0[0]) {
    v0 = dword_100BD3E0 - 1;
    dword_100BD3E0 = v0;
    if (v0 < 1) {
      v0 = 12;
    LABEL_7:
      dword_100BD3E0 = v0;
      goto LABEL_8;
    }
  }
LABEL_8:
  dword_100AC658 = v0;
  if (unk) {
    _itoa(v0, Buffer, 10);
    v1 = GetStringWithIndex(0xB9u);
    sprintf(byte_10A9DD28, v1, Buffer);
    sub_1003D210(gHwnd, dword_10A9D008, 1);
    strcpy(byte_10A9DD28, String2);
  }
  return 1;
}
// 100AC658: using guessed type int dword_100AC658;
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (10043180) --------------------------------------------------------
int sub_10043180() {
  int v0;         // eax
  const char *v1; // eax
  LPCSTR v3;      // [esp-4h] [ebp-Ch]

  if (dword_10AA33D4) {
    if (++dword_10AA2A00 > 4)
      dword_10AA2A00 = 0;
  } else if (dword_10AA33D0[0]) {
    if (--dword_10AA2A00 < 0)
      dword_10AA2A00 = 4;
  }
  v0 = dword_100AC4C0[dword_10AA2A00];
  gChosenWeather0 = v0;
  if (unk) {
    v3 = GetStringWithIndex(dword_100AC3B0[v0]);
    v1 = GetStringWithIndex(0xBAu);
    sprintf(byte_10A9DD28, v1, v3);
    sub_1003D210(gHwnd, dword_10A9D008, 1);
    strcpy(byte_10A9DD28, String2);
  }
  return 1;
}
// 1022B350: using guessed type int g_ChosenWeather;
// 10AA2A00: using guessed type int dword_10AA2A00;
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (10043260) --------------------------------------------------------
int __stdcall sub_10043260() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr7) {
    gUnkC8Ptr1 = gUnkC8Ptr7;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr7 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_10051990;
      gUnkC8Ptr7->lpFn0(gUnkC8Ptr7);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return (int)result;
}

//----- (10043330) --------------------------------------------------------
unk000C8 *sub_10043330() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr8) {
    gUnkC8Ptr1 = gUnkC8Ptr8;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr8 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_10051D30;
      gUnkC8Ptr8->lpFn0(gUnkC8Ptr8);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}

//----- (10043400) --------------------------------------------------------
int sub_10043400() {
  int v0;     // eax
  int result; // eax

  if (dword_10AA33D4) {
    v0 = ++dword_10AA2A0C;
    if (dword_10AA2A0C >= 4) {
      v0 = 0;
      dword_10AA2A0C = 0;
    }
    if (v0 == 1) {
      v0 = 2;
    LABEL_11:
      dword_10AA2A0C = v0;
      goto LABEL_12;
    }
  } else {
    v0 = dword_10AA2A0C;
    if (dword_10AA33D0) {
      v0 = dword_10AA2A0C - 1;
      dword_10AA2A0C = v0;
      if (v0 < 0) {
        v0 = 3;
        dword_10AA2A0C = 3;
      }
      if (v0 == 1) {
        v0 = 0;
        goto LABEL_11;
      }
    }
  }
LABEL_12:
  dword_10B4E728 = v0;
  gConfigJoystickIndex = dword_100AC520[v0];
  if (gConfigJoystickIndex == 1) {
    gConfigJoystickPtr = (int)&MEMORY[0x10B4DFD8];
    result = 1;
  } else if (gConfigJoystickIndex == 2) {
    gConfigJoystickPtr = (int)&MEMORY[0x10B4E080];
    result = 1;
  } else {
    if (gConfigJoystickIndex == 3)
      gConfigJoystickPtr = (int)&MEMORY[0x10B4E128];
    else
      gConfigJoystickPtr = (int)&gConfig;
    result = 1;
  }
  return result;
}
// 10AA2A0C: using guessed type int dword_10AA2A0C;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10B4E1D0: using guessed type int g_ReadJoystick;
// 10B4E1D4: using guessed type int dword_10B4E1D4;
// 10B4E728: using guessed type int dword_10B4E728;

//----- (100434C0) --------------------------------------------------------
unk000C8 *sub_100434C0() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr9) {
    gUnkC8Ptr1 = gUnkC8Ptr9;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr9 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_1004CAC0;
      gUnkC8Ptr9->lpFn0(gUnkC8Ptr9);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}

//----- (10043590) --------------------------------------------------------
int sub_10043590() {
  int result; // eax

  if (dword_10AA33D4) {
    if (++dword_10AA2A1C > 1)
      dword_10AA2A1C = 0;
  } else if (dword_10AA33D0) {
    if (--dword_10AA2A1C < 0)
      dword_10AA2A1C = 1;
  }
  result = 1;
  dword_10B4E1E0 = dword_100AC530[dword_10AA2A1C];
  return result;
}
// 100AC530: using guessed type int dword_100AC530[];
// 10AA2A1C: using guessed type int dword_10AA2A1C;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10B4E1E0: using guessed type int dword_10B4E1E0;

//----- (100435F0) --------------------------------------------------------
int sub_100435F0() {
  int result; // eax

  if (dword_10AA33D4) {
    if (++dword_10AA2A28 > 1)
      dword_10AA2A28 = 0;
  } else if (dword_10AA33D0) {
    if (--dword_10AA2A28 < 0)
      dword_10AA2A28 = 1;
  }
  result = 1;
  dword_10B4E7A0 = dword_100AC548[dword_10AA2A28];
  return result;
}
// 100AC548: using guessed type int dword_100AC548[];
// 10AA2A28: using guessed type int dword_10AA2A28;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10B4E7A0: using guessed type int dword_10B4E7A0;

//----- (10043650) --------------------------------------------------------
int sub_10043650() {
  int result; // eax

  if (dword_10AA33D4) {
    if (++dword_10AA2A20 > 1)
      dword_10AA2A20 = 0;
  } else if (dword_10AA33D0) {
    if (--dword_10AA2A20 < 0)
      dword_10AA2A20 = 1;
  }
  result = 1;
  dword_10B4E1D8 = dword_100AC538[dword_10AA2A20];
  return result;
}
// 100AC538: using guessed type int dword_100AC538[];
// 10AA2A20: using guessed type int dword_10AA2A20;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10B4E1D8: using guessed type int dword_10B4E1D8;

//----- (100436B0) --------------------------------------------------------
int sub_100436B0() {
  int result; // eax

  if (dword_10AA33D4) {
    if (++dword_10AA2A24 > 1)
      dword_10AA2A24 = 0;
  } else if (dword_10AA33D0) {
    if (--dword_10AA2A24 < 0)
      dword_10AA2A24 = 1;
  }
  result = 1;
  dword_10B4E1DC = dword_100AC540[dword_10AA2A24];
  return result;
}
// 100AC540: using guessed type int dword_100AC540[];
// 10AA2A24: using guessed type int dword_10AA2A24;
// 10AA33D0: using guessed type int dword_10AA33D0;
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10B4E1DC: using guessed type int dword_10B4E1DC;

//----- (10043710) --------------------------------------------------------
void __cdecl __noreturn sub_10043710(int a1) {
  sub_1003E220();
  sub_1003E310();
  meth_BossRallyConfig_WriteConfigFile((#483 *)gConfig, gBossRallyCfgPath);
  (*(void(__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(a1 + 10984) + 24))(*(_DWORD *)(a1 + 10984),
                                                                           0);
  sub_1000C510((HANDLE *)dword_10A9D008);
  cleanUpAndExitWithCode(0);
}

//----- (10043760) --------------------------------------------------------
int __cdecl sub_10043760(int a1) {
  *(_DWORD *)(*(_DWORD *)(a1 + 10984) + 104) = 0;
  (*(void(__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(a1 + 10984) + 24))(*(_DWORD *)(a1 + 10984),
                                                                           0);
  if (!gGameMode)
    dword_100BD3E0 = 3;
  sub_1003E310();
  meth_BossRallyConfig_WriteConfigFile((#483 *)&gConfig, gBossRallyCfgPath);
  sub_10041B50();
  return 0;
}
// 10043760: using guessed type int __cdecl sub_10043760(int);
// 100AA010: using guessed type int g_GameMode;

//----- (100437B0) --------------------------------------------------------
int sub_100437B0() {
  if (*(_DWORD *)(dword_10A9D008 + 8) != dword_100AB3E0)
    sub_1003DA40((int *)dword_10A9D008, dword_100AB3E0);
  return 1;
}
// 100437B0: using guessed type int sub_100437B0();
// 100AB3E0: using guessed type int dword_100AB3E0;

//----- (100437D0) --------------------------------------------------------
int __cdecl sub_100437D0(int a1) {
  if (dword_10AA2894 && dword_10A9D000) {
    *(_DWORD *)(*(_DWORD *)(a1 + 10984) + 104) = 0;
    (*(void(__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(a1 + 10984) + 24))(
        *(_DWORD *)(a1 + 10984), 0);
    cleanUpAndExitWithCode(0);
  }
  return 1;
}
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA2894: using guessed type int dword_10AA2894;

//----- (10043810) --------------------------------------------------------
int __cdecl sub_10043810(LPCVOID pMem) {
  _DWORD **v1; // edi
  void *v2;    // ecx
  int result;  // eax
  _DWORD *v4;  // esi
  int v5;      // ecx
  int *v6;     // eax
  HGLOBAL v7;  // eax
  HGLOBAL v8;  // eax
  int v9;      // eax

  v1 = (_DWORD **)pMem;
  if (dword_10AA2894) {
    if (dword_10A9D000) {
      *(_DWORD *)(*((_DWORD *)pMem + 2746) + 104) = 0;
      (*(void(__thiscall **)(_DWORD *, _DWORD))(*v1[2746] + 24))(v1[2746], 0);
      cleanUpAndExitWithCode(0);
    }
    sub_10046400((int)pMem);
    if (gUnkC8Ptr26) {
      (*(void(__thiscall **)(int))(*(_DWORD *)gUnkC8Ptr26 + 28))(gUnkC8Ptr26);
      gUnkC8Ptr26 = 0;
    }
    gUnkC8Ptr1 = (void *)gUnkC8Ptr10;
    sub_1003BF60();
    v9 = dword_10AA287C;
    dword_10AA2898 = 1;
    if (!dword_10AA287C || dword_10AA287C == 1) {
      np_sub_1003C020();
      v9 = dword_10AA287C;
    }
    if (v9 == 2 || v9 == 3) {
      if (dword_10AA29D8)
        *(_DWORD *)(dword_10AA29D8 + 28) &= 0xFFFFFFEF;
    }
    dword_10AA2894 = 0;
    result = 0;
  } else if (dword_10AA2890) {
    sub_10046400((int)pMem);
    if (gUnkC8Ptr26) {
      (*(void(__thiscall **)(int))(*(_DWORD *)gUnkC8Ptr26 + 28))(gUnkC8Ptr26);
      gUnkC8Ptr26 = 0;
    }
    sub_100440D0();
    sub_100443E0();
    meth_unk000C8_100446D0(v2);
    dword_10AA2890 = 0;
    result = 0;
  } else {
    if (dword_10AA2884) {
      v4 = 0;
      pMem = 0;
      if (unk) {
        sub_1003D0B0(unk, (LPDWORD)&pMem);
        v4 = pMem;
      }
      if (v4) {
        v5 = 0;
        v6 = dword_10AA2538;
        while (*v6 != *(_DWORD *)(dword_10A9D008 + 8)) {
          v6 += 3;
          ++v5;
          if ((int)v6 >= (int)&dword_10AA2598)
              goto LABEL_17;
        }
        dword_10AA253C[3 * v5] = v4[11] > 1u;
      LABEL_17:
        v7 = GlobalHandle(v4);
        GlobalUnlock(v7);
        v8 = GlobalHandle(pMem);
        GlobalFree(v8);
      }
    }
    if (dword_10AA288C) {
      sub_1003E310();
      meth_BossRallyConfig_WriteConfigFile((#483 *)gConfig, gBossRallyCfgPath);
      v1[2746][26] = 0;
      (*(void(__thiscall **)(_DWORD *, _DWORD))(*v1[2746] + 24))(v1[2746], 0);
      dword_10AA285C = 0;
      sub_10072AF0(2, 0x200020u);
      dword_10AA2854 = 2;
      result = 0;
    } else {
      result = 1;
    }
  }
  return result;
}
// 10043905: conditional instruction was optimized away because of 'esi.4!=0'
// 10043885: variable 'v2' is possibly undefined
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA2538: using guessed type int dword_10AA2538[];
// 10AA253C: using guessed type int dword_10AA253C[];
// 10AA2598: using guessed type int dword_10AA2598;
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA285C: using guessed type int dword_10AA285C;
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA288C: using guessed type int dword_10AA288C;
// 10AA2890: using guessed type int dword_10AA2890;
// 10AA2894: using guessed type int dword_10AA2894;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA2948: using guessed type int dword_10AA2948;
// 10AA2950: using guessed type int dword_10AA2950;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (10043A00) --------------------------------------------------------
int sub_10043A00() {
  const char *v0; // edi
  int v1;         // eax
  HGLOBAL v2;     // eax
  HGLOBAL v3;     // eax
  int v5;         // ecx
  int *v6;        // eax
  const char *v7; // edi
  HWND v8;        // edx
  int v9;         // eax
  HGLOBAL v10;    // eax
  HGLOBAL v11;    // eax
  LPCVOID v12;    // [esp-Ch] [ebp-10h]
  LPCVOID pMem;   // [esp+0h] [ebp-4h] BYREF

  pMem = 0;
  sub_1003D0B0(unk, (LPDWORD)&pMem);
  if (pMem) {
    if (*((_DWORD *)pMem + 11) <= 1u) {
      v0 = GetStringWithIndex(0xBBu);
      v1 = dword_10A9D008;
      strcpy(byte_10A9DD28, v0);
      sub_1003D210(gHwnd, v1, 1);
      v12 = pMem;
      strcpy(byte_10A9DD28, String2);
      v2 = GlobalHandle(v12);
      GlobalUnlock(v2);
      v3 = GlobalHandle(pMem);
      GlobalFree(v3);
      return 1;
    }
    if (dword_10AA2884) {
      v5 = 1;
      v6 = dword_10AA2538;
      while (*(_QWORD *)v6 >= 0xFFFFFFFFui64) {
        v6 += 3;
        if ((int)v6 >= (int)&dword_10AA2598)
          goto LABEL_10;
      }
      v5 = 0;
    LABEL_10:
      if (v5) {
        sub_1003D9F0((int *)dword_10A9D008);
        dword_10AA288C = 1;
        *((_DWORD *)pMem + 1) |= 0x20u;
        (*(void(__stdcall **)(SIZE_T, LPCVOID, _DWORD))(*(_DWORD *)unk + 124))(unk, pMem, 0);
      } else {
        v7 = GetStringWithIndex(0xBCu);
        v8 = gHwnd;
        strcpy(byte_10A9DD28, v7);
        sub_1003D210(v8, dword_10A9D008, 1);
        strcpy(byte_10A9DD28, String2);
      }
    } else {
      v9 = sub_10058700();
      sub_1003D950((int *)dword_10A9D008, v9);
    }
    v10 = GlobalHandle(pMem);
    GlobalUnlock(v10);
    v11 = GlobalHandle(pMem);
    GlobalFree(v11);
  }
  return 1;
}
// 10AA2538: using guessed type int dword_10AA2538[];
// 10AA2598: using guessed type int dword_10AA2598;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA288C: using guessed type int dword_10AA288C;

//----- (10043BF0) --------------------------------------------------------
int __stdcall sub_10043BF0() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  sub_100419D0(asc_100AD300);
  sub_1003E510();
  if (gUnkC8Ptr28) {
    gUnkC8Ptr1 = (unk000C8 *)gUnkC8Ptr28;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr28 = (int)result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_100563E0;
      (*(void(__cdecl **)(int))(gUnkC8Ptr28 + 4))(gUnkC8Ptr28);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return (int)result;
}
// 10AA2958: using guessed type int dword_10AA2958;

//----- (10043CD0) --------------------------------------------------------
int __stdcall sub_10043CD0() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr11) {
    gUnkC8Ptr1 = gUnkC8Ptr11;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr11 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_100558A0;
      gUnkC8Ptr11->lpFn0(gUnkC8Ptr11);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return (int)result;
}

//----- (10043DA0) --------------------------------------------------------
int sub_10043DA0() {
  unk000C8 *v0; // eax
  int result;   // eax

  if (gUnkC8Ptr29) {
    gUnkC8Ptr1 = (unk000C8 *)gUnkC8Ptr29;
    result = 1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr29 = result;
    gUnkC8Ptr1 = (unk000C8 *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_10056A10;
      (*(void(__cdecl **)(int))(gUnkC8Ptr29 + 4))(gUnkC8Ptr29);
      gUnkC8Ptr1->field_C = 1;
      result = 1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}
// 10056A10: using guessed type int __cdecl sub_10056A10(int);
// 10AA298C: using guessed type int dword_10AA298C;

//----- (10043E70) --------------------------------------------------------
unk000C8 *sub_10043E70() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr10) {
    gUnkC8Ptr1 = gUnkC8Ptr10;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr10 = result;
    gUnkC8Ptr1 = result;
    if (!result)
      return result;
    result->lpFn0 = s_unk000C8_10056FF0;
    gUnkC8Ptr10->lpFn0(gUnkC8Ptr10);
    gUnkC8Ptr1->field_C = 1;
    gUnkC8Ptr1->field_68 = 1;
  }
  if (!dword_10A9CFFC && !dword_10A9D000 && (!dword_10AA287C || dword_10AA287C == 1))
    np_sub_1003C020();
  return (unk000C8 *)1;
}
// 10A9CFFC: using guessed type int dword_10A9CFFC;
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA287C: using guessed type int dword_10AA287C;

//----- (10043F50) --------------------------------------------------------
int __cdecl sub_10043F50(int a1) {
  dword_10AA287C = 2;
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    (**(void(__thiscall ***)(void *, int))gUnkC8Ptr1)(gUnkC8Ptr1, 1);
  gUnkC8Ptr29 = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr10;
  return 0;
}
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2948: using guessed type int dword_10AA2948;
// 10AA298C: using guessed type int dword_10AA298C;

//----- (10043FA0) --------------------------------------------------------
int __cdecl sub_10043FA0(int a1) {
  (*(void(__thiscall **)(_DWORD, int))(**(_DWORD **)(a1 + 10984) + 24))(*(_DWORD *)(a1 + 10984), 1);
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}
// 10043FA0: using guessed type int __cdecl sub_10043FA0(int);

//----- (10043FC0) --------------------------------------------------------
int __cdecl sub_10043FC0(int a1) {
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr28 = 0;
  dword_10AA29A8 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}
// 10AA2958: using guessed type int dword_10AA2958;
// 10AA29A8: using guessed type int dword_10AA29A8;

//----- (10044010) --------------------------------------------------------
int __cdecl sub_10044010() {
  dword_10AA287C = 0;
  sub_10043E70();
  return 1;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (10044030) --------------------------------------------------------
int __cdecl sub_10044030(int a1) {
  dword_10AA287C = 0;
  sub_10047360(a1);
  return 1;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (10044050) --------------------------------------------------------
int __cdecl sub_10044050() {
  dword_10AA287C = 1;
  sub_10043E70();
  return 1;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (10044070) --------------------------------------------------------
int __cdecl sub_10044070(int a1) {
  dword_10AA287C = 1;
  sub_10047360(a1);
  return 1;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (10044090) --------------------------------------------------------
int __cdecl sub_10044090() {
  dword_10AA287C = 2;
  sub_10043E70();
  return 1;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (100440B0) --------------------------------------------------------
int __cdecl sub_100440B0(int a1) {
  dword_10AA287C = 2;
  sub_10047360(a1);
  return 1;
}
// 10AA287C: using guessed type int dword_10AA287C;

//----- (100440D0) --------------------------------------------------------
int sub_100440D0() {
  _DWORD *v0; // eax
  int result; // eax

  if (gUnkC8Ptr25) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr25;
    result = 1;
  } else {
    v0 = (_DWORD *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr25 = result;
    gUnkC8Ptr1 = (void *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_100575F0;
      (*(void(__cdecl **)(int))(gUnkC8Ptr25 + 4))(gUnkC8Ptr25);
      *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
      result = 1;
      *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
    }
  }
  return result;
}
// 100575F0: using guessed type int __cdecl sub_100575F0(int);
// 10AA294C: using guessed type int dword_10AA294C;

//----- (100441A0) --------------------------------------------------------
int __thiscall meth_100441A0(void *this) {
  int v1;     // eax
  int result; // eax
  int v3;     // [esp+0h] [ebp-4h] BYREF

  v3 = (int)this;
  dword_10AA287C = 1;
  sub_100586A0();
  if (dword_10AA2884) {
    v1 = 0;
    v3 = 0;
    if (unk) {
      sub_1003D0B0(unk, (LPDWORD)&v3);
      v1 = v3;
    }
    if (v1) {
      *(_DWORD *)(v1 + 4) &= 0xFFFFFFDF;
      (*(void(__stdcall **)(SIZE_T, int, _DWORD))(*(_DWORD *)unk + 124))(unk, v3, 0);
    }
  }
  sub_10043BF0();
  sub_10043CD0();
  sub_10043E70();
  if (dword_10AA2884) {
    sub_100440D0();
    sub_100443E0();
  } else {
    sub_1003CE80();
    sub_10044280();
  }
  result = dword_10AA2884;
  if (dword_10AA2884) {
    if (dword_10AA2888) {
      if (dword_10AA2884)
        result = sub_1003CDA0();
    } else {
      result = sub_1003C150();
      dword_10AA2888 = 1;
    }
  }
  return result;
}
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA2888: using guessed type int dword_10AA2888;

//----- (10044280) --------------------------------------------------------
int sub_10044280() {
  _DWORD *v0; // eax
  int result; // eax

  dword_10AA2884 = 0;
  dword_10AA2898 = 0;
  if (!dword_10AA2878) {
    if (dword_10AA287C == 2 || dword_10AA287C == 3) {
      dword_10AA2898 = 1;
      if (dword_10AA287C == 2 && strlen(String1) < 7)
        return 1;
      if (!dword_10AA29D8 || !*(_WORD *)(dword_10AA29D4 + 123236)) {
        sub_1003C1E0();
        return 1;
      }
      if (!sub_1003C260())
        return 1;
    } else if (!sub_1003C260()) {
      return 1;
    }
  }
  if (gUnkC8Ptr26) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr26;
    goto LABEL_20;
  }
  v0 = (_DWORD *)operator new(0xC8u);
  if (v0)
    result = (int)meth_unk000C8_10048710(v0);
  else
    result = 0;
  gUnkC8Ptr26 = result;
  gUnkC8Ptr1 = (void *)result;
  if (result) {
    *(_DWORD *)(result + 4) = s_unk000C8_10057C10;
    (*(void(__cdecl **)(int))(gUnkC8Ptr26 + 4))(gUnkC8Ptr26);
    *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
    *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
  LABEL_20:
    *(_DWORD *)(dword_10AA29B8 + 8) = sub_10044970;
    return 1;
  }
  return result;
}
// 10044970: using guessed type int __cdecl sub_10044970(int);
// 10057C10: using guessed type int __cdecl sub_10057C10(int);
// 10AA2878: using guessed type int dword_10AA2878;
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA2950: using guessed type int dword_10AA2950;
// 10AA29B8: using guessed type int dword_10AA29B8;
// 10AA29D4: using guessed type int dword_10AA29D4;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (100443E0) --------------------------------------------------------
int sub_100443E0() {
  _DWORD *v0; // eax
  int result; // eax

  dword_10AA2884 = 1;
  gNetworkPlay = 2;
  dword_10AA2898 = 0;
  if (gUnkC8Ptr26) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr26;
    goto LABEL_8;
  }
  v0 = (_DWORD *)operator new(0xC8u);
  if (v0)
    result = (int)meth_unk000C8_10048710(v0);
  else
    result = 0;
  gUnkC8Ptr26 = result;
  gUnkC8Ptr1 = (void *)result;
  if (result) {
    *(_DWORD *)(result + 4) = s_unk000C8_10057C10;
    (*(void(__cdecl **)(int))(gUnkC8Ptr26 + 4))(gUnkC8Ptr26);
    *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
    *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
  LABEL_8:
    result = 1;
    *(_DWORD *)(dword_10AA29B8 + 8) = sub_10044A30;
  }
  return result;
}
// 10044A30: using guessed type int __cdecl sub_10044A30(int);
// 10057C10: using guessed type int __cdecl sub_10057C10(int);
// 1022AF18: using guessed type int g_NetworkPlay;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA2950: using guessed type int dword_10AA2950;
// 10AA29B8: using guessed type int dword_10AA29B8;

//----- (100444C0) --------------------------------------------------------
int __cdecl sub_100444C0(int a1) {
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    (**(void(__thiscall ***)(void *, int))gUnkC8Ptr1)(gUnkC8Ptr1, 1);
  gUnkC8Ptr25 = 0;
  dword_10AA29B8 = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr10;
  if (dword_10AA29D8)
    *(_DWORD *)(dword_10AA29D8 + 28) &= 0xFFFFFFEF;
  if ((!dword_10AA287C || dword_10AA287C == 1) && !dword_10A9D000) {
    sub_1003BF60();
    dword_10AA2898 = 1;
    np_sub_1003C020();
  }
  return 0;
}
// 1003BF60: using guessed type int sub_1003BF60(void);
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA2948: using guessed type int dword_10AA2948;
// 10AA294C: using guessed type int dword_10AA294C;
// 10AA29B8: using guessed type int dword_10AA29B8;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (10044540) --------------------------------------------------------
int sub_10044540() {
  int result; // eax

  result = dword_10AA2A18;
  if (dword_10AA2A44 != dword_10AA2A18) {
    dword_10AA2A44 = dword_10AA2A18;
    switch (dword_10AA2A18) {
    case 0:
      dword_100AB3E8 = 258;
      dword_100AC654 = 1;
      break;
    case 1:
      dword_100AB3E8 = 129;
      dword_100AC654 = 0;
      break;
    case 2:
      dword_100AB3E8 = 16464;
      dword_100AC654 = 6;
      break;
    case 3:
      dword_100AB3E8 = 8236;
      dword_100AC654 = 3;
      break;
    case 4:
      dword_100AB3E8 = 7680;
      dword_100AC654 = 11;
      break;
    default:
      dword_100AC654 = 1;
      dword_100AB3E8 = 258;
      break;
    }
  }
  return result;
}
// 100AB3E8: using guessed type int dword_100AB3E8;
// 100AC654: using guessed type int dword_100AC654;
// 10AA2A18: using guessed type int dword_10AA2A18;
// 10AA2A44: using guessed type int dword_10AA2A44;

//----- (10044600) --------------------------------------------------------
int sub_10044600() {
  const char *v0; // eax
  LPCSTR v2;      // [esp-4h] [ebp-Ch]

  if (dword_10AA33D4) {
    if (++dword_10AA2A18 >= 5)
      dword_10AA2A18 = 0;
  } else {
    if (!dword_10AA33D0[0])
      goto LABEL_8;
    if (--dword_10AA2A18 < 0)
      dword_10AA2A18 = 4;
  }
  sub_10044540();
LABEL_8:
  if (unk) {
    v2 = GetStringWithIndex(dword_100AC3C8[dword_10AA2A18]);
    v0 = GetStringWithIndex(0xBDu);
    sprintf(byte_10A9DD28, v0, v2);
    sub_1003D210(gHwnd, dword_10A9D008, 1);
    strcpy(byte_10A9DD28, String2);
  }
  return 1;
}
// 10AA2A18: using guessed type int dword_10AA2A18;
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33D4: using guessed type int dword_10AA33D4;

//----- (100446D0) --------------------------------------------------------
unk000C8 *__thiscall meth_unk000C8_100446D0(unk000C8 *this) {
  unk000C8 *v1;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr27) {
    gUnkC8Ptr1 = gUnkC8Ptr27;
  LABEL_8:
    gGameMode = GAME_MODE_6;
    if (dword_10AA2884) {
      if (!dword_10AA2888) {
        if (dword_10AA287C == 2 || dword_10AA287C == 3)
          sub_1003C230();
        sub_1003C150();
        dword_10AA2888 = 1;
        goto LABEL_15;
      }
      if (dword_10AA2884) {
      LABEL_15:
        sub_1003CDA0();
        return (unk000C8 *)1;
      }
    }
    return (unk000C8 *)1;
  }
  v1 = (unk000C8 *)operator new(0xC8u);
  if (v1)
    result = meth_unk000C8_10048710(v1);
  else
    result = 0;
  gUnkC8Ptr27 = result;
  gUnkC8Ptr1 = result;
  if (result) {
    result->lpFn0 = s_unk000C8_10058750;
    gUnkC8Ptr27->lpFn0(gUnkC8Ptr27);
    gUnkC8Ptr1->field_C = 1;
    gUnkC8Ptr1->field_68 = 1;
    goto LABEL_8;
  }
  return result;
}
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA2888: using guessed type int dword_10AA2888;

//----- (100447D0) --------------------------------------------------------
int sub_100447D0() {
  int v0;     // eax
  _DWORD *v1; // eax
  int result; // eax
  int v3[2];  // [esp+8h] [ebp-14h] BYREF
  int v4;     // [esp+18h] [ebp-4h]

  dword_10A9CFFC = 1;
  sub_100586A0();
  if (dword_10AA2884) {
    v0 = 0;
    v3[0] = 0;
    if (unk) {
      sub_1003D0B0(unk, (LPDWORD)v3);
      v0 = v3[0];
    }
    if (v0) {
      *(_DWORD *)(v0 + 4) &= 0xFFFFFFDF;
      (*(void(__stdcall **)(SIZE_T, int, _DWORD))(*(_DWORD *)unk + 124))(unk, v3[0], 0);
    }
  }
  sub_10043BF0();
  sub_10043CD0();
  sub_10043E70();
  if (dword_10AA2884) {
    sub_100440D0();
    sub_100443E0();
  } else {
    sub_10044280();
  }
  if (gUnkC8Ptr27) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr27;
  } else {
    v1 = (_DWORD *)operator new(0xC8u);
    v3[1] = (int)v1;
    v4 = 0;
    if (v1)
      result = (int)meth_unk000C8_10048710(v1);
    else
      result = 0;
    v4 = -1;
    gUnkC8Ptr27 = result;
    gUnkC8Ptr1 = (void *)result;
    if (!result)
      return result;
    *(_DWORD *)(result + 4) = s_unk000C8_10058750;
    (*(void(__cdecl **)(int))(gUnkC8Ptr27 + 4))(gUnkC8Ptr27);
    *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
    *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
  }
  gGameMode = 6;
  if (dword_10AA2884) {
    if (dword_10AA2888) {
      if (dword_10AA2884)
        sub_1003CDA0();
    } else {
      sub_1003C150();
      dword_10AA2888 = 1;
    }
  }
  if (dword_10A9D008) {
    if (*(_DWORD *)(dword_10A9D008 + 8))
      sub_1003DB00((int *)dword_10A9D008, *(_DWORD *)(dword_10A9D008 + 8));
  }
  return 1;
}
// 10058750: using guessed type int __cdecl sub_10058750(int);
// 100AA010: using guessed type int g_GameMode;
// 10A9CFFC: using guessed type int dword_10A9CFFC;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA2888: using guessed type int dword_10AA2888;
// 10AA2954: using guessed type int dword_10AA2954;

//----- (10044970) --------------------------------------------------------
int __cdecl sub_10044970(int a1) {
  int v1; // eax

  if (dword_10A9D000) {
    (*(void(__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(a1 + 10984) + 24))(
        *(_DWORD *)(a1 + 10984), 0);
    cleanUpAndExitWithCode(0);
  }
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    (**(void(__thiscall ***)(void *, int))gUnkC8Ptr1)(gUnkC8Ptr1, 1);
  gUnkC8Ptr26 = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr10;
  if (dword_10AA29D8)
    *(_DWORD *)(dword_10AA29D8 + 28) &= 0xFFFFFFEF;
  sub_1003BF60();
  v1 = dword_10AA287C;
  dword_10AA2898 = 1;
  if ((!dword_10AA287C || dword_10AA287C == 1) && !dword_10A9D000) {
    np_sub_1003C020();
    v1 = dword_10AA287C;
  }
  if (v1 == 2 || v1 == 3) {
    if (dword_10AA29D8)
      *(_DWORD *)(dword_10AA29D8 + 28) &= 0xFFFFFFEF;
  }
  return 0;
}
// 1003BF60: using guessed type int sub_1003BF60(void);
// 10044970: using guessed type int __cdecl sub_10044970(int);
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA2948: using guessed type int dword_10AA2948;
// 10AA2950: using guessed type int dword_10AA2950;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (10044A30) --------------------------------------------------------
int __cdecl sub_10044A30(int a1) {
  int v1; // eax

  if (dword_10A9D000) {
    (*(void(__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(a1 + 10984) + 24))(
        *(_DWORD *)(a1 + 10984), 0);
    cleanUpAndExitWithCode(0);
  }
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    (**(void(__thiscall ***)(void *, int))gUnkC8Ptr1)(gUnkC8Ptr1, 1);
  gUnkC8Ptr26 = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr25;
  sub_1003BF60();
  v1 = dword_10AA287C;
  if ((!dword_10AA287C || dword_10AA287C == 1) && !dword_10A9D000) {
    np_sub_1003C020();
    v1 = dword_10AA287C;
  }
  if (v1 == 2 || v1 == 3) {
    if (dword_10AA29D8) {
      *(_DWORD *)(dword_10AA29D8 + 28) &= 0xFFFFFFEF;
      *(_BYTE *)(dword_10AA29D8 + 11108) = 0;
    }
  }
  return 0;
}
// 1003BF60: using guessed type int sub_1003BF60(void);
// 10044A30: using guessed type int __cdecl sub_10044A30(int);
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA294C: using guessed type int dword_10AA294C;
// 10AA2950: using guessed type int dword_10AA2950;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (10044AE0) --------------------------------------------------------
int __cdecl sub_10044AE0(int a1) {
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    (**(void(__thiscall ***)(void *, int))gUnkC8Ptr1)(gUnkC8Ptr1, 1);
  gUnkC8Ptr10 = 0;
  dword_10AA29B8 = 0;
  dword_10AA29D8 = 0;
  dword_10AA29D4 = 0;
  dword_10AA2880 = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr11;
  sub_1003BF60();
  return 0;
}
// 10AA2880: using guessed type int dword_10AA2880;
// 10AA2940: using guessed type int dword_10AA2940;
// 10AA2948: using guessed type int dword_10AA2948;
// 10AA29B8: using guessed type int dword_10AA29B8;
// 10AA29D4: using guessed type int dword_10AA29D4;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (10044B40) --------------------------------------------------------
int __cdecl sub_10044B40(int a1) {
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    (**(void(__thiscall ***)(void *, int))gUnkC8Ptr1)(gUnkC8Ptr1, 1);
  gUnkC8Ptr29 = 0;
  dword_10AA29E8 = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr11;
  return 0;
}
// 10AA2940: using guessed type int dword_10AA2940;
// 10AA298C: using guessed type int dword_10AA298C;
// 10AA29E8: using guessed type int dword_10AA29E8;

//----- (10044B90) --------------------------------------------------------
int sub_10044B90() {
  _DWORD *v0; // eax
  int result; // eax

  sub_100419D0((int)asc_100AD300);
  if (gUnkC8Ptr30) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr30;
    result = 1;
  } else {
    v0 = (_DWORD *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr30 = result;
    gUnkC8Ptr1 = (void *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_10059760;
      (*(void(__cdecl **)(int))(gUnkC8Ptr30 + 4))(gUnkC8Ptr30);
      *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
      result = 1;
      *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
    }
  }
  return result;
}
// 10059760: using guessed type int __cdecl sub_10059760(int);
// 10AA295C: using guessed type int dword_10AA295C;

//----- (10044C70) --------------------------------------------------------
int __cdecl sub_10044C70(int a1) {
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr30 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}
// 10AA295C: using guessed type int dword_10AA295C;

//----- (10044CB0) --------------------------------------------------------
int __cdecl sub_10044CB0(int a1) {
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    (**(void(__thiscall ***)(void *, int))gUnkC8Ptr1)(gUnkC8Ptr1, 1);
  gUnkC8Ptr12 = 0;
  dword_10AA29AC = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr30;
  return 0;
}
// 10AA290C: using guessed type int dword_10AA290C;
// 10AA295C: using guessed type int dword_10AA295C;
// 10AA29AC: using guessed type int dword_10AA29AC;

//----- (10044D00) --------------------------------------------------------
int sub_10044D00() {
  _DWORD *v0; // eax
  int result; // eax

  dword_10AA28C8 = 0;
  dword_10AA28CC = 0;
  if (gUnkC8Ptr32) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr32;
    result = 1;
  } else {
    v0 = (_DWORD *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr32 = result;
    gUnkC8Ptr1 = (void *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_10059BB0;
      (*(void(__cdecl **)(int))(gUnkC8Ptr32 + 4))(gUnkC8Ptr32);
      *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
      result = 1;
      *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
    }
  }
  return result;
}
// 10059BB0: using guessed type int __cdecl sub_10059BB0(int);
// 10AA28C8: using guessed type int dword_10AA28C8;
// 10AA28CC: using guessed type int dword_10AA28CC;
// 10AA2964: using guessed type int dword_10AA2964;

//----- (10044DE0) --------------------------------------------------------
int __cdecl sub_10044DE0(int a1) {
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (gUnkC8Ptr1)
    (**(void(__thiscall ***)(void *, int))gUnkC8Ptr1)(gUnkC8Ptr1, 1);
  gUnkC8Ptr32 = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr30;
  return 0;
}
// 10AA295C: using guessed type int dword_10AA295C;
// 10AA2964: using guessed type int dword_10AA2964;

//----- (10044E20) --------------------------------------------------------
unk000C8 *sub_10044E20() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  dword_10AA28CC = dword_10ACEE8C;
  dword_10AA28C8 = LODWORD(flt_10ACEE94);
  if (g_unkC8Ptr0) {
    gUnkC8Ptr1 = g_unkC8Ptr0;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    g_unkC8Ptr0 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_1005A6E0;
      g_unkC8Ptr0->lpFn0(g_unkC8Ptr0);
      gUnkC8Ptr1->field_C = 1;
      gUnkC8Ptr1->field_68 = 1;
      result = (unk000C8 *)1;
    }
  }
  return result;
}
// 10AA28C8: using guessed type int dword_10AA28C8;
// 10AA28CC: using guessed type int dword_10AA28CC;
// 10ACEE8C: using guessed type int dword_10ACEE8C;

//----- (10044F00) --------------------------------------------------------
int __cdecl sub_10044F00(int a1) {
  (*(void(__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 10984) + 28))(*(_DWORD *)(a1 + 10984));
  if (g_unkC8Ptr0)
    (**(void(__thiscall ***)(int, int))g_unkC8Ptr0)(g_unkC8Ptr0, 1);
  g_unkC8Ptr0 = 0;
  gUnkC8Ptr1 = (void *)gUnkC8Ptr30;
  gGameMode = 2;
  return 0;
}
// 100AA010: using guessed type int g_GameMode;
// 10AA295C: using guessed type int dword_10AA295C;
// 10AA2968: using guessed type int dword_10AA2968;

//----- (10044F50) --------------------------------------------------------
int __thiscall meth_10044F50(void *this) {
  unk000C8 *v1; // eax
  int result;   // eax
  unk000C8 *v3; // ecx

  sub_100419D0(asc_100AD300);
  gGameMode = GAME_MODE_1;
  sub_1003E680();
  if (gUnkC8Ptr12) {
    gUnkC8Ptr1 = gUnkC8Ptr12;
    result = 1;
  } else {
    v1 = (unk000C8 *)operator new(0xC8u);
    if (v1)
      result = (int)meth_unk000C8_10048710(v1);
    else
      result = 0;
    gUnkC8Ptr12 = (unk000C8 *)result;
    gUnkC8Ptr1 = (unk000C8 *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_1004B430;
      gUnkC8Ptr12->lpFn0(gUnkC8Ptr12);
      gUnkC8Ptr1->field_C = 1;
      v3 = gUnkC8Ptr1;
      gUnkC8Ptr1->field_68 = 1;
      meth_DebugPrint(v3);
      sub_1003DFC0();
      sub_1003E510();
      result = 1;
    }
  }
  return result;
}
// 1004B430: using guessed type int __cdecl s_unk000C8_1004B430(int);

//----- (10045050) --------------------------------------------------------
int __cdecl sub_10045050() {
  int result; // eax

  dword_100AC304 = 0;
  sub_10045110();
  result = 1;
  dword_100AC304 = 1;
  *(_DWORD *)(dword_10AA29B4 + 8) = sub_10046CD0;
  gGameMode = 0;
  return result;
}
// 10046CD0: using guessed type int __cdecl sub_10046CD0(int);
// 100AA010: using guessed type int g_GameMode;
// 100AC304: using guessed type int dword_100AC304;
// 10AA29B4: using guessed type int dword_10AA29B4;

//----- (10045090) --------------------------------------------------------
int __cdecl sub_10045090() {
  int result; // eax

  sub_10045C90();
  result = 1;
  *(_DWORD *)(dword_10AA29B0 + 8) = sub_10046DC0;
  gGameMode = 0;
  return result;
}
// 100AA010: using guessed type int g_GameMode;
// 10AA29B0: using guessed type int dword_10AA29B0;

//----- (100450C0) --------------------------------------------------------
int __cdecl sub_100450C0() {
  int result; // eax

  sub_10041BD0();
  sub_10045C90();
  result = 1;
  *(_DWORD *)(dword_10AA29B0 + 8) = sub_10046DC0;
  gGameMode = 0;
  return result;
}
// 100AA010: using guessed type int g_GameMode;
// 10AA29B0: using guessed type int dword_10AA29B0;

//----- (100450F0) --------------------------------------------------------
int __cdecl sub_100450F0(int a1) {
  (*(void(__cdecl **)(int))(dword_10AA29F4 + 8))(a1);
  gGameMode = 0;
  return 0;
}
// 100AA010: using guessed type int g_GameMode;
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (10045110) --------------------------------------------------------
int sub_10045110() {
  unk000C8 *v0; // eax
  int result;   // eax

  if (gUnkC8Ptr14) {
    gUnkC8Ptr1 = (unk000C8 *)gUnkC8Ptr14;
    result = 1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr14 = result;
    gUnkC8Ptr1 = (unk000C8 *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_1004A580;
      (*(void(__cdecl **)(int))(gUnkC8Ptr14 + 4))(gUnkC8Ptr14);
      gUnkC8Ptr1->field_C = 1;
      result = 1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}
// 10AA2914: using guessed type int dword_10AA2914;

//----- (100451E0) --------------------------------------------------------
int __stdcall sub_100451E0() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  sub_100419D0(asc_100AD300);
  if (gUnkC8Ptr4) {
    gUnkC8Ptr1 = gUnkC8Ptr4;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr4 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_1004BDC0;
      gUnkC8Ptr4->lpFn0(gUnkC8Ptr4);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return (int)result;
}

//----- (100452C0) --------------------------------------------------------
int __stdcall sub_100452C0() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr3) {
    gUnkC8Ptr1 = gUnkC8Ptr3;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr3 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_1004C4A0;
      gUnkC8Ptr3->lpFn0(gUnkC8Ptr3);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return (int)result;
}

//----- (10045390) --------------------------------------------------------
int __stdcall sub_10045390() {
  unk000C8 *uC8;    // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr2) {
    gUnkC8Ptr1 = gUnkC8Ptr2;
    result = (unk000C8 *)1;
  } else {
    uC8 = (unk000C8 *)operator new(0xC8u);
    if (uC8)
      result = meth_unk000C8_10048710(uC8);
    else
      result = 0;
    gUnkC8Ptr2 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_1004D1F0;
      gUnkC8Ptr2->lpFn0(gUnkC8Ptr2);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return (int)result;
}

//----- (10045460) --------------------------------------------------------
int sub_10045460() {
  _DWORD *v0; // eax
  int result; // eax

  if (gUnkC8Ptr36) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr36;
    goto LABEL_8;
  }
  v0 = (_DWORD *)operator new(0xC8u);
  if (v0)
    result = (int)meth_unk000C8_10048710(v0);
  else
    result = 0;
  gUnkC8Ptr36 = result;
  gUnkC8Ptr1 = (void *)result;
  if (result) {
    *(_DWORD *)(result + 4) = s_unk000C8_1004D640;
    (*(void(__cdecl **)(int))(gUnkC8Ptr36 + 4))(gUnkC8Ptr36);
    *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
    *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
  LABEL_8:
    graphics_1007AC00();
    result = 1;
  }
  return result;
}
// 1004D640: using guessed type int __cdecl sub_1004D640(int);
// 10AA2990: using guessed type int dword_10AA2990;

//----- (10045520) --------------------------------------------------------
int sub_10045520() {
  _DWORD *v0; // eax
  int result; // eax

  if (gUnkC8Ptr37) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr37;
    goto LABEL_8;
  }
  v0 = (_DWORD *)operator new(0xC8u);
  if (v0)
    result = (int)meth_unk000C8_10048710(v0);
  else
    result = 0;
  gUnkC8Ptr37 = result;
  gUnkC8Ptr1 = (void *)result;
  if (result) {
    *(_DWORD *)(result + 4) = s_unk000C8_1004DB00;
    (*(void(__cdecl **)(int))(gUnkC8Ptr37 + 4))(gUnkC8Ptr37);
    *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
    *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
  LABEL_8:
    graphics_1007AC00();
    result = 1;
  }
  return result;
}
// 1004DB00: using guessed type int __cdecl sub_1004DB00(int);
// 10AA2994: using guessed type int dword_10AA2994;

//----- (100455E0) --------------------------------------------------------
int sub_100455E0() {
  _DWORD *v0; // eax
  int result; // eax

  if (gUnkC8Ptr34) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr34;
    result = 1;
  } else {
    v0 = (_DWORD *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr34 = result;
    gUnkC8Ptr1 = (void *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_1004DFC0;
      (*(void(__cdecl **)(int))(gUnkC8Ptr34 + 4))(gUnkC8Ptr34);
      *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
      result = 1;
      *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
    }
  }
  return result;
}
// 1004DFC0: using guessed type int __cdecl sub_1004DFC0(int);
// 10AA2984: using guessed type int dword_10AA2984;

//----- (100456B0) --------------------------------------------------------
int sub_100456B0() {
  _DWORD *v0; // eax
  int result; // eax

  if (gUnkC8Ptr35) {
    gUnkC8Ptr1 = (void *)gUnkC8Ptr35;
    result = 1;
  } else {
    v0 = (_DWORD *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr35 = result;
    gUnkC8Ptr1 = (void *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_1004E830;
      (*(void(__cdecl **)(int))(gUnkC8Ptr35 + 4))(gUnkC8Ptr35);
      *((_DWORD *)gUnkC8Ptr1 + 3) = 1;
      result = 1;
      *((_DWORD *)gUnkC8Ptr1 + 26) = 1;
    }
  }
  return result;
}
// 1004E830: using guessed type int __cdecl sub_1004E830(int);
// 10AA2988: using guessed type int dword_10AA2988;

//----- (10045780) --------------------------------------------------------
int sub_10045780() {
  int result; // eax

  sub_100451E0();
  result = 1;
  *(_DWORD *)(dword_10AA29C8 + 8) = sub_10046750;
  return result;
}
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (100457A0) --------------------------------------------------------
int sub_100457A0() {
  int result; // eax

  sub_10045BC0();
  result = 1;
  *(_DWORD *)(dword_10AA29F4 + 8) = sub_10046790;
  return result;
}
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (100457C0) --------------------------------------------------------
int sub_100457C0() {
  int result; // eax

  sub_100451E0();
  result = 1;
  *(_DWORD *)(dword_10AA29C8 + 8) = sub_10046830;
  return result;
}
// 10046830: using guessed type int sub_10046830();
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (100457E0) --------------------------------------------------------
int sub_100457E0() {
  int result; // eax

  sub_10045BC0();
  result = 1;
  *(_DWORD *)(dword_10AA29F4 + 8) = sub_10046870;
  return result;
}
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (10045800) --------------------------------------------------------
int sub_10045800() {
  int result; // eax

  sub_100451E0();
  result = 1;
  *(_DWORD *)(dword_10AA29C8 + 8) = sub_10046910;
  return result;
}
// 10046910: using guessed type int sub_10046910();
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (10045820) --------------------------------------------------------
int sub_10045820() {
  int result; // eax

  sub_10045BC0();
  result = 1;
  *(_DWORD *)(dword_10AA29F4 + 8) = sub_10046950;
  return result;
}
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (10045840) --------------------------------------------------------
int sub_10045840() {
  int result; // eax

  sub_100451E0();
  result = 1;
  *(_DWORD *)(dword_10AA29C8 + 8) = sub_100469F0;
  return result;
}
// 100469F0: using guessed type int sub_100469F0();
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (10045860) --------------------------------------------------------
int sub_10045860() {
  int result; // eax

  sub_10045BC0();
  result = 1;
  *(_DWORD *)(dword_10AA29F4 + 8) = sub_10046A30;
  return result;
}
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (10045880) --------------------------------------------------------
int sub_10045880() {
  int result; // eax

  sub_100451E0();
  result = 1;
  *(_DWORD *)(dword_10AA29C8 + 8) = sub_10046AD0;
  return result;
}
// 10046AD0: using guessed type int sub_10046AD0();
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (100458A0) --------------------------------------------------------
int sub_100458A0() {
  int result; // eax

  sub_10045BC0();
  result = 1;
  *(_DWORD *)(dword_10AA29F4 + 8) = sub_10046B10;
  return result;
}
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (100458C0) --------------------------------------------------------
int sub_100458C0() {
  int result; // eax

  sub_100451E0();
  result = 1;
  *(_DWORD *)(dword_10AA29C8 + 8) = sub_10046BB0;
  return result;
}
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (100458E0) --------------------------------------------------------
int sub_100458E0() {
  int result; // eax

  sub_10045BC0();
  result = 1;
  *(_DWORD *)(dword_10AA29F4 + 8) = sub_10046BF0;
  return result;
}
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (10045900) --------------------------------------------------------
int __thiscall meth_10045900(void *this) {
  unk000C8 *v1;   // eax
  unk000C8 *v2;   // eax
  int result;     // eax
  const CHAR *v4; // eax

  if (IsBossRallyCDROMPresent()) {
    sub_100419D0(asc_100AD300);
    if (gUnkC8Ptr5) {
      gUnkC8Ptr1 = gUnkC8Ptr5;
      return 1;
    }
    v1 = (unk000C8 *)operator new(0xC8u);
    if (v1)
      v2 = meth_unk000C8_10048710(v1);
    else
      v2 = 0;
    gUnkC8Ptr5 = v2;
    gUnkC8Ptr1 = v2;
    if (v2) {
      v2->lpFn0 = s_unk000C8_1004F2B0;
      gUnkC8Ptr5->lpFn0(gUnkC8Ptr5);
      gUnkC8Ptr1->field_C = 1;
      result = 1;
      gUnkC8Ptr1->field_68 = 1;
      return result;
    }
  } else {
    v4 = GetStringWithIndex(0xDu);
    sub_100419D0(v4);
  }
  return 0;
}

//----- (10045A00) --------------------------------------------------------
BOOL __stdcall IsBossRallyCDROMPresent() {
  BOOL ret;               // ebx
  int defaultDriveNumber; // ebp
  int driveNumber;        // esi
  char path[260];         // [esp+10h] [ebp-104h] BYREF

  ret = FALSE;
  defaultDriveNumber = _getdrive();
  getcwd(path, MAX_PATH);
  driveNumber = 3;
  while (_chdrive(driveNumber) || GetDriveTypeA(NULL) != DRIVE_CDROM || _chdir(kBackslash) ||
         !IsBossRallyCDROM(driveNumber)) {
    if (++driveNumber > 26)
      goto LABEL_9;
  }
  ret = TRUE;
LABEL_9:
  _chdrive(defaultDriveNumber);
  _chdir(path);
  return ret;
}

//----- (10045AA0) --------------------------------------------------------
int sub_10045AA0() {
  gGameMode = GAME_MODE_0;
  sub_1003E680();
  dword_10ACED34 = 0;
  sub_10045C90();
  *(_DWORD *)(dword_10AA29B0 + 8) = sub_10046D70;
  gGameMode = GAME_MODE_0;
  sub_1003E510();
  return 1;
}
// 10AA29B0: using guessed type int dword_10AA29B0;

//----- (10045AF0) --------------------------------------------------------
unk000C8 *sub_10045AF0() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr16) {
    gUnkC8Ptr1 = gUnkC8Ptr16;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr16 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_1004F700;
      gUnkC8Ptr16->lpFn0(gUnkC8Ptr16);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}

//----- (10045BC0) --------------------------------------------------------
int sub_10045BC0() {
  unk000C8 *v0; // eax
  int result;   // eax

  if (gUnkC8Ptr17) {
    gUnkC8Ptr1 = gUnkC8Ptr17;
    result = 1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr17 = (unk000C8 *)result;
    gUnkC8Ptr1 = (unk000C8 *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_10050060;
      gUnkC8Ptr17->lpFn0(gUnkC8Ptr17);
      gUnkC8Ptr1->field_C = 1;
      result = 1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}

//----- (10045C90) --------------------------------------------------------
unk000C8 *sub_10045C90() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax
  unk000C8 *v2;     // eax

  if (gUnkC8Ptr18) {
    gUnkC8Ptr1 = gUnkC8Ptr18;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr18 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_100509F0;
      gUnkC8Ptr18->lpFn0(gUnkC8Ptr18);
      gUnkC8Ptr1->field_C = 1;
      gUnkC8Ptr1->field_68 = 1;
      v2 = (unk000C8 *)operator new(0xC8u);
      if (v2)
        result = meth_unk000C8_10048710(v2);
      else
        result = 0;
      gUnkC8Ptr33 = result;
      if (result) {
        result->lpFn0 = s_unk000C8_10049F40;
        gUnkC8Ptr33->lpFn0(gUnkC8Ptr33);
        result = (unk000C8 *)1;
        gUnkC8Ptr33->field_C = 1;
      }
    }
  }
  return result;
}

//----- (10045DC0) --------------------------------------------------------
int sub_10045DC0() {
  unk000C8 *v0; // eax
  int result;   // eax

  dword_10AA28AC = dword_10AA28A4;
  if (gUnkC8Ptr19) {
    gUnkC8Ptr1 = gUnkC8Ptr19;
    result = 1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr19 = (unk000C8 *)result;
    gUnkC8Ptr1 = (unk000C8 *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_10052030;
      gUnkC8Ptr19->lpFn0(gUnkC8Ptr19);
      result = 1;
      gUnkC8Ptr1->field_C = 1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}
// 10052030: using guessed type int __cdecl sub_10052030(int);
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28AC: using guessed type int dword_10AA28AC;

//----- (10045EA0) --------------------------------------------------------
int sub_10045EA0() {
  unk000C8 *v0; // eax
  int result;   // eax

  if (gUnkC8Ptr20) {
    gUnkC8Ptr1 = gUnkC8Ptr20;
    result = 1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr20 = (unk000C8 *)result;
    gUnkC8Ptr1 = (unk000C8 *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_10052F50;
      gUnkC8Ptr20->lpFn0(gUnkC8Ptr20);
      gUnkC8Ptr1->field_C = 1;
      result = 1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}
// 10052F50: using guessed type int __cdecl sub_10052F50(int);

//----- (10045F70) --------------------------------------------------------
unk000C8 *sub_10045F70() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax
  unk000C8 *v2;     // eax

  if (gUnkC8Ptr21) {
    gUnkC8Ptr1 = gUnkC8Ptr21;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr21 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_10053CF0;
      gUnkC8Ptr21->lpFn0(gUnkC8Ptr21);
      gUnkC8Ptr1->field_C = 1;
      gUnkC8Ptr1->field_68 = 1;
      v2 = (unk000C8 *)operator new(0xC8u);
      if (v2)
        result = meth_unk000C8_10048710(v2);
      else
        result = 0;
      gUnkC8Ptr38 = result;
      if (result) {
        result->lpFn0 = s_unk000C8_1004A260;
        gUnkC8Ptr38->lpFn0(gUnkC8Ptr38);
        result = (unk000C8 *)1;
        gUnkC8Ptr38->field_C = 1;
      }
    }
  }
  return result;
}

//----- (100460A0) --------------------------------------------------------
int __stdcall sub_100460A0() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  if (gUnkC8Ptr22) {
    gUnkC8Ptr1 = gUnkC8Ptr22;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr22 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_10054B50;
      gUnkC8Ptr22->lpFn0(gUnkC8Ptr22);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return (int)result;
}

//----- (10046170) --------------------------------------------------------
unk000C8 *sub_10046170() {
  unk000C8 *v0;     // eax
  unk000C8 *result; // eax

  sub_100419D0(asc_100AD300);
  sub_10072AF0(3, 0x200020u);
  dword_10AA2854 = 3;
  if (gUnkC8Ptr13) {
    gUnkC8Ptr1 = gUnkC8Ptr13;
    result = (unk000C8 *)1;
  } else {
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr13 = result;
    gUnkC8Ptr1 = result;
    if (result) {
      result->lpFn0 = s_unk000C8_10049C20;
      gUnkC8Ptr13->lpFn0(gUnkC8Ptr13);
      gUnkC8Ptr1->field_C = 1;
      result = (unk000C8 *)1;
      gUnkC8Ptr1->field_68 = 1;
    }
  }
  return result;
}
// 10AA2854: using guessed type int dword_10AA2854;

//----- (10046260) --------------------------------------------------------
int sub_10046260() {
  unk000C8 *v0; // eax
  int result;   // eax
  unk000C8 *v2; // ecx

  gGameMode = GAME_MODE_2;
  sub_1003E680();
  dword_10ACED34 = 0;
  dword_10AD0984 = 1;
  gGameMode = GAME_MODE_2;
  dword_100AC304 = 1;
  LOBYTE(dword_10680738[0]) = -1;
  if (gUnkC8Ptr12) {
    gUnkC8Ptr1 = gUnkC8Ptr12;
    result = 1;
  } else {
    dword_100AC304 = 1;
    v0 = (unk000C8 *)operator new(0xC8u);
    if (v0)
      result = (int)meth_unk000C8_10048710(v0);
    else
      result = 0;
    gUnkC8Ptr12 = (unk000C8 *)result;
    gUnkC8Ptr1 = (unk000C8 *)result;
    if (result) {
      *(_DWORD *)(result + 4) = s_unk000C8_1004B430;
      gUnkC8Ptr12->lpFn0(gUnkC8Ptr12);
      gUnkC8Ptr1->field_C = 1;
      v2 = gUnkC8Ptr1;
      gUnkC8Ptr1->field_68 = 1;
      meth_DebugPrint(v2);
      sub_1003DFC0();
      sub_1003E510();
      result = 1;
      *(_DWORD *)(dword_10AA29AC + 8) = sub_10044CB0;
    }
  }
  return result;
}
// 1004B430: using guessed type int __cdecl sub_1004B430(int);
// 100AC304: using guessed type int dword_100AC304;
// 10AA29AC: using guessed type int dword_10AA29AC;
// 10AD0984: using guessed type int dword_10AD0984;

//----- (10046380) --------------------------------------------------------
int sub_10046380() {
  int result; // eax

  dword_100AC304 = 0;
  sub_10045110();
  result = 1;
  dword_100AC304 = 1;
  *(_DWORD *)(dword_10AA29B4 + 8) = sub_10046D20;
  gGameMode = GAME_MODE_2;
  return result;
}
// 100AC304: using guessed type int dword_100AC304;
// 10AA29B4: using guessed type int dword_10AA29B4;

//----- (100463C0) --------------------------------------------------------
int __cdecl sub_100463C0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr11 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr28;
  return 0;
}

//----- (10046400) --------------------------------------------------------
int __cdecl sub_10046400(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr27 = 0;
  dword_10AA29E4 = 0;
  gUnk1E214 = 0;
  dword_10AA285C = 0;
  gUnkC8Ptr1 = gUnkC8Ptr26;
  return 0;
}
// 10AA285C: using guessed type int dword_10AA285C;
// 10AA29E0: using guessed type int dword_10AA29E0;
// 10AA29E4: using guessed type int dword_10AA29E4;

//----- (10046450) --------------------------------------------------------
int __cdecl sub_10046450(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr12 = 0;
  dword_10AA29AC = 0;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}
// 10AA29AC: using guessed type int dword_10AA29AC;

//----- (100464A0) --------------------------------------------------------
int __cdecl sub_100464A0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr13 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}

//----- (100464E0) --------------------------------------------------------
int __cdecl sub_100464E0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr14 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr12;
  return 0;
}

//----- (10046520) --------------------------------------------------------
int __cdecl sub_10046520(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}

//----- (10046560) --------------------------------------------------------
int __cdecl sub_10046560(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr9 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr3;
  input_10079550();
  return 0;
}

//----- (100465A0) --------------------------------------------------------
int __cdecl sub_100465A0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr3 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr4;
  return 0;
}

//----- (100465E0) --------------------------------------------------------
int __cdecl sub_100465E0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr2 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr4;
  return 0;
}

//----- (10046620) --------------------------------------------------------
int __cdecl sub_10046620(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr36 = 0;
  gUnk1E214Ptr0 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr2;
  return 0;
}
// 10AA29F0: using guessed type int dword_10AA29F0;

//----- (10046670) --------------------------------------------------------
int __cdecl s_unk1E214_10046670(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr37 = 0;
  dword_10AA29EC = 0;
  gUnkC8Ptr1 = gUnkC8Ptr2;
  return 0;
}
// 10AA29EC: using guessed type int dword_10AA29EC;

//----- (100466C0) --------------------------------------------------------
int __cdecl sub_100466C0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr34 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr4;
  sub_1003E310();
  meth_BossRallyConfig_WriteConfigFile(&gConfig, gBossRallyCfgPath);
  return 0;
}

//----- (10046710) --------------------------------------------------------
int __cdecl sub_10046710(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr35 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr4;
  return 0;
}

//----- (10046750) --------------------------------------------------------
int __cdecl sub_10046750(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr18;
  return 0;
}

//----- (10046790) --------------------------------------------------------
int __cdecl sub_10046790(unk1E214 *a1) {
  int result; // eax

  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr17 = 0;
  dword_10AA29C0 = 0;
  dword_10AA29CC = 0;
  dword_10AA28E4 = 0;
  Value = -1;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  result = 0;
  gUnkC8Ptr1 = gUnkC8Ptr18;
  return result;
}
// 10AA28E4: using guessed type int dword_10AA28E4;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10046830) --------------------------------------------------------
int __cdecl sub_10046830(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr19;
  return 0;
}

//----- (10046870) --------------------------------------------------------
int __cdecl sub_10046870(unk1E214 *a1) {
  int result; // eax

  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr17 = 0;
  dword_10AA29C0 = 0;
  dword_10AA29CC = 0;
  dword_10AA28E4 = 0;
  Value = -1;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  result = 0;
  gUnkC8Ptr1 = gUnkC8Ptr19;
  return result;
}
// 10AA28E4: using guessed type int dword_10AA28E4;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10046910) --------------------------------------------------------
int __cdecl sub_10046910(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr20;
  return 0;
}

//----- (10046950) --------------------------------------------------------
int __cdecl sub_10046950(unk1E214 *a1) {
  int result; // eax

  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr17 = 0;
  dword_10AA29C0 = 0;
  dword_10AA29CC = 0;
  dword_10AA28E4 = 0;
  Value = -1;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  result = 0;
  gUnkC8Ptr1 = gUnkC8Ptr20;
  return result;
}
// 10AA28E4: using guessed type int dword_10AA28E4;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (100469F0) --------------------------------------------------------
int __cdecl sub_100469F0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr21;
  return 0;
}

//----- (10046A30) --------------------------------------------------------
int __cdecl sub_10046A30(unk1E214 *a1) {
  int result; // eax

  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr17 = 0;
  dword_10AA29C0 = 0;
  dword_10AA29CC = 0;
  dword_10AA28E4 = 0;
  Value = -1;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  result = 0;
  gUnkC8Ptr1 = gUnkC8Ptr21;
  return result;
}
// 10AA28E4: using guessed type int dword_10AA28E4;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10046AD0) --------------------------------------------------------
int __cdecl sub_10046AD0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr22;
  return 0;
}

//----- (10046B10) --------------------------------------------------------
int __cdecl sub_10046B10(unk1E214 *a1) {
  int result; // eax

  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr17 = 0;
  dword_10AA29C0 = 0;
  dword_10AA29CC = 0;
  dword_10AA28E4 = 0;
  Value = -1;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  result = 0;
  gUnkC8Ptr1 = gUnkC8Ptr22;
  return result;
}
// 10AA28E4: using guessed type int dword_10AA28E4;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10046BB0) --------------------------------------------------------
int __cdecl sub_10046BB0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr14;
  return 0;
}

//----- (10046BF0) --------------------------------------------------------
int __cdecl sub_10046BF0(unk1E214 *a1) {
  int result; // eax

  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr17 = 0;
  dword_10AA29C0 = 0;
  dword_10AA29CC = 0;
  dword_10AA28E4 = 0;
  Value = -1;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  result = 0;
  gUnkC8Ptr1 = gUnkC8Ptr14;
  return result;
}
// 10AA28E4: using guessed type int dword_10AA28E4;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10046C90) --------------------------------------------------------
int __cdecl sub_10046C90(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr5 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}

//----- (10046CD0) --------------------------------------------------------
int __cdecl sub_10046CD0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr14 = 0;
  dword_10AA29B4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr19;
  return 0;
}
// 10AA29B4: using guessed type int dword_10AA29B4;

//----- (10046D20) --------------------------------------------------------
int __cdecl sub_10046D20(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr14 = 0;
  dword_10AA29B4 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr30;
  return 0;
}
// 10AA29B4: using guessed type int dword_10AA29B4;

//----- (10046D70) --------------------------------------------------------
int __cdecl sub_10046D70(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr18 = 0;
  dword_10AA29B0 = 0;
  gUnkC8Ptr33 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr5;
  return 0;
}
// 10AA29B0: using guessed type int dword_10AA29B0;

//----- (10046DC0) --------------------------------------------------------
int __cdecl sub_10046DC0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr18 = 0;
  dword_10AA29B0 = 0;
  gUnkC8Ptr33 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr16;
  return 0;
}
// 10AA29B0: using guessed type int dword_10AA29B0;

//----- (10046E10) --------------------------------------------------------
int __cdecl sub_10046E10(unk1E214 *a1) {
  int result; // eax

  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr16 = 0;
  dword_10AA28E0 = 0;
  Value = -1;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  result = 0;
  gUnkC8Ptr1 = gUnkC8Ptr5;
  return result;
}
// 10AA28E0: using guessed type int dword_10AA28E0;

//----- (10046EB0) --------------------------------------------------------
int __cdecl sub_10046EB0(unk1E214 *a1) {
  int result; // eax

  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr17 = 0;
  dword_10AA29C0 = 0;
  dword_10AA29CC = 0;
  dword_10AA28E4 = 0;
  Value = -1;
  strcpy(byte_10AA2518, String2);
  strcpy(byte_10A9D618, String2);
  result = 0;
  gUnkC8Ptr1 = gUnkC8Ptr20;
  return result;
}
// 10AA28E4: using guessed type int dword_10AA28E4;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29CC: using guessed type int dword_10AA29CC;

//----- (10046F50) --------------------------------------------------------
int sub_10046F50() {
  gUnkC8Ptr1 = gUnkC8Ptr33;
  return 0;
}

//----- (10046F60) --------------------------------------------------------
int __cdecl sub_10046F60(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr1 = 0;
  gUnkC8Ptr33 = 0;
  if (gUnkC8Ptr18) {
    gUnkC8Ptr18->lpVtbl->meth0(gUnkC8Ptr18, 1);
    gUnkC8Ptr18 = 0;
  }
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}

//----- (10046FC0) --------------------------------------------------------
int sub_10046FC0() {
  gUnkC8Ptr1 = gUnkC8Ptr18;
  return 0;
}

//----- (10046FD0) --------------------------------------------------------
int __cdecl sub_10046FD0(unk1E214 *a1) {
  if (gUnkC8Ptr20) {
    gUnkC8Ptr20->lpVtbl->meth7(gUnkC8Ptr20);
    gUnkC8Ptr20 = 0;
  }
  if (gUnkC8Ptr21) {
    gUnkC8Ptr21->lpVtbl->meth7(gUnkC8Ptr21);
    gUnkC8Ptr21 = 0;
  }
  if (gUnkC8Ptr22) {
    gUnkC8Ptr22->lpVtbl->meth7(gUnkC8Ptr22);
    gUnkC8Ptr22 = 0;
  }
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr33 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  return 0;
}

//----- (10047050) --------------------------------------------------------
int sub_10047050() {
  gUnkC8Ptr1 = gUnkC8Ptr22;
  return 0;
}

//----- (10047060) --------------------------------------------------------
int __cdecl sub_10047060(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr19 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr18;
  return 0;
}

//----- (100470A0) --------------------------------------------------------
int __cdecl sub_100470A0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr21 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr20;
  return 0;
}

//----- (100470E0) --------------------------------------------------------
int __cdecl sub_100470E0(unk1E214 *a1) {
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr1)
    gUnkC8Ptr1->lpVtbl->meth0(gUnkC8Ptr1, 1);
  gUnkC8Ptr22 = 0;
  gUnkC8Ptr1 = gUnkC8Ptr21;
  return 0;
}

//----- (10047120) --------------------------------------------------------
int __cdecl sub_10047120(unk1E214 *a1) {
  sub_10045C90();
  if (dword_10AA26F0 > 0 && !LOWORD(dword_10AA26F4[0])) {
    memset((char *)dword_10AA26F4 + 2, 0, 0x18u);
    memset(word_10AA270E, 0, 0x30u);
    memset(dword_10AA2740, 0, sizeof(dword_10AA2740));
  }
  dword_10AA28C4 = 0;
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr7)
    gUnkC8Ptr7->lpVtbl->meth0(gUnkC8Ptr7, 1);
  gUnkC8Ptr7 = 0;
  return 0;
}
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA270E: using guessed type __int16 word_10AA270E[];

//----- (100471B0) --------------------------------------------------------
int __cdecl sub_100471B0(unk1E214 *a1) {
  sub_10045C90();
  a1->field_2AE8->lpVtbl->meth7(a1->field_2AE8);
  if (gUnkC8Ptr8)
    gUnkC8Ptr8->lpVtbl->meth0(gUnkC8Ptr8, 1);
  gUnkC8Ptr8 = 0;
  return 0;
}

//----- (100471F0) --------------------------------------------------------
int __cdecl sub_100471F0(unk1E214 *a1) {
  if (!sub_1003E0E0())
    return 1;
  sub_10047120(a1);
  return -1;
}

//----- (10047210) --------------------------------------------------------
int __cdecl sub_10047210(int a1) {
  if (dword_10AA2AD4) {
    sub_10041A00(a1);
  LABEL_5:
    dword_10AA33E4 = 0;
    return -1;
  }
  if (sub_1003E0E0()) {
    sub_10041AC0((unk1E214 *)a1);
    goto LABEL_5;
  }
  return 1;
}
// 10AA2AD4: using guessed type int dword_10AA2AD4;
// 10AA33E4: using guessed type int dword_10AA33E4;

//----- (10047250) --------------------------------------------------------
int __cdecl sub_10047250(unk1E214 *a1) {
  if (dword_10AA2AD4) {
    sub_10042410(a1);
  LABEL_5:
    dword_10AA33E4 = 0;
    return -1;
  }
  if (sub_1003E0E0()) {
    sub_100424D0(a1);
    goto LABEL_5;
  }
  return 1;
}
// 10AA2AD4: using guessed type int dword_10AA2AD4;
// 10AA33E4: using guessed type int dword_10AA33E4;

//----- (10047290) --------------------------------------------------------
int __cdecl sub_10047290(unk1E214 *a1) {
  unk1E214 *u1E214; // esi

  sub_1005FBC0(1);
  if (gUnkC8Ptr20) {
    gUnkC8Ptr20->lpVtbl->meth7(gUnkC8Ptr20);
    gUnkC8Ptr20 = 0;
  }
  if (gUnkC8Ptr21) {
    gUnkC8Ptr21->lpVtbl->meth7(gUnkC8Ptr21);
    gUnkC8Ptr21 = 0;
  }
  if (dword_10AA28B0) {
    u1E214 = a1;
    sub_10043260();
    dword_10AA28B0 = 0;
  } else {
    u1E214 = a1;
    if (dword_10AA28B4) {
      sub_10043330();
      dword_10AA28B4 = 0;
    } else {
      sub_10045C90();
    }
  }
  u1E214->field_2AE8->lpVtbl->meth7(u1E214->field_2AE8);
  if (gUnkC8Ptr22)
    gUnkC8Ptr22->lpVtbl->meth0(gUnkC8Ptr22, 1);
  gUnkC8Ptr22 = 0;
  return 0;
}
// 10AA28B0: using guessed type int dword_10AA28B0;
// 10AA28B4: using guessed type int dword_10AA28B4;

//----- (10047340) --------------------------------------------------------
int sub_10047340() {
  memset(byte_10A9D618, 0, 0x20u);
  dword_10AA28A4 = 0;
  BYTE1(dword_10AA26F4[0]) = 0;
  return 1;
}
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA28A4: using guessed type int dword_10AA28A4;

//----- (10047360) --------------------------------------------------------
int __cdecl sub_10047360(int a1) {
  int v1;     // edx
  int result; // eax

  v1 = *(_DWORD *)(a1 + 28);
  if ((v1 & 0x10) != 0)
    return 0;
  if ((v1 & 0x1000000) != 0)
    return 0;
  if ((*(_DWORD *)(a1 + 14416) & 0x1000000) != 0)
    return 0;
  if (dword_10AA284C &&
      (gUnk54Ptr->field_2C || gUnk54Ptr->field_30 || gUnk54Ptr->field_34 || gUnk54Ptr->field_38)) {
    *(_BYTE *)(a1 + 11108) = 4;
    result = 1;
  } else if ((v1 & 0x100) != 0) {
    switch (++*(_WORD *)(a1 + 123404)) {
    case 2:
      BYTE1(v1) &= 0xFEu;
      *(_BYTE *)(a1 + 11108) = 0;
      *(_DWORD *)(a1 + 28) = v1;
      result = 1;
      break;
    case 3:
      BYTE1(v1) &= 0xFEu;
      *(_BYTE *)(a1 + 11108) = 1;
      *(_DWORD *)(a1 + 28) = v1;
      result = 1;
      break;
    case 4:
      BYTE1(v1) &= 0xFEu;
      *(_BYTE *)(a1 + 11108) = 2;
      *(_DWORD *)(a1 + 28) = v1;
      result = 1;
      break;
    case 0x34:
      BYTE1(v1) &= 0xFEu;
      *(_BYTE *)(a1 + 11108) = 4;
      *(_DWORD *)(a1 + 28) = v1;
      result = 1;
      break;
    default:
      BYTE1(v1) &= 0xFEu;
      *(_WORD *)(a1 + 123404) = 2;
      *(_DWORD *)(a1 + 28) = v1;
      goto LABEL_20;
    }
  } else {
  LABEL_20:
    result = 1;
  }
  return result;
}
// 10AA284C: using guessed type int dword_10AA284C;

//----- (100474B0) --------------------------------------------------------
int __cdecl sub_100474B0(int a1) {
  sub_10047360(a1);
  return 1;
}

//----- (100474D0) --------------------------------------------------------
BOOL sub_100474D0() {
  BOOL result; // eax

  dword_10AA28F0 = 1;
  result = sub_10072AF0(2, 0x200020u);
  dword_10AA2854 = 2;
  return result;
}
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA28F0: using guessed type int dword_10AA28F0;

//----- (10047500) --------------------------------------------------------
BOOL sub_10047500() {
  BOOL result; // eax

  dword_10AA28F8 = 1;
  result = sub_10072AF0(2, 0x200020u);
  dword_10AA2854 = 2;
  return result;
}
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA28F8: using guessed type int dword_10AA28F8;

//----- (10047530) --------------------------------------------------------
BOOL sub_10047530() {
  BOOL result; // eax

  dword_10AA28FC = 1;
  result = sub_10072AF0(2, 0x200020u);
  dword_10AA2854 = 2;
  return result;
}
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA28FC: using guessed type int dword_10AA28FC;

//----- (10047560) --------------------------------------------------------
BOOL sub_10047560() {
  BOOL result; // eax

  word_100AC6A4 = 0x7FFF;
  result = sub_10072AF0(3, 0x200020u);
  dword_10AA2854 = 3;
  return result;
}
// 100AC6A4: using guessed type __int16 word_100AC6A4;
// 10AA2854: using guessed type int dword_10AA2854;

//----- (10047590) --------------------------------------------------------
BOOL sub_10047590() {
  BOOL result; // eax

  dword_10AA2A40 = 1;
  result = sub_10072AF0(2, 0x200020u);
  dword_10AA2854 = 2;
  return result;
}
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA2A40: using guessed type int dword_10AA2A40;

//----- (100475C0) --------------------------------------------------------
BOOL sub_100475C0() {
  BOOL result; // eax

  dword_10AA28F4 = 1;
  result = sub_10072AF0(2, 0x200020u);
  dword_10AA2854 = 2;
  return result;
}
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA28F4: using guessed type int dword_10AA28F4;

//----- (100475F0) --------------------------------------------------------
int __cdecl sub_100475F0(int a1) {
  sub_10047610();
  sub_10047360(a1);
  return 1;
}

//----- (10047610) --------------------------------------------------------
int sub_10047610() {
  int result; // eax
  int v1;     // ecx
  int v2;     // eax
  int v3;     // eax

  result = dword_10AA33E4;
  if (dword_10AA33E4) {
    if ((char)dword_10AA33E4 >= 65 && (char)dword_10AA33E4 <= 90)
      LOBYTE(result) = dword_10AA33E4 + 32;
    v1 = (char)result;
    v2 = dword_10AA2A48;
    dword_10A9E150[dword_10AA2A48] = v1;
    v3 = v2 + 1;
    dword_10AA2A48 = v3;
    if (v3 >= 32)
      dword_10AA2A48 = 0;
    result = sub_10047660(v3);
    dword_10AA33E4 = 0;
  }
  return result;
}
// 10AA2A48: using guessed type int dword_10AA2A48;
// 10AA33E4: using guessed type int dword_10AA33E4;

//----- (10047660) --------------------------------------------------------
int __usercall sub_10047660 @<eax>(int result @<eax>) {
  const char *v1; // edx
  char **v2;      // ebp
  int v3;         // ecx
  int v4;         // edi

  v1 = off_100AC6AC;
  if (off_100AC6AC) {
    v2 = &off_100AC6AC;
    do {
      v3 = strlen(v1);
      v4 = 0;
      if (v3 <= 0) {
      LABEL_7:
        result = ((int (*)(void)) * (v2 - 1))();
      } else {
        result = dword_10AA2A48;
        while (v1[result - dword_10AA2A48] ==
               LOBYTE(dword_10A9E150[((_BYTE)result - (_BYTE)v3) & 0x1F])) {
          ++v4;
          ++result;
          if (v4 >= v3)
              goto LABEL_7;
        }
      }
      v1 = v2[2];
      v2 += 2;
    } while (v1);
  }
  return result;
}
// 100AC6AC: using guessed type char *off_100AC6AC;
// 10AA2A48: using guessed type int dword_10AA2A48;

//----- (100476C0) --------------------------------------------------------
unk1E214 *__thiscall meth_unk1E214_init(unk1E214 *this) {
  this->field_1C = 1;
  this->field_20 = 0;
  this->field_24 = 0;
  this->field_28 = 0;
  this->field_2C = -1;
  this->field_30 = 0;
  this->field_34 = 0;
  this->field_38 = 0;
  this->field_3C = 0;
  this->field_40 = 0;
  this->field_44 = 1065185444;
  this->field_48 = 0;
  this->field_4A = 0;
  this->field_4C = 0;
  `eh vector constructor iterator'(
    this->vectorUnk,
    0x438u,
    3,
    (void (__thiscall *)(void *))meth_unk00438_init,
    (void (__thiscall *)(void *))meth_unk00438_deinit);
  this->field_3804 = 0;
  this->field_3808 = 0;
  this->field_380C = 0;
  this->field_3810 = 0;
  this->field_3814 = 0;
  this->field_3818 = 0;
  this->field_381C = 0;
  this->field_3820 = 0;
  this->field_3824 = 0;
  this->field_3828 = 0;
  this->field_382C = 0;
  this->field_3830 = 0;
  this->field_3834 = 0;
  this->field_3836 = 0;
  meth_unk1A5E0_init(&this->field_3838);
  this->field_3838.field_1A99C[28] = 0;
  this->lpVtbl = &gUnk1E214Vtbl1;
  this->field_4 = 0;
  this->field_8 = 0;
  this->field_C = 0;
  this->field_14 = 0;
  this->field_18 = 0;
  this->field_2AA4 = 0;
  this->field_2AA8 = 0;
  this->field_2AAC = 0;
  this->field_128 = 0;
  this->field_2970 = 0;
  this->field_2974 = 0;
  this->field_2968 = 0;
  this->field_296C = 0;
  memset(this->field_2904, 0, sizeof(this->field_2904));
  memset(this->field_2978, 0, sizeof(this->field_2978));
  memset(this->field_2A40, 0xFFu, sizeof(this->field_2A40));
  memset(this->field_12A, 0xFFu, sizeof(this->field_12A));
  memset(this->field_60, 0, sizeof(this->field_60));
  memset(this->field_283C, 0, sizeof(this->field_283C));
  this->field_2AB4[0] = 0;
  memset(&this->field_2AB4[1], 0, 0x30u);
  this->field_2AE6 = 0;
  this->field_2AE8 = 0;
  this->field_2AEC = 1;
  memset(this->field_2AF0, 0xFFu, sizeof(this->field_2AF0));
  this->field_2B54 = 1;
  this->field_2B58 = 0;
  this->field_10 = 0;
  return this;
}

//----- (100478A0) --------------------------------------------------------
unk1E214 *__thiscall meth_1E214_0(unk1E214 *this, char a2) {
  meth_unk1E214_100478C0(this);
  if ((a2 & 1) != 0)
    operator delete(this);
  return this;
}

//----- (100478C0) --------------------------------------------------------
void __thiscall meth_unk1E214_100478C0(unk1E214 *this) {
  this->lpVtbl = &gUnk1E214Vtbl1;
  meth_unk1A5E0_1005B8F0(&this->field_3838);
  `eh vector destructor iterator'(this->vectorUnk, 0x438u, 3, (void (__thiscall *)(void *))meth_unk00438_deinit);
}

//----- (10047930) --------------------------------------------------------
int __thiscall meth_unk1E214_7(unk1E214 *this) {
  __int16 v1; // ax

  v1 = this->field_3838.field_1A99C[28];
  if (v1 >= 0)
    graphics_1005F5A0((__int64)*(float *)&this->field_3C,
                      (__int64)*(float *)&this->field_40,
                      word_100AB568[12 * v1],
                      &dword_100AB56C[6 * v1],
                      dword_100AB57C[6 * v1]);
  return 1;
}
// 100AB568: using guessed type __int16 word_100AB568[];

//----- (10047980) --------------------------------------------------------
int __thiscall meth_unk1E214_6(unk1E214 *this, int *a2) {
  graphics_1005F5A0((__int64)*(float *)&this->field_3C,
                    (__int64)*(float *)&this->field_40,
                    this->field_3838.field_1A99C[28],
                    a2,
                    dword_100AB57C[6 * (__int16)this->field_3838.field_1A99C[28]]);
  return 1;
}

//----- (100479D0) --------------------------------------------------------
int __thiscall meth_unk1E214_5(unk1E214 *this, int a2, int a3) {
  int v4; // [esp+Ch] [ebp+Ch]

  graphics_1005F5A0(a3, v4, a2, &dword_100AB56C[6 * a2], dword_100AB57C[6 * a2]);
  return 1;
}

//----- (10047A10) --------------------------------------------------------
int __thiscall meth_unk1E214_4(unk1E214 *this) {
  int v2; // eax
  int v3; // esi

  if (this->field_296C) {
    v2 = this->field_128;
    v3 = this->last;
    this->field_3838.field_1A99C[28] = *(_WORD *)&this->field_2A40[2 * v2];
    this->lpVtbl->meth6(this, (int *)(16 * v2 + v3));
  } else {
    this->lpVtbl->meth7(this);
  }
  return 1;
}

//----- (10047A60) --------------------------------------------------------
int __thiscall meth_unk1E214_8(unk1E214 *this) {
  int v2;  // eax
  int v4;  // eax
  int v5;  // ecx
  int v6;  // ecx
  BOOL v7; // edx
  int v8;  // ecx
  int v9;  // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax

  v2 = this->field_1C;
  if ((v2 & 8) != 0)
    return 0;
  if ((v2 & 0x10) == 0) {
    if ((v2 & 0x80000) == 0 || sub_1003E080()) {
      if ((this->field_1C & 0x80000) != 0 && sub_1003E080()) {
        v13 = this->field_1C;
        LOBYTE(v13) = v13 | 0x22;
        this->field_1C = v13;
        return 1;
      }
    } else {
      this->field_1C &= 0xFFF7FFFD;
    }
    v4 = **(_DWORD **)&SrcStr[8];
    if (dword_100AB448 > **(_DWORD **)&SrcStr[8] || dword_100AB450 < v4 ||
        (v5 = *(_DWORD *)(*(_DWORD *)&SrcStr[8] + 4), dword_100AB44C > v5) || dword_100AB454 < v5) {
      if (dword_100AB418 > v4 || dword_100AB420 < v4 ||
          (v8 = *(_DWORD *)(*(_DWORD *)&SrcStr[8] + 4), dword_100AB41C > v8) ||
          dword_100AB424 < v8) {
        if (dword_100AB428 > v4 || dword_100AB430 < v4 ||
            (v9 = *(_DWORD *)(*(_DWORD *)&SrcStr[8] + 4), dword_100AB42C > v9) ||
            dword_100AB434 < v9) {
          v6 = 0;
          v7 = word_10AA286C + dword_100AB44C + 18 * word_10AA286C ==
               word_10AA2870 + dword_100AB44C + 18 * word_10AA2870;
        } else {
          v6 = 1;
          v7 = 0;
        }
      } else {
        v6 = 1;
        v7 = 0;
      }
    } else {
      v6 = 1;
      v7 = 0;
    }
    ++word_10AA2870;
    dword_10AA284C = v6;
    if (this->field_50 <= **(_DWORD **)&SrcStr[8] && this->field_58 >= **(_DWORD **)&SrcStr[8] &&
            (v10 = *(_DWORD *)(*(_DWORD *)&SrcStr[8] + 4), *(_DWORD *)this->gap54 <= v10) &&
            *(_DWORD *)this->gap5C >= v10 ||
        v7) {
      if (v7) {
        if (dword_10AA33D0[0] || dword_10AA33D4 || dword_10AA33D8)
          return 1;
        if (dword_10AA33DC)
          return 1;
      }
      v11 = this->field_1C;
      if ((v11 & 0x40000) != 0) {
        if (gUnk54Ptr->field_2C || gUnk54Ptr->field_30) {
          v11 |= 0x80002u;
        LABEL_47:
          this->field_1C = v11;
          LOBYTE(v11) = v11 | 0x20;
          this->field_1C = v11;
          return 1;
        }
      } else {
        if (!dword_10AA285C && (dword_10AA2AF0 || dword_10AA2CF0) || sub_1003E080()) {
          v11 = this->field_1C;
          LOBYTE(v11) = v11 | 2;
          goto LABEL_47;
        }
        v11 = this->field_1C;
      }
      LOBYTE(v11) = v11 & 0xFD;
      goto LABEL_47;
    }
    v12 = this->field_1C;
    LOBYTE(v12) = v12 & 0xDD;
    this->field_1C = v12;
    return 0;
  }
  if (word_10AA286C == word_10AA2870) {
    word_10AA286C += word_100AB3DC;
    meth_unk00348_100484F0(this->field_2AE8->field_64);
  }
  ++word_10AA2870;
  return 0;
}
// 100AB3DC: using guessed type __int16 word_100AB3DC;
// 100AB418: using guessed type int dword_100AB418;
// 100AB41C: using guessed type int dword_100AB41C;
// 100AB420: using guessed type int dword_100AB420;
// 100AB424: using guessed type int dword_100AB424;
// 100AB428: using guessed type int dword_100AB428;
// 100AB42C: using guessed type int dword_100AB42C;
// 100AB430: using guessed type int dword_100AB430;
// 100AB434: using guessed type int dword_100AB434;
// 100AB448: using guessed type int dword_100AB448;
// 100AB44C: using guessed type int dword_100AB44C;
// 100AB450: using guessed type int dword_100AB450;
// 100AB454: using guessed type int dword_100AB454;
// 10AA284C: using guessed type int dword_10AA284C;
// 10AA285C: using guessed type int dword_10AA285C;
// 10AA286C: using guessed type __int16 word_10AA286C;
// 10AA2870: using guessed type __int16 word_10AA2870;
// 10AA2AF0: using guessed type int dword_10AA2AF0;
// 10AA2CF0: using guessed type int dword_10AA2CF0;
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33D4: using guessed type int dword_10AA33D4;
// 10AA33D8: using guessed type int dword_10AA33D8;
// 10AA33DC: using guessed type int dword_10AA33DC;

//----- (10047CB0) --------------------------------------------------------
int __thiscall meth_unk1E214_9(unk1E214 *this, int a2) {
  double v2;  // st7
  int v3;     // edx
  int result; // eax

  v2 = (*(float *)&this->field_3820 - *(float *)&this->field_381C) / (double)a2;
  v3 = this->field_40;
  this->field_30 = this->field_3C;
  this->field_38 = this->field_44;
  this->field_34 = v3;
  result = 1;
  *(float *)&this->field_3824 = v2;
  return result;
}

//----- (10047CE0) --------------------------------------------------------
double __thiscall meth_unk1E214_10(unk1E214 *this, int a2) {
  return (double)(a2 * a2) * *(float *)&this->field_3824 * 0.5 * 0.001;
}

//----- (10047D10) --------------------------------------------------------
int __thiscall meth_unk1E214_11(unk1E214 *this) {
  int result; // eax
  int v2;     // edx

  result = 1;
  this->field_3C = this->field_30;
  this->field_40 = this->field_34;
  v2 = this->field_38;
  this->field_3818 = 1;
  this->field_44 = v2;
  return result;
}

//----- (10047D30) --------------------------------------------------------
int __thiscall meth_unk1E214_12(unk1E214 *this) {
  int v2;     // edi
  int v3;     // ebp
  int v4;     // eax
  int v5;     // ecx
  int v6;     // edx
  int v7;     // eax
  char v8;    // al
  double v9;  // st7
  double v10; // st7
  char v11;   // al
  double v12; // st7
  double v13; // st7

  v2 = 0;
  v3 = 0;
  if (!this->field_3818)
    return 1;
  v4 = getTicks();
  if (this->field_3828 <= 0)
    this->field_3828 = v4;
  v5 = v4 - this->field_3828;
  v6 = this->field_382C;
  this->field_3828 = v4;
  v7 = this->field_3804;
  this->field_382C = v5 + v6;
  if (!v7)
    goto LABEL_12;
  v8 = this->field_380C;
  if (v8 == -1) {
    v10 = *(float *)&this->field_30 - this->lpVtbl->meth10(this, this->field_382C);
    *(float *)&this->field_3C = v10;
    if (v10 <= *(float *)&this->field_3810) {
      v2 = 1;
      this->field_3C = this->field_3810;
    }
    goto LABEL_13;
  }
  if (v8) {
    if (v8 == 1) {
      v9 = this->lpVtbl->meth10(this, this->field_382C) + *(float *)&this->field_30;
      *(float *)&this->field_3C = v9;
      if (v9 >= *(float *)&this->field_3810) {
        v2 = 1;
        this->field_3C = this->field_3810;
      }
    }
  } else {
  LABEL_12:
    v2 = 1;
  }
  if (!this->field_3808)
    goto LABEL_21;
LABEL_13:
  v11 = HIBYTE(this->field_380C);
  if (v11 == -1) {
    v13 = *(float *)&this->field_34 - this->lpVtbl->meth10(this, this->field_382C);
    *(float *)&this->field_40 = v13;
    if (v13 <= *(float *)&this->field_3814) {
      v3 = 1;
      this->field_40 = this->field_3814;
    }
    goto LABEL_22;
  }
  if (v11) {
    if (v11 == 1) {
      v12 = this->lpVtbl->meth10(this, this->field_382C) + *(float *)&this->field_34;
      *(float *)&this->field_40 = v12;
      if (v12 >= *(float *)&this->field_3814) {
        v3 = 1;
        this->field_40 = this->field_3814;
      }
    }
  } else {
  LABEL_21:
    v3 = 1;
  }
LABEL_22:
  if (v2 && v3) {
    this->field_382C = 0;
    this->field_3818 = 0;
  }
  return 1;
}

//----- (10047EB0) --------------------------------------------------------
__int16 __thiscall meth_unk1E214_13(int this, const char *a2, int a3, char a4, _DWORD *a5) {
  void(__thiscall * *v6)(_DWORD); // ebx
  int v7;                         // ecx
  __int64 v8;                     // rax
  __int16 v9;                     // cx
  __int16 result;                 // ax

  v6 = *(void(__thiscall ***)(_DWORD))(this + 11100);
  strcpy((char *)(this + 11109), a2);
  *(_DWORD *)(this + 11104) |= a3;
  *(_BYTE *)(this + 11108) = a4;
  *(_WORD *)(this + 12152) = 0;
  *(_WORD *)(this + 12136) = 0;
  *(_WORD *)(this + 12134) = 0;
  *(_DWORD *)(this + 12160) = *a5;
  *(_DWORD *)(this + 12168) = a5[2];
  *(_DWORD *)(this + 12140) = *(_DWORD *)(this + 60);
  *(_DWORD *)(this + 12144) = *(_DWORD *)(this + 64);
  *(_DWORD *)(this + 12148) = 0;
  *(_DWORD *)(this + 12156) = 0;
  v7 = this + 11100;
  if (a4 == 3)
    v6[2](v7);
  else
    v6[1](v7);
  if ((a3 & 1) != 0)
    v6[10](this + 11100);
  v8 = (__int64)*(float *)(this + 64);
  *(_DWORD *)(this + 84) = v8;
  *(_DWORD *)(this + 80) = *a5;
  v9 = *(_WORD *)(this + 12136);
  *(_DWORD *)(this + 88) = a5[2];
  *(_DWORD *)(this + 92) = v9 + (_DWORD)v8;
  result = *(_WORD *)(this + 12134);
  *(_WORD *)(this + 72) = result;
  *(_WORD *)(this + 74) = v9;
  return result;
}

//----- (10047FB0) --------------------------------------------------------
__int16 __thiscall meth_unk1E214_14(
    unk1E214 *this, int a2, int flags, int a4, int a5, int a6, int a7, int a8, __int16 a9) {
  int v9;         // edx
  int v10;        // eax
  __int16 result; // ax

  this->field_2AE8 = (unk000C8 *)a2;
  v9 = this->field_24;
  this->field_1C |= a5;
  v10 = this->field_28;
  this->field_24 = a6 | v9;
  this->field_28 = a7 | v10;
  this->field_2968 = a8;
  this->field_40 = a4;
  result = a9;
  this->field_3C = flags;
  *(_WORD *)this->field_2A40 = a9;
  this->field_3838.field_1A99C[28] = a9;
  return result;
}

//----- (10048010) --------------------------------------------------------
int __thiscall meth_unk1E214_2(unk1E214 *this) {
  int v1;     // eax
  int result; // eax

  if ((this->field_28 & 1) == 0)
    return 1;
  v1 = this->field_1C;
  if ((v1 & 0x100000) != 0) {
    if (this != (unk1E214 *)0xFFFFD49B) {
      (*(void(__thiscall **)(char *))(*(_DWORD *)this->vectorUnk + 16))(this->vectorUnk);
      return 1;
    }
    return 1;
  }
  if ((v1 & 0x200000) != 0)
    return 1;
  result = this->lpVtbl->meth4(this);
  if (result)
    return 1;
  return result;
}

//----- (10048060) --------------------------------------------------------
int __thiscall meth_unk1E214_15(unk1E214 *this) {
  int result; // eax

  if (dword_10AA29C0 && (result = 1, *(_DWORD *)(*(_DWORD *)(dword_10AA29C0 + 10984) + 112) == 1)) {
    if (this != (unk1E214 *)dword_10AA29C0) {
      dword_10AA2858 = 1;
      return result;
    }
  } else {
    dword_10AA2858 = 0;
  }
  return 0;
}
// 10AA2858: using guessed type int dword_10AA2858;
// 10AA29C0: using guessed type int dword_10AA29C0;

//----- (100480A0) --------------------------------------------------------
int __thiscall meth_unk1E214_1(unk1E214 *this) {
  int v2;     // eax
  int v3;     // ecx
  int v4;     // edx
  int v5;     // eax
  __int16 v6; // ax
  int v7;     // ebx
  int v8;     // edx
  __int16 v9; // ax
  int v11;    // edx
  int v12;    // eax

  if (this->field_2968) {
    v2 = getTicks();
    v3 = v2 - this->field_2970;
    v4 = this->field_2974;
    this->field_2970 = v2;
    v5 = this->field_296C;
    this->field_2974 = v3 + v4;
    if (v5) {
      v6 = this->field_128;
      if (this->field_2974 > *(_DWORD *)&this->field_2978[4 * v6]) {
        v7 = this->field_1C;
        v8 = this->field_3838.field_18;
        this->field_2974 = 0;
        v9 = v6 + 1;
        this->field_3838.field_18 = v8 | 0x100;
        this->field_1C = v7 | 0x100;
        this->field_128 = v9;
        if (*(int *)&this->field_2978[4 * v9] <= 0) {
          this->field_128 = 0;
          return 1;
        }
      }
    } else if (this->field_2974 > 60) {
      v11 = this->field_1C;
      v12 = this->field_3838.field_18;
      this->field_2974 = 0;
      this->field_1C = v11 | 0x100;
      this->field_3838.field_18 = v12 | 0x100;
    }
  }
  return 1;
}

//----- (10048180) --------------------------------------------------------
int __thiscall meth_unk1E214_3(unk1E214 *this) {
  unk1E214Vtbl *v2;        // edi
  int(__cdecl * v3)(int);  // eax
  int v4;                  // eax
  int result;              // eax
  int v6;                  // ecx
  int (*v7)();             // eax
  int v8;                  // eax
  int(__cdecl * v9)(int);  // eax
  int v10;                 // ebp
  WORD *v11;               // edi
  unk1E214 *v12;           // eax
  unk000C8 *v13;           // eax
  unk1E214 *v14;           // ecx
  int v15;                 // ecx
  unk1E214 *v16;           // eax
  int v17;                 // eax
  int(__cdecl * v18)(int); // eax
  __int16 v19;             // [esp+10h] [ebp-8h]
  unk1E214Vtbl *v20;       // [esp+14h] [ebp-4h]

  v19 = this->field_128;
  if ((this->field_1C & 0x10) != 0 ||
      (v2 = this->lpVtbl, v20 = this->lpVtbl, this->lpVtbl->meth15(this))) {
    this->lpVtbl->meth2(this);
    return 1;
  }
  if (this->field_3818)
    v2->meth12(this);
  v2->meth1(this);
  v3 = this->field_4;
  if (!v3)
    goto LABEL_9;
  v4 = v3((int)this);
  if (v4 == -2)
    return 1;
  if (v4 == -1)
    return 0;
LABEL_9:
  if (!v2->meth8(this) || dword_10AA28D8) {
    v17 = this->field_1C;
    if ((v17 & 0x400000) != 0)
      this->field_3838.field_1A99C[28] = *(_WORD *)this->field_2A40;
    if ((v17 & 4) != 0 || (v17 & 0x20000) != 0) {
      v18 = this->field_C;
      if (v18)
        v18((int)this);
    } else {
      this->field_128 = 0;
      if ((v17 & 0x100000) != 0 && (v17 & 0x10) == 0 && this->field_C) {
        this->field_3838.field_1A99C[28] = 3;
        this->vectorUnk[8] = 1;
        v2->meth2(this);
        return 1;
      }
    }
    goto LABEL_44;
  }
  v6 = this->field_1C;
  if ((v6 & 0x400000) != 0 && (gUnk54Ptr->field_2C || gUnk54Ptr->field_30))
    this->field_3838.field_1A99C[28] = *(_WORD *)&this->field_2A40[2];
  if ((v6 & 2) == 0) {
    v9 = this->field_C;
    if (v9)
      v9((int)this);
  LABEL_28:
    if ((this->field_1C & 0x10000) != 0 && (__int16)this->field_2AB4[0] > 0) {
      v10 = 0;
      v11 = &this->field_2AB4[1];
      do {
        v12 = this->field_2AE8->field_64->field_18[(__int16)*v11];
        v12->field_1C |= 0x20000u;
        this->field_2AE8->field_64->field_18[(__int16)*v11]->field_128 = v19;
        this->field_2AE8->field_64->field_18[(__int16)*v11]->field_2974 = 0;
        this->field_2AE8->field_64->field_18[(__int16)*v11]->field_2970 = 0;
        v13 = this->field_2AE8;
        this->field_58 += v13->field_64->field_18[(__int16)*v11]->field_48;
        v14 = v13->field_64->field_18[(__int16)*v11];
        v14->lpVtbl->meth3(v14);
        v15 = (__int16)*v11++;
        v16 = this->field_2AE8->field_64->field_18[v15];
        ++v10;
        v16->field_1C &= 0xFFFDFFFF;
      } while (v10 < (__int16)this->field_2AB4[0]);
      v20->meth2(this);
      return 1;
    }
  LABEL_44:
    v2->meth2(this);
    return 1;
  }
  v7 = this->field_8;
  if (!v7) {
  LABEL_25:
    v8 = this->field_1C;
    LOBYTE(v8) = v8 & 0xFD;
    this->field_1C = v8;
    goto LABEL_28;
  }
  if ((char *)v7 == (char *)sub_10043760) {
    sub_10072AF0(2, 0x200020u);
    dword_10AA2854 = 2;
  } else if (v7 != sub_10042CF0) {
    sub_10072AF0(1, 0x200020u);
    dword_10AA2854 = 1;
  }
  result = ((int(__cdecl *)(unk1E214 *))this->field_8)(this);
  if (result) {
    if (this->field_8 == sub_10042CF0) {
      sub_10072AF0(1, 0x200020u);
      dword_10AA2854 = 1;
    }
    dword_10AA33E4 = 0;
    goto LABEL_25;
  }
  return result;
}
// 100482F3: conditional instruction was optimized away because of 'ax.2>=1'
// 10043760: using guessed type int __cdecl sub_10043760(int);
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA28D8: using guessed type int dword_10AA28D8;
// 10AA33E4: using guessed type int dword_10AA33E4;

//----- (10048470) --------------------------------------------------------
unk00348 *__thiscall meth_unk00348_10048470(unk00348 *this) {
  this->field_10 = 0;
  this->field_14 = 0;
  this->flags_338 = 0;
  this->field_33C = 0.0;
  this->lpVtbl = &gUnk00348Vtbl;
  this->field_4 = 0;
  this->field_8 = 0;
  *((_DWORD *)&this->field_8 + 1) = 0;
  memset(this->field_18, 0, 0x320u);
  this->field_340 = 0;
  this->last = 0;
  return this;
}

//----- (100484C0) --------------------------------------------------------
unk00348 *__thiscall meth_unk00348_0(unk00348 *this, char a2) {
  meth_unk00348_100484E0(this);
  if ((a2 & 1) != 0)
    operator delete(this);
  return this;
}

//----- (100484E0) --------------------------------------------------------
void __thiscall meth_unk00348_100484E0(unk00348 *this) {
  this->lpVtbl = &gUnk00348Vtbl;
}

//----- (100484F0) --------------------------------------------------------
int __thiscall meth_unk00348_100484F0(unk00348 *this) {
  __int16 v1; // ax

  v1 = word_10AA286C;
  if (word_10AA286C >= (int)LOWORD(this->last)) {
    v1 = 0;
  LABEL_5:
    word_10AA286C = v1;
    goto LABEL_6;
  }
  if (word_10AA286C < 0) {
    v1 = LOWORD(this->last) - 1;
    goto LABEL_5;
  }
LABEL_6:
  HIWORD(this->last) = v1;
  return 1;
}
// 10AA286C: using guessed type __int16 word_10AA286C;

//----- (10048530) --------------------------------------------------------
int __thiscall meth_unk00348_1(unk00348 *this) {
  int v2;                         // ebp
  void (*v3)(void);               // eax
  void (*v4)(void);               // eax
  unk1E214 *v5;                   // esi
  int(__cdecl * v6)(unk1E214 *);  // eax
  int v7;                         // eax
  int(__cdecl * v8)(int);         // eax
  int v9;                         // eax
  int v10;                        // edi
  WORD *v11;                      // ebp
  unk1E214 *v12;                  // ecx
  int(__cdecl * v13)(unk1E214 *); // eax
  int v14;                        // eax
  unk000C8 *v15;                  // eax
  void (*v16)(void);              // ebx
  int result;                     // eax
  unk1E214 **v18;                 // [esp+10h] [ebp-8h]
  int v19;                        // [esp+14h] [ebp-4h]

  v2 = 0;
  v3 = (void (*)(void))this->field_4;
  if (v3)
    v3();
  v4 = (void (*)(void)) * ((_DWORD *)&this->field_8 + 1);
  if (v4)
    v4();
  word_10AA2870 = 0;
  meth_unk00348_100484F0(this);
  v19 = 0;
  if (this->field_14) {
    v18 = this->field_18;
    while (1) {
      v5 = *v18;
      if (!*v18)
        break;
      v6 = (int(__cdecl *)(unk1E214 *))v5->field_14;
      if (v6) {
        if (!v6(*v18))
          break;
      }
      v7 = v5->field_1C;
      if ((v7 & 0x1000) == 0)
        goto LABEL_18;
      v5->lpVtbl->meth1(v5);
      v8 = v5->field_4;
      if (v8)
        v8((int)v5);
      if ((v5->field_1C & 0x10) != 0) {
        if (word_10AA286C == word_10AA2870) {
          word_10AA286C += word_100AB3DC;
          meth_unk00348_100484F0(this);
        }
        ++word_10AA2870;
      }
      v7 = v5->field_1C;
      if ((v7 & 0x10) != 0) {
      LABEL_18:
        if ((v7 & 0x800) == 0) {
          if (!v5->lpVtbl->meth3(v5)) {
              byte_10AA28A8 = 0;
              break;
          }
          v9 = v5->field_1C;
          if ((v9 & 0x6000) != 0 && (this->field_340->field_BC == v2 || (v9 & 0x4000) != 0) &&
              (__int16)v5->field_2AB4[0] > 0) {
              v10 = 0;
              v11 = &v5->field_2AB4[1];
              do {
                  v12 = this->field_18[(__int16)*v11];
                  v12->lpVtbl->meth3(v12);
                  ++v10;
                  ++v11;
              } while (v10 < (__int16)v5->field_2AB4[0]);
              v2 = v19;
          }
          v13 = (int(__cdecl *)(unk1E214 *))v5->field_18;
          if (v13 && !v13(v5))
              break;
          v14 = v5->field_1C;
          if ((v14 & 0x20) != 0 && !dword_10AA28D8 && (v14 & 0x2000) != 0) {
              v15 = this->field_340;
              if (v15->field_BC != v2) {
                  v15->field_BC = v2;
                  memset(&this->field_340->field_6C, 0, 0x50u);
                  this->field_340->field_6C = 1;
              }
          }
        }
      }
      v19 = ++v2;
      ++v18;
      if (v2 >= this->field_14)
        goto LABEL_36;
    }
    result = 0;
  } else {
  LABEL_36:
    v16 = (void (*)(void))this->field_8;
    if (v16)
      v16();
    result = 1;
  }
  return result;
}
// 10048633: conditional instruction was optimized away because of 'ax.2>=1'
// 100AB3DC: using guessed type __int16 word_100AB3DC;
// 10AA286C: using guessed type __int16 word_10AA286C;
// 10AA2870: using guessed type __int16 word_10AA2870;
// 10AA28A8: using guessed type char byte_10AA28A8;
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (10048710) --------------------------------------------------------
unk000C8 *__thiscall meth_unk000C8_10048710(unk000C8 *this) {
  int v2;         // esi
  unk06594 *v3;   // eax
  unk06594 *v4;   // eax
  unk06594 *v5;   // eax
  unk06594 *v6;   // eax
  int v7;         // edi
  const char *v8; // eax
  const char *v9; // eax

  v2 = 0;
  this->field_8 = 0;
  this->field_C = 0;
  this->field_10 = 0;
  *(&this->field_10 + 1) = 0;
  this->field_64 = 0;
  this->field_68 = 1;
  this->field_BC = 0;
  this->lpVtbl = &gUnkC8Vtbl;
  v3 = (unk06594 *)operator new(0x6594u);
  if (v3)
    v4 = meth_unk06594_init(v3);
  else
    v4 = 0;
  this->field_C0 = v4;
  if (!v4)
    sub_1003E260(6);
  v5 = (unk06594 *)operator new(0x6594u);
  if (v5)
    v6 = meth_unk06594_init(v5);
  else
    v6 = 0;
  this->last = v6;
  if (!v6)
    sub_1003E260(6);
  v7 = 0;
  do {
    v8 = GetStringWithIndex(0xBEu);
    sprintf((char *const)&this->field_C0->field_4 + v2, v8, v7);
    v9 = GetStringWithIndex(0xBEu);
    sprintf((char *const)&this->last->field_4 + v2, v9, v7);
    v2 += 260;
    ++v7;
  } while (v2 < 26000);
  memset(&this->field_6C, 0, 0x50u);
  return this;
}

//----- (10048850) --------------------------------------------------------
void *__thiscall meth_unk000C8_0(void *Block, char a2) {
  meth_unk000C8_10048870((unk000C8 *)Block);
  if ((a2 & 1) != 0)
    operator delete(Block);
  return Block;
}

//----- (10048870) --------------------------------------------------------
int __thiscall meth_unk000C8_10048870(unk000C8 *this) {
  unk06594 *v2; // ecx
  int result;   // eax
  unk06594 *v4; // ecx

  v2 = this->field_C0;
  this->lpVtbl = &gUnkC8Vtbl;
  if (v2)
    result = v2->lpVtbl->meth0(v2, 1);
  v4 = this->last;
  this->field_C0 = 0;
  if (v4)
    result = v4->lpVtbl->meth0(v4, 1);
  this->last = 0;
  return result;
}

//----- (100488B0) --------------------------------------------------------
int __thiscall meth_unk000C8_1(unk000C8 *this) {
  this->lpVtbl->meth8(this);
  return 1;
}

//----- (100488C0) --------------------------------------------------------
int __thiscall meth_unk000C8_2(unk000C8 *this) {
  int v3;       // ecx
  unk000C8 *v4; // esi
  float *v5;    // ecx
  float v6;     // edx

  if (((int)this->field_8 & 0x10) != 0)
    return 0;
  v3 = 0;
  if (gPlayMusic == 2) {
    v3 = 1;
  } else {
    if (!(dword_10AA2A4C % 120))
      v3 = 1;
    ++dword_10AA2A4C;
  }
  if (v3)
    dword_10AA2A34 = pm_sub_10002910() - 2;
  v4 = gUnkC8Ptr1;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  v5 = *(float **)&gUnkC8Ptr6->field_14[0]->gap20[788];
  v5[15] = (float)gUnk54Ptr->field_0;
  v6 = *v5;
  v5[16] = (float)*(int *)gUnk54Ptr->gap4;
  (*(void (**)(void))(LODWORD(v6) + 12))();
  gUnkC8Ptr1 = v4;
  if (!dword_10AA2874)
    this->lpVtbl->meth5(this);
  return 1;
}
// 100940A4: using guessed type int gPlayMusic;
// 10AA2874: using guessed type int dword_10AA2874;
// 10AA2A34: using guessed type int dword_10AA2A34;
// 10AA2A4C: using guessed type int dword_10AA2A4C;

//----- (10048960) --------------------------------------------------------
HRESULT __thiscall meth_unk000C8_5(unk000C8 *this) {
  LPDIRECTDRAWSURFACE v1;                               // esi
  IDirectDrawSurfaceVtbl *v2;                           // edi
  HRESULT(__stdcall * v3)(IDirectDrawSurface *, DWORD); // edi
  HRESULT result;                                       // eax

  v1 = gUnk334->ddCapsFlags->? ;
  v2 = v1->lpVtbl;
  v1->lpVtbl->Flip(v1, gUnk334->ddCapsFlags->lpDirectDrawSurface1, 1);
  v3 = v2->GetFlipStatus;
  for (result = v3(v1, 2); result; result = v3(v1, 2))
    Sleep(0);
  return result;
}

//----- (100489A0) --------------------------------------------------------
int __thiscall meth_unk000C8_3(unk000C8 *this) {
  unk000C8Vtbl *v2; // eax
  unk000C8 *v4;     // edi
  int v5;           // ebx
  bool v6;          // zf
  int *v7;          // edi
  unk00348 *v8;     // eax
  unk000C8Vtbl *v9; // edi

  if (!this->field_68) {
    sub_1003E310();
    meth_BossRallyConfig_WriteConfigFile(&gConfig, gBossRallyCfgPath);
    v2 = this->lpVtbl;
    *(&this->field_10 + 1) = 0;
    v2->meth6(this, 0);
    return 0;
  }
  this->lpVtbl->meth1(this);
  v4 = gUnkC8Ptr1;
  gUnkC8Ptr1 = gUnkC8Ptr6;
  sub_10060260();
  gUnkC8Ptr1 = v4;
  sub_1005FFB0();
  v5 = 0;
  g_unkC8AreSamePtr = gUnkC8Ptr1 == gUnkC8Ptr6;
  v6 = this->field_10 == 0;
  *(&this->field_10 + 1) = 0;
  if (!v6) {
    v7 = &this->field_6C;
    do {
      v8 = (unk00348 *)*(v7 - 22);
      this->field_64 = v8;
      if (!v8)
        return 0;
      *(&this->field_10 + 1) = v5;
      if (*v7) {
        if (!this->field_64->lpVtbl->meth1(this->field_64))
          return 0;
      }
      ++v5;
      ++v7;
    } while (v5 < this->field_10);
  }
  v9 = this->lpVtbl;
  this->lpVtbl->meth2(this);
  if (!this->field_68) {
    sub_1003E310();
    meth_BossRallyConfig_WriteConfigFile(&gConfig, gBossRallyCfgPath);
    *(&this->field_10 + 1) = 0;
    v9->meth6(this, 0);
    return 0;
  }
  return 1;
}
// 10AA2868: using guessed type int g_unkC8AreSamePtr;

//----- (10048AA0) --------------------------------------------------------
int __thiscall meth_unk000C8_7(unk000C8 *this) {
  unk00348 **v1; // ebp
  unk00348 *v2;  // ebx
  int v3;        // edi
  unk1E214 **v4; // esi
  int result;    // eax
  int v6;        // [esp+8h] [ebp-8h]

  v6 = 0;
  if (this->field_10) {
    v1 = this->field_14;
    do {
      v2 = *v1;
      v3 = 200;
      v4 = (*v1)->field_18;
      do {
        if (*v4)
          (*v4)->lpVtbl->meth0(*v4, 1);
        *v4++ = 0;
        --v3;
      } while (v3);
      if (v2)
        v2->lpVtbl->meth0(v2, 1);
      result = v6 + 1;
      ++v1;
      ++v6;
    } while (v6 < this->field_10);
  }
  word_10AA286C = 0;
  return result;
}
// 10AA286C: using guessed type __int16 word_10AA286C;

//----- (10048B20) --------------------------------------------------------
void __thiscall meth_unk000C8_6(unk000C8 *this, int a1) {
  int waitTicksAdd;            // esi
  DWORD waitTicks;             // esi
  char **ppFilepath;           // esi
  Iostream_init *iostreamInit; // esi

  waitTicksAdd = 0;
  if (dword_10AA2854 == 2) {
    waitTicksAdd = 0x11DA;
  } else if (dword_10AA2854 == 3) {
    waitTicksAdd = 0x604;
  }
  waitTicks = getTicks() + waitTicksAdd;
  while (getTicks() < waitTicks)
    Sleep(0);
  if (!a1) {
    dword_100AC300 = 0;
    gUnkC8Ptr1 = 0;
    graphics_1005F530();
    ppFilepath = &gImagesWork1aBmFilepath;
    do {
      if (*ppFilepath)
        operator delete(*ppFilepath);
      *ppFilepath = 0;
      ppFilepath += 0x1D;
    } while ((int)ppFilepath < (int)&unk_10AA2584);
  }
  if (gUnkC8Ptr11) {
    gUnkC8Ptr11->lpVtbl->meth7(gUnkC8Ptr11);
    if (gUnkC8Ptr11)
      gUnkC8Ptr11->lpVtbl->meth0(gUnkC8Ptr11, 1);
    gUnkC8Ptr11 = 0;
    dword_10A9CFFC = 0;
  }
  if (gUnkC8Ptr12) {
    gUnkC8Ptr12->lpVtbl->meth7(gUnkC8Ptr12);
    if (gUnkC8Ptr12)
      gUnkC8Ptr12->lpVtbl->meth0(gUnkC8Ptr12, 1);
    gUnkC8Ptr12 = 0;
    dword_10AA29AC = 0;
  }
  if (gUnkC8Ptr13) {
    gUnkC8Ptr13->lpVtbl->meth7(gUnkC8Ptr13);
    if (gUnkC8Ptr13)
      gUnkC8Ptr13->lpVtbl->meth0(gUnkC8Ptr13, 1);
    gUnkC8Ptr13 = 0;
  }
  if (gUnkC8Ptr14) {
    gUnkC8Ptr14->lpVtbl->meth7(gUnkC8Ptr14);
    if (gUnkC8Ptr14)
      gUnkC8Ptr14->lpVtbl->meth0(gUnkC8Ptr14, 1);
    gUnkC8Ptr14 = 0;
    dword_10AA29B4 = 0;
  }
  if (gUnkC8Ptr4) {
    gUnkC8Ptr4->lpVtbl->meth7(gUnkC8Ptr4);
    if (gUnkC8Ptr4)
      gUnkC8Ptr4->lpVtbl->meth0(gUnkC8Ptr4, 1);
    gUnkC8Ptr4 = 0;
  }
  if (gUnkC8Ptr5) {
    gUnkC8Ptr5->lpVtbl->meth7(gUnkC8Ptr5);
    if (gUnkC8Ptr5)
      gUnkC8Ptr5->lpVtbl->meth0(gUnkC8Ptr5, 1);
    gUnkC8Ptr5 = 0;
  }
  if (gUnkC8Ptr15) {
    gUnkC8Ptr15->lpVtbl->meth7(gUnkC8Ptr15);
    if (gUnkC8Ptr15)
      gUnkC8Ptr15->lpVtbl->meth0(gUnkC8Ptr15, 1);
    gUnkC8Ptr15 = 0;
    dword_10AA29A8 = 0;
  }
  if (gUnkC8Ptr16) {
    gUnkC8Ptr16->lpVtbl->meth7(gUnkC8Ptr16);
    if (gUnkC8Ptr16)
      gUnkC8Ptr16->lpVtbl->meth0(gUnkC8Ptr16, 1);
    gUnkC8Ptr16 = 0;
  }
  if (gUnkC8Ptr17) {
    gUnkC8Ptr17->lpVtbl->meth7(gUnkC8Ptr17);
    if (gUnkC8Ptr17)
      gUnkC8Ptr17->lpVtbl->meth0(gUnkC8Ptr17, 1);
    gUnkC8Ptr17 = 0;
    dword_10AA29C0 = 0;
    dword_10AA29CC = 0;
    dword_10AA29F4 = 0;
  }
  if (gUnkC8Ptr18) {
    gUnkC8Ptr18->lpVtbl->meth7(gUnkC8Ptr18);
    if (gUnkC8Ptr18)
      gUnkC8Ptr18->lpVtbl->meth0(gUnkC8Ptr18, 1);
    gUnkC8Ptr18 = 0;
    dword_10AA29B0 = 0;
  }
  if (gUnkC8Ptr19) {
    gUnkC8Ptr19->lpVtbl->meth7(gUnkC8Ptr19);
    if (gUnkC8Ptr19)
      gUnkC8Ptr19->lpVtbl->meth0(gUnkC8Ptr19, 1);
    gUnkC8Ptr19 = 0;
  }
  if (gUnkC8Ptr20) {
    gUnkC8Ptr20->lpVtbl->meth7(gUnkC8Ptr20);
    if (gUnkC8Ptr20)
      gUnkC8Ptr20->lpVtbl->meth0(gUnkC8Ptr20, 1);
    gUnkC8Ptr20 = 0;
  }
  if (gUnkC8Ptr21) {
    gUnkC8Ptr21->lpVtbl->meth7(gUnkC8Ptr21);
    if (gUnkC8Ptr21)
      gUnkC8Ptr21->lpVtbl->meth0(gUnkC8Ptr21, 1);
    gUnkC8Ptr21 = 0;
  }
  if (gUnkC8Ptr22) {
    gUnkC8Ptr22->lpVtbl->meth7(gUnkC8Ptr22);
    if (gUnkC8Ptr22)
      gUnkC8Ptr22->lpVtbl->meth0(gUnkC8Ptr22, 1);
    gUnkC8Ptr22 = 0;
  }
  if (gUnkC8Ptr11) {
    gUnkC8Ptr11->lpVtbl->meth7(gUnkC8Ptr11);
    if (gUnkC8Ptr11)
      gUnkC8Ptr11->lpVtbl->meth0(gUnkC8Ptr11, 1);
    gUnkC8Ptr11 = 0;
  }
  if (gUnkC8Ptr24) {
    gUnkC8Ptr24->lpVtbl->meth7(gUnkC8Ptr24);
    if (gUnkC8Ptr24)
      gUnkC8Ptr24->lpVtbl->meth0(gUnkC8Ptr24, 1);
    gUnkC8Ptr24 = 0;
  }
  if (gUnkC8Ptr10) {
    gUnkC8Ptr10->lpVtbl->meth7(gUnkC8Ptr10);
    if (gUnkC8Ptr10)
      gUnkC8Ptr10->lpVtbl->meth0(gUnkC8Ptr10, 1);
    gUnkC8Ptr10 = 0;
    dword_10AA29B8 = 0;
    dword_10AA29D8 = 0;
    dword_10AA29D4 = 0;
    dword_10AA2880 = 0;
  }
  if (gUnkC8Ptr25) {
    gUnkC8Ptr25->lpVtbl->meth7(gUnkC8Ptr25);
    if (gUnkC8Ptr25)
      gUnkC8Ptr25->lpVtbl->meth0(gUnkC8Ptr25, 1);
    gUnkC8Ptr25 = 0;
    dword_10AA29B8 = 0;
  }
  if (gUnkC8Ptr26) {
    gUnkC8Ptr26->lpVtbl->meth7(gUnkC8Ptr26);
    if (gUnkC8Ptr26)
      gUnkC8Ptr26->lpVtbl->meth0(gUnkC8Ptr26, 1);
    gUnkC8Ptr26 = 0;
  }
  if (gUnkC8Ptr27) {
    gUnkC8Ptr27->lpVtbl->meth7(gUnkC8Ptr27);
    if (gUnkC8Ptr27)
      gUnkC8Ptr27->lpVtbl->meth0(gUnkC8Ptr27, 1);
    gUnkC8Ptr27 = 0;
    dword_10AA29E4 = 0;
    gUnk1E214 = 0;
  }
  if (gUnkC8Ptr28) {
    gUnkC8Ptr28->lpVtbl->meth7(gUnkC8Ptr28);
    if (gUnkC8Ptr28)
      gUnkC8Ptr28->lpVtbl->meth0(gUnkC8Ptr28, 1);
    gUnkC8Ptr28 = 0;
    dword_10AA29A8 = 0;
  }
  if (gUnkC8Ptr29) {
    gUnkC8Ptr29->lpVtbl->meth7(gUnkC8Ptr29);
    if (gUnkC8Ptr29)
      gUnkC8Ptr29->lpVtbl->meth0(gUnkC8Ptr29, 1);
    gUnkC8Ptr29 = 0;
    dword_10AA29E8 = 0;
  }
  if (gUnkC8Ptr30) {
    gUnkC8Ptr30->lpVtbl->meth7(gUnkC8Ptr30);
    if (gUnkC8Ptr30)
      gUnkC8Ptr30->lpVtbl->meth0(gUnkC8Ptr30, 1);
    gUnkC8Ptr30 = 0;
  }
  if (gUnkC8Ptr31) {
    gUnkC8Ptr31->lpVtbl->meth7(gUnkC8Ptr31);
    if (gUnkC8Ptr31)
      gUnkC8Ptr31->lpVtbl->meth0(gUnkC8Ptr31, 1);
    gUnkC8Ptr31 = 0;
  }
  if (gUnkC8Ptr32) {
    gUnkC8Ptr32->lpVtbl->meth7(gUnkC8Ptr32);
    if (gUnkC8Ptr32)
      gUnkC8Ptr32->lpVtbl->meth0(gUnkC8Ptr32, 1);
    gUnkC8Ptr32 = 0;
  }
  if (g_unkC8Ptr0) {
    g_unkC8Ptr0->lpVtbl->meth7(g_unkC8Ptr0);
    if (g_unkC8Ptr0)
      g_unkC8Ptr0->lpVtbl->meth0(g_unkC8Ptr0, 1);
    g_unkC8Ptr0 = 0;
    dword_10AA29C4 = 0;
    dword_10AA29D0 = 0;
  }
  if (gUnkC8Ptr7) {
    gUnkC8Ptr7->lpVtbl->meth7(gUnkC8Ptr7);
    if (gUnkC8Ptr7)
      gUnkC8Ptr7->lpVtbl->meth0(gUnkC8Ptr7, 1);
    gUnkC8Ptr7 = 0;
  }
  if (gUnkC8Ptr8) {
    gUnkC8Ptr8->lpVtbl->meth7(gUnkC8Ptr8);
    if (gUnkC8Ptr8)
      gUnkC8Ptr8->lpVtbl->meth0(gUnkC8Ptr8, 1);
    gUnkC8Ptr8 = 0;
  }
  if (gUnkC8Ptr33) {
    gUnkC8Ptr33->lpVtbl->meth7(gUnkC8Ptr33);
    if (gUnkC8Ptr33)
      gUnkC8Ptr33->lpVtbl->meth0(gUnkC8Ptr33, 1);
    gUnkC8Ptr33 = 0;
  }
  if (gUnkC8Ptr3) {
    gUnkC8Ptr3->lpVtbl->meth7(gUnkC8Ptr3);
    if (gUnkC8Ptr3)
      gUnkC8Ptr3->lpVtbl->meth0(gUnkC8Ptr3, 1);
    gUnkC8Ptr3 = 0;
  }
  if (gUnkC8Ptr2) {
    gUnkC8Ptr2->lpVtbl->meth7(gUnkC8Ptr2);
    if (gUnkC8Ptr2)
      gUnkC8Ptr2->lpVtbl->meth0(gUnkC8Ptr2, 1);
    gUnkC8Ptr2 = 0;
  }
  if (gUnkC8Ptr34) {
    gUnkC8Ptr34->lpVtbl->meth7(gUnkC8Ptr34);
    if (gUnkC8Ptr34)
      gUnkC8Ptr34->lpVtbl->meth0(gUnkC8Ptr34, 1);
    gUnkC8Ptr34 = 0;
  }
  if (gUnkC8Ptr35) {
    gUnkC8Ptr35->lpVtbl->meth7(gUnkC8Ptr35);
    if (gUnkC8Ptr35)
      gUnkC8Ptr35->lpVtbl->meth0(gUnkC8Ptr35, 1);
    gUnkC8Ptr35 = 0;
  }
  if (gUnkC8Ptr36) {
    gUnkC8Ptr36->lpVtbl->meth7(gUnkC8Ptr36);
    if (gUnkC8Ptr36)
      gUnkC8Ptr36->lpVtbl->meth0(gUnkC8Ptr36, 1);
    gUnkC8Ptr36 = 0;
    gUnk1E214Ptr0 = 0;
  }
  if (gUnkC8Ptr37) {
    gUnkC8Ptr37->lpVtbl->meth7(gUnkC8Ptr37);
    if (gUnkC8Ptr37)
      gUnkC8Ptr37->lpVtbl->meth0(gUnkC8Ptr37, 1);
    gUnkC8Ptr37 = 0;
    dword_10AA29EC = 0;
  }
  if (gUnkC8Ptr9) {
    gUnkC8Ptr9->lpVtbl->meth7(gUnkC8Ptr9);
    if (gUnkC8Ptr9)
      gUnkC8Ptr9->lpVtbl->meth0(gUnkC8Ptr9, 1);
    gUnkC8Ptr9 = 0;
  }
  if (!a1) {
    if (gUnkC8Ptr6) {
      gUnkC8Ptr6->lpVtbl->meth7(gUnkC8Ptr6);
      if (gUnkC8Ptr6)
        gUnkC8Ptr6->lpVtbl->meth0(gUnkC8Ptr6, 1);
      gUnkC8Ptr6 = 0;
    }
    iostreamInit = gIostreamInit;
    if (gIostreamInit) {
      meth_DebugPrint(gIostreamInit);
      operator delete(iostreamInit);
      gIostreamInit = 0;
    }
    sub_1005FCF0();
  }
}
// 100AC300: using guessed type int dword_100AC300;
// 10A9CFFC: using guessed type int dword_10A9CFFC;
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA2880: using guessed type int dword_10AA2880;
// 10AA29A8: using guessed type int dword_10AA29A8;
// 10AA29AC: using guessed type int dword_10AA29AC;
// 10AA29B0: using guessed type int dword_10AA29B0;
// 10AA29B4: using guessed type int dword_10AA29B4;
// 10AA29B8: using guessed type int dword_10AA29B8;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29C4: using guessed type int dword_10AA29C4;
// 10AA29CC: using guessed type int dword_10AA29CC;
// 10AA29D0: using guessed type int dword_10AA29D0;
// 10AA29D4: using guessed type int dword_10AA29D4;
// 10AA29D8: using guessed type int dword_10AA29D8;
// 10AA29E4: using guessed type int dword_10AA29E4;
// 10AA29E8: using guessed type int dword_10AA29E8;
// 10AA29EC: using guessed type int dword_10AA29EC;
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (100491B0) --------------------------------------------------------
int __cdecl s_unk000C8_100491B0(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // ebp
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // ebp
  unk1E214 *v8;      // eax
  unk1E214 *v9;      // ebp
  unk1E214Vtbl *v10; // ebx
  LPCSTR v11;        // eax
  unk1E214 *v12;     // eax
  unk1E214 *v13;     // ebp
  unk1E214Vtbl *v14; // ebx
  LPCSTR v15;        // eax
  WORD v16;          // dx
  unk1E214 *v17;     // eax
  unk1E214 *v18;     // ebp
  unk1E214 *v19;     // eax
  unk1E214 *v20;     // ebp
  unk1E214Vtbl *v21; // ebx
  LPCSTR v22;        // eax
  WORD v23;          // dx
  unk1E214 *v24;     // eax
  unk1E214 *v25;     // ebp
  unk1E214 *v26;     // eax
  unk1E214 *v27;     // ebp
  unk1E214Vtbl *v28; // ebx
  LPCSTR v29;        // eax
  WORD v30;          // dx
  unk1E214 *v31;     // eax
  unk1E214 *v32;     // ebp
  unk1E214 *v33;     // eax
  unk1E214 *v34;     // ebp
  unk1E214Vtbl *v35; // ebx
  LPCSTR v36;        // eax
  WORD v37;          // dx
  unk1E214 *v38;     // eax
  unk1E214 *v39;     // ebp
  unk1E214 *v40;     // eax
  unk1E214 *v41;     // ebp
  unk1E214Vtbl *v42; // ebx
  LPCSTR v43;        // eax
  WORD v44;          // dx
  unk1E214 *v45;     // eax
  unk1E214 *v46;     // ebp
  unk1E214 *v47;     // eax
  unk1E214 *v48;     // ebp
  unk1E214Vtbl *v49; // ebx
  LPCSTR v50;        // eax
  WORD v51;          // dx
  unk1E214 *v52;     // eax
  unk1E214 *v53;     // ebp
  unk1E214Vtbl *v54; // ebx
  LPCSTR v55;        // eax
  unk1E214 *v56;     // eax
  unk1E214 *v57;     // ebp
  unk1E214Vtbl *v58; // ebx
  int result;        // eax
  float v60;         // [esp+268h] [ebp-34h]
  float v61;         // [esp+268h] [ebp-34h]
  float v62;         // [esp+268h] [ebp-34h]
  float v63;         // [esp+268h] [ebp-34h]
  float v64;         // [esp+268h] [ebp-34h]
  float v65;         // [esp+268h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 125.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  *(_DWORD *)&v3->gap20[788] = v7;
  if (!v7)
    sub_1003E260(4);
  v7->lpVtbl->meth14(v7, a1, 0, 0.0, 9, 2, 5, 0, 1);
  v8 = (unk1E214 *)operator new(0x1E214u);
  if (v8)
    v9 = meth_unk1E214_init(v8);
  else
    v9 = 0;
  v3->field_18[v3->field_14] = v9;
  if (!v9)
    sub_1003E260(4);
  v10 = v9->lpVtbl;
  v9->lpVtbl->meth14(v9, a1, v3->flags_338, 10.0, 0x100009, 2, 5, 1, -1);
  v9->field_3838.field_1A99C[28] = 3;
  v11 = GetStringWithIndex(1u);
  v10->meth13(v9, v11, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v12 = (unk1E214 *)operator new(0x1E214u);
  if (v12)
    v13 = meth_unk1E214_init(v12);
  else
    v13 = 0;
  v3->field_18[v3->field_14] = v13;
  if (!v13)
    sub_1003E260(4);
  v14 = v13->lpVtbl;
  v13->lpVtbl->meth14(v13, a1, v3->flags_338, v3->field_33C, 0x102001, 2, 5, 1, -1);
  v13->field_C = sub_10047360;
  v13->field_8 = (int(__cdecl *)())meth_10045900;
  v13->field_3838.field_1A99C[28] = 3;
  v15 = GetStringWithIndex(2u);
  v14->meth13(v13, v15, 1, 1, &dword_100AB448);
  v16 = v3->field_14;
  ++v13->field_2AB4[0];
  v13->field_2AB4[1] = v16 + 1;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v17 = (unk1E214 *)operator new(0x1E214u);
  if (v17)
    v18 = meth_unk1E214_init(v17);
  else
    v18 = 0;
  v3->field_18[v3->field_14] = v18;
  if (!v18)
    sub_1003E260(4);
  v18->lpVtbl->meth14(v18, a1, 1117782016, 46.0, 2057, 2, 5, 0, 6);
  ++v3->field_14;
  v19 = (unk1E214 *)operator new(0x1E214u);
  if (v19)
    v20 = meth_unk1E214_init(v19);
  else
    v20 = 0;
  v3->field_18[v3->field_14] = v20;
  if (!v20)
    sub_1003E260(4);
  v21 = v20->lpVtbl;
  v60 = v3->field_33C - -19.0;
  v20->lpVtbl->meth14(v20, a1, v3->flags_338, v60, 1056769, 2, 5, 1, -1);
  v20->field_C = sub_100474B0;
  v20->field_8 = sub_10043BF0;
  v20->field_3838.field_1A99C[28] = 3;
  v22 = GetStringWithIndex(3u);
  v21->meth13(v20, v22, 1, 1, &dword_100AB448);
  v23 = v3->field_14;
  ++v20->field_2AB4[0];
  v20->field_2AB4[1] = v23 + 1;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v24 = (unk1E214 *)operator new(0x1E214u);
  if (v24)
    v25 = meth_unk1E214_init(v24);
  else
    v25 = 0;
  v3->field_18[v3->field_14] = v25;
  if (!v25)
    sub_1003E260(4);
  v25->lpVtbl->meth14(v25, a1, 1117782016, 46.0, 2057, 2, 5, 0, 7);
  ++v3->field_14;
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v3->field_18[v3->field_14] = v27;
  if (!v27)
    sub_1003E260(4);
  v28 = v27->lpVtbl;
  v61 = v3->field_33C - -38.0;
  v27->lpVtbl->meth14(v27, a1, v3->flags_338, v61, 1056769, 2, 5, 1, -1);
  v27->field_C = sub_100474B0;
  v27->field_8 = sub_10044B90;
  v27->field_3838.field_1A99C[28] = 3;
  v29 = GetStringWithIndex(4u);
  v28->meth13(v27, v29, 1, 1, &dword_100AB448);
  v30 = v3->field_14;
  ++v27->field_2AB4[0];
  v27->field_2AB4[1] = v30 + 1;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v31 = (unk1E214 *)operator new(0x1E214u);
  if (v31)
    v32 = meth_unk1E214_init(v31);
  else
    v32 = 0;
  v3->field_18[v3->field_14] = v32;
  if (!v32)
    sub_1003E260(4);
  v32->lpVtbl->meth14(v32, a1, 1117782016, 46.0, 2057, 2, 5, 0, 8);
  ++v3->field_14;
  v33 = (unk1E214 *)operator new(0x1E214u);
  if (v33)
    v34 = meth_unk1E214_init(v33);
  else
    v34 = 0;
  v3->field_18[v3->field_14] = v34;
  if (!v34)
    sub_1003E260(4);
  v35 = v34->lpVtbl;
  v62 = v3->field_33C - -57.0;
  v34->lpVtbl->meth14(v34, a1, v3->flags_338, v62, 1056769, 2, 5, 1, -1);
  v34->field_C = sub_10047360;
  v34->field_8 = (int(__cdecl *)())meth_10044F50;
  v34->field_3838.field_1A99C[28] = 3;
  v36 = GetStringWithIndex(5u);
  v35->meth13(v34, v36, 1, 1, &dword_100AB448);
  v37 = v3->field_14;
  ++v34->field_2AB4[0];
  v34->field_2AB4[1] = v37 + 1;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v38 = (unk1E214 *)operator new(0x1E214u);
  if (v38)
    v39 = meth_unk1E214_init(v38);
  else
    v39 = 0;
  v3->field_18[v3->field_14] = v39;
  if (!v39)
    sub_1003E260(4);
  v39->lpVtbl->meth14(v39, a1, 1117782016, 46.0, 2057, 2, 5, 0, 10);
  ++v3->field_14;
  v40 = (unk1E214 *)operator new(0x1E214u);
  if (v40)
    v41 = meth_unk1E214_init(v40);
  else
    v41 = 0;
  v3->field_18[v3->field_14] = v41;
  if (!v41)
    sub_1003E260(4);
  v42 = v41->lpVtbl;
  v63 = v3->field_33C - -76.0;
  v41->lpVtbl->meth14(v41, a1, v3->flags_338, v63, 1056769, 2, 5, 1, -1);
  v41->field_C = sub_100474B0;
  v41->field_8 = sub_100451E0;
  v41->field_3838.field_1A99C[28] = 3;
  v43 = GetStringWithIndex(6u);
  v42->meth13(v41, v43, 1, 1, &dword_100AB448);
  v44 = v3->field_14;
  ++v41->field_2AB4[0];
  v41->field_2AB4[1] = v44 + 1;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v45 = (unk1E214 *)operator new(0x1E214u);
  if (v45)
    v46 = meth_unk1E214_init(v45);
  else
    v46 = 0;
  v3->field_18[v3->field_14] = v46;
  if (!v46)
    sub_1003E260(4);
  v46->lpVtbl->meth14(v46, a1, 1117782016, 46.0, 2057, 2, 5, 0, 9);
  ++v3->field_14;
  v47 = (unk1E214 *)operator new(0x1E214u);
  if (v47)
    v48 = meth_unk1E214_init(v47);
  else
    v48 = 0;
  v3->field_18[v3->field_14] = v48;
  if (!v48)
    sub_1003E260(4);
  v49 = v48->lpVtbl;
  v64 = v3->field_33C - -95.0;
  v48->lpVtbl->meth14(v48, a1, v3->flags_338, v64, 1056769, 2, 5, 1, -1);
  v48->field_C = sub_100475F0;
  v48->field_8 = (int(__cdecl *)())sub_10041970;
  v48->field_3838.field_1A99C[28] = 3;
  v50 = GetStringWithIndex(7u);
  v49->meth13(v48, v50, 1, 1, &dword_100AB448);
  v51 = v3->field_14;
  ++v48->field_2AB4[0];
  v48->field_2AB4[1] = v51 + 1;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v52 = (unk1E214 *)operator new(0x1E214u);
  if (v52)
    v53 = meth_unk1E214_init(v52);
  else
    v53 = 0;
  v3->field_18[v3->field_14] = v53;
  if (!v53)
    sub_1003E260(4);
  v54 = v53->lpVtbl;
  v65 = v3->field_33C - -114.0;
  v53->lpVtbl->meth14(v53, a1, v3->flags_338, v65, 1056769, 2, 5, 1, -1);
  v53->field_C = sub_100474B0;
  v53->field_8 = (int(__cdecl *)())sub_10046170;
  v53->field_3838.field_1A99C[28] = 3;
  v55 = GetStringWithIndex(8u);
  v54->meth13(v53, v55, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v56 = (unk1E214 *)operator new(0x1E214u);
  if (v56)
    v57 = meth_unk1E214_init(v56);
  else
    v57 = 0;
  v3->field_18[v3->field_14] = v57;
  if (!v57)
    sub_1003E260(4);
  v58 = v57->lpVtbl;
  v57->lpVtbl->meth14(v57, a1, v3->flags_338, 29.0, 1048585, 2, 5, 1, -1);
  v57->field_3838.field_1A99C[28] = 3;
  v58->meth13(v57, asc_100AD300, 1, 1, &unk_100AB558);
  result = 1;
  dword_10A9DBD0 = v3->field_14++;
  return result;
}
// 100AB448: using guessed type int dword_100AB448;
// 10A9DBD0: using guessed type int dword_10A9DBD0;

//----- (10049C20) --------------------------------------------------------
int __cdecl s_unk000C8_10049C20(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  float v19;         // [esp+88h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v5->lpVtbl->meth14)(v5, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v7->lpVtbl->meth14)(v7, a1, v3->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0xEu);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v11->lpVtbl->meth14)(v11, a1, v3->flags_338, LODWORD(v3->field_33C), 1056769, 2, 5, 1, -1);
  v11->field_C = sub_10047360;
  v11->field_8 = (int(__cdecl *)())sub_10043710;
  v11->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0xFu);
  v12->meth13(v11, v13, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v19 = v3->field_33C - -114.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v15->lpVtbl->meth14)(v15, a1, v3->flags_338, LODWORD(v19), 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = (int(__cdecl *)())sub_100464A0;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0xCu);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;

//----- (10049F40) --------------------------------------------------------
int __cdecl s_unk000C8_10049F40(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  float v19;         // [esp+88h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v5->lpVtbl->meth14)(v5, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v7->lpVtbl->meth14)(v7, a1, v3->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x10u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB438);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v11->lpVtbl->meth14)(v11, a1, v3->flags_338, LODWORD(v3->field_33C), 1056769, 2, 5, 1, -1);
  v11->field_C = sub_10047360;
  v11->field_8 = (int(__cdecl *)())sub_10046F60;
  v11->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0x11u);
  v12->meth13(v11, v13, 1, 1, &dword_100AB448);
  dword_10AA29B0 = (int)v11;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v19 = v3->field_33C - -19.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v15->lpVtbl->meth14)(v15, a1, v3->flags_338, LODWORD(v19), 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_10046FC0;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0x12u);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29B0: using guessed type int dword_10AA29B0;

//----- (1004A260) --------------------------------------------------------
int __cdecl s_unk000C8_1004A260(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  float v19;         // [esp+88h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v5->lpVtbl->meth14)(v5, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v7->lpVtbl->meth14)(v7, a1, v3->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x10u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB438);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v11->lpVtbl->meth14)(v11, a1, v3->flags_338, LODWORD(v3->field_33C), 1056769, 2, 5, 1, -1);
  v11->field_C = sub_10047360;
  v11->field_8 = (int(__cdecl *)())sub_10046FD0;
  v11->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0x11u);
  v12->meth13(v11, v13, 1, 1, &dword_100AB448);
  dword_10AA29B0 = (int)v11;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v19 = v3->field_33C - -19.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v15->lpVtbl->meth14)(v15, a1, v3->flags_338, LODWORD(v19), 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_10047050;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0x12u);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29B0: using guessed type int dword_10AA29B0;

//----- (1004A580) --------------------------------------------------------
int __cdecl s_unk000C8_1004A580(int a1) {
  unsigned __int16 v2; // ax
  unk00348 *v3;        // eax
  unk00348 *v4;        // esi
  unk1E214 *v5;        // eax
  unk1E214 *v6;        // ebp
  unk1E214 *v7;        // eax
  unk1E214 *v8;        // ebp
  unk1E214Vtbl *v9;    // ebx
  LPCSTR v10;          // eax
  unk1E214 *v11;       // eax
  unk1E214 *v12;       // ebp
  unk1E214Vtbl *v13;   // ebx
  LPCSTR v14;          // eax
  unk1E214 *v15;       // eax
  unk1E214 *v16;       // ebp
  unk1E214Vtbl *v17;   // ebx
  LPCSTR v18;          // eax
  unk1E214 *v19;       // eax
  unk1E214 *v20;       // ebp
  unk1E214Vtbl *v21;   // ebx
  LPCSTR v22;          // eax
  unk1E214 *v23;       // eax
  unk1E214 *v24;       // ebp
  unk1E214Vtbl *v25;   // ebx
  LPCSTR v26;          // eax
  unk1E214 *v27;       // eax
  unk1E214 *v28;       // ebp
  unk1E214Vtbl *v29;   // ebx
  LPCSTR v30;          // eax
  unk1E214 *v31;       // eax
  unk1E214 *v32;       // ebp
  unk1E214Vtbl *v33;   // ebx
  LPCSTR v34;          // eax
  unk1E214 *v35;       // eax
  unk1E214 *v36;       // ebp
  unk1E214Vtbl *v37;   // ebx
  LPCSTR v38;          // eax
  unk1E214 *v39;       // eax
  unk1E214 *v40;       // ebp
  int v41;             // ebx
  __int64 v42;         // rax
  unk1E214 *v43;       // eax
  unk1E214 *v44;       // ebp
  int v45;             // ebx
  unk1E214 *v46;       // eax
  unk1E214 *v47;       // ebp
  __int64 v48;         // rax
  unk1E214 *v49;       // eax
  unk1E214 *v50;       // ebp
  unk1E214 *v51;       // eax
  unk1E214 *v52;       // ebp
  unk1E214 *v53;       // eax
  unk1E214 *v54;       // ebp
  WORD v55;            // ax
  unk1E214 *v56;       // eax
  unk1E214 *v57;       // ebp
  unk1E214Vtbl *v58;   // ebx
  unk1E214 *v59;       // eax
  unk1E214 *v60;       // ebp
  WORD v61;            // ax
  unk1E214 *v62;       // eax
  unk1E214 *v63;       // ebp
  unk1E214Vtbl *v64;   // ebx
  unk1E214 *v65;       // eax
  unk1E214 *v66;       // ebp
  WORD v67;            // ax
  unk1E214 *v68;       // eax
  unk1E214 *v69;       // ebp
  unk1E214Vtbl *v70;   // ebx
  unk1E214 *v71;       // eax
  unk1E214 *v72;       // ebp
  WORD v73;            // ax
  unk1E214 *v74;       // eax
  unk1E214 *v75;       // ebp
  unk1E214Vtbl *v76;   // ebx
  float v78;           // [esp+34Ch] [ebp-40h]
  float v79;           // [esp+34Ch] [ebp-40h]
  float v80;           // [esp+34Ch] [ebp-40h]
  float v81;           // [esp+34Ch] [ebp-40h]
  float v82;           // [esp+34Ch] [ebp-40h]
  float v83;           // [esp+34Ch] [ebp-40h]
  float v84;           // [esp+374h] [ebp-18h]
  int v85;             // [esp+378h] [ebp-14h]
  float v86;           // [esp+390h] [ebp+4h]
  float v87;           // [esp+390h] [ebp+4h]

  v2 = *(_WORD *)(a1 + 16);
  *(_WORD *)(a1 + 18) = 0;
  *(_DWORD *)(a1 + 4 * v2 + 108) = 1;
  v3 = (unk00348 *)operator new(0x348u);
  if (v3)
    v4 = meth_unk00348_10048470(v3);
  else
    v4 = 0;
  *(_DWORD *)(a1 + 4 * *(unsigned __int16 *)(a1 + 16) + 20) = v4;
  if (!v4)
    sub_1003E260(4);
  ++*(_WORD *)(a1 + 16);
  v4->field_340 = (unk000C8 *)a1;
  v4->field_10 = 0;
  v4->flags_338 = 1128464384;
  v4->field_33C = 111.0;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v4->field_18[v4->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v6->lpVtbl->meth14)(v6, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v4->field_14;
  v7 = (unk1E214 *)operator new(0x1E214u);
  if (v7)
    v8 = meth_unk1E214_init(v7);
  else
    v8 = 0;
  v4->field_18[v4->field_14] = v8;
  if (!v8)
    sub_1003E260(4);
  v9 = v8->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v8->lpVtbl->meth14)(
      v8, a1, v4->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v8->field_3838.field_1A99C[28] = 3;
  v10 = GetStringWithIndex(0x13u);
  v9->meth13(v8, v10, 1, 1, &unk_100AB508);
  ++v4->field_14;
  v11 = (unk1E214 *)operator new(0x1E214u);
  if (v11)
    v12 = meth_unk1E214_init(v11);
  else
    v12 = 0;
  v4->field_18[v4->field_14] = v12;
  if (!v12)
    sub_1003E260(4);
  v13 = v12->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v12->lpVtbl->meth14)(
      v12, a1, v4->flags_338, LODWORD(v4->field_33C), 1056769, 2, 5, 1, -1);
  v12->field_C = sub_10047360;
  v12->field_8 = sub_10042B30;
  v12->field_3838.field_1A99C[28] = 3;
  v14 = GetStringWithIndex(0x14u);
  v13->meth13(v12, v14, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v15 = (unk1E214 *)operator new(0x1E214u);
  if (v15)
    v16 = meth_unk1E214_init(v15);
  else
    v16 = 0;
  v4->field_18[v4->field_14] = v16;
  if (!v16)
    sub_1003E260(4);
  v17 = v16->lpVtbl;
  v78 = v4->field_33C - -19.0;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v16->lpVtbl->meth14)(
      v16, a1, v4->flags_338, LODWORD(v78), 1056769, 2, 5, 1, -1);
  v16->field_C = sub_10047360;
  v16->field_8 = sub_10042DC0;
  v16->field_3838.field_1A99C[28] = 3;
  v18 = GetStringWithIndex(0x15u);
  v17->meth13(v16, v18, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v19 = (unk1E214 *)operator new(0x1E214u);
  if (v19)
    v20 = meth_unk1E214_init(v19);
  else
    v20 = 0;
  v4->field_18[v4->field_14] = v20;
  if (!v20)
    sub_1003E260(4);
  v21 = v20->lpVtbl;
  v79 = v4->field_33C - -38.0;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v20->lpVtbl->meth14)(
      v20, a1, v4->flags_338, LODWORD(v79), 1056769, 2, 5, 1, -1);
  v20->field_C = sub_10047360;
  v20->field_8 = sub_10042E20;
  v20->field_3838.field_1A99C[28] = 3;
  v22 = GetStringWithIndex(0x16u);
  v21->meth13(v20, v22, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v23 = (unk1E214 *)operator new(0x1E214u);
  if (v23)
    v24 = meth_unk1E214_init(v23);
  else
    v24 = 0;
  v4->field_18[v4->field_14] = v24;
  if (!v24)
    sub_1003E260(4);
  v25 = v24->lpVtbl;
  v80 = v4->field_33C - -57.0;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v24->lpVtbl->meth14)(
      v24, a1, v4->flags_338, LODWORD(v80), 1056769, 2, 5, 1, -1);
  v24->field_C = sub_10047360;
  v24->field_8 = sub_10042C80;
  v24->field_3838.field_1A99C[28] = 3;
  v26 = GetStringWithIndex(0x17u);
  v25->meth13(v24, v26, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v27 = (unk1E214 *)operator new(0x1E214u);
  if (v27)
    v28 = meth_unk1E214_init(v27);
  else
    v28 = 0;
  v4->field_18[v4->field_14] = v28;
  if (!v28)
    sub_1003E260(4);
  v29 = v28->lpVtbl;
  v81 = v4->field_33C - -76.0;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v28->lpVtbl->meth14)(
      v28, a1, v4->flags_338, LODWORD(v81), 1056769, 2, 5, 1, -1);
  v28->field_C = sub_10047360;
  v28->field_8 = sub_10042E80;
  v28->field_3838.field_1A99C[28] = 3;
  v30 = GetStringWithIndex(0x18u);
  v29->meth13(v28, v30, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v31 = (unk1E214 *)operator new(0x1E214u);
  if (v31)
    v32 = meth_unk1E214_init(v31);
  else
    v32 = 0;
  v4->field_18[v4->field_14] = v32;
  if (!v32)
    sub_1003E260(4);
  v33 = v32->lpVtbl;
  v82 = v4->field_33C - -114.0;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v32->lpVtbl->meth14)(
      v32, a1, v4->flags_338, LODWORD(v82), 1056769, 2, 5, 1, -1);
  v32->field_C = sub_10047360;
  v32->field_8 = (int(__cdecl *)())sub_10043760;
  v32->field_3838.field_1A99C[28] = 3;
  v34 = GetStringWithIndex(0x19u);
  v33->meth13(v32, v34, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v4->field_18[v4->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  v83 = v4->field_33C - -133.0;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v36->lpVtbl->meth14)(
      v36, a1, v4->flags_338, LODWORD(v83), 1056769, 2, 5, 1, -1);
  v36->field_C = sub_10047360;
  v36->field_8 = (int(__cdecl *)())sub_100464E0;
  v36->field_3838.field_1A99C[28] = 3;
  v38 = GetStringWithIndex(0xCu);
  v37->meth13(v36, v38, 1, 1, &dword_100AB448);
  dword_10AA29B4 = (int)v36;
  ++v4->field_14;
  ++LOWORD(v4->last);
  v84 = (float)dword_100AB428;
  v86 = (float)dword_100AB42C;
  if (gGameMode == GAME_MODE_0) {
    v39 = (unk1E214 *)operator new(0x1E214u);
    if (v39)
      v40 = meth_unk1E214_init(v39);
    else
      v40 = 0;
    v4->field_18[v4->field_14] = v40;
    if (!v40)
      sub_1003E260(4);
    ((void(__thiscall *)(
        unk1E214 *, int, float, float, int, int, int, int, int))v40->lpVtbl->meth14)(
        v40, a1, COERCE_FLOAT(LODWORD(v84)), COERCE_FLOAT(LODWORD(v86)), 4202497, 2, 5, 1, 120);
    v40->field_C = sub_10047360;
    v40->field_8 = sub_100458E0;
    v41 = (__int64)v86;
    *(_DWORD *)v40->gap54 = v41;
    v42 = (__int64)v84;
    v40->field_50 = v42;
    v40->field_58 = v42 + 127;
    *(_DWORD *)v40->gap5C = v41 + 33;
    v40->field_2968 = 0;
    v86 = v86 - -33.0;
    *(_WORD *)&v40->field_2A40[2] = 121;
    ++v4->field_14;
  }
  v43 = (unk1E214 *)operator new(0x1E214u);
  if (v43)
    v44 = meth_unk1E214_init(v43);
  else
    v44 = 0;
  v4->field_18[v4->field_14] = v44;
  if (!v44)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, float, float, int, int, int, int, int))v44->lpVtbl->meth14)(
      v44, a1, COERCE_FLOAT(LODWORD(v84)), COERCE_FLOAT(LODWORD(v86)), 4202497, 2, 5, 1, 82);
  v44->field_C = sub_10047360;
  v44->field_8 = (int(__cdecl *)())sub_10043FA0;
  v85 = (__int64)v86;
  *(_DWORD *)v44->gap54 = v85;
  v45 = (__int64)v84;
  v44->field_2968 = 0;
  v44->field_50 = v45;
  *(_WORD *)&v44->field_2A40[2] = 83;
  v87 = v86 - -33.0;
  v44->field_58 = v45 + 127;
  *(_DWORD *)v44->gap5C = v85 + 33;
  ++v4->field_14;
  v46 = (unk1E214 *)operator new(0x1E214u);
  if (v46)
    v47 = meth_unk1E214_init(v46);
  else
    v47 = 0;
  v4->field_18[v4->field_14] = v47;
  if (!v47)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, float, float, int, int, int, int, int))v47->lpVtbl->meth14)(
      v47, a1, COERCE_FLOAT(LODWORD(v84)), COERCE_FLOAT(LODWORD(v87)), 4202497, 2, 5, 1, 84);
  v47->field_C = sub_10047360;
  v47->field_8 = sub_100458C0;
  v48 = (__int64)v87;
  *(_DWORD *)v47->gap54 = v48;
  v47->field_50 = v45;
  v47->field_58 = v45 + 127;
  *(_DWORD *)v47->gap5C = v48 + 33;
  v47->field_2968 = 0;
  *(_WORD *)&v47->field_2A40[2] = 85;
  ++v4->field_14;
  v49 = (unk1E214 *)operator new(0x1E214u);
  if (v49)
    v50 = meth_unk1E214_init(v49);
  else
    v50 = 0;
  v4->field_18[v4->field_14] = v50;
  if (!v50)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v50->lpVtbl->meth14)(
      v50, a1, 1114898432, 1131675648, 9, 2, 5, 1, 54);
  ++v4->field_14;
  v51 = (unk1E214 *)operator new(0x1E214u);
  if (v51)
    v52 = meth_unk1E214_init(v51);
  else
    v52 = 0;
  v4->field_18[v4->field_14] = v52;
  if (!v52)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v52->lpVtbl->meth14)(
      v52, a1, 1116864512, 1129709568, 1, 2, 5, 1, 53);
  v52->field_4 = sub_1003E920;
  ++v4->field_14;
  v53 = (unk1E214 *)operator new(0x1E214u);
  if (v53)
    v54 = meth_unk1E214_init(v53);
  else
    v54 = 0;
  v4->field_18[v4->field_14] = v54;
  if (!v54)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v54->lpVtbl->meth14)(
      v54, a1, 1135181824, 1116471296, 1, 2, 5, 1, 11);
  v54->field_4 = sub_1003F720;
  v55 = v4->field_14 + 1;
  ++v54->field_2AB4[0];
  v54->field_2AB4[1] = v55;
  ++v4->field_14;
  v56 = (unk1E214 *)operator new(0x1E214u);
  if (v56)
    v57 = meth_unk1E214_init(v56);
  else
    v57 = 0;
  v4->field_18[v4->field_14] = v57;
  if (!v57)
    sub_1003E260(4);
  v58 = v57->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v57->lpVtbl->meth14)(
      v57, a1, v4->flags_338, 1124663296, 1052673, 2, 5, 1, -1);
  v57->field_4 = sub_1003F760;
  v57->field_3838.field_1A99C[28] = 3;
  v58->meth13(v57, asc_100AD300, 1, 1, &unk_100AB468);
  ++v4->field_14;
  v59 = (unk1E214 *)operator new(0x1E214u);
  if (v59)
    v60 = meth_unk1E214_init(v59);
  else
    v60 = 0;
  v4->field_18[v4->field_14] = v60;
  if (!v60)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v60->lpVtbl->meth14)(
      v60, a1, 1121452032, 1115947008, 1, 2, 5, 1, 25);
  v60->field_4 = sub_10040890;
  v61 = v4->field_14 + 1;
  ++v60->field_2AB4[0];
  v60->field_2AB4[1] = v61;
  ++v4->field_14;
  v62 = (unk1E214 *)operator new(0x1E214u);
  if (v62)
    v63 = meth_unk1E214_init(v62);
  else
    v63 = 0;
  v4->field_18[v4->field_14] = v63;
  if (!v63)
    sub_1003E260(4);
  v64 = v63->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v63->lpVtbl->meth14)(
      v63, a1, v4->flags_338, 1123418112, 1052673, 2, 5, 1, -1);
  v63->field_4 = sub_1003F7F0;
  v63->field_3838.field_1A99C[28] = 3;
  v64->meth13(v63, asc_100AD300, 1, 1, &unk_100AB498);
  ++v4->field_14;
  v65 = (unk1E214 *)operator new(0x1E214u);
  if (v65)
    v66 = meth_unk1E214_init(v65);
  else
    v66 = 0;
  v4->field_18[v4->field_14] = v66;
  if (!v66)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v66->lpVtbl->meth14)(
      v66, a1, 1139671040, 1124139008, 1, 2, 5, 1, 14);
  v66->field_4 = sub_100408B0;
  v67 = v4->field_14 + 1;
  ++v66->field_2AB4[0];
  v66->field_2AB4[1] = v67;
  ++v4->field_14;
  v68 = (unk1E214 *)operator new(0x1E214u);
  if (v68)
    v69 = meth_unk1E214_init(v68);
  else
    v69 = 0;
  v4->field_18[v4->field_14] = v69;
  if (!v69)
    sub_1003E260(4);
  v70 = v69->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v69->lpVtbl->meth14)(
      v69, a1, v4->flags_338, 1127546880, 1052673, 2, 5, 1, -1);
  v69->field_4 = sub_1003F990;
  v69->field_3838.field_1A99C[28] = 3;
  v70->meth13(v69, asc_100AD300, 1, 1, &unk_100AB488);
  ++v4->field_14;
  v71 = (unk1E214 *)operator new(0x1E214u);
  if (v71)
    v72 = meth_unk1E214_init(v71);
  else
    v72 = 0;
  v4->field_18[v4->field_14] = v72;
  if (!v72)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v72->lpVtbl->meth14)(
      v72, a1, 1140621312, 1128792064, 1, 2, 5, 1, 12);
  v72->field_4 = sub_10040870;
  v73 = v4->field_14 + 1;
  ++v72->field_2AB4[0];
  v72->field_2AB4[1] = v73;
  ++v4->field_14;
  v74 = (unk1E214 *)operator new(0x1E214u);
  if (v74)
    v75 = meth_unk1E214_init(v74);
  else
    v75 = 0;
  v4->field_18[v4->field_14] = v75;
  if (!v75)
    sub_1003E260(4);
  v76 = v75->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v75->lpVtbl->meth14)(
      v75, a1, v4->flags_338, 1132658688, 1052673, 2, 5, 1, -1);
  v75->field_4 = sub_1003F860;
  v75->field_3838.field_1A99C[28] = 3;
  v76->meth13(v75, asc_100AD300, 1, 1, &unk_100AB478);
  ++v4->field_14;
  return 1;
}
// 1003E920: using guessed type int __cdecl sub_1003E920(int);
// 1003F720: using guessed type int __cdecl sub_1003F720(int);
// 1003F760: using guessed type int __cdecl sub_1003F760(int);
// 1003F7F0: using guessed type int __cdecl sub_1003F7F0(int);
// 1003F860: using guessed type int __cdecl sub_1003F860(int);
// 1003F990: using guessed type int __cdecl sub_1003F990(int);
// 10040870: using guessed type int __cdecl sub_10040870(int);
// 10040890: using guessed type int __cdecl sub_10040890(int);
// 100408B0: using guessed type int __cdecl sub_100408B0(int);
// 10042B30: using guessed type int sub_10042B30();
// 10042C80: using guessed type int sub_10042C80();
// 10042DC0: using guessed type int sub_10042DC0();
// 10042E20: using guessed type int sub_10042E20();
// 10042E80: using guessed type int sub_10042E80();
// 10043760: using guessed type int __cdecl sub_10043760(int);
// 10043FA0: using guessed type int __cdecl sub_10043FA0(int);
// 100AB428: using guessed type int dword_100AB428;
// 100AB42C: using guessed type int dword_100AB42C;
// 100AB448: using guessed type int dword_100AB448;
// 10AA29B4: using guessed type int dword_10AA29B4;

//----- (1004B430) --------------------------------------------------------
int __cdecl s_unk000C8_1004B430(int a1) {
  unsigned __int16 v1; // ax
  unk00348 *v2;        // eax
  unk00348 *v3;        // esi
  unk1E214 *v4;        // eax
  unk1E214 *v5;        // ebp
  unk1E214 *v6;        // eax
  unk1E214 *v7;        // ebp
  unk1E214Vtbl *v8;    // ebx
  LPCSTR v9;           // eax
  unk1E214 *v10;       // eax
  unk1E214 *v11;       // ebp
  unk1E214Vtbl *v12;   // ebx
  LPCSTR v13;          // eax
  unk1E214 *v14;       // eax
  unk1E214 *v15;       // ebp
  unk1E214Vtbl *v16;   // ebx
  LPCSTR v17;          // eax
  unk1E214 *v18;       // eax
  unk1E214 *v19;       // ebp
  unk1E214Vtbl *v20;   // ebx
  LPCSTR v21;          // eax
  unk1E214 *v22;       // eax
  unk1E214 *v23;       // ebp
  unk1E214Vtbl *v24;   // ebx
  LPCSTR v25;          // eax
  unk1E214 *v26;       // eax
  unk1E214 *v27;       // ebp
  unk1E214 *v28;       // eax
  unk1E214 *v29;       // ebp
  unk1E214Vtbl *v30;   // ebx
  LPCSTR v31;          // eax
  unk1E214 *v32;       // eax
  unk1E214 *v33;       // ebp
  WORD v34;            // ax
  unk1E214 *v35;       // eax
  unk1E214 *v36;       // ebp
  unk1E214Vtbl *v37;   // ebx
  unk1E214 *v38;       // eax
  unk1E214 *v39;       // ebp
  WORD v40;            // ax
  unk1E214 *v41;       // eax
  unk1E214 *v42;       // ebp
  unk1E214Vtbl *v43;   // ebx
  unk1E214 *v44;       // eax
  unk1E214 *v45;       // ebp
  unk1E214Vtbl *v46;   // ebx
  unk1E214 *v47;       // eax
  unk1E214 *v48;       // ebp
  unk1E214Vtbl *v49;   // ebx
  LPCSTR v50;          // eax
  float v52;           // [esp+234h] [ebp-38h]
  float v53;           // [esp+234h] [ebp-38h]
  float v54;           // [esp+234h] [ebp-38h]
  float v55;           // [esp+234h] [ebp-38h]
  float v56;           // [esp+234h] [ebp-38h]
  float v57;           // [esp+25Ch] [ebp-10h]
  float v58;           // [esp+25Ch] [ebp-10h]
  float v59;           // [esp+25Ch] [ebp-10h]
  float v60;           // [esp+25Ch] [ebp-10h]

  v1 = *(_WORD *)(a1 + 16);
  *(_WORD *)(a1 + 18) = 0;
  v57 = 0.0;
  *(_DWORD *)(a1 + 4 * v1 + 108) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  *(_DWORD *)(a1 + 4 * *(unsigned __int16 *)(a1 + 16) + 20) = v3;
  if (!v3)
    sub_1003E260(4);
  ++*(_WORD *)(a1 + 16);
  v3->field_340 = (unk000C8 *)a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v5->lpVtbl->meth14)(v5, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v7->lpVtbl->meth14)(
      v7, a1, v3->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x1Au);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  if (dword_100AC304) {
    v10 = (unk1E214 *)operator new(0x1E214u);
    if (v10)
      v11 = meth_unk1E214_init(v10);
    else
      v11 = 0;
    v3->field_18[v3->field_14] = v11;
    if (!v11)
      sub_1003E260(4);
    v12 = v11->lpVtbl;
    ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))
         v11->lpVtbl->meth14)(v11, a1, v3->flags_338, LODWORD(v3->field_33C), 1056769, 2, 5, 1, -1);
    v11->field_C = sub_100474B0;
    v11->field_8 = sub_10042EE0;
    v11->field_3838.field_1A99C[28] = 3;
    v13 = GetStringWithIndex(0x1Bu);
    v12->meth13(v11, v13, 1, 1, &dword_100AB448);
    ++v3->field_14;
    ++LOWORD(v3->last);
    v57 = 19.0;
  }
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v52 = v57 + v3->field_33C;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v15->lpVtbl->meth14)(
      v15, a1, v3->flags_338, LODWORD(v52), 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_10043180;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0x1Cu);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v58 = v57 - -19.0;
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v3->field_18[v3->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v53 = v58 + v3->field_33C;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v19->lpVtbl->meth14)(
      v19, a1, v3->flags_338, LODWORD(v53), 1056769, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = sub_100430B0;
  v19->field_3838.field_1A99C[28] = 3;
  v21 = GetStringWithIndex(0x1Du);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v59 = v58 - -57.0;
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v3->field_18[v3->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v24 = v23->lpVtbl;
  v54 = v59 + v3->field_33C;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v23->lpVtbl->meth14)(
      v23, a1, v3->flags_338, LODWORD(v54), 1056769, 2, 5, 1, -1);
  v23->field_C = sub_100474B0;
  v23->field_8 = sub_10045110;
  v23->field_3838.field_1A99C[28] = 3;
  v25 = GetStringWithIndex(0x1Eu);
  v24->meth13(v23, v25, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v60 = v59 - -19.0;
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v3->field_18[v3->field_14] = v27;
  if (!v27)
    sub_1003E260(4);
  v55 = v60 + v3->field_33C;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v27->lpVtbl->meth14)(
      v27, a1, v3->flags_338, LODWORD(v55), 1056769, 2, 5, 1, -1);
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v3->field_18[v3->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v30 = v29->lpVtbl;
  v56 = v3->field_33C - -114.0;
  ((void(__thiscall *)(unk1E214 *, int, int, _DWORD, int, int, int, int, int))v29->lpVtbl->meth14)(
      v29, a1, v3->flags_338, LODWORD(v56), 1056769, 2, 5, 1, -1);
  v29->field_C = sub_10047360;
  v29->field_8 = (int(__cdecl *)())sub_10046450;
  v29->field_3838.field_1A99C[28] = 3;
  v31 = GetStringWithIndex(0xCu);
  v30->meth13(v29, v31, 1, 1, &dword_100AB448);
  dword_10AA29AC = (int)v29;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v32 = (unk1E214 *)operator new(0x1E214u);
  if (v32)
    v33 = meth_unk1E214_init(v32);
  else
    v33 = 0;
  v3->field_18[v3->field_14] = v33;
  if (!v33)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v33->lpVtbl->meth14)(
      v33, a1, 1116864512, 1129578496, 1, 2, 5, 1, 22);
  v33->field_4 = sub_100407E0;
  v34 = v3->field_14 + 1;
  ++v33->field_2AB4[0];
  v33->field_2AB4[1] = v34;
  ++v3->field_14;
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v3->field_18[v3->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v36->lpVtbl->meth14)(
      v36, a1, v3->flags_338, 1133084672, 1052673, 2, 5, 1, -1);
  v36->field_4 = sub_1003FE80;
  v36->field_3838.field_1A99C[28] = 3;
  v37->meth13(v36, asc_100AD300, 1, 1, &unk_100AB4B8);
  ++v3->field_14;
  if (dword_100AC304) {
    v38 = (unk1E214 *)operator new(0x1E214u);
    if (v38)
      v39 = meth_unk1E214_init(v38);
    else
      v39 = 0;
    v3->field_18[v3->field_14] = v39;
    if (!v39)
      sub_1003E260(4);
    ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v39->lpVtbl->meth14)(
        v39, a1, 1134723072, 1116733440, 1, 2, 5, 1, 17);
    v39->field_4 = sub_10040730;
    v40 = v3->field_14 + 1;
    ++v39->field_2AB4[0];
    v39->field_2AB4[1] = v40;
    ++v3->field_14;
    v41 = (unk1E214 *)operator new(0x1E214u);
    if (v41)
      v42 = meth_unk1E214_init(v41);
    else
      v42 = 0;
    v3->field_18[v3->field_14] = v42;
    if (!v42)
      sub_1003E260(4);
    v43 = v42->lpVtbl;
    ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v42->lpVtbl->meth14)(
        v42, a1, v3->flags_338, 1125646336, 1052673, 2, 5, 1, -1);
    v42->field_4 = sub_1003FA00;
    v42->field_3838.field_1A99C[28] = 3;
    v43->meth13(v42, asc_100AD300, 1, 1, &unk_100AB4A8);
    ++v3->field_14;
  }
  v44 = (unk1E214 *)operator new(0x1E214u);
  if (v44)
    v45 = meth_unk1E214_init(v44);
  else
    v45 = 0;
  v3->field_18[v3->field_14] = v45;
  if (!v45)
    sub_1003E260(4);
  v46 = v45->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v45->lpVtbl->meth14)(
      v45, a1, 1121189888, 1116209152, 20481, 2, 5, 1, -1);
  v45->field_4 = sub_100408D0;
  v45->field_3838.field_1A99C[28] = 5;
  v46->meth13(v45, ::a1, 1, 3, &unk_100AB458);
  ++v3->field_14;
  v47 = (unk1E214 *)operator new(0x1E214u);
  if (v47)
    v48 = meth_unk1E214_init(v47);
  else
    v48 = 0;
  v3->field_18[v3->field_14] = v48;
  if (!v48)
    sub_1003E260(4);
  v49 = v48->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, int, int, int, int, int, int, int, int))v48->lpVtbl->meth14)(
      v48, a1, 1121189888, 1122369536, 1048577, 2, 5, 1, -1);
  v48->field_3838.field_1A99C[28] = 3;
  v50 = GetStringWithIndex(0x1Du);
  v49->meth13(v48, v50, 1, 1, &unk_100AB458);
  ++v3->field_14;
  return 1;
}
// 1003FA00: using guessed type int __cdecl sub_1003FA00(int);
// 1003FE80: using guessed type int __cdecl sub_1003FE80(int);
// 10040730: using guessed type int __cdecl sub_10040730(int);
// 100407E0: using guessed type int __cdecl sub_100407E0(int);
// 1004B430: using guessed type int __cdecl s_unk000C8_1004B430(int);
// 100AB448: using guessed type int dword_100AB448;
// 100AC304: using guessed type int dword_100AC304;
// 10AA29AC: using guessed type int dword_10AA29AC;

//----- (1004BDC0) --------------------------------------------------------
int __cdecl s_unk000C8_1004BDC0(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // edi
  unk1E214Vtbl *v20; // ebx
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // edi
  unk1E214Vtbl *v24; // ebx
  LPCSTR v25;        // eax
  unk1E214 *v26;     // eax
  unk1E214 *v27;     // edi
  unk1E214Vtbl *v28; // ebx
  LPCSTR v29;        // eax
  unk1E214 *v30;     // eax
  unk1E214 *v31;     // edi
  unk1E214 *v32;     // eax
  unk1E214 *v33;     // edi
  WORD v34;          // ax
  unk1E214 *v35;     // eax
  unk1E214 *v36;     // edi
  unk1E214Vtbl *v37; // ebx
  float v39;         // [esp+188h] [ebp-34h]
  float v40;         // [esp+188h] [ebp-34h]
  float v41;         // [esp+188h] [ebp-34h]
  float v42;         // [esp+188h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(6u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  v11->lpVtbl->meth14(v11, a1, v3->flags_338, v3->field_33C, 1056769, 2, 5, 1, -1);
  v11->field_C = sub_10047360;
  v11->field_8 = sub_100452C0;
  v11->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0x1Fu);
  v12->meth13(v11, v13, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v39 = v3->field_33C - -19.0;
  v15->lpVtbl->meth14(v15, a1, v3->flags_338, v39, 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_10045390;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0x20u);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v3->field_18[v3->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v40 = v3->field_33C - -38.0;
  v19->lpVtbl->meth14(v19, a1, v3->flags_338, v40, 1056769, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = sub_100455E0;
  v19->field_3838.field_1A99C[28] = 3;
  v21 = GetStringWithIndex(0x21u);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v3->field_18[v3->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v24 = v23->lpVtbl;
  v41 = v3->field_33C - -57.0;
  v23->lpVtbl->meth14(v23, a1, v3->flags_338, v41, 1056769, 2, 5, 1, -1);
  v23->field_C = sub_10047360;
  v23->field_8 = sub_100456B0;
  v23->field_3838.field_1A99C[28] = 3;
  v25 = GetStringWithIndex(0x22u);
  v24->meth13(v23, v25, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v3->field_18[v3->field_14] = v27;
  if (!v27)
    sub_1003E260(4);
  v28 = v27->lpVtbl;
  v42 = v3->field_33C - -114.0;
  v27->lpVtbl->meth14(v27, a1, v3->flags_338, v42, 1056769, 2, 5, 1, -1);
  v27->field_C = sub_10047360;
  v27->field_8 = (int(__cdecl *)())sub_10046520;
  v27->field_3838.field_1A99C[28] = 3;
  v29 = GetStringWithIndex(0xCu);
  v28->meth13(v27, v29, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v27;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v30 = (unk1E214 *)operator new(0x1E214u);
  if (v30)
    v31 = meth_unk1E214_init(v30);
  else
    v31 = 0;
  v3->field_18[v3->field_14] = v31;
  if (!v31)
    sub_1003E260(4);
  v31->lpVtbl->meth14(v31, a1, 1117782016, 46.0, 9, 2, 5, 0, 9);
  ++v3->field_14;
  v32 = (unk1E214 *)operator new(0x1E214u);
  if (v32)
    v33 = meth_unk1E214_init(v32);
  else
    v33 = 0;
  v3->field_18[v3->field_14] = v33;
  if (!v33)
    sub_1003E260(4);
  v33->lpVtbl->meth14(v33, a1, 1134690304, 46.0, 1, 2, 5, 1, 22);
  v33->field_4 = sub_10041870;
  v34 = v3->field_14 + 1;
  ++v33->field_2AB4[0];
  v33->field_2AB4[1] = v34;
  ++v3->field_14;
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v3->field_18[v3->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  v36->lpVtbl->meth14(v36, a1, v3->flags_338, 155.0, 1052673, 2, 5, 1, -1);
  v36->field_4 = sub_1003FFD0;
  v36->field_3838.field_1A99C[28] = 3;
  v37->meth13(v36, asc_100AD300, 1, 1, &unk_100AB4C8);
  ++v3->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (1004C4A0) --------------------------------------------------------
int __cdecl s_unk000C8_1004C4A0(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // edi
  unk1E214Vtbl *v20; // ebx
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // edi
  unk1E214Vtbl *v24; // ebx
  LPCSTR v25;        // eax
  unk1E214 *v26;     // eax
  unk1E214 *v27;     // edi
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // edi
  WORD v30;          // ax
  unk1E214 *v31;     // eax
  unk1E214 *v32;     // edi
  unk1E214Vtbl *v33; // ebx
  float v35;         // [esp+158h] [ebp-34h]
  float v36;         // [esp+158h] [ebp-34h]
  float v37;         // [esp+158h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v5->lpVtbl->meth14)(v5, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v7->lpVtbl->meth14)(v7, a1, v3->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x1Fu);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v11->lpVtbl->meth14)(v11, a1, v3->flags_338, LODWORD(v3->field_33C), 1056769, 2, 5, 1, -1);
  v11->field_C = sub_10047360;
  v11->field_8 = sub_10043400;
  v11->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0x23u);
  v12->meth13(v11, v13, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v35 = v3->field_33C - -19.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v15->lpVtbl->meth14)(v15, a1, v3->flags_338, LODWORD(v35), 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = (int(__cdecl *)())sub_100434C0;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0x24u);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v3->field_18[v3->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v36 = v3->field_33C - -38.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v19->lpVtbl->meth14)(v19, a1, v3->flags_338, LODWORD(v36), 1056769, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = sub_100406C0;
  v19->field_3838.field_1A99C[28] = 3;
  v21 = GetStringWithIndex(0x25u);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v3->field_18[v3->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v24 = v23->lpVtbl;
  v37 = v3->field_33C - -114.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v23->lpVtbl->meth14)(v23, a1, v3->flags_338, LODWORD(v37), 1056769, 2, 5, 1, -1);
  v23->field_C = sub_10047360;
  v23->field_8 = (int(__cdecl *)())sub_100465A0;
  v23->field_3838.field_1A99C[28] = 3;
  v25 = GetStringWithIndex(0xCu);
  v24->meth13(v23, v25, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v23;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v3->field_18[v3->field_14] = v27;
  if (!v27)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, _DWORD, int))
       v27->lpVtbl->meth14)(v27, a1, 1117782016, 1110966272, 9, 2, 5, 0, 9);
  ++v3->field_14;
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v3->field_18[v3->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v29->lpVtbl->meth14)(v29, a1, 1134690304, 1110966272, 1, 2, 5, 1, 22);
  v29->field_4 = sub_10041870;
  v30 = v3->field_14 + 1;
  ++v29->field_2AB4[0];
  v29->field_2AB4[1] = v30;
  ++v3->field_14;
  v31 = (unk1E214 *)operator new(0x1E214u);
  if (v31)
    v32 = meth_unk1E214_init(v31);
  else
    v32 = 0;
  v3->field_18[v3->field_14] = v32;
  if (!v32)
    sub_1003E260(4);
  v33 = v32->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v32->lpVtbl->meth14)(v32, a1, v3->flags_338, 1125842944, 1052673, 2, 5, 1, -1);
  v32->field_4 = sub_1003FFD0;
  v32->field_3838.field_1A99C[28] = 3;
  v33->meth13(v32, asc_100AD300, 1, 1, &unk_100AB4C8);
  ++v3->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (1004CAC0) --------------------------------------------------------
int __cdecl s_unk000C8_1004CAC0(unk000C8 *a1) {
  WORD v2;           // ax
  unk00348 *v3;      // eax
  unk00348 *v4;      // esi
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // edi
  unk1E214 *v7;      // eax
  unk1E214 *v8;      // edi
  unk1E214Vtbl *v9;  // ebx
  LPCSTR v10;        // eax
  unk1E214 *v11;     // eax
  unk1E214 *v12;     // edi
  unk1A5E0Vtbl *v13; // eax
  char *v14;         // edi
  int v15;           // ebx
  LPCSTR v16;        // eax
  unk1E214 *v17;     // eax
  unk1E214 *v18;     // edi
  unk1E214Vtbl *v19; // ebx
  LPCSTR v20;        // eax
  unk1E214 *v21;     // eax
  unk1E214 *v22;     // edi
  unk1E214Vtbl *v23; // ebx
  LPCSTR v24;        // eax
  unk1E214 *v25;     // eax
  unk1E214 *v26;     // edi
  unk1E214 *v27;     // eax
  unk1E214 *v28;     // edi
  unk1E214Vtbl *v29; // ebx
  unk1E214 *v30;     // eax
  unk1E214 *v31;     // edi
  WORD v32;          // cx
  unk1E214 *v33;     // eax
  unk1E214 *v34;     // edi
  unk1E214Vtbl *v35; // ebx
  LPCSTR v36;        // eax
  unk1E214 *v37;     // eax
  unk1E214 *v38;     // edi
  unk1E214Vtbl *v39; // ebx
  float v41;         // [esp+19Ch] [ebp-38h]
  float v42;         // [esp+19Ch] [ebp-38h]
  unk1A5E0Vtbl *v43; // [esp+1C4h] [ebp-10h]
  unk000C8 *v44;     // [esp+1D8h] [ebp+4h]

  v2 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v2) = 1;
  v3 = (unk00348 *)operator new(0x348u);
  if (v3)
    v4 = meth_unk00348_10048470(v3);
  else
    v4 = 0;
  a1->field_14[a1->field_10] = v4;
  if (!v4)
    sub_1003E260(4);
  ++a1->field_10;
  v4->field_340 = a1;
  v4->field_10 = 0;
  v4->flags_338 = 1128464384;
  v4->field_33C = 130.0;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v4->field_18[v4->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v6->lpVtbl->meth14)(v6, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v4->field_14;
  v7 = (unk1E214 *)operator new(0x1E214u);
  if (v7)
    v8 = meth_unk1E214_init(v7);
  else
    v8 = 0;
  v4->field_18[v4->field_14] = v8;
  if (!v8)
    sub_1003E260(4);
  v9 = v8->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v8->lpVtbl->meth14)(v8, a1, v4->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v8->field_3838.field_1A99C[28] = 3;
  v10 = GetStringWithIndex(0x26u);
  v9->meth13(v8, v10, 1, 1, &unk_100AB508);
  ++v4->field_14;
  v11 = (unk1E214 *)operator new(0x1E214u);
  if (v11)
    v12 = meth_unk1E214_init(v11);
  else
    v12 = 0;
  v4->field_18[v4->field_14] = v12;
  if (!v12)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v12->lpVtbl->meth14)(v12, a1, v4->flags_338, LODWORD(v4->field_33C), 12289, 2, 5, 1, -1);
  v13 = v12->field_3838.lpVtbl;
  v12->field_4 = sub_1003EC80;
  *(_DWORD *)&v12->field_3838.field_1A99C[16] = 1;
  v44 = (unk000C8 *)&v12->field_3838;
  v43 = v13;
  ((void(__stdcall *)(int, int *, int, _DWORD, int))v13->meth5)(262145, dword_100AB4D8, 5, 0, -1);
  v14 = aE_0;
  do {
    v15 = 0;
    if (dword_10AA2A0C == 3 && (v14 == aE_0 || v14 == (char *)&unk_100AB338)) {
      v15 = 16;
      dword_10AA2840 = 2;
    }
    if (GetStringWithIndex(*(_DWORD *)v14)) {
      v16 = GetStringWithIndex(*(_DWORD *)v14);
      v43->meth4((unk1A5E0 *)v44, (char *)v16, v15, 1, dword_100AB4D8, 0);
    }
    v14 += 8;
  } while ((int)v14 < (int)&dword_100AB3D8);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v17 = (unk1E214 *)operator new(0x1E214u);
  if (v17)
    v18 = meth_unk1E214_init(v17);
  else
    v18 = 0;
  v4->field_18[v4->field_14] = v18;
  if (!v18)
    sub_1003E260(4);
  v19 = v18->lpVtbl;
  v41 = v4->field_33C - -95.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v18->lpVtbl->meth14)(v18, a1, v4->flags_338, LODWORD(v41), 1056769, 2, 5, 1, -1);
  v18->field_C = sub_10047360;
  v18->field_8 = sub_10040680;
  v18->field_18 = (int)sub_10040450;
  v18->field_3838.field_1A99C[28] = 3;
  v20 = GetStringWithIndex(0x27u);
  v19->meth13(v18, v20, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v21 = (unk1E214 *)operator new(0x1E214u);
  if (v21)
    v22 = meth_unk1E214_init(v21);
  else
    v22 = 0;
  v4->field_18[v4->field_14] = v22;
  if (!v22)
    sub_1003E260(4);
  v23 = v22->lpVtbl;
  v42 = v4->field_33C - -114.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v22->lpVtbl->meth14)(v22, a1, v4->flags_338, LODWORD(v42), 1056769, 2, 5, 1, -1);
  v22->field_C = sub_10047360;
  v22->field_8 = (int(__cdecl *)())sub_10046560;
  v22->field_3838.field_1A99C[28] = 3;
  v24 = GetStringWithIndex(0xCu);
  v23->meth13(v22, v24, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v22;
  ++v4->field_14;
  ++LOWORD(v4->last);
  v25 = (unk1E214 *)operator new(0x1E214u);
  if (v25)
    v26 = meth_unk1E214_init(v25);
  else
    v26 = 0;
  v4->field_18[v4->field_14] = v26;
  if (!v26)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, _DWORD, int))
       v26->lpVtbl->meth14)(v26, a1, 1117782016, 1110966272, 9, 2, 5, 0, 9);
  ++v4->field_14;
  v27 = (unk1E214 *)operator new(0x1E214u);
  if (v27)
    v28 = meth_unk1E214_init(v27);
  else
    v28 = 0;
  v4->field_18[v4->field_14] = v28;
  if (!v28)
    sub_1003E260(4);
  v29 = v28->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v28->lpVtbl->meth14)(v28, a1, v4->flags_338, 1124532224, 1052673, 2, 5, 1, -1);
  v28->field_4 = sub_1003F8D0;
  v28->field_3838.field_1A99C[28] = 3;
  v29->meth13(v28, asc_100AD300, 1, 1, &unk_100AB488);
  ++v4->field_14;
  v30 = (unk1E214 *)operator new(0x1E214u);
  if (v30)
    v31 = meth_unk1E214_init(v30);
  else
    v31 = 0;
  v4->field_18[v4->field_14] = v31;
  if (!v31)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v31->lpVtbl->meth14)(v31, a1, 1134690304, 1110966272, 1, 2, 5, 1, 22);
  v31->field_4 = sub_10041870;
  v32 = v4->field_14 + 1;
  ++v31->field_2AB4[0];
  v31->field_2AB4[1] = v32;
  ++v4->field_14;
  v33 = (unk1E214 *)operator new(0x1E214u);
  if (v33)
    v34 = meth_unk1E214_init(v33);
  else
    v34 = 0;
  v4->field_18[v4->field_14] = v34;
  if (!v34)
    sub_1003E260(4);
  v35 = v34->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v34->lpVtbl->meth14)(v34, a1, v4->flags_338, 1125842944, 1048577, 2, 5, 1, -1);
  v34->field_3838.field_1A99C[28] = 3;
  v36 = GetStringWithIndex(0x28u);
  v35->meth13(v34, v36, 1, 1, &unk_100AB4C8);
  ++v4->field_14;
  v37 = (unk1E214 *)operator new(0x1E214u);
  if (v37)
    v38 = meth_unk1E214_init(v37);
  else
    v38 = 0;
  v4->field_18[v4->field_14] = v38;
  if (!v38)
    sub_1003E260(4);
  v39 = v38->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v38->lpVtbl->meth14)(v38, a1, v4->flags_338, 1120403456, 1052673, 2, 5, 1, -1);
  v38->field_4 = sub_100400E0;
  v38->field_3838.field_1A99C[28] = 3;
  v39->meth13(v38, asc_100AD300, 1, 1, &unk_100AB4C8);
  ++v4->field_14;
  dword_10AA2850 = sub_10040330(dword_100AC520[dword_10AA2A0C]);
  return 1;
}
// 100AB3D8: using guessed type int dword_100AB3D8;
// 100AB448: using guessed type int dword_100AB448;
// 10AA2840: using guessed type int dword_10AA2840;
// 10AA2850: using guessed type int dword_10AA2850;
// 10AA29C8: using guessed type int dword_10AA29C8;
// 10AA2A0C: using guessed type int dword_10AA2A0C;

//----- (1004D1F0) --------------------------------------------------------
int __cdecl s_unk000C8_1004D1F0(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *u348;    // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214 *v12;     // eax
  unk1E214 *v13;     // edi
  unk1E214Vtbl *v14; // ebx
  LPCSTR v15;        // eax
  unk1E214 *v16;     // eax
  unk1E214 *v17;     // edi
  unk1E214Vtbl *v18; // ebx
  LPCSTR v19;        // eax
  unk1E214 *v20;     // eax
  unk1E214 *v21;     // edi
  unk1E214Vtbl *v22; // ebx
  LPCSTR v23;        // eax
  float v25;         // [esp+D8h] [ebp-34h]
  float v26;         // [esp+D8h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    u348 = meth_unk00348_10048470(v2);
  else
    u348 = 0;
  a1->field_14[a1->field_10] = u348;
  if (!u348)
    sub_1003E260(4);
  ++a1->field_10;
  u348->field_340 = a1;
  u348->field_10 = 0;
  u348->flags_338 = 1128464384;
  u348->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  u348->field_18[u348->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++u348->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  u348->field_18[u348->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, u348->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x20u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++u348->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  u348->field_18[u348->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v11->lpVtbl->meth14(v11, a1, 0x42A00000, 46.0, 9, 2, 5, 0, 9);
  ++u348->field_14;
  v12 = (unk1E214 *)operator new(0x1E214u);
  if (v12)
    v13 = meth_unk1E214_init(v12);
  else
    v13 = 0;
  u348->field_18[u348->field_14] = v13;
  if (!v13)
    sub_1003E260(4);
  v14 = v13->lpVtbl;
  v13->lpVtbl->meth14(v13, a1, u348->flags_338, u348->field_33C, 1056769, 2, 5, 1, -1);
  v13->field_C = sub_10047360;
  v13->field_8 = sub_10045460;
  v13->field_3838.field_1A99C[28] = 3;
  v15 = GetStringWithIndex(0x29u);
  v14->meth13(v13, v15, 1, 1, &dword_100AB448);
  ++u348->field_14;
  ++LOWORD(u348->last);
  v16 = (unk1E214 *)operator new(0x1E214u);
  if (v16)
    v17 = meth_unk1E214_init(v16);
  else
    v17 = 0;
  u348->field_18[u348->field_14] = v17;
  if (!v17)
    sub_1003E260(4);
  v18 = v17->lpVtbl;
  v25 = u348->field_33C - -19.0;
  v17->lpVtbl->meth14(v17, a1, u348->flags_338, v25, 1056769, 2, 5, 1, -1);
  v17->field_C = sub_10047360;
  v17->field_8 = sub_10045520;
  v17->field_3838.field_1A99C[28] = 3;
  v19 = GetStringWithIndex(0x2Au);
  v18->meth13(v17, v19, 1, 1, &dword_100AB448);
  ++u348->field_14;
  ++LOWORD(u348->last);
  v20 = (unk1E214 *)operator new(0x1E214u);
  if (v20)
    v21 = meth_unk1E214_init(v20);
  else
    v21 = 0;
  u348->field_18[u348->field_14] = v21;
  if (!v21)
    sub_1003E260(4);
  v22 = v21->lpVtbl;
  v26 = u348->field_33C - -114.0;
  v21->lpVtbl->meth14(v21, a1, u348->flags_338, v26, 1056769, 2, 5, 1, -1);
  v21->field_C = sub_10047360;
  v21->field_8 = (int(__cdecl *)())sub_100465E0;
  v21->field_3838.field_1A99C[28] = 3;
  v23 = GetStringWithIndex(0xCu);
  v22->meth13(v21, v23, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v21;
  ++u348->field_14;
  ++LOWORD(u348->last);
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (1004D640) --------------------------------------------------------
int __cdecl s_unk000C8_1004D640(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214 *v12;     // eax
  unk1E214 *v13;     // edi
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1A5E0Vtbl *v16; // edx
  unk1E214 *v17;     // eax
  unk1E214 *v18;     // edi
  unk1E214Vtbl *v19; // ebx
  LPCSTR v20;        // eax
  unk1E214 *v21;     // eax
  unk1E214 *v22;     // edi
  unk1E214Vtbl *v23; // ebx
  LPCSTR v24;        // eax
  float v26;         // [esp+FCh] [ebp-34h]
  float v27;         // [esp+FCh] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v5->lpVtbl->meth14)(v5, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v7->lpVtbl->meth14)(v7, a1, v3->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x2Bu);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, _DWORD, int))
       v11->lpVtbl->meth14)(v11, a1, 1117782016, 1110966272, 9, 2, 5, 0, 9);
  ++v3->field_14;
  v12 = (unk1E214 *)operator new(0x1E214u);
  if (v12)
    v13 = meth_unk1E214_init(v12);
  else
    v13 = 0;
  v3->field_18[v3->field_14] = v13;
  if (!v13)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, _DWORD, int))
       v13->lpVtbl->meth14)(v13, a1, 1119879168, 1114898432, 9, 2, 5, 0, 142);
  ++v3->field_14;
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v15->lpVtbl->meth14)(v15, a1, v3->flags_338, LODWORD(v3->field_33C), 12289, 2, 5, 1, -1);
  v16 = v15->field_3838.lpVtbl;
  v15->field_4 = sub_1003ED10;
  *(_DWORD *)&v15->field_3838.field_1A99C[16] = 1;
  v16->meth5(&v15->field_3838, 262145, dword_100AB528, 7, 0, -1);
  gUnk1E214Ptr0 = v15;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v17 = (unk1E214 *)operator new(0x1E214u);
  if (v17)
    v18 = meth_unk1E214_init(v17);
  else
    v18 = 0;
  v3->field_18[v3->field_14] = v18;
  if (!v18)
    sub_1003E260(4);
  v19 = v18->lpVtbl;
  v26 = v3->field_33C - -95.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v18->lpVtbl->meth14)(v18, a1, v3->flags_338, LODWORD(v26), 1056769, 2, 5, 1, -1);
  v18->field_C = sub_10047360;
  v18->field_8 = (int(__cdecl *)())s_unk1E214_1003ECB0;
  v18->field_3838.field_1A99C[28] = 3;
  v20 = GetStringWithIndex(0x2Cu);
  v19->meth13(v18, v20, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v18;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v21 = (unk1E214 *)operator new(0x1E214u);
  if (v21)
    v22 = meth_unk1E214_init(v21);
  else
    v22 = 0;
  v3->field_18[v3->field_14] = v22;
  if (!v22)
    sub_1003E260(4);
  v23 = v22->lpVtbl;
  v27 = v3->field_33C - -114.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v22->lpVtbl->meth14)(v22, a1, v3->flags_338, LODWORD(v27), 1056769, 2, 5, 1, -1);
  v22->field_C = sub_10047360;
  v22->field_8 = (int(__cdecl *)())s_unk1E214_10046620;
  v22->field_3838.field_1A99C[28] = 3;
  v24 = GetStringWithIndex(0xCu);
  v23->meth13(v22, v24, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v22;
  ++v3->field_14;
  ++LOWORD(v3->last);
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (1004DB00) --------------------------------------------------------
int __cdecl s_unk000C8_1004DB00(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214 *v12;     // eax
  unk1E214 *v13;     // edi
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1A5E0Vtbl *v16; // edx
  unk1E214 *v17;     // eax
  unk1E214 *v18;     // edi
  unk1E214Vtbl *v19; // ebx
  LPCSTR v20;        // eax
  unk1E214 *v21;     // eax
  unk1E214 *v22;     // edi
  unk1E214Vtbl *v23; // ebx
  LPCSTR v24;        // eax
  float v26;         // [esp+FCh] [ebp-34h]
  float v27;         // [esp+FCh] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v5->lpVtbl->meth14)(v5, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v7->lpVtbl->meth14)(v7, a1, v3->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x2Au);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, _DWORD, int))
       v11->lpVtbl->meth14)(v11, a1, 1117782016, 1110966272, 9, 2, 5, 0, 9);
  ++v3->field_14;
  v12 = (unk1E214 *)operator new(0x1E214u);
  if (v12)
    v13 = meth_unk1E214_init(v12);
  else
    v13 = 0;
  v3->field_18[v3->field_14] = v13;
  if (!v13)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, _DWORD, int))
       v13->lpVtbl->meth14)(v13, a1, 1119879168, 1114898432, 9, 2, 5, 0, 142);
  ++v3->field_14;
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v15->lpVtbl->meth14)(v15, a1, v3->flags_338, LODWORD(v3->field_33C), 12289, 2, 5, 1, -1);
  v16 = v15->field_3838.lpVtbl;
  v15->field_4 = sub_1003EDF0;
  *(_DWORD *)&v15->field_3838.field_1A99C[16] = 1;
  v16->meth5(&v15->field_3838, 262145, dword_100AB528, 7, 0, -1);
  dword_10AA29EC = (int)v15;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v17 = (unk1E214 *)operator new(0x1E214u);
  if (v17)
    v18 = meth_unk1E214_init(v17);
  else
    v18 = 0;
  v3->field_18[v3->field_14] = v18;
  if (!v18)
    sub_1003E260(4);
  v19 = v18->lpVtbl;
  v26 = v3->field_33C - -95.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v18->lpVtbl->meth14)(v18, a1, v3->flags_338, LODWORD(v26), 1056769, 2, 5, 1, -1);
  v18->field_C = sub_10047360;
  v18->field_8 = (int(__cdecl *)())s_unk1E214_1003ED40;
  v18->field_3838.field_1A99C[28] = 3;
  v20 = GetStringWithIndex(0x2Du);
  v19->meth13(v18, v20, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v18;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v21 = (unk1E214 *)operator new(0x1E214u);
  if (v21)
    v22 = meth_unk1E214_init(v21);
  else
    v22 = 0;
  v3->field_18[v3->field_14] = v22;
  if (!v22)
    sub_1003E260(4);
  v23 = v22->lpVtbl;
  v27 = v3->field_33C - -114.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v22->lpVtbl->meth14)(v22, a1, v3->flags_338, LODWORD(v27), 1056769, 2, 5, 1, -1);
  v22->field_C = sub_10047360;
  v22->field_8 = (int(__cdecl *)())s_unk1E214_10046670;
  v22->field_3838.field_1A99C[28] = 3;
  v24 = GetStringWithIndex(0xCu);
  v23->meth13(v22, v24, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v22;
  ++v3->field_14;
  ++LOWORD(v3->last);
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29C8: using guessed type int dword_10AA29C8;
// 10AA29EC: using guessed type int dword_10AA29EC;

//----- (1004DFC0) --------------------------------------------------------
int __cdecl s_unk000C8_1004DFC0(unk000C8 *a1) {
  WORD v2;           // ax
  unk00348 *v3;      // eax
  unk00348 *v4;      // esi
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // ebx
  unk1E214 *v7;      // eax
  unk1E214 *v8;      // ebx
  unk1E214Vtbl *v9;  // edi
  LPCSTR v10;        // eax
  unk1E214 *v11;     // eax
  unk1E214 *v12;     // ebx
  unk1E214 *v13;     // eax
  unk1E214 *v14;     // ebx
  int v15;           // eax
  unk1A5E0Vtbl *v16; // edi
  unk000C8 *v17;     // edx
  char **v18;        // edi
  __int64 v19;       // rax
  unk1E214 *v20;     // eax
  unk1E214 *v21;     // edi
  unk1E214Vtbl *v22; // ebx
  LPCSTR v23;        // eax
  unk1E214 *v24;     // eax
  unk1E214 *v25;     // edi
  unk1E214Vtbl *v26; // ebx
  LPCSTR v27;        // eax
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // edi
  unk1E214Vtbl *v30; // ebx
  LPCSTR v31;        // eax
  unk1E214 *v32;     // eax
  unk1E214 *v33;     // edi
  unk1E214 *v34;     // eax
  unk1E214 *v35;     // edi
  unk1E214 *v36;     // eax
  unk1E214 *v37;     // edi
  unk1E214 *v38;     // eax
  unk1E214 *v39;     // edi
  unk1E214Vtbl *v40; // ebx
  LPCSTR v41;        // eax
  unk1E214 *v42;     // eax
  unk1E214 *v43;     // edi
  unk1E214Vtbl *v44; // ebx
  LPCSTR v45;        // eax
  float v47;         // [esp+1E0h] [ebp-34h]
  float v48;         // [esp+1E0h] [ebp-34h]
  float v49;         // [esp+1E0h] [ebp-34h]
  unk000C8 *v50;     // [esp+218h] [ebp+4h]

  v2 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v2) = 1;
  v3 = (unk00348 *)operator new(0x348u);
  if (v3)
    v4 = meth_unk00348_10048470(v3);
  else
    v4 = 0;
  a1->field_14[a1->field_10] = v4;
  if (!v4)
    sub_1003E260(4);
  ++a1->field_10;
  v4->field_340 = a1;
  v4->field_10 = 0;
  v4->flags_338 = 1128464384;
  v4->field_33C = 130.0;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v4->field_18[v4->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, _DWORD, _DWORD, int, int, int, _DWORD, _DWORD))
       v6->lpVtbl->meth14)(v6, a1, 0, 0, 9, 2, 5, 0, 0);
  ++v4->field_14;
  v7 = (unk1E214 *)operator new(0x1E214u);
  if (v7)
    v8 = meth_unk1E214_init(v7);
  else
    v8 = 0;
  v4->field_18[v4->field_14] = v8;
  if (!v8)
    sub_1003E260(4);
  v9 = v8->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v8->lpVtbl->meth14)(v8, a1, v4->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  v8->field_3838.field_1A99C[28] = 3;
  v10 = GetStringWithIndex(0x21u);
  v9->meth13(v8, v10, 1, 1, &unk_100AB508);
  ++v4->field_14;
  v11 = (unk1E214 *)operator new(0x1E214u);
  if (v11)
    v12 = meth_unk1E214_init(v11);
  else
    v12 = 0;
  v4->field_18[v4->field_14] = v12;
  if (!v12)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, _DWORD, int))
       v12->lpVtbl->meth14)(v12, a1, 1117782016, 1110966272, 9, 2, 5, 0, 9);
  ++v4->field_14;
  v13 = (unk1E214 *)operator new(0x1E214u);
  if (v13)
    v14 = meth_unk1E214_init(v13);
  else
    v14 = 0;
  v4->field_18[v4->field_14] = v14;
  if (!v14)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v14->lpVtbl->meth14)(v14, a1, v4->flags_338, LODWORD(v4->field_33C), 12289, 2, 5, 1, -1);
  v14->field_4 = sub_1003EE20;
  *(_DWORD *)&v14->field_3838.field_1A99C[16] = 1;
  v15 = dword_10AA2A34;
  if (dword_10AA2A34 < 0) {
    v15 = 0;
  } else if (dword_10AA2A34 > 11) {
    v15 = 11;
  }
  v16 = v14->field_3838.lpVtbl;
  v16->meth5(&v14->field_3838, 262145, dword_100AB548, 4, v15, -1);
  v17 = (unk000C8 *)v16->meth4;
  v14->field_3838.field_4[0] = (DWORD)pm_sub_1004E810;
  v50 = v17;
  v18 = off_100B89C8;
  do
    ((void(__thiscall *)(unk1A5E0 *, _DWORD, _DWORD, int, int *, int))v50)(
        &v14->field_3838, *v18++, 0, 1, dword_100AB4D8, 1);
  while ((int)v18 < (int)aFancyCar);
  if (dword_10AA2A34 >= 0) {
    if (dword_10AA2A34 <= 11)
      *(float *)&v14->field_3838.field_1A99C[10] = *(float *)&v14->field_3838.field_1A99C[22] -
                                                   (*(float *)&v14->field_3838.field_1A99C[24] -
                                                    *(float *)&v14->field_3838.field_1A99C[22]) *
                                                       (double)dword_10AA2A34 * -0.090909094;
    else
      *(_DWORD *)&v14->field_3838.field_1A99C[10] = *(_DWORD *)&v14->field_3838.field_1A99C[24];
  } else {
    *(_DWORD *)&v14->field_3838.field_1A99C[10] = *(_DWORD *)&v14->field_3838.field_1A99C[22];
  }
  v19 = (__int64)*(float *)&v14->field_3838.field_1A99C[10];
  *(_DWORD *)&v14->field_3838.gap1A93A[86] = v19;
  *(_DWORD *)&v14->field_3838.gap1A93A[94] = v19 + 16;
  ++v4->field_14;
  ++LOWORD(v4->last);
  v20 = (unk1E214 *)operator new(0x1E214u);
  if (v20)
    v21 = meth_unk1E214_init(v20);
  else
    v21 = 0;
  v4->field_18[v4->field_14] = v21;
  if (!v21)
    sub_1003E260(4);
  v22 = v21->lpVtbl;
  v47 = v4->field_33C - -76.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v21->lpVtbl->meth14)(v21, a1, v4->flags_338, LODWORD(v47), 1056769, 2, 5, 1, -1);
  v21->field_C = sub_10047360;
  v21->field_8 = sub_10042CF0;
  v21->field_3838.field_1A99C[28] = 3;
  v23 = GetStringWithIndex(0x2Eu);
  v22->meth13(v21, v23, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v24 = (unk1E214 *)operator new(0x1E214u);
  if (v24)
    v25 = meth_unk1E214_init(v24);
  else
    v25 = 0;
  v4->field_18[v4->field_14] = v25;
  if (!v25)
    sub_1003E260(4);
  v26 = v25->lpVtbl;
  v48 = v4->field_33C - -95.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v25->lpVtbl->meth14)(v25, a1, v4->flags_338, LODWORD(v48), 1056769, 2, 5, 1, -1);
  v25->field_C = sub_10047360;
  v25->field_8 = sub_10042D60;
  v25->field_3838.field_1A99C[28] = 3;
  v27 = GetStringWithIndex(0x2Fu);
  v26->meth13(v25, v27, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v4->field_18[v4->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v30 = v29->lpVtbl;
  v49 = v4->field_33C - -114.0;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, _DWORD, int, int, int, int, int))
       v29->lpVtbl->meth14)(v29, a1, v4->flags_338, LODWORD(v49), 1056769, 2, 5, 1, -1);
  v29->field_C = sub_10047360;
  v29->field_8 = (int(__cdecl *)())sub_100466C0;
  v29->field_3838.field_1A99C[28] = 3;
  v31 = GetStringWithIndex(0xCu);
  v30->meth13(v29, v31, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v29;
  ++v4->field_14;
  ++LOWORD(v4->last);
  v32 = (unk1E214 *)operator new(0x1E214u);
  if (v32)
    v33 = meth_unk1E214_init(v32);
  else
    v33 = 0;
  v4->field_18[v4->field_14] = v33;
  if (!v33)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v33->lpVtbl->meth14)(v33, a1, 1117257728, 1129512960, 1, 2, 5, 1, 104);
  v33->field_4 = sub_1003E950;
  ++v4->field_14;
  v34 = (unk1E214 *)operator new(0x1E214u);
  if (v34)
    v35 = meth_unk1E214_init(v34);
  else
    v35 = 0;
  v4->field_18[v4->field_14] = v35;
  if (!v35)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v35->lpVtbl->meth14)(v35, a1, 1117126656, 1132822528, 9, 2, 5, 1, 106);
  ++v4->field_14;
  v36 = (unk1E214 *)operator new(0x1E214u);
  if (v36)
    v37 = meth_unk1E214_init(v36);
  else
    v37 = 0;
  v4->field_18[v4->field_14] = v37;
  if (!v37)
    sub_1003E260(4);
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v37->lpVtbl->meth14)(v37, a1, 1117650944, 1132462080, 1, 2, 5, 1, 107);
  v37->field_4 = sub_1003EA40;
  ++v4->field_14;
  v38 = (unk1E214 *)operator new(0x1E214u);
  if (v38)
    v39 = meth_unk1E214_init(v38);
  else
    v39 = 0;
  v4->field_18[v4->field_14] = v39;
  if (!v39)
    sub_1003E260(4);
  v40 = v39->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v39->lpVtbl->meth14)(v39, a1, 1135181824, 1119092736, 1056769, 2, 5, 1, -1);
  v39->field_4 = (int(__cdecl *)(int))sub_1003E980;
  v39->field_3838.field_1A99C[28] = 3;
  v41 = GetStringWithIndex(0x2Eu);
  v40->meth13(v39, v41, 1, 1, &unk_100AB468);
  ++v4->field_14;
  v42 = (unk1E214 *)operator new(0x1E214u);
  if (v42)
    v43 = meth_unk1E214_init(v42);
  else
    v43 = 0;
  v4->field_18[v4->field_14] = v43;
  if (!v43)
    sub_1003E260(4);
  v44 = v43->lpVtbl;
  ((void(__thiscall *)(unk1E214 *, unk000C8 *, int, int, int, int, int, int, int))
       v43->lpVtbl->meth14)(v43, a1, 1135181824, 1124073472, 1056769, 2, 5, 1, -1);
  v43->field_4 = (int(__cdecl *)(int))sub_1003E9E0;
  v43->field_3838.field_1A99C[28] = 3;
  v45 = GetStringWithIndex(0x2Fu);
  v44->meth13(v43, v45, 1, 1, &unk_100AB468);
  ++v4->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 100B89C8: using guessed type char *off_100B89C8[12];
// 10AA29C8: using guessed type int dword_10AA29C8;
// 10AA2A34: using guessed type int dword_10AA2A34;

//----- (1004E810) --------------------------------------------------------
int __cdecl pm_sub_1004E810(int a1, _DWORD *a2) {
  pm_sub_100027C0(*a2 + 2);
  return 1;
}

//----- (1004E830) --------------------------------------------------------
int __cdecl s_unk000C8_1004E830(unk000C8 *a1) {
  unsigned __int16 v1; // ax
  unk00348 *v2;        // eax
  unk00348 *v3;        // esi
  unk1E214 *v4;        // eax
  unk1E214 *v5;        // ebp
  unk1E214 *v6;        // eax
  unk1E214 *v7;        // ebp
  unk1E214Vtbl *v8;    // ebx
  LPCSTR v9;           // eax
  unk1E214 *v10;       // eax
  unk1E214 *v11;       // ebp
  unk1E214Vtbl *v12;   // ebx
  LPCSTR v13;          // eax
  unk1E214 *v14;       // eax
  unk1E214 *v15;       // ebp
  unk1E214Vtbl *v16;   // ebx
  LPCSTR v17;          // eax
  unk1E214 *v18;       // eax
  unk1E214 *v19;       // ebp
  unk1E214Vtbl *v20;   // ebx
  LPCSTR v21;          // eax
  unk1E214 *v22;       // eax
  unk1E214 *v23;       // ebp
  unk1E214Vtbl *v24;   // ebx
  LPCSTR v25;          // eax
  unk1E214 *v26;       // eax
  unk1E214 *v27;       // ebp
  unk1E214Vtbl *v28;   // ebx
  LPCSTR v29;          // eax
  unk1E214 *v30;       // eax
  unk1E214 *v31;       // ebp
  unk1E214 *v32;       // eax
  unk1E214 *v33;       // ebp
  __int16 v34;         // ax
  unk1E214 *v35;       // eax
  unk1E214 *v36;       // ebp
  unk1E214Vtbl *v37;   // ebx
  unk1E214 *v38;       // eax
  unk1E214 *v39;       // ebp
  __int16 v40;         // ax
  unk1E214 *v41;       // eax
  unk1E214 *v42;       // ebp
  unk1E214Vtbl *v43;   // ebx
  unk1E214 *v44;       // eax
  unk1E214 *v45;       // ebp
  __int16 v46;         // ax
  unk1E214 *v47;       // eax
  unk1E214 *v48;       // ebp
  unk1E214Vtbl *v49;   // ebx
  unk1E214 *v50;       // eax
  unk1E214 *v51;       // ebp
  __int16 v52;         // ax
  unk1E214 *v53;       // eax
  unk1E214 *v54;       // ebp
  unk1E214Vtbl *v55;   // ebx
  float v57;           // [esp+278h] [ebp-34h]
  float v58;           // [esp+278h] [ebp-34h]
  float v59;           // [esp+278h] [ebp-34h]
  float v60;           // [esp+278h] [ebp-34h]
  int v61;             // [esp+288h] [ebp-24h]

  v1 = a1->field_10;
  HIWORD(a1->field_10) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[LOWORD(a1->field_10)] = v3;
  if (!v3)
    sub_1003E260(4);
  ++LOWORD(a1->field_10);
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0, 9, 2, 5, 0, 0);
  ++LOWORD(v3->field_14);
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 1092616192, 1048585, 2, 5, 1, -1);
  LOWORD(v7->?) = 3;
  v9 = GetStringWithIndex(0x22u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++LOWORD(v3->field_14);
  input_100795D0();
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  v11->lpVtbl->meth14(v11,
                      a1,
                      v3->flags_338,
                      LODWORD(v3->field_33C),
                      gDIEffectSquare.dwStartDelay != 0 ? 1056769 : 1056785,
                      2,
                      5,
                      1,
                      -1);
  v11->field_C = sub_10047360;
  v11->field_8 = sub_10043590;
  if (gDIEffectSquare.dwStartDelay) {
    LOWORD(v11->?) = 3;
    v61 = 1;
  } else {
    LOWORD(v11->?) = 2;
    v61 = 0;
  }
  v13 = GetStringWithIndex(0x30u);
  v12->meth13(v11, v13, 1, v61, &dword_100AB448);
  ++LOWORD(v3->field_14);
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v57 = v3->field_33C - -19.0;
  v15->lpVtbl->meth14(v15, a1, v3->flags_338, LODWORD(v57), 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_100435F0;
  LOWORD(v15->?) = 3;
  v17 = GetStringWithIndex(0x31u);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++LOWORD(v3->field_14);
  ++LOWORD(v3->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v58 = v3->field_33C - -38.0;
  v19->lpVtbl->meth14(v19, a1, v3->flags_338, LODWORD(v58), 1056769, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = sub_100436B0;
  LOWORD(v19->?) = 3;
  v21 = GetStringWithIndex(0x32u);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  ++LOWORD(v3->field_14);
  ++LOWORD(v3->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v23;
  if (!v23)
    sub_1003E260(4);
  v24 = v23->lpVtbl;
  v59 = v3->field_33C - -57.0;
  v23->lpVtbl->meth14(v23, a1, v3->flags_338, LODWORD(v59), 1056769, 2, 5, 1, -1);
  v23->field_C = sub_10047360;
  v23->field_8 = sub_10043650;
  LOWORD(v23->?) = 3;
  v25 = GetStringWithIndex(0x33u);
  v24->meth13(v23, v25, 1, 1, &dword_100AB448);
  ++LOWORD(v3->field_14);
  ++LOWORD(v3->last);
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v27;
  if (!v27)
    sub_1003E260(4);
  v28 = v27->lpVtbl;
  v60 = v3->field_33C - -114.0;
  v27->lpVtbl->meth14(v27, a1, v3->flags_338, LODWORD(v60), 1056769, 2, 5, 1, -1);
  v27->field_C = sub_10047360;
  v27->field_8 = (int(__cdecl *)())sub_10046710;
  LOWORD(v27->?) = 3;
  v29 = GetStringWithIndex(0xCu);
  v28->meth13(v27, v29, 1, 1, &dword_100AB448);
  dword_10AA29C8 = (int)v27;
  ++LOWORD(v3->field_14);
  ++LOWORD(v3->last);
  v30 = (unk1E214 *)operator new(0x1E214u);
  if (v30)
    v31 = meth_unk1E214_init(v30);
  else
    v31 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v31;
  if (!v31)
    sub_1003E260(4);
  v31->lpVtbl->meth14(v31, a1, 1117782016, 1110966272, 9, 2, 5, 0, 9);
  ++LOWORD(v3->field_14);
  v32 = (unk1E214 *)operator new(0x1E214u);
  if (v32)
    v33 = meth_unk1E214_init(v32);
  else
    v33 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v33;
  if (!v33)
    sub_1003E260(4);
  v33->lpVtbl->meth14(v33, a1, 1135083520, 1111490560, 1, 2, 5, 1, 97);
  v33->field_4 = sub_10040950;
  v34 = LOWORD(v3->field_14) + 1;
  ++*(_WORD *)&v33->gap5C[10840];
  *(_WORD *)&v33->gap5C[10842] = v34;
  ++LOWORD(v3->field_14);
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  v36->lpVtbl->meth14(v36, a1, v3->flags_338, 1126563840, 1052673, 2, 5, 1, -1);
  v36->field_4 = sub_1003FCB0;
  LOWORD(v36->?) = 3;
  v37->meth13(v36, asc_100AD300, 1, 1, &unk_100AB4C8);
  ++LOWORD(v3->field_14);
  v38 = (unk1E214 *)operator new(0x1E214u);
  if (v38)
    v39 = meth_unk1E214_init(v38);
  else
    v39 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v39;
  if (!v39)
    sub_1003E260(4);
  v39->lpVtbl->meth14(v39, a1, 1116078080, 1128726528, 1, 2, 5, 1, 140);
  v39->field_4 = sub_10040990;
  v40 = LOWORD(v3->field_14) + 1;
  ++*(_WORD *)&v39->gap5C[10840];
  *(_WORD *)&v39->gap5C[10842] = v40;
  ++LOWORD(v3->field_14);
  v41 = (unk1E214 *)operator new(0x1E214u);
  if (v41)
    v42 = meth_unk1E214_init(v41);
  else
    v42 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v42;
  if (!v42)
    sub_1003E260(4);
  v43 = v42->lpVtbl;
  v42->lpVtbl->meth14(v42, a1, v3->flags_338, 1133215744, 1052673, 2, 5, 1, -1);
  v42->field_4 = sub_1003FD30;
  LOWORD(v42->?) = 3;
  v43->meth13(v42, asc_100AD300, 1, 1, &unk_100AB4B8);
  ++LOWORD(v3->field_14);
  v44 = (unk1E214 *)operator new(0x1E214u);
  if (v44)
    v45 = meth_unk1E214_init(v44);
  else
    v45 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v45;
  if (!v45)
    sub_1003E260(4);
  v45->lpVtbl->meth14(v45, a1, 1138491392, 1122238464, 1, 2, 5, 1, 101);
  v45->field_4 = sub_100409D0;
  v46 = LOWORD(v3->field_14) + 1;
  ++*(_WORD *)&v45->gap5C[10840];
  *(_WORD *)&v45->gap5C[10842] = v46;
  ++LOWORD(v3->field_14);
  v47 = (unk1E214 *)operator new(0x1E214u);
  if (v47)
    v48 = meth_unk1E214_init(v47);
  else
    v48 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v48;
  if (!v48)
    sub_1003E260(4);
  v49 = v48->lpVtbl;
  v48->lpVtbl->meth14(v48, a1, v3->flags_338, 1128529920, 1052673, 2, 5, 1, -1);
  v48->field_4 = sub_1003FE10;
  LOWORD(v48->?) = 3;
  v49->meth13(v48, asc_100AD300, 1, 1, &unk_100AB488);
  ++LOWORD(v3->field_14);
  v50 = (unk1E214 *)operator new(0x1E214u);
  if (v50)
    v51 = meth_unk1E214_init(v50);
  else
    v51 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v51;
  if (!v51)
    sub_1003E260(4);
  v51->lpVtbl->meth14(v51, a1, 1139933184, 1129709568, 1, 2, 5, 1, 99);
  v51->field_4 = sub_100409B0;
  v52 = LOWORD(v3->field_14) + 1;
  ++*(_WORD *)&v51->gap5C[10840];
  *(_WORD *)&v51->gap5C[10842] = v52;
  ++LOWORD(v3->field_14);
  v53 = (unk1E214 *)operator new(0x1E214u);
  if (v53)
    v54 = meth_unk1E214_init(v53);
  else
    v54 = 0;
  v3->field_18[LOWORD(v3->field_14)] = v54;
  if (!v54)
    sub_1003E260(4);
  v55 = v54->lpVtbl;
  v54->lpVtbl->meth14(v54, a1, v3->flags_338, 1133019136, 1052673, 2, 5, 1, -1);
  v54->field_4 = sub_1003FDA0;
  LOWORD(v54->?) = 3;
  v55->meth13(v54, asc_100AD300, 1, 1, &unk_100AB478);
  ++LOWORD(v3->field_14);
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29C8: using guessed type int dword_10AA29C8;

//----- (1004F2B0) --------------------------------------------------------
int __cdecl s_unk000C8_1004F2B0(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // edi
  unk1E214Vtbl *v20; // ebx
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // edi
  float v25;         // [esp+D8h] [ebp-34h]
  float v26;         // [esp+D8h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 0x43430000;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(9u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  v11->lpVtbl->meth14(v11, a1, v3->flags_338, v3->field_33C, 1056769, 2, 5, 1, -1);
  v11->field_C = sub_10047360;
  v11->field_8 = (int(__cdecl *)())sub_10045AF0;
  v11->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0xAu);
  v12->meth13(v11, v13, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v25 = v3->field_33C - -19.0;
  v15->lpVtbl->meth14(v15, a1, v3->flags_338, v25, 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_10045AA0;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0xBu);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v3->field_18[v3->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v26 = v3->field_33C - -114.0;
  v19->lpVtbl->meth14(v19, a1, v3->flags_338, v26, 1056769, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = (int(__cdecl *)())sub_10046C90;
  v19->field_3838.field_1A99C[28] = 3;
  v21 = GetStringWithIndex(0xCu);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v3->field_18[v3->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v23->lpVtbl->meth14(v23, a1, 1117782016, 46.0, 9, 2, 5, 0, 6);
  ++v3->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;

//----- (1004F700) --------------------------------------------------------
int __cdecl s_unk000C8_1004F700(unk000C8 *a1) {
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // ebp
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // ebp
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // ebp
  unk1A5E0Vtbl *v12; // eax
  unk1A5E0 *v13;     // ebx
  int i;             // ebp
  unk1E214 *v15;     // eax
  unk1E214 *v16;     // ebp
  unk1E214Vtbl *v17; // ebx
  LPCSTR v18;        // eax
  FILE *v19;         // eax
  unk1E214 *v20;     // eax
  unk1E214 *v21;     // ebp
  unk1E214Vtbl *v22; // ebx
  LPCSTR v23;        // eax
  unk1E214 *v24;     // eax
  unk1E214 *v25;     // ebp
  unk1E214Vtbl *v26; // ebx
  LPCSTR v27;        // eax
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // ebp
  unk1E214 *v30;     // eax
  unk1E214 *v31;     // ebp
  unk1E214Vtbl *v32; // ebx
  LPCSTR v33;        // eax
  unk1E214 *v34;     // eax
  unk1E214 *v35;     // ebp
  unk1E214Vtbl *v36; // ebx
  unk1E214 *v37;     // eax
  unk1E214 *v38;     // ebp
  unk1E214Vtbl *v39; // ebx
  LPCSTR v40;        // eax
  unk1E214 *v41;     // eax
  unk1E214 *v42;     // ebp
  unk1E214Vtbl *v43; // ebx
  unk1E214 *v44;     // eax
  unk1E214 *v45;     // ebp
  unk1E214Vtbl *v46; // ebx
  LPCSTR v47;        // eax
  unk1E214 *v48;     // eax
  unk1E214 *v49;     // ebp
  unk1E214Vtbl *v50; // ebx
  float v52;         // [esp+240h] [ebp-38h]
  float v53;         // [esp+240h] [ebp-38h]
  float v54;         // [esp+240h] [ebp-38h]
  int v55;           // [esp+250h] [ebp-28h]
  int v56;           // [esp+27Ch] [ebp+4h]

  *(&a1->field_10 + 1) = 0;
  Value = -1;
  dword_10AA2848 = 1;
  gUnkC8Ptr6->field_C0->lpVtbl->meth1(gUnkC8Ptr6->field_C0, aRallyseasonBrf);
  dword_10AA2848 = 0;
  *(&a1->field_6C + a1->field_10) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 0x100009, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x34u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v11->lpVtbl->meth14(v11, a1, v3->flags_338, v3->field_33C, 0x3001, 2, 5, 1, -1);
  v12 = v11->field_3838.lpVtbl;
  v13 = &v11->field_3838;
  v11->field_4 = sub_1003EAE0;
  *(_DWORD *)&v11->field_3838.field_1A99C[16] = 1;
  v12->meth5(&v11->field_3838, 262145, dword_100AB538, 4, 0, -1);
  v11->field_3838.field_4[0] = (DWORD)sub_10042170;
  for (i = 0; i < 0x6590; i += 0x104) {
    if ((unk06594 *)((char *)gUnkC8Ptr6->field_C0 + i) != (unk06594 *)-4)
      v13->lpVtbl->meth4(v13, (char *)&gUnkC8Ptr6->field_C0->field_4 + i, 0, 1, dword_100AB4D8, 1);
  }
  ++v3->field_14;
  ++LOWORD(v3->last);
  v15 = (unk1E214 *)operator new(0x1E214u);
  if (v15)
    v16 = meth_unk1E214_init(v15);
  else
    v16 = 0;
  v3->field_18[v3->field_14] = v16;
  if (!v16)
    sub_1003E260(4);
  v17 = v16->lpVtbl;
  v52 = v3->field_33C - -76.0;
  v16->lpVtbl->meth14(v16, a1, v3->flags_338, v52, 0x103011, 2, 5, 1, -1);
  v16->field_C = sub_10047360;
  v16->field_8 = sub_10045090;
  v16->field_4 = sub_10041890;
  v16->field_3838.field_1A99C[28] = 2;
  v18 = GetStringWithIndex(0x1Eu);
  v17->meth13(v16, v18, 1, 0, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v56 = 1;
  v19 = fopen(aAutosaveBrf, Mode);
  if (v19)
    fclose(v19);
  else
    v56 = 0;
  v20 = (unk1E214 *)operator new(0x1E214u);
  if (v20)
    v21 = meth_unk1E214_init(v20);
  else
    v21 = 0;
  v3->field_18[v3->field_14] = v21;
  if (!v21)
    sub_1003E260(4);
  v22 = v21->lpVtbl;
  v53 = v3->field_33C - -95.0;
  v21->lpVtbl->meth14(v21, a1, v3->flags_338, v53, v56 != 0 ? 1056769 : 1056785, 2, 5, 1, -1);
  v21->field_C = sub_10047360;
  v21->field_8 = sub_100450C0;
  if (v56) {
    v21->field_3838.field_1A99C[28] = 3;
    v55 = 1;
  } else {
    v21->field_3838.field_1A99C[28] = 2;
    v55 = 0;
  }
  v23 = GetStringWithIndex(0x35u);
  v22->meth13(v21, v23, 1, v55, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v24 = (unk1E214 *)operator new(0x1E214u);
  if (v24)
    v25 = meth_unk1E214_init(v24);
  else
    v25 = 0;
  v3->field_18[v3->field_14] = v25;
  if (!v25)
    sub_1003E260(4);
  v26 = v25->lpVtbl;
  v54 = v3->field_33C - -114.0;
  v25->lpVtbl->meth14(v25, a1, v3->flags_338, v54, 0x102001, 2, 5, 1, -1);
  v25->field_C = sub_10047360;
  v25->field_8 = (int(__cdecl *)())sub_10046E10;
  v25->field_3838.field_1A99C[28] = 3;
  v27 = GetStringWithIndex(0xCu);
  v26->meth13(v25, v27, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v3->field_18[v3->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v29->lpVtbl->meth14(v29, a1, 0x42A00000, 46.0, 9, 2, 5, 0, 6);
  ++v3->field_14;
  v30 = (unk1E214 *)operator new(0x1E214u);
  if (v30)
    v31 = meth_unk1E214_init(v30);
  else
    v31 = 0;
  v3->field_18[v3->field_14] = v31;
  if (!v31)
    sub_1003E260(4);
  v32 = v31->lpVtbl;
  v31->lpVtbl->meth14(v31, a1, 0x43A50000, 153.0, 0x100009, 2, 5, 1, -1);
  v31->field_3838.field_1A99C[28] = 3;
  v33 = GetStringWithIndex(0x36u);
  v32->meth13(v31, v33, 1, 1, &unk_100AB468);
  ++v3->field_14;
  v34 = (unk1E214 *)operator new(0x1E214u);
  if (v34)
    v35 = meth_unk1E214_init(v34);
  else
    v35 = 0;
  v3->field_18[v3->field_14] = v35;
  if (!v35)
    sub_1003E260(4);
  v36 = v35->lpVtbl;
  v35->lpVtbl->meth14(v35, a1, 0x43A50000, 97.0, 0x5001, 2, 5, 1, -1);
  v35->field_4 = sub_10040A50;
  v35->field_3838.field_1A99C[28] = 5;
  v36->meth13(v35, String2, 1, 3, &unk_100AB468);
  ++v3->field_14;
  v37 = (unk1E214 *)operator new(0x1E214u);
  if (v37)
    v38 = meth_unk1E214_init(v37);
  else
    v38 = 0;
  v3->field_18[v3->field_14] = v38;
  if (!v38)
    sub_1003E260(4);
  v39 = v38->lpVtbl;
  v38->lpVtbl->meth14(v38, a1, 1138491392, 181.0, 1048585, 2, 5, 1, -1);
  v38->field_3838.field_1A99C[28] = 3;
  v40 = GetStringWithIndex(0x37u);
  v39->meth13(v38, v40, 1, 1, &unk_100AB488);
  ++v3->field_14;
  v41 = (unk1E214 *)operator new(0x1E214u);
  if (v41)
    v42 = meth_unk1E214_init(v41);
  else
    v42 = 0;
  v3->field_18[v3->field_14] = v42;
  if (!v42)
    sub_1003E260(4);
  v43 = v42->lpVtbl;
  v42->lpVtbl->meth14(v42, a1, 1138491392, 129.0, 20481, 2, 5, 1, -1);
  v42->field_4 = sub_10040AC0;
  v42->field_3838.field_1A99C[28] = 5;
  v43->meth13(v42, String2, 1, 3, &unk_100AB488);
  ++v3->field_14;
  v44 = (unk1E214 *)operator new(0x1E214u);
  if (v44)
    v45 = meth_unk1E214_init(v44);
  else
    v45 = 0;
  v3->field_18[v3->field_14] = v45;
  if (!v45)
    sub_1003E260(4);
  v46 = v45->lpVtbl;
  v45->lpVtbl->meth14(v45, a1, 1138491392, 243.0, 1048585, 2, 5, 1, -1);
  v45->field_3838.field_1A99C[28] = 3;
  v47 = GetStringWithIndex(0x38u);
  v46->meth13(v45, v47, 1, 1, &unk_100AB478);
  ++v3->field_14;
  v48 = (unk1E214 *)operator new(0x1E214u);
  if (v48)
    v49 = meth_unk1E214_init(v48);
  else
    v49 = 0;
  v3->field_18[v3->field_14] = v49;
  if (!v49)
    sub_1003E260(4);
  v50 = v49->lpVtbl;
  v49->lpVtbl->meth14(v49, a1, 1138491392, 224.0, 20481, 2, 5, 1, -1);
  v49->field_4 = sub_10041300;
  v49->field_3838.field_1A99C[28] = 0x34;
  v50->meth13(v49, String2, 1, 4, &unk_100AB478);
  ++v3->field_14;
  return 1;
}
// 10041300: using guessed type int __cdecl sub_10041300(int);
// 100AB448: using guessed type int dword_100AB448;
// 10AA2848: using guessed type int dword_10AA2848;

//----- (10050060) --------------------------------------------------------
int __cdecl s_unk000C8_10050060(unk000C8 *a1) {
  unk00348 *v1;      // eax
  unk00348 *v2;      // esi
  unk1E214 *v3;      // eax
  unk1E214 *v4;      // ebp
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // ebp
  unk1E214Vtbl *v7;  // ebx
  LPCSTR v8;         // eax
  unk1E214 *v9;      // eax
  unk1E214 *v10;     // ebp
  unk1A5E0Vtbl *v11; // eax
  unk1A5E0 *v12;     // ebx
  int i;             // ebp
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // ebp
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // ebp
  unk1E214Vtbl *v20; // ebx
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // ebp
  unk1E214 *v24;     // eax
  unk1E214 *v25;     // ebp
  unk1E214Vtbl *v26; // ebx
  LPCSTR v27;        // eax
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // ebp
  unk1E214Vtbl *v30; // ebx
  unk1E214 *v31;     // eax
  unk1E214 *v32;     // ebp
  unk1E214Vtbl *v33; // ebx
  LPCSTR v34;        // eax
  unk1E214 *v35;     // eax
  unk1E214 *v36;     // ebp
  unk1E214Vtbl *v37; // ebx
  unk1E214 *v38;     // eax
  unk1E214 *v39;     // ebp
  unk1E214Vtbl *v40; // ebx
  LPCSTR v41;        // eax
  unk1E214 *v42;     // eax
  unk1E214 *v43;     // ebp
  unk1E214Vtbl *v44; // ebx
  unk00348 *v45;     // eax
  unk00348 *v46;     // ebp
  unk1E214 *v47;     // eax
  unk1E214 *v48;     // esi
  unk1E214Vtbl *v49; // ebx
  LPCSTR v50;        // eax
  float v52;         // [esp+244h] [ebp-34h]
  float v53;         // [esp+244h] [ebp-34h]

  dword_10AA2848 = 1;
  gUnkC8Ptr6->field_C0->lpVtbl->meth1(gUnkC8Ptr6->field_C0, aRallyseasonBrf);
  dword_10AA2848 = 0;
  *(&a1->field_10 + 1) = 0;
  Value = -1;
  *(&a1->field_6C + a1->field_10) = 1;
  v1 = (unk00348 *)operator new(0x348u);
  if (v1)
    v2 = meth_unk00348_10048470(v1);
  else
    v2 = 0;
  a1->field_14[a1->field_10] = v2;
  if (!v2)
    sub_1003E260(4);
  ++a1->field_10;
  v2->field_340 = a1;
  v2->field_10 = 0;
  v2->flags_338 = 1128464384;
  v2->field_33C = 130.0;
  v3 = (unk1E214 *)operator new(0x1E214u);
  if (v3)
    v4 = meth_unk1E214_init(v3);
  else
    v4 = 0;
  v2->field_18[v2->field_14] = v4;
  if (!v4)
    sub_1003E260(4);
  v4->lpVtbl->meth14(v4, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v2->field_14;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v2->field_18[v2->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v7 = v6->lpVtbl;
  v6->lpVtbl->meth14(v6, a1, v2->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v6->field_3838.field_1A99C[28] = 3;
  v8 = GetStringWithIndex(0x39u);
  v7->meth13(v6, v8, 1, 1, &unk_100AB508);
  ++v2->field_14;
  v9 = (unk1E214 *)operator new(0x1E214u);
  if (v9)
    v10 = meth_unk1E214_init(v9);
  else
    v10 = 0;
  v2->field_18[v2->field_14] = v10;
  if (!v10)
    sub_1003E260(4);
  v10->lpVtbl->meth14(v10, a1, v2->flags_338, v2->field_33C, 12289, 2, 5, 1, -1);
  v11 = v10->field_3838.lpVtbl;
  v12 = &v10->field_3838;
  v10->field_4 = sub_1003EB10;
  *(_DWORD *)&v10->field_3838.field_1A99C[16] = 1;
  v11->meth5(&v10->field_3838, 262145, dword_100AB4D8, 5, 0, -1);
  v10->field_3838.field_4[0] = (DWORD)sub_10042020;
  v10->field_3838.field_4[4] = (DWORD)sub_10041DF0;
  for (i = 0; i < 26000; i += 260) {
    if ((unk06594 *)((char *)gUnkC8Ptr6->field_C0 + i) != (unk06594 *)-4)
      v12->lpVtbl->meth4(v12, (char *)&gUnkC8Ptr6->field_C0->field_4 + i, 0, 1, dword_100AB4D8, 0);
  }
  ++v2->field_14;
  ++LOWORD(v2->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v2->field_18[v2->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v52 = v2->field_33C - -95.0;
  v15->lpVtbl->meth14(v15, a1, v2->flags_338, v52, 1060881, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = (int(__cdecl *)())sub_100450F0;
  v15->field_4 = sub_100418D0;
  v15->field_3838.field_1A99C[28] = 2;
  v17 = GetStringWithIndex(0x1Eu);
  v16->meth13(v15, v17, 1, 0, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v2->field_18[v2->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v53 = v2->field_33C - -114.0;
  v19->lpVtbl->meth14(v19, a1, v2->flags_338, v53, 1056769, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = (int(__cdecl *)())sub_10046EB0;
  v19->field_3838.field_1A99C[28] = 3;
  v21 = GetStringWithIndex(0xCu);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  dword_10AA29F4 = (int)v19;
  ++v2->field_14;
  ++LOWORD(v2->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v2->field_18[v2->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v23->lpVtbl->meth14(v23, a1, 1117782016, 46.0, 9, 2, 5, 0, 6);
  ++v2->field_14;
  v24 = (unk1E214 *)operator new(0x1E214u);
  if (v24)
    v25 = meth_unk1E214_init(v24);
  else
    v25 = 0;
  v2->field_18[v2->field_14] = v25;
  if (!v25)
    sub_1003E260(4);
  v26 = v25->lpVtbl;
  v25->lpVtbl->meth14(v25, a1, 1134886912, 153.0, 1048585, 2, 5, 1, -1);
  v25->field_3838.field_1A99C[28] = 3;
  v27 = GetStringWithIndex(0x36u);
  v26->meth13(v25, v27, 1, 1, &unk_100AB468);
  ++v2->field_14;
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v2->field_18[v2->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v30 = v29->lpVtbl;
  v29->lpVtbl->meth14(v29, a1, 1134886912, 97.0, 20481, 2, 5, 1, -1);
  v29->field_4 = sub_10040A50;
  v29->field_3838.field_1A99C[28] = 5;
  v30->meth13(v29, String2, 1, 3, &unk_100AB468);
  ++v2->field_14;
  v31 = (unk1E214 *)operator new(0x1E214u);
  if (v31)
    v32 = meth_unk1E214_init(v31);
  else
    v32 = 0;
  v2->field_18[v2->field_14] = v32;
  if (!v32)
    sub_1003E260(4);
  v33 = v32->lpVtbl;
  v32->lpVtbl->meth14(v32, a1, 1138491392, 181.0, 1048585, 2, 5, 1, -1);
  v32->field_3838.field_1A99C[28] = 3;
  v34 = GetStringWithIndex(0x37u);
  v33->meth13(v32, v34, 1, 1, &unk_100AB488);
  ++v2->field_14;
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v2->field_18[v2->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  v36->lpVtbl->meth14(v36, a1, 1138491392, 129.0, 20481, 2, 5, 1, -1);
  v36->field_4 = sub_10040AC0;
  v36->field_3838.field_1A99C[28] = 5;
  v37->meth13(v36, String2, 1, 3, &unk_100AB488);
  ++v2->field_14;
  v38 = (unk1E214 *)operator new(0x1E214u);
  if (v38)
    v39 = meth_unk1E214_init(v38);
  else
    v39 = 0;
  v2->field_18[v2->field_14] = v39;
  if (!v39)
    sub_1003E260(4);
  v40 = v39->lpVtbl;
  v39->lpVtbl->meth14(v39, a1, 1138491392, 243.0, 1048585, 2, 5, 1, -1);
  v39->field_3838.field_1A99C[28] = 3;
  v41 = GetStringWithIndex(0x38u);
  v40->meth13(v39, v41, 1, 1, &unk_100AB478);
  ++v2->field_14;
  v42 = (unk1E214 *)operator new(0x1E214u);
  if (v42)
    v43 = meth_unk1E214_init(v42);
  else
    v43 = 0;
  v2->field_18[v2->field_14] = v43;
  if (!v43)
    sub_1003E260(4);
  v44 = v43->lpVtbl;
  v43->lpVtbl->meth14(v43, a1, 1138491392, 224.0, 20481, 2, 5, 1, -1);
  v43->field_4 = sub_10041300;
  v43->field_3838.field_1A99C[28] = 52;
  v44->meth13(v43, String2, 1, 4, &unk_100AB478);
  ++v2->field_14;
  *(&a1->field_6C + a1->field_10) = 0;
  v45 = (unk00348 *)operator new(0x348u);
  if (v45)
    v46 = meth_unk00348_10048470(v45);
  else
    v46 = 0;
  a1->field_14[a1->field_10] = v46;
  if (!v46)
    sub_1003E260(4);
  ++a1->field_10;
  v46->field_340 = a1;
  v46->field_10 = 0;
  v46->flags_338 = 1128464384;
  v46->field_33C = 130.0;
  v47 = (unk1E214 *)operator new(0x1E214u);
  if (v47)
    v48 = meth_unk1E214_init(v47);
  else
    v48 = 0;
  v46->field_18[v46->field_14] = v48;
  if (!v48)
    sub_1003E260(4);
  v49 = v48->lpVtbl;
  v48->lpVtbl->meth14(v48, a1, 0, 232.0, 1048585, 2, 5, 1, -1);
  v48->field_C = sub_10047360;
  v48->field_4 = sub_10047210;
  v48->field_14 = (int)sub_1003E7A0;
  v48->field_3838.field_1A99C[28] = 3;
  v50 = GetStringWithIndex(0x3Au);
  v49->meth13(v48, v50, 1, 1, &unk_100AB438);
  dword_10AA29C0 = (int)v48;
  ++v46->field_14;
  return 1;
}
// 10041300: using guessed type int __cdecl sub_10041300(int);
// 100AB448: using guessed type int dword_100AB448;
// 10AA2848: using guessed type int dword_10AA2848;
// 10AA29C0: using guessed type int dword_10AA29C0;
// 10AA29F4: using guessed type int dword_10AA29F4;

//----- (100509F0) --------------------------------------------------------
int __cdecl s_unk000C8_100509F0(unk000C8 *a1) {
  WORD v2;            // ax
  unk00348 *v3;       // eax
  unk00348 *v4;       // esi
  WORD v5;            // cx
  unk1E214 *v6;       // eax
  unk1E214 *v7;       // ebp
  WORD v8;            // dx
  unk1E214 *v9;       // eax
  unk1E214 *v10;      // ebp
  WORD v11;           // cx
  unk1E214Vtbl *v12;  // ebx
  LPCSTR v13;         // eax
  unk1E214 *v14;      // eax
  unk1E214 *v15;      // ebp
  unk1A5E0Vtbl *v16;  // eax
  unk1A5E0 *v17;      // ebx
  int v18;            // eax
  int v19;            // ebp
  char *v20;          // eax
  const char *v21;    // eax
  unk1E214 *v22;      // eax
  unk1E214 *v23;      // ebp
  unk1E214Vtbl *v24;  // ebx
  LPCSTR v25;         // eax
  unk1E214 *v26;      // eax
  unk1E214 *v27;      // ebp
  WORD v28;           // dx
  unk1E214Vtbl *v29;  // ebx
  LPCSTR v30;         // eax
  unk1E214 *v31;      // eax
  unk1E214 *v32;      // ebp
  WORD v33;           // cx
  int v34;            // ebx
  unk1E214 *v35;      // eax
  unk1E214 *v36;      // ebp
  __int64 v37;        // rax
  unk1E214 *v38;      // eax
  unk1E214 *v39;      // ebp
  __int64 v40;        // rax
  unk1E214 *v41;      // eax
  unk1E214 *v42;      // ebp
  WORD v43;           // ax
  WORD v44;           // ax
  unk1E214 *v45;      // eax
  unk1E214 *v46;      // ebp
  WORD v47;           // cx
  unk1E214Vtbl *v48;  // ebx
  unk1E214 *v49;      // eax
  unk1E214 *v50;      // ebp
  WORD v51;           // ax
  WORD v52;           // ax
  unk1E214 *v53;      // eax
  unk1E214 *v54;      // ebp
  WORD v55;           // cx
  unk1E214Vtbl *v56;  // ebx
  unk1E214 *v57;      // eax
  unk1E214 *v58;      // ebp
  unk1E214Vtbl *v59;  // ebx
  LPCSTR v60;         // eax
  unk1E214 *v61;      // eax
  unk1E214 *v62;      // ebp
  WORD v63;           // cx
  unk1E214Vtbl *v64;  // ebx
  unk1E214 *v65;      // eax
  unk1E214 *v66;      // ebp
  WORD v67;           // dx
  unk1E214Vtbl *v68;  // ebx
  LPCSTR v69;         // eax
  unk1E214 *v70;      // eax
  unk1E214 *v71;      // ebp
  unk1E214Vtbl *v72;  // ebx
  unk1E214 *v73;      // eax
  unk1E214 *v74;      // ebp
  WORD v75;           // cx
  unk1E214Vtbl *v76;  // ebx
  LPCSTR v77;         // eax
  unk1E214 *v78;      // eax
  unk1E214 *v79;      // ebp
  unk1E214Vtbl *v80;  // ebx
  LPCSTR v81;         // eax
  unk1E214 *v82;      // eax
  unk1E214 *v83;      // ebp
  WORD v84;           // dx
  unk1E214Vtbl *v85;  // ebx
  unk1E214 *v86;      // eax
  unk1E214 *v87;      // ebp
  unk1E214Vtbl *v88;  // ebx
  LPCSTR v89;         // eax
  unk1E214 *v90;      // eax
  unk1E214 *v91;      // ebp
  WORD v92;           // cx
  unk1E214Vtbl *v93;  // ebx
  unk1E214 *v94;      // eax
  unk1E214 *v95;      // ebp
  WORD v96;           // dx
  unk1E214Vtbl *v97;  // ebx
  LPCSTR v98;         // eax
  unk1E214 *v99;      // eax
  unk1E214 *v100;     // ebp
  unk1E214Vtbl *v101; // ebx
  float v103;         // [esp+394h] [ebp-80h]
  float v104;         // [esp+394h] [ebp-80h]
  char *v105;         // [esp+3A8h] [ebp-6Ch]
  float v106;         // [esp+3BCh] [ebp-58h]
  int v107;           // [esp+3C0h] [ebp-54h]
  int v108;           // [esp+3C4h] [ebp-50h]
  char v109[4];       // [esp+3C8h] [ebp-4Ch] BYREF
  char Buffer[32];    // [esp+3E8h] [ebp-2Ch] BYREF
  int v111;           // [esp+410h] [ebp-4h]
  unk000C8 *v112;     // [esp+418h] [ebp+4h]
  float v113;         // [esp+418h] [ebp+4h]
  float v114;         // [esp+418h] [ebp+4h]
  float v115;         // [esp+418h] [ebp+4h]

  v2 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v2) = 1;
  v3 = (unk00348 *)operator new(0x348u);
  v111 = 0;
  if (v3)
    v4 = meth_unk00348_10048470(v3);
  else
    v4 = 0;
  v5 = a1->field_10;
  v111 = -1;
  a1->field_14[v5] = v4;
  if (!v4)
    sub_1003E260(4);
  ++a1->field_10;
  v4->field_340 = a1;
  v4->field_10 = 0;
  v4->flags_338 = 1128464384;
  v4->field_33C = 130.0;
  v6 = (unk1E214 *)operator new(0x1E214u);
  v111 = 1;
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v8 = v4->field_14;
  v111 = -1;
  v4->field_18[v8] = v7;
  if (!v7)
    sub_1003E260(4);
  v7->lpVtbl->meth14(v7, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v4->field_14;
  v9 = (unk1E214 *)operator new(0x1E214u);
  v111 = 2;
  if (v9)
    v10 = meth_unk1E214_init(v9);
  else
    v10 = 0;
  v11 = v4->field_14;
  v111 = -1;
  v4->field_18[v11] = v10;
  if (!v10)
    sub_1003E260(4);
  v12 = v10->lpVtbl;
  v10->lpVtbl->meth14(v10, a1, v4->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v10->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0x3Du);
  v12->meth13(v10, v13, 1, 1, &unk_100AB508);
  ++v4->field_14;
  v14 = (unk1E214 *)operator new(0x1E214u);
  v111 = 3;
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v15->lpVtbl->meth14(v15, a1, v4->flags_338, v4->field_33C, 12289, 2, 5, 1, -1);
  v16 = v15->field_3838.lpVtbl;
  v17 = &v15->field_3838;
  v15->field_4 = sub_1003EB60;
  *(_DWORD *)&v15->field_3838.field_1A99C[16] = 1;
  v16->meth5(&v15->field_3838, 2359296, dword_100AB4D8, 5, 0, -1);
  v15->field_14 = (int)sub_1003E8B0;
  v15->field_18 = (int)sub_1003E8C0;
  v18 = 0;
  if (dword_100B3814[6 * (char)dword_10AA28B8] > 0) {
    v112 = (unk000C8 *)v17->lpVtbl->meth4;
    do {
      v19 = v18 + 1;
      v20 = _itoa(v18 + 1, Buffer, 10);
      v105 = _strupr(v20);
      v21 = GetStringWithIndex(0xBFu);
      sprintf(v109, v21, v105);
      ((void(__thiscall *)(unk1A5E0 *, char *, int, int, int *, int))v112)(
          v17, v109, 1, 1, &dword_100AB448, 1);
      v18 = v19;
    } while (v19 < dword_100B3814[6 * (char)dword_10AA28B8]);
  }
  ++v4->field_14;
  v22 = (unk1E214 *)operator new(0x1E214u);
  v111 = 4;
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v24 = v23->lpVtbl;
  v103 = v4->field_33C - -95.0;
  v23->lpVtbl->meth14(v23, a1, v4->flags_338, v103, 1056769, 2, 5, 1, -1);
  v23->field_C = sub_10047360;
  v23->field_8 = sub_10045DC0;
  v23->field_3838.field_1A99C[28] = 2;
  v25 = GetStringWithIndex(0x1Eu);
  v24->meth13(v23, v25, 1, 0, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v26 = (unk1E214 *)operator new(0x1E214u);
  v111 = 5;
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v28 = v4->field_14;
  v111 = -1;
  v4->field_18[v28] = v27;
  if (!v27)
    sub_1003E260(4);
  v29 = v27->lpVtbl;
  v104 = v4->field_33C - -114.0;
  v27->lpVtbl->meth14(v27, a1, v4->flags_338, v104, 1056769, 2, 5, 1, -1);
  v27->field_C = sub_10047360;
  v27->field_8 = sub_10046F50;
  v27->field_14 = (int)sub_1003E840;
  v27->field_3838.field_1A99C[28] = 3;
  v30 = GetStringWithIndex(0xCu);
  v29->meth13(v27, v30, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v106 = (float)dword_100AB428;
  v113 = (float)dword_100AB42C;
  v31 = (unk1E214 *)operator new(0x1E214u);
  v111 = 6;
  if (v31)
    v32 = meth_unk1E214_init(v31);
  else
    v32 = 0;
  v33 = v4->field_14;
  v111 = -1;
  v4->field_18[v33] = v32;
  if (!v32)
    sub_1003E260(4);
  v32->lpVtbl->meth14(v32, a1, LODWORD(v106), v113, 4202497, 2, 5, 1, 120);
  v32->field_C = sub_10047360;
  v32->field_8 = sub_100457A0;
  v108 = (__int64)v113;
  *(_DWORD *)v32->gap54 = v108;
  v34 = (__int64)v106;
  v32->field_50 = v34;
  v32->field_58 = v34 + 127;
  *(_DWORD *)v32->gap5C = v108 + 33;
  v32->field_2968 = 0;
  v114 = v113 - -33.0;
  *(_WORD *)&v32->field_2A40[2] = 121;
  ++v4->field_14;
  v107 = v34 + 127;
  v35 = (unk1E214 *)operator new(0x1E214u);
  v111 = 7;
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v36->lpVtbl->meth14(v36, a1, LODWORD(v106), v114, 4202497, 2, 5, 1, 82);
  v36->field_C = sub_10047360;
  v36->field_8 = (int(__cdecl *)())sub_10043FA0;
  v37 = (__int64)v114;
  *(_DWORD *)v36->gap54 = v37;
  v36->field_50 = v34;
  v36->field_58 = v107;
  *(_DWORD *)v36->gap5C = v37 + 33;
  v115 = v114 - -33.0;
  v36->field_2968 = 0;
  *(_WORD *)&v36->field_2A40[2] = 83;
  ++v4->field_14;
  v38 = (unk1E214 *)operator new(0x1E214u);
  v111 = 8;
  if (v38)
    v39 = meth_unk1E214_init(v38);
  else
    v39 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v39;
  if (!v39)
    sub_1003E260(4);
  v39->lpVtbl->meth14(v39, a1, LODWORD(v106), v115, 4202497, 2, 5, 1, 84);
  v39->field_C = sub_10047360;
  v39->field_8 = sub_10045780;
  v40 = (__int64)v115;
  *(_DWORD *)v39->gap54 = v40;
  v39->field_50 = v34;
  v39->field_58 = v107;
  *(_DWORD *)v39->gap5C = v40 + 33;
  v39->field_2968 = 0;
  *(_WORD *)&v39->field_2A40[2] = 85;
  ++v4->field_14;
  v41 = (unk1E214 *)operator new(0x1E214u);
  v111 = 9;
  if (v41)
    v42 = meth_unk1E214_init(v41);
  else
    v42 = 0;
  v43 = v4->field_14;
  v111 = -1;
  v4->field_18[v43] = v42;
  if (!v42)
    sub_1003E260(4);
  v42->lpVtbl->meth14(v42, a1, 1116864512, 212.0, 1, 2, 5, 1, 22);
  v42->field_4 = sub_100407E0;
  v44 = v4->field_14 + 1;
  ++v42->field_2AB4[0];
  v42->field_2AB4[1] = v44;
  ++v4->field_14;
  v45 = (unk1E214 *)operator new(0x1E214u);
  v111 = 10;
  if (v45)
    v46 = meth_unk1E214_init(v45);
  else
    v46 = 0;
  v47 = v4->field_14;
  v111 = -1;
  v4->field_18[v47] = v46;
  if (!v46)
    sub_1003E260(4);
  v48 = v46->lpVtbl;
  v46->lpVtbl->meth14(v46, a1, v4->flags_338, 275.0, 1052673, 2, 5, 1, -1);
  v46->field_4 = sub_1003FE80;
  v46->field_3838.field_1A99C[28] = 3;
  v48->meth13(v46, asc_100AD300, 1, 1, &unk_100AB4B8);
  ++v4->field_14;
  v49 = (unk1E214 *)operator new(0x1E214u);
  v111 = 11;
  if (v49)
    v50 = meth_unk1E214_init(v49);
  else
    v50 = 0;
  v51 = v4->field_14;
  v111 = -1;
  v4->field_18[v51] = v50;
  if (!v50)
    sub_1003E260(4);
  v50->lpVtbl->meth14(v50, a1, 1134723072, 72.0, 1, 2, 5, 1, 17);
  v50->field_4 = sub_10040730;
  v52 = v4->field_14 + 1;
  ++v50->field_2AB4[0];
  v50->field_2AB4[1] = v52;
  ++v4->field_14;
  v53 = (unk1E214 *)operator new(0x1E214u);
  v111 = 12;
  if (v53)
    v54 = meth_unk1E214_init(v53);
  else
    v54 = 0;
  v55 = v4->field_14;
  v111 = -1;
  v4->field_18[v55] = v54;
  if (!v54)
    sub_1003E260(4);
  v56 = v54->lpVtbl;
  v54->lpVtbl->meth14(v54, a1, v4->flags_338, 152.0, 1052673, 2, 5, 1, -1);
  v54->field_4 = sub_1003FA00;
  v54->field_3838.field_1A99C[28] = 3;
  v56->meth13(v54, asc_100AD300, 1, 1, &unk_100AB4A8);
  ++v4->field_14;
  v57 = (unk1E214 *)operator new(0x1E214u);
  v111 = 13;
  if (v57)
    v58 = meth_unk1E214_init(v57);
  else
    v58 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v58;
  if (!v58)
    sub_1003E260(4);
  v59 = v58->lpVtbl;
  v58->lpVtbl->meth14(v58, a1, 1138819072, 147.0, 1048585, 2, 5, 1, -1);
  v58->field_3838.field_1A99C[28] = 3;
  v60 = GetStringWithIndex(0x3Eu);
  v59->meth13(v58, v60, 1, 1, &unk_100AB4F8);
  ++v4->field_14;
  v61 = (unk1E214 *)operator new(0x1E214u);
  v111 = 14;
  if (v61)
    v62 = meth_unk1E214_init(v61);
  else
    v62 = 0;
  v63 = v4->field_14;
  v111 = -1;
  v4->field_18[v63] = v62;
  if (!v62)
    sub_1003E260(4);
  v64 = v62->lpVtbl;
  v62->lpVtbl->meth14(v62, a1, 1138819072, 128.0, 20481, 2, 5, 1, -1);
  v62->field_4 = sub_10040C00;
  v62->field_3838.field_1A99C[28] = 52;
  v64->meth13(v62, String2, 1, 4, &unk_100AB4F8);
  ++v4->field_14;
  v65 = (unk1E214 *)operator new(0x1E214u);
  v111 = 15;
  if (v65)
    v66 = meth_unk1E214_init(v65);
  else
    v66 = 0;
  v67 = v4->field_14;
  v111 = -1;
  v4->field_18[v67] = v66;
  if (!v66)
    sub_1003E260(4);
  v68 = v66->lpVtbl;
  v66->lpVtbl->meth14(v66, a1, 1138819072, 185.0, 1048585, 2, 5, 1, -1);
  v66->field_3838.field_1A99C[28] = 3;
  v69 = GetStringWithIndex(0x3Fu);
  v68->meth13(v66, v69, 1, 1, &unk_100AB4F8);
  ++v4->field_14;
  v70 = (unk1E214 *)operator new(0x1E214u);
  v111 = 16;
  if (v70)
    v71 = meth_unk1E214_init(v70);
  else
    v71 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v71;
  if (!v71)
    sub_1003E260(4);
  v72 = v71->lpVtbl;
  v71->lpVtbl->meth14(v71, a1, 1138819072, 166.0, 20481, 2, 5, 1, -1);
  v71->field_4 = sub_10040D70;
  v71->field_3838.field_1A99C[28] = 52;
  v72->meth13(v71, String2, 1, 4, &unk_100AB4F8);
  ++v4->field_14;
  v73 = (unk1E214 *)operator new(0x1E214u);
  v111 = 17;
  if (v73)
    v74 = meth_unk1E214_init(v73);
  else
    v74 = 0;
  v75 = v4->field_14;
  v111 = -1;
  v4->field_18[v75] = v74;
  if (!v74)
    sub_1003E260(4);
  v76 = v74->lpVtbl;
  v74->lpVtbl->meth14(v74, a1, v4->flags_338, 203.0, 1048585, 2, 5, 1, -1);
  v74->field_3838.field_1A99C[28] = 3;
  v77 = GetStringWithIndex(0x40u);
  v76->meth13(v74, v77, 1, 1, &unk_100AB478);
  ++v4->field_14;
  v78 = (unk1E214 *)operator new(0x1E214u);
  v111 = 18;
  if (v78)
    v79 = meth_unk1E214_init(v78);
  else
    v79 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v79;
  if (!v79)
    sub_1003E260(4);
  v80 = v79->lpVtbl;
  v79->lpVtbl->meth14(v79, a1, v4->flags_338, 265.0, 1048585, 2, 5, 1, -1);
  v79->field_3838.field_1A99C[28] = 3;
  v81 = GetStringWithIndex(0x41u);
  v80->meth13(v79, v81, 1, 1, &unk_100AB478);
  ++v4->field_14;
  v82 = (unk1E214 *)operator new(0x1E214u);
  v111 = 19;
  if (v82)
    v83 = meth_unk1E214_init(v82);
  else
    v83 = 0;
  v84 = v4->field_14;
  v111 = -1;
  v4->field_18[v84] = v83;
  if (!v83)
    sub_1003E260(4);
  v85 = v83->lpVtbl;
  v83->lpVtbl->meth14(v83, a1, 1138819072, 217.0, 20481, 2, 5, 1, -1);
  v83->field_4 = sub_100414B0;
  v83->field_3838.field_1A99C[28] = 5;
  v85->meth13(v83, String2, 1, 3, &unk_100AB478);
  ++v4->field_14;
  v86 = (unk1E214 *)operator new(0x1E214u);
  v111 = 20;
  if (v86)
    v87 = meth_unk1E214_init(v86);
  else
    v87 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v87;
  if (!v87)
    sub_1003E260(4);
  v88 = v87->lpVtbl;
  v87->lpVtbl->meth14(v87, a1, 1121189888, 85.0, 1048577, 2, 5, 1, -1);
  v87->field_3838.field_1A99C[28] = 3;
  v89 = GetStringWithIndex(0x38u);
  v88->meth13(v87, v89, 1, 1, &unk_100AB458);
  ++v4->field_14;
  v90 = (unk1E214 *)operator new(0x1E214u);
  v111 = 21;
  if (v90)
    v91 = meth_unk1E214_init(v90);
  else
    v91 = 0;
  v92 = v4->field_14;
  v111 = -1;
  v4->field_18[v92] = v91;
  if (!v91)
    sub_1003E260(4);
  v93 = v91->lpVtbl;
  v91->lpVtbl->meth14(v91, a1, 1138491392, 66.0, 20481, 2, 5, 1, -1);
  v91->field_4 = sub_10041300;
  v91->field_3838.field_1A99C[28] = 52;
  v93->meth13(v91, String2, 1, 4, &unk_100AB458);
  ++v4->field_14;
  v94 = (unk1E214 *)operator new(0x1E214u);
  v111 = 22;
  if (v94)
    v95 = meth_unk1E214_init(v94);
  else
    v95 = 0;
  v96 = v4->field_14;
  v111 = -1;
  v4->field_18[v96] = v95;
  if (!v95)
    sub_1003E260(4);
  v97 = v95->lpVtbl;
  v95->lpVtbl->meth14(v95, a1, 1121189888, 123.0, 1048577, 2, 5, 1, -1);
  v95->field_3838.field_1A99C[28] = 3;
  v98 = GetStringWithIndex(0x36u);
  v97->meth13(v95, v98, 1, 1, &unk_100AB458);
  ++v4->field_14;
  v99 = (unk1E214 *)operator new(0x1E214u);
  v111 = 23;
  if (v99)
    v100 = meth_unk1E214_init(v99);
  else
    v100 = 0;
  v111 = -1;
  v4->field_18[v4->field_14] = v100;
  if (!v100)
    sub_1003E260(4);
  v101 = v100->lpVtbl;
  v100->lpVtbl->meth14(v100, a1, 1138491392, 104.0, 20481, 2, 5, 1, -1);
  v100->field_4 = sub_100413B0;
  v100->field_3838.field_1A99C[28] = 52;
  v101->meth13(v100, String2, 1, 4, &unk_100AB458);
  ++v4->field_14;
  return 1;
}
// 1003E8B0: using guessed type int sub_1003E8B0();
// 1003E8C0: using guessed type int sub_1003E8C0();
// 1003EB60: using guessed type int __cdecl sub_1003EB60(int);
// 1003FA00: using guessed type int __cdecl sub_1003FA00(int);
// 1003FE80: using guessed type int __cdecl sub_1003FE80(int);
// 10040730: using guessed type int __cdecl sub_10040730(int);
// 100407E0: using guessed type int __cdecl sub_100407E0(int);
// 10041300: using guessed type int __cdecl sub_10041300(int);
// 100413B0: using guessed type int __cdecl sub_100413B0(int);
// 10043FA0: using guessed type int __cdecl sub_10043FA0(int);
// 100AB428: using guessed type int dword_100AB428;
// 100AB42C: using guessed type int dword_100AB42C;
// 100AB448: using guessed type int dword_100AB448;
// 100B3814: using guessed type int dword_100B3814[];
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (10051990) --------------------------------------------------------
int __cdecl s_unk000C8_10051990(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214 *v8;      // eax
  unk1E214 *v9;      // edi
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214 *v12;     // eax
  unk1E214 *v13;     // edi
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v7->lpVtbl->meth14(v7, a1, 0, 29.0, 9, 2, 5, 0, 78);
  ++v3->field_14;
  v8 = (unk1E214 *)operator new(0x1E214u);
  if (v8)
    v9 = meth_unk1E214_init(v8);
  else
    v9 = 0;
  v3->field_18[v3->field_14] = v9;
  if (!v9)
    sub_1003E260(4);
  v9->lpVtbl->meth14(v9, a1, 1095761920, 7.0, 9, 2, 5, 0, 79);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v11->lpVtbl->meth14(v11, a1, 1098907648, 153.0, 9, 2, 5, 1, 71);
  v11->field_4 = sub_1003F440;
  ++v3->field_14;
  v12 = (unk1E214 *)operator new(0x1E214u);
  if (v12)
    v13 = meth_unk1E214_init(v12);
  else
    v13 = 0;
  v3->field_18[v3->field_14] = v13;
  if (!v13)
    sub_1003E260(4);
  v13->lpVtbl->meth14(v13, a1, 1136918528, 181.0, 9, 2, 5, 1, 72);
  v13->field_4 = sub_1003F540;
  ++v3->field_14;
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v15->lpVtbl->meth14(v15, a1, v3->flags_338, 460.0, 1056769, 2, 5, 0, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = (int(__cdecl *)())sub_10047120;
  v15->field_4 = (int(__cdecl *)(int))sub_100471F0;
  v15->field_3838.field_1A99C[28] = 2;
  v17 = GetStringWithIndex(0x42u);
  v16->meth13(v15, v17, 1, 0, &unk_100AB438);
  ++v3->field_14;
  ++LOWORD(v3->last);
  return 1;
}
// 1003F440: using guessed type int __cdecl sub_1003F440(int);
// 1003F540: using guessed type int __cdecl sub_1003F540(int);

//----- (10051D30) --------------------------------------------------------
int __cdecl s_unk000C8_10051D30(unk000C8 *a1) {
  WORD v1;          // ax
  unk00348 *v2;     // eax
  unk00348 *v3;     // esi
  unk1E214 *v4;     // eax
  unk1E214 *v5;     // edi
  unk1E214 *v6;     // eax
  unk1E214 *v7;     // edi
  unk1E214Vtbl *v8; // ebx
  LPCSTR v9;        // eax
  unk1E214 *v10;    // eax
  unk1E214 *v11;    // edi
  char *v12;        // ecx
  char *v13;        // eax
  int v14;          // edx
  char *v15;        // ecx
  char *v16;        // eax
  int v17;          // edx
  float v19;        // [esp+50h] [ebp-38h]
  float v20;        // [esp+54h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x43u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB438);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v20 = v3->field_33C - 12.0;
  v19 = *(float *)&v3->flags_338 - 8.0;
  v11->lpVtbl->meth14(v11, a1, LODWORD(v19), v20, 139265, 2, 5, 0, 80);
  v11->last = (int)&unk_10A9DA50;
  v11->field_2968 = 1;
  v11->field_296C = 1;
  v12 = v11->field_2A40;
  v13 = v11->field_2978;
  v14 = 15;
  do {
    *(_DWORD *)v13 = 60;
    *(_WORD *)v12 = 80;
    v13 += 4;
    v12 += 2;
    --v14;
  } while (v14);
  v15 = &v11->field_2A40[30];
  v16 = &v11->field_2978[60];
  v17 = 9;
  do {
    *(_DWORD *)v16 = 60;
    *(_WORD *)v15 = 81;
    v16 += 4;
    v15 += 2;
    --v17;
  } while (v17);
  v11->field_8 = (int(__cdecl *)())sub_100471B0;
  v11->field_3838.field_1A99C[28] = 80;
  *(_DWORD *)v11->gap54 = (__int64)v3->field_33C;
  v11->field_50 = (__int64)*(float *)&v3->flags_338;
  v11->field_58 = (__int64)*(float *)&v3->flags_338 + 128;
  *(_DWORD *)v11->gap5C = (__int64)v3->field_33C + 128;
  ++v3->field_14;
  ++LOWORD(v3->last);
  return 1;
}

//----- (10052030) --------------------------------------------------------
int __cdecl s_unk000C8_10052030(unk000C8 *a1) {
  WORD v2;           // ax
  unk00348 *v3;      // eax
  unk00348 *v4;      // esi
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // ebp
  unk1E214 *v7;      // eax
  unk1E214 *v8;      // ebp
  unk1E214Vtbl *v9;  // ebx
  LPCSTR v10;        // eax
  unk1E214 *v11;     // eax
  unk1E214 *v12;     // ebp
  unk1E214Vtbl *v13; // ebx
  LPCSTR v14;        // eax
  unk1E214 *v15;     // eax
  unk1E214 *v16;     // ebp
  unk1E214Vtbl *v17; // ebx
  LPCSTR v18;        // eax
  unk1E214 *v19;     // eax
  unk1E214 *v20;     // ebp
  unk1E214Vtbl *v21; // ebx
  LPCSTR v22;        // eax
  unk1E214 *v23;     // eax
  unk1E214 *v24;     // ebp
  int v25;           // ebx
  unk1E214 *v26;     // eax
  unk1E214 *v27;     // ebp
  __int64 v28;       // rax
  unk1E214 *v29;     // eax
  unk1E214 *v30;     // ebp
  __int64 v31;       // rax
  unk1E214 *v32;     // eax
  unk1E214 *v33;     // ebp
  WORD v34;          // ax
  unk1E214 *v35;     // eax
  unk1E214 *v36;     // ebp
  unk1E214Vtbl *v37; // ebx
  unk1E214 *v38;     // eax
  unk1E214 *v39;     // ebp
  WORD v40;          // ax
  unk1E214 *v41;     // eax
  unk1E214 *v42;     // ebp
  unk1E214Vtbl *v43; // ebx
  unk1E214 *v44;     // eax
  unk1E214 *v45;     // ebp
  unk1E214Vtbl *v46; // ebx
  LPCSTR v47;        // eax
  unk1E214 *v48;     // eax
  unk1E214 *v49;     // ebp
  unk1E214Vtbl *v50; // ebx
  LPCSTR v51;        // eax
  unk1E214 *v52;     // eax
  unk1E214 *v53;     // ebp
  unk1E214Vtbl *v54; // ebx
  unk1E214 *v55;     // eax
  unk1E214 *v56;     // ebp
  unk1E214Vtbl *v57; // ebx
  LPCSTR v58;        // eax
  unk1E214 *v59;     // eax
  unk1E214 *v60;     // ebp
  unk1E214Vtbl *v61; // ebx
  LPCSTR v62;        // eax
  unk1E214 *v63;     // eax
  unk1E214 *v64;     // ebp
  unk1E214Vtbl *v65; // ebx
  unk1E214 *v66;     // eax
  unk1E214 *v67;     // ebp
  unk1E214Vtbl *v68; // ebx
  LPCSTR v69;        // eax
  unk1E214 *v70;     // eax
  unk1E214 *v71;     // ebp
  unk1E214Vtbl *v72; // ebx
  unk1E214 *v73;     // eax
  unk1E214 *v74;     // ebp
  unk1E214Vtbl *v75; // ebx
  LPCSTR v76;        // eax
  unk1E214 *v77;     // eax
  unk1E214 *v78;     // ebp
  unk1E214Vtbl *v79; // ebx
  unk1E214 *v80;     // eax
  unk1E214 *v81;     // ebp
  unk1E214Vtbl *v82; // ebx
  float v84;         // [esp+3C0h] [ebp-40h]
  float v85;         // [esp+3C0h] [ebp-40h]
  float v86;         // [esp+3C0h] [ebp-40h]
  float v87;         // [esp+3C0h] [ebp-40h]
  float v88;         // [esp+3E8h] [ebp-18h]
  int v89;           // [esp+3ECh] [ebp-14h]
  int v90;           // [esp+3F0h] [ebp-10h]
  float v91;         // [esp+404h] [ebp+4h]
  float v92;         // [esp+404h] [ebp+4h]
  float v93;         // [esp+404h] [ebp+4h]

  v2 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v2) = 1;
  v3 = (unk00348 *)operator new(0x348u);
  if (v3)
    v4 = meth_unk00348_10048470(v3);
  else
    v4 = 0;
  a1->field_14[a1->field_10] = v4;
  if (!v4)
    sub_1003E260(4);
  ++a1->field_10;
  v4->field_340 = a1;
  v4->field_10 = 0;
  v4->flags_338 = 1128464384;
  v4->field_33C = 130.0;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v4->field_18[v4->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v6->lpVtbl->meth14(v6, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v4->field_14;
  v7 = (unk1E214 *)operator new(0x1E214u);
  if (v7)
    v8 = meth_unk1E214_init(v7);
  else
    v8 = 0;
  v4->field_18[v4->field_14] = v8;
  if (!v8)
    sub_1003E260(4);
  v9 = v8->lpVtbl;
  v8->lpVtbl->meth14(v8, a1, v4->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v8->field_3838.field_1A99C[28] = 3;
  v10 = GetStringWithIndex(0x44u);
  v9->meth13(v8, v10, 1, 1, &unk_100AB508);
  ++v4->field_14;
  v11 = (unk1E214 *)operator new(0x1E214u);
  if (v11)
    v12 = meth_unk1E214_init(v11);
  else
    v12 = 0;
  v4->field_18[v4->field_14] = v12;
  if (!v12)
    sub_1003E260(4);
  v13 = v12->lpVtbl;
  v84 = v4->field_33C - -19.0;
  v12->lpVtbl->meth14(v12, a1, v4->flags_338, v84, 1056769, 2, 5, 1, -1);
  v12->field_C = sub_10047360;
  v12->field_8 = sub_10047340;
  v12->field_3838.field_1A99C[28] = 3;
  v14 = GetStringWithIndex(0x45u);
  v13->meth13(v12, v14, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v15 = (unk1E214 *)operator new(0x1E214u);
  if (v15)
    v16 = meth_unk1E214_init(v15);
  else
    v16 = 0;
  v4->field_18[v4->field_14] = v16;
  if (!v16)
    sub_1003E260(4);
  v17 = v16->lpVtbl;
  v85 = v4->field_33C - -95.0;
  v16->lpVtbl->meth14(v16, a1, v4->flags_338, v85, 1056769, 2, 5, 1, -1);
  v16->field_C = sub_10047360;
  v16->field_8 = sub_10045050;
  v16->field_3838.field_1A99C[28] = 2;
  v18 = GetStringWithIndex(0x1Eu);
  v17->meth13(v16, v18, 1, 0, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v19 = (unk1E214 *)operator new(0x1E214u);
  if (v19)
    v20 = meth_unk1E214_init(v19);
  else
    v20 = 0;
  v4->field_18[v4->field_14] = v20;
  if (!v20)
    sub_1003E260(4);
  v21 = v20->lpVtbl;
  v86 = v4->field_33C - -114.0;
  v20->lpVtbl->meth14(v20, a1, v4->flags_338, v86, 1056769, 2, 5, 1, -1);
  v20->field_C = sub_10047360;
  v20->field_8 = (int(__cdecl *)())sub_10047060;
  v20->field_3838.field_1A99C[28] = 3;
  v22 = GetStringWithIndex(0xCu);
  v21->meth13(v20, v22, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v88 = (float)dword_100AB428;
  v91 = (float)dword_100AB42C;
  v23 = (unk1E214 *)operator new(0x1E214u);
  if (v23)
    v24 = meth_unk1E214_init(v23);
  else
    v24 = 0;
  v4->field_18[v4->field_14] = v24;
  if (!v24)
    sub_1003E260(4);
  v24->lpVtbl->meth14(v24, a1, LODWORD(v88), v91, 4202497, 2, 5, 1, 120);
  v24->field_C = sub_10047360;
  v24->field_8 = sub_100457E0;
  v90 = (__int64)v91;
  *(_DWORD *)v24->gap54 = v90;
  v25 = (__int64)v88;
  v24->field_50 = v25;
  v24->field_58 = v25 + 127;
  *(_DWORD *)v24->gap5C = v90 + 33;
  v24->field_2968 = 0;
  v92 = v91 - -33.0;
  *(_WORD *)&v24->field_2A40[2] = 121;
  ++v4->field_14;
  v89 = v25 + 127;
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v4->field_18[v4->field_14] = v27;
  if (!v27)
    sub_1003E260(4);
  v27->lpVtbl->meth14(v27, a1, LODWORD(v88), v92, 4202497, 2, 5, 1, 82);
  v27->field_C = sub_10047360;
  v27->field_8 = (int(__cdecl *)())sub_10043FA0;
  v28 = (__int64)v92;
  *(_DWORD *)v27->gap54 = v28;
  v27->field_50 = v25;
  v27->field_58 = v89;
  *(_DWORD *)v27->gap5C = v28 + 33;
  v93 = v92 - -33.0;
  v27->field_2968 = 0;
  *(_WORD *)&v27->field_2A40[2] = 83;
  ++v4->field_14;
  v29 = (unk1E214 *)operator new(0x1E214u);
  if (v29)
    v30 = meth_unk1E214_init(v29);
  else
    v30 = 0;
  v4->field_18[v4->field_14] = v30;
  if (!v30)
    sub_1003E260(4);
  v30->lpVtbl->meth14(v30, a1, LODWORD(v88), v93, 4202497, 2, 5, 1, 84);
  v30->field_C = sub_10047360;
  v30->field_8 = sub_100457C0;
  v31 = (__int64)v93;
  *(_DWORD *)v30->gap54 = v31;
  v30->field_50 = v25;
  v30->field_58 = v89;
  *(_DWORD *)v30->gap5C = v31 + 33;
  v30->field_2968 = 0;
  *(_WORD *)&v30->field_2A40[2] = 85;
  ++v4->field_14;
  v32 = (unk1E214 *)operator new(0x1E214u);
  if (v32)
    v33 = meth_unk1E214_init(v32);
  else
    v33 = 0;
  v4->field_18[v4->field_14] = v33;
  if (!v33)
    sub_1003E260(4);
  v33->lpVtbl->meth14(v33, a1, 1116864512, 212.0, 1, 2, 5, 1, 22);
  v33->field_4 = sub_100407E0;
  v34 = v4->field_14 + 1;
  ++v33->field_2AB4[0];
  v33->field_2AB4[1] = v34;
  ++v4->field_14;
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v4->field_18[v4->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  v36->lpVtbl->meth14(v36, a1, v4->flags_338, 275.0, 1052673, 2, 5, 1, -1);
  v36->field_4 = sub_1003FE80;
  v36->field_3838.field_1A99C[28] = 3;
  v37->meth13(v36, asc_100AD300, 1, 1, &unk_100AB4B8);
  ++v4->field_14;
  v38 = (unk1E214 *)operator new(0x1E214u);
  if (v38)
    v39 = meth_unk1E214_init(v38);
  else
    v39 = 0;
  v4->field_18[v4->field_14] = v39;
  if (!v39)
    sub_1003E260(4);
  v39->lpVtbl->meth14(v39, a1, 1134723072, 72.0, 1, 2, 5, 1, 17);
  v39->field_4 = sub_10040730;
  v40 = v4->field_14 + 1;
  ++v39->field_2AB4[0];
  v39->field_2AB4[1] = v40;
  ++v4->field_14;
  v41 = (unk1E214 *)operator new(0x1E214u);
  if (v41)
    v42 = meth_unk1E214_init(v41);
  else
    v42 = 0;
  v4->field_18[v4->field_14] = v42;
  if (!v42)
    sub_1003E260(4);
  v43 = v42->lpVtbl;
  v42->lpVtbl->meth14(v42, a1, v4->flags_338, 152.0, 1052673, 2, 5, 1, -1);
  v42->field_4 = sub_1003FA00;
  v42->field_3838.field_1A99C[28] = 3;
  v43->meth13(v42, asc_100AD300, 1, 1, &unk_100AB4A8);
  ++v4->field_14;
  v44 = (unk1E214 *)operator new(0x1E214u);
  if (v44)
    v45 = meth_unk1E214_init(v44);
  else
    v45 = 0;
  v4->field_18[v4->field_14] = v45;
  if (!v45)
    sub_1003E260(4);
  v46 = v45->lpVtbl;
  v45->lpVtbl->meth14(v45, a1, 1138819072, 125.0, 1048585, 2, 5, 1, -1);
  v45->field_3838.field_1A99C[28] = 3;
  v47 = GetStringWithIndex(0x40u);
  v46->meth13(v45, v47, 1, 1, &unk_100AB4F8);
  ++v4->field_14;
  v48 = (unk1E214 *)operator new(0x1E214u);
  if (v48)
    v49 = meth_unk1E214_init(v48);
  else
    v49 = 0;
  v4->field_18[v4->field_14] = v49;
  if (!v49)
    sub_1003E260(4);
  v50 = v49->lpVtbl;
  v49->lpVtbl->meth14(v49, a1, 1138819072, 185.0, 1048585, 2, 5, 1, -1);
  v49->field_3838.field_1A99C[28] = 3;
  v51 = GetStringWithIndex(0x46u);
  v50->meth13(v49, v51, 1, 1, &unk_100AB4F8);
  ++v4->field_14;
  v52 = (unk1E214 *)operator new(0x1E214u);
  if (v52)
    v53 = meth_unk1E214_init(v52);
  else
    v53 = 0;
  v4->field_18[v4->field_14] = v53;
  if (!v53)
    sub_1003E260(4);
  v54 = v53->lpVtbl;
  v53->lpVtbl->meth14(v53, a1, 1138819072, 141.0, 20481, 2, 5, 1, -1);
  v53->field_4 = sub_100415A0;
  v53->field_3838.field_1A99C[28] = 5;
  v54->meth13(v53, String2, 1, 3, &unk_100AB4F8);
  ++v4->field_14;
  v55 = (unk1E214 *)operator new(0x1E214u);
  if (v55)
    v56 = meth_unk1E214_init(v55);
  else
    v56 = 0;
  v4->field_18[v4->field_14] = v56;
  if (!v56)
    sub_1003E260(4);
  v57 = v56->lpVtbl;
  v56->lpVtbl->meth14(v56, a1, v4->flags_338, 203.0, 1048585, 2, 5, 1, -1);
  v56->field_3838.field_1A99C[28] = 3;
  v58 = GetStringWithIndex(0x40u);
  v57->meth13(v56, v58, 1, 1, &unk_100AB478);
  ++v4->field_14;
  v59 = (unk1E214 *)operator new(0x1E214u);
  if (v59)
    v60 = meth_unk1E214_init(v59);
  else
    v60 = 0;
  v4->field_18[v4->field_14] = v60;
  if (!v60)
    sub_1003E260(4);
  v61 = v60->lpVtbl;
  v60->lpVtbl->meth14(v60, a1, v4->flags_338, 265.0, 1048585, 2, 5, 1, -1);
  v60->field_3838.field_1A99C[28] = 3;
  v62 = GetStringWithIndex(0x41u);
  v61->meth13(v60, v62, 1, 1, &unk_100AB478);
  ++v4->field_14;
  v63 = (unk1E214 *)operator new(0x1E214u);
  if (v63)
    v64 = meth_unk1E214_init(v63);
  else
    v64 = 0;
  v4->field_18[v4->field_14] = v64;
  if (!v64)
    sub_1003E260(4);
  v65 = v64->lpVtbl;
  v64->lpVtbl->meth14(v64, a1, 1138819072, 217.0, 20481, 2, 5, 1, -1);
  v64->field_4 = sub_100414B0;
  v64->field_3838.field_1A99C[28] = 5;
  v65->meth13(v64, String2, 1, 3, &unk_100AB478);
  ++v4->field_14;
  v66 = (unk1E214 *)operator new(0x1E214u);
  if (v66)
    v67 = meth_unk1E214_init(v66);
  else
    v67 = 0;
  v4->field_18[v4->field_14] = v67;
  if (!v67)
    sub_1003E260(4);
  v68 = v67->lpVtbl;
  v67->lpVtbl->meth14(v67, a1, 1121189888, 85.0, 1048577, 2, 5, 1, -1);
  v67->field_3838.field_1A99C[28] = 3;
  v69 = GetStringWithIndex(0x38u);
  v68->meth13(v67, v69, 1, 1, &unk_100AB458);
  ++v4->field_14;
  v70 = (unk1E214 *)operator new(0x1E214u);
  if (v70)
    v71 = meth_unk1E214_init(v70);
  else
    v71 = 0;
  v4->field_18[v4->field_14] = v71;
  if (!v71)
    sub_1003E260(4);
  v72 = v71->lpVtbl;
  v71->lpVtbl->meth14(v71, a1, 1138491392, 66.0, 20481, 2, 5, 1, -1);
  v71->field_4 = sub_10041300;
  v71->field_3838.field_1A99C[28] = 52;
  v72->meth13(v71, String2, 1, 4, &unk_100AB458);
  ++v4->field_14;
  v73 = (unk1E214 *)operator new(0x1E214u);
  if (v73)
    v74 = meth_unk1E214_init(v73);
  else
    v74 = 0;
  v4->field_18[v4->field_14] = v74;
  if (!v74)
    sub_1003E260(4);
  v75 = v74->lpVtbl;
  v74->lpVtbl->meth14(v74, a1, 1121189888, 123.0, 1048577, 2, 5, 1, -1);
  v74->field_3838.field_1A99C[28] = 3;
  v76 = GetStringWithIndex(0x36u);
  v75->meth13(v74, v76, 1, 1, &unk_100AB458);
  ++v4->field_14;
  v77 = (unk1E214 *)operator new(0x1E214u);
  if (v77)
    v78 = meth_unk1E214_init(v77);
  else
    v78 = 0;
  v4->field_18[v4->field_14] = v78;
  if (!v78)
    sub_1003E260(4);
  v79 = v78->lpVtbl;
  v78->lpVtbl->meth14(v78, a1, 1138491392, 104.0, 20481, 2, 5, 1, -1);
  v78->field_4 = sub_100413B0;
  v78->field_3838.field_1A99C[28] = 52;
  v79->meth13(v78, String2, 1, 4, &unk_100AB458);
  ++v4->field_14;
  v80 = (unk1E214 *)operator new(0x1E214u);
  if (v80)
    v81 = meth_unk1E214_init(v80);
  else
    v81 = 0;
  v4->field_18[v4->field_14] = v81;
  if (!v81)
    sub_1003E260(4);
  v82 = v81->lpVtbl;
  v87 = v4->field_33C - 19.0;
  v81->lpVtbl->meth14(v81, a1, v4->flags_338, v87, 20481, 2, 5, 1, -1);
  v81->field_4 = sub_10040B30;
  v81->field_3838.field_1A99C[28] = 52;
  v82->meth13(v81, String2, 1, 4, &dword_100AB448);
  ++v4->field_14;
  return 1;
}
// 1003FA00: using guessed type int __cdecl sub_1003FA00(int);
// 1003FE80: using guessed type int __cdecl sub_1003FE80(int);
// 10040730: using guessed type int __cdecl sub_10040730(int);
// 100407E0: using guessed type int __cdecl sub_100407E0(int);
// 10041300: using guessed type int __cdecl sub_10041300(int);
// 100413B0: using guessed type int __cdecl sub_100413B0(int);
// 10043FA0: using guessed type int __cdecl sub_10043FA0(int);
// 100AB428: using guessed type int dword_100AB428;
// 100AB42C: using guessed type int dword_100AB42C;
// 100AB448: using guessed type int dword_100AB448;

//----- (10052F50) --------------------------------------------------------
int __cdecl s_unk000C8_10052F50(unk000C8 *a1) {
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // ebp
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // ebp
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // ebp
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // ebp
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // ebp
  unk1E214Vtbl *v20; // ebx
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // ebp
  unk1E214Vtbl *v24; // ebx
  LPCSTR v25;        // eax
  unk1E214 *v26;     // eax
  unk1E214 *v27;     // ebp
  unk1E214Vtbl *v28; // ebx
  LPCSTR v29;        // eax
  unk1E214 *v30;     // eax
  unk1E214 *v31;     // ebp
  int v32;           // ebx
  unk1E214 *v33;     // eax
  unk1E214 *v34;     // ebp
  __int64 v35;       // rax
  unk1E214 *v36;     // eax
  unk1E214 *v37;     // ebp
  __int64 v38;       // rax
  unk1E214 *v39;     // eax
  unk1E214 *v40;     // ebp
  unk1E214Vtbl *v41; // ebx
  LPCSTR v42;        // eax
  unk1E214 *v43;     // eax
  unk1E214 *v44;     // ebp
  unk1E214Vtbl *v45; // ebx
  unk1E214 *v46;     // eax
  unk1E214 *v47;     // ebp
  WORD v48;          // cx
  unk1E214 *v49;     // eax
  unk1E214 *v50;     // ebp
  unk1E214Vtbl *v51; // ebx
  unk1E214 *v52;     // eax
  unk1E214 *v53;     // ebp
  WORD v54;          // ax
  unk1E214 *v55;     // eax
  unk1E214 *v56;     // ebp
  unk1E214Vtbl *v57; // ebx
  unk1E214 *v58;     // eax
  unk1E214 *v59;     // ebp
  unk1E214Vtbl *v60; // ebx
  LPCSTR v61;        // eax
  unk1E214 *v62;     // eax
  unk1E214 *v63;     // ebp
  unk1E214Vtbl *v64; // ebx
  unk1E214 *v65;     // eax
  unk1E214 *v66;     // ebp
  unk1E214Vtbl *v67; // ebx
  LPCSTR v68;        // eax
  unk1E214 *v69;     // eax
  unk1E214 *v70;     // ebp
  unk1E214Vtbl *v71; // ebx
  float v73;         // [esp+32Ch] [ebp-40h]
  float v74;         // [esp+32Ch] [ebp-40h]
  float v75;         // [esp+32Ch] [ebp-40h]
  float v76;         // [esp+32Ch] [ebp-40h]
  float v77;         // [esp+354h] [ebp-18h]
  int v78;           // [esp+358h] [ebp-14h]
  int v79;           // [esp+35Ch] [ebp-10h]
  float v80;         // [esp+370h] [ebp+4h]
  float v81;         // [esp+370h] [ebp+4h]
  float v82;         // [esp+370h] [ebp+4h]

  *(&a1->field_10 + 1) = 0;
  dword_10AA28AC = dword_10AA28A4;
  *(&a1->field_6C + a1->field_10) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v3->field_4 = sub_100409F0;
  v3->field_8 = sub_10040A20;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x47u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  v11->lpVtbl->meth14(v11, a1, v3->flags_338, v3->field_33C, 1056769, 2, 5, 1, -1);
  v11->field_C = sub_10047360;
  v11->field_8 = sub_100412C0;
  v11->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0x48u);
  v12->meth13(v11, v13, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v73 = v3->field_33C - -19.0;
  v15->lpVtbl->meth14(v15, a1, v3->flags_338, v73, 1056769, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_100412D0;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0x49u);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v3->field_18[v3->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v74 = v3->field_33C - -38.0;
  v19->lpVtbl->meth14(v19, a1, v3->flags_338, v74, 1056769, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = sub_100412E0;
  v19->field_3838.field_1A99C[28] = 3;
  v21 = GetStringWithIndex(0x4Au);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v3->field_18[v3->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v24 = v23->lpVtbl;
  v75 = v3->field_33C - -57.0;
  v23->lpVtbl->meth14(v23, a1, v3->flags_338, v75, 1056769, 2, 5, 1, -1);
  v23->field_C = sub_10047360;
  v23->field_8 = sub_100412F0;
  v23->field_3838.field_1A99C[28] = 3;
  v25 = GetStringWithIndex(0x4Bu);
  v24->meth13(v23, v25, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v3->field_18[v3->field_14] = v27;
  if (!v27)
    sub_1003E260(4);
  v28 = v27->lpVtbl;
  v76 = v3->field_33C - -95.0;
  v27->lpVtbl->meth14(v27, a1, v3->flags_338, v76, 1056769, 2, 5, 1, -1);
  v27->field_C = sub_10047360;
  v27->field_8 = (int(__cdecl *)())sub_10045F70;
  v27->field_3838.field_1A99C[28] = 3;
  v29 = GetStringWithIndex(0x1Eu);
  v28->meth13(v27, v29, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v77 = (float)dword_100AB428;
  v80 = (float)dword_100AB42C;
  v30 = (unk1E214 *)operator new(0x1E214u);
  if (v30)
    v31 = meth_unk1E214_init(v30);
  else
    v31 = 0;
  v3->field_18[v3->field_14] = v31;
  if (!v31)
    sub_1003E260(4);
  v31->lpVtbl->meth14(v31, a1, LODWORD(v77), v80, 4202497, 2, 5, 1, 120);
  v31->field_C = sub_10047360;
  v31->field_8 = sub_10045820;
  v79 = (__int64)v80;
  *(_DWORD *)v31->gap54 = v79;
  v32 = (__int64)v77;
  v31->field_50 = v32;
  v31->field_58 = v32 + 127;
  *(_DWORD *)v31->gap5C = v79 + 33;
  v31->field_2968 = 0;
  v81 = v80 - -33.0;
  *(_WORD *)&v31->field_2A40[2] = 121;
  ++v3->field_14;
  v78 = v32 + 127;
  v33 = (unk1E214 *)operator new(0x1E214u);
  if (v33)
    v34 = meth_unk1E214_init(v33);
  else
    v34 = 0;
  v3->field_18[v3->field_14] = v34;
  if (!v34)
    sub_1003E260(4);
  v34->lpVtbl->meth14(v34, a1, LODWORD(v77), v81, 4202497, 2, 5, 1, 82);
  v34->field_C = sub_10047360;
  v34->field_8 = (int(__cdecl *)())sub_10043FA0;
  v35 = (__int64)v81;
  *(_DWORD *)v34->gap54 = v35;
  v34->field_50 = v32;
  v34->field_58 = v78;
  *(_DWORD *)v34->gap5C = v35 + 33;
  v82 = v81 - -33.0;
  v34->field_2968 = 0;
  *(_WORD *)&v34->field_2A40[2] = 83;
  ++v3->field_14;
  v36 = (unk1E214 *)operator new(0x1E214u);
  if (v36)
    v37 = meth_unk1E214_init(v36);
  else
    v37 = 0;
  v3->field_18[v3->field_14] = v37;
  if (!v37)
    sub_1003E260(4);
  v37->lpVtbl->meth14(v37, a1, LODWORD(v77), v82, 4202497, 2, 5, 1, 84);
  v37->field_C = sub_10047360;
  v37->field_8 = sub_10045800;
  v38 = (__int64)v82;
  *(_DWORD *)v37->gap54 = v38;
  v37->field_50 = v32;
  v37->field_58 = v78;
  *(_DWORD *)v37->gap5C = v38 + 33;
  v37->field_2968 = 0;
  *(_WORD *)&v37->field_2A40[2] = 85;
  ++v3->field_14;
  v39 = (unk1E214 *)operator new(0x1E214u);
  if (v39)
    v40 = meth_unk1E214_init(v39);
  else
    v40 = 0;
  v3->field_18[v3->field_14] = v40;
  if (!v40)
    sub_1003E260(4);
  v41 = v40->lpVtbl;
  v40->lpVtbl->meth14(v40, a1, 1121189888, 123.0, 1048577, 2, 5, 1, -1);
  v40->field_3838.field_1A99C[28] = 3;
  v42 = GetStringWithIndex(0x4Cu);
  v41->meth13(v40, v42, 1, 1, &unk_100AB458);
  ++v3->field_14;
  v43 = (unk1E214 *)operator new(0x1E214u);
  if (v43)
    v44 = meth_unk1E214_init(v43);
  else
    v44 = 0;
  v3->field_18[v3->field_14] = v44;
  if (!v44)
    sub_1003E260(4);
  v45 = v44->lpVtbl;
  v44->lpVtbl->meth14(v44, a1, 1138491392, 79.0, 20481, 2, 5, 1, -1);
  v44->field_4 = sub_1003E8D0;
  v44->field_3838.field_1A99C[28] = 5;
  v45->meth13(v44, String2, 1, 3, &unk_100AB458);
  ++v3->field_14;
  v46 = (unk1E214 *)operator new(0x1E214u);
  if (v46)
    v47 = meth_unk1E214_init(v46);
  else
    v47 = 0;
  v3->field_18[v3->field_14] = v47;
  if (!v47)
    sub_1003E260(4);
  v47->lpVtbl->meth14(v47, a1, 1116864512, 212.0, 1, 2, 5, 1, 22);
  v47->field_4 = sub_100407E0;
  v48 = v3->field_14 + 1;
  ++v47->field_2AB4[0];
  v47->field_2AB4[1] = v48;
  ++v3->field_14;
  v49 = (unk1E214 *)operator new(0x1E214u);
  if (v49)
    v50 = meth_unk1E214_init(v49);
  else
    v50 = 0;
  v3->field_18[v3->field_14] = v50;
  if (!v50)
    sub_1003E260(4);
  v51 = v50->lpVtbl;
  v50->lpVtbl->meth14(v50, a1, v3->flags_338, 275.0, 1052673, 2, 5, 1, -1);
  v50->field_4 = sub_1003FE80;
  v50->field_3838.field_1A99C[28] = 3;
  v51->meth13(v50, asc_100AD300, 1, 1, &unk_100AB4B8);
  ++v3->field_14;
  v52 = (unk1E214 *)operator new(0x1E214u);
  if (v52)
    v53 = meth_unk1E214_init(v52);
  else
    v53 = 0;
  v3->field_18[v3->field_14] = v53;
  if (!v53)
    sub_1003E260(4);
  v53->lpVtbl->meth14(v53, a1, 1134723072, 72.0, 1, 2, 5, 1, 17);
  v53->field_4 = sub_10040730;
  v54 = v3->field_14 + 1;
  ++v53->field_2AB4[0];
  v53->field_2AB4[1] = v54;
  ++v3->field_14;
  v55 = (unk1E214 *)operator new(0x1E214u);
  if (v55)
    v56 = meth_unk1E214_init(v55);
  else
    v56 = 0;
  v3->field_18[v3->field_14] = v56;
  if (!v56)
    sub_1003E260(4);
  v57 = v56->lpVtbl;
  v56->lpVtbl->meth14(v56, a1, v3->flags_338, 152.0, 1052673, 2, 5, 1, -1);
  v56->field_4 = sub_1003FA00;
  v56->field_3838.field_1A99C[28] = 3;
  v57->meth13(v56, asc_100AD300, 1, 1, &unk_100AB4A8);
  ++v3->field_14;
  v58 = (unk1E214 *)operator new(0x1E214u);
  if (v58)
    v59 = meth_unk1E214_init(v58);
  else
    v59 = 0;
  v3->field_18[v3->field_14] = v59;
  if (!v59)
    sub_1003E260(4);
  v60 = v59->lpVtbl;
  v59->lpVtbl->meth14(v59, a1, 1138819072, 185.0, 1048585, 2, 5, 1, -1);
  v59->field_3838.field_1A99C[28] = 3;
  v61 = GetStringWithIndex(0x4Du);
  v60->meth13(v59, v61, 1, 1, &unk_100AB4F8);
  ++v3->field_14;
  v62 = (unk1E214 *)operator new(0x1E214u);
  if (v62)
    v63 = meth_unk1E214_init(v62);
  else
    v63 = 0;
  v3->field_18[v3->field_14] = v63;
  if (!v63)
    sub_1003E260(4);
  v64 = v63->lpVtbl;
  v63->lpVtbl->meth14(v63, a1, 1138819072, 166.0, 20481, 2, 5, 1, -1);
  v63->field_4 = sub_10040EE0;
  v63->field_3838.field_1A99C[28] = 52;
  v64->meth13(v63, String2, 1, 4, &unk_100AB4F8);
  ++v3->field_14;
  v65 = (unk1E214 *)operator new(0x1E214u);
  if (v65)
    v66 = meth_unk1E214_init(v65);
  else
    v66 = 0;
  v3->field_18[v3->field_14] = v66;
  if (!v66)
    sub_1003E260(4);
  v67 = v66->lpVtbl;
  v66->lpVtbl->meth14(v66, a1, v3->flags_338, 258.0, 1048585, 2, 5, 1, -1);
  v66->field_3838.field_1A99C[28] = 3;
  v68 = GetStringWithIndex(0x40u);
  v67->meth13(v66, v68, 1, 1, &unk_100AB478);
  ++v3->field_14;
  v69 = (unk1E214 *)operator new(0x1E214u);
  if (v69)
    v70 = meth_unk1E214_init(v69);
  else
    v70 = 0;
  v3->field_18[v3->field_14] = v70;
  if (!v70)
    sub_1003E260(4);
  v71 = v70->lpVtbl;
  v70->lpVtbl->meth14(v70, a1, 1138819072, 211.0, 20481, 2, 5, 1, -1);
  v70->field_4 = sub_1003EA90;
  v70->field_3838.field_1A99C[28] = 5;
  v71->meth13(v70, String2, 1, 3, &unk_100AB478);
  ++v3->field_14;
  return 1;
}
// 1003E8D0: using guessed type int __cdecl sub_1003E8D0(int);
// 1003EA90: using guessed type int __cdecl sub_1003EA90(int);
// 1003FA00: using guessed type int __cdecl sub_1003FA00(int);
// 1003FE80: using guessed type int __cdecl sub_1003FE80(int);
// 10040730: using guessed type int __cdecl sub_10040730(int);
// 100407E0: using guessed type int __cdecl sub_100407E0(int);
// 100409F0: using guessed type int sub_100409F0();
// 10040A20: using guessed type int sub_10040A20();
// 10043FA0: using guessed type int __cdecl sub_10043FA0(int);
// 100AB428: using guessed type int dword_100AB428;
// 100AB42C: using guessed type int dword_100AB42C;
// 100AB448: using guessed type int dword_100AB448;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28AC: using guessed type int dword_10AA28AC;

//----- (10053CF0) --------------------------------------------------------
int __cdecl s_unk000C8_10053CF0(unk000C8 *a1) {
  unk00348 *v2;                                                    // eax
  unk00348 *v3;                                                    // ebp
  WORD v4;                                                         // dx
  unk1E214 *v5;                                                    // eax
  unk1E214 *v6;                                                    // esi
  unk1E214 *v7;                                                    // eax
  unk1E214 *v8;                                                    // esi
  unk1E214Vtbl *v9;                                                // edi
  LPCSTR v10;                                                      // eax
  unk1E214 *v11;                                                   // eax
  unk1E214 *v12;                                                   // esi
  WORD v13;                                                        // dx
  unk1A5E0Vtbl *v14;                                               // edi
  char *v15;                                                       // eax
  unk1E214 *v16;                                                   // eax
  unk1E214 *v17;                                                   // esi
  unk1E214Vtbl *v18;                                               // edi
  LPCSTR v19;                                                      // eax
  unk1E214 *v20;                                                   // eax
  unk1E214 *v21;                                                   // esi
  WORD v22;                                                        // dx
  unk1E214Vtbl *v23;                                               // edi
  LPCSTR v24;                                                      // eax
  unk1E214 *v25;                                                   // eax
  unk1E214 *v26;                                                   // esi
  WORD v27;                                                        // cx
  int v28;                                                         // edi
  unk1E214 *v29;                                                   // eax
  unk1E214 *v30;                                                   // esi
  __int64 v31;                                                     // rax
  unk1E214 *v32;                                                   // eax
  unk1E214 *v33;                                                   // esi
  __int64 v34;                                                     // rax
  unk1E214 *v35;                                                   // eax
  unk1E214 *v36;                                                   // esi
  unk1E214Vtbl *v37;                                               // edi
  LPCSTR v38;                                                      // eax
  unk1E214 *v39;                                                   // eax
  unk1E214 *v40;                                                   // esi
  WORD v41;                                                        // cx
  unk1E214Vtbl *v42;                                               // edi
  unk1E214 *v43;                                                   // eax
  unk1E214 *v44;                                                   // esi
  WORD v45;                                                        // dx
  unk1E214Vtbl *v46;                                               // edi
  LPCSTR v47;                                                      // eax
  unk1E214 *v48;                                                   // eax
  unk1E214 *v49;                                                   // esi
  unk1E214Vtbl *v50;                                               // edi
  unk1E214 *v51;                                                   // eax
  unk1E214 *u1E214;                                                // esi
  WORD v53;                                                        // cx
  unk1E214Vtbl *v54;                                               // edi
  LPCSTR v55;                                                      // eax
  unk1E214 *v56;                                                   // eax
  unk1E214 *v57;                                                   // esi
  WORD v58;                                                        // dx
  unk1E214Vtbl *v59;                                               // edi
  unk1E214 *v60;                                                   // eax
  unk1E214 *v61;                                                   // esi
  WORD v62;                                                        // ax
  WORD v63;                                                        // ax
  unk1E214 *v64;                                                   // eax
  unk1E214 *v65;                                                   // esi
  WORD v66;                                                        // cx
  unk1E214Vtbl *v67;                                               // edi
  unk1E214 *v68;                                                   // eax
  unk1E214 *v69;                                                   // esi
  WORD v70;                                                        // ax
  WORD v71;                                                        // ax
  unk1E214 *v72;                                                   // eax
  unk1E214 *v73;                                                   // esi
  WORD v74;                                                        // cx
  unk1E214Vtbl *v75;                                               // edi
  unk1E214 *v76;                                                   // eax
  unk1E214 *v77;                                                   // esi
  unk1E214Vtbl *v78;                                               // edi
  LPCSTR v79;                                                      // eax
  unk1E214 *v80;                                                   // eax
  unk1E214 *v81;                                                   // esi
  WORD v82;                                                        // dx
  unk1E214Vtbl *v83;                                               // edi
  float v85;                                                       // [esp+304h] [ebp-80h]
  float v86;                                                       // [esp+304h] [ebp-80h]
  int(__thiscall * v87)(unk1A5E0 *, char *, int, int, int *, int); // [esp+32Ch] [ebp-58h]
  float v88;                                                       // [esp+32Ch] [ebp-58h]
  int v89;                                                         // [esp+330h] [ebp-54h]
  int v90;                                                         // [esp+334h] [ebp-50h]
  char v91[32];                                                    // [esp+338h] [ebp-4Ch] BYREF
  char Buffer[32];                                                 // [esp+358h] [ebp-2Ch] BYREF
  int v93;                                                         // [esp+380h] [ebp-4h]
  unk000C8 *v94;                                                   // [esp+388h] [ebp+4h]
  float v95;                                                       // [esp+388h] [ebp+4h]
  float v96;                                                       // [esp+388h] [ebp+4h]
  float v97;                                                       // [esp+388h] [ebp+4h]

  *(&a1->field_10 + 1) = 0;
  dword_10AA28AC = dword_10AA28A4;
  *(&a1->field_6C + a1->field_10) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  v93 = 0;
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  v4 = a1->field_10;
  v93 = -1;
  a1->field_14[v4] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_4 = sub_100409F0;
  v3->field_8 = sub_10040A20;
  v3->field_10 = 0;
  v3->flags_338 = 0x43430000;
  v3->field_33C = 130.0;
  v5 = (unk1E214 *)operator new(0x1E214u);
  v93 = 1;
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v93 = -1;
  v3->field_18[v3->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v6->lpVtbl->meth14(v6, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v7 = (unk1E214 *)operator new(0x1E214u);
  v93 = 2;
  if (v7)
    v8 = meth_unk1E214_init(v7);
  else
    v8 = 0;
  v93 = -1;
  v3->field_18[v3->field_14] = v8;
  if (!v8)
    sub_1003E260(4);
  v9 = v8->lpVtbl;
  v8->lpVtbl->meth14(v8, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v8->field_3838.field_1A99C[28] = 3;
  v10 = GetStringWithIndex(0x4Eu);
  v9->meth13(v8, v10, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v11 = (unk1E214 *)operator new(0x1E214u);
  v93 = 3;
  if (v11)
    v12 = meth_unk1E214_init(v11);
  else
    v12 = 0;
  v13 = v3->field_14;
  v93 = -1;
  v3->field_18[v13] = v12;
  if (!v12)
    sub_1003E260(4);
  v12->lpVtbl->meth14(v12, a1, v3->flags_338, v3->field_33C, 12289, 2, 5, 1, -1);
  v14 = v12->field_3838.lpVtbl;
  v12->field_4 = sub_1003EB60;
  *(_DWORD *)&v12->field_3838.field_1A99C[16] = 1;
  v14->meth5(&v12->field_3838, 0x200000, dword_100AB4D8, 5, 0, -1);
  v12->field_14 = (int)sub_1003E8B0;
  v12->field_18 = (int)sub_1003E8C0;
  v94 = 0;
  if (dword_100B3814[6 * (char)dword_10AA28B8] > 0) {
    v87 = v14->meth4;
    do {
      strcpy(v91, GetStringWithIndex(0x37u));
      strcat(v91, asc_100AD300);
      v94 = (unk000C8 *)((char *)v94 + 1);
      v15 = _itoa((int)v94, Buffer, 10);
      strcat(v91, _strupr(v15));
      v87(&v12->field_3838, v91, 1, 1, &dword_100AB448, 1);
    } while ((int)v94 < dword_100B3814[6 * (char)dword_10AA28B8]);
  }
  ++v3->field_14;
  ++LOWORD(v3->last);
  v16 = (unk1E214 *)operator new(0x1E214u);
  v93 = 4;
  if (v16)
    v17 = meth_unk1E214_init(v16);
  else
    v17 = 0;
  v93 = -1;
  v3->field_18[v3->field_14] = v17;
  if (!v17)
    sub_1003E260(4);
  v18 = v17->lpVtbl;
  v85 = v3->field_33C - -95.0;
  v17->lpVtbl->meth14(v17, a1, v3->flags_338, v85, 1056769, 2, 5, 1, -1);
  v17->field_C = sub_10047360;
  v17->field_8 = sub_100460A0;
  v17->field_3838.field_1A99C[28] = 3;
  v19 = GetStringWithIndex(0x1Eu);
  v18->meth13(v17, v19, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v20 = (unk1E214 *)operator new(0x1E214u);
  v93 = 5;
  if (v20)
    v21 = meth_unk1E214_init(v20);
  else
    v21 = 0;
  v22 = v3->field_14;
  v93 = -1;
  v3->field_18[v22] = v21;
  if (!v21)
    sub_1003E260(4);
  v23 = v21->lpVtbl;
  v86 = v3->field_33C - -114.0;
  v21->lpVtbl->meth14(v21, a1, v3->flags_338, v86, 1056769, 2, 5, 1, -1);
  v21->field_C = sub_10047360;
  v21->field_8 = (int(__cdecl *)())sub_100470A0;
  v21->field_3838.field_1A99C[28] = 3;
  v24 = GetStringWithIndex(0xCu);
  v23->meth13(v21, v24, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v88 = (float)dword_100AB428;
  v95 = (float)dword_100AB42C;
  v25 = (unk1E214 *)operator new(0x1E214u);
  v93 = 6;
  if (v25)
    v26 = meth_unk1E214_init(v25);
  else
    v26 = 0;
  v27 = v3->field_14;
  v93 = -1;
  v3->field_18[v27] = v26;
  if (!v26)
    sub_1003E260(4);
  v26->lpVtbl->meth14(v26, a1, LODWORD(v88), v95, 4202497, 2, 5, 1, 120);
  v26->field_C = sub_10047360;
  v26->field_8 = sub_10045860;
  v90 = (__int64)v95;
  *(_DWORD *)v26->gap54 = v90;
  v28 = (__int64)v88;
  v26->field_50 = v28;
  v26->field_58 = v28 + 127;
  *(_DWORD *)v26->gap5C = v90 + 33;
  v26->field_2968 = 0;
  v96 = v95 - -33.0;
  *(_WORD *)&v26->field_2A40[2] = 121;
  ++v3->field_14;
  v89 = v28 + 127;
  v29 = (unk1E214 *)operator new(0x1E214u);
  v93 = 7;
  if (v29)
    v30 = meth_unk1E214_init(v29);
  else
    v30 = 0;
  v93 = -1;
  v3->field_18[v3->field_14] = v30;
  if (!v30)
    sub_1003E260(4);
  v30->lpVtbl->meth14(v30, a1, LODWORD(v88), v96, 4202497, 2, 5, 1, 82);
  v30->field_C = sub_10047360;
  v30->field_8 = (int(__cdecl *)())sub_10043FA0;
  v31 = (__int64)v96;
  *(_DWORD *)v30->gap54 = v31;
  v30->field_50 = v28;
  v30->field_58 = v89;
  *(_DWORD *)v30->gap5C = v31 + 33;
  v97 = v96 - -33.0;
  v30->field_2968 = 0;
  *(_WORD *)&v30->field_2A40[2] = 83;
  ++v3->field_14;
  v32 = (unk1E214 *)operator new(0x1E214u);
  v93 = 8;
  if (v32)
    v33 = meth_unk1E214_init(v32);
  else
    v33 = 0;
  v93 = -1;
  v3->field_18[v3->field_14] = v33;
  if (!v33)
    sub_1003E260(4);
  v33->lpVtbl->meth14(v33, a1, LODWORD(v88), v97, 4202497, 2, 5, 1, 84);
  v33->field_C = sub_10047360;
  v33->field_8 = sub_10045840;
  v34 = (__int64)v97;
  *(_DWORD *)v33->gap54 = v34;
  v33->field_50 = v28;
  v33->field_58 = v89;
  *(_DWORD *)v33->gap5C = v34 + 33;
  v33->field_2968 = 0;
  *(_WORD *)&v33->field_2A40[2] = 85;
  ++v3->field_14;
  v35 = (unk1E214 *)operator new(0x1E214u);
  v93 = 9;
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v93 = -1;
  v3->field_18[v3->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  v36->lpVtbl->meth14(v36, a1, 0x42D40000, 85.0, 1048577, 2, 5, 1, -1);
  v36->field_3838.field_1A99C[28] = 3;
  v38 = GetStringWithIndex(0x38u);
  v37->meth13(v36, v38, 1, 1, &unk_100AB458);
  ++v3->field_14;
  v39 = (unk1E214 *)operator new(0x1E214u);
  v93 = 10;
  if (v39)
    v40 = meth_unk1E214_init(v39);
  else
    v40 = 0;
  v41 = v3->field_14;
  v93 = -1;
  v3->field_18[v41] = v40;
  if (!v40)
    sub_1003E260(4);
  v42 = v40->lpVtbl;
  v40->lpVtbl->meth14(v40, a1, 0x43DC0000, 66.0, 20481, 2, 5, 1, -1);
  v40->field_4 = sub_10041300;
  v40->field_3838.field_1A99C[28] = 52;
  v42->meth13(v40, String2, 1, 4, &unk_100AB458);
  ++v3->field_14;
  v43 = (unk1E214 *)operator new(0x1E214u);
  v93 = 11;
  if (v43)
    v44 = meth_unk1E214_init(v43);
  else
    v44 = 0;
  v45 = v3->field_14;
  v93 = -1;
  v3->field_18[v45] = v44;
  if (!v44)
    sub_1003E260(4);
  v46 = v44->lpVtbl;
  v44->lpVtbl->meth14(v44, a1, 0x42D40000, 123.0, 1048577, 2, 5, 1, -1);
  v44->field_3838.field_1A99C[28] = 3;
  v47 = GetStringWithIndex(0x36u);
  v46->meth13(v44, v47, 1, 1, &unk_100AB458);
  ++v3->field_14;
  v48 = (unk1E214 *)operator new(0x1E214u);
  v93 = 12;
  if (v48)
    v49 = meth_unk1E214_init(v48);
  else
    v49 = 0;
  v93 = -1;
  v3->field_18[v3->field_14] = v49;
  if (!v49)
    sub_1003E260(4);
  v50 = v49->lpVtbl;
  v49->lpVtbl->meth14(v49, a1, 0x43DC0000, 104.0, 20481, 2, 5, 1, -1);
  v49->field_4 = sub_100413B0;
  v49->field_3838.field_1A99C[28] = 52;
  v50->meth13(v49, String2, 1, 4, &unk_100AB458);
  ++v3->field_14;
  v51 = (unk1E214 *)operator new(0x1E214u);
  v93 = 13;
  if (v51)
    u1E214 = meth_unk1E214_init(v51);
  else
    u1E214 = 0;
  v53 = v3->field_14;
  v93 = -1;
  v3->field_18[v53] = u1E214;
  if (!u1E214)
    sub_1003E260(4);
  v54 = u1E214->lpVtbl;
  u1E214->lpVtbl->meth14(u1E214, a1, 0x42D40000, 185.0, 1048577, 2, 5, 1, -1);
  u1E214->field_3838.field_1A99C[28] = 3;
  v55 = GetStringWithIndex(0x4Cu);
  v54->meth13(u1E214, v55, 1, 1, &unk_100AB4F8);
  ++v3->field_14;
  v56 = (unk1E214 *)operator new(0x1E214u);
  v93 = 14;
  if (v56)
    v57 = meth_unk1E214_init(v56);
  else
    v57 = 0;
  v58 = v3->field_14;
  v93 = -1;
  v3->field_18[v58] = v57;
  if (!v57)
    sub_1003E260(4);
  v59 = v57->lpVtbl;
  v57->lpVtbl->meth14(v57, a1, 0x43DC0000, 141.0, 20481, 2, 5, 1, -1);
  v57->field_4 = sub_1003E8D0;
  v57->field_3838.field_1A99C[28] = 5;
  v59->meth13(v57, String2, 1, 3, &unk_100AB4F8);
  ++v3->field_14;
  v60 = (unk1E214 *)operator new(0x1E214u);
  v93 = 15;
  if (v60)
    v61 = meth_unk1E214_init(v60);
  else
    v61 = 0;
  v62 = v3->field_14;
  v93 = -1;
  v3->field_18[v62] = v61;
  if (!v61)
    sub_1003E260(4);
  v61->lpVtbl->meth14(v61, a1, 0x42920000, 212.0, 1, 2, 5, 1, 22);
  v61->field_4 = sub_100407E0;
  v63 = v3->field_14 + 1;
  ++v61->field_2AB4[0];
  v61->field_2AB4[1] = v63;
  ++v3->field_14;
  v64 = (unk1E214 *)operator new(0x1E214u);
  v93 = 16;
  if (v64)
    v65 = meth_unk1E214_init(v64);
  else
    v65 = 0;
  v66 = v3->field_14;
  v93 = -1;
  v3->field_18[v66] = v65;
  if (!v65)
    sub_1003E260(4);
  v67 = v65->lpVtbl;
  v65->lpVtbl->meth14(v65, a1, v3->flags_338, 275.0, 1052673, 2, 5, 1, -1);
  v65->field_4 = sub_1003FE80;
  v65->field_3838.field_1A99C[28] = 3;
  v67->meth13(v65, asc_100AD300, 1, 1, &unk_100AB4B8);
  ++v3->field_14;
  v68 = (unk1E214 *)operator new(0x1E214u);
  v93 = 17;
  if (v68)
    v69 = meth_unk1E214_init(v68);
  else
    v69 = 0;
  v70 = v3->field_14;
  v93 = -1;
  v3->field_18[v70] = v69;
  if (!v69)
    sub_1003E260(4);
  v69->lpVtbl->meth14(v69, a1, 0x43A28000, 72.0, 1, 2, 5, 1, 17);
  v69->field_4 = sub_10040730;
  v71 = v3->field_14 + 1;
  ++v69->field_2AB4[0];
  v69->field_2AB4[1] = v71;
  ++v3->field_14;
  v72 = (unk1E214 *)operator new(0x1E214u);
  v93 = 18;
  if (v72)
    v73 = meth_unk1E214_init(v72);
  else
    v73 = 0;
  v74 = v3->field_14;
  v93 = -1;
  v3->field_18[v74] = v73;
  if (!v73)
    sub_1003E260(4);
  v75 = v73->lpVtbl;
  v73->lpVtbl->meth14(v73, a1, v3->flags_338, 152.0, 1052673, 2, 5, 1, -1);
  v73->field_4 = sub_1003FA00;
  v73->field_3838.field_1A99C[28] = 3;
  v75->meth13(v73, asc_100AD300, 1, 1, &unk_100AB4A8);
  ++v3->field_14;
  v76 = (unk1E214 *)operator new(0x1E214u);
  v93 = 19;
  if (v76)
    v77 = meth_unk1E214_init(v76);
  else
    v77 = 0;
  v93 = -1;
  v3->field_18[v3->field_14] = v77;
  if (!v77)
    sub_1003E260(4);
  v78 = v77->lpVtbl;
  v77->lpVtbl->meth14(v77, a1, v3->flags_338, 258.0, 1048585, 2, 5, 1, -1);
  v77->field_3838.field_1A99C[28] = 3;
  v79 = GetStringWithIndex(0x40u);
  v78->meth13(v77, v79, 1, 1, &unk_100AB478);
  ++v3->field_14;
  v80 = (unk1E214 *)operator new(0x1E214u);
  v93 = 20;
  if (v80)
    v81 = meth_unk1E214_init(v80);
  else
    v81 = 0;
  v82 = v3->field_14;
  v93 = -1;
  v3->field_18[v82] = v81;
  if (!v81)
    sub_1003E260(4);
  v83 = v81->lpVtbl;
  v81->lpVtbl->meth14(v81, a1, 0x43E10000, 211.0, 20481, 2, 5, 1, -1);
  v81->field_4 = sub_1003EA90;
  v81->field_3838.field_1A99C[28] = 5;
  v83->meth13(v81, String2, 1, 3, &unk_100AB478);
  ++v3->field_14;
  return 1;
}
// 1003E8B0: using guessed type int sub_1003E8B0();
// 1003E8C0: using guessed type int sub_1003E8C0();
// 1003E8D0: using guessed type int __cdecl sub_1003E8D0(int);
// 1003EA90: using guessed type int __cdecl sub_1003EA90(int);
// 1003EB60: using guessed type int __cdecl sub_1003EB60(int);
// 1003FA00: using guessed type int __cdecl sub_1003FA00(int);
// 1003FE80: using guessed type int __cdecl sub_1003FE80(int);
// 10040730: using guessed type int __cdecl sub_10040730(int);
// 100407E0: using guessed type int __cdecl sub_100407E0(int);
// 100409F0: using guessed type int sub_100409F0();
// 10040A20: using guessed type int sub_10040A20();
// 10041300: using guessed type int __cdecl sub_10041300(int);
// 100413B0: using guessed type int __cdecl sub_100413B0(int);
// 10043FA0: using guessed type int __cdecl sub_10043FA0(int);
// 100AB428: using guessed type int dword_100AB428;
// 100AB42C: using guessed type int dword_100AB42C;
// 100AB448: using guessed type int dword_100AB448;
// 100B3814: using guessed type int dword_100B3814[];
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;

//----- (10054B50) --------------------------------------------------------
int __cdecl s_unk000C8_10054B50(unk000C8 *a1) {
  WORD v2;           // ax
  unk00348 *v3;      // eax
  unk00348 *v4;      // esi
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // ebp
  unk1E214 *v7;      // eax
  unk1E214 *v8;      // ebp
  unk1E214Vtbl *v9;  // ebx
  LPCSTR v10;        // eax
  unk1E214 *v11;     // eax
  unk1E214 *v12;     // ebp
  unk1E214Vtbl *v13; // ebx
  LPCSTR v14;        // eax
  unk1E214 *v15;     // eax
  unk1E214 *v16;     // ebp
  unk1E214Vtbl *v17; // ebx
  LPCSTR v18;        // eax
  unk1E214 *v19;     // eax
  unk1E214 *v20;     // ebp
  int v21;           // ebx
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // ebp
  __int64 v24;       // rax
  unk1E214 *v25;     // eax
  unk1E214 *v26;     // ebp
  __int64 v27;       // rax
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // ebp
  unk1E214Vtbl *v30; // ebx
  LPCSTR v31;        // eax
  unk1E214 *v32;     // eax
  unk1E214 *v33;     // ebp
  unk1E214Vtbl *v34; // ebx
  unk1E214 *v35;     // eax
  unk1E214 *v36;     // ebp
  unk1E214Vtbl *v37; // ebx
  LPCSTR v38;        // eax
  unk1E214 *v39;     // eax
  unk1E214 *v40;     // ebp
  unk1E214Vtbl *v41; // ebx
  unk1E214 *v42;     // eax
  unk1E214 *v43;     // ebp
  unk1E214Vtbl *v44; // ebx
  LPCSTR v45;        // eax
  unk1E214 *v46;     // eax
  unk1E214 *v47;     // ebp
  unk1E214Vtbl *v48; // ebx
  unk1E214 *v49;     // eax
  unk1E214 *v50;     // ebp
  unk1E214Vtbl *v51; // ebx
  LPCSTR v52;        // eax
  unk1E214 *v53;     // eax
  unk1E214 *v54;     // ebp
  unk1E214Vtbl *v55; // ebx
  LPCSTR v56;        // eax
  unk1E214 *v57;     // eax
  unk1E214 *v58;     // ebp
  unk1E214Vtbl *v59; // ebx
  LPCSTR v60;        // eax
  unk1E214 *v61;     // eax
  unk1E214 *v62;     // ebp
  unk1E214Vtbl *v63; // ebx
  unk1E214 *v64;     // eax
  unk1E214 *v65;     // ebp
  unk1E214Vtbl *v66; // ebx
  LPCSTR v67;        // eax
  unk1E214 *v68;     // eax
  unk1E214 *v69;     // ebp
  unk1E214Vtbl *v70; // ebx
  LPCSTR v71;        // eax
  unk1E214 *v72;     // eax
  unk1E214 *v73;     // ebp
  unk1E214Vtbl *v74; // ebx
  float v76;         // [esp+34Ch] [ebp-40h]
  float v77;         // [esp+34Ch] [ebp-40h]
  float v78;         // [esp+374h] [ebp-18h]
  int v79;           // [esp+378h] [ebp-14h]
  int v80;           // [esp+37Ch] [ebp-10h]
  float v81;         // [esp+390h] [ebp+4h]
  float v82;         // [esp+390h] [ebp+4h]
  float v83;         // [esp+390h] [ebp+4h]

  v2 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v2) = 1;
  v3 = (unk00348 *)operator new(0x348u);
  if (v3)
    v4 = meth_unk00348_10048470(v3);
  else
    v4 = 0;
  a1->field_14[a1->field_10] = v4;
  if (!v4)
    sub_1003E260(4);
  ++a1->field_10;
  v4->field_340 = a1;
  v4->field_4 = sub_100409F0;
  v4->field_8 = sub_10040A20;
  v4->field_10 = 0;
  v4->flags_338 = 1128464384;
  v4->field_33C = 130.0;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v4->field_18[v4->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v6->lpVtbl->meth14(v6, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v4->field_14;
  v7 = (unk1E214 *)operator new(0x1E214u);
  if (v7)
    v8 = meth_unk1E214_init(v7);
  else
    v8 = 0;
  v4->field_18[v4->field_14] = v8;
  if (!v8)
    sub_1003E260(4);
  v9 = v8->lpVtbl;
  v8->lpVtbl->meth14(v8, a1, v4->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v8->field_3838.field_1A99C[28] = 3;
  v10 = GetStringWithIndex(0x4Fu);
  v9->meth13(v8, v10, 1, 1, &unk_100AB508);
  ++v4->field_14;
  v11 = (unk1E214 *)operator new(0x1E214u);
  if (v11)
    v12 = meth_unk1E214_init(v11);
  else
    v12 = 0;
  v4->field_18[v4->field_14] = v12;
  if (!v12)
    sub_1003E260(4);
  v13 = v12->lpVtbl;
  v76 = v4->field_33C - -95.0;
  v12->lpVtbl->meth14(v12, a1, v4->flags_338, v76, 1056769, 2, 5, 1, -1);
  v12->field_C = sub_10047360;
  v12->field_8 = (int(__cdecl *)())sub_10047290;
  v12->field_3838.field_1A99C[28] = 3;
  v14 = GetStringWithIndex(0x50u);
  v13->meth13(v12, v14, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v15 = (unk1E214 *)operator new(0x1E214u);
  if (v15)
    v16 = meth_unk1E214_init(v15);
  else
    v16 = 0;
  v4->field_18[v4->field_14] = v16;
  if (!v16)
    sub_1003E260(4);
  v17 = v16->lpVtbl;
  v77 = v4->field_33C - -114.0;
  v16->lpVtbl->meth14(v16, a1, v4->flags_338, v77, 1056769, 2, 5, 1, -1);
  v16->field_C = sub_10047360;
  v16->field_8 = (int(__cdecl *)())sub_100470E0;
  v16->field_3838.field_1A99C[28] = 3;
  v18 = GetStringWithIndex(0xCu);
  v17->meth13(v16, v18, 1, 1, &dword_100AB448);
  ++v4->field_14;
  ++LOWORD(v4->last);
  v78 = (float)dword_100AB428;
  v81 = (float)dword_100AB42C;
  v19 = (unk1E214 *)operator new(0x1E214u);
  if (v19)
    v20 = meth_unk1E214_init(v19);
  else
    v20 = 0;
  v4->field_18[v4->field_14] = v20;
  if (!v20)
    sub_1003E260(4);
  v20->lpVtbl->meth14(v20, a1, LODWORD(v78), v81, 0x402001, 2, 5, 1, 120);
  v20->field_C = sub_10047360;
  v20->field_8 = sub_100458A0;
  v80 = (__int64)v81;
  *(_DWORD *)v20->gap54 = v80;
  v21 = (__int64)v78;
  v20->field_50 = v21;
  v20->field_58 = v21 + 127;
  *(_DWORD *)v20->gap5C = v80 + 33;
  v20->field_2968 = 0;
  v82 = v81 - -33.0;
  *(_WORD *)&v20->field_2A40[2] = 121;
  ++v4->field_14;
  v79 = v21 + 127;
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v4->field_18[v4->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v23->lpVtbl->meth14(v23, a1, LODWORD(v78), v82, 0x402001, 2, 5, 1, 82);
  v23->field_C = sub_10047360;
  v23->field_8 = (int(__cdecl *)())sub_10043FA0;
  v24 = (__int64)v82;
  *(_DWORD *)v23->gap54 = v24;
  v23->field_50 = v21;
  v23->field_58 = v79;
  *(_DWORD *)v23->gap5C = v24 + 33;
  v83 = v82 - -33.0;
  v23->field_2968 = 0;
  *(_WORD *)&v23->field_2A40[2] = 83;
  ++v4->field_14;
  v25 = (unk1E214 *)operator new(0x1E214u);
  if (v25)
    v26 = meth_unk1E214_init(v25);
  else
    v26 = 0;
  v4->field_18[v4->field_14] = v26;
  if (!v26)
    sub_1003E260(4);
  v26->lpVtbl->meth14(v26, a1, LODWORD(v78), v83, 4202497, 2, 5, 1, 84);
  v26->field_C = sub_10047360;
  v26->field_8 = sub_10045880;
  v27 = (__int64)v83;
  *(_DWORD *)v26->gap54 = v27;
  v26->field_50 = v21;
  v26->field_58 = v79;
  *(_DWORD *)v26->gap5C = v27 + 33;
  v26->field_2968 = 0;
  *(_WORD *)&v26->field_2A40[2] = 85;
  ++v4->field_14;
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v4->field_18[v4->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v30 = v29->lpVtbl;
  v29->lpVtbl->meth14(v29, a1, 1121189888, 85.0, 1048577, 2, 5, 1, -1);
  v29->field_3838.field_1A99C[28] = 3;
  v31 = GetStringWithIndex(0x38u);
  v30->meth13(v29, v31, 1, 1, &unk_100AB458);
  ++v4->field_14;
  v32 = (unk1E214 *)operator new(0x1E214u);
  if (v32)
    v33 = meth_unk1E214_init(v32);
  else
    v33 = 0;
  v4->field_18[v4->field_14] = v33;
  if (!v33)
    sub_1003E260(4);
  v34 = v33->lpVtbl;
  v33->lpVtbl->meth14(v33, a1, 1138491392, 66.0, 20481, 2, 5, 1, -1);
  v33->field_4 = sub_10041300;
  v33->field_3838.field_1A99C[28] = 52;
  v34->meth13(v33, String2, 1, 4, &unk_100AB458);
  ++v4->field_14;
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v4->field_18[v4->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  v36->lpVtbl->meth14(v36, a1, 1121189888, 123.0, 1048577, 2, 5, 1, -1);
  v36->field_3838.field_1A99C[28] = 3;
  v38 = GetStringWithIndex(0x36u);
  v37->meth13(v36, v38, 1, 1, &unk_100AB458);
  ++v4->field_14;
  v39 = (unk1E214 *)operator new(0x1E214u);
  if (v39)
    v40 = meth_unk1E214_init(v39);
  else
    v40 = 0;
  v4->field_18[v4->field_14] = v40;
  if (!v40)
    sub_1003E260(4);
  v41 = v40->lpVtbl;
  v40->lpVtbl->meth14(v40, a1, 1138491392, 104.0, 20481, 2, 5, 1, -1);
  v40->field_4 = sub_100413B0;
  v40->field_3838.field_1A99C[28] = 52;
  v41->meth13(v40, String2, 1, 4, &unk_100AB458);
  ++v4->field_14;
  v42 = (unk1E214 *)operator new(0x1E214u);
  if (v42)
    v43 = meth_unk1E214_init(v42);
  else
    v43 = 0;
  v4->field_18[v4->field_14] = v43;
  if (!v43)
    sub_1003E260(4);
  v44 = v43->lpVtbl;
  v43->lpVtbl->meth14(v43, a1, 0, 70.0, 1048585, 2, 5, 1, -1);
  v43->field_3838.field_1A99C[28] = 3;
  v45 = GetStringWithIndex(0x52u);
  v44->meth13(v43, v45, 1, 1, &unk_100AB468);
  ++v4->field_14;
  v46 = (unk1E214 *)operator new(0x1E214u);
  if (v46)
    v47 = meth_unk1E214_init(v46);
  else
    v47 = 0;
  v4->field_18[v4->field_14] = v47;
  if (!v47)
    sub_1003E260(4);
  v48 = v47->lpVtbl;
  v47->lpVtbl->meth14(v47, a1, 1134886912, 97.0, 20481, 2, 5, 1, -1);
  v47->field_4 = sub_10041670;
  v47->field_3838.field_1A99C[28] = 5;
  v48->meth13(v47, String2, 1, 3, &unk_100AB468);
  ++v4->field_14;
  v49 = (unk1E214 *)operator new(0x1E214u);
  if (v49)
    v50 = meth_unk1E214_init(v49);
  else
    v50 = 0;
  v4->field_18[v4->field_14] = v50;
  if (!v50)
    sub_1003E260(4);
  v51 = v50->lpVtbl;
  v50->lpVtbl->meth14(v50, a1, 0, 150.0, 1048585, 2, 5, 1, -1);
  v50->field_3838.field_1A99C[28] = 3;
  v52 = GetStringWithIndex(0x53u);
  v51->meth13(v50, v52, 1, 1, &unk_100AB468);
  ++v4->field_14;
  v53 = (unk1E214 *)operator new(0x1E214u);
  if (v53)
    v54 = meth_unk1E214_init(v53);
  else
    v54 = 0;
  v4->field_18[v4->field_14] = v54;
  if (!v54)
    sub_1003E260(4);
  v55 = v54->lpVtbl;
  v54->lpVtbl->meth14(v54, a1, 1138819072, 125.0, 1048585, 2, 5, 1, -1);
  v54->field_3838.field_1A99C[28] = 3;
  v56 = GetStringWithIndex(0x40u);
  v55->meth13(v54, v56, 1, 1, &unk_100AB4F8);
  ++v4->field_14;
  v57 = (unk1E214 *)operator new(0x1E214u);
  if (v57)
    v58 = meth_unk1E214_init(v57);
  else
    v58 = 0;
  v4->field_18[v4->field_14] = v58;
  if (!v58)
    sub_1003E260(4);
  v59 = v58->lpVtbl;
  v58->lpVtbl->meth14(v58, a1, 1138819072, 185.0, 1048585, 2, 5, 1, -1);
  v58->field_3838.field_1A99C[28] = 3;
  v60 = GetStringWithIndex(0x46u);
  v59->meth13(v58, v60, 1, 1, &unk_100AB4F8);
  ++v4->field_14;
  v61 = (unk1E214 *)operator new(0x1E214u);
  if (v61)
    v62 = meth_unk1E214_init(v61);
  else
    v62 = 0;
  v4->field_18[v4->field_14] = v62;
  if (!v62)
    sub_1003E260(4);
  v63 = v62->lpVtbl;
  v62->lpVtbl->meth14(v62, a1, 1138819072, 141.0, 20481, 2, 5, 1, -1);
  v62->field_4 = sub_100417B0;
  v62->field_3838.field_1A99C[28] = 5;
  v63->meth13(v62, String2, 1, 3, &unk_100AB4F8);
  ++v4->field_14;
  v64 = (unk1E214 *)operator new(0x1E214u);
  if (v64)
    v65 = meth_unk1E214_init(v64);
  else
    v65 = 0;
  v4->field_18[v4->field_14] = v65;
  if (!v65)
    sub_1003E260(4);
  v66 = v65->lpVtbl;
  v65->lpVtbl->meth14(v65, a1, v4->flags_338, 203.0, 1048585, 2, 5, 1, -1);
  v65->field_3838.field_1A99C[28] = 3;
  v67 = GetStringWithIndex(0x40u);
  v66->meth13(v65, v67, 1, 1, &unk_100AB478);
  ++v4->field_14;
  v68 = (unk1E214 *)operator new(0x1E214u);
  if (v68)
    v69 = meth_unk1E214_init(v68);
  else
    v69 = 0;
  v4->field_18[v4->field_14] = v69;
  if (!v69)
    sub_1003E260(4);
  v70 = v69->lpVtbl;
  v69->lpVtbl->meth14(v69, a1, v4->flags_338, 265.0, 1048585, 2, 5, 1, -1);
  v69->field_3838.field_1A99C[28] = 3;
  v71 = GetStringWithIndex(0x41u);
  v70->meth13(v69, v71, 1, 1, &unk_100AB478);
  ++v4->field_14;
  v72 = (unk1E214 *)operator new(0x1E214u);
  if (v72)
    v73 = meth_unk1E214_init(v72);
  else
    v73 = 0;
  v4->field_18[v4->field_14] = v73;
  if (!v73)
    sub_1003E260(4);
  v74 = v73->lpVtbl;
  v73->lpVtbl->meth14(v73, a1, 1138819072, 217.0, 20481, 2, 5, 1, -1);
  v73->field_4 = sub_10041710;
  v73->field_3838.field_1A99C[28] = 5;
  v74->meth13(v73, String2, 1, 3, &unk_100AB478);
  ++v4->field_14;
  return 1;
}
// 100409F0: using guessed type int sub_100409F0();
// 10040A20: using guessed type int sub_10040A20();
// 10041300: using guessed type int __cdecl sub_10041300(int);
// 100413B0: using guessed type int __cdecl sub_100413B0(int);
// 10043FA0: using guessed type int __cdecl sub_10043FA0(int);
// 100AB428: using guessed type int dword_100AB428;
// 100AB42C: using guessed type int dword_100AB42C;
// 100AB448: using guessed type int dword_100AB448;

//----- (100558A0) --------------------------------------------------------
int __cdecl s_unk000C8_100558A0(unk000C8 *a1) {
  unk00348 *v1;      // eax
  unk00348 *v2;      // esi
  unk1E214 *v3;      // eax
  unk1E214 *v4;      // edi
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // edi
  unk1E214Vtbl *v7;  // ebx
  LPCSTR v8;         // eax
  unk1E214 *v9;      // eax
  unk1E214 *v10;     // edi
  unk1E214Vtbl *v11; // ebx
  LPCSTR v12;        // eax
  unk1E214 *v13;     // eax
  unk1E214 *v14;     // edi
  unk1E214Vtbl *v15; // ebx
  LPCSTR v16;        // eax
  unk1E214 *v17;     // eax
  unk1E214 *v18;     // edi
  unk1E214Vtbl *v19; // ebx
  LPCSTR v20;        // eax
  unk1E214 *v21;     // eax
  unk1E214 *v22;     // edi
  unk1E214Vtbl *v23; // ebx
  LPCSTR v24;        // eax
  unk1E214 *v25;     // eax
  unk1E214 *v26;     // edi
  unk1E214 *v27;     // eax
  unk1E214 *v28;     // edi
  unk1E214Vtbl *v29; // ebx
  LPCSTR v30;        // eax
  unk1E214 *v31;     // eax
  unk1E214 *v32;     // edi
  unk1E214Vtbl *v33; // ebx
  LPCSTR v34;        // eax
  unk1E214 *v35;     // eax
  unk1E214 *v36;     // edi
  unk1E214 *v37;     // eax
  unk1E214 *v38;     // edi
  unk1E214Vtbl *v39; // ebx
  unk1E214 *v40;     // eax
  unk1E214 *v41;     // edi
  unk1E214Vtbl *v42; // ebx
  LPCSTR v43;        // eax
  unk1E214 *v44;     // eax
  unk1E214 *v45;     // edi
  unk1E214 *v46;     // eax
  unk1E214 *v47;     // edi
  unk1E214Vtbl *v48; // ebx
  unk1E214 *v49;     // eax
  unk1E214 *v50;     // edi
  unk1E214 *v51;     // eax
  unk1E214 *v52;     // edi
  WORD v53;          // ax
  unk1E214 *v54;     // eax
  unk1E214 *v55;     // edi
  unk1E214Vtbl *v56; // ebx
  float v58;         // [esp+2A8h] [ebp-34h]
  float v59;         // [esp+2A8h] [ebp-34h]
  float v60;         // [esp+2A8h] [ebp-34h]

  *(&a1->field_10 + 1) = 0;
  gGameMode = GAME_MODE_6;
  *(&a1->field_6C + a1->field_10) = 1;
  v1 = (unk00348 *)operator new(0x348u);
  if (v1)
    v2 = meth_unk00348_10048470(v1);
  else
    v2 = 0;
  a1->field_14[a1->field_10] = v2;
  if (!v2)
    sub_1003E260(4);
  ++a1->field_10;
  v2->field_340 = a1;
  v2->field_10 = 0;
  v2->flags_338 = 1128464384;
  v2->field_33C = 130.0;
  v3 = (unk1E214 *)operator new(0x1E214u);
  if (v3)
    v4 = meth_unk1E214_init(v3);
  else
    v4 = 0;
  v2->field_18[v2->field_14] = v4;
  if (!v4)
    sub_1003E260(4);
  v4->lpVtbl->meth14(v4, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v2->field_14;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v2->field_18[v2->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v7 = v6->lpVtbl;
  v6->lpVtbl->meth14(v6, a1, v2->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v6->field_3838.field_1A99C[28] = 3;
  v8 = GetStringWithIndex(0x54u);
  v7->meth13(v6, v8, 1, 1, &unk_100AB508);
  ++v2->field_14;
  v9 = (unk1E214 *)operator new(0x1E214u);
  if (v9)
    v10 = meth_unk1E214_init(v9);
  else
    v10 = 0;
  v2->field_18[v2->field_14] = v10;
  if (!v10)
    sub_1003E260(4);
  v11 = v10->lpVtbl;
  v10->lpVtbl->meth14(v10, a1, v2->flags_338, v2->field_33C, 1056769, 2, 5, 1, -1);
  v10->field_C = sub_10044030;
  v10->field_8 = sub_10044010;
  v10->field_3838.field_1A99C[28] = 3;
  v12 = GetStringWithIndex(0x55u);
  v11->meth13(v10, v12, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v13 = (unk1E214 *)operator new(0x1E214u);
  if (v13)
    v14 = meth_unk1E214_init(v13);
  else
    v14 = 0;
  v2->field_18[v2->field_14] = v14;
  if (!v14)
    sub_1003E260(4);
  v15 = v14->lpVtbl;
  v58 = v2->field_33C - -19.0;
  v14->lpVtbl->meth14(v14, a1, v2->flags_338, v58, 1056769, 2, 5, 1, -1);
  v14->field_C = sub_10044070;
  v14->field_8 = sub_10044050;
  v14->field_3838.field_1A99C[28] = 3;
  v16 = GetStringWithIndex(0x56u);
  v15->meth13(v14, v16, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v17 = (unk1E214 *)operator new(0x1E214u);
  if (v17)
    v18 = meth_unk1E214_init(v17);
  else
    v18 = 0;
  v2->field_18[v2->field_14] = v18;
  if (!v18)
    sub_1003E260(4);
  v19 = v18->lpVtbl;
  v59 = v2->field_33C - -38.0;
  v18->lpVtbl->meth14(v18, a1, v2->flags_338, v59, 1056769, 2, 5, 1, -1);
  v18->field_C = sub_100440B0;
  v18->field_8 = sub_10044090;
  v18->field_3838.field_1A99C[28] = 3;
  v20 = GetStringWithIndex(0x57u);
  v19->meth13(v18, v20, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v21 = (unk1E214 *)operator new(0x1E214u);
  if (v21)
    v22 = meth_unk1E214_init(v21);
  else
    v22 = 0;
  v2->field_18[v2->field_14] = v22;
  if (!v22)
    sub_1003E260(4);
  v23 = v22->lpVtbl;
  v60 = v2->field_33C - -114.0;
  v22->lpVtbl->meth14(v22, a1, v2->flags_338, v60, 1056769, 2, 5, 1, -1);
  v22->field_C = sub_10047360;
  v22->field_8 = (int(__cdecl *)())sub_100463C0;
  v22->field_3838.field_1A99C[28] = 3;
  v24 = GetStringWithIndex(0xCu);
  v23->meth13(v22, v24, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v25 = (unk1E214 *)operator new(0x1E214u);
  if (v25)
    v26 = meth_unk1E214_init(v25);
  else
    v26 = 0;
  v2->field_18[v2->field_14] = v26;
  if (!v26)
    sub_1003E260(4);
  v26->lpVtbl->meth14(v26, a1, 1119748096, 317.0, 9, 2, 5, 0, 103);
  ++v2->field_14;
  v27 = (unk1E214 *)operator new(0x1E214u);
  if (v27)
    v28 = meth_unk1E214_init(v27);
  else
    v28 = 0;
  v2->field_18[v2->field_14] = v28;
  if (!v28)
    sub_1003E260(4);
  v29 = v28->lpVtbl;
  v28->lpVtbl->meth14(v28, a1, 1124204544, 336.0, 1048585, 2, 5, 1, -1);
  v28->field_3838.field_1A99C[28] = 52;
  v30 = GetStringWithIndex(0x59u);
  v29->meth13(v28, v30, 1, 4, &dword_100AB448);
  ++v2->field_14;
  v31 = (unk1E214 *)operator new(0x1E214u);
  if (v31)
    v32 = meth_unk1E214_init(v31);
  else
    v32 = 0;
  v2->field_18[v2->field_14] = v32;
  if (!v32)
    sub_1003E260(4);
  v33 = v32->lpVtbl;
  v32->lpVtbl->meth14(v32, a1, 1124204544, 374.0, 1048585, 2, 5, 1, -1);
  v32->field_3838.field_1A99C[28] = 3;
  v34 = GetStringWithIndex(0x5Au);
  v33->meth13(v32, v34, 1, 1, &dword_100AB448);
  ++v2->field_14;
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v2->field_18[v2->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v36->lpVtbl->meth14(v36, a1, 1125842944, 393.0, 9, 2, 5, 0, 57);
  ++v2->field_14;
  v37 = (unk1E214 *)operator new(0x1E214u);
  if (v37)
    v38 = meth_unk1E214_init(v37);
  else
    v38 = 0;
  v2->field_18[v2->field_14] = v38;
  if (!v38)
    sub_1003E260(4);
  v39 = v38->lpVtbl;
  v38->lpVtbl->meth14(v38, a1, 1125842944, 393.0, 2097153, 2, 5, 1, -1);
  v38->field_8 = (int(__cdecl *)())sub_10042AC0;
  v38->field_4 = sub_1003F050;
  v38->field_10 = (int)meth_unk1A5E0_3;
  v38->field_3838.field_1A99C[28] = 3;
  v39->meth13(v38, String2, 1, 1, &dword_100AB448);
  (*(void(__thiscall **)(char *))(*(_DWORD *)v38->vectorUnk + 4))(v38->vectorUnk);
  v38->field_50 = 155;
  *(_DWORD *)&v38->vectorUnk[1060] = 155;
  v38->field_58 = 347;
  *(_DWORD *)&v38->vectorUnk[1068] = 347;
  *(_DWORD *)v38->gap54 = 393;
  *(_DWORD *)&v38->vectorUnk[1064] = 393;
  *(_DWORD *)v38->gap5C = 409;
  *(_DWORD *)&v38->vectorUnk[1072] = 409;
  *(_WORD *)&v38->vectorUnk[1052] =
      *(_WORD *)&v38->vectorUnk[1068] - *(_WORD *)&v38->vectorUnk[1060] - 16;
  ++v2->field_14;
  ++LOWORD(v2->last);
  v40 = (unk1E214 *)operator new(0x1E214u);
  if (v40)
    v41 = meth_unk1E214_init(v40);
  else
    v41 = 0;
  v2->field_18[v2->field_14] = v41;
  if (!v41)
    sub_1003E260(4);
  v42 = v41->lpVtbl;
  v41->lpVtbl->meth14(v41, a1, 1124204544, 412.0, 1048585, 2, 5, 1, -1);
  v41->field_3838.field_1A99C[28] = 3;
  v43 = GetStringWithIndex(0x5Bu);
  v42->meth13(v41, v43, 1, 1, &dword_100AB448);
  ++v2->field_14;
  v44 = (unk1E214 *)operator new(0x1E214u);
  if (v44)
    v45 = meth_unk1E214_init(v44);
  else
    v45 = 0;
  v2->field_18[v2->field_14] = v45;
  if (!v45)
    sub_1003E260(4);
  v45->lpVtbl->meth14(v45, a1, 1125842944, 431.0, 9, 2, 5, 0, 57);
  ++v2->field_14;
  v46 = (unk1E214 *)operator new(0x1E214u);
  if (v46)
    v47 = meth_unk1E214_init(v46);
  else
    v47 = 0;
  v2->field_18[v2->field_14] = v47;
  if (!v47)
    sub_1003E260(4);
  v48 = v47->lpVtbl;
  v47->lpVtbl->meth14(v47, a1, 1125842944, 431.0, 2097153, 2, 5, 1, -1);
  v47->field_8 = (int(__cdecl *)())sub_10042AC0;
  v47->field_4 = sub_1003F0B0;
  v47->field_10 = (int)meth_unk1A5E0_3;
  v47->field_3838.field_1A99C[28] = 3;
  v48->meth13(v47, String2, 1, 1, &dword_100AB448);
  (*(void(__thiscall **)(char *))(*(_DWORD *)v47->vectorUnk + 4))(v47->vectorUnk);
  v47->field_50 = 155;
  *(_DWORD *)&v47->vectorUnk[1060] = 155;
  v47->field_58 = 347;
  *(_DWORD *)&v47->vectorUnk[1068] = 347;
  *(_DWORD *)v47->gap54 = 431;
  *(_DWORD *)&v47->vectorUnk[1064] = 431;
  *(_DWORD *)v47->gap5C = 447;
  *(_DWORD *)&v47->vectorUnk[1072] = 447;
  *(_WORD *)&v47->vectorUnk[1052] =
      *(_WORD *)&v47->vectorUnk[1068] - *(_WORD *)&v47->vectorUnk[1060] - 16;
  ++v2->field_14;
  ++LOWORD(v2->last);
  v49 = (unk1E214 *)operator new(0x1E214u);
  if (v49)
    v50 = meth_unk1E214_init(v49);
  else
    v50 = 0;
  v2->field_18[v2->field_14] = v50;
  if (!v50)
    sub_1003E260(4);
  v50->lpVtbl->meth14(v50, a1, 1117782016, 46.0, 9, 2, 5, 0, 7);
  ++v2->field_14;
  v51 = (unk1E214 *)operator new(0x1E214u);
  if (v51)
    v52 = meth_unk1E214_init(v51);
  else
    v52 = 0;
  v2->field_18[v2->field_14] = v52;
  if (!v52)
    sub_1003E260(4);
  v52->lpVtbl->meth14(v52, a1, 1135181824, 61.0, 1, 2, 5, 1, 69);
  v52->field_4 = sub_10040930;
  v53 = v2->field_14 + 1;
  ++v52->field_2AB4[0];
  v52->field_2AB4[1] = v53;
  ++v2->field_14;
  v54 = (unk1E214 *)operator new(0x1E214u);
  if (v54)
    v55 = meth_unk1E214_init(v54);
  else
    v55 = 0;
  v2->field_18[v2->field_14] = v55;
  if (!v55)
    sub_1003E260(4);
  v56 = v55->lpVtbl;
  v55->lpVtbl->meth14(v55, a1, v2->flags_338, 160.0, 1052673, 2, 5, 1, -1);
  v55->field_4 = sub_1003FC40;
  v55->field_3838.field_1A99C[28] = 3;
  v56->meth13(v55, asc_100AD300, 1, 1, &unk_100AB4A8);
  ++v2->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;

//----- (100563E0) --------------------------------------------------------
int __cdecl s_unk000C8_100563E0(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // ebp
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214 *v16;     // eax
  unk1E214 *v17;     // ebx
  unk1E214Vtbl *v18; // edi
  int v19;           // edx
  unk1E214 *v20;     // eax
  unk1E214 *v21;     // esi
  unk1E214Vtbl *v22; // edi
  LPCSTR v23;        // eax
  unk1E214 *v24;     // eax
  unk1E214 *v25;     // esi
  unk1E214Vtbl *v26; // edi
  LPCSTR v27;        // eax
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // esi
  float v31;         // [esp+124h] [ebp-38h]
  float v32;         // [esp+124h] [ebp-38h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128136704;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x5Cu);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  v11->lpVtbl->meth14(v11, a1, v3->flags_338, v3->field_33C, 1048585, 2, 5, 1, -1);
  v11->field_3838.field_1A99C[28] = 52;
  v13 = GetStringWithIndex(0x3Cu);
  v12->meth13(v11, v13, 1, 4, &dword_100AB448);
  ++v3->field_14;
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v15->lpVtbl->meth14(v15, a1, 1125908480, 172.0, 9, 2, 5, 0, 57);
  ++v3->field_14;
  v16 = (unk1E214 *)operator new(0x1E214u);
  if (v16)
    v17 = meth_unk1E214_init(v16);
  else
    v17 = 0;
  v3->field_18[v3->field_14] = v17;
  if (!v17)
    sub_1003E260(4);
  v18 = v17->lpVtbl;
  v17->lpVtbl->meth14(v17, a1, v3->flags_338, 174.0, 2097153, 2, 5, 1, -1);
  v17->field_8 = (int(__cdecl *)())sub_10042A90;
  v17->field_4 = sub_1003EEF0;
  v17->field_10 = (int)sub_1003EF60;
  v17->field_3838.field_1A99C[28] = 3;
  v18->meth13(v17, String2, 1, 1, &dword_100AB448);
  if (strlen(dplay4aShortName) <= 1)
    strcpy(dplay4aShortName, GetStringWithIndex(0xC0u));
  v19 = *(_DWORD *)v17->vectorUnk;
  strcpy(&v17->vectorUnk[9], dplay4aShortName);
  (*(void(__thiscall **)(char *))(v19 + 4))(v17->vectorUnk);
  v17->field_50 = 186;
  *(_DWORD *)&v17->vectorUnk[1060] = 186;
  v17->field_58 = 316;
  *(_DWORD *)&v17->vectorUnk[1068] = 316;
  *(_DWORD *)v17->gap54 = 172;
  *(_DWORD *)&v17->vectorUnk[1064] = 172;
  *(_DWORD *)v17->gap5C = 188;
  *(_DWORD *)&v17->vectorUnk[1072] = 188;
  *(_WORD *)&v17->vectorUnk[1052] =
      *(_WORD *)&v17->vectorUnk[1068] - *(_WORD *)&v17->vectorUnk[1060] - 16;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v20 = (unk1E214 *)operator new(0x1E214u);
  if (v20)
    v21 = meth_unk1E214_init(v20);
  else
    v21 = 0;
  v3->field_18[v3->field_14] = v21;
  if (!v21)
    sub_1003E260(4);
  v22 = v21->lpVtbl;
  v31 = v3->field_33C - -95.0;
  v21->lpVtbl->meth14(v21, a1, v3->flags_338, v31, 1056769, 2, 5, 1, -1);
  v21->field_C = sub_10047360;
  v21->field_8 = sub_10043CD0;
  v21->field_3838.field_1A99C[28] = 3;
  v23 = GetStringWithIndex(0x1Eu);
  v22->meth13(v21, v23, 1, 1, &dword_100AB448);
  dword_10AA29A8 = (int)v21;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v24 = (unk1E214 *)operator new(0x1E214u);
  if (v24)
    v25 = meth_unk1E214_init(v24);
  else
    v25 = 0;
  v3->field_18[v3->field_14] = v25;
  if (!v25)
    sub_1003E260(4);
  v26 = v25->lpVtbl;
  v32 = v3->field_33C - -114.0;
  v25->lpVtbl->meth14(v25, a1, v3->flags_338, v32, 1056769, 2, 5, 1, -1);
  v25->field_C = sub_10047360;
  v25->field_8 = (int(__cdecl *)())sub_10043FC0;
  v25->field_3838.field_1A99C[28] = 3;
  v27 = GetStringWithIndex(0xCu);
  v26->meth13(v25, v27, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v3->field_18[v3->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v29->lpVtbl->meth14(v29, a1, 1117782016, 46.0, 9, 2, 5, 0, 7);
  ++v3->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29A8: using guessed type int dword_10AA29A8;

//----- (10056A10) --------------------------------------------------------
int __cdecl s_unk000C8_10056A10(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // ebp
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // ebx
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // ebx
  unk1E214Vtbl *v8;  // esi
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // ebx
  unk1E214Vtbl *v12; // esi
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // ebx
  unk1E214 *v16;     // eax
  unk1E214 *v17;     // ebx
  unk1E214Vtbl *v18; // esi
  int v19;           // edx
  unk1E214 *v20;     // eax
  unk1E214 *v21;     // esi
  unk1E214Vtbl *v22; // edi
  LPCSTR v23;        // eax
  unk1E214 *v24;     // eax
  unk1E214 *v25;     // esi
  unk1E214Vtbl *v26; // edi
  LPCSTR v27;        // eax
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // esi
  float v31;         // [esp+124h] [ebp-38h]
  float v32;         // [esp+124h] [ebp-38h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128136704;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x5Du);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  v11->lpVtbl->meth14(v11, a1, v3->flags_338, v3->field_33C, 1048585, 2, 5, 1, -1);
  v11->field_3838.field_1A99C[28] = 52;
  v13 = GetStringWithIndex(0x5Eu);
  v12->meth13(v11, v13, 1, 4, &dword_100AB448);
  ++v3->field_14;
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v15->lpVtbl->meth14(v15, a1, 1125908480, 172.0, 9, 2, 5, 0, 57);
  ++v3->field_14;
  v16 = (unk1E214 *)operator new(0x1E214u);
  if (v16)
    v17 = meth_unk1E214_init(v16);
  else
    v17 = 0;
  v3->field_18[v3->field_14] = v17;
  if (!v17)
    sub_1003E260(4);
  v18 = v17->lpVtbl;
  v17->lpVtbl->meth14(v17, a1, v3->flags_338, 174.0, 2097153, 2, 5, 1, -1);
  v17->field_8 = (int(__cdecl *)())sub_10042AC0;
  v17->field_4 = sub_1003EF90;
  v17->field_10 = (int)sub_1003F020;
  v17->field_3838.field_1A99C[28] = 3;
  v18->meth13(v17, String2, 1, 1, &dword_100AB448);
  v19 = *(_DWORD *)v17->vectorUnk;
  strcpy(&v17->vectorUnk[9], String1);
  (*(void(__thiscall **)(char *))(v19 + 4))(v17->vectorUnk);
  v17->field_50 = 155;
  *(_DWORD *)&v17->vectorUnk[1060] = 155;
  v17->field_58 = 347;
  *(_DWORD *)&v17->vectorUnk[1068] = 347;
  *(_DWORD *)v17->gap54 = 172;
  *(_DWORD *)&v17->vectorUnk[1064] = 172;
  *(_DWORD *)v17->gap5C = 188;
  *(_DWORD *)&v17->vectorUnk[1072] = 188;
  *(_WORD *)&v17->vectorUnk[1052] =
      *(_WORD *)&v17->vectorUnk[1068] - *(_WORD *)&v17->vectorUnk[1060] - 16;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v20 = (unk1E214 *)operator new(0x1E214u);
  if (v20)
    v21 = meth_unk1E214_init(v20);
  else
    v21 = 0;
  v3->field_18[v3->field_14] = v21;
  if (!v21)
    sub_1003E260(4);
  v22 = v21->lpVtbl;
  v31 = v3->field_33C - -95.0;
  v21->lpVtbl->meth14(v21, a1, v3->flags_338, v31, 1056785, 2, 5, 1, -1);
  v21->field_C = sub_10047360;
  v21->field_8 = (int(__cdecl *)())sub_10043F50;
  v21->field_3838.field_1A99C[28] = 2;
  v23 = GetStringWithIndex(0x1Eu);
  v22->meth13(v21, v23, 1, 0, &dword_100AB448);
  dword_10AA29E8 = (int)v21;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v24 = (unk1E214 *)operator new(0x1E214u);
  if (v24)
    v25 = meth_unk1E214_init(v24);
  else
    v25 = 0;
  v3->field_18[v3->field_14] = v25;
  if (!v25)
    sub_1003E260(4);
  v26 = v25->lpVtbl;
  v32 = v3->field_33C - -114.0;
  v25->lpVtbl->meth14(v25, a1, v3->flags_338, v32, 1056769, 2, 5, 1, -1);
  v25->field_C = sub_10047360;
  v25->field_8 = (int(__cdecl *)())sub_10044B40;
  v25->field_3838.field_1A99C[28] = 3;
  v27 = GetStringWithIndex(0xCu);
  v26->meth13(v25, v27, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v3->field_18[v3->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v29->lpVtbl->meth14(v29, a1, 1117782016, 46.0, 9, 2, 5, 0, 7);
  ++v3->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29E8: using guessed type int dword_10AA29E8;

//----- (10056FF0) --------------------------------------------------------
int __cdecl s_unk000C8_10056FF0(unk000C8 *a1) {
  unk00348 *v1;      // eax
  unk00348 *v2;      // esi
  unk1E214 *v3;      // eax
  unk1E214 *v4;      // edi
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // edi
  unk1E214Vtbl *v7;  // ebx
  LPCSTR v8;         // eax
  unk1E214 *v9;      // eax
  unk1E214 *v10;     // edi
  unk1A5E0Vtbl *v11; // edx
  unk1E214 *v12;     // eax
  unk1E214 *v13;     // edi
  unk1E214Vtbl *v14; // ebx
  LPCSTR v15;        // eax
  unk1E214 *v16;     // eax
  unk1E214 *v17;     // edi
  int v18;           // eax
  unk1E214Vtbl *v19; // ebx
  BOOL v20;          // eax
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // edi
  unk1E214Vtbl *v24; // ebx
  LPCSTR v25;        // eax
  unk1E214 *v26;     // eax
  unk1E214 *v27;     // edi
  unk1E214Vtbl *v28; // ebx
  LPCSTR v29;        // eax
  unk1E214 *v30;     // eax
  unk1E214 *v31;     // edi
  float v33;         // [esp+13Ch] [ebp-34h]
  float v34;         // [esp+13Ch] [ebp-34h]
  float v35;         // [esp+13Ch] [ebp-34h]
  float v36;         // [esp+13Ch] [ebp-34h]
  BOOL v37;          // [esp+14Ch] [ebp-24h]

  *(&a1->field_10 + 1) = 0;
  sub_100586A0();
  dword_10AA2898 = 1;
  *(&a1->field_6C + a1->field_10) = 1;
  v1 = (unk00348 *)operator new(0x348u);
  if (v1)
    v2 = meth_unk00348_10048470(v1);
  else
    v2 = 0;
  a1->field_14[a1->field_10] = v2;
  if (!v2)
    sub_1003E260(4);
  ++a1->field_10;
  v2->field_340 = a1;
  v2->field_10 = 0;
  v2->flags_338 = 1128464384;
  v2->field_33C = 130.0;
  v3 = (unk1E214 *)operator new(0x1E214u);
  if (v3)
    v4 = meth_unk1E214_init(v3);
  else
    v4 = 0;
  v2->field_18[v2->field_14] = v4;
  if (!v4)
    sub_1003E260(4);
  v4->lpVtbl->meth14(v4, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v2->field_14;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v2->field_18[v2->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v7 = v6->lpVtbl;
  v6->lpVtbl->meth14(v6, a1, v2->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v6->field_3838.field_1A99C[28] = 3;
  v8 = GetStringWithIndex(0x5Fu);
  v7->meth13(v6, v8, 1, 1, &unk_100AB508);
  ++v2->field_14;
  v9 = (unk1E214 *)operator new(0x1E214u);
  if (v9)
    v10 = meth_unk1E214_init(v9);
  else
    v10 = 0;
  v2->field_18[v2->field_14] = v10;
  if (!v10)
    sub_1003E260(4);
  v10->lpVtbl->meth14(v10, a1, v2->flags_338, v2->field_33C, 12289, 2, 5, 1, -1);
  v11 = v10->field_3838.lpVtbl;
  v10->field_4 = sub_1003EB90;
  *(_DWORD *)&v10->field_3838.field_1A99C[16] = 1;
  v11->meth5(&v10->field_3838, 262145, dword_100AB4E8, 3, 0, -1);
  dword_10AA29D4 = (int)v10;
  ++v2->field_14;
  ++LOWORD(v2->last);
  if (dword_10AA287C == 2) {
    v12 = (unk1E214 *)operator new(0x1E214u);
    if (v12)
      v13 = meth_unk1E214_init(v12);
    else
      v13 = 0;
    v2->field_18[v2->field_14] = v13;
    if (!v13)
      sub_1003E260(4);
    v14 = v13->lpVtbl;
    v33 = v2->field_33C - -57.0;
    v13->lpVtbl->meth14(v13, a1, v2->flags_338, v33, 1056769, 2, 5, 1, -1);
    v13->field_C = sub_10047360;
    v13->field_8 = sub_10043DA0;
    v13->field_3838.field_1A99C[28] = 3;
    v15 = GetStringWithIndex(0x5Eu);
    v14->meth13(v13, v15, 1, 1, &dword_100AB448);
    ++v2->field_14;
    ++LOWORD(v2->last);
  }
  v16 = (unk1E214 *)operator new(0x1E214u);
  if (v16)
    v17 = meth_unk1E214_init(v16);
  else
    v17 = 0;
  v2->field_18[v2->field_14] = v17;
  if (!v17)
    sub_1003E260(4);
  if (dword_10AA287C == 2 || (v18 = 1056785, dword_10AA287C == 3))
    v18 = 1056769;
  v19 = v17->lpVtbl;
  v34 = v2->field_33C - -76.0;
  v17->lpVtbl->meth14(v17, a1, v2->flags_338, v34, v18, 2, 5, 1, -1);
  v17->field_C = sub_10047360;
  v17->field_8 = sub_10044280;
  v17->field_3838.field_1A99C[28] = 2;
  v20 = dword_10AA287C == 2 || dword_10AA287C == 3;
  v37 = v20;
  v21 = GetStringWithIndex(0x60u);
  v19->meth13(v17, v21, 1, v37, &dword_100AB448);
  dword_10AA29D8 = (int)v17;
  ++v2->field_14;
  ++LOWORD(v2->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v2->field_18[v2->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v24 = v23->lpVtbl;
  v35 = v2->field_33C - -95.0;
  v23->lpVtbl->meth14(v23, a1, v2->flags_338, v35, 1056769, 2, 5, 1, -1);
  v23->field_C = sub_10047360;
  v23->field_8 = sub_100440D0;
  v23->field_3838.field_1A99C[28] = 3;
  v25 = GetStringWithIndex(0x61u);
  v24->meth13(v23, v25, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v2->field_18[v2->field_14] = v27;
  if (!v27)
    sub_1003E260(4);
  v28 = v27->lpVtbl;
  v36 = v2->field_33C - -114.0;
  v27->lpVtbl->meth14(v27, a1, v2->flags_338, v36, 1056769, 2, 5, 1, -1);
  v27->field_C = sub_10047360;
  v27->field_8 = (int(__cdecl *)())sub_10044AE0;
  v27->field_3838.field_1A99C[28] = 3;
  v29 = GetStringWithIndex(0xCu);
  v28->meth13(v27, v29, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v30 = (unk1E214 *)operator new(0x1E214u);
  if (v30)
    v31 = meth_unk1E214_init(v30);
  else
    v31 = 0;
  v2->field_18[v2->field_14] = v31;
  if (!v31)
    sub_1003E260(4);
  v31->lpVtbl->meth14(v31, a1, 1117782016, 46.0, 9, 2, 5, 0, 7);
  ++v2->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA287C: using guessed type int dword_10AA287C;
// 10AA2898: using guessed type int dword_10AA2898;
// 10AA29D4: using guessed type int dword_10AA29D4;
// 10AA29D8: using guessed type int dword_10AA29D8;

//----- (100575F0) --------------------------------------------------------
int __cdecl s_unk000C8_100575F0(unk000C8 *a1) {
  unk00348 *v1;      // eax
  unk00348 *v2;      // ebp
  unk1E214 *v3;      // eax
  unk1E214 *v4;      // edi
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // edi
  unk1E214Vtbl *v7;  // ebx
  LPCSTR v8;         // eax
  unk1E214 *v9;      // eax
  unk1E214 *v10;     // edi
  unk1E214Vtbl *v11; // ebx
  LPCSTR v12;        // eax
  unk1E214 *v13;     // eax
  unk1E214 *v14;     // edi
  unk1E214 *v15;     // eax
  unk1E214 *v16;     // ebx
  unk1E214Vtbl *v17; // edi
  LPCSTR v18;        // eax
  char *v19;         // edx
  const char *v20;   // edi
  unsigned int v21;  // kr08_4
  const char *v22;   // esi
  char *v23;         // edi
  int v24;           // edx
  unk1E214 *v25;     // eax
  unk1E214 *v26;     // esi
  unk1E214Vtbl *v27; // edi
  LPCSTR v28;        // eax
  unk1E214 *v29;     // eax
  unk1E214 *v30;     // esi
  unk1E214Vtbl *v31; // edi
  LPCSTR v32;        // eax
  unk1E214 *v33;     // eax
  unk1E214 *v34;     // esi
  float v36;         // [esp+124h] [ebp-38h]
  float v37;         // [esp+124h] [ebp-38h]

  *(&a1->field_10 + 1) = 0;
  sub_100586A0();
  *(&a1->field_6C + a1->field_10) = 1;
  v1 = (unk00348 *)operator new(0x348u);
  if (v1)
    v2 = meth_unk00348_10048470(v1);
  else
    v2 = 0;
  a1->field_14[a1->field_10] = v2;
  if (!v2)
    sub_1003E260(4);
  ++a1->field_10;
  v2->field_340 = a1;
  v2->field_10 = 0;
  v2->flags_338 = 1128464384;
  v2->field_33C = 130.0;
  v3 = (unk1E214 *)operator new(0x1E214u);
  if (v3)
    v4 = meth_unk1E214_init(v3);
  else
    v4 = 0;
  v2->field_18[v2->field_14] = v4;
  if (!v4)
    sub_1003E260(4);
  v4->lpVtbl->meth14(v4, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v2->field_14;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v2->field_18[v2->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v7 = v6->lpVtbl;
  v6->lpVtbl->meth14(v6, a1, v2->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v6->field_3838.field_1A99C[28] = 3;
  v8 = GetStringWithIndex(0x62u);
  v7->meth13(v6, v8, 1, 1, &unk_100AB508);
  ++v2->field_14;
  v9 = (unk1E214 *)operator new(0x1E214u);
  if (v9)
    v10 = meth_unk1E214_init(v9);
  else
    v10 = 0;
  v2->field_18[v2->field_14] = v10;
  if (!v10)
    sub_1003E260(4);
  v11 = v10->lpVtbl;
  v10->lpVtbl->meth14(v10, a1, v2->flags_338, v2->field_33C, 1048585, 2, 5, 1, -1);
  v10->field_3838.field_1A99C[28] = 52;
  v12 = GetStringWithIndex(0x63u);
  v11->meth13(v10, v12, 1, 4, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v13 = (unk1E214 *)operator new(0x1E214u);
  if (v13)
    v14 = meth_unk1E214_init(v13);
  else
    v14 = 0;
  v2->field_18[v2->field_14] = v14;
  if (!v14)
    sub_1003E260(4);
  v14->lpVtbl->meth14(v14, a1, 1125908480, 172.0, 9, 2, 5, 0, 57);
  ++v2->field_14;
  v15 = (unk1E214 *)operator new(0x1E214u);
  if (v15)
    v16 = meth_unk1E214_init(v15);
  else
    v16 = 0;
  v2->field_18[v2->field_14] = v16;
  if (!v16)
    sub_1003E260(4);
  v17 = v16->lpVtbl;
  v16->lpVtbl->meth14(v16, a1, v2->flags_338, 174.0, 2097153, 2, 5, 1, -1);
  v16->field_8 = (int(__cdecl *)())sub_10042B00;
  v16->field_4 = sub_1003F210;
  v16->field_10 = (int)sub_1003F280;
  v16->field_3838.field_1A99C[28] = 3;
  v17->meth13(v16, String2, 1, 1, &dword_100AB448);
  if (strlen(g_lpSessionDesc_dwUser3) > 1) {
    v19 = &v16->vectorUnk[9];
    v20 = g_lpSessionDesc_dwUser3;
  } else {
    v18 = GetStringWithIndex(0xC1u);
    v19 = &v16->vectorUnk[9];
    v20 = v18;
  }
  v21 = strlen(v20) + 1;
  v22 = v20;
  v23 = v19;
  v24 = *(_DWORD *)v16->vectorUnk;
  qmemcpy(v23, v22, v21);
  (*(void(__thiscall **)(char *))(v24 + 4))(v16->vectorUnk);
  v16->field_50 = 197;
  *(_DWORD *)&v16->vectorUnk[1060] = 197;
  v16->field_58 = 309;
  *(_DWORD *)&v16->vectorUnk[1068] = 309;
  *(_DWORD *)v16->gap54 = 172;
  *(_DWORD *)&v16->vectorUnk[1064] = 172;
  *(_DWORD *)v16->gap5C = 188;
  *(_DWORD *)&v16->vectorUnk[1072] = 188;
  *(_WORD *)&v16->vectorUnk[1052] =
      *(_WORD *)&v16->vectorUnk[1068] - *(_WORD *)&v16->vectorUnk[1060] - 16;
  ++v2->field_14;
  ++LOWORD(v2->last);
  v25 = (unk1E214 *)operator new(0x1E214u);
  if (v25)
    v26 = meth_unk1E214_init(v25);
  else
    v26 = 0;
  v2->field_18[v2->field_14] = v26;
  if (!v26)
    sub_1003E260(4);
  v27 = v26->lpVtbl;
  v36 = v2->field_33C - -95.0;
  v26->lpVtbl->meth14(v26, a1, v2->flags_338, v36, 1056769, 2, 5, 1, -1);
  v26->field_C = sub_10047360;
  v26->field_8 = sub_100443E0;
  v26->field_3838.field_1A99C[28] = 3;
  v28 = GetStringWithIndex(0x1Eu);
  v27->meth13(v26, v28, 1, 1, &dword_100AB448);
  dword_10AA29BC = (int)v26;
  ++v2->field_14;
  ++LOWORD(v2->last);
  v29 = (unk1E214 *)operator new(0x1E214u);
  if (v29)
    v30 = meth_unk1E214_init(v29);
  else
    v30 = 0;
  v2->field_18[v2->field_14] = v30;
  if (!v30)
    sub_1003E260(4);
  v31 = v30->lpVtbl;
  v37 = v2->field_33C - -114.0;
  v30->lpVtbl->meth14(v30, a1, v2->flags_338, v37, 1056769, 2, 5, 1, -1);
  v30->field_C = sub_10047360;
  v30->field_8 = (int(__cdecl *)())sub_100444C0;
  v30->field_3838.field_1A99C[28] = 3;
  v32 = GetStringWithIndex(0xCu);
  v31->meth13(v30, v32, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v33 = (unk1E214 *)operator new(0x1E214u);
  if (v33)
    v34 = meth_unk1E214_init(v33);
  else
    v34 = 0;
  v2->field_18[v2->field_14] = v34;
  if (!v34)
    sub_1003E260(4);
  v34->lpVtbl->meth14(v34, a1, 1117782016, 46.0, 9, 2, 5, 0, 7);
  ++v2->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA29BC: using guessed type int dword_10AA29BC;

//----- (10057C10) --------------------------------------------------------
int __cdecl s_unk000C8_10057C10(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *u348;    // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // ebp
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // ebp
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // ebp
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // ebp
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // ebp
  unk1E214Vtbl *v20; // ebx
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // ebp
  unk1E214Vtbl *v24; // ebx
  LPCSTR v25;        // eax
  unk1E214 *v26;     // eax
  unk1E214 *v27;     // ebp
  unk1E214Vtbl *v28; // ebx
  LPCSTR v29;        // eax
  unk1E214 *v30;     // eax
  unk1E214 *v31;     // ebp
  unk1E214Vtbl *v32; // ebx
  LPCSTR v33;        // eax
  unk1E214 *v34;     // eax
  unk1E214 *v35;     // ebp
  WORD v36;          // ax
  unk1E214 *v37;     // eax
  unk1E214 *v38;     // ebp
  unk1E214Vtbl *v39; // ebx
  unk1E214 *v40;     // eax
  unk1E214 *v41;     // ebp
  WORD v42;          // ax
  unk1E214 *v43;     // eax
  unk1E214 *v44;     // ebp
  unk1E214Vtbl *v45; // ebx
  unk1E214 *v46;     // eax
  unk1E214 *v47;     // ebp
  unk1E214Vtbl *v48; // ebx
  unk1E214 *v49;     // eax
  unk1E214 *v50;     // ebp
  unk1E214Vtbl *v51; // ebx
  LPCSTR v52;        // eax
  unk1E214 *v53;     // eax
  unk1E214 *v54;     // ebx
  unk1E214 *v55;     // eax
  unk1E214 *v56;     // ebx
  float v58;         // [esp+288h] [ebp-34h]
  float v59;         // [esp+288h] [ebp-34h]
  float v60;         // [esp+288h] [ebp-34h]
  float v61;         // [esp+288h] [ebp-34h]
  float v62;         // [esp+288h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  u348 = (unk00348 *)operator new(0x348u);
  if (u348)
    v3 = meth_unk00348_10048470(u348);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x64u);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  if (gNetworkPlay == 2) {
    v10 = (unk1E214 *)operator new(0x1E214u);
    if (v10)
      v11 = meth_unk1E214_init(v10);
    else
      v11 = 0;
    v3->field_18[v3->field_14] = v11;
    if (!v11)
      sub_1003E260(4);
    v12 = v11->lpVtbl;
    v11->lpVtbl->meth14(v11, a1, v3->flags_338, v3->field_33C, 1056769, 2, 5, 1, -1);
    v11->field_C = sub_100474B0;
    v11->field_8 = sub_10042EE0;
    v11->field_3838.field_1A99C[28] = 3;
    v13 = GetStringWithIndex(0x1Bu);
    v12->meth13(v11, v13, 1, 1, &dword_100AB448);
    ++v3->field_14;
    ++LOWORD(v3->last);
    v14 = (unk1E214 *)operator new(0x1E214u);
    if (v14)
      v15 = meth_unk1E214_init(v14);
    else
      v15 = 0;
    v3->field_18[v3->field_14] = v15;
    if (!v15)
      sub_1003E260(4);
    v16 = v15->lpVtbl;
    v58 = v3->field_33C - -19.0;
    v15->lpVtbl->meth14(v15, a1, v3->flags_338, v58, 0x102001, 2, 5, 1, -1);
    v15->field_C = sub_10047360;
    v15->field_8 = sub_10043180;
    v15->field_3838.field_1A99C[28] = 3;
    v17 = GetStringWithIndex(0x1Cu);
    v16->meth13(v15, v17, 1, 1, &dword_100AB448);
    ++v3->field_14;
    ++LOWORD(v3->last);
    v18 = (unk1E214 *)operator new(0x1E214u);
    if (v18)
      v19 = meth_unk1E214_init(v18);
    else
      v19 = 0;
    v3->field_18[v3->field_14] = v19;
    if (!v19)
      sub_1003E260(4);
    v20 = v19->lpVtbl;
    v59 = v3->field_33C - -38.0;
    v19->lpVtbl->meth14(v19, a1, v3->flags_338, v59, 1056769, 2, 5, 1, -1);
    v19->field_C = sub_10047360;
    v19->field_8 = sub_100430B0;
    v19->field_3838.field_1A99C[28] = 3;
    v21 = GetStringWithIndex(0x1Du);
    v20->meth13(v19, v21, 1, 1, &dword_100AB448);
    ++v3->field_14;
    ++LOWORD(v3->last);
    v22 = (unk1E214 *)operator new(0x1E214u);
    if (v22)
      v23 = meth_unk1E214_init(v22);
    else
      v23 = 0;
    v3->field_18[v3->field_14] = v23;
    if (!v23)
      sub_1003E260(4);
    v24 = v23->lpVtbl;
    v60 = v3->field_33C - -57.0;
    v23->lpVtbl->meth14(v23, a1, v3->flags_338, v60, 1056769, 2, 5, 1, -1);
    v23->field_C = sub_10047360;
    v23->field_8 = sub_10044600;
    v23->field_3838.field_1A99C[28] = 3;
    v25 = GetStringWithIndex(0x65u);
    v24->meth13(v23, v25, 1, 1, &dword_100AB448);
    ++v3->field_14;
    ++LOWORD(v3->last);
  }
  v26 = (unk1E214 *)operator new(0x1E214u);
  if (v26)
    v27 = meth_unk1E214_init(v26);
  else
    v27 = 0;
  v3->field_18[v3->field_14] = v27;
  if (!v27)
    sub_1003E260(4);
  v28 = v27->lpVtbl;
  v61 = v3->field_33C - -95.0;
  v27->lpVtbl->meth14(v27, a1, v3->flags_338, v61, 1056769, 2, 5, 1, -1);
  v27->field_C = sub_10047360;
  v27->field_8 = (int(__cdecl *)())meth_unk000C8_100446D0;
  v27->field_18 = (int)sub_100437D0;
  v27->field_3838.field_1A99C[28] = 3;
  if (dword_10AA2884)
    v29 = GetStringWithIndex(0x66u);
  else
    v29 = GetStringWithIndex(0x1Eu);
  ((void(__thiscall *)(unk1E214 *, LPCSTR))v28->meth13)(v27, v29);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v30 = (unk1E214 *)operator new(0x1E214u);
  if (v30)
    v31 = meth_unk1E214_init(v30);
  else
    v31 = 0;
  v3->field_18[v3->field_14] = v31;
  if (!v31)
    sub_1003E260(4);
  v32 = v31->lpVtbl;
  v62 = v3->field_33C - -114.0;
  v31->lpVtbl->meth14(v31, a1, v3->flags_338, v62, 1056769, 2, 5, 1, -1);
  v31->field_C = sub_10047360;
  v31->field_3838.field_1A99C[28] = 3;
  if (dword_10A9D000)
    v33 = GetStringWithIndex(0x67u);
  else
    v33 = GetStringWithIndex(0xCu);
  ((void(__thiscall *)(unk1E214 *, LPCSTR))v32->meth13)(v31, v33);
  dword_10AA29B8 = (int)v31;
  ++v3->field_14;
  ++LOWORD(v3->last);
  v34 = (unk1E214 *)operator new(0x1E214u);
  if (v34)
    v35 = meth_unk1E214_init(v34);
  else
    v35 = 0;
  v3->field_18[v3->field_14] = v35;
  if (!v35)
    sub_1003E260(4);
  v35->lpVtbl->meth14(v35, a1, 1116864512, 212.0, 1, 2, 5, 1, 22);
  v35->field_4 = sub_100407E0;
  v36 = v3->field_14 + 1;
  ++v35->field_2AB4[0];
  v35->field_2AB4[1] = v36;
  ++v3->field_14;
  v37 = (unk1E214 *)operator new(0x1E214u);
  if (v37)
    v38 = meth_unk1E214_init(v37);
  else
    v38 = 0;
  v3->field_18[v3->field_14] = v38;
  if (!v38)
    sub_1003E260(4);
  v39 = v38->lpVtbl;
  v38->lpVtbl->meth14(v38, a1, v3->flags_338, 275.0, 1052673, 2, 5, 1, -1);
  v38->field_4 = sub_1003FE80;
  v38->field_3838.field_1A99C[28] = 3;
  v39->meth13(v38, asc_100AD300, 1, 1, &unk_100AB4B8);
  ++v3->field_14;
  v40 = (unk1E214 *)operator new(0x1E214u);
  if (v40)
    v41 = meth_unk1E214_init(v40);
  else
    v41 = 0;
  v3->field_18[v3->field_14] = v41;
  if (!v41)
    sub_1003E260(4);
  v41->lpVtbl->meth14(v41, a1, 1134723072, 72.0, 1, 2, 5, 1, 17);
  v41->field_4 = sub_10040730;
  v42 = v3->field_14 + 1;
  ++v41->field_2AB4[0];
  v41->field_2AB4[1] = v42;
  ++v3->field_14;
  v43 = (unk1E214 *)operator new(0x1E214u);
  if (v43)
    v44 = meth_unk1E214_init(v43);
  else
    v44 = 0;
  v3->field_18[v3->field_14] = v44;
  if (!v44)
    sub_1003E260(4);
  v45 = v44->lpVtbl;
  v44->lpVtbl->meth14(v44, a1, v3->flags_338, 152.0, 1052673, 2, 5, 1, -1);
  v44->field_4 = sub_1003FA00;
  v44->field_3838.field_1A99C[28] = 3;
  v45->meth13(v44, asc_100AD300, 1, 1, &unk_100AB4A8);
  ++v3->field_14;
  v46 = (unk1E214 *)operator new(0x1E214u);
  if (v46)
    v47 = meth_unk1E214_init(v46);
  else
    v47 = 0;
  v3->field_18[v3->field_14] = v47;
  if (!v47)
    sub_1003E260(4);
  v48 = v47->lpVtbl;
  v47->lpVtbl->meth14(v47, a1, 1121189888, 68.0, 20481, 2, 5, 1, -1);
  v47->field_4 = sub_100408D0;
  v47->field_3838.field_1A99C[28] = 5;
  v48->meth13(v47, ::a1, 1, 3, &unk_100AB458);
  ++v3->field_14;
  v49 = (unk1E214 *)operator new(0x1E214u);
  if (v49)
    v50 = meth_unk1E214_init(v49);
  else
    v50 = 0;
  v3->field_18[v3->field_14] = v50;
  if (!v50)
    sub_1003E260(4);
  v51 = v50->lpVtbl;
  v50->lpVtbl->meth14(v50, a1, 1121189888, 115.0, 1048577, 2, 5, 1, -1);
  v50->field_3838.field_1A99C[28] = 3;
  v52 = GetStringWithIndex(0x1Du);
  v51->meth13(v50, v52, 1, 1, &unk_100AB458);
  ++v3->field_14;
  v53 = (unk1E214 *)operator new(0x1E214u);
  if (v53)
    v54 = meth_unk1E214_init(v53);
  else
    v54 = 0;
  v3->field_18[v3->field_14] = v54;
  if (!v54)
    sub_1003E260(4);
  v54->lpVtbl->meth14(v54, a1, 1138393088, 141.0, 1, 2, 5, 1, 86);
  v54->field_4 = sub_1003F5E0;
  ++v3->field_14;
  v55 = (unk1E214 *)operator new(0x1E214u);
  if (v55)
    v56 = meth_unk1E214_init(v55);
  else
    v56 = 0;
  v3->field_18[v3->field_14] = v56;
  if (!v56)
    sub_1003E260(4);
  v56->lpVtbl->meth14(v56, a1, 1139671040, 224.0, 1, 2, 5, 1, -1);
  v56->field_4 = sub_1003F680;
  ++v3->field_14;
  return 1;
}
// 1003FA00: using guessed type int __cdecl sub_1003FA00(int);
// 1003FE80: using guessed type int __cdecl sub_1003FE80(int);
// 10040730: using guessed type int __cdecl sub_10040730(int);
// 100407E0: using guessed type int __cdecl sub_100407E0(int);
// 100AB448: using guessed type int dword_100AB448;
// 1022AF18: using guessed type int gNetworkPlay;
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA29B8: using guessed type int dword_10AA29B8;

//----- (100586A0) --------------------------------------------------------
int *__cdecl sub_100586A0() {
  int *result; // eax

  result = dword_10AA253C;
  dword_10AA288C = 0;
  do {
    *(result - 1) = -1;
    *result = 0;
    result[1] = 0;
    result += 3;
  } while ((int)result < (int)&unk_10AA259C);
  return result;
}
// 10AA253C: using guessed type int dword_10AA253C[];
// 10AA288C: using guessed type int dword_10AA288C;

//----- (100586D0) --------------------------------------------------------
int __cdecl sub_100586D0(int a1) {
  int v1;  // ecx
  int *v2; // eax

  v1 = 0;
  v2 = dword_10AA2538;
  while (*v2 != a1) {
    v2 += 3;
    ++v1;
    if ((int)v2 >= (int)&dword_10AA2598)
      return 0;
  }
  return dword_10AA253C[3 * v1];
}
// 10AA2538: using guessed type int dword_10AA2538[];
// 10AA253C: using guessed type int dword_10AA253C[];
// 10AA2598: using guessed type int dword_10AA2598;

//----- (10058700) --------------------------------------------------------
int sub_10058700() {
  int v0;  // ecx
  int *v1; // eax

  if (!dword_10A9D008)
    return 0;
  v0 = 0;
  v1 = dword_10AA2538;
  while (*v1 != *(_DWORD *)(dword_10A9D008 + 8)) {
    v1 += 3;
    ++v0;
    if ((int)v1 >= (int)&dword_10AA2598)
      return 0;
  }
  dword_10AA253C[3 * v0] = dword_10AA253C[3 * v0] == 0;
  return dword_10AA253C[3 * v0];
}
// 10AA2538: using guessed type int dword_10AA2538[];
// 10AA253C: using guessed type int dword_10AA253C[];
// 10AA2598: using guessed type int dword_10AA2598;

//----- (10058750) --------------------------------------------------------
int __cdecl s_unk000C8_10058750(unk000C8 *a1) {
  unk00348 *v1;         // eax
  unk00348 *v2;         // ebp
  unk1E214 *v3;         // eax
  unk1E214 *v4;         // esi
  unk1E214 *v5;         // eax
  unk1E214 *v6;         // esi
  unk1E214 *v7;         // eax
  unk1E214 *v8;         // esi
  unk1E214Vtbl *v9;     // ebx
  LPCSTR v10;           // eax
  unk1E214 *v11;        // eax
  unk1E214 *v12;        // esi
  unk1E214Vtbl *v13;    // ebx
  LPCSTR v14;           // eax
  unk1E214 *v15;        // eax
  unk1E214 *v16;        // esi
  unk1E214Vtbl *v17;    // ebx
  LPCSTR v18;           // eax
  unk1E214 *v19;        // eax
  unk1E214 *v20;        // esi
  unk1E214Vtbl *v21;    // ebx
  LPCSTR v22;           // eax
  unk1E214 *v23;        // eax
  unk1E214 *v24;        // esi
  unk1E214Vtbl *v25;    // ebx
  LPCSTR v26;           // eax
  unk1E214 *v27;        // eax
  unk1E214 *v28;        // esi
  unk1E214Vtbl *v29;    // ebx
  LPCSTR v30;           // eax
  unk1E214 *v31;        // eax
  unk1E214 *v32;        // esi
  unk1E214Vtbl *v33;    // ebx
  LPCSTR v34;           // eax
  unk1E214 *v35;        // eax
  unk1E214 *v36;        // esi
  unk1E214Vtbl *v37;    // ebx
  LPCSTR v38;           // eax
  unk1E214 *v39;        // eax
  unk1E214 *v40;        // esi
  unk1A5E0Vtbl *u1A5E0; // edx
  unk1E214 *v42;        // eax
  unk1E214 *v43;        // esi
  unk1E214Vtbl *v44;    // ebx
  __int16 v45;          // cx
  unk1E214 *v46;        // eax
  unk1E214 *v47;        // esi
  unk1A5E0 *v48;        // ecx
  unk1E214 *v49;        // eax
  unk1E214 *v50;        // esi
  unk1E214 *v51;        // eax
  unk1E214 *v52;        // esi
  unk1E214 *v53;        // eax
  unk1E214 *v54;        // esi
  WORD v55;             // ax
  unk1E214 *v56;        // eax
  unk1E214 *v57;        // esi
  unk1E214Vtbl *v58;    // ebx
  unk1E214 *v59;        // eax
  unk1E214 *v60;        // esi
  WORD v61;             // ax
  unk1E214 *v62;        // eax
  unk1E214 *v63;        // esi
  unk1E214Vtbl *v64;    // ebx
  unk1E214 *v65;        // eax
  unk1E214 *v66;        // esi
  WORD v67;             // ax
  unk1E214 *v68;        // eax
  unk1E214 *v69;        // esi
  unk1E214Vtbl *v70;    // ebx
  unk1E214 *v71;        // eax
  unk1E214 *v72;        // esi
  WORD v73;             // ax
  unk1E214 *v74;        // eax
  unk1E214 *v75;        // esi
  unk1E214Vtbl *v76;    // ebx
  unk1E214 *v77;        // eax
  unk1E214 *v78;        // ebx
  unk1E214Vtbl *v79;    // esi
  int v80;              // edx
  float v82;            // [esp+3E0h] [ebp-34h]
  float v83;            // [esp+3E0h] [ebp-34h]
  float v84;            // [esp+3E0h] [ebp-34h]
  float v85;            // [esp+3E0h] [ebp-34h]
  float v86;            // [esp+3E0h] [ebp-34h]
  float v87;            // [esp+3E0h] [ebp-34h]
  float v88;            // [esp+3E0h] [ebp-34h]

  *(&a1->field_10 + 1) = 0;
  gGameMode = GAME_MODE_6;
  sub_1003E310();
  sub_1003E510();
  *(&a1->field_6C + a1->field_10) = 1;
  v1 = (unk00348 *)operator new(0x348u);
  if (v1)
    v2 = meth_unk00348_10048470(v1);
  else
    v2 = 0;
  a1->field_14[a1->field_10] = v2;
  if (!v2)
    sub_1003E260(4);
  ++a1->field_10;
  v2->field_340 = a1;
  v2->field_10 = 0;
  v2->flags_338 = 1128464384;
  v2->field_33C = 111.0;
  v3 = (unk1E214 *)operator new(0x1E214u);
  if (v3)
    v4 = meth_unk1E214_init(v3);
  else
    v4 = 0;
  v2->field_18[v2->field_14] = v4;
  if (!v4)
    sub_1003E260(4);
  v4->lpVtbl->meth14(v4, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v2->field_14;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v2->field_18[v2->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v6->lpVtbl->meth14(v6, a1, 0, 320.0, 9, 2, 5, 0, 95);
  ++v2->field_14;
  v7 = (unk1E214 *)operator new(0x1E214u);
  if (v7)
    v8 = meth_unk1E214_init(v7);
  else
    v8 = 0;
  v2->field_18[v2->field_14] = v8;
  if (!v8)
    sub_1003E260(4);
  v9 = v8->lpVtbl;
  v8->lpVtbl->meth14(v8, a1, v2->flags_338, v2->field_33C, 1056769, 2, 5, 1, -1);
  v8->field_C = sub_10047360;
  v8->field_8 = sub_10042B30;
  v8->field_3838.field_1A99C[28] = 3;
  v10 = GetStringWithIndex(0x14u);
  v9->meth13(v8, v10, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v11 = (unk1E214 *)operator new(0x1E214u);
  if (v11)
    v12 = meth_unk1E214_init(v11);
  else
    v12 = 0;
  v2->field_18[v2->field_14] = v12;
  if (!v12)
    sub_1003E260(4);
  v13 = v12->lpVtbl;
  v82 = v2->field_33C - -19.0;
  v12->lpVtbl->meth14(v12, a1, v2->flags_338, v82, 1056769, 2, 5, 1, -1);
  v12->field_C = sub_10047360;
  v12->field_8 = sub_10042DC0;
  v12->field_3838.field_1A99C[28] = 3;
  v14 = GetStringWithIndex(0x15u);
  v13->meth13(v12, v14, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v15 = (unk1E214 *)operator new(0x1E214u);
  if (v15)
    v16 = meth_unk1E214_init(v15);
  else
    v16 = 0;
  v2->field_18[v2->field_14] = v16;
  if (!v16)
    sub_1003E260(4);
  v17 = v16->lpVtbl;
  v83 = v2->field_33C - -38.0;
  v16->lpVtbl->meth14(v16, a1, v2->flags_338, v83, 1056769, 2, 5, 1, -1);
  v16->field_C = sub_10047360;
  v16->field_8 = sub_10042E20;
  v16->field_3838.field_1A99C[28] = 3;
  v18 = GetStringWithIndex(0x16u);
  v17->meth13(v16, v18, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v19 = (unk1E214 *)operator new(0x1E214u);
  if (v19)
    v20 = meth_unk1E214_init(v19);
  else
    v20 = 0;
  v2->field_18[v2->field_14] = v20;
  if (!v20)
    sub_1003E260(4);
  v21 = v20->lpVtbl;
  v84 = v2->field_33C - -57.0;
  v20->lpVtbl->meth14(v20, a1, v2->flags_338, v84, 1056769, 2, 5, 1, -1);
  v20->field_C = sub_10047360;
  v20->field_8 = sub_10042C80;
  v20->field_3838.field_1A99C[28] = 3;
  v22 = GetStringWithIndex(0x17u);
  v21->meth13(v20, v22, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v23 = (unk1E214 *)operator new(0x1E214u);
  if (v23)
    v24 = meth_unk1E214_init(v23);
  else
    v24 = 0;
  v2->field_18[v2->field_14] = v24;
  if (!v24)
    sub_1003E260(4);
  v25 = v24->lpVtbl;
  v85 = v2->field_33C - -76.0;
  v24->lpVtbl->meth14(v24, a1, v2->flags_338, v85, 1056769, 2, 5, 1, -1);
  v24->field_C = sub_10047360;
  v24->field_8 = sub_10042E80;
  v24->field_3838.field_1A99C[28] = 3;
  v26 = GetStringWithIndex(0x18u);
  v25->meth13(v24, v26, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  if (gNetworkPlay == 2) {
    v27 = (unk1E214 *)operator new(0x1E214u);
    if (v27)
      v28 = meth_unk1E214_init(v27);
    else
      v28 = 0;
    v2->field_18[v2->field_14] = v28;
    if (!v28)
      sub_1003E260(4);
    v29 = v28->lpVtbl;
    v86 = v2->field_33C - -95.0;
    v28->lpVtbl->meth14(v28, a1, v2->flags_338, v86, 1056769, 2, 5, 1, -1);
    v28->field_C = sub_10047360;
    v28->field_8 = sub_100437B0;
    v28->field_3838.field_1A99C[28] = 3;
    v30 = GetStringWithIndex(0x68u);
    v29->meth13(v28, v30, 1, 1, &dword_100AB448);
    ++v2->field_14;
    ++LOWORD(v2->last);
  }
  v31 = (unk1E214 *)operator new(0x1E214u);
  if (v31)
    v32 = meth_unk1E214_init(v31);
  else
    v32 = 0;
  v2->field_18[v2->field_14] = v32;
  if (!v32)
    sub_1003E260(4);
  v33 = v32->lpVtbl;
  v87 = v2->field_33C - -114.0;
  v32->lpVtbl->meth14(v32, a1, v2->flags_338, v87, 1056769, 2, 5, 1, -1);
  v32->field_C = sub_10047360;
  v32->field_8 = sub_10043A00;
  v32->field_18 = (int)sub_10043810;
  v32->field_3838.field_1A99C[28] = 3;
  if (dword_10AA2884)
    v34 = GetStringWithIndex(0x19u);
  else
    v34 = GetStringWithIndex(0x69u);
  ((void(__thiscall *)(unk1E214 *, LPCSTR))v33->meth13)(v32, v34);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v35 = (unk1E214 *)operator new(0x1E214u);
  if (v35)
    v36 = meth_unk1E214_init(v35);
  else
    v36 = 0;
  v2->field_18[v2->field_14] = v36;
  if (!v36)
    sub_1003E260(4);
  v37 = v36->lpVtbl;
  v88 = v2->field_33C - -133.0;
  v36->lpVtbl->meth14(v36, a1, v2->flags_338, v88, 1056769, 2, 5, 1, -1);
  v36->field_C = sub_10047360;
  v36->field_8 = (int(__cdecl *)())sub_10046400;
  v36->field_3838.field_1A99C[28] = 3;
  v38 = GetStringWithIndex(0xCu);
  v37->meth13(v36, v38, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v39 = (unk1E214 *)operator new(0x1E214u);
  if (v39)
    v40 = meth_unk1E214_init(v39);
  else
    v40 = 0;
  v2->field_18[v2->field_14] = v40;
  if (!v40)
    sub_1003E260(4);
  v40->lpVtbl->meth14(v40, a1, 1107296256, 330.0, 12289, 2, 5, 1, -1);
  u1A5E0 = v40->field_3838.lpVtbl;
  v40->field_4 = sub_1003EBC0;
  *(_DWORD *)&v40->field_3838.field_1A99C[16] = 1;
  u1A5E0->meth5(&v40->field_3838, 25427969, dword_100AB408, 5, 0, -1);
  gUnk1E214 = v40;
  ++v2->field_14;
  v42 = (unk1E214 *)operator new(0x1E214u);
  if (v42)
    v43 = meth_unk1E214_init(v42);
  else
    v43 = 0;
  v2->field_18[v2->field_14] = v43;
  if (!v43)
    sub_1003E260(4);
  v44 = v43->lpVtbl;
  v43->lpVtbl->meth14(v43, a1, 1107296256, 330.0, 2097153, 2, 5, 1, -1);
  v43->field_8 = (int(__cdecl *)())meth_unk1A5E0_3;
  v43->field_4 = sub_1003F110;
  v43->field_10 = (int)sub_1003F170;
  v43->field_3838.field_1A99C[28] = 3;
  v44->meth13(v43, String2, 0, 1, &dword_100AB448);
  v43->field_50 = 32;
  *(_DWORD *)&v43->vectorUnk[1060] = 32;
  v43->field_58 = 415;
  *(_DWORD *)&v43->vectorUnk[1068] = 415;
  v45 = *(_WORD *)&v43->vectorUnk[1068] - *(_WORD *)&v43->vectorUnk[1060];
  *(_DWORD *)v43->gap54 = 330;
  *(_DWORD *)&v43->vectorUnk[1064] = 330;
  *(_DWORD *)v43->gap5C = 346;
  *(_DWORD *)&v43->vectorUnk[1072] = 346;
  *(_WORD *)&v43->vectorUnk[1052] = v45 - 16;
  dword_10AA28D8 = 0;
  dword_10AA285C = 1;
  *(_DWORD *)&v43->vectorUnk[1056] = 1;
  ++v2->field_14;
  v46 = (unk1E214 *)operator new(0x1E214u);
  if (v46)
    v47 = meth_unk1E214_init(v46);
  else
    v47 = 0;
  v2->field_18[v2->field_14] = v47;
  if (!v47)
    sub_1003E260(4);
  v47->lpVtbl->meth14(v47, a1, 1139933184, 2.0, 4097, 2, 5, 1, -1);
  v47->field_4 = sub_1003EBE0;
  *(_DWORD *)&v47->field_3838.field_1A99C[16] = 1;
  v48 = &v47->field_3838;
  if (gNetworkPlay == 2)
    v48->lpVtbl->meth5(v48, 0x2040001, dword_100AB3F8, 4, 0, -1);
  else
    v48->lpVtbl->meth5(v48, 0x3040001, dword_100AB3F8, 4, 0, -1);
  dword_10AA29E4 = (int)v47;
  ++v2->field_14;
  v49 = (unk1E214 *)operator new(0x1E214u);
  if (v49)
    v50 = meth_unk1E214_init(v49);
  else
    v50 = 0;
  v2->field_18[v2->field_14] = v50;
  if (!v50)
    sub_1003E260(4);
  v50->lpVtbl->meth14(v50, a1, 1114898432, 244.0, 9, 2, 5, 1, 54);
  ++v2->field_14;
  v51 = (unk1E214 *)operator new(0x1E214u);
  if (v51)
    v52 = meth_unk1E214_init(v51);
  else
    v52 = 0;
  v2->field_18[v2->field_14] = v52;
  if (!v52)
    sub_1003E260(4);
  v52->lpVtbl->meth14(v52, a1, 1116864512, 214.0, 1, 2, 5, 1, 53);
  v52->field_4 = sub_1003E920;
  ++v2->field_14;
  v53 = (unk1E214 *)operator new(0x1E214u);
  if (v53)
    v54 = meth_unk1E214_init(v53);
  else
    v54 = 0;
  v2->field_18[v2->field_14] = v54;
  if (!v54)
    sub_1003E260(4);
  v54->lpVtbl->meth14(v54, a1, 1135181824, 70.0, 1, 2, 5, 1, 11);
  v54->field_4 = sub_1003F720;
  v55 = v2->field_14 + 1;
  ++v54->field_2AB4[0];
  v54->field_2AB4[1] = v55;
  ++v2->field_14;
  v56 = (unk1E214 *)operator new(0x1E214u);
  if (v56)
    v57 = meth_unk1E214_init(v56);
  else
    v57 = 0;
  v2->field_18[v2->field_14] = v57;
  if (!v57)
    sub_1003E260(4);
  v58 = v57->lpVtbl;
  v57->lpVtbl->meth14(v57, a1, v2->flags_338, 137.0, 0x101001, 2, 5, 1, -1);
  v57->field_4 = sub_1003F760;
  v57->field_3838.field_1A99C[28] = 3;
  v58->meth13(v57, asc_100AD300, 1, 1, &unk_100AB468);
  ++v2->field_14;
  v59 = (unk1E214 *)operator new(0x1E214u);
  if (v59)
    v60 = meth_unk1E214_init(v59);
  else
    v60 = 0;
  v2->field_18[v2->field_14] = v60;
  if (!v60)
    sub_1003E260(4);
  v60->lpVtbl->meth14(v60, a1, 1121452032, 66.0, 1, 2, 5, 1, 25);
  v60->field_4 = sub_10040890;
  v61 = v2->field_14 + 1;
  ++v60->field_2AB4[0];
  v60->field_2AB4[1] = v61;
  ++v2->field_14;
  v62 = (unk1E214 *)operator new(0x1E214u);
  if (v62)
    v63 = meth_unk1E214_init(v62);
  else
    v63 = 0;
  v2->field_18[v2->field_14] = v63;
  if (!v63)
    sub_1003E260(4);
  v64 = v63->lpVtbl;
  v63->lpVtbl->meth14(v63, a1, v2->flags_338, 123.0, 1052673, 2, 5, 1, -1);
  v63->field_4 = sub_1003F7F0;
  v63->field_3838.field_1A99C[28] = 3;
  v64->meth13(v63, asc_100AD300, 1, 1, &unk_100AB498);
  ++v2->field_14;
  v65 = (unk1E214 *)operator new(0x1E214u);
  if (v65)
    v66 = meth_unk1E214_init(v65);
  else
    v66 = 0;
  v2->field_18[v2->field_14] = v66;
  if (!v66)
    sub_1003E260(4);
  v66->lpVtbl->meth14(v66, a1, 1139671040, 129.0, 1, 2, 5, 1, 14);
  v66->field_4 = sub_100408B0;
  v67 = v2->field_14 + 1;
  ++v66->field_2AB4[0];
  v66->field_2AB4[1] = v67;
  ++v2->field_14;
  v68 = (unk1E214 *)operator new(0x1E214u);
  if (v68)
    v69 = meth_unk1E214_init(v68);
  else
    v69 = 0;
  v2->field_18[v2->field_14] = v69;
  if (!v69)
    sub_1003E260(4);
  v70 = v69->lpVtbl;
  v69->lpVtbl->meth14(v69, a1, v2->flags_338, 181.0, 1052673, 2, 5, 1, -1);
  v69->field_4 = sub_1003F990;
  v69->field_3838.field_1A99C[28] = 3;
  v70->meth13(v69, asc_100AD300, 1, 1, &unk_100AB488);
  ++v2->field_14;
  v71 = (unk1E214 *)operator new(0x1E214u);
  if (v71)
    v72 = meth_unk1E214_init(v71);
  else
    v72 = 0;
  v2->field_18[v2->field_14] = v72;
  if (!v72)
    sub_1003E260(4);
  v72->lpVtbl->meth14(v72, a1, 1140621312, 200.0, 1, 2, 5, 1, 12);
  v72->field_4 = sub_10040870;
  v73 = v2->field_14 + 1;
  ++v72->field_2AB4[0];
  v72->field_2AB4[1] = v73;
  ++v2->field_14;
  v74 = (unk1E214 *)operator new(0x1E214u);
  if (v74)
    v75 = meth_unk1E214_init(v74);
  else
    v75 = 0;
  v2->field_18[v2->field_14] = v75;
  if (!v75)
    sub_1003E260(4);
  v76 = v75->lpVtbl;
  v75->lpVtbl->meth14(v75, a1, v2->flags_338, 262.0, 1052673, 2, 5, 1, -1);
  v75->field_4 = sub_1003F860;
  v75->field_3838.field_1A99C[28] = 3;
  v76->meth13(v75, asc_100AD300, 1, 1, &unk_100AB478);
  ++v2->field_14;
  v77 = (unk1E214 *)operator new(0x1E214u);
  if (v77)
    v78 = meth_unk1E214_init(v77);
  else
    v78 = 0;
  v2->field_18[v2->field_14] = v78;
  if (!v78)
    sub_1003E260(4);
  v79 = v78->lpVtbl;
  v78->lpVtbl->meth14(v78, a1, 1134559232, 10.0, 1048577, 2, 5, 1, -1);
  v78->field_3838.field_1A99C[28] = 52;
  v79->meth13(v78, asc_100AD300, 1, 4, &unk_100AB438);
  v80 = *(_DWORD *)v78->vectorUnk;
  strcpy(&v78->vectorUnk[9], g_lpSessionDesc_dwUser3);
  (*(void(__thiscall **)(char *, int, int, int *))(v80 + 4))(v78->vectorUnk, 1, 1, &dword_100AB448);
  ++v2->field_14;
  return 1;
}
// 1003E920: using guessed type int __cdecl sub_1003E920(int);
// 1003EBC0: using guessed type int __cdecl sub_1003EBC0(int);
// 1003EBE0: using guessed type int __cdecl sub_1003EBE0(int);
// 1003F110: using guessed type int __cdecl sub_1003F110(int);
// 1003F720: using guessed type int __cdecl sub_1003F720(int);
// 1003F760: using guessed type int __cdecl sub_1003F760(int);
// 1003F7F0: using guessed type int __cdecl sub_1003F7F0(int);
// 1003F860: using guessed type int __cdecl sub_1003F860(int);
// 1003F990: using guessed type int __cdecl sub_1003F990(int);
// 10040870: using guessed type int __cdecl sub_10040870(int);
// 10040890: using guessed type int __cdecl sub_10040890(int);
// 100408B0: using guessed type int __cdecl sub_100408B0(int);
// 10042B30: using guessed type int sub_10042B30();
// 10042C80: using guessed type int sub_10042C80();
// 10042DC0: using guessed type int sub_10042DC0();
// 10042E20: using guessed type int sub_10042E20();
// 10042E80: using guessed type int sub_10042E80();
// 100437B0: using guessed type int sub_100437B0();
// 100AB448: using guessed type int dword_100AB448;
// 1022AF18: using guessed type int gNetworkPlay;
// 10AA285C: using guessed type int dword_10AA285C;
// 10AA2884: using guessed type int dword_10AA2884;
// 10AA28D8: using guessed type int dword_10AA28D8;
// 10AA29E4: using guessed type int dword_10AA29E4;

//----- (10059760) --------------------------------------------------------
int __cdecl s_unk000C8_10059760(unk000C8 *a1) {
  WORD v1;           // ax
  unk00348 *v2;      // eax
  unk00348 *v3;      // esi
  unk1E214 *v4;      // eax
  unk1E214 *v5;      // edi
  unk1E214 *v6;      // eax
  unk1E214 *v7;      // edi
  unk1E214Vtbl *v8;  // ebx
  LPCSTR v9;         // eax
  unk1E214 *v10;     // eax
  unk1E214 *v11;     // edi
  unk1E214Vtbl *v12; // ebx
  LPCSTR v13;        // eax
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // edi
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // edi
  unk1E214Vtbl *v20; // ebx
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // edi
  float v25;         // [esp+D8h] [ebp-34h]
  float v26;         // [esp+D8h] [ebp-34h]

  v1 = a1->field_10;
  *(&a1->field_10 + 1) = 0;
  *(&a1->field_6C + v1) = 1;
  v2 = (unk00348 *)operator new(0x348u);
  if (v2)
    v3 = meth_unk00348_10048470(v2);
  else
    v3 = 0;
  a1->field_14[a1->field_10] = v3;
  if (!v3)
    sub_1003E260(4);
  ++a1->field_10;
  v3->field_340 = a1;
  v3->field_10 = 0;
  v3->flags_338 = 1128464384;
  v3->field_33C = 130.0;
  v4 = (unk1E214 *)operator new(0x1E214u);
  if (v4)
    v5 = meth_unk1E214_init(v4);
  else
    v5 = 0;
  v3->field_18[v3->field_14] = v5;
  if (!v5)
    sub_1003E260(4);
  v5->lpVtbl->meth14(v5, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v3->field_14;
  v6 = (unk1E214 *)operator new(0x1E214u);
  if (v6)
    v7 = meth_unk1E214_init(v6);
  else
    v7 = 0;
  v3->field_18[v3->field_14] = v7;
  if (!v7)
    sub_1003E260(4);
  v8 = v7->lpVtbl;
  v7->lpVtbl->meth14(v7, a1, v3->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v7->field_3838.field_1A99C[28] = 3;
  v9 = GetStringWithIndex(0x6Au);
  v8->meth13(v7, v9, 1, 1, &unk_100AB508);
  ++v3->field_14;
  v10 = (unk1E214 *)operator new(0x1E214u);
  if (v10)
    v11 = meth_unk1E214_init(v10);
  else
    v11 = 0;
  v3->field_18[v3->field_14] = v11;
  if (!v11)
    sub_1003E260(4);
  v12 = v11->lpVtbl;
  v11->lpVtbl->meth14(v11, a1, v3->flags_338, v3->field_33C, 0x102001, 2, 5, 1, -1);
  v11->field_C = sub_10047360;
  v11->field_8 = sub_10046260;
  v11->field_3838.field_1A99C[28] = 3;
  v13 = GetStringWithIndex(0x6Bu);
  v12->meth13(v11, v13, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v3->field_18[v3->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v25 = v3->field_33C - -19.0;
  v15->lpVtbl->meth14(v15, a1, v3->flags_338, v25, 0x102001, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_10044D00;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0x6Cu);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v3->field_18[v3->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v26 = v3->field_33C - -114.0;
  v19->lpVtbl->meth14(v19, a1, v3->flags_338, v26, 0x102001, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = (int(__cdecl *)())sub_10044C70;
  v19->field_3838.field_1A99C[28] = 3;
  v21 = GetStringWithIndex(0xCu);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  ++v3->field_14;
  ++LOWORD(v3->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v3->field_18[v3->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v23->lpVtbl->meth14(v23, a1, 0x42A00000, 46.0, 9, 2, 5, 0, 8);
  ++v3->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;

//----- (10059BB0) --------------------------------------------------------
int __cdecl s_unk000C8_10059BB0(unk000C8 *a1) {
  unk00348 *v1;      // eax
  unk00348 *v2;      // esi
  unk1E214 *v3;      // eax
  unk1E214 *v4;      // ebp
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // ebp
  unk1E214Vtbl *v7;  // ebx
  LPCSTR v8;         // eax
  unk1E214 *v9;      // eax
  unk1E214 *v10;     // ebp
  unk1A5E0Vtbl *v11; // eax
  unk1A5E0 *v12;     // ebx
  int i;             // ebp
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // ebp
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // ebp
  unk1E214Vtbl *v20; // ebx
  LPCSTR v21;        // eax
  unk1E214 *v22;     // eax
  unk1E214 *v23;     // ebp
  WORD v24;          // cx
  unk1E214 *v25;     // eax
  unk1E214 *v26;     // ebp
  unk1E214Vtbl *v27; // ebx
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // ebp
  WORD v30;          // ax
  unk1E214 *v31;     // eax
  unk1E214 *v32;     // ebp
  unk1E214Vtbl *v33; // ebx
  unk1E214 *v34;     // eax
  unk1E214 *v35;     // ebp
  WORD v36;          // ax
  unk1E214 *v37;     // eax
  unk1E214 *v38;     // ebp
  unk1E214Vtbl *v39; // ebx
  unk1E214 *v40;     // eax
  unk1E214 *v41;     // ebp
  unk1E214Vtbl *v42; // ebx
  unk1E214 *v43;     // eax
  unk1E214 *v44;     // ebp
  unk1E214Vtbl *v45; // ebx
  LPCSTR v46;        // eax
  unk1E214 *v47;     // eax
  unk1E214 *v48;     // ebp
  unk1E214Vtbl *v49; // ebx
  unk1E214 *v50;     // eax
  unk1E214 *v51;     // ebp
  unk1E214Vtbl *v52; // ebx
  LPCSTR v53;        // eax
  unk1E214 *v54;     // eax
  unk1E214 *v55;     // ebp
  unk1E214Vtbl *v56; // ebx
  unk1E214 *v57;     // eax
  unk1E214 *v58;     // ebp
  unk1E214Vtbl *v59; // ebx
  LPCSTR v60;        // eax
  float v62;         // [esp+2E4h] [ebp-34h]
  float v63;         // [esp+2E4h] [ebp-34h]

  gUnkC8Ptr6->last->lpVtbl->meth1(gUnkC8Ptr6->last, aTimeattackGrf);
  *(&a1->field_10 + 1) = 0;
  dword_10AA28E8 = 0;
  *(&a1->field_6C + a1->field_10) = 1;
  v1 = (unk00348 *)operator new(0x348u);
  if (v1)
    v2 = meth_unk00348_10048470(v1);
  else
    v2 = 0;
  a1->field_14[a1->field_10] = v2;
  if (!v2)
    sub_1003E260(4);
  ++a1->field_10;
  v2->field_340 = a1;
  v2->field_10 = 0;
  v2->flags_338 = 1128464384;
  v2->field_33C = 111.0;
  v3 = (unk1E214 *)operator new(0x1E214u);
  if (v3)
    v4 = meth_unk1E214_init(v3);
  else
    v4 = 0;
  v2->field_18[v2->field_14] = v4;
  if (!v4)
    sub_1003E260(4);
  v4->lpVtbl->meth14(v4, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v2->field_14;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v2->field_18[v2->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v7 = v6->lpVtbl;
  v6->lpVtbl->meth14(v6, a1, v2->flags_338, 10.0, 1048585, 2, 5, 1, -1);
  v6->field_3838.field_1A99C[28] = 3;
  v8 = GetStringWithIndex(0x6Eu);
  v7->meth13(v6, v8, 1, 1, &unk_100AB508);
  ++v2->field_14;
  v9 = (unk1E214 *)operator new(0x1E214u);
  if (v9)
    v10 = meth_unk1E214_init(v9);
  else
    v10 = 0;
  v2->field_18[v2->field_14] = v10;
  if (!v10)
    sub_1003E260(4);
  v10->lpVtbl->meth14(v10, a1, v2->flags_338, v2->field_33C, 12289, 2, 5, 1, -1);
  v11 = v10->field_3838.lpVtbl;
  v12 = &v10->field_3838;
  v10->field_4 = sub_1003EAE0;
  *(_DWORD *)&v10->field_3838.field_1A99C[16] = 1;
  v11->meth5(&v10->field_3838, 262145, dword_100AB4D8, 5, 0, -1);
  v10->field_3838.field_4[0] = (DWORD)sub_10042880;
  for (i = 0; i < 26000; i += 260) {
    if ((unk06594 *)((char *)gUnkC8Ptr6->last + i) != (unk06594 *)-4)
      v12->lpVtbl->meth4(v12, (char *)&gUnkC8Ptr6->last->field_4 + i, 0, 1, dword_100AB4D8, 1);
  }
  ++v2->field_14;
  ++LOWORD(v2->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v2->field_18[v2->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v62 = v2->field_33C - -114.0;
  v15->lpVtbl->meth14(v15, a1, v2->flags_338, v62, 1060881, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = sub_10046380;
  v15->field_4 = sub_100418F0;
  v15->field_3838.field_1A99C[28] = 2;
  v17 = GetStringWithIndex(0x1Eu);
  v16->meth13(v15, v17, 1, 0, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v2->field_18[v2->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v63 = v2->field_33C - -133.0;
  v19->lpVtbl->meth14(v19, a1, v2->flags_338, v63, 1056769, 2, 5, 1, -1);
  v19->field_C = sub_10047360;
  v19->field_8 = (int(__cdecl *)())sub_10044DE0;
  v19->field_3838.field_1A99C[28] = 3;
  v21 = GetStringWithIndex(0xCu);
  v20->meth13(v19, v21, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v22 = (unk1E214 *)operator new(0x1E214u);
  if (v22)
    v23 = meth_unk1E214_init(v22);
  else
    v23 = 0;
  v2->field_18[v2->field_14] = v23;
  if (!v23)
    sub_1003E260(4);
  v23->lpVtbl->meth14(v23, a1, 1138425856, 123.0, 1, 2, 5, 1, 17);
  v23->field_4 = sub_100407A0;
  v24 = v2->field_14 + 1;
  ++v23->field_2AB4[0];
  v23->field_2AB4[1] = v24;
  ++v2->field_14;
  v25 = (unk1E214 *)operator new(0x1E214u);
  if (v25)
    v26 = meth_unk1E214_init(v25);
  else
    v26 = 0;
  v2->field_18[v2->field_14] = v26;
  if (!v26)
    sub_1003E260(4);
  v27 = v26->lpVtbl;
  v26->lpVtbl->meth14(v26, a1, v2->flags_338, 181.0, 1052673, 2, 5, 1, -1);
  v26->field_4 = sub_1003FA00;
  v26->field_3838.field_1A99C[28] = 3;
  v27->meth13(v26, asc_100AD300, 1, 1, &unk_100AB488);
  ++v2->field_14;
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v2->field_18[v2->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v29->lpVtbl->meth14(v29, a1, 1135181824, 70.0, 1, 2, 5, 1, 11);
  v29->field_4 = sub_1003F720;
  v30 = v2->field_14 + 1;
  ++v29->field_2AB4[0];
  v29->field_2AB4[1] = v30;
  ++v2->field_14;
  v31 = (unk1E214 *)operator new(0x1E214u);
  if (v31)
    v32 = meth_unk1E214_init(v31);
  else
    v32 = 0;
  v2->field_18[v2->field_14] = v32;
  if (!v32)
    sub_1003E260(4);
  v33 = v32->lpVtbl;
  v32->lpVtbl->meth14(v32, a1, v2->flags_338, 137.0, 1052673, 2, 5, 1, -1);
  v32->field_4 = sub_1003F760;
  v32->field_3838.field_1A99C[28] = 3;
  v33->meth13(v32, asc_100AD300, 1, 1, &unk_100AB468);
  ++v2->field_14;
  v34 = (unk1E214 *)operator new(0x1E214u);
  if (v34)
    v35 = meth_unk1E214_init(v34);
  else
    v35 = 0;
  v2->field_18[v2->field_14] = v35;
  if (!v35)
    sub_1003E260(4);
  v35->lpVtbl->meth14(v35, a1, 1116864512, 212.0, 1, 2, 5, 1, 22);
  v35->field_4 = sub_100407E0;
  v36 = v2->field_14 + 1;
  ++v35->field_2AB4[0];
  v35->field_2AB4[1] = v36;
  ++v2->field_14;
  v37 = (unk1E214 *)operator new(0x1E214u);
  if (v37)
    v38 = meth_unk1E214_init(v37);
  else
    v38 = 0;
  v2->field_18[v2->field_14] = v38;
  if (!v38)
    sub_1003E260(4);
  v39 = v38->lpVtbl;
  v38->lpVtbl->meth14(v38, a1, v2->flags_338, 275.0, 1052673, 2, 5, 1, -1);
  v38->field_4 = sub_1003FE80;
  v38->field_3838.field_1A99C[28] = 3;
  v39->meth13(v38, asc_100AD300, 1, 1, &unk_100AB4B8);
  ++v2->field_14;
  v40 = (unk1E214 *)operator new(0x1E214u);
  if (v40)
    v41 = meth_unk1E214_init(v40);
  else
    v41 = 0;
  v2->field_18[v2->field_14] = v41;
  if (!v41)
    sub_1003E260(4);
  v42 = v41->lpVtbl;
  v41->lpVtbl->meth14(v41, a1, 1121189888, 68.0, 20481, 2, 5, 1, -1);
  v41->field_4 = sub_100408D0;
  v41->field_3838.field_1A99C[28] = 5;
  v42->meth13(v41, ::a1, 1, 3, &unk_100AB458);
  ++v2->field_14;
  v43 = (unk1E214 *)operator new(0x1E214u);
  if (v43)
    v44 = meth_unk1E214_init(v43);
  else
    v44 = 0;
  v2->field_18[v2->field_14] = v44;
  if (!v44)
    sub_1003E260(4);
  v45 = v44->lpVtbl;
  v44->lpVtbl->meth14(v44, a1, 1121189888, 115.0, 1048577, 2, 5, 1, -1);
  v44->field_3838.field_1A99C[28] = 3;
  v46 = GetStringWithIndex(0x1Du);
  v45->meth13(v44, v46, 1, 1, &unk_100AB458);
  ++v2->field_14;
  v47 = (unk1E214 *)operator new(0x1E214u);
  if (v47)
    v48 = meth_unk1E214_init(v47);
  else
    v48 = 0;
  v2->field_18[v2->field_14] = v48;
  if (!v48)
    sub_1003E260(4);
  v49 = v48->lpVtbl;
  v48->lpVtbl->meth14(v48, a1, 1138491392, 208.0, 1052673, 2, 5, 1, -1);
  v48->field_4 = sub_10041040;
  v48->field_3838.field_1A99C[28] = 52;
  v49->meth13(v48, asc_100AD300, 1, 4, &unk_100AB478);
  ++v2->field_14;
  v50 = (unk1E214 *)operator new(0x1E214u);
  if (v50)
    v51 = meth_unk1E214_init(v50);
  else
    v51 = 0;
  v2->field_18[v2->field_14] = v51;
  if (!v51)
    sub_1003E260(4);
  v52 = v51->lpVtbl;
  v51->lpVtbl->meth14(v51, a1, 1138491392, 224.0, 1048577, 2, 5, 1, -1);
  v51->field_3838.field_1A99C[28] = 3;
  v53 = GetStringWithIndex(0x6Fu);
  v52->meth13(v51, v53, 1, 1, &unk_100AB478);
  ++v2->field_14;
  v54 = (unk1E214 *)operator new(0x1E214u);
  if (v54)
    v55 = meth_unk1E214_init(v54);
  else
    v55 = 0;
  v2->field_18[v2->field_14] = v55;
  if (!v55)
    sub_1003E260(4);
  v56 = v55->lpVtbl;
  v55->lpVtbl->meth14(v55, a1, 1138491392, 240.0, 1052673, 2, 5, 1, -1);
  v55->field_4 = sub_10041180;
  v55->field_3838.field_1A99C[28] = 52;
  v56->meth13(v55, asc_100AD300, 1, 4, &unk_100AB478);
  ++v2->field_14;
  v57 = (unk1E214 *)operator new(0x1E214u);
  if (v57)
    v58 = meth_unk1E214_init(v57);
  else
    v58 = 0;
  v2->field_18[v2->field_14] = v58;
  if (!v58)
    sub_1003E260(4);
  v59 = v58->lpVtbl;
  v58->lpVtbl->meth14(v58, a1, 1138491392, 256.0, 1048577, 2, 5, 1, -1);
  v58->field_3838.field_1A99C[28] = 3;
  v60 = GetStringWithIndex(0x3Fu);
  v59->meth13(v58, v60, 1, 1, &unk_100AB478);
  ++v2->field_14;
  return 1;
}
// 1003F720: using guessed type int __cdecl sub_1003F720(int);
// 1003F760: using guessed type int __cdecl sub_1003F760(int);
// 1003FA00: using guessed type int __cdecl sub_1003FA00(int);
// 1003FE80: using guessed type int __cdecl sub_1003FE80(int);
// 100407E0: using guessed type int __cdecl sub_100407E0(int);
// 100AB448: using guessed type int dword_100AB448;
// 10AA28E8: using guessed type int dword_10AA28E8;

//----- (1005A6E0) --------------------------------------------------------
int __cdecl s_unk000C8_1005A6E0(unk000C8 *a1) {
  unk00348 *v1;      // eax
  unk00348 *v2;      // esi
  unk1E214 *v3;      // eax
  unk1E214 *v4;      // ebp
  unk1E214 *v5;      // eax
  unk1E214 *v6;      // ebp
  unk1E214Vtbl *v7;  // ebx
  LPCSTR v8;         // eax
  unk1E214 *v9;      // eax
  unk1E214 *v10;     // ebp
  unk1A5E0Vtbl *v11; // eax
  unk1A5E0 *v12;     // ebx
  int i;             // ebp
  unk1E214 *v14;     // eax
  unk1E214 *v15;     // ebp
  unk1E214Vtbl *v16; // ebx
  LPCSTR v17;        // eax
  unk1E214 *v18;     // eax
  unk1E214 *v19;     // ebp
  unk1E214Vtbl *v20; // ebx
  unk1E214 *v21;     // eax
  unk1E214 *v22;     // ebp
  unk1E214Vtbl *v23; // ebx
  LPCSTR v24;        // eax
  unk1E214 *v25;     // eax
  unk1E214 *v26;     // ebp
  unk1E214Vtbl *v27; // ebx
  unk1E214 *v28;     // eax
  unk1E214 *v29;     // ebp
  unk1E214Vtbl *v30; // ebx
  LPCSTR v31;        // eax
  unk1E214 *v32;     // eax
  unk1E214 *v33;     // ebp
  unk00348 *v34;     // eax
  unk00348 *v35;     // ebp
  unk1E214 *v36;     // eax
  unk1E214 *v37;     // esi
  unk1E214Vtbl *v38; // ebx
  LPCSTR v39;        // eax
  float v41;         // [esp+1B4h] [ebp-34h]

  gUnkC8Ptr6->last->lpVtbl->meth1(gUnkC8Ptr6->last, aTimeattackGrf);
  *(&a1->field_10 + 1) = 0;
  Value = -1;
  dword_10AA28E8 = 0;
  *(&a1->field_6C + a1->field_10) = 1;
  v1 = (unk00348 *)operator new(0x348u);
  if (v1)
    v2 = meth_unk00348_10048470(v1);
  else
    v2 = 0;
  a1->field_14[a1->field_10] = v2;
  if (!v2)
    sub_1003E260(4);
  ++a1->field_10;
  v2->field_340 = a1;
  v2->field_10 = 0;
  v2->flags_338 = 0x43430000;
  v2->field_33C = 130.0;
  v3 = (unk1E214 *)operator new(0x1E214u);
  if (v3)
    v4 = meth_unk1E214_init(v3);
  else
    v4 = 0;
  v2->field_18[v2->field_14] = v4;
  if (!v4)
    sub_1003E260(4);
  v4->lpVtbl->meth14(v4, a1, 0, 0.0, 9, 2, 5, 0, 0);
  ++v2->field_14;
  v5 = (unk1E214 *)operator new(0x1E214u);
  if (v5)
    v6 = meth_unk1E214_init(v5);
  else
    v6 = 0;
  v2->field_18[v2->field_14] = v6;
  if (!v6)
    sub_1003E260(4);
  v7 = v6->lpVtbl;
  v6->lpVtbl->meth14(v6, a1, v2->flags_338, 10.0, 0x100009, 2, 5, 1, -1);
  v6->field_3838.field_1A99C[28] = 3;
  v8 = GetStringWithIndex(0xC2u);
  v7->meth13(v6, v8, 1, 1, &unk_100AB508);
  ++v2->field_14;
  v9 = (unk1E214 *)operator new(0x1E214u);
  if (v9)
    v10 = meth_unk1E214_init(v9);
  else
    v10 = 0;
  v2->field_18[v2->field_14] = v10;
  if (!v10)
    sub_1003E260(4);
  v10->lpVtbl->meth14(v10, a1, v2->flags_338, v2->field_33C, 0x3001, 2, 5, 1, -1);
  v11 = v10->field_3838.lpVtbl;
  v12 = &v10->field_3838;
  v10->field_4 = sub_1003EC30;
  *(_DWORD *)&v10->field_3838.field_1A99C[16] = 1;
  v11->meth5(&v10->field_3838, 262145, dword_100AB4D8, 5, 0, -1);
  v10->field_3838.field_4[0] = (DWORD)sub_10042740;
  v10->field_3838.field_4[4] = (DWORD)sub_10042560;
  for (i = 0; i < 26000; i += 260) {
    if ((unk06594 *)((char *)gUnkC8Ptr6->last + i) != (unk06594 *)-4)
      v12->lpVtbl->meth4(v12, (char *)&gUnkC8Ptr6->last->field_4 + i, 0, 1, dword_100AB4D8, 0);
  }
  ++v2->field_14;
  ++LOWORD(v2->last);
  v14 = (unk1E214 *)operator new(0x1E214u);
  if (v14)
    v15 = meth_unk1E214_init(v14);
  else
    v15 = 0;
  v2->field_18[v2->field_14] = v15;
  if (!v15)
    sub_1003E260(4);
  v16 = v15->lpVtbl;
  v41 = v2->field_33C - -95.0;
  v15->lpVtbl->meth14(v15, a1, v2->flags_338, v41, 0x102001, 2, 5, 1, -1);
  v15->field_C = sub_10047360;
  v15->field_8 = (int(__cdecl *)())sub_10044F00;
  v15->field_3838.field_1A99C[28] = 3;
  v17 = GetStringWithIndex(0x1Eu);
  v16->meth13(v15, v17, 1, 1, &dword_100AB448);
  ++v2->field_14;
  ++LOWORD(v2->last);
  v18 = (unk1E214 *)operator new(0x1E214u);
  if (v18)
    v19 = meth_unk1E214_init(v18);
  else
    v19 = 0;
  v2->field_18[v2->field_14] = v19;
  if (!v19)
    sub_1003E260(4);
  v20 = v19->lpVtbl;
  v19->lpVtbl->meth14(v19, a1, 1138491392, 208.0, 1052673, 2, 5, 1, -1);
  v19->field_4 = sub_10041040;
  v19->field_3838.field_1A99C[28] = 52;
  v20->meth13(v19, asc_100AD300, 1, 4, &unk_100AB478);
  ++v2->field_14;
  v21 = (unk1E214 *)operator new(0x1E214u);
  if (v21)
    v22 = meth_unk1E214_init(v21);
  else
    v22 = 0;
  v2->field_18[v2->field_14] = v22;
  if (!v22)
    sub_1003E260(4);
  v23 = v22->lpVtbl;
  v22->lpVtbl->meth14(v22, a1, 1138491392, 224.0, 1048577, 2, 5, 1, -1);
  v22->field_3838.field_1A99C[28] = 3;
  v24 = GetStringWithIndex(0x6Fu);
  v23->meth13(v22, v24, 1, 1, &unk_100AB478);
  ++v2->field_14;
  v25 = (unk1E214 *)operator new(0x1E214u);
  if (v25)
    v26 = meth_unk1E214_init(v25);
  else
    v26 = 0;
  v2->field_18[v2->field_14] = v26;
  if (!v26)
    sub_1003E260(4);
  v27 = v26->lpVtbl;
  v26->lpVtbl->meth14(v26, a1, 1138491392, 240.0, 1052673, 2, 5, 1, -1);
  v26->field_4 = sub_10041180;
  v26->field_3838.field_1A99C[28] = 52;
  v27->meth13(v26, asc_100AD300, 1, 4, &unk_100AB478);
  ++v2->field_14;
  v28 = (unk1E214 *)operator new(0x1E214u);
  if (v28)
    v29 = meth_unk1E214_init(v28);
  else
    v29 = 0;
  v2->field_18[v2->field_14] = v29;
  if (!v29)
    sub_1003E260(4);
  v30 = v29->lpVtbl;
  v29->lpVtbl->meth14(v29, a1, 1138491392, 256.0, 1048577, 2, 5, 1, -1);
  v29->field_3838.field_1A99C[28] = 3;
  v31 = GetStringWithIndex(0x3Fu);
  v30->meth13(v29, v31, 1, 1, &unk_100AB478);
  ++v2->field_14;
  v32 = (unk1E214 *)operator new(0x1E214u);
  if (v32)
    v33 = meth_unk1E214_init(v32);
  else
    v33 = 0;
  v2->field_18[v2->field_14] = v33;
  if (!v33)
    sub_1003E260(4);
  v33->lpVtbl->meth14(v33, a1, 1117782016, 46.0, 9, 2, 5, 0, 6);
  ++v2->field_14;
  *(&a1->field_6C + a1->field_10) = 0;
  v34 = (unk00348 *)operator new(0x348u);
  if (v34)
    v35 = meth_unk00348_10048470(v34);
  else
    v35 = 0;
  a1->field_14[a1->field_10] = v35;
  if (!v35)
    sub_1003E260(4);
  ++a1->field_10;
  v35->field_340 = a1;
  v35->field_10 = 0;
  v35->flags_338 = 1128464384;
  v35->field_33C = 130.0;
  v36 = (unk1E214 *)operator new(0x1E214u);
  if (v36)
    v37 = meth_unk1E214_init(v36);
  else
    v37 = 0;
  v35->field_18[v35->field_14] = v37;
  if (!v37)
    sub_1003E260(4);
  v38 = v37->lpVtbl;
  v37->lpVtbl->meth14(v37, a1, 0, 232.0, 1048585, 2, 5, 1, -1);
  v37->field_C = sub_10047360;
  v37->field_4 = (int(__cdecl *)(int))sub_10047250;
  v37->field_14 = (int)sub_1003E7A0;
  v37->field_3838.field_1A99C[28] = 3;
  v39 = GetStringWithIndex(0x70u);
  v38->meth13(v37, v39, 1, 1, &unk_100AB438);
  dword_10AA29C4 = (int)v37;
  ++v35->field_14;
  return 1;
}
// 100AB448: using guessed type int dword_100AB448;
// 10AA28E8: using guessed type int dword_10AA28E8;
// 10AA29C4: using guessed type int dword_10AA29C4;

//----- (1005AE70) --------------------------------------------------------
int __thiscall meth_unk000C8_4(unk000C8 *this) {
  void *v2;                // ecx
  const CHAR *v3;          // eax
  int v4;                  // edx
  enum MACRO_GAME_MODE v5; // eax
  int result;              // eax

  sub_1003E3A0();
  if (!this->field_C) {
    DDrawDoInit();
    if (!sub_10060210(gHwnd)) {
      v3 = GetStringWithIndex(0xABu);
      ShowMessageBoxAA(gHwnd, 0, v3);
      exit(1);
    }
    this->lpFn0(this);
    this->field_C = 1;
    this->field_68 = 1;
  }
  v4 = gGameMode1;
  if (gGameMode1 == 5) {
    dword_10AA28A4 = 0;
    memset(byte_10A9D618, 0, 0x20u);
    v2 = 0;
    BYTE1(dword_10AA26F4[0]) = 0;
  }
  v5 = gGameMode;
  if (gGameMode == GAME_MODE_4 && dword_106805B8 == 2 && dword_10AA289C) {
    sub_10045EA0();
    v4 = gGameMode1;
    v5 = GAME_MODE_0;
    gGameMode = GAME_MODE_0;
  }
  if (v5 || v4 && v4 != 5) {
    if (v5 == GAME_MODE_6) {
      dword_10AA2878 = 1;
      sub_100447D0();
    } else {
      if (v5 != GAME_MODE_2)
        goto LABEL_21;
      dword_10AA2878 = 1;
      sub_10041930();
    }
    dword_10AA2878 = 0;
    goto LABEL_21;
  }
  result = sub_1005F940();
  if (!result)
    return result;
  sub_10045EA0();
  sub_10041B50();
  dword_10AA289C = 1;
LABEL_21:
  if (dword_10A9D000) {
    if (!dword_10AA2A50) {
      dword_10AA2A50 = 1;
      meth_100441A0(v2);
    }
  }
  return 1;
}
// 1005AF94: variable 'v2' is possibly undefined
// 10220B20: using guessed type int gGameMode1;
// 106805B8: using guessed type int dword_106805B8;
// 10A9D000: using guessed type int dword_10A9D000;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA2878: using guessed type int dword_10AA2878;
// 10AA289C: using guessed type int dword_10AA289C;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA2A50: using guessed type int dword_10AA2A50;

//----- (1005AFA0) --------------------------------------------------------
int meth_unk000C8_8() {
  LPDIRECT3DVIEWPORT2 v0; // ebx
  unk0008C *v1;           // eax
  unk0008C *v2;           // esi
  LPDIRECT3DVIEWPORT2 v3; // edi
  IDirect3DMaterial2 *v4; // eax
  int v6[4];              // [esp+10h] [ebp-10h] BYREF

  v0 = gUnk334->ddCapsFlags->lpDirect3DViewport2;
  if ( !gUnk334->ddCapsFlags->? || !gUnk334->ddCapsFlags->lpDirect3DDevice || !v0 )
    return -2147467259;
  v6[0] = 0;
  v6[2] = gWidth;
  v6[1] = 0;
  v6[3] = gHeight;
  v1 = gUnk334->ddCapsFlags->field_8;
  *(_DWORD *)v1->field_4 = 1048608897;
  v1->field_8 = 0;
  *(_DWORD *)v1->? = 0;
  v1->lpDirectDrawSurface1 = (IDirectDrawSurface *)1;
  v2 = gUnk334->ddCapsFlags->field_8;
  v3 = gUnk334->ddCapsFlags->lpDirect3DViewport2;
  v4 = v2->? ;
  v2->lpDirectDrawSurface1 = 0;
  v2->? = 1;
  v4->lpVtbl->SetMaterial(v4, (LPD3DMATERIAL)v2);
  v3->lpVtbl->SetBackground(v3, v2->?);
  v0->lpVtbl->Clear(v0, 1, (LPD3DRECT)v6, 3);
  return 0;
}
// 100A81C0: using guessed type int gWidth;
// 100A81C4: using guessed type int gHeight;

//----- (1005B050) --------------------------------------------------------
void __thiscall meth_unk00438_init(unk00438 *this) {
  this->lpVtbl = &gUnk00438Vtbl;
  memset(this->field_9, 0, sizeof(this->field_9));
  this->field_418 = 0;
  this->field_414 = 0;
  this->field_410 = 0;
  this->field_40C = 0;
  this->field_40A = 0;
  this->field_41C = 0;
  this->field_420 = 0;
  this->field_4 = 0;
  this->field_8 = 1;
}

//----- (1005B0A0) --------------------------------------------------------
unk00438 *__thiscall meth_unk00438_0(unk00438 *Block, char a2) {
  meth_unk00438_deinit(Block);
  if ((a2 & 1) != 0)
    operator delete(Block);
  return Block;
}

//----- (1005B0C0) --------------------------------------------------------
void __thiscall meth_unk00438_deinit(unk00438 *this) {
  this->lpVtbl = &gUnk00438Vtbl;
}

//----- (1005B0D0) --------------------------------------------------------
void __thiscall meth_unk00438_1(unk00438 *this, int unusedA2) {
  int v2;     // esi
  char v3;    // dl
  __int16 v4; // bp
  int v5;     // ebx
  int i;      // edi
  __int16 v7; // ax
  int v8;     // eax
  __int16 v9; // ax

  v3 = this->field_9[0];
  v4 = this->field_40C;
  v5 = 0;
  for (i = 0; v3; v3 = this->field_9[(__int16)++i]) {
    v7 = v3 - 32;
    if ((v7 < 0 || v7 > 127) && v3 != 32)
      break;
    if (v3 < 33 || v3 == 127 ||
        (v8 = 6 * v7, LOWORD(v2) = word_100AC6E4[v8], (_WORD)v2 == 0xFFFF) ||
        (v9 = word_100AC6E6[v8], v9 == -1)) {
      if (v3 == 32)
        v5 += 6;
    } else {
      v5 += v2;
      if (v4 < v9)
        v4 = v9;
    }
  }
  this->field_40C = v4;
  this->field_40A = v5;
}
// 1005B12A: variable 'v2' is possibly undefined
// 100AC6E4: using guessed type __int16 word_100AC6E4[];
// 100AC6E6: using guessed type __int16 word_100AC6E6[];

//----- (1005B160) --------------------------------------------------------
void __thiscall meth_unk00438_2(unk00438 *this, int a2) {
  int v2;     // edx
  char v3;    // dl
  int v4;     // esi
  int v5;     // ebx
  __int16 i;  // di
  __int16 v7; // ax
  int v8;     // eax
  __int16 v9; // ax

  v3 = this->field_9[0];
  v4 = 0;
  v5 = 0;
  for (i = this->field_40C; v3; v3 = this->field_9[(__int16)++v5]) {
    v7 = v3 - 32;
    if ((v7 < 0 || v7 > 127) && v3 != 32)
      break;
    if (v3 < 33 || v3 == 127 || (v8 = 6 * v7, word_100AC6E4[v8] == -1) || word_100AC6E6[v8] == -1) {
      if (v3 == 32)
        v4 += 6;
    } else {
      LOWORD(v2) = word_100ACB5C[v8];
      v9 = word_100ACB5E[v8];
      LOWORD(v2) = v2 - 4;
      v4 += v2;
      if (i < v9)
        i = v9;
    }
  }
  this->field_40C = i;
  this->field_40A = v4;
}
// 1005B1C7: variable 'v2' is possibly undefined
// 100AC6E4: using guessed type __int16 word_100AC6E4[];
// 100AC6E6: using guessed type __int16 word_100AC6E6[];
// 100ACB5C: using guessed type __int16 word_100ACB5C[];
// 100ACB5E: using guessed type __int16 word_100ACB5E[];

//----- (1005B200) --------------------------------------------------------
double __thiscall meth_unk00438_10(unk00438 *this) {
  double result; // st7

  result = ((double)(this->field_42C - this->field_424) - (double)this->field_40A) * 0.5 +
           (double)this->field_424;
  *(float *)&this->field_410 = result;
  return result;
}

//----- (1005B250) --------------------------------------------------------
DWORD __thiscall meth_unk00438_9(unk00438 *this, float a2, float a3) {
  DWORD result;  // eax
  signed int v5; // ecx

  result = getTicks();
  v5 = result - dword_10AA2A58 + dword_10AA2A54;
  dword_10AA2A58 = result;
  dword_10AA2A54 = v5;
  if (v5 >= 120) {
    dword_10AA2A54 = 0;
    result = this->lpVtbl->meth6(this, word_100AC9DC, a2, a3, this->field_8);
  }
  return result;
}
// 100AC9DC: using guessed type __int16 word_100AC9DC;
// 10AA2A54: using guessed type int dword_10AA2A54;
// 10AA2A58: using guessed type int dword_10AA2A58;

//----- (1005B2B0) --------------------------------------------------------
int __thiscall meth_unk00438_4(unk00438 *this) {
  char v2;    // al
  int i;      // ebx
  __int16 v4; // cx
  int v5;     // esi
  int v6;     // eax
  double v7;  // st7
  int result; // eax
  int v9;     // [esp+10h] [ebp-8h]

  if ((this->field_4 & 1) != 0)
    *(float *)&v9 = this->lpVtbl->meth10(this);
  else
    v9 = this->field_410;
  v2 = this->field_9[0];
  for (i = 0; v2; v2 = this->field_9[(__int16)++i]) {
    v4 = v2 - 32;
    if ((v4 < 0 || v4 > 127) && v2 != 32)
      break;
    if (v2 < 33 || v2 == 127) {
      if (v2 == 32) {
        v7 = *(float *)&v9 - -6.0;
        goto LABEL_14;
      }
    } else {
      v6 = v4;
      v5 = 6 * v4;
      LOWORD(v6) = word_100AC6E8[v5];
      if ((_WORD)v6 != 0xFFFF) {
        ((void(__thiscall *)(unk00438 *, int, int, int, _DWORD))this->lpVtbl->meth6)(
            this, v6, v9, this->field_414, this->field_8);
        v7 = (double)word_100AC6E4[v5] + *(float *)&v9;
      LABEL_14:
        *(float *)&v9 = v7;
        continue;
      }
    }
  }
  result = this->field_420;
  if (result)
    result =
        ((int(__thiscall *)(unk00438 *, int, int))this->lpVtbl->meth9)(this, v9, this->field_414);
  return result;
}
// 100AC6E4: using guessed type __int16 word_100AC6E4[];
// 100AC6E8: using guessed type __int16 word_100AC6E8[];

//----- (1005B390) --------------------------------------------------------
int __thiscall meth_unk00438_3(unk00438 *this, float a2, int a3) {
  char v4;    // al
  int i;      // ebx
  __int16 v6; // cx
  int v7;     // esi
  int v8;     // eax
  double v9;  // st7
  int result; // eax

  if ((this->field_4 & 1) != 0)
    a2 = this->lpVtbl->meth10(this);
  v4 = this->field_9[0];
  for (i = 0; v4; v4 = this->field_9[(__int16)++i]) {
    v6 = v4 - 32;
    if ((v6 < 0 || v6 > 127) && v4 != 32)
      break;
    if (v4 < 33 || v4 == 127) {
      if (v4 == 32) {
        v9 = a2 - -6.0;
        goto LABEL_13;
      }
    } else {
      v8 = v6;
      v7 = 6 * v6;
      LOWORD(v8) = word_100AC6E8[v7];
      if ((_WORD)v8 != 0xFFFF) {
        ((void(__thiscall *)(unk00438 *, int, _DWORD, int, _DWORD))this->lpVtbl->meth6)(
            this, v8, LODWORD(a2), a3, this->field_8);
        v9 = (double)word_100AC6E4[v7] + a2;
      LABEL_13:
        a2 = v9;
        continue;
      }
    }
  }
  result = this->field_420;
  if (result)
    result =
        ((int(__thiscall *)(unk00438 *, _DWORD, int))this->lpVtbl->meth9)(this, LODWORD(a2), a3);
  return result;
}
// 100AC6E4: using guessed type __int16 word_100AC6E4[];
// 100AC6E8: using guessed type __int16 word_100AC6E8[];

//----- (1005B460) --------------------------------------------------------
int __thiscall meth_unk00438_11(unk00438 *this) {
  char v2;    // al
  int i;      // ebx
  __int16 v4; // cx
  int v5;     // esi
  int v6;     // eax
  double v7;  // st7
  int result; // eax
  int v9;     // [esp+10h] [ebp-8h]

  if ((this->field_4 & 1) != 0)
    *(float *)&v9 = this->lpVtbl->meth10(this);
  else
    v9 = this->field_410;
  v2 = this->field_9[0];
  for (i = 0; v2; v2 = this->field_9[(__int16)++i]) {
    v4 = v2 - 32;
    if ((v4 < 0 || v4 > 127) && v2 != 32)
      break;
    if (v2 < 33 || v2 > 122) {
      if (v2 == 32) {
        v7 = *(float *)&v9 - -6.0;
        goto LABEL_14;
      }
    } else {
      v6 = v4;
      v5 = 6 * v4;
      LOWORD(v6) = word_100ACB60[v5];
      if ((_WORD)v6 != 0xFFFF) {
        ((void(__thiscall *)(unk00438 *, int, int, int, _DWORD))this->lpVtbl->meth8)(
            this, v6, v9, this->field_414, this->field_8);
        v7 = (double)(word_100ACB5C[v5] - 6) + *(float *)&v9;
      LABEL_14:
        *(float *)&v9 = v7;
        continue;
      }
    }
  }
  result = this->field_420;
  if (result)
    result =
        ((int(__thiscall *)(unk00438 *, int, int))this->lpVtbl->meth9)(this, v9, this->field_414);
  return result;
}
// 100ACB5C: using guessed type __int16 word_100ACB5C[];
// 100ACB60: using guessed type __int16 word_100ACB60[];

//----- (1005B540) --------------------------------------------------------
char __cdecl car_1005B540(int a1) {
  int i;     // ecx
  char **v2; // eax

  i = 0;
  v2 = (char **)&unk_100ACE58;
  while (*v2 != (char *)a1) {
    v2 += 2;
    ++i;
    if (v2 >= &gCarPartArray[45].imageData)
      return 0;
  }
  return byte_100ACE5C[8 * i];
}

//----- (1005B570) --------------------------------------------------------
char __thiscall meth_unk00438_5(unk00438 *this) {
  char v3; // bl
  int v4;  // [esp+0h] [ebp-10h]

  if (dword_10AA285C) {
    if (dword_10AA2B6C) {
      sub_1003D9A0((int *)dword_10A9D008, 4);
      sub_10072AF0(4, 0x200020u);
      dword_10AA2854 = 4;
    } else if (dword_10AA2B70) {
      sub_1003D9A0((int *)dword_10A9D008, 5);
      sub_10072AF0(5, 0x200020u);
      dword_10AA2854 = 5;
    } else if (dword_10AA2B74) {
      sub_1003D9A0((int *)dword_10A9D008, 6);
      sub_10072AF0(6, 0x200020u);
      dword_10AA2854 = 6;
    } else if (dword_10AA2B78) {
      sub_1003D9A0((int *)dword_10A9D008, 7);
      sub_10072AF0(7, 0x200020u);
      dword_10AA2854 = 7;
    }
  }
  if (dword_10AA2A84) {
    dword_10AA33E4 = 0;
    return -1;
  }
  if ((dword_10AA2AF0 || dword_10AA2CF0 || sub_1003E080() && !dword_10AA285C) &&
      strlen(this->field_9)) {
    dword_10AA33E4 = 0;
    return 0;
  }
  if (!dword_10AA33E4)
    goto LABEL_25;
  if (dword_10AA33E4 == 8) {
    if (strlen(this->field_9)) {
      *(&this->field_8 + strlen(this->field_9)) = 0;
      dword_10AA33E4 = 0;
      return 1;
    }
    goto LABEL_25;
  }
  v3 = car_1005B540(dword_10AA33E4);
  if (v3) {
    this->lpVtbl->meth1(this, v4);
    if (this->field_40A < this->field_41C)
      sprintf(this->field_9, "%s%c", this->field_9, v3);
  LABEL_25:
    dword_10AA33E4 = 0;
  }
  return 1;
}
// 1005B6F3: variable 'v4' is possibly undefined
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA285C: using guessed type int dword_10AA285C;
// 10AA2AF0: using guessed type int dword_10AA2AF0;
// 10AA2B6C: using guessed type int dword_10AA2B6C;
// 10AA2B70: using guessed type int dword_10AA2B70;
// 10AA2B74: using guessed type int dword_10AA2B74;
// 10AA2B78: using guessed type int dword_10AA2B78;
// 10AA2CF0: using guessed type int dword_10AA2CF0;
// 10AA33E4: using guessed type int dword_10AA33E4;

//----- (1005B730) --------------------------------------------------------
int __thiscall meth_unk00438_6(unk00438 *this, __int16 a2, float a3, float a4, int a5) {
  char v5;           // al
  signed __int16 v6; // dx

  v5 = this->field_8;
  v6 = 0;
  if (v5) {
    switch (v5) {
    case 1:
      v6 = 3;
      break;
    case 2:
      v6 = 4;
      break;
    case 4:
      v6 = 52;
      break;
    }
  } else {
    v6 = 2;
  }
  graphics_1005F5A0(
      (__int64)a3, (__int64)a4, v6, (int *)&unk_10A9D180 + 4 * a2, dword_100AB57C[6 * v6]);
  return 1;
}

//----- (1005B7A0) --------------------------------------------------------
int __thiscall meth_unk00438_8(unk00438 *this, float a2, float a3, int a4) {
  graphics_1005F5A0((__int64)a3,
                    (__int64)*(float *)&a4,
                    5u,
                    (int *)&byte_10A9D618[16 * SLOWORD(a2) + 32],
                    dword_100AB5F4);
  return 1;
}
// 100AB5F4: using guessed type int dword_100AB5F4;

//----- (1005B7E0) --------------------------------------------------------
int __thiscall meth_unk00438_7(unk00438 *this, int a2, int a3) {
  return 0;
}

//----- (1005B7F0) --------------------------------------------------------
unk1A5E0 *__thiscall meth_unk1A5E0_init(unk1A5E0 *this) {
  this->field_18 = 0;
  this->field_1C = 0;
  this->field_20 = 0;
  `eh vector constructor iterator'(
    this->vectorUnk438,
    0x438u,
    100,
    (void (__thiscall *)(void *))meth_unk00438_init,
    (void (__thiscall *)(void *))meth_unk00438_deinit);
  this->field_1A92C[0] = 0;
  this->field_1A92C[1] = 0;
  this->field_1A92C[2] = 0;
  this->field_1A92C[3] = -1;
  this->field_1A92C[4] = -1;
  this->field_1A92C[5] = -1;
  this->field_1A938 = -1;
  *(_DWORD *)this->field_1A99C = 0;
  *(_DWORD *)&this->field_1A99C[2] = 0;
  *(_DWORD *)&this->field_1A99C[4] = 0;
  *(_DWORD *)&this->field_1A99C[6] = 0;
  *(_DWORD *)&this->field_1A99C[8] = 0;
  *(_DWORD *)&this->field_1A99C[10] = 0;
  *(_DWORD *)&this->field_1A99C[12] = 0;
  *(_DWORD *)&this->field_1A99C[14] = 0;
  *(_DWORD *)&this->field_1A99C[16] = 0;
  *(_DWORD *)&this->field_1A99C[18] = 0;
  *(_DWORD *)&this->field_1A99C[20] = 0;
  *(_DWORD *)&this->field_1A99C[22] = 0;
  *(_DWORD *)&this->field_1A99C[24] = 0;
  *(_DWORD *)&this->field_1A99C[26] = 0;
  this->field_4[0] = 0;
  this->field_4[1] = 0;
  this->field_4[2] = 0;
  this->field_4[3] = 0;
  this->field_4[4] = 0;
  this->lpVtbl = &gUnk1A5E0Vtbl;
  memset(this->gap1A60C, 0, sizeof(this->gap1A60C));
  return this;
}

//----- (1005B8D0) --------------------------------------------------------
unk1A5E0 *__thiscall meth_unk1A5E0_0(unk1A5E0 *this, char a2) {
  meth_unk1A5E0_1005B8F0(this);
  if ((a2 & 1) != 0)
    operator delete(this);
  return this;
}

//----- (1005B8F0) --------------------------------------------------------
void __thiscall meth_unk1A5E0_1005B8F0(unk1A5E0 *this) {
  this->lpVtbl = &gUnk1A5E0Vtbl;
  `eh vector destructor iterator'(this->vectorUnk438, 0x438u, 100, (void (__thiscall *)(void *))meth_unk00438_deinit);
}

//----- (1005B910) --------------------------------------------------------
int __thiscall meth_unk1A5E0_5(
    unk1A5E0 *this, int a2, int *a3, __int16 a4, __int16 a5, __int16 a6) {
  int v7;     // edi
  int v8;     // ebx
  int v9;     // ecx
  int v10;    // edx
  int v11;    // ecx
  int v12;    // edx
  double v13; // st7
  int v14;    // ebp
  double v15; // st6
  int v16;    // ecx
  int v17;    // ebp
  double v18; // st7
  int v19;    // edx
  int v20;    // ecx
  int v21;    // eax
  int v22;    // eax
  double v23; // st7
  double v24; // st6
  double v25; // st7
  int v26;    // ebp
  int v28;    // [esp+20h] [ebp+10h]

  *(float *)&this->field_1C = (float)*a3;
  *(float *)&this->field_20 = (float)a3[1];
  *(_DWORD *)&this->gap1A93A[2] = *a3;
  *(_DWORD *)&this->gap1A93A[6] = a3[1];
  *(_DWORD *)&this->gap1A93A[10] = a3[2];
  *(_DWORD *)&this->gap1A93A[14] = a3[3];
  this->field_18 = a2;
  this->field_1A92C[2] = a4;
  this->field_1A92C[1] = a5;
  this->field_1A92C[5] = a6;
  this->field_1A92C[3] = 48;
  this->field_1A92C[4] = 46;
  this->field_1A938 = 58;
  v7 = dword_100AB9F4 - dword_100AB9EC;
  v8 = dword_100AB9F8 - dword_100AB9F0;
  if (dword_100AB9F4 - dword_100AB9EC < 0)
    v7 = 0;
  if (v8 < 0)
    v8 = 0;
  if (*(_DWORD *)&this->field_1A99C[14]) {
    v9 = *a3;
    *(_DWORD *)&this->gap1A93A[50] = *a3;
    v10 = a3[3] + 3;
    v11 = v7 + v9;
    *(_DWORD *)&this->gap1A93A[54] = v10;
    v28 = v10;
    *(_DWORD *)&this->gap1A93A[58] = v11;
    *(_DWORD *)&this->gap1A93A[62] = v8 + v10;
    v12 = a3[2] - v7;
    *(_DWORD *)&this->gap1A93A[66] = v12;
    v13 = (double)v11 - -1.0;
    *(_DWORD *)&this->gap1A93A[70] = a3[3] + 3;
    v14 = *(_DWORD *)&this->gap1A93A[70];
    *(float *)&this->field_1A99C[8] = v13;
    *(_DWORD *)&this->gap1A93A[74] = v7 + v12;
    *(float *)&this->field_1A99C[10] = (float)v28;
    v15 = (double)(v12 - v7);
    *(_DWORD *)&this->gap1A93A[78] = v14 + v8;
    *(float *)&this->field_1A99C[26] = v15 - v13;
    *(float *)&this->field_1A99C[18] = (float)(v11 + 1);
    *(float *)&this->field_1A99C[20] = v15;
  } else if (*(_DWORD *)&this->field_1A99C[16]) {
    v16 = a3[2] + 3;
    *(_DWORD *)&this->gap1A93A[18] = v16;
    *(_DWORD *)&this->gap1A93A[22] = a3[1];
    v17 = *(_DWORD *)&this->gap1A93A[22];
    *(_DWORD *)&this->gap1A93A[26] = v16 + dword_100AB9F4;
    *(_DWORD *)&this->gap1A93A[30] = v17 + dword_100AB9F8;
    *(_DWORD *)&this->gap1A93A[34] = a3[2] + 3;
    v18 = (double)v16;
    *(_DWORD *)&this->gap1A93A[38] = a3[3] - dword_100AB9C8;
    v19 = v16 + dword_100AB9C4;
    v20 = *(_DWORD *)&this->gap1A93A[38];
    *(_DWORD *)&this->gap1A93A[42] = v19;
    v21 = a3[3];
    *(float *)&this->field_1A99C[8] = v18;
    *(_DWORD *)&this->gap1A93A[46] = v21;
    v22 = *(_DWORD *)&this->gap1A93A[30];
    v23 = (double)v22 - -1.0;
    *(float *)&this->field_1A99C[10] = v23;
    v24 = (double)(v20 - v8);
    *(float *)&this->field_1A99C[26] = v24 - v23;
    *(float *)&this->field_1A99C[22] = (float)(v22 + 1);
    *(float *)&this->field_1A99C[24] = v24;
  }
  v25 = *(float *)&this->field_1A99C[10];
  v26 = (__int64)*(float *)&this->field_1A99C[8];
  *(_DWORD *)&this->gap1A93A[82] = v26;
  *(_DWORD *)&this->gap1A93A[90] = v26 + v7;
  *(_DWORD *)&this->gap1A93A[86] = (__int64)v25;
  *(_DWORD *)&this->gap1A93A[94] = (__int64)v25 + v8;
  return 1;
}
// 100AB9C4: using guessed type int dword_100AB9C4;
// 100AB9C8: using guessed type int dword_100AB9C8;
// 100AB9EC: using guessed type int dword_100AB9EC;
// 100AB9F0: using guessed type int dword_100AB9F0;
// 100AB9F4: using guessed type int dword_100AB9F4;
// 100AB9F8: using guessed type int dword_100AB9F8;

//----- (1005BB80) --------------------------------------------------------
int __thiscall meth_unk1A5E0_9(unk1A5E0 *this, int a2) {
  char *v3;                            // edi
  int v4;                              // ebp
  char v6;                             // al
  int v7;                              // ecx
  void(__cdecl * v8)(unk1A5E0 *, int); // eax

  v3 = (char *)this + 1080 * a2;
  v4 = *((_DWORD *)v3 + 11);
  (*(void(__thiscall **)(char *))(v4 + 4))(v3 + 44);
  if (!*((_DWORD *)v3 + 275))
    return 0;
  v6 = (*(int(__thiscall **)(char *))(v4 + 20))(v3 + 44);
  v7 = v6;
  if (v6 <= 0) {
    dword_10AA28D8 = 0;
    *((_DWORD *)v3 + 275) = 0;
    v8 = (void(__cdecl *)(unk1A5E0 *, int))this->field_4[4];
    if (v8) {
      if (v7 >= 0) {
        v8(this, a2);
        return 1;
      }
      v8(this, -1);
    }
  }
  return 1;
}
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (1005BC10) --------------------------------------------------------
int __thiscall meth_unk1A5E0_4(unk1A5E0 *this, char *Source, int a3, int a4, int a5, int a6) {
  int result;           // eax
  char *v8;             // edx
  unsigned int v9;      // eax
  char *v10;            // edi
  char *v11;            // esi
  char v12;             // cl
  unsigned int v13;     // ebx
  char *v14;            // edi
  char *v15;            // edi
  _WORD *v16;           // eax
  int v17;              // eax
  __int16 v18;          // ax
  void (*v19)(void);    // eax
  unsigned __int16 v20; // ax
  double v21;           // st7
  char v23;             // c0
  __int64 v24;          // rax

  if (!Source)
    return 0;
  if (this->field_1A92C[0] >= 0x64u) {
    this->lpVtbl->meth11(this, 0);
    this->field_1A92C[0] = 99;
  }
  if (a6) {
    v9 = strlen(Source) + 1;
    v8 = this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_9;
    qmemcpy(v8, Source, 4 * (v9 >> 2));
    v11 = &Source[4 * (v9 >> 2)];
    v10 = &v8[4 * (v9 >> 2)];
    v12 = v9;
  } else {
    strncpy(this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_9, Source, 0xAu);
    v13 = strlen(SrcStr) + 1;
    v14 = this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_9;
    v15 = &v14[strlen(v14)];
    qmemcpy(v15, SrcStr, 4 * (v13 >> 2));
    v11 = &SrcStr[4 * (v13 >> 2)];
    v10 = &v15[4 * (v13 >> 2)];
    v12 = v13;
  }
  qmemcpy(v10, v11, v12 & 3);
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_4 |= a3;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_8 = a4;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_41C = 0;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_40C = 0;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_40A = 0;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_424 = *(_DWORD *)a5;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_42C = *(_DWORD *)(a5 + 8);
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_428 =
      19 * (unsigned __int16)this->field_1A92C[0] + (__int64)*(float *)&this->field_20;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_430 =
      this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_428 + 18;
  *(float *)&this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_410 =
      (float)*(int *)a5;
  *(float *)&this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_414 =
      (float)this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_428;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_418 = 0;
  this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]].field_420 = 0;
  if ((_BYTE)a4 == 3)
    ((void(__thiscall *)(unk00438 *))this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]]
         .lpVtbl->meth2)(&this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]]);
  else
    ((void(__thiscall *)(unk00438 *))this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]]
         .lpVtbl->meth1)(&this->vectorUnk438[(unsigned __int16)this->field_1A92C[0]]);
  v16 = (_WORD *)((char *)this + 1080 * (unsigned __int16)this->field_1A92C[0]);
  v16[548] = v16[556] - v16[552] - 16;
  v17 = this->field_18;
  ++this->field_1A92C[0];
  if ((v17 & 0x800000) == 0)
    goto LABEL_26;
  v18 = this->field_1A92C[1] + this->field_1A92C[2];
  if (v18 >= 100)
    v18 = this->field_1A92C[0] - 1;
  result = _strcmpi(this->vectorUnk438[v18].field_9, String2);
  if (result) {
    if (++this->field_1A92C[1] >= (int)(unsigned __int16)this->field_1A92C[0])
      this->field_1A92C[1] = this->field_1A92C[0] - 1;
    v19 = (void (*)(void))this->field_4[2];
    if (v19)
      v19();
    v20 = this->field_1A92C[0] - 1;
    if (this->field_1A92C[0] == 1)
      v20 = 1;
    v21 = *(float *)&this->field_1A99C[26] / (double)v20 + *(float *)&this->field_1A99C[10];
    *(float *)&this->field_1A99C[10] = v21;
    if (v23) {
      *(_DWORD *)&this->field_1A99C[10] = *(_DWORD *)&this->field_1A99C[22];
    } else if (v21 > *(float *)&this->field_1A99C[24]) {
      *(_DWORD *)&this->field_1A99C[10] = *(_DWORD *)&this->field_1A99C[24];
    }
    v24 = (__int64)*(float *)&this->field_1A99C[10];
    *(_DWORD *)&this->gap1A93A[86] = v24;
    *(_DWORD *)&this->gap1A93A[94] = v24 + 16;
  LABEL_26:
    result = 1;
  }
  return result;
}
// 1005BFA4: variable 'v23' is possibly undefined

//----- (1005C000) --------------------------------------------------------
int __thiscall meth_unk1A5E0_11(unk1A5E0 *this, int a2) {
  int v2;      // eax
  char *v4;    // edx
  _DWORD *v5;  // eax
  int v6;      // ecx
  int v7;      // eax
  int v8;      // ebx
  _DWORD *v9;  // eax
  char *v10;   // edx
  int v11;     // esi
  int v12;     // eax
  char *v13;   // edx
  _DWORD *v14; // eax
  _DWORD *v16; // [esp+10h] [ebp-4h]
  char *v17;   // [esp+18h] [ebp+4h]

  v2 = a2;
  if (a2 >= 0) {
    v4 = (char *)this + 1080 * a2;
    strcpy(v4 + 53, String2);
    v4[52] = 0;
    *((_WORD *)v4 + 548) = 0;
    this->vectorUnk438[a2].field_40C = 0;
    *((_WORD *)v4 + 539) = 0;
    *((_DWORD *)v4 + 276) = 0;
    *((_DWORD *)v4 + 277) = 0;
    *((_DWORD *)v4 + 278) = 0;
    *((_DWORD *)v4 + 279) = 0;
    *((_DWORD *)v4 + 271) = 0;
    *((_DWORD *)v4 + 272) = 0;
    *((_DWORD *)v4 + 273) = 0;
    *((_DWORD *)v4 + 275) = 0;
    *((_DWORD *)v4 + 280) = 0;
    v5 = &this->gap1A60C[8 * a2];
    *v5 = 0;
    v5[1] = 0;
    v2 = a2;
  }
  v6 = v2 + 1;
  v7 = (unsigned __int16)this->field_1A92C[0];
  if (v6 != (unsigned __int16)v7) {
    v8 = v6;
    if (v6 <= v7 - 1) {
      v9 = &this->gap1A60C[8 * v6 + 4];
      v16 = v9;
      v10 = (char *)this + 1080 * v6;
      v17 = v10;
      do {
        qmemcpy(v10 - 1036, v10 + 44, 0x438u);
        if (*v9) {
          v11 = *(v9 - 1);
          if (v11 > 0) {
              this->lpVtbl->meth10(this, *v9, v11, v8 - 1);
              v9 = v16;
              v10 = v17;
          }
        }
        ++v8;
        v10 += 1080;
        v9 += 2;
        v17 = v10;
        v16 = v9;
      } while (v8 <= (unsigned __int16)this->field_1A92C[0] - 1);
    }
  }
  v12 = (unsigned __int16)this->field_1A92C[0] - 1;
  if (v12 > 0) {
    v13 = (char *)this + 1080 * v12;
    strcpy(v13 + 53, String2);
    v13[52] = 0;
    *((_WORD *)v13 + 548) = 0;
    this->vectorUnk438[v12].field_40C = 0;
    *((_WORD *)v13 + 539) = 0;
    *((_DWORD *)v13 + 276) = 0;
    *((_DWORD *)v13 + 277) = 0;
    *((_DWORD *)v13 + 278) = 0;
    *((_DWORD *)v13 + 279) = 0;
    *((_DWORD *)v13 + 271) = 0;
    *((_DWORD *)v13 + 272) = 0;
    *((_DWORD *)v13 + 273) = 0;
    *((_DWORD *)v13 + 275) = 0;
    v14 = &this->gap1A60C[8 * v12];
    *v14 = 0;
    v14[1] = 0;
  }
  --this->field_1A92C[0];
  return 1;
}

//----- (1005C200) --------------------------------------------------------
int __thiscall meth_unk1A5E0_10(unk1A5E0 *this, char *a2, size_t Size, int a4) {
  int v4; // ebx

  v4 = a4;
  if (a4 == -1) {
    v4 = (unsigned __int16)this->field_1A92C[0] - 1;
    if (v4 < 0)
      v4 = 0;
  }
  if (!*(_DWORD *)&this->gap1A60C[8 * v4 + 4])
    *(_DWORD *)&this->gap1A60C[8 * v4 + 4] = operator new(Size);
  qmemcpy(*(void **)&this->gap1A60C[8 * v4 + 4], a2, Size);
  *(_DWORD *)&this->gap1A60C[8 * v4] = Size;
  return 1;
}

//----- (1005C270) --------------------------------------------------------
int __thiscall meth_unk1A5E0_1(unk1A5E0 *this, float a2, float a3) {
  float v4; // [esp+Ch] [ebp+Ch]

  graphics_1005F5A0((__int64)a3,
                    (__int64)v4,
                    word_100AB568[12 * LOWORD(a2)],
                    &dword_100AB56C[6 * LOWORD(a2)],
                    dword_100AB57C[6 * LOWORD(a2)]);
  return 1;
}
// 100AB568: using guessed type __int16 word_100AB568[];

//----- (1005C2C0) --------------------------------------------------------
int __thiscall meth_unk1A5E0_2(unk1A5E0 *this, int index) {
  int v3;            // ebx
  __int16 v4;        // ax
  int v5;            // eax
  unk1A5E0Vtbl **v6; // edi
  unk1A5E0Vtbl *v7;  // ebp
  __int16 v8;        // ax
  unk1A5E0Vtbl *v9;  // edx
  __int16 v10;       // ax
  __int16 v11;       // ax
  float v13;         // [esp+2Ch] [ebp-20h]
  float v14;         // [esp+2Ch] [ebp-20h]
  float v15;         // [esp+2Ch] [ebp-20h]
  float v16;         // [esp+2Ch] [ebp-20h]
  float v17;         // [esp+2Ch] [ebp-20h]
  float v18;         // [esp+30h] [ebp-1Ch]
  float v19;         // [esp+30h] [ebp-1Ch]
  float v20;         // [esp+30h] [ebp-1Ch]
  float v21;         // [esp+30h] [ebp-1Ch]
  float v22;         // [esp+30h] [ebp-1Ch]
  int v23;           // [esp+44h] [ebp-8h]
  int v24;           // [esp+48h] [ebp-4h]
  int v25;           // [esp+48h] [ebp-4h]
  int indexa;        // [esp+50h] [ebp+4h]

  v3 = 0;
  v4 = this->field_1A92C[5];
  v23 = 0;
  if (v4 >= 0)
    ((void(__thiscall *)(unk1A5E0 *, __int16, _DWORD, _DWORD))this->lpVtbl->meth1)(
        this, v4, *(_DWORD *)this->gap24, *(_DWORD *)&this->gap24[4]);
  if ((this->field_18 & 0x1000000) == 0 && index >= 0 &&
      (this->vectorUnk438[index].field_4 & 0x10) == 0)
    this->vectorUnk438[index].field_8 = 4;
  v24 = 0;
  if (this->field_1A92C[2]) {
    indexa = 0;
    do {
      v5 = this->field_1A92C[1] + v3;
      if (v5 >= 0 && v5 < (unsigned __int16)this->field_1A92C[0]) {
        v6 = &this->lpVtbl + 270 * v5;
        if (v6 != (unk1A5E0Vtbl **)-53) {
          v7 = v6[11];
          ((void(__thiscall *)(unk1A5E0Vtbl **))v7->meth1)(v6 + 11);
          v6[276] = *(unk1A5E0Vtbl **)&this->gap1A93A[2];
          v6[278] = *(unk1A5E0Vtbl **)&this->gap1A93A[10];
          v23 = indexa + *(_DWORD *)&this->gap1A93A[6];
          v6[277] = (unk1A5E0Vtbl *)v23;
          v6[279] = (unk1A5E0Vtbl *)(v23 + 18);
          v18 = (float)v23;
          v13 = (float)*(int *)&this->gap1A93A[2];
          ((void(__thiscall *)(unk1A5E0Vtbl **, _DWORD, _DWORD))v7->meth3)(
              v6 + 11, LODWORD(v13), LODWORD(v18));
          v3 = v24;
        }
        if ((this->field_18 & 0x2000000) != 0) {
          v25 = *(_DWORD *)&this->gap1A93A[2] - 19;
          if (sub_100586D0((int)v6[280])) {
              v19 = (float)v23;
              v14 = (float)v25;
              ((void(__thiscall *)(unk1A5E0 *, int, _DWORD, _DWORD))this->lpVtbl->meth1)(
                  this, 139, LODWORD(v14), LODWORD(v19));
          } else {
              v20 = (float)v23;
              v15 = (float)v25;
              ((void(__thiscall *)(unk1A5E0 *, int, _DWORD, _DWORD))this->lpVtbl->meth1)(
                  this, 138, LODWORD(v15), LODWORD(v20));
          }
        }
      }
      v24 = ++v3;
      indexa += 19;
    } while (v3 < (unsigned __int16)this->field_1A92C[2]);
  }
  if ((this->field_18 & 0x200000) == 0) {
    v8 = this->field_1A92C[3];
    if (v8 > 0) {
      v9 = this->lpVtbl;
      v21 = (float)*(int *)&this->gap1A93A[22];
      v16 = (float)*(int *)&this->gap1A93A[18];
      if (*(_DWORD *)this->field_1A99C)
        ((void(__thiscall *)(unk1A5E0 *, int, float, float))v9->meth1)(
            this, 47, COERCE_FLOAT(LODWORD(v16)), COERCE_FLOAT(LODWORD(v21)));
      else
        ((void(__thiscall *)(unk1A5E0 *, __int16, float, float))v9->meth1)(
            this, v8, COERCE_FLOAT(LODWORD(v16)), COERCE_FLOAT(LODWORD(v21)));
    }
    v10 = this->field_1A92C[4];
    if (v10 > 0) {
      v22 = (float)*(int *)&this->gap1A93A[38];
      v17 = (float)*(int *)&this->gap1A93A[34];
      if (*(_DWORD *)&this->field_1A99C[2])
        ((void(__thiscall *)(unk1A5E0 *, int, _DWORD, _DWORD))this->lpVtbl->meth1)(
            this, 45, LODWORD(v17), LODWORD(v22));
      else
        ((void(__thiscall *)(unk1A5E0 *, __int16, _DWORD, _DWORD))this->lpVtbl->meth1)(
            this, v10, LODWORD(v17), LODWORD(v22));
    }
    v11 = this->field_1A938;
    if (v11 > 0)
      ((void(__thiscall *)(unk1A5E0 *, __int16, _DWORD, _DWORD))this->lpVtbl->meth1)(
          this, v11, *(_DWORD *)&this->field_1A99C[8], *(_DWORD *)&this->field_1A99C[10]);
  }
  return 1;
}

//----- (1005C510) --------------------------------------------------------
int __thiscall meth_unk1A5E0_6(unk1A5E0 *this, _DWORD *a2) {
  int v3;  // ecx
  int v4;  // eax
  bool v5; // zf

  if (*a2 <= **(_DWORD **)&SrcStr[8] && a2[2] >= **(_DWORD **)&SrcStr[8]) {
    v3 = *(_DWORD *)(*(_DWORD *)&SrcStr[8] + 4);
    if (a2[1] <= v3 && a2[3] >= v3) {
      v4 = this->field_18;
      if ((v4 & 0x40000) != 0) {
        if (gUnk54Ptr->field_2C || gUnk54Ptr->field_30) {
          v4 |= 0x80002u;
        LABEL_12:
          this->field_18 = v4;
          LOBYTE(v4) = v4 | 0x20;
          this->field_18 = v4;
          return 1;
        }
      } else {
        v5 = !sub_1003E080();
        v4 = this->field_18;
        if (!v5) {
          LOBYTE(v4) = v4 | 2;
          goto LABEL_12;
        }
      }
      LOBYTE(v4) = v4 & 0xFD;
      goto LABEL_12;
    }
  }
  return 0;
}

//----- (1005C590) --------------------------------------------------------
int __thiscall meth_unk1A5E0_7(unk1A5E0 *this, int *a2) {
  int v3;                                    // ebp
  int v4;                                    // eax
  unk00054 *v6;                              // edx
  DWORD v7;                                  // eax
  int v8;                                    // ebx
  _DWORD *v9;                                // edi
  int(__thiscall * v10)(unk1A5E0 *, char *); // ebx
  int v11;                                   // eax
  double v12;                                // st7
  double v13;                                // st6
  double v14;                                // st6
  char v16;                                  // c0
  double v17;                                // st6
  unsigned __int16 v18;                      // cx
  double v19;                                // st6
  double v20;                                // st6
  double v21;                                // st6
  char v23;                                  // c0
  double v24;                                // st6
  unsigned __int16 v25;                      // cx
  void (*v26)(void);                         // eax
  int v27;                                   // eax
  bool v28;                                  // sf
  void (*v29)(void);                         // eax
  unsigned __int16 v30;                      // ax
  double v31;                                // st7
  int v32;                                   // eax
  __int16 v33;                               // cx
  unsigned __int16 v34;                      // ax
  void (*v35)(void);                         // eax
  unsigned __int16 v36;                      // ax
  char v38;                                  // c0
  double v39;                                // st7
  int v40;                                   // eax
  int v41;                                   // ecx
  int v42;                                   // ebx
  char *v43;                                 // ebp
  int v44;                                   // eax
  int v45;                                   // eax
  void(__cdecl * v46)(unk1A5E0 *, int *);    // eax
  int v47;                                   // eax
  int v48;                                   // [esp+10h] [ebp-Ch]
  int v49;                                   // [esp+14h] [ebp-8h]
  int(__thiscall * v50)(unk1A5E0 *, char *); // [esp+18h] [ebp-4h]
  float v51;                                 // [esp+20h] [ebp+4h]

  v3 = 0;
  v4 = this->field_18;
  if ((v4 & 0x18) != 0)
    return 0;
  v6 = gUnk54Ptr;
  if ((v4 & 0x80000) == 0 || gUnk54Ptr->field_2C || gUnk54Ptr->field_30) {
    if ((v4 & 0x80000) != 0 && (gUnk54Ptr->field_2C || gUnk54Ptr->field_30)) {
      LOBYTE(v4) = v4 | 0x22;
      this->field_18 = v4;
      v7 = getTicks();
      v8 = dword_10AA2A60;
      dword_10AA2A60 = v7;
      v6 = (unk00054 *)(v7 - v8);
      dword_10AA2A5C += v7 - v8;
      if (dword_10AA2A5C < 60)
        return 1;
      dword_10AA2A5C = 0;
      v3 = 1;
    }
  } else {
    *(_DWORD *)&this->field_1A99C[12] = 0;
    this->field_18 = v4 & 0xFFF7FFFD;
  }
  v9 = &this->gap1A93A[82];
  v10 = (int(__thiscall *)(unk1A5E0 *, char *))this->lpVtbl->meth6;
  v50 = v10;
  if (((int(__fastcall *)(unk1A5E0 *, unk00054 *, _BYTE *))v10)(this, v6, &this->gap1A93A[82]) ||
      *(_DWORD *)&this->field_1A99C[12]) {
    v11 = this->field_18;
    if ((v11 & 0x200000) == 0) {
      if ((v11 & 2) != 0) {
        if (this->field_1A92C[0] > 1u)
          v12 = (double)((unsigned __int16)this->field_1A92C[0] - 1) /
                *(float *)&this->field_1A99C[26];
        else
          v12 = 1.0 / *(float *)&this->field_1A99C[26];
        if (*(_DWORD *)&this->field_1A99C[14]) {
          v13 = (double)(**(_DWORD **)&SrcStr[8] - *v9);
          if (!*(_DWORD *)&this->field_1A99C[12])
              flt_10AA2A64 = v13;
          v14 = v13 + (double)(int)**(_DWORD **)&SrcStr[8] - flt_10AA2A64;
          *(float *)&this->field_1A99C[8] = v14;
          if (v16) {
              *(_DWORD *)&this->field_1A99C[8] = *(_DWORD *)&this->field_1A99C[18];
          } else if (v14 > *(float *)&this->field_1A99C[20]) {
              *(_DWORD *)&this->field_1A99C[8] = *(_DWORD *)&this->field_1A99C[20];
          }
          v17 = *(float *)&this->field_1A99C[8];
          *v9 = (__int64)v17;
          v18 = this->field_1A92C[0];
          *(_DWORD *)&this->gap1A93A[90] = (__int64)v17 + 16;
          if (v18 - 1 <= 0)
              goto LABEL_38;
          v19 = *(float *)&this->field_1A99C[8] - *(float *)&this->field_1A99C[18];
        } else {
          if (!*(_DWORD *)&this->field_1A99C[16])
              goto LABEL_38;
          v51 = (float)*(int *)(*(_DWORD *)&SrcStr[8] + 4);
          v20 = v51 - (double)*(int *)(*(_DWORD *)&SrcStr[8] + 16);
          if (!*(_DWORD *)&this->field_1A99C[12])
              flt_10AA2A68 = v51 - (double)*(int *)&this->gap1A93A[86];
          v21 = v20 + (double)*(int *)(*(_DWORD *)&SrcStr[8] + 4) - flt_10AA2A68;
          *(float *)&this->field_1A99C[10] = v21;
          if (v23) {
              *(_DWORD *)&this->field_1A99C[10] = *(_DWORD *)&this->field_1A99C[22];
          } else if (v21 > *(float *)&this->field_1A99C[24]) {
              *(_DWORD *)&this->field_1A99C[10] = *(_DWORD *)&this->field_1A99C[24];
          }
          v24 = *(float *)&this->field_1A99C[10];
          *(_DWORD *)&this->gap1A93A[86] = (__int64)v24;
          v25 = this->field_1A92C[0];
          *(_DWORD *)&this->gap1A93A[94] = (__int64)v24 + 16;
          if (v25 - 1 <= 0)
              goto LABEL_38;
          v19 = *(float *)&this->field_1A99C[10] - *(float *)&this->field_1A99C[22];
        }
        this->field_1A92C[1] = (__int64)(v19 * v12);
      LABEL_38:
        v26 = (void (*)(void))this->field_4[3];
        if (v26)
          v26();
        *(_DWORD *)&this->field_1A99C[12] = 1;
        return 1;
      }
      return 1;
    }
  }
  if (!v10(this, &this->gap1A93A[18]) || (v27 = this->field_18, (v27 & 0x200000) != 0)) {
    if (v10(this, &this->gap1A93A[34])) {
      v32 = this->field_18;
      if ((v32 & 0x200000) == 0) {
        if ((v32 & 2) == 0) {
          *(_DWORD *)&this->field_1A99C[2] = 0;
          return 1;
        }
        v33 = ++this->field_1A92C[1];
        v34 = this->field_1A92C[0];
        *(_DWORD *)&this->field_1A99C[2] = 1;
        if (v33 >= (int)v34)
          this->field_1A92C[1] = v34 - 1;
        v35 = (void (*)(void))this->field_4[2];
        if (v35)
          v35();
        v36 = this->field_1A92C[0] - 1;
        if (this->field_1A92C[0] == 1)
          v36 = 1;
        v31 = *(float *)&this->field_1A99C[26] / (double)v36 + *(float *)&this->field_1A99C[10];
        goto LABEL_62;
      }
    }
    v49 = 0;
    if (v3)
      return 0;
    v40 = this->field_1A92C[1];
    v41 = v40 + (unsigned __int16)this->field_1A92C[2];
    v48 = v41;
    if (v41 > 100) {
      v41 = 100;
      v48 = 100;
    }
    v42 = this->field_1A92C[1];
    if (v40 >= v41) {
    LABEL_93:
      if (!v49) {
        v47 = this->field_18;
        LOBYTE(v47) = v47 & 0xDD;
        this->field_18 = v47;
        return 0;
      }
      return 1;
    }
    v43 = &this->vectorUnk438[v40].field_8;
    while (1) {
      if ((*(v43 - 4) & 0x10) != 0) {
        *v43 = 0;
      } else if (v50(this, v43 + 1052) && strlen(v43 + 1)) {
        v44 = this->field_18;
        v49 = 1;
        if ((v44 & 0x1000000) == 0) {
          if ((v44 & 0x100) != 0) {
              switch (*v43) {
              case 0:
                  goto LABEL_85;
              case 1:
                  *v43 = 2;
                  break;
              case 2:
              LABEL_85:
                  *v43 = 1;
                  break;
              default:
                  *v43 = 0;
                  break;
              }
              v45 = this->field_18;
              BYTE1(v45) &= 0xFEu;
              this->field_18 = v45;
          }
          if (sub_1003E080()) {
              unknown_libname_9();
              if ((*(v43 - 4) & 0x10) == 0) {
                  *a2 = v42;
                  sub_10072AF0(1, 0x200020u);
                  dword_10AA2854 = 1;
                  v46 = (void(__cdecl *)(unk1A5E0 *, int *))this->field_4[0];
                  if (v46)
                      v46(this, a2);
              }
          }
          goto LABEL_92;
        }
      } else {
        *v43 = 1;
      }
    LABEL_92:
      ++v42;
      v43 += 1080;
      if (v42 >= v48)
        goto LABEL_93;
    }
  }
  if ((v27 & 2) == 0) {
    *(_DWORD *)this->field_1A99C = 0;
    return 1;
  }
  v28 = --this->field_1A92C[1] < 0;
  *(_DWORD *)this->field_1A99C = 1;
  if (v28)
    this->field_1A92C[1] = 0;
  v29 = (void (*)(void))this->field_4[1];
  if (v29)
    v29();
  v30 = this->field_1A92C[0] - 1;
  if (this->field_1A92C[0] == 1)
    v30 = 1;
  v31 = *(float *)&this->field_1A99C[10] - *(float *)&this->field_1A99C[26] / (double)v30;
LABEL_62:
  *(float *)&this->field_1A99C[10] = v31;
  if (v38) {
    *(_DWORD *)&this->field_1A99C[10] = *(_DWORD *)&this->field_1A99C[22];
  } else if (v31 > *(float *)&this->field_1A99C[24]) {
    *(_DWORD *)&this->field_1A99C[10] = *(_DWORD *)&this->field_1A99C[24];
  }
  v39 = *(float *)&this->field_1A99C[10];
  *(_DWORD *)&this->gap1A93A[86] = (__int64)v39;
  *(_DWORD *)&this->gap1A93A[94] = (__int64)v39 + 16;
  return 1;
}
// 1005C6D6: variable 'v16' is possibly undefined
// 1005C79A: variable 'v23' is possibly undefined
// 1005C977: variable 'v38' is possibly undefined
// 10AA2854: using guessed type int dword_10AA2854;
// 10AA2A5C: using guessed type int dword_10AA2A5C;
// 10AA2A60: using guessed type int dword_10AA2A60;
// 10AA2A64: using guessed type float flt_10AA2A64;
// 10AA2A68: using guessed type float flt_10AA2A68;

//----- (1005CB40) --------------------------------------------------------
int __thiscall meth_unk1A5E0_8(unk1A5E0 *this, int index) {
  unk1A5E0Vtbl *v3; // edi
  int v5;           // [esp+8h] [ebp-4h] BYREF

  v5 = -1;
  v3 = this->lpVtbl;
  this->lpVtbl->meth2(this, index);
  if (!dword_10AA28D8 && !dword_10AA2858)
    v3->meth7(this, &v5);
  ++word_10AA2870;
  return v5;
}
// 10AA2858: using guessed type int dword_10AA2858;
// 10AA2870: using guessed type __int16 word_10AA2870;
// 10AA28D8: using guessed type int dword_10AA28D8;

//----- (1005CB90) --------------------------------------------------------
unk06594 *__thiscall meth_unk06594_init(unk06594 *this) {
  char **v2;       // edx
  int v3;          // ebx
  CHAR *v4;        // edi
  unsigned int v5; // kr08_4
  CHAR *v6;        // esi
  char **v7;       // edi

  v2 = &this->field_4;
  this->lpVtbl = &gUnk06594Vtbl;
  memset(&this->field_4, 0, 0x6590u);
  v3 = 100;
  do {
    v5 = strlen(String2) + 1;
    v4 = &String2[v5++];
    v6 = &v4[1 - v5];
    v7 = v2;
    v2 += 65;
    qmemcpy(v7, v6, v5 - 1);
    --v3;
  } while (v3);
  return this;
}

//----- (1005CBF0) --------------------------------------------------------
unk06594 *__thiscall meth_unk06594_0(unk06594 *Block, char a2) {
  meth_unk06594_SetVtbl(Block);
  if ((a2 & 1) != 0)
    operator delete(Block);
  return Block;
}

//----- (1005CC10) --------------------------------------------------------
void __thiscall meth_unk06594_SetVtbl(unk06594 *this) {
  this->lpVtbl = &gUnk06594Vtbl;
}

//----- (1005CC20) --------------------------------------------------------
int __thiscall meth_unk06594_4(unk06594 *this) {
  FILE *v1;         // ebp
  int i;            // ebx
  char Buffer[100]; // [esp+10h] [ebp-64h] BYREF

  v1 = fopen(kSeasondescDat, kFileModeWriteBinary);
  if (!v1)
    sub_1003E260(7);
  for (i = 0; i < 26000; i += 260) {
    strcpy(Buffer, (const char *)&gUnkC8Ptr1->field_C0->field_4 + i);
    if ((int)filesystem_fwriteLock(Buffer, 1u, 0x64u, v1) < 100)
      sub_1003E260(7);
  }
  fclose(v1);
  return 1;
}

//----- (1005CCD0) --------------------------------------------------------
int __thiscall meth_unk06594_5(unk06594 *this, __int16 a1) {
  FILE *v2;           // ebx
  char Buffer[4];     // [esp+10h] [ebp-20Ch] BYREF
  char FileName[260]; // [esp+14h] [ebp-208h] BYREF
  char String[260];   // [esp+118h] [ebp-104h] BYREF

  strcpy(FileName, aRallyseason);
  _itoa(a1, Buffer, 10);
  strcat(FileName, Buffer);
  strcat(FileName, aBrf);
  v2 = fopen(FileName, kFileModeReadBinary);
  if (v2) {
    memset(String, 0, sizeof(String));
    if ((int)filesystem_freadLock(String, 1u, 0x80u, v2) < 128)
      sub_1003E260(7);
    strcpy((char *)&gUnkC8Ptr1->field_C0->field_4 + 260 * a1, _strupr(String));
    fclose(v2);
  }
  return 1;
}

//----- (1005CE30) --------------------------------------------------------
int __thiscall meth_unk06594_6(unk06594 *this, const char *a2) {
  int v2;          // edx
  unk06594 *v3;    // ecx
  char String[32]; // [esp+8h] [ebp-20h] BYREF
  const char *v6;  // [esp+30h] [ebp+8h]

  if (dword_10AA2848) {
    strcpy(String, &a2[strlen(aRallyseason)]);
    v2 = 65 * atoi(String);
    v3 = gUnkC8Ptr6->field_C0;
  } else {
    strcpy(String, &a2[strlen(aTimeattack)]);
    v2 = 65 * atoi(String);
    v3 = gUnkC8Ptr6->last;
  }
  strcpy((char *)&v3->field_4 + 4 * v2, v6);
  return 1;
}
// 10AA2848: using guessed type int dword_10AA2848;

//----- (1005CF20) --------------------------------------------------------
int __thiscall meth_unk06594_1(unk06594 *this, char *lpFileName) {
  int v3;                                             // esi
  FILE *fp;                                           // edi
  int v6;                                             // eax
  int i;                                              // ebx
  FILE *v8;                                           // esi
  int v9;                                             // eax
  int v10;                                            // [esp+10h] [ebp-224h]
  void(__thiscall * v11)(unk06594 *, char *, char *); // [esp+14h] [ebp-220h]
  char Buffer[260];                                   // [esp+18h] [ebp-21Ch] BYREF
  int v13[5];                                         // [esp+11Ch] [ebp-118h] BYREF
  char FileName[260];                                 // [esp+130h] [ebp-104h] BYREF

  memset(Buffer, 0, sizeof(Buffer));
  v3 = _findfirst(lpFileName, (int)v13);
  v10 = v3;
  if (v3 == -1)
    return 0;
  fp = fopen(FileName, Mode);
  fseek(fp, 0, 2);
  v6 = ftell(fp);
  fseek(fp, v6 - 128, 0);
  filesystem_freadLock(Buffer, 1u, 0x80u, fp);
  fclose(fp);
  v11 = this->lpVtbl->meth6;
  v11(this, FileName, Buffer);
  for (i = 1; i < 100; ++i) {
    memset(Buffer, 0, sizeof(Buffer));
    if (_findnext((HANDLE)v3, (int)v13))
      break;
    v8 = fopen(FileName, Mode);
    fseek(v8, 0, 2);
    v9 = ftell(v8);
    fseek(v8, v9 - 128, 0);
    filesystem_freadLock(Buffer, 1u, 0x80u, v8);
    v11(this, FileName, Buffer);
    fclose(v8);
    v3 = v10;
  }
  _findclose(v3);
  return 1;
}

//----- (1005D0A0) --------------------------------------------------------
int __thiscall meth_unk06594_2(unk06594 *this, LPCSTR lpFileName) {
  int result; // eax
  void *v3;   // ebx
  int v4;     // edi
  int i;      // esi
  int v6[70]; // [esp+4h] [ebp-118h] BYREF

  result = _findfirst(lpFileName, (int)v6);
  v3 = (void *)result;
  if (result != -1) {
    v4 = 0;
    for (i = 1; i < 100; ++i) {
      if (_findnext(v3, (int)v6))
        break;
      ++v4;
    }
    _findclose((intptr_t)v3);
    result = v4;
  }
  return result;
}

//----- (1005D110) --------------------------------------------------------
int __thiscall meth_unk06594_3(unk06594 *this, char *Str1, int a3) {
  int v3;           // ebx
  unsigned int v4;  // esi
  char *v5;         // edx
  int i;            // ecx
  char v7;          // al
  size_t v8;        // ebx
  const char *v9;   // ebp
  char *j;          // esi
  unsigned int v11; // kr1C_4
  unsigned int v12; // edx
  char *v13;        // esi
  char v14;         // al
  char *v15;        // ecx
  int v16;          // esi
  int result;       // eax
  __int16 v18;      // [esp+10h] [ebp-41Ch]
  int v19;          // [esp+10h] [ebp-41Ch]
  unk06594 *v20;    // [esp+18h] [ebp-414h] BYREF
  char v21[260];    // [esp+1Ch] [ebp-410h] BYREF
  char String[260]; // [esp+120h] [ebp-30Ch] BYREF
  char v23[260];    // [esp+224h] [ebp-208h] BYREF
  char v24[260];    // [esp+328h] [ebp-104h] BYREF

  v20 = this;
  memset(v21, 0, sizeof(v21));
  memset(String, 0, sizeof(String));
  memset(v24, 0, sizeof(v24));
  v3 = 0;
  memset(v23, 0, sizeof(v23));
  v18 = 0;
  strcpy(v21, Str1);
  v4 = 0;
  if (strlen(Str1)) {
    v5 = Str1;
    for (i = v24 - Str1;; i = v24 - Str1) {
      v7 = *v5;
      if (*v5 == 88 || v7 == 120) {
        *v5 = 48;
      } else {
        if (v3)
          goto LABEL_11;
        if (v7 != 46) {
          v5[i] = v7;
          ++v18;
          goto LABEL_11;
        }
      }
      v3 = 1;
    LABEL_11:
      ++v4;
      ++v5;
      if (v4 >= strlen(Str1))
        break;
    }
  }
  v8 = v18;
  v9 = (const char *)&v20->field_4;
  v19 = 100;
  do {
    if (!strncmp(Str1, v9, v8) && strcmp(Str1, v9) < 0)
      strcpy(v21, v9);
    v9 += 260;
    --v19;
  } while (v19);
  for (j = (char *)&v20 + strlen(v21) + 3; j != v21; --j) {
    if (*j == 46)
      break;
  }
  if (j != v21) {
    v11 = strlen(v21) + 1;
    qmemcpy(v23, j, v21 - j + v11 - 1);
    v23[v21 - j - 1 + v11] = 0;
  }
  v12 = v8;
  if (v8 < strlen(v21)) {
    v13 = &String[v8];
    do {
      v14 = v21[v12];
      if (v14 < 48)
        break;
      if (v14 > 57)
        break;
      v15 = &v13[-v8];
      ++v12;
      ++v13;
      *v15 = v14;
    } while (v12 < strlen(v21));
  }
  v16 = atoi(String) + 1;
  memset(String, 0, sizeof(String));
  _itoa(v16 & 0xFF000000, String, 10);
  _itoa(v16 & 0xFF0000, &String[1], 10);
  _itoa(v16 & 0xFF00, &String[2], 10);
  _itoa((unsigned __int8)v16, &String[3], 10);
  strcpy(*(char **)a3, v24);
  result = 0;
  strcat(*(char **)a3, String);
  strcat(*(char **)a3, v23);
  return result;
}

//----- (1005D440) --------------------------------------------------------
int graphics_1005D440() {
  _DWORD *v0;                     // eax
  unk000C8 *v1;                   // eax
  unk000C8 *uC8;                  // eax
  Iostream_init *iostreamInit;    // eax
  Iostream_init *ioStreamInitRes; // eax

  memset(&gDDSurface, 0, 0x41B4u);
  gSurfaceCount = 0;
  word_10AA29F8 = 0;
  word_10AA29FC = 0;
  sub_1005FF30();
  gImagesWork1aBmFilepath = (char *)operator new(MAX_PATH);
  strcpy(gImagesWork1aBmFilepath, aImagesWork1aBm);
  g_aImagesCursorBmFilepath = operator new(0x104u);
  strcpy((char *)g_aImagesCursorBmFilepath, aImagesCursorBm);
  g_aImagesTypeGryBFilepath = operator new(0x104u);
  strcpy((char *)g_aImagesTypeGryBFilepath, aImagesTypeGryB);
  g_aImagesTypeWitBFilepath = operator new(0x104u);
  strcpy((char *)g_aImagesTypeWitBFilepath, aImagesTypeWitB);
  dword_10A9E5A0 = operator new(0x104u);
  strcpy((char *)dword_10A9E5A0, aImagesTypeMidB);
  dword_10A9E614 = operator new(0x104u);
  strcpy((char *)dword_10A9E614, aImagesBignumsB);
  dword_10A9E688 = operator new(0x104u);
  strcpy((char *)dword_10A9E688, aImagesChampBmp);
  dword_10A9E6FC = operator new(0x104u);
  strcpy((char *)dword_10A9E6FC, aImagesMpBmp);
  dword_10A9E770 = operator new(0x104u);
  strcpy((char *)dword_10A9E770, aImagesTaBmp);
  dword_10A9E7E4 = operator new(0x104u);
  strcpy((char *)dword_10A9E7E4, aImagesOpBmp);
  dword_10A9E858 = operator new(0x104u);
  strcpy((char *)dword_10A9E858, aImagesQrBmp);
  dword_10A9E8CC = operator new(0x104u);
  strcpy((char *)dword_10A9E8CC, aImagesCarmtBmp);
  dword_10A9E940 = (int)strcpy((char *)operator new(0x104u), aImagesMshftBmp);
  dword_10A9E9B4 = operator new(0x104u);
  strcpy((char *)dword_10A9E9B4, aImagesSoftshok);
  dword_10A9EA28 = operator new(0x104u);
  strcpy((char *)dword_10A9EA28, aImagesMedshokB);
  dword_10A9EA9C = operator new(0x104u);
  strcpy((char *)dword_10A9EA9C, aImagesHardshok);
  dword_10A9EB10 = operator new(0x104u);
  strcpy((char *)dword_10A9EB10, aImagesDesrttrk);
  dword_10A9EB84 = operator new(0x104u);
  strcpy((char *)dword_10A9EB84, aImagesCoasttrk);
  dword_10A9EBF8 = operator new(0x104u);
  strcpy((char *)dword_10A9EBF8, aImagesTrakcBmp);
  dword_10A9EC6C = operator new(0x104u);
  strcpy((char *)dword_10A9EC6C, aImagesFogBmp);
  dword_10A9ECE0 = operator new(0x104u);
  strcpy((char *)dword_10A9ECE0, aImagesNiteBmp);
  dword_10A9ED54 = operator new(0x104u);
  strcpy((char *)dword_10A9ED54, aImagesRainBmp);
  dword_10A9EDC8 = operator new(0x104u);
  strcpy((char *)dword_10A9EDC8, aImagesSnowBmp);
  dword_10A9EE3C = operator new(0x104u);
  strcpy((char *)dword_10A9EE3C, aImagesSunwethB);
  dword_10A9EEB0 = operator new(0x104u);
  strcpy((char *)dword_10A9EEB0, aImagesDrytireB);
  dword_10A9EF24 = operator new(0x104u);
  strcpy((char *)dword_10A9EF24, aImagesMedtireB);
  dword_10A9EF98 = operator new(0x104u);
  strcpy((char *)dword_10A9EF98, aImagesWettireB);
  dword_10A9F00C = operator new(0x104u);
  strcpy((char *)dword_10A9F00C, aImagesTrakdBmp);
  dword_10A9F080 = operator new(0x104u);
  strcpy((char *)dword_10A9F080, aImagesTrakeBmp);
  dword_10A9F0F4 = operator new(0x104u);
  strcpy((char *)dword_10A9F0F4, aImagesAshftBmp);
  dword_10A9F168 = operator new(0x104u);
  strcpy((char *)dword_10A9F168, aImagesCartrBmp);
  dword_10A9F1DC = operator new(0x104u);
  strcpy((char *)dword_10A9F1DC, aImagesCarceBmp);
  dword_10A9F250 = operator new(0x104u);
  strcpy((char *)dword_10A9F250, aImagesCarcuBmp);
  dword_10A9F2C4 = operator new(0x104u);
  strcpy((char *)dword_10A9F2C4, aImagesCaresBmp);
  dword_10A9F338 = operator new(0x104u);
  strcpy((char *)dword_10A9F338, aImagesCarfhBmp);
  dword_10A9F3AC = operator new(0x104u);
  strcpy((char *)dword_10A9F3AC, aImagesCaripBmp);
  dword_10A9F420 = operator new(0x104u);
  strcpy((char *)dword_10A9F420, aImagesCarldBmp);
  dword_10A9F494 = operator new(0x104u);
  strcpy((char *)dword_10A9F494, aImagesCarm3Bmp);
  dword_10A9F508 = operator new(0x104u);
  strcpy((char *)dword_10A9F508, aImagesCarmnBmp);
  dword_10A9F57C = operator new(0x104u);
  strcpy((char *)dword_10A9F57C, aImagesCarnsBmp);
  dword_10A9F5F0 = operator new(0x104u);
  strcpy((char *)dword_10A9F5F0, aImagesCarpjBmp);
  dword_10A9F664 = operator new(0x104u);
  strcpy((char *)dword_10A9F664, aImagesCarpsBmp);
  dword_10A9F6D8 = operator new(0x104u);
  strcpy((char *)dword_10A9F6D8, aImagesCarrsBmp);
  dword_10A9F74C = operator new(0x104u);
  strcpy((char *)dword_10A9F74C, aImagesCarspBmp);
  dword_10A9F7C0 = operator new(0x104u);
  strcpy((char *)dword_10A9F7C0, aImagesCarbbBmp);
  dword_10A9F834 = operator new(0x104u);
  strcpy((char *)dword_10A9F834, aImagesArrowddB);
  dword_10A9F8A8 = operator new(0x104u);
  strcpy((char *)dword_10A9F8A8, aImagesArrowduB);
  dword_10A9F91C = operator new(0x104u);
  strcpy((char *)dword_10A9F91C, aImagesArrowudB);
  dword_10A9F990 = operator new(0x104u);
  strcpy((char *)dword_10A9F990, aImagesArrowuuB);
  dword_10A9FA04 = operator new(0x104u);
  strcpy((char *)dword_10A9FA04, aImagesJoystkBm);
  dword_10A9FA78 = operator new(0x104u);
  strcpy((char *)dword_10A9FA78, aImagesKeybdBmp);
  dword_10A9FAEC = operator new(0x104u);
  strcpy((char *)dword_10A9FAEC, aImagesSteerinp);
  dword_10A9FB60 = operator new(0x104u);
  strcpy((char *)dword_10A9FB60, aImagesTypeYelB);
  dword_10A9FBD4 = operator new(0x104u);
  strcpy((char *)dword_10A9FBD4, aImagesSteerarr);
  dword_10A9FC48 = operator new(0x104u);
  strcpy((char *)dword_10A9FC48, aImagesSteeradj);
  dword_10A9FCBC = operator new(0x104u);
  strcpy((char *)dword_10A9FCBC, aImagesSpkrBmp);
  dword_10A9FD30 = operator new(0x104u);
  strcpy((char *)dword_10A9FD30, aImagesMonitrBm);
  dword_10A9FDA4 = operator new(0x104u);
  strcpy((char *)dword_10A9FDA4, aImagesNamebarB);
  dword_10A9FE18 = operator new(0x104u);
  strcpy((char *)dword_10A9FE18, aImagesSlidebox);
  dword_10A9FE8C = operator new(0x104u);
  strcpy((char *)dword_10A9FE8C, aImagesBoxtile2);
  dword_10A9FF00 = operator new(0x104u);
  strcpy((char *)dword_10A9FF00, aImagesRboxendB);
  dword_10A9FF74 = operator new(0x104u);
  strcpy((char *)dword_10A9FF74, aImagesLboxendB);
  dword_10A9FFE8 = operator new(0x104u);
  strcpy((char *)dword_10A9FFE8, aImagesTrakcBmp_0);
  dword_10AA005C = operator new(0x104u);
  strcpy((char *)dword_10AA005C, aImagesTrakdBmp_0);
  dword_10AA00D0 = operator new(0x104u);
  strcpy((char *)dword_10AA00D0, aImagesTrakeBmp_0);
  dword_10AA0144 = operator new(0x104u);
  strcpy((char *)dword_10AA0144, aImagesDesrttrB);
  dword_10AA01B8 = operator new(0x104u);
  strcpy((char *)dword_10AA01B8, aImagesCoasttrB);
  dword_10AA022C = operator new(0x104u);
  strcpy((char *)dword_10AA022C, aImagesMpmodemB);
  dword_10AA02A0 = operator new(0x104u);
  strcpy((char *)dword_10AA02A0, aImagesMptcpipB);
  dword_10AA0314 = operator new(0x104u);
  strcpy((char *)dword_10AA0314, aImagesMpipxBmp);
  dword_10AA0388 = operator new(0x104u);
  strcpy((char *)dword_10AA0388, aImagesMpserial);
  dword_10AA03FC = operator new(0x104u);
  strcpy((char *)dword_10AA03FC, aImagesSeasn2aB);
  dword_10AA0470 = operator new(0x104u);
  strcpy((char *)dword_10AA0470, aImagesSeasn2bB);
  dword_10AA04E4 = operator new(0x104u);
  strcpy((char *)dword_10AA04E4, aImagesSeasn3aB);
  dword_10AA0558 = operator new(0x104u);
  strcpy((char *)dword_10AA0558, aImagesSeasn3bB);
  dword_10AA05CC = operator new(0x104u);
  strcpy((char *)dword_10AA05CC, aImagesSeasn4aB);
  dword_10AA0640 = operator new(0x104u);
  strcpy((char *)dword_10AA0640, aImagesSeasn4bB);
  dword_10AA06B4 = operator new(0x104u);
  strcpy((char *)dword_10AA06B4, aImagesSeasn5aB);
  dword_10AA0728 = operator new(0x104u);
  strcpy((char *)dword_10AA0728, aImagesBgdimBmp);
  dword_10AA079C = operator new(0x104u);
  strcpy((char *)dword_10AA079C, aImagesCongratB);
  dword_10AA0810 = operator new(0x104u);
  strcpy((char *)dword_10AA0810, aImagesNoadv1Bm);
  dword_10AA0884 = operator new(0x104u);
  strcpy((char *)dword_10AA0884, aImagesNoadv2Bm);
  dword_10AA08F8 = operator new(0x104u);
  strcpy((char *)dword_10AA08F8, aImagesButMainB);
  dword_10AA096C = operator new(0x104u);
  strcpy((char *)dword_10AA096C, aImagesButMaind);
  dword_10AA09E0 = operator new(0x104u);
  strcpy((char *)dword_10AA09E0, aImagesButOpBmp);
  dword_10AA0A54 = operator new(0x104u);
  strcpy((char *)dword_10AA0A54, aImagesButOpdBm);
  dword_10AA0AC8 = operator new(0x104u);
  strcpy((char *)dword_10AA0AC8, aImagesCars1aBm);
  dword_10AA0B3C = operator new(0x104u);
  strcpy((char *)dword_10AA0B3C, aImagesCars2aBm);
  dword_10AA0BB0 = operator new(0x104u);
  strcpy((char *)dword_10AA0BB0, aImagesCars2bBm);
  dword_10AA0C24 = operator new(0x104u);
  strcpy((char *)dword_10AA0C24, aImagesCars3aBm);
  dword_10AA0C98 = operator new(0x104u);
  strcpy((char *)dword_10AA0C98, aImagesCars3bBm);
  dword_10AA0D0C = operator new(0x104u);
  strcpy((char *)dword_10AA0D0C, aImagesCars4aBm);
  dword_10AA0D80 = operator new(0x104u);
  strcpy((char *)dword_10AA0D80, aImagesCars4bBm);
  dword_10AA0DF4 = strcpy((char *)operator new(0x104u), aImagesCars5aBm);
  dword_10AA0E68 = operator new(0x104u);
  strcpy((char *)dword_10AA0E68, aImagesCars5bBm);
  dword_10AA0EDC = operator new(0x104u);
  strcpy((char *)dword_10AA0EDC, aImagesChatbar2);
  dword_10AA0F50 = operator new(0x104u);
  strcpy((char *)dword_10AA0F50, aImagesMousinpt);
  dword_10AA0FC4 = operator new(0x104u);
  strcpy((char *)dword_10AA0FC4, aImagesFfstickB);
  dword_10AA1038 = operator new(0x104u);
  strcpy((char *)dword_10AA1038, aImagesCarwnosh);
  dword_10AA10AC = operator new(0x104u);
  strcpy((char *)dword_10AA10AC, aImagesCarwshad);
  dword_10AA1120 = operator new(0x104u);
  strcpy((char *)dword_10AA1120, aImagesSpecoffB);
  dword_10AA1194 = operator new(0x104u);
  strcpy((char *)dword_10AA1194, aImagesSpeconBm);
  dword_10AA1208 = operator new(0x104u);
  strcpy((char *)dword_10AA1208, aImagesNoffstik);
  dword_10AA127C = operator new(0x104u);
  strcpy((char *)dword_10AA127C, aImagesListboxB);
  dword_10AA12F0 = operator new(0x104u);
  strcpy((char *)dword_10AA12F0, aImagesEngsound);
  dword_10AA1364 = operator new(0x104u);
  strcpy((char *)dword_10AA1364, aImagesMusicBmp);
  dword_10AA13D8 = operator new(0x104u);
  strcpy((char *)dword_10AA13D8, aImagesSoundtik);
  dword_10AA144C = operator new(0x104u);
  strcpy((char *)dword_10AA144C, aImagesSoundptr);
  dword_10AA14C0 = operator new(0x104u);
  strcpy((char *)dword_10AA14C0, aImagesTrrwdBmp);
  dword_10AA1534 = operator new(0x104u);
  strcpy((char *)dword_10AA1534, aImagesPjrwdBmp);
  dword_10AA15A8 = operator new(0x104u);
  strcpy((char *)dword_10AA15A8, aImagesMnrwdBmp);
  dword_10AA161C = operator new(0x104u);
  strcpy((char *)dword_10AA161C, aImagesMirrwdBm);
  dword_10AA1690 = operator new(0x104u);
  strcpy((char *)dword_10AA1690, aImagesBbrwdBmp);
  dword_10AA1704 = operator new(0x104u);
  strcpy((char *)dword_10AA1704, aImagesCurwdBmp);
  dword_10AA1778 = operator new(0x104u);
  strcpy((char *)dword_10AA1778, aImagesFbrwdBmp);
  dword_10AA17EC = operator new(0x104u);
  strcpy((char *)dword_10AA17EC, aImagesMtrwdBmp);
  dword_10AA1860 = operator new(0x104u);
  strcpy((char *)dword_10AA1860, aImagesSndlevl2);
  dword_10AA18D4 = operator new(0x104u);
  strcpy((char *)dword_10AA18D4, aImagesSndlevl3);
  dword_10AA1948 = operator new(0x104u);
  strcpy((char *)dword_10AA1948, aImagesTrakrace);
  dword_10AA19BC = operator new(0x104u);
  strcpy((char *)dword_10AA19BC, aImagesTrakrace_0);
  dword_10AA1A30 = operator new(0x104u);
  strcpy((char *)dword_10AA1A30, aImagesButSavBm);
  dword_10AA1AA4 = operator new(0x104u);
  strcpy((char *)dword_10AA1AA4, aImagesButSavdB);
  dword_10AA1B18 = operator new(0x104u);
  strcpy((char *)dword_10AA1B18, aImagesZCarmtBm);
  dword_10AA1B8C = operator new(0x104u);
  strcpy((char *)dword_10AA1B8C, aImagesZCartrBm);
  dword_10AA1C00 = operator new(0x104u);
  strcpy((char *)dword_10AA1C00, aImagesZCarceBm);
  dword_10AA1C74 = operator new(0x104u);
  strcpy((char *)dword_10AA1C74, aImagesZCarcuBm);
  dword_10AA1CE8 = operator new(0x104u);
  strcpy((char *)dword_10AA1CE8, aImagesZCaresBm);
  dword_10AA1D5C = operator new(0x104u);
  strcpy((char *)dword_10AA1D5C, aImagesZCarfhBm);
  dword_10AA1DD0 = operator new(0x104u);
  strcpy((char *)dword_10AA1DD0, aImagesZCaripBm);
  dword_10AA1E44 = operator new(0x104u);
  strcpy((char *)dword_10AA1E44, aImagesZCarldBm);
  dword_10AA1EB8 = operator new(0x104u);
  strcpy((char *)dword_10AA1EB8, aImagesZCarm3Bm);
  dword_10AA1F2C = operator new(0x104u);
  strcpy((char *)dword_10AA1F2C, aImagesZCarmnBm);
  dword_10AA1FA0 = operator new(0x104u);
  strcpy((char *)dword_10AA1FA0, aImagesZCarnsBm);
  dword_10AA2014 = operator new(0x104u);
  strcpy((char *)dword_10AA2014, aImagesZCarpjBm);
  dword_10AA2088 = operator new(0x104u);
  strcpy((char *)dword_10AA2088, aImagesZCarpsBm);
  dword_10AA20FC = operator new(0x104u);
  strcpy((char *)dword_10AA20FC, aImagesZCarrsBm);
  dword_10AA2170 = operator new(0x104u);
  strcpy((char *)dword_10AA2170, aImagesZCarspBm);
  dword_10AA21E4 = operator new(0x104u);
  strcpy((char *)dword_10AA21E4, aImagesZCarbbBm);
  dword_10AA2258 = operator new(0x104u);
  strcpy((char *)dword_10AA2258, aImagesLightrBm);
  dword_10AA22CC = operator new(0x104u);
  strcpy((char *)dword_10AA22CC, aImagesLightgBm);
  dword_10AA2340 = operator new(0x104u);
  strcpy((char *)dword_10AA2340, aImagesTire2onB);
  dword_10AA23B4 = operator new(0x104u);
  strcpy((char *)dword_10AA23B4, aImagesTire2off);
  dword_10AA2428 = operator new(0x104u);
  strcpy((char *)dword_10AA2428, aImagesListbox2);
  dword_10AA249C = operator new(0x104u);
  strcpy((char *)dword_10AA249C, aImagesTrakqBmp);
  dword_10AA2510 = operator new(0x104u);
  strcpy((char *)dword_10AA2510, aImagesTrakqBmp_0);
  memset(&unk_10A9D778, 0xFFu, 0x2D0u);
  memset(&unk_10A9E1D0, 0, 0x190u);
  v0 = &unk_10A9D780;
  do {
    *v0 = 0;
    v0 += 3;
  } while ((int)v0 < (int)&unk_10A9DA50);
  v1 = (unk000C8 *)operator new(0xC8u);
  if (v1)
    uC8 = meth_unk000C8_10048710(v1);
  else
    uC8 = 0;
  gUnkC8Ptr6 = uC8;
  gUnkC8Ptr1 = uC8;
  if (!uC8)
    return 0;
  uC8->lpFn0 = s_unk000C8_100491B0;
  if (!gIostreamInit) {
    iostreamInit = (Iostream_init *)operator new(0x400u);
    if (iostreamInit)
      ioStreamInitRes = Iostream_init::Iostream_init(iostreamInit);
    else
      ioStreamInitRes = 0;
    gIostreamInit = ioStreamInitRes;
    if (!ioStreamInitRes)
      sub_1003E260(1);
  }
  strcpy(aCRallyseasonDatFilepath_ptr, kCRallySeasonDatFilepath);
  strcpy(aCRallyghostDatFilepath, aCRallyghostDat);
  sub_1005F800();
  return 1;
}
// 10A9E444: using guessed type int g_aImagesCursorBmFilepath;
// 10A9E4B8: using guessed type int g_aImagesTypeGryBFilepath;
// 10A9E52C: using guessed type int g_aImagesTypeWitBFilepath;
// 10A9E5A0: using guessed type int dword_10A9E5A0;
// 10A9E614: using guessed type int dword_10A9E614;
// 10A9E688: using guessed type int dword_10A9E688;
// 10A9E6FC: using guessed type int dword_10A9E6FC;
// 10A9E770: using guessed type int dword_10A9E770;
// 10A9E7E4: using guessed type int dword_10A9E7E4;
// 10A9E858: using guessed type int dword_10A9E858;
// 10A9E8CC: using guessed type int dword_10A9E8CC;
// 10A9E940: using guessed type int dword_10A9E940;
// 10A9E9B4: using guessed type int dword_10A9E9B4;
// 10A9EA28: using guessed type int dword_10A9EA28;
// 10A9EA9C: using guessed type int dword_10A9EA9C;
// 10A9EB10: using guessed type int dword_10A9EB10;
// 10A9EB84: using guessed type int dword_10A9EB84;
// 10A9EBF8: using guessed type int dword_10A9EBF8;
// 10A9EC6C: using guessed type int dword_10A9EC6C;
// 10A9ECE0: using guessed type int dword_10A9ECE0;
// 10A9ED54: using guessed type int dword_10A9ED54;
// 10A9EDC8: using guessed type int dword_10A9EDC8;
// 10A9EE3C: using guessed type int dword_10A9EE3C;
// 10A9EEB0: using guessed type int dword_10A9EEB0;
// 10A9EF24: using guessed type int dword_10A9EF24;
// 10A9EF98: using guessed type int dword_10A9EF98;
// 10A9F00C: using guessed type int dword_10A9F00C;
// 10A9F080: using guessed type int dword_10A9F080;
// 10A9F0F4: using guessed type int dword_10A9F0F4;
// 10A9F168: using guessed type int dword_10A9F168;
// 10A9F1DC: using guessed type int dword_10A9F1DC;
// 10A9F250: using guessed type int dword_10A9F250;
// 10A9F2C4: using guessed type int dword_10A9F2C4;
// 10A9F338: using guessed type int dword_10A9F338;
// 10A9F3AC: using guessed type int dword_10A9F3AC;
// 10A9F420: using guessed type int dword_10A9F420;
// 10A9F494: using guessed type int dword_10A9F494;
// 10A9F508: using guessed type int dword_10A9F508;
// 10A9F57C: using guessed type int dword_10A9F57C;
// 10A9F5F0: using guessed type int dword_10A9F5F0;
// 10A9F664: using guessed type int dword_10A9F664;
// 10A9F6D8: using guessed type int dword_10A9F6D8;
// 10A9F74C: using guessed type int dword_10A9F74C;
// 10A9F7C0: using guessed type int dword_10A9F7C0;
// 10A9F834: using guessed type int dword_10A9F834;
// 10A9F8A8: using guessed type int dword_10A9F8A8;
// 10A9F91C: using guessed type int dword_10A9F91C;
// 10A9F990: using guessed type int dword_10A9F990;
// 10A9FA04: using guessed type int dword_10A9FA04;
// 10A9FA78: using guessed type int dword_10A9FA78;
// 10A9FAEC: using guessed type int dword_10A9FAEC;
// 10A9FB60: using guessed type int dword_10A9FB60;
// 10A9FBD4: using guessed type int dword_10A9FBD4;
// 10A9FC48: using guessed type int dword_10A9FC48;
// 10A9FCBC: using guessed type int dword_10A9FCBC;
// 10A9FD30: using guessed type int dword_10A9FD30;
// 10A9FDA4: using guessed type int dword_10A9FDA4;
// 10A9FE18: using guessed type int dword_10A9FE18;
// 10A9FE8C: using guessed type int dword_10A9FE8C;
// 10A9FF00: using guessed type int dword_10A9FF00;
// 10A9FF74: using guessed type int dword_10A9FF74;
// 10A9FFE8: using guessed type int dword_10A9FFE8;
// 10AA005C: using guessed type int dword_10AA005C;
// 10AA00D0: using guessed type int dword_10AA00D0;
// 10AA0144: using guessed type int dword_10AA0144;
// 10AA01B8: using guessed type int dword_10AA01B8;
// 10AA022C: using guessed type int dword_10AA022C;
// 10AA02A0: using guessed type int dword_10AA02A0;
// 10AA0314: using guessed type int dword_10AA0314;
// 10AA0388: using guessed type int dword_10AA0388;
// 10AA03FC: using guessed type int dword_10AA03FC;
// 10AA0470: using guessed type int dword_10AA0470;
// 10AA04E4: using guessed type int dword_10AA04E4;
// 10AA0558: using guessed type int dword_10AA0558;
// 10AA05CC: using guessed type int dword_10AA05CC;
// 10AA0640: using guessed type int dword_10AA0640;
// 10AA06B4: using guessed type int dword_10AA06B4;
// 10AA0728: using guessed type int dword_10AA0728;
// 10AA079C: using guessed type int dword_10AA079C;
// 10AA0810: using guessed type int dword_10AA0810;
// 10AA0884: using guessed type int dword_10AA0884;
// 10AA08F8: using guessed type int dword_10AA08F8;
// 10AA096C: using guessed type int dword_10AA096C;
// 10AA09E0: using guessed type int dword_10AA09E0;
// 10AA0A54: using guessed type int dword_10AA0A54;
// 10AA0AC8: using guessed type int dword_10AA0AC8;
// 10AA0B3C: using guessed type int dword_10AA0B3C;
// 10AA0BB0: using guessed type int dword_10AA0BB0;
// 10AA0C24: using guessed type int dword_10AA0C24;
// 10AA0C98: using guessed type int dword_10AA0C98;
// 10AA0D0C: using guessed type int dword_10AA0D0C;
// 10AA0D80: using guessed type int dword_10AA0D80;
// 10AA0E68: using guessed type int dword_10AA0E68;
// 10AA0EDC: using guessed type int dword_10AA0EDC;
// 10AA0F50: using guessed type int dword_10AA0F50;
// 10AA0FC4: using guessed type int dword_10AA0FC4;
// 10AA1038: using guessed type int dword_10AA1038;
// 10AA10AC: using guessed type int dword_10AA10AC;
// 10AA1120: using guessed type int dword_10AA1120;
// 10AA1194: using guessed type int dword_10AA1194;
// 10AA1208: using guessed type int dword_10AA1208;
// 10AA127C: using guessed type int dword_10AA127C;
// 10AA12F0: using guessed type int dword_10AA12F0;
// 10AA1364: using guessed type int dword_10AA1364;
// 10AA13D8: using guessed type int dword_10AA13D8;
// 10AA144C: using guessed type int dword_10AA144C;
// 10AA14C0: using guessed type int dword_10AA14C0;
// 10AA1534: using guessed type int dword_10AA1534;
// 10AA15A8: using guessed type int dword_10AA15A8;
// 10AA161C: using guessed type int dword_10AA161C;
// 10AA1690: using guessed type int dword_10AA1690;
// 10AA1704: using guessed type int dword_10AA1704;
// 10AA1778: using guessed type int dword_10AA1778;
// 10AA17EC: using guessed type int dword_10AA17EC;
// 10AA1860: using guessed type int dword_10AA1860;
// 10AA18D4: using guessed type int dword_10AA18D4;
// 10AA1948: using guessed type int dword_10AA1948;
// 10AA19BC: using guessed type int dword_10AA19BC;
// 10AA1A30: using guessed type int dword_10AA1A30;
// 10AA1AA4: using guessed type int dword_10AA1AA4;
// 10AA1B18: using guessed type int dword_10AA1B18;
// 10AA1B8C: using guessed type int dword_10AA1B8C;
// 10AA1C00: using guessed type int dword_10AA1C00;
// 10AA1C74: using guessed type int dword_10AA1C74;
// 10AA1CE8: using guessed type int dword_10AA1CE8;
// 10AA1D5C: using guessed type int dword_10AA1D5C;
// 10AA1DD0: using guessed type int dword_10AA1DD0;
// 10AA1E44: using guessed type int dword_10AA1E44;
// 10AA1EB8: using guessed type int dword_10AA1EB8;
// 10AA1F2C: using guessed type int dword_10AA1F2C;
// 10AA1FA0: using guessed type int dword_10AA1FA0;
// 10AA2014: using guessed type int dword_10AA2014;
// 10AA2088: using guessed type int dword_10AA2088;
// 10AA20FC: using guessed type int dword_10AA20FC;
// 10AA2170: using guessed type int dword_10AA2170;
// 10AA21E4: using guessed type int dword_10AA21E4;
// 10AA2258: using guessed type int dword_10AA2258;
// 10AA22CC: using guessed type int dword_10AA22CC;
// 10AA2340: using guessed type int dword_10AA2340;
// 10AA23B4: using guessed type int dword_10AA23B4;
// 10AA2428: using guessed type int dword_10AA2428;
// 10AA249C: using guessed type int dword_10AA249C;
// 10AA2510: using guessed type int dword_10AA2510;
// 10AA29F8: using guessed type __int16 word_10AA29F8;
// 10AA29FC: using guessed type __int16 word_10AA29FC;

//----- (1005F4E0) --------------------------------------------------------
int graphics_1005F4E0() {
  int v0;                  // edi
  IDirectDrawSurface **v1; // esi

  v0 = 0;
  if (gSurfaceCount) {
    v1 = &gDDSurface;
    do {
      if (!(*v1)->lpVtbl->Restore(*v1))
        DDCopyBitmap(*v1, (LPCSTR)v1[28]);
      ++v0;
      v1 += 29;
    } while (v0 < gSurfaceCount);
  }
  return 1;
}

//----- (1005F530) --------------------------------------------------------
IDirectDraw2 *graphics_1005F530() {
  IDirectDraw2 *result;          // eax
  int i;                         // edi
  IDirectDrawSurface *ddSurface; // esi

  result = gDDraw2;
  if (gDDraw2) {
    i = 0;
    if (gSurfaceCount) {
      ddSurface = (IDirectDrawSurface *)&gDDSurface;
      do {
        result = (IDirectDraw2 *)ddSurface->lpVtbl;
        if (ddSurface->lpVtbl) {
          result = (IDirectDraw2 *)result->lpVtbl->Release((IDirectDraw2 *)ddSurface->lpVtbl);
          ddSurface->lpVtbl = 0;
        }
        ++i;
        ddSurface += 0x1D;
      } while (i < gSurfaceCount);
    }
  }
  return result;
}

//----- (1005F580) --------------------------------------------------------
void __noreturn graphics_1005F580() {
  graphics_1005F530();
  exit(0);
}

//----- (1005F5A0) --------------------------------------------------------
int __cdecl graphics_1005F5A0(int a1, int a2, unsigned __int16 a3, int *a4, int a5) {
  int v5;     // eax
  int v6;     // ebp
  int v7;     // esi
  int v8;     // edi
  int v9;     // ebx
  int v10;    // eax
  int v11;    // ecx
  int v12;    // esi
  int result; // eax
  int v14[2]; // [esp+14h] [ebp-10h] BYREF
  int v15;    // [esp+1Ch] [ebp-8h]
  int v16;    // [esp+20h] [ebp-4h]
  DWORD v17;  // [esp+38h] [ebp+14h]

  v5 = a5;
  LOBYTE(v5) = a5 | 0x10;
  v17 = v5;
  v6 = a1;
  v7 = a2;
  do {
    v8 = *a4;
    v14[0] = *a4;
    v9 = a4[1];
    v14[1] = v9;
    v10 = a4[2];
    v15 = v10;
    v11 = a4[3];
    v16 = v11;
    if (a3 == 1) {
      v12 = v11 + v7;
      if (v10 + v6 > 640) {
        v15 = 640 - v6;
        if (640 - v6 < v8)
          v15 = v8;
      }
      if (v12 > 480) {
        v16 = 480 - v12 + v11;
        if (v16 < v9)
          v16 = v9;
      }
    }
    v7 = a2;
    v6 = a1;
    result = gUnk334->ddCapsFlags->lpDirectDrawSurface1->lpVtbl->BltFast(
        gUnk334->ddCapsFlags->lpDirectDrawSurface1,
        a1,
        a2,
        (&gDDSurface)[29 * a3],
        (LPRECT)v14,
        v17);
    if (!result)
      break;
    if (result == -2005532222) {
      result = graphics_1005F4E0();
      if (result)
        break;
    }
  } while (result == -2005532132);
  return result;
}

//----- (1005F690) --------------------------------------------------------
int DDrawDoInit() {
  int v0;                        // ebp
  IDirectDraw2 *lpDDraw2;        // eax
  IDirectDrawSurface *lpSurface; // eax
  char **imagesWork1aBmFilepath; // ebx
  IDirectDrawSurface *surface;   // eax
  DDSURFACEDESC a5;              // [esp+10h] [ebp-16Ch] BYREF
  char Buffer[256];              // [esp+7Ch] [ebp-100h] BYREF

  v0 = 0;
  lpDDraw2 = gUnk334->ddCapsFlags->? ;
  gDDraw2 = lpDDraw2;
  if (dword_10AA2A6C) {
    lpSurface = DDrawCreateSurface(lpDDraw2, filepath, 0, 0, &a5);
    gDDSurface = lpSurface;
    if (gImagesWork1aBmFilepath && !lpSurface) {
      sprintf(Buffer, aDdrawDoinitLoa);
      graphics_1005F580();
    }
    gUnkC8Ptr1->lpVtbl->meth8(gUnkC8Ptr1);
    graphics_1005F5A0(0, 0, 0, dword_100AB56C, dword_100AB57C[0]);
    gUnkC8Ptr1->lpVtbl->meth5(gUnkC8Ptr1);
    if (gDDSurface) {
      gDDSurface->lpVtbl->Release(gDDSurface);
      gDDSurface = 0;
    }
  }
  imagesWork1aBmFilepath = &gImagesWork1aBmFilepath;
  ++dword_10AA2A6C;
  do {
    if (*imagesWork1aBmFilepath) {
      surface = DDrawCreateSurface(gDDraw2, *imagesWork1aBmFilepath, 0, 0, &a5);
      *(imagesWork1aBmFilepath - 28) = (char *)surface;
      if (*imagesWork1aBmFilepath && !surface) {
        sprintf(Buffer, "DDraw_DoInit: Bitmap %d failed to load!", v0);
        graphics_1005F580();
      }
      ++gSurfaceCount;
      qmemcpy(imagesWork1aBmFilepath - 27, &a5, 0x6Cu);
      graphics_1000BA40((LPDIRECTDRAWSURFACE) * (imagesWork1aBmFilepath - 28), 0xFF00u);
    }
    imagesWork1aBmFilepath += 29;
    ++v0;
  } while ((int)imagesWork1aBmFilepath < (int)&unk_10AA2584);
  return 1;
}
// 10AA2A6C: using guessed type int dword_10AA2A6C;

//----- (1005F800) --------------------------------------------------------
int sub_1005F800() {
  int v0;      // edi
  _DWORD *v1;  // ecx
  int v2;      // eax
  int v3;      // esi
  int v4;      // edi
  _DWORD *v5;  // ecx
  int v6;      // esi
  int v7;      // eax
  int v8;      // edi
  _DWORD *v9;  // ecx
  int v10;     // esi
  int v11;     // edx
  int v12;     // edi
  _DWORD *v13; // ecx
  int result;  // eax
  int v15;     // esi
  int v16;     // edx

  v0 = 0;
  v1 = &unk_10A9D184;
  do {
    v1 += 4;
    v2 = 16 * (v0 % 8);
    v3 = 16 * (v0 / 8);
    *(v1 - 5) = v2;
    *(v1 - 4) = v3;
    *(v1 - 3) = v2 + 16;
    *(v1 - 2) = v3 + 16;
    ++v0;
  } while ((int)v1 < (int)&unk_10A9D5C4);
  v4 = 0;
  v5 = &unk_10A9D63C;
  do {
    v5 += 4;
    v6 = 44 * (v4 / 5);
    v7 = 39 * (v4 % 5);
    *(v5 - 5) = v7;
    *(v5 - 4) = v6;
    *(v5 - 3) = v7 + 39;
    *(v5 - 2) = v6 + 44;
    ++v4;
  } while ((int)v5 < (int)&unk_10A9D77C);
  v8 = 0;
  v9 = &unk_10A9DA54;
  do {
    v9 += 4;
    v10 = (v8 / 5) << 7;
    v11 = (v8 % 5) << 7;
    *(v9 - 5) = v11;
    *(v9 - 4) = v10;
    *(v9 - 3) = v11 + 128;
    *(v9 - 2) = v10 + 128;
    ++v8;
  } while ((int)v9 < (int)&unk_10A9DB44);
  v12 = 0;
  v13 = &unk_10A9DB44;
  do {
    v13 += 4;
    result = v12 / 3;
    v15 = (v12 / 3) << 7;
    v16 = (v12 % 3) << 7;
    *(v13 - 5) = v16;
    *(v13 - 4) = v15;
    ++v12;
    *(v13 - 3) = v16 + 128;
    *(v13 - 2) = v15 + 128;
  } while (v12 + 15 < 24);
  return result;
}

//----- (1005F940) --------------------------------------------------------
int sub_1005F940() {
  int v0;              // eax
  int v1;              // esi
  __int16 v2;          // cx
  int v3;              // edx
  __int16 *v4;         // eax
  int v5;              // ecx
  int v6;              // edx
  unsigned __int16 v7; // si
  unsigned __int8 v8;  // cl
  int v9;              // eax
# 505 * v10;           // esi
  int v11;             // edx
  int result;          // eax

  if (!gGameMode1)
    qmemcpy(&unk_10AA25D0, &gGameMode1, 0x118u);
  gChosenWeather0 = gChosenWeather2;
  LOBYTE(dword_10AA28B8) = dword_10220B24;
  v0 = dword_10220B28;
  dword_10AA28A0 = dword_10220B2C;
  gChosenTrack = gChosenTrack1;
  v1 = dword_10220B2C + 1;
  dword_10AA28C0 = dword_10220B38;
  v2 = word_10220B40;
  *((_BYTE *)&dword_10AA26E8 + dword_10220B28) = byte_10220B3C + 1;
  v3 = dword_10220B44;
  dword_10AA28A4 = v0;
  *((_WORD *)&dword_10A9D068 + v0) = v2;
  *(_DWORD *)&dword_10AA28C8 = v3;
  sprintf(byte_10AA2518, "%d", v1);
  sprintf(byte_10A9D618, "%d", dword_10AA28A4 + 1);
  qmemcpy(flt_10AA25A0, &unk_10220B48, sizeof(flt_10AA25A0));
  v4 = &word_10AA270E[4 * (char)dword_10AA28B8];
  v5 = 0;
  v6 = 4;
  do {
    v7 = *v4++;
    v5 += v7;
    --v6;
  } while (v6);
  dword_10AA28C4 = v5;
  v8 = dword_10AA26F4[0];
  if (BYTE1(dword_10AA26F4[0]) || gGameMode == GAME_MODE_5 || gGameMode1)
    return 1;
  if (LOBYTE(dword_10AA26F4[0]) > (unsigned __int8)byte_10A9DBDC ||
      !LOBYTE(dword_10AA26F4[0]) && byte_10A9DBDC) {
    gGameMode = GAME_MODE_5;
    if (LOBYTE(dword_10AA26F4[0]) || !byte_10A9DBDC) {
      sub_1005FBC0(1);
    } else {
      if (dword_10220B2C < 5)
        dword_10AA28B0 = 1;
      sub_1005FBC0(0);
    }
    if (dword_10220B24 < 4 && dword_10220B2C < 1)
      dword_10AA28B0 = 1;
    gUnkC8Ptr1->field_68 = 0;
    gUnkC8Ptr1->lpVtbl->meth6(gUnkC8Ptr1, 0);
    result = 0;
  } else {
    gGameMode = GAME_MODE_0;
    dword_10AA28B4 = 1;
    v9 = 0;
    while (1) {
      v10 = dword_10ACED34;
      *((_BYTE *)&dword_10AA26F4[v8] + v9 + 2) = 0;
      word_10AA270E[4 * LOBYTE(dword_10AA26F4[0]) + v9] = 0;
      dword_10AA2740[4 * LOBYTE(dword_10AA26F4[0]) + v9] = 0;
      *((_BYTE *)v10 + 4 * *((unsigned __int8 *)v10 + 4) + v9 + 6) = 0;
      *(_BYTE *)(v9 + 4 * *(unsigned __int8 *)(dword_10AD189C + 4) + dword_10AD189C + 6) = 0;
      *((_WORD *)dword_10ACED34 + 4 * *((unsigned __int8 *)dword_10ACED34 + 4) + v9 + 15) = 0;
      *(_WORD *)(dword_10AD189C + 2 * (v9 + 4 * *(unsigned __int8 *)(dword_10AD189C + 4)) + 30) = 0;
      *((_DWORD *)dword_10ACED34 + 4 * *((unsigned __int8 *)dword_10ACED34 + 4) + v9 + 20) = 0;
      v11 = v9 + 4 * *(unsigned __int8 *)(dword_10AD189C + 4) + 20;
      ++v9;
      *(_DWORD *)(dword_10AD189C + 4 * v11) = 0;
      if (v9 >= 4)
        break;
      v8 = dword_10AA26F4[0];
    }
    result = 1;
  }
  return result;
}
// 100B380C: using guessed type int gChosenTrack;
// 10220B20: using guessed type int gGameMode1;
// 10220B24: using guessed type int dword_10220B24;
// 10220B28: using guessed type int dword_10220B28;
// 10220B2C: using guessed type int dword_10220B2C;
// 10220B30: using guessed type int gChosenTrack1;
// 10220B34: using guessed type int gChosenWeather2;
// 10220B38: using guessed type int dword_10220B38;
// 10220B3C: using guessed type char byte_10220B3C;
// 10220B40: using guessed type __int16 word_10220B40;
// 10220B44: using guessed type int dword_10220B44;
// 1022B350: using guessed type int gChosenWeather0;
// 10A9D068: using guessed type int dword_10A9D068;
// 10A9DBDC: using guessed type char byte_10A9DBDC;
// 10AA26E8: using guessed type int dword_10AA26E8;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA270E: using guessed type __int16 word_10AA270E[];
// 10AA28A0: using guessed type int dword_10AA28A0;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28B0: using guessed type int dword_10AA28B0;
// 10AA28B4: using guessed type int dword_10AA28B4;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA28C0: using guessed type int dword_10AA28C0;
// 10AD189C: using guessed type int dword_10AD189C;

//----- (1005FBC0) --------------------------------------------------------
int __cdecl sub_1005FBC0(int a1) {
  int v1;              // ecx
  int v2;              // edx
  __int16 *v3;         // eax
  unsigned __int16 v4; // si
  int result;          // eax

  LOBYTE(dword_10AA28B8) = dword_10AA26F4[0];
  gTransmissionType = gTransmissionType0;
  gSuspensionType = gSuspensionType0;
  dword_10AA28A4 = BYTE1(dword_10AA26F4[0]);
  gConfigJoystickIndex = gConfigJoystickIndex0;
  dword_10AA28A0 = dword_10AA26F0;
  gTireType = gTireType0;
  switch (gConfigJoystickIndex0) {
  case 1:
    gConfigJoystickPtr = &gConfig.joystick1;
    break;
  case 2:
    gConfigJoystickPtr = &gConfig.joystick2;
    break;
  case 3:
    gConfigJoystickPtr = &gConfig.joystick3;
    break;
  default:
    gConfigJoystickPtr = (BossRallyConfigJoystick *)&gConfig;
    break;
  }
  sprintf(byte_10AA2518, "%d", dword_10AA26F0 + 1);
  sprintf(byte_10A9D618, "%d", dword_10AA28A4 + 1);
  dword_10AA28AC = dword_10AA28A4;
  if (a1) {
    v1 = 0;
    v2 = 4;
    v3 = &word_10AA270E[4 * (char)dword_10AA28B8];
    do {
      v4 = *v3++;
      v1 += v4;
      --v2;
    } while (v2);
    dword_10AA28C4 = v1;
  }
  dword_10AA2A10 |= (unsigned __int16)dword_10AA27E0;
  result = HIWORD(dword_10AA27E0) | dword_10AA2A14;
  dword_10AA2A14 = result;
  return result;
}
// 10094354: using guessed type int gTransmissionType;
// 10094358: using guessed type int gSuspensionType;
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA270E: using guessed type __int16 word_10AA270E[];
// 10AA27E0: using guessed type int dword_10AA27E0;
// 10AA27EC: using guessed type int gTransmissionType0;
// 10AA27F0: using guessed type int gTireType0;
// 10AA27F4: using guessed type int gSuspensionType0;
// 10AA27F8: using guessed type int gConfigJoystickIndex0;
// 10AA28A0: using guessed type int dword_10AA28A0;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28AC: using guessed type int dword_10AA28AC;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA2A10: using guessed type int dword_10AA2A10;
// 10AA2A14: using guessed type int dword_10AA2A14;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;

//----- (1005FCF0) --------------------------------------------------------
int sub_1005FCF0() {
  int v0;     // eax
  int v1;     // edx
  int result; // eax

  gTransmissionType0 = gTransmissionType;
  gTireType0 = gTireType;
  dword_10AA26F0 = dword_10AA28A0;
  gSuspensionType0 = gSuspensionType;
  LOBYTE(dword_10AA26F4[0]) = dword_10AA28B8;
  gConfigJoystickIndex0 = gConfigJoystickIndex;
  BYTE1(dword_10AA26F4[0]) = dword_10AA28A4;
  if (gGameMode == GAME_MODE_0) {
    v0 = 2 * ((unsigned __int8)dword_10AA28A4 + 12 * (unsigned __int8)dword_10AA28B8);
    v1 = (unsigned __int8)byte_100B3821[v0];
    gChosenTrack = (unsigned __int8)byte_100B3820[v0];
    gChosenWeather0 = v1;
  }
  dword_10AA2A10 |= (unsigned __int16)dword_10AA27E0;
  result = HIWORD(dword_10AA27E0) | dword_10AA2A14;
  dword_10AA2A14 = result;
  return result;
}
// 10094354: using guessed type int gTransmissionType;
// 10094358: using guessed type int gSuspensionType;
// 100B380C: using guessed type int gChosenTrack;
// 1022B350: using guessed type int gChosenWeather0;
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AA26F4: using guessed type int dword_10AA26F4[];
// 10AA27E0: using guessed type int dword_10AA27E0;
// 10AA27EC: using guessed type int gTransmissionType0;
// 10AA27F0: using guessed type int gTireType0;
// 10AA27F4: using guessed type int gSuspensionType0;
// 10AA27F8: using guessed type int gConfigJoystickIndex0;
// 10AA28A0: using guessed type int dword_10AA28A0;
// 10AA28A4: using guessed type int dword_10AA28A4;
// 10AA28B8: using guessed type int dword_10AA28B8;
// 10AA2A10: using guessed type int dword_10AA2A10;
// 10AA2A14: using guessed type int dword_10AA2A14;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;

//----- (1005FDB0) --------------------------------------------------------
int sub_1005FDB0() {
  int v0;         // ebx
  char *v1;       // esi
  const char *v2; // eax
  const char *v3; // eax
  int v4;         // edi
  char *v5;       // esi
  const char *v6; // eax
  int result;     // eax
  const char *v8; // eax

  memset(&unk_10B4E7A8, 0, 0xDCu);
  memset(&unk_10B4E910, 0, 0x158u);
  v0 = 0;
  v1 = byte_10B4E7AC;
  do {
    if ((int)v1 >= (int)&unk_10B4E83C) {
      *((_DWORD *)v1 - 1) = (unsigned __int8)(v0 - 126);
      switch ((char)v0) {
      case 4:
        v3 = GetStringWithIndex(0xC4u);
        goto LABEL_11;
      case 5:
        v3 = GetStringWithIndex(0xC5u);
        goto LABEL_11;
      case 6:
        v3 = GetStringWithIndex(0xC6u);
        goto LABEL_11;
      case 7:
        v3 = GetStringWithIndex(0xC7u);
        goto LABEL_11;
      case 8:
        v3 = GetStringWithIndex(0xC8u);
        goto LABEL_11;
      case 9:
        v3 = GetStringWithIndex(0xC9u);
      LABEL_11:
        sprintf(v1, v3);
        break;
      default:
        break;
      }
    } else {
      *((_DWORD *)v1 - 1) = v0;
      v2 = GetStringWithIndex(0xC3u);
      sprintf(v1, v2, v0);
    }
    v1 += 36;
    ++v0;
  } while ((int)v1 < (int)byte_10B4E914);
  v4 = 0;
  v5 = byte_10B4E914;
  do {
    if ((int)v5 >= (int)&unk_10B4FB14) {
      *((_DWORD *)v5 - 1) = (unsigned __int8)v4;
      result = (unsigned __int8)v4 - 128;
      switch ((char)v4) {
      case -128:
        v8 = GetStringWithIndex(0xC4u);
        goto LABEL_23;
      case -127:
        v8 = GetStringWithIndex(0xC5u);
        goto LABEL_23;
      case -126:
        v8 = GetStringWithIndex(0xC6u);
        goto LABEL_23;
      case -125:
        v8 = GetStringWithIndex(0xC7u);
        goto LABEL_23;
      case -124:
        v8 = GetStringWithIndex(0xC8u);
        goto LABEL_23;
      case -123:
        v8 = GetStringWithIndex(0xC9u);
      LABEL_23:
        result = sprintf(v5, v8);
        break;
      default:
        break;
      }
    } else {
      *((_DWORD *)v5 - 1) = v4;
      v6 = GetStringWithIndex(0xC3u);
      result = sprintf(v5, v6, v4);
    }
    v5 += 36;
    ++v4;
  } while ((int)v5 < (int)&unk_10B4FBEC);
  return result;
}

//----- (1005FF30) --------------------------------------------------------
int sub_1005FF30() {
  int result; // eax

  result = 0;
  memset(byte_10AA3288, 0, sizeof(byte_10AA3288));
  memset(dword_10AA2A80, 0, 0x100u);
  memset(dword_10AA2E88, 0, 0x100u);
  return result;
}

//----- (1005FF60) --------------------------------------------------------
int sub_1005FF60() {
  int result; // eax
  int v1;     // ecx
  char *v2;   // edx

  for (result = 0; result < 256; ++result) {
    dword_10AA2A80[result] = (char *)(dword_10AA2E88[result] == 0);
    v1 = ((unsigned __int8)byte_10AA3288[result] >> 7) & 1;
    v2 = (char *)(v1 & (unsigned int)dword_10AA2A80[result]);
    dword_10AA2E88[result] = (char *)v1;
    dword_10AA2A80[result] = v2;
  }
  return result;
}

//----- (1005FFB0) --------------------------------------------------------
HRESULT sub_1005FFB0() {
  HRESULT result; // eax

  result = input_100771B0(byte_10AA3288);
  if (result >= 0)
    result = sub_1005FF60();
  return result;
}

//----- (1005FFD0) --------------------------------------------------------
int sub_1005FFD0() {
  int result; // eax
  char **v1;  // ecx

  result = 0;
  v1 = dword_10AA2A80;
  while (!*v1) {
    ++v1;
    ++result;
    if ((int)v1 >= (int)&gUnk54Ptr)
      return -1;
  }
  return result;
}

//----- (1005FFF0) --------------------------------------------------------
int sub_1005FFF0() {
  int result; // eax
  int v1;     // ecx
  int v2;     // edx

  for (result = 0; result < 4; ++result) {
    dword_10AA33D0[result] = dword_10AA3388[result] == 0;
    v1 = dword_10AA33C0[result];
    v2 = dword_10AA33D0[result];
    dword_10AA3388[result] = v1;
    dword_10AA33D0[result] = v1 & v2;
  }
  return result * 4;
}
// 10AA3388: using guessed type int dword_10AA3388[];
// 10AA33C0: using guessed type int dword_10AA33C0[];
// 10AA33D0: using guessed type int dword_10AA33D0[];

//----- (10060030) --------------------------------------------------------
int __cdecl ShowMessageBoxAA(HWND hWnd, HRESULT hr, LPCSTR lpText) {
  const CHAR *caption; // eax

  caption = GetStringWithIndex(0xAAu);
  return MessageBoxA(hWnd, lpText, caption, 0);
}

//----- (10060060) --------------------------------------------------------
LRESULT __stdcall s_IostreamInit_10060060(
    Iostream_init *iostreamInit, HWND hWnd, int a3, WPARAM wParam, LPARAM lParam) {
  LRESULT v5;   // edi
  unk00054 *v7; // ecx
  BOOL v8;      // eax

  v5 = 1;
  if ((unsigned int)a3 > 0x102) {
    if ((unsigned int)a3 <= 0x211) {
      if (a3 != 529) {
        if (a3 == 273) {
          if ((_WORD)wParam == 0x9C41) {
              dword_10AA33E4 = 27;
              return 1;
          }
        } else if (a3 == 274) {
          v5 = DefWindowProcA(hWnd, 0x112u, wParam, lParam);
          if (IsWindow(hWnd)) {
              if (gUnk54Ptr) {
                  meth_unk00054_10060750(gUnk54Ptr, (int)hWnd);
                  return v5;
              }
          }
        }
        return v5;
      }
      goto LABEL_24;
    }
    if ((unsigned int)a3 > 0x231) {
      if (a3 != 562) {
        if (a3 != 1024)
          return v5;
        goto LABEL_28;
      }
    } else {
      if (a3 == 561) {
      LABEL_24:
        v7 = gUnk54Ptr;
        dword_10AA33E0 = 1;
        if (gUnk54Ptr) {
        LABEL_25:
          meth_unk00054_10060750(v7, (int)hWnd);
          return 1;
        }
        return v5;
      }
      if (a3 != 530)
        return 1;
    }
    if (GetActiveWindow() != hWnd || (v8 = IsIconic(hWnd), dword_10AA33E0 = 0, v8))
      dword_10AA33E0 = 1;
    PostMessageA(hWnd, 0x400u, 0, 0);
    return v5;
  }
  if (a3 == 258) {
    if (!dword_10AA2844 && byte_10AA3350 >= 0 && (byte_10AA3358 & 0x80) == 0 &&
        (byte_10AA3353 & 0x80) == 0 && (byte_10AA3355 & 0x80) == 0) {
      dword_10AA33E4 = wParam;
      return 1;
    }
    return v5;
  }
  if (a3 == 6) {
    dword_10AA33E0 = wParam == 0;
  LABEL_28:
    v7 = gUnk54Ptr;
    if (gUnk54Ptr)
      goto LABEL_25;
  }
  return v5;
}
// 10AA3350: using guessed type char byte_10AA3350;
// 10AA3353: using guessed type char byte_10AA3353;
// 10AA3355: using guessed type char byte_10AA3355;
// 10AA3358: using guessed type char byte_10AA3358;
// 10AA33E0: using guessed type int dword_10AA33E0;
// 10AA33E4: using guessed type int dword_10AA33E4;

//----- (10060210) --------------------------------------------------------
int __stdcall sub_10060210(HWND a1) {
  dword_10AA33B8 = gWidth;
  gUnk54Ptr->field_0 = gWidth / 2;
  dword_10AA33B4 = gHeight;
  *(_DWORD *)gUnk54Ptr->gap4 = gHeight / 2;
  memset(&dword_10AA3398, 0, 0x1Cu);
  return 1;
}
// 100A81C0: using guessed type int gWidth;
// 100A81C4: using guessed type int gHeight;
// 10AA3398: using guessed type int dword_10AA3398;
// 10AA33B4: using guessed type int dword_10AA33B4;
// 10AA33B8: using guessed type int dword_10AA33B8;

//----- (10060260) --------------------------------------------------------
LPDIRECTINPUTDEVICEA sub_10060260() {
  return meth_unk00054_100603A0(gUnk54Ptr, gHwnd);
}

//----- (10060280) --------------------------------------------------------
unk00054 *__thiscall meth_unk00054_init(unk00054 *this) {
  unk00054 *result; // eax

  result = this;
  this->lpDIDeviceA = 0;
  this->field_2C = 0;
  this->field_30 = 0;
  this->field_34 = 0;
  this->field_38 = 0;
  *(_DWORD *)this->gap3C = 0;
  *(_DWORD *)&this->gap3C[4] = 0;
  *(_DWORD *)&this->gap3C[8] = 0;
  *(_DWORD *)&this->gap3C[12] = 0;
  *(_DWORD *)&this->gap3C[16] = 0;
  return result;
}

//----- (100602B0) --------------------------------------------------------
LPDIRECTINPUTDEVICEA __thiscall meth_unk00054_100602B0(unk00054 *this) {
  LPDIRECTINPUTDEVICEA result; // eax

  result = this->lpDIDeviceA;
  if (result) {
    result->lpVtbl->Unacquire(result);
    result = (LPDIRECTINPUTDEVICEA)this->lpDIDeviceA->lpVtbl->Release(this->lpDIDeviceA);
    this->lpDIDeviceA = 0;
  }
  return result;
}

//----- (100602E0) --------------------------------------------------------
int __thiscall meth_unk00054_DICreateMouseDevice(unk00054 *this, HWND hWnd) {
  LPDIRECTINPUTDEVICEA *diDeviceA; // esi
  HRESULT hr;                      // edi
  const CHAR *v4;                  // eax
  int result;                      // eax
  HRESULT hr_2;                    // edi
  const CHAR *v7;                  // eax
  HRESULT hr_1;                    // esi
  const CHAR *v9;                  // eax

  diDeviceA = &this->lpDIDeviceA;
  hr = g_DirectInputA->lpVtbl->CreateDevice(
      g_DirectInputA, &CLSID_GUID_SysMouse, &this->lpDIDeviceA, 0);
  if (hr >= 0) {
    hr_2 = (*diDeviceA)->lpVtbl->SetDataFormat(*diDeviceA, &g_diMouseDataFormat);
    if (hr_2 >= 0) {
      hr_1 =
          (*diDeviceA)
              ->lpVtbl->SetCooperativeLevel(*diDeviceA, hWnd, DISCL_FOREGROUND | DISCL_EXCLUSIVE);
      if (hr_1 >= 0) {
        result = 1;
      } else {
        v9 = GetStringWithIndex(0xAEu);
        ShowMessageBoxAA(hWnd, hr_1, v9);
        result = 0;
      }
    } else {
      v7 = GetStringWithIndex(0xADu);
      ShowMessageBoxAA(hWnd, hr_2, v7);
      result = 0;
    }
  } else {
    v4 = GetStringWithIndex(0xACu);
    ShowMessageBoxAA(hWnd, hr, v4);
    result = 0;
  }
  return result;
}

//----- (100603A0) --------------------------------------------------------
LPDIRECTINPUTDEVICEA __thiscall meth_unk00054_100603A0(unk00054 *this, HWND hwnd) {
  LPDIRECTINPUTDEVICEA result; // eax
  DWORD v4;                    // eax
  int v5;                      // ebx
  int v6;                      // eax
  int v7;                      // ebx
  int v8;                      // edi
  char v9;                     // al
  char v10;                    // cl
  char v11;                    // dl
  char v12;                    // bl
  int v13;                     // eax
  int v14;                     // ecx
  int v15;                     // ecx
  char v16;                    // dl
  char v17;                    // al
  char v18;                    // dl
  int v19[3];                  // [esp+24h] [ebp-10h] BYREF
  int v20;                     // [esp+30h] [ebp-4h]

  result = dword_10AA2844;
  if (dword_10AA2844)
    return result;
  v4 = getTicks();
  v5 = dword_10AA33AC;
  dword_10AA33AC = v4;
  dword_10AA33B0 += v4 - v5;
  if (dword_10AA33B0 > 120)
    dword_10AA33A8 = 1;
  result = this->lpDIDeviceA;
  if (!result)
    return result;
  result->lpVtbl->Acquire(this->lpDIDeviceA);
  while (this->lpDIDeviceA->lpVtbl->GetDeviceState(this->lpDIDeviceA, 16, v19) == -2147024866) {
    if (this->lpDIDeviceA->lpVtbl->Acquire(this->lpDIDeviceA) < 0)
      break;
    this->lpDIDeviceA->lpVtbl->Acquire(this->lpDIDeviceA);
  }
  v6 = v19[0] + this->field_0;
  v7 = v19[1] + *(_DWORD *)this->gap4;
  v8 = v19[2] + *(_DWORD *)&this->gap4[4];
  this->field_0 = v6;
  *(_DWORD *)this->gap4 = v7;
  *(_DWORD *)&this->gap4[4] = v8;
  if (v6 >= 0) {
    if (v6 >= dword_10AA33B8)
      this->field_0 = dword_10AA33B8;
  } else {
    this->field_0 = 0;
  }
  if (v7 >= 0) {
    if (v7 >= dword_10AA33B4)
      *(_DWORD *)this->gap4 = dword_10AA33B4;
  } else {
    *(_DWORD *)this->gap4 = 0;
  }
  v9 = v20 & 0x80;
  v10 = BYTE1(v20) & 0x80;
  v11 = BYTE2(v20) & 0x80;
  v12 = HIBYTE(v20) & 0x80;
  this->gap4[32] = v20 & 0x80;
  this->gap4[33] = v10;
  this->gap4[34] = v11;
  this->gap4[35] = v12;
  if (v9 || v10 || v11 || v12)
    *(_DWORD *)&this->gap3C[16] = 1;
  if (dword_10AA2BDC)
    pm_sub_10002930();
  if (dword_10AA2BE0)
    pm_sub_10002970();
  v13 = dword_10AA33A8;
  if (dword_10AA33A8) {
    if (byte_10AA3350 < 0) {
      dword_10AA3398 = 1;
      word_100AB3DC = -1;
      dword_10AA33B0 = 0;
    }
    if ((byte_10AA3358 & 0x80) != 0) {
      dword_10AA339C = 1;
      word_100AB3DC = 1;
      dword_10AA33B0 = 0;
    }
  }
  if (dword_10AA2DAC) {
    v14 = 1;
    word_100AB3DC = -1;
    dword_10AA33B0 = 0;
  } else {
    v14 = dword_10AA33A0;
  }
  if (dword_10AA2DB4) {
    dword_10AA33A4 = 1;
    word_100AB3DC = 1;
    dword_10AA33B0 = 0;
  }
  if (v14) {
    v13 = 0;
    this->gap4[32] = 1;
    *(_DWORD *)&this->gap3C[16] = 0;
    dword_10AA33A8 = 0;
  }
  if (dword_10AA33A4) {
    v13 = 0;
    this->gap4[33] = 1;
    *(_DWORD *)&this->gap3C[16] = 0;
    dword_10AA33A8 = 0;
  }
  if (v13) {
    if (dword_10AA3398) {
      --word_10AA286C;
      dword_10AA33A8 = 0;
    }
    if (dword_10AA339C) {
      ++word_10AA286C;
      dword_10AA33A8 = 0;
    }
  }
  dword_10AA33A4 = 0;
  dword_10AA33A0 = 0;
  dword_10AA339C = 0;
  dword_10AA3398 = 0;
  if (this->field_0 != *(_DWORD *)&this->gap4[8] ||
      *(_DWORD *)this->gap4 != *(_DWORD *)&this->gap4[12] || this->gap4[32] != this->gap4[36] ||
      this->gap4[33] != this->gap4[37] || this->gap4[34] != this->gap4[38] ||
      this->gap4[35] != this->gap4[39]) {
    g_TickCount = getTicks();
  }
  v15 = *(_DWORD *)this->gap4;
  v16 = this->gap4[32];
  *(_DWORD *)&this->gap4[8] = this->field_0;
  v17 = this->gap4[33];
  *(_DWORD *)&this->gap4[12] = v15;
  LOBYTE(v15) = this->gap4[34];
  this->gap4[36] = v16;
  v18 = this->gap4[35];
  this->gap4[37] = v17;
  this->gap4[38] = v15;
  this->gap4[39] = v18;
  dword_10AA33C0[0] = 0;
  dword_10AA33C4 = 0;
  dword_10AA33C8 = 0;
  dword_10AA33CC = 0;
  if (this->gap4[32]) {
    if (!this->field_2C) {
      this->field_2C = 1;
      goto LABEL_58;
    }
  } else if (this->field_2C) {
    this->field_2C = 0;
    *(_DWORD *)this->gap3C = 1;
    *(_DWORD *)&this->gap3C[16] = 0;
    dword_10AA33C0[0] = 1;
    goto LABEL_58;
  }
  *(_DWORD *)this->gap3C = 0;
LABEL_58:
  if (this->gap4[33]) {
    if (!this->field_30) {
      this->field_30 = 1;
      goto LABEL_65;
    }
  } else if (this->field_30) {
    this->field_30 = 0;
    *(_DWORD *)&this->gap3C[4] = 1;
    *(_DWORD *)&this->gap3C[16] = 0;
    dword_10AA33C4 = 1;
    goto LABEL_65;
  }
  *(_DWORD *)&this->gap3C[4] = 0;
LABEL_65:
  if (!this->gap4[34]) {
    if (this->field_34) {
      this->field_34 = 0;
      *(_DWORD *)&this->gap3C[8] = 1;
      *(_DWORD *)&this->gap3C[16] = 0;
      dword_10AA33C8 = 1;
      goto LABEL_72;
    }
  LABEL_71:
    *(_DWORD *)&this->gap3C[8] = 0;
    goto LABEL_72;
  }
  if (this->field_34)
    goto LABEL_71;
  this->field_34 = 1;
LABEL_72:
  if (this->gap4[35]) {
    if (!this->field_38) {
      this->field_38 = 1;
      *(_DWORD *)&SrcStr[8] = this;
      return (LPDIRECTINPUTDEVICEA)sub_1005FFF0();
    }
  } else if (this->field_38) {
    this->field_38 = 0;
    *(_DWORD *)&this->gap3C[12] = 1;
    *(_DWORD *)&this->gap3C[16] = 0;
    dword_10AA33CC = 1;
    *(_DWORD *)&SrcStr[8] = this;
    return (LPDIRECTINPUTDEVICEA)sub_1005FFF0();
  }
  *(_DWORD *)&this->gap3C[12] = 0;
  *(_DWORD *)&SrcStr[8] = this;
  return (LPDIRECTINPUTDEVICEA)sub_1005FFF0();
}
// 1006066E: conditional instruction was optimized away because of 'al.1!=0'
// 1006069C: conditional instruction was optimized away because of 'al.1!=0'
// 100606CA: conditional instruction was optimized away because of 'al.1!=0'
// 1006070A: conditional instruction was optimized away because of 'al.1!=0'
// 100AB3DC: using guessed type __int16 word_100AB3DC;
// 10AA286C: using guessed type __int16 word_10AA286C;
// 10AA2BDC: using guessed type int dword_10AA2BDC;
// 10AA2BE0: using guessed type int dword_10AA2BE0;
// 10AA2DAC: using guessed type int dword_10AA2DAC;
// 10AA2DB4: using guessed type int dword_10AA2DB4;
// 10AA3350: using guessed type char byte_10AA3350;
// 10AA3358: using guessed type char byte_10AA3358;
// 10AA3398: using guessed type int dword_10AA3398;
// 10AA339C: using guessed type int dword_10AA339C;
// 10AA33A0: using guessed type int dword_10AA33A0;
// 10AA33A4: using guessed type int dword_10AA33A4;
// 10AA33A8: using guessed type int dword_10AA33A8;
// 10AA33AC: using guessed type int dword_10AA33AC;
// 10AA33B0: using guessed type int dword_10AA33B0;
// 10AA33B4: using guessed type int dword_10AA33B4;
// 10AA33B8: using guessed type int dword_10AA33B8;
// 10AA33C0: using guessed type int dword_10AA33C0[];
// 10AA33C4: using guessed type int dword_10AA33C4;
// 10AA33C8: using guessed type int dword_10AA33C8;
// 10AA33CC: using guessed type int dword_10AA33CC;
// 10AA33E8: using guessed type int g_TickCount;

//----- (10060750) --------------------------------------------------------
LPDIRECTINPUTDEVICEA __thiscall meth_unk00054_10060750(unk00054 *this, int a2) {
  LPDIRECTINPUTDEVICEA result; // eax

  result = this->lpDIDeviceA;
  if (result && gUnkC8Ptr1->field_C) {
    if (dword_10AA33E0)
      result = (LPDIRECTINPUTDEVICEA)result->lpVtbl->Unacquire(result);
    else
      result = (LPDIRECTINPUTDEVICEA)result->lpVtbl->Acquire(result);
  }
  return result;
}
// 10AA33E0: using guessed type int dword_10AA33E0;

//----- (10060780) --------------------------------------------------------
__int16 __usercall sub_10060780 @<ax>(int a1 @<ebx>, char *a2, unsigned int a3, char a4) {
  int v4; // eax

  LOBYTE(a1) = a4;
  BYTE1(a1) = a4;
  v4 = a1 << 16;
  LOWORD(v4) = a1;
  memset32(a2, v4, a3 >> 2);
  memset(&a2[4 * (a3 >> 2)], a4, a3 & 3);
  return v4;
}

//----- (100607B0) --------------------------------------------------------
int __cdecl sub_100607B0(int a1, int a2) {
  double v2;  // st7
  double v3;  // st7
  int result; // eax

  sub_100695A0(a1, a2 + 544);
  *(_DWORD *)(a1 + 28) = *(_DWORD *)(a2 + 488);
  *(_DWORD *)(a1 + 32) = *(_DWORD *)(a2 + 492);
  *(_DWORD *)(a1 + 36) = *(_DWORD *)(a2 + 496);
  *(_DWORD *)(a1 + 40) = *(_DWORD *)(a2 + 516);
  *(_DWORD *)(a1 + 44) = *(_DWORD *)(a2 + 520);
  *(_DWORD *)(a1 + 48) = *(_DWORD *)(a2 + 524);
  *(_DWORD *)(a1 + 52) = *(_DWORD *)(a2 + 824);
  *(_DWORD *)(a1 + 56) = *(_DWORD *)(a2 + 1852);
  *(_DWORD *)(a1 + 60) = *(_DWORD *)(a2 + 1348);
  *(_DWORD *)(a1 + 64) = *(_DWORD *)(a2 + 2396);
  *(_DWORD *)(a1 + 68) = *(_DWORD *)(a2 + 1872);
  *(_DWORD *)(a1 + 72) = *(_DWORD *)(a2 + 2920);
  *(float *)(a1 + 76) = (float)*(int *)(a2 + 1316);
  *(float *)(a1 + 80) = (float)*(int *)(a2 + 2364);
  *(float *)(a1 + 84) = (float)*(int *)(a2 + 1840);
  *(float *)(a1 + 88) = (float)*(int *)(a2 + 2888);
  *(float *)(a1 + 92) = (float)*(char *)(a2 + 1296);
  *(float *)(a1 + 96) = (float)*(char *)(a2 + 2344);
  *(float *)(a1 + 100) = (float)*(char *)(a2 + 1820);
  *(float *)(a1 + 104) = (float)*(char *)(a2 + 2868);
  *(float *)(a1 + 108) = (float)*(unsigned __int8 *)(a2 + 877);
  if ((**(_DWORD **)(a2 + 10688) & 0xC0000) != 0)
    v2 = 1.0;
  else
    v2 = 0.0;
  *(float *)(a1 + 112) = v2;
  *(float *)(a1 + 116) = (float)(*(float *)(a2 + 3688) < 0.0);
  if (*(_DWORD *)(a2 + 4008) == dword_100BD3E0)
    v3 = 4188888.0;
  else
    v3 = *(float *)(a2 + 4084);
  *(float *)(a1 + 120) = v3;
  *(_DWORD *)(a1 + 124) = *(_DWORD *)(a2 + 3620);
  *(float *)(a1 + 128) = (float)*(unsigned __int8 *)(a2 + 866);
  *(float *)(a1 + 132) = (float)*(unsigned __int8 *)(a2 + 867);
  *(float *)(a1 + 136) = (float)*(unsigned __int8 *)(a2 + 876);
  *(float *)(a1 + 140) = (float)*(unsigned __int8 *)(a2 + 870);
  *(float *)(a1 + 144) = (float)*(unsigned __int8 *)(a2 + 871);
  *(float *)(a1 + 148) = (float)*(unsigned __int8 *)(a2 + 872);
  result = *(unsigned __int8 *)(a2 + 873);
  *(float *)(a1 + 152) = (float)result;
  *(float *)(a1 + 156) = (float)*(unsigned __int8 *)(a2 + 874);
  return result;
}

//----- (100609E0) --------------------------------------------------------
int __cdecl sub_100609E0(int a1) {
  float v2[40]; // [esp+0h] [ebp-A0h] BYREF

  sub_100607B0((int)v2, a1);
  return sub_10005130(v2);
}

//----- (10060A10) --------------------------------------------------------
float *__cdecl sub_10060A10(int a1, int a2) {
  float *v2;        // ebp
  unsigned int *v3; // eax
  unsigned int v4;  // ecx
  unsigned int v5;  // ecx
  BOOL v6;          // eax
  float *result;    // eax

  v2 = (float *)(a1 + 476);
  *(_DWORD *)(a1 + 500) = *(_DWORD *)a2;
  *(_DWORD *)(a1 + 504) = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a1 + 508) = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(a1 + 512) = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(a1 + 476) = *(_DWORD *)(a2 + 16);
  *(_DWORD *)(a1 + 480) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(a1 + 484) = *(_DWORD *)(a2 + 24);
  sub_100695D0(a1 + 544, a2);
  *(_DWORD *)(a1 + 488) = *(_DWORD *)(a2 + 28);
  *(_DWORD *)(a1 + 492) = *(_DWORD *)(a2 + 32);
  *(_DWORD *)(a1 + 496) = *(_DWORD *)(a2 + 36);
  *(_DWORD *)(a1 + 516) = *(_DWORD *)(a2 + 40);
  *(_DWORD *)(a1 + 520) = *(_DWORD *)(a2 + 44);
  *(_DWORD *)(a1 + 524) = *(_DWORD *)(a2 + 48);
  *(_DWORD *)(a1 + 824) = *(_DWORD *)(a2 + 52);
  *(_DWORD *)(a1 + 1852) = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(a1 + 2900) = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(a1 + 1348) = *(_DWORD *)(a2 + 60);
  *(_DWORD *)(a1 + 2396) = *(_DWORD *)(a2 + 64);
  *(_DWORD *)(a1 + 1872) = *(_DWORD *)(a2 + 68);
  *(_DWORD *)(a1 + 2920) = *(_DWORD *)(a2 + 72);
  *(_DWORD *)(a1 + 1316) = (__int64)*(float *)(a2 + 76);
  *(_DWORD *)(a1 + 2364) = (__int64)*(float *)(a2 + 80);
  *(_DWORD *)(a1 + 1840) = (__int64)*(float *)(a2 + 84);
  *(_DWORD *)(a1 + 2888) = (__int64)*(float *)(a2 + 88);
  *(_BYTE *)(a1 + 1296) = (__int64)*(float *)(a2 + 92);
  *(_BYTE *)(a1 + 2344) = (__int64)*(float *)(a2 + 96);
  *(_BYTE *)(a1 + 1820) = (__int64)*(float *)(a2 + 100);
  *(_BYTE *)(a1 + 2868) = (__int64)*(float *)(a2 + 104);
  *(_BYTE *)(a1 + 877) = (__int64)*(float *)(a2 + 108);
  v3 = *(unsigned int **)(a1 + 10688);
  v4 = *v3;
  if (*(float *)(a2 + 112) == 0.0)
    v5 = v4 & 0xFFFBFFFF;
  else
    v5 = v4 | 0x40000;
  *v3 = v5;
  if (*(float *)(a2 + 116) == 0.0)
    *(_DWORD *)(a1 + 3688) = 1065353216;
  else
    *(_DWORD *)(a1 + 3688) = -1082130432;
  if (*(float *)(a1 + 4084) > 0.0)
    v6 = *(float *)(a1 + 4084) - -1000.0 > *(float *)(a2 + 120);
  else
    v6 = 1;
  if (v6)
    *(_DWORD *)(a1 + 4084) = *(_DWORD *)(a2 + 120);
  *(_DWORD *)(a1 + 3620) = *(_DWORD *)(a2 + 124);
  *(_BYTE *)(a1 + 866) = (__int64)*(float *)(a2 + 128);
  *(_BYTE *)(a1 + 867) = (__int64)*(float *)(a2 + 132);
  *(_BYTE *)(a1 + 876) = (__int64)*(float *)(a2 + 136);
  *(_BYTE *)(a1 + 870) = (__int64)*(float *)(a2 + 140);
  *(_BYTE *)(a1 + 871) = (__int64)*(float *)(a2 + 144);
  *(_BYTE *)(a1 + 872) = (__int64)*(float *)(a2 + 148);
  *(_BYTE *)(a1 + 873) = (__int64)*(float *)(a2 + 152);
  *(_BYTE *)(a1 + 874) = (__int64)*(float *)(a2 + 156);
  result = math_100742D0(v2);
  qmemcpy((void *)(a1 + 632), v2, 0x44u);
  qmemcpy((void *)(a1 + 700), v2, 0x44u);
  return result;
}

//----- (10060CC0) --------------------------------------------------------
int __usercall sub_10060CC0 @<eax>(double st7_0 @<st0>, int a1, int a2) {
  float v4[40]; // [esp+4h] [ebp-A0h] BYREF

  if (a2 == sub_10005D30())
    return 1;
  if (dword_106909B4)
    return 1;
  if (!sub_100054A0(v4, a2))
    return 0;
  sub_10060A10(a1, (int)v4);
  sub_10061BE0(st7_0, (_DWORD *)a1);
  return 1;
}
// 106909B4: using guessed type int dword_106909B4;

//----- (10060D50) --------------------------------------------------------
char sub_10060D50() {
  int v0;      // eax
  char result; // al

  v0 = dword_10B4E70C;
  if (dword_10B4E70C < 9)
    v0 = ++dword_10B4E70C;
  result = byte_100ADF68[4 * v0];
  byte_100BBAD8 = result;
  return result;
}
// 100BBAD8: using guessed type char byte_100BBAD8;
// 10B4E70C: using guessed type int dword_10B4E70C;

//----- (10060D70) --------------------------------------------------------
char sub_10060D70() {
  int v0;      // eax
  char result; // al

  v0 = dword_10B4E70C;
  if (dword_10B4E70C > 0)
    v0 = --dword_10B4E70C;
  result = byte_100ADF68[4 * v0];
  byte_100BBAD8 = result;
  return result;
}
// 100BBAD8: using guessed type char byte_100BBAD8;
// 10B4E70C: using guessed type int dword_10B4E70C;

//----- (10060D90) --------------------------------------------------------
int sub_10060D90() {
  int v0;     // eax
  int result; // eax

  v0 = dword_10B4E70C;
  byte_100BBAD8 = byte_100ADF68[4 * dword_10B4E70C];
  LOBYTE(v0) = byte_100BBAD8;
  result = pm_sub_100029F0(v0);
  byte_100BBAE0 = byte_100ADF90[4 * dword_10B4E708];
  return result;
}
// 100BBAD8: using guessed type char byte_100BBAD8;
// 100BBAE0: using guessed type char byte_100BBAE0;
// 10B4E708: using guessed type int dword_10B4E708;
// 10B4E70C: using guessed type int dword_10B4E70C;

//----- (10060DC0) --------------------------------------------------------
char sub_10060DC0() {
  int v0;      // eax
  char result; // al

  v0 = dword_10B4E708;
  if (dword_10B4E708 < 9)
    v0 = ++dword_10B4E708;
  result = byte_100ADF90[4 * v0];
  byte_100BBAE0 = result;
  return result;
}
// 100BBAE0: using guessed type char byte_100BBAE0;
// 10B4E708: using guessed type int dword_10B4E708;

//----- (10060DE0) --------------------------------------------------------
char sub_10060DE0() {
  int v0;      // eax
  char result; // al

  v0 = dword_10B4E708;
  if (dword_10B4E708 > 0)
    v0 = --dword_10B4E708;
  result = byte_100ADF90[4 * v0];
  byte_100BBAE0 = result;
  return result;
}
// 100BBAE0: using guessed type char byte_100BBAE0;
// 10B4E708: using guessed type int dword_10B4E708;

//----- (10060E00) --------------------------------------------------------
int __cdecl sub_10060E00(int a1) {
  int result; // eax
  char v2[4]; // [esp+0h] [ebp-8h] BYREF
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = input_100773F0((int *)v2, (int *)v3);
  *(_BYTE *)(a1 + 2) = v2[0];
  *(_BYTE *)(a1 + 3) = v3[0];
  *(_WORD *)a1 = 0;
  if ((result & 0x10) != 0)
    *(_WORD *)a1 = -31744;
  if ((result & 4) != 0)
    *(_BYTE *)(a1 + 1) |= 0x88u;
  if ((result & 1) != 0)
    *(_BYTE *)(a1 + 1) |= 2u;
  if ((result & 2) != 0)
    *(_BYTE *)(a1 + 1) |= 1u;
  if ((result & 8) != 0)
    *(_BYTE *)(a1 + 1) |= 0x40u;
  if ((result & 0x100) != 0)
    *(_BYTE *)a1 |= 8u;
  if ((result & 0x200) != 0)
    *(_BYTE *)a1 |= 2u;
  if ((result & 0x400) != 0)
    *(_BYTE *)a1 |= 4u;
  if ((result & 0x8000) != 0)
    *(_BYTE *)(a1 + 1) |= 0x10u;
  if ((result & 0x20) != 0)
    *(_BYTE *)a1 |= 0x10u;
  if ((result & 0x40) != 0)
    *(_BYTE *)a1 |= 0x20u;
  return result;
}

//----- (10060EA0) --------------------------------------------------------
char *__cdecl graphics_ConvertBitmapIf24Bit(PBITMAP pBitmap) {
  _BYTE *mem; // edi

  if (pBitmap->bmBitsPixel != 24)
    return 0;
  mem = malloc(4 * pBitmap->bmWidth * pBitmap->bmHeight);
  if (mem) {
    graphics_Convert24BitBitmap(
        mem, pBitmap->bmBits, pBitmap->bmWidth, pBitmap->bmHeight, pBitmap->bmWidthBytes);
    gBmWidth = pBitmap->bmWidth;
    gBmHeight = pBitmap->bmHeight;
  }
  return mem;
}
// 10AA3464: using guessed type int gBmWidth;
// 10AA3468: using guessed type int gBmHeight;

//----- (10060F00) --------------------------------------------------------
char *__cdecl graphics_Convert24BitBitmap(
    char *mem, LPVOID bmBits, LONG bmWidth, LONG bmHeight, LONG bmWidthBytes) {
  char *result;         // eax
  char *currentBytePtr; // edi
  char *calc_1;         // ecx
  LONG x;               // esi
  char calc_2;          // dl
  char *calc_3;         // ecx
  char calc_4;          // bl
  char *calc_5;         // eax
  LONG y;               // [esp+Ch] [ebp+8h]
  char calc_1_1;        // [esp+14h] [ebp+10h]

  result = (char *)bmHeight;
  currentBytePtr = (char *)bmBits + bmWidthBytes * (bmHeight - 1);
  if (bmHeight) {
    y = bmHeight;
    result = mem;
    do {
      calc_1 = currentBytePtr;
      if (bmWidth) {
        x = bmWidth;
        do {
          calc_2 = *calc_1;
          calc_1_1 = calc_1[1];
          calc_3 = calc_1 + 2;
          calc_4 = *calc_3;
          calc_1 = calc_3 + 1;
          *result = calc_4;
          calc_5 = result + 1;
          *calc_5++ = calc_1_1;
          *calc_5++ = calc_2;
          *calc_5 = -1;
          result = calc_5 + 1;
          --x;
        } while (x);
      }
      currentBytePtr -= bmWidthBytes;
      --y;
    } while (y);
  }
  return result;
}

//----- (10060F70) --------------------------------------------------------
int __cdecl car_10060F70(int a1, int a2, int a3) {
  dword_100B2AD0 = gCarPartArray[0x1E * a1 + a2].field_10;
  return *((_DWORD *)&gCarPartArray[0x1E * a1 + a2].imageData + a3);
}
// 100B2AD0: using guessed type int dword_100B2AD0;

//----- (10060FB0) --------------------------------------------------------
int *__cdecl car_10060FB0(int a1, int a2, _DWORD *a3, _DWORD *a4, _DWORD *a5, int *a6) {
  int v6;      // eax
  int v7;      // edx
  int *result; // eax

  v6 = a2 + 30 * a1;
  *a3 = gCarPartArray[v6].field_14;
  *a4 = gCarPartArray[v6].field_18;
  *a5 = gCarPartArray[v6].field_1C;
  v7 = gCarPartArray[v6].field_20;
  result = a6;
  *a6 = v7;
  return result;
}

//----- (10061000) --------------------------------------------------------
int car_10061000() {
  return dword_100B2AD0;
}
// 100B2AD0: using guessed type int dword_100B2AD0;

//----- (10061010) --------------------------------------------------------
int __cdecl car_LoadCarPaint(int carIndex, int bSomething) {
  CarPart *carPart;    // ebx
  _BYTE *mem;          // esi
  int *v4;             // ebp
  int *mem_1;          // eax
  int result;          // eax
  int v7;              // [esp+10h] [ebp-408h]
  int sizeofCarPart;   // [esp+14h] [ebp-404h]
  char filename[1024]; // [esp+18h] [ebp-400h] BYREF

  sizeofCarPart = 0x1E;
  carPart = &gCarPartArray[0x1E * carIndex];
  do {
    if (!carPart->imageData) {
      if (carPart->filename) {
        sprintf(filename, "Paint\\%s", carPart->filename);
        if (CHK_FileExists(filename)) {
          carPart->imageData = car_LoadImageWrapper(filename);
          filename[8] = 'd';
          if (CHK_FileExists(filename)) {
              mem = car_LoadImageWrapper(filename);
              if (carPart->imageData) {
                  if (mem) {
                      car_10061210(carPart->imageData, gBmWidth, gBmHeight, mem);
                      free(mem);
                  }
              }
          }
          if (carPart->imageData && carPart->field_10 >= 0 && bSomething && dword_100ADFC8) {
              v7 = 1;
              v4 = &carPart->field_4;
              do {
                  mem_1 = (int *)malloc(4 * gBmWidth * gBmHeight);
                  *v4 = (int)mem_1;
                  if (mem_1) {
                      qmemcpy(mem_1, carPart->imageData, 4 * gBmWidth * gBmHeight);
                      car_10061290(v7, *v4, gBmWidth, gBmHeight);
                  }
                  ++v4;
                  ++v7;
              } while (v7 < 4);
          }
        }
      }
    }
    ++carPart;
    result = --sizeofCarPart;
  } while (sizeofCarPart);
  return result;
}
// 100ADFC8: using guessed type int dword_100ADFC8;
// 10AA3464: using guessed type int gBmWidth;
// 10AA3468: using guessed type int gBmHeight;

//----- (100611A0) --------------------------------------------------------
char *__cdecl car_LoadImageWrapper(LPCSTR name) {
  char *result;  // eax
  char *hResult; // esi
  char *mem;     // edi
  BITMAP bitmap; // [esp+8h] [ebp-18h] BYREF

  result = (char *)LoadImageA(0, name, 0, 0, 0, 0x2010u); // LR_CREATEDIBSECTION | LR_LOADFROMFILE
  hResult = result;
  if (result) {
    GetObjectA(result, 0x18, &bitmap); // 0x18 = sizeof(BITMAP)
    if (bitmap.bmBitsPixel == 24) {
      mem = graphics_ConvertBitmapIf24Bit(&bitmap);
      DeleteObject(hResult);
      result = mem;
    } else {
      result = 0;
    }
  }
  return result;
}

//----- (10061210) --------------------------------------------------------
unsigned int __cdecl car_10061210(char *imageData,
                                  int bmHeight_1,
                                  int bmHeight,
                                  unsigned __int8 *mem) {
  int totalPixels;     // ebp
  int v7;              // esi
  unsigned int v8;     // kr00_4
  unsigned int v9;     // edx
  unsigned int v10;    // esi
  unsigned int result; // eax

  totalPixels = bmHeight_1 * bmHeight;
  if (bmHeight_1 * bmHeight > 0) {
    do {
      v7 = *mem;
      v8 = v7 * (unsigned __int8)*imageData;
      v9 = (unsigned __int8)imageData[1] * v7;
      imageData += 4;
      mem += 4;
      v10 = (unsigned __int8)*(imageData - 2) * v7;
      result = 0x80808081 * v10;
      LOBYTE(result) = v9 / 0xFF;
      *(imageData - 4) = v8 / 0xFF;
      *(imageData - 3) = result;
      *(imageData - 2) = v10 / 0xFF;
      --totalPixels;
    } while (totalPixels);
  }
  return result;
}

//----- (10061290) --------------------------------------------------------
int __cdecl car_10061290(int a1, int a2, int width, int height) {
  int result; // eax
  int v5;     // edi
  int v6;     // esi
  int v7;     // ecx
  int v8;     // ebp
  int v9;     // ebx
  int v10;    // eax
  int v11;    // esi
  int v12;    // edx
  bool v13;   // zf
  int v14;    // [esp+4h] [ebp-10h]
  int v15;    // [esp+8h] [ebp-Ch]
  int v16;    // [esp+Ch] [ebp-8h]
  int v17;    // [esp+10h] [ebp-4h]
  int v18;    // [esp+18h] [ebp+4h]

  result = dword_10AA344C[a1];
  v16 = result;
  if (result) {
    v5 = height;
    if (height > 0) {
      v6 = width;
      result = 0;
      v17 = 4 * width;
      v7 = a2;
      v14 = 0;
      v15 = height;
      do {
        if (v6 > 0) {
          v18 = v6;
          v8 = (result / v5) << 6;
          v9 = 0;
          do {
              v7 += 4;
              v10 = v9 / v6;
              v9 += 64;
              v11 = *(unsigned __int8 *)(v16 + 4 * (v8 + v10));
              *(_BYTE *)(v7 - 4) = -(char)(v11 * *(_BYTE *)(v7 - 4));
              *(_BYTE *)(v7 - 3) = -(char)(*(_BYTE *)(v7 - 3) * v11);
              v12 = (unsigned __int64)(2155905153i64 * *(unsigned __int8 *)(v7 - 2) * v11) >> 32;
              v6 = width;
              *(_BYTE *)(v7 - 2) = (v12 >> 7 < 0) + (v12 >> 7);
              --v18;
          } while (v18);
          v5 = height;
        }
        v7 = v17 + a2;
        result = v14 + 64;
        v13 = v15 == 1;
        a2 += v17;
        v14 += 64;
        --v15;
      } while (!v13);
    }
  }
  return result;
}
// 10AA344C: using guessed type int dword_10AA344C[];

//----- (100613B0) --------------------------------------------------------
CarPart *car_100613B0() {
  CarPart *result;      // eax
  CarPart *carPartPtr0; // ebx
  int v2;               // ebp
  CarPart *carPartPtr1; // esi
  int i;                // edi

  result = gCarPartArray;
  do {
    carPartPtr0 = result;
    v2 = 30;
    do {
      carPartPtr1 = carPartPtr0;
      i = 4;
      do {
        if (carPartPtr1->imageData) {
          free(carPartPtr1->imageData);
          carPartPtr1->imageData = 0;
        }
        carPartPtr1 = (CarPart *)((char *)carPartPtr1 + 4);
        --i;
      } while (i);
      ++carPartPtr0;
      --v2;
    } while (v2);
    result = carPartPtr0;
  } while ((int)carPartPtr0 < (int)&dword_100B2AD0);
  return result;
}
// 100B2AD0: using guessed type int dword_100B2AD0;

//----- (10061410) --------------------------------------------------------
char *car_LoadPaintDamageBitmaps() {
  int index;         // edi 1-3 inclusive
  char **p;          // esi
  char *result;      // eax
  char buffer[1024]; // [esp+8h] [ebp-400h] BYREF

  index = 0;
  p = gDamageBitmapPtrs;
  do {
    sprintf(buffer, "Paint\\damage%d.bmp", ++index);
    result = car_LoadImageWrapper(buffer);
    *p++ = result;
  } while ((int)p < (int)&gDamagePtrsMaxAddress);
  return result;
}
// 10AA345C: using guessed type int gDamagePtrsMaxAddress;

//----- (10061460) --------------------------------------------------------
int __cdecl car_10061460(int a1, int a2, int damgePtrsMaxAddress) {
  int result; // eax

  result = a1;
  dword_10AA3440 = a1;
  dword_10AA3448 = a2;
  gDamagePtrsMaxAddress = damgePtrsMaxAddress;
  return result;
}
// 10AA3440: using guessed type int dword_10AA3440;
// 10AA3448: using guessed type int dword_10AA3448;
// 10AA345C: using guessed type int gDamagePtrsMaxAddress;

//----- (10061480) --------------------------------------------------------
int __cdecl car_10061480(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8) {
  int v8;   // eax
  int v9;   // edx
  int v10;  // esi
  int v11;  // ecx
  bool v12; // cc
  int v13;  // edi
  int v14;  // ebp
  int v15;  // ebx
  int v16;  // ecx
  int v18;  // [esp+Ch] [ebp-8h]
  int v19;  // [esp+10h] [ebp-4h]
  int v20;  // [esp+18h] [ebp+4h]
  int v21;  // [esp+20h] [ebp+Ch]
  int v22;  // [esp+28h] [ebp+14h]

  v8 = a1;
  if (a1) {
    v9 = a5 - a4;
    v10 = a3 - a2;
    v11 = 0;
    v18 = a3 - a2;
    v12 = a5 - a4 <= 0;
    v22 = a5 - a4;
    v20 = 0;
    if (!v12) {
      v19 = 4 * v10;
      v21 = v8;
      do {
        v13 = v8;
        if (v10 > 0) {
          v14 = v10;
          v15 = a6 + 4 * (a2 + a7 * (a8 - a4 - v11 - 1)) - v8;
          do {
              *(_DWORD *)(v13 + v15) = *(_DWORD *)v13;
              if (!*(_BYTE *)v13) {
                  v16 = *(unsigned __int8 *)(v13 + 1);
                  if (v16 == *(unsigned __int8 *)(v13 + 2)) {
                      *(_BYTE *)(v13 + v15) = -(char)(dword_10AA3440 * v16);
                      v10 = v18;
                      *(_BYTE *)(v13 + v15 + 1) = -(char)(dword_10AA3448 * v16);
                      *(_BYTE *)(v13 + v15 + 2) = -(char)(gDamagePtrsMaxAddress * v16);
                  }
              }
              v13 += 4;
              --v14;
          } while (v14);
          v8 = v21;
          v11 = v20;
          v9 = v22;
        }
        ++v11;
        v8 += v19;
        v20 = v11;
        v21 = v8;
      } while (v11 < v9);
    }
  }
  return 1;
}
// 10AA3440: using guessed type int dword_10AA3440;
// 10AA3448: using guessed type int dword_10AA3448;
// 10AA345C: using guessed type int gDamagePtrsMaxAddress;

//----- (100615B0) --------------------------------------------------------
int __cdecl sub_100615B0(_BYTE *a1, int a2, int a3, int a4, int a5) {
  _BYTE *v5; // edi
  int v6;    // esi
  int v7;    // ebp
  int v8;    // ecx
  _BYTE *v9; // eax

  v5 = a1;
  if (!a1)
    return 0;
  v6 = a3 - a2;
  v7 = 0;
  if (a5 - a4 <= 0)
    return 0;
  while (1) {
    v8 = 0;
    v9 = v5;
    if (v6 > 0)
      break;
  LABEL_7:
    ++v7;
    v5 += 4 * v6;
    if (v7 >= a5 - a4)
      return 0;
  }
  while (*v9 || v9[1] != v9[2]) {
    v9 += 4;
    if (++v8 >= v6)
      goto LABEL_7;
  }
  return 1;
}

//----- (10061620) --------------------------------------------------------
void car_10061620() {
  char **v0; // esi

  car_100613B0();
  v0 = gDamageBitmapPtrs;
  do {
    if (*v0) {
      free(*v0);
      *v0 = 0;
    }
    ++v0;
  } while ((int)v0 < (int)&gDamagePtrsMaxAddress);
}
// 10AA345C: using guessed type int gDamagePtrsMaxAddress;

//----- (10061660) --------------------------------------------------------
void __cdecl sub_10061660(int a1) {
  int i;      // esi
  __int16 v2; // ax
  char v3;    // al

  for (i = a1; i; i = *(_DWORD *)(i + 4)) {
    v2 = *(_WORD *)(i + 22);
    if ((v2 & 0x8000) == 0 && (v2 & 1) == 0) {
      v3 = *(_BYTE *)(i + 17);
      *(_WORD *)(i + 22) |= 0x8000u;
      if (v3 == 2 && (gChosenTrack == 3 || gChosenTrack == 9))
        *(_BYTE *)(i + 17) = 0;
      sub_10061660(*(_DWORD *)i);
    }
  }
}
// 100B380C: using guessed type int gChosenTrack;

//----- (100616C0) --------------------------------------------------------
int __cdecl sub_100616C0(int *a1) {
  int *i;     // esi
  int *v2;    // eax
  int result; // eax

  for (i = a1; i; i = (int *)i[1]) {
    if ((*((_WORD *)i + 11) & 0x8000) != 0) {
      v2 = (int *)*i;
      *((_WORD *)i + 11) &= 0x7FFFu;
      result = sub_100616C0(v2);
    }
  }
  return result;
}

//----- (10061700) --------------------------------------------------------
int sub_10061700() {
  sub_10061660(gUnk06594.field_4938);
  return sub_100616C0((int *)gUnk06594.field_4938);
}

//----- (10061720) --------------------------------------------------------
void __thiscall meth_10061720(_DWORD *this) {
  int v2;     // edx
  int v3;     // eax
  float *v4;  // ecx
  int v5;     // edx
  double v6;  // st7
  double v7;  // st6
  double v8;  // st7
  double v9;  // st6
  double v10; // rt1
  double v11; // st6
  double v12; // st7
  void *v13;  // ecx
  int v14;    // [esp-10h] [ebp-20h]

  meth_DebugPrint(this);
  v2 = this[90];
  this[95] = this + 744;
  *(_DWORD *)(v2 + 24) = this + 840;
  *(_DWORD *)(this[91] + 24) = this + 856;
  *(_DWORD *)(this[92] + 24) = this + 848;
  *(_DWORD *)(this[93] + 24) = this + 864;
  *(_DWORD *)(*(_DWORD *)(this[90] + 24) + 8) = 0;
  *(_DWORD *)(*(_DWORD *)(this[90] + 24) + 12) = 0;
  *(_DWORD *)(*(_DWORD *)(this[90] + 24) + 16) = 0;
  *(_DWORD *)(*(_DWORD *)(this[91] + 24) + 8) = 0;
  *(_DWORD *)(*(_DWORD *)(this[91] + 24) + 12) = 0;
  *(_DWORD *)(*(_DWORD *)(this[91] + 24) + 16) = 0;
  *(_DWORD *)(*(_DWORD *)(this[92] + 24) + 8) = 0;
  *(_DWORD *)(*(_DWORD *)(this[92] + 24) + 12) = 0;
  *(_DWORD *)(*(_DWORD *)(this[92] + 24) + 16) = 0;
  *(_DWORD *)(*(_DWORD *)(this[93] + 24) + 8) = 0;
  *(_DWORD *)(*(_DWORD *)(this[93] + 24) + 12) = 0;
  *(_DWORD *)(*(_DWORD *)(this[93] + 24) + 16) = 0;
  sub_1006F540((int)(this + 89));
  if (!this[929]) {
    this[927] = 0;
    v14 = this[90];
    this[925] = 0;
    *((_BYTE *)this + 3712) = 0;
    sub_1006C1F0((int)(this + 89), v14, (int)(this + 927), (int)(this + 928), 0.033333335);
    sub_1006C1F0((int)(this + 89), this[91], (int)(this + 927), (int)(this + 928), 0.033333335);
    sub_1006C1F0((int)(this + 89), this[92], (int)(this + 925), (int)(this + 926), 0.033333335);
    sub_1006C1F0((int)(this + 89), this[93], (int)(this + 925), (int)(this + 926), 0.033333335);
  }
  this[929] = 0;
  this[152] = 0;
  this[153] = 0;
  this[154] = 0;
  this[155] = 0;
  this[156] = 0;
  this[157] = 0;
  sub_1006B260((int)(this + 89));
  math_100743A0((int)(this + 119), (int)(this + 89), 0.033333335);
  sub_1006B5F0((int)(this + 89),
               0.033333335,
               (int)(this + 927),
               (int)(this + 925),
               (int)(this + 928),
               (int)(this + 926));
  math_100742D0((float *)this + 119);
  v3 = this[90];
  this[95] = this + 776;
  *(_DWORD *)(v3 + 24) = 0;
  *(_DWORD *)(this[92] + 24) = 0;
  *(_DWORD *)(this[91] + 24) = 0;
  *(_DWORD *)(this[93] + 24) = 0;
  sub_1006EF80((int)(this + 89), (float *)this + 832);
  sub_1006F650((int)(this + 89));
  this[152] = 0;
  this[153] = 0;
  this[154] = 0;
  this[155] = 0;
  this[156] = 0;
  this[157] = 0;
  sub_1006B260((int)(this + 89));
  qmemcpy(this + 175, this + 119, 0x44u);
  math_100743A0((int)(this + 175), (int)(this + 89), 0.033333335);
  v4 = (float *)(this + 129);
  v5 = 3;
  do {
    if (*v4 == 0.0) {
      v6 = 0.0;
    } else if (*v4 <= 0.0) {
      v6 = -1.0;
    } else {
      v6 = 1.0;
    }
    if (v4[56] == 0.0) {
      v7 = 0.0;
    } else if (v4[56] <= 0.0) {
      v7 = -1.0;
    } else {
      v7 = 1.0;
    }
    if (v6 == v7)
      *v4 = v4[56];
    else
      *v4 = 0.0;
    if (*(v4 - 7) == 0.0) {
      v8 = 0.0;
    } else if (*(v4 - 7) <= 0.0) {
      v8 = -1.0;
    } else {
      v8 = 1.0;
    }
    if (v4[49] == 0.0) {
      v9 = 0.0;
    } else if (v4[49] <= 0.0) {
      v9 = -1.0;
    } else {
      v9 = 1.0;
    }
    v10 = v9;
    v11 = v8;
    v12 = v10;
    if (v11 == v10)
      *(v4 - 7) = v4[49];
    else
      *(v4 - 7) = 0.0;
    ++v4;
    --v5;
  } while (v5);
  qmemcpy(this + 158, this + 119, 0x44u);
  math_100742D0((float *)this + 158);
  math_100742D0((float *)this + 158);
  sub_1006EC80((int)this, (int)(this + 89));
  qmemcpy(this + 119, this + 175, 0x44u);
  sub_1006F4A0(v12, this + 89);
  math_10074450((float *)(this[90] + 188), (float *)(this[90] + 120));
  math_10074450((float *)(this[91] + 188), (float *)(this[91] + 120));
  math_10074450((float *)(this[92] + 188), (float *)(this[92] + 120));
  math_10074450((float *)(this[93] + 188), (float *)(this[93] + 120));
  meth_DebugPrint(v13);
}
// 10061BC9: variable 'v13' is possibly undefined

//----- (10061BE0) --------------------------------------------------------
void __usercall sub_10061BE0(double a1 @<st0>, _DWORD *a2) {
  sub_1006F4A0(a1, a2 + 89);
  math_10074450((float *)(a2[90] + 188), (float *)(a2[90] + 120));
  math_10074450((float *)(a2[91] + 188), (float *)(a2[91] + 120));
  math_10074450((float *)(a2[92] + 188), (float *)(a2[92] + 120));
  math_10074450((float *)(a2[93] + 188), (float *)(a2[93] + 120));
}

//----- (10061C60) --------------------------------------------------------
float *__usercall sub_10061C60 @<eax>(int a1 @<ecx>, double a2 @<st0>) {
  float v3;      // eax
  float *result; // eax
  double v5;     // st5
  double v6;     // st7
  double v7;     // st6
  float v8;      // [esp+0h] [ebp-D8h]
  float v9;      // [esp+0h] [ebp-D8h]
  int v10[16];   // [esp+18h] [ebp-C0h] BYREF
  int v11[16];   // [esp+58h] [ebp-80h] BYREF
  int v12[16];   // [esp+98h] [ebp-40h] BYREF

  if (dword_106909E0 || gGameMode == GAME_MODE_2 && *(_DWORD *)(a1 + 320) == 1 &&
                            *(_DWORD *)(*(_DWORD *)(a1 + 10688) + 68)) {
    sub_1006ACF0(a1);
    sub_10061BE0(a2, (_DWORD *)a1);
  } else if (gGameMode == GAME_MODE_4 && !*(_DWORD *)(a1 + 320) &&
             *(_DWORD *)(*(_DWORD *)(a1 + 10688) + 68)) {
    sub_1006ABD0(a1, 1);
    sub_10061BE0(a2, (_DWORD *)a1);
  } else {
    sub_1006AAB0(a1);
  }
  sub_10030EE0((int)v10, *(float *)(a1 + 824), 1.0, 0.0, 0.0);
  sub_100306C0((float *)v10, (float *)(a1 + 544), (float *)a1);
  v3 = *(float *)(a1 + 1348);
  *(float *)(a1 + 1124) = *(float *)(a1 + 1124) - -0.25400001;
  *(float *)(a1 + 1648) = *(float *)(a1 + 1648) - -0.25400001;
  *(float *)(a1 + 2172) = *(float *)(a1 + 2172) - -0.25400001;
  *(float *)(a1 + 2696) = *(float *)(a1 + 2696) - -0.25400001;
  sub_10030EE0((int)v10, v3, 0.0, 1.0, 0.0);
  sub_100306C0((float *)v10, (float *)(a1 + 544), (float *)(a1 + 192));
  sub_100747C0((float *)(a1 + 240), (float *)(a1 + 544), (float *)(a1 + 1116));
  sub_10030EE0((int)v10, *(float *)(a1 + 2396), 0.0, 1.0, 0.0);
  sub_100306C0((float *)v10, (float *)(a1 + 544), (float *)(a1 + 256));
  sub_100747C0((float *)(a1 + 304), (float *)(a1 + 544), (float *)(a1 + 2164));
  sub_10030EE0((int)v12, *(float *)(a1 + 1872), 0.0, 1.0, 0.0);
  v8 = *(float *)(a1 + 1852) * 114.59155;
  sub_10030EE0((int)v11, v8, 0.0, 0.0, 1.0);
  sub_100306C0((float *)v12, (float *)v11, (float *)v10);
  sub_100306C0((float *)v10, (float *)(a1 + 544), (float *)(a1 + 128));
  sub_100747C0((float *)(a1 + 176), (float *)(a1 + 544), (float *)(a1 + 1640));
  sub_10030EE0((int)v12, *(float *)(a1 + 2920), 0.0, 1.0, 0.0);
  v9 = *(float *)(a1 + 2900) * 114.59155;
  sub_10030EE0((int)v11, v9, 0.0, 0.0, 1.0);
  sub_100306C0((float *)v12, (float *)v11, (float *)v10);
  sub_100306C0((float *)v10, (float *)(a1 + 544), (float *)(a1 + 64));
  result = sub_100747C0((float *)(a1 + 112), (float *)(a1 + 544), (float *)(a1 + 2688));
  v5 = *(float *)(a1 + 1648) - 0.25400001;
  v6 = *(float *)(a1 + 2172) - 0.25400001;
  v7 = *(float *)(a1 + 2696) - 0.25400001;
  *(float *)(a1 + 1124) = *(float *)(a1 + 1124) - 0.25400001;
  *(float *)(a1 + 1648) = v5;
  *(float *)(a1 + 2172) = v6;
  *(float *)(a1 + 2696) = v7;
  return result;
}
// 106909E0: using guessed type int dword_106909E0;

//----- (10061F70) --------------------------------------------------------
void __thiscall meth_10061F70(_DWORD *this) {
  double v2;       // st7
  double v3;       // st7
  double v4;       // st7
  double v5;       // st7
  double v7;       // st6
  char v8;         // c0
  double v9;       // st7
  double v10;      // st6
  double v11;      // st5
  _BOOL2 v12;      // cx
  double v13;      // st6
  double v14;      // st5
  double v15;      // st6
  double v16;      // st7
  long double v17; // st7
  double v18;      // st6
  double v19;      // st7
  double v20;      // st7
  int v21;         // ecx
  int v22;         // eax
  int *v23;        // ecx
  int v24;         // eax
  int *v25;        // ecx
  double v26;      // st7
  double v27;      // st7
  int *v28;        // edx
  int v29;         // edi
  int v30;         // ecx
  double v31;      // st7
  double v32;      // st7
  float *v33;      // edx
  double v34;      // st6
  int v35;         // ecx
  int v36;         // ecx
  float v37;       // eax
  double v38;      // st7
  double v39;      // st7
  double v40;      // st7
  double v41;      // st7
  double v42;      // st7
  double v44;      // st6
  char v45;        // c0
  double v46;      // st7
  int v47;         // eax
  float v48;       // [esp+10h] [ebp-18h]
  float v49;       // [esp+10h] [ebp-18h]
  float v50;       // [esp+10h] [ebp-18h]
  float v51;       // [esp+10h] [ebp-18h]
  float v52;       // [esp+14h] [ebp-14h]
  float v53;       // [esp+14h] [ebp-14h]
  float v54;       // [esp+14h] [ebp-14h]
  float v55;       // [esp+14h] [ebp-14h]
  float v56;       // [esp+14h] [ebp-14h]
  float v57;       // [esp+18h] [ebp-10h]
  float v58;       // [esp+18h] [ebp-10h]
  float v59;       // [esp+18h] [ebp-10h]
  float v60;       // [esp+18h] [ebp-10h]
  float v61;       // [esp+18h] [ebp-10h]
  float v62;       // [esp+18h] [ebp-10h]
  float v63[3];    // [esp+1Ch] [ebp-Ch] BYREF

  v2 = *(float *)(this[2672] + 32);
  if (SLOWORD(gConfigJoystickPtr->field_0) >= 0 &&
      (*(_WORD *)&gConfigJoystickPtr->gap4[2] & 0x8000) == 0) {
    if (v2 <= 0.0) {
      v4 = v2 - -0.07;
      v48 = v4;
      if (v4 > 0.0) {
      LABEL_7:
        v48 = 0.0;
        goto LABEL_8;
      }
    } else {
      v3 = v2 - 0.07;
      v48 = v3;
      if (v3 < 0.0)
        goto LABEL_7;
    }
  LABEL_8:
    sub_10074720(v63, (float *)this + 136, (float *)this + 122);
    v52 = v63[0];
    if (v63[0] < 10.0)
      v52 = 10.0;
    if (v52 > 70.0)
      v52 = 70.0;
    switch (this[934]) {
    case 0:
      flt_100B3670 = 10.0;
      v5 = 6.0;
      dword_100B3668 = 1096810496;
      dword_100B366C = 1006834287;
      break;
    case 1:
      flt_100B3670 = 10.0;
      v5 = 5.0;
      dword_100B3668 = 1096810496;
      dword_100B366C = 1008981770;
      break;
    case 2:
      flt_100B3670 = 10.0;
      v5 = 4.0;
      dword_100B3668 = 1096810496;
      dword_100B366C = 1012202996;
      break;
    case 3:
      flt_100B3670 = 10.0;
      v5 = 3.0;
      dword_100B3668 = 1096810496;
      dword_100B366C = 1015759766;
      break;
    case 4:
      flt_100B3670 = 10.0;
      v5 = 3.0;
      dword_100B3668 = 1096810496;
      dword_100B366C = 1018444120;
      break;
    case 5:
      flt_100B3670 = 10.0;
      v5 = 3.0;
      dword_100B3668 = 1096810496;
      dword_100B366C = 1022739087;
      break;
    case 6:
      flt_100B3670 = 10.0;
      v5 = 3.0;
      dword_100B3668 = 1096810496;
      dword_100B366C = 1028443341;
      break;
    default:
      v5 = 16.0;
      dword_100B3668 = 1099431936;
      dword_100B366C = 1032805417;
      flt_100B3670 = 14.0;
      break;
    }
    v57 = *(float *)&dword_100B366C;
    word_10AA346C = 0;
    v53 = *(float *)&dword_100B3668 - v52 * 0.011111111 * flt_100B3670;
    v7 = v48;
    if (v8)
      v7 = -v7;
    if (v7 >= 0.001) {
      if (v48 >= -0.75) {
        if (v48 <= 0.75)
          v9 = -(v5 * 0.017453292 * v48);
        else
          v9 = v53 * -0.017453292;
      } else {
        v9 = v53 * 0.017453292;
      }
    } else {
      v9 = 0.0;
    }
    v49 = v53 * 0.017453292;
    if (v9 > v49)
      v9 = v49;
    v54 = v53 * -0.017453292;
    if (v9 < v54)
      v9 = v54;
    if (v9 == 0.0) {
      v10 = 0.0;
    } else if (v9 <= 0.0) {
      v10 = -1.0;
    } else {
      v10 = 1.0;
    }
    if (*((float *)this + 904) == 0.0) {
      v11 = 0.0;
    } else if (*((float *)this + 904) <= 0.0) {
      v11 = -1.0;
    } else {
      v11 = 1.0;
    }
    v12 = v10 != v11 || *((float *)this + 904) > 0.0 && v9 < *((float *)this + 904) ||
          *((float *)this + 904) < 0.0 && v9 > *((float *)this + 904);
    if (*((float *)this + 904) == 0.0) {
      v12 = 0;
      *((_BYTE *)this + 3713) = 0;
    }
    if (v9 < *((float *)this + 904) && *((char *)this + 3713) < 0)
      v12 = 1;
    if (v9 > *((float *)this + 904) && *((char *)this + 3713) > 0)
      v12 = 1;
    if (v12) {
      if (v9 >= *((float *)this + 904))
        *((_BYTE *)this + 3713) = 1;
      else
        *((_BYTE *)this + 3713) = -1;
      v57 = 1.0;
      if (*((float *)this + 904) == 0.0) {
        v13 = 0.0;
      } else if (*((float *)this + 904) <= 0.0) {
        v13 = -1.0;
      } else {
        v13 = 1.0;
      }
      if (v9 == 0.0) {
        v14 = 0.0;
      } else if (v9 <= 0.0) {
        v14 = -1.0;
      } else {
        v14 = 1.0;
      }
      if (v13 != v14)
        v9 = 0.0;
    } else {
      *((_BYTE *)this + 3713) = 0;
    }
    v15 = *((float *)this + 904) - v9;
    if (v15 < 0.0)
      v15 = -v15;
    if (v15 >= v57) {
      if (v9 >= *((float *)this + 904))
        v16 = v57 + *((float *)this + 904);
      else
        v16 = *((float *)this + 904) - v57;
      *((float *)this + 904) = v16;
    } else {
      *((float *)this + 904) = v9;
    }
    goto LABEL_124;
  }
  if (v2 >= 0.0)
    v55 = *(float *)(this[2672] + 32);
  else
    v55 = -v2;
  v50 = 1.0;
  if (gSpeedSensitive) {
    if (*((float *)this + 1036) > 50.0) {
      if (*((float *)this + 1036) < 100.0)
        v50 = 1.0 - (*((float *)this + 1036) - 50.0) * 0.001;
      else
        v50 = 0.94999999;
    } else {
      v50 = 1.0;
    }
  }
  switch (this[934]) {
  case 0:
    if (v2 == 0.0) {
      v58 = 0.0;
    } else {
      v58 = 1.0;
      if (v2 <= 0.0)
        v58 = -1.0;
    }
    *((float *)this + 904) = (pow(11.0, v55) - 1.0) * v58 * 0.1 * v50 * -0.078539819;
    break;
  case 1:
    if (v2 == 0.0) {
      v59 = 0.0;
    } else {
      v59 = 1.0;
      if (v2 <= 0.0)
        v59 = -1.0;
    }
    v17 = (pow(11.0, v55) - 1.0) * v59 * 0.1;
    goto LABEL_109;
  case 2:
    if (v2 == 0.0) {
      v60 = 0.0;
    } else {
      v60 = 1.0;
      if (v2 <= 0.0)
        v60 = -1.0;
    }
    v17 = (pow(2.0, v55) - 1.0) * v60;
  LABEL_109:
    *((float *)this + 904) = v17 * v50 * -0.087266468;
    break;
  case 3:
    if (v2 == 0.0) {
      v61 = 0.0;
    } else {
      v61 = 1.0;
      if (v2 <= 0.0)
        v61 = -1.0;
    }
    *((float *)this + 904) = (pow(2.0, v55) - 1.0) * v61 * v50 * -0.095993109;
    break;
  case 4:
    *((float *)this + 904) = v50 * v2 * -0.087266468;
    break;
  case 5:
    *((float *)this + 904) = v50 * v2 * -0.10471976;
    break;
  case 6:
    *((float *)this + 904) = v50 * v2 * -0.12217305;
    break;
  default:
    if (v2 == 0.0) {
      v18 = 0.0;
    } else if (v2 <= 0.0) {
      v18 = -1.0;
    } else {
      v18 = 1.0;
    }
    *((float *)this + 904) = v2 * v2 * v18 * v50 * -0.1308997;
    break;
  }
LABEL_124:
  v56 = *((float *)this + 905);
  if (v56 < 800.0)
    this[905] = 1145569280;
  if (!this[920]) {
    v22 = this[924];
    if (v22 > 0 && (v23 = (int *)this[2672], (*v23 & 0x200000) != 0)) {
      meth_10035FA0(v23, 0x200000);
      v24 = this[924] - 1;
    } else {
      if (v22 >= this[918])
        goto LABEL_145;
      v25 = (int *)this[2672];
      if ((*v25 & 0x100000) == 0 || (*v25 & 0x20000) != 0)
        goto LABEL_145;
      meth_10035FA0(v25, 0x100000);
      v24 = this[924] + 1;
    }
    this[924] = v24;
    goto LABEL_145;
  }
  v62 = 6000.0;
  v19 = 4000.0;
  if ((*(_WORD *)&gConfigJoystickPtr->gap8[4] & 0x8000) != 0) {
    v51 = *(float *)(this[2672] + 28);
    if (v51 > 0.40000001) {
      v20 = 4000.0 - v51 * -2000.0;
      v62 = v20;
      v19 = v20 - 2000.0;
    }
  }
  v21 = this[924];
  if (v21 <= 1 || v19 <= *((float *)this + 905)) {
    if (v21 < this[918] && *((float *)this + 905) > (double)v62 &&
        (*(_DWORD *)this[2672] & 0x20000) == 0)
      this[924] = v21 + 1;
  } else {
    this[924] = v21 - 1;
  }
LABEL_145:
  v26 = 0.0;
  if (gGameMode == GAME_MODE_1) {
    if (!this[1022])
      goto LABEL_161;
    v27 = 0.0;
    if (dword_100B36F8 > 0) {
      v28 = &dword_10ACD4F8;
      v29 = dword_100B36F8;
      do {
        v30 = *v28;
        if (*v28) {
          if (v27 < *(float *)(v30 + 4084))
              v27 = *(float *)(v30 + 4084);
        } else if (v27 < *((float *)v28 - 4)) {
          v27 = *((float *)v28 - 4);
        }
        v28 += 32;
        --v29;
      } while (v29);
    }
    v31 = v27 - *((float *)this + 1021);
    if (v31 < 0.0)
      v31 = -v31;
    v26 = v31 * 0.5 - 18.0;
    if (v26 < 0.0) {
      v26 = 0.0;
      goto LABEL_161;
    }
    if (v26 > 30.0)
      goto LABEL_160;
  } else if (gGameMode == GAME_MODE_6) {
    v47 = this[1022];
    if (v47) {
      if (v47 != 1) {
      LABEL_160:
        v26 = 30.0;
        goto LABEL_161;
      }
      v26 = 20.0;
    } else {
      v26 = 0.0;
    }
  }
LABEL_161:
  v32 = v26 +
        ((*((float *)this + 913) * *((float *)this + 905) + *((float *)this + 914)) *
             *((float *)this + 905) +
         *((float *)this + 915)) *
            *((float *)this + 905) +
        *((float *)this + 916);
  if (!this[920])
    v32 = v32 * 1.03;
  v33 = (float *)this[2672];
  if ((*(_DWORD *)v33 & 0x10000) == 0)
    v32 = 0.0;
  v34 = 7.0;
  if ((*(_WORD *)&gConfigJoystickPtr->gap8[4] & 0x8000) != 0 && v33[7] > 0.0)
    v34 = v33[7] * 7.0;
  v35 = this[960];
  *((float *)this + 922) = v34 * v32;
  if ((*(_BYTE *)(v35 + 104) & 1) != 0) {
    this[924] = 0;
  } else if (!this[924]) {
    this[924] = 1;
  }
  v36 = this[924];
  v37 = *v33;
  if (v36) {
    if ((LODWORD(v37) & 0x20000) != 0)
      v38 = *((float *)this + 907) * *((float *)this + 917) *
            (*((float *)this + 464) * 0.15915494) * -60.0;
    else
      v38 = *(float *)&this[v36 + 906] * *((float *)this + 917) *
            (*((float *)this + 464) * 0.15915494) * -60.0;
    *((float *)this + 905) = v38;
  } else {
    v39 = *((float *)this + 905);
    if ((LODWORD(v37) & 0x10000) != 0)
      v40 = v39 - -300.0;
    else
      v40 = v39 - 200.0;
    *((float *)this + 905) = v40;
    this[922] = 0;
  }
  if (*((float *)this + 905) < 0.0)
    *((float *)this + 905) = -*((float *)this + 905);
  if (*((float *)this + 905) < 900.0)
    this[905] = 1147207680;
  if (*((float *)this + 905) > 8000.0)
    this[905] = 1174011904;
  if ((*(_WORD *)&gConfigJoystickPtr->gap8[4] & 0x8000) != 0 && !v36) {
    v41 = v33[7] * 8000.0;
    if (v41 < 900.0)
      v41 = 900.0;
    if (v41 < *((float *)this + 905))
      *((float *)this + 905) = v41;
  }
  v42 = *((float *)this + 905) - v56;
  v44 = v42;
  if (v45)
    v44 = -v42;
  if (v44 > 400.0) {
    if (v42 == 0.0) {
      v46 = 0.0;
    } else if (v42 <= 0.0) {
      v46 = -1.0;
    } else {
      v46 = 1.0;
    }
    v42 = v46 * 400.0;
  }
  this[923] = 0;
  *((float *)this + 905) = v42 + v56;
  if ((*(_DWORD *)v33 & 0x40000) != 0)
    this[923] = -938952704;
}
// 100621EE: variable 'v8' is possibly undefined
// 10062B63: variable 'v45' is possibly undefined
// 100B3664: using guessed type int gSpeedSensitive;
// 100B3668: using guessed type int dword_100B3668;
// 100B366C: using guessed type int dword_100B366C;
// 100B3670: using guessed type float flt_100B3670;
// 100B36F8: using guessed type int dword_100B36F8;
// 10AA346C: using guessed type __int16 word_10AA346C;
// 10ACD4F8: using guessed type int dword_10ACD4F8;

//----- (10062C50) --------------------------------------------------------
void __thiscall meth_10062C50(_DWORD *this) {
  char v2;  // al
  void *v3; // ecx
  void *v4; // ecx
  void *v5; // ecx

  this[929] = 1;
  this[904] = 0;
  this[924] = 0;
  this[905] = 0;
  if (this[2673]) {
    this[96] = 1;
    this[100] = 1148846080;
    this[97] = 1080033280;
    this[98] = 0x40000000;
    this[99] = 1069547520;
    sub_10074870((int)(this + 89));
    this[119] = 0;
    this[120] = 0;
    this[121] = 0x40000000;
    this[122] = 0;
    this[123] = 0;
    this[124] = 0;
    this[125] = 1065353216;
    this[126] = 0;
    this[127] = 0;
    this[128] = 0;
    this[129] = 0;
    this[130] = 0;
    this[131] = 0;
    math_10074450((float *)this + 136, (float *)this + 119);
    *((float *)this + 199) = (20.0 - (double)(int)this[933] * -4.0) * 16000.0;
    this[200] = -985956352;
    this[338] = 0;
    this[323] = 0;
    this[333] = 0;
    this[227] = 2;
    this[231] = 0;
    this[228] = 0;
    this[229] = 0;
    this[230] = 0;
    sub_10074870((int)(this + 220));
    this[250] = *(_DWORD *)(this[2673] + 33016);
    this[251] = *(_DWORD *)(this[2673] + 33020);
    this[252] = -1110651699;
    this[253] = 0;
    this[254] = 0;
    this[255] = 0;
    this[256] = 1065353216;
    this[257] = 0;
    this[258] = 0;
    this[259] = 0;
    this[260] = 0;
    this[261] = 0;
    this[262] = 0;
    math_10074450((float *)this + 267, (float *)this + 250);
    this[600] = 0;
    this[585] = 0;
    this[595] = 0;
    this[489] = 2;
    this[493] = 0;
    this[490] = 0;
    this[491] = 0;
    this[492] = 0;
    sub_10074870((int)(this + 482));
    this[512] = *(_DWORD *)(this[2673] + 33016);
    *((float *)this + 513) = -*(float *)(this[2673] + 33020);
    this[514] = -1110651699;
    this[515] = 0;
    this[516] = 0;
    this[517] = 0;
    this[518] = 1065353216;
    this[519] = 0;
    this[520] = 0;
    this[521] = 0;
    this[522] = 0;
    this[523] = 0;
    this[524] = 0;
    math_10074450((float *)this + 529, (float *)this + 512);
    this[469] = 0;
    this[454] = 0;
    this[464] = 0;
    this[358] = 2;
    this[362] = 0;
    this[359] = 0;
    this[360] = 0;
    this[361] = 0;
    sub_10074870((int)(this + 351));
    this[381] = *(_DWORD *)(this[2673] + 33004);
    this[382] = *(_DWORD *)(this[2673] + 33008);
    this[383] = -1110651699;
    this[384] = 0;
    this[385] = 0;
    this[386] = 0;
    this[387] = 1065353216;
    this[388] = 0;
    this[389] = 0;
    this[390] = 0;
    this[391] = 0;
    this[392] = 0;
    this[393] = 0;
    math_10074450((float *)this + 398, (float *)this + 381);
    this[731] = 0;
    this[716] = 0;
    this[726] = 0;
    this[620] = 2;
    this[624] = 0;
    this[621] = 0;
    this[622] = 0;
    this[623] = 0;
    sub_10074870((int)(this + 613));
    this[643] = *(_DWORD *)(this[2673] + 33004);
    *((float *)this + 644) = -*(float *)(this[2673] + 33008);
    this[645] = -1110651699;
    this[646] = 0;
    this[647] = 0;
    this[648] = 0;
    this[649] = 1065353216;
    this[650] = 0;
    this[651] = 0;
    this[652] = 0;
    this[653] = 0;
    this[654] = 0;
    this[655] = 0;
    math_10074450((float *)this + 660, (float *)this + 643);
    this[90] = this + 220;
    this[91] = this + 482;
    this[92] = this + 351;
    this[93] = this + 613;
    sub_100746E0(this + 744, 0, 0, 0, -1077936128, -1082130432, 0, 1);
    sub_100746E0(this + 760, 0, 0, 0, -1077936128, 1065353216, 0, 1);
    sub_100746E0(this + 752, 0, 0, 0, 1069547520, -1082130432, 0, 1);
    sub_100746E0(this + 768, 0, 0, 0, 1069547520, 1065353216, 0, 1);
    sub_100746E0(this + 808, 0, 0, -965645568, 0, 0, 0, 0);
    sub_100746E0(this + 816, 0, 0, -1026686321, 0, 0, 0, 0);
    sub_100746E0(this + 824, 0, 0, -1026686321, 0, 0, 0, 0);
    this[744] = this + 760;
    this[760] = this + 752;
    this[752] = this + 768;
    this[95] = this + 744;
    this[768] = this + 808;
    this[808] = 0;
    sub_100746E0(this + 840, 0, 0, 0, 0, 0, 0, 1);
    sub_100746E0(this + 856, 0, 0, 0, 0, 0, 0, 1);
    sub_100746E0(this + 848, 0, 0, 0, 0, 0, 0, 1);
    sub_100746E0(this + 864, 0, 0, 0, 0, 0, 0, 1);
    this[226] = this + 840;
    this[357] = this + 848;
    this[619] = this + 864;
    this[840] = this + 824;
    this[848] = this + 816;
    this[864] = this + 816;
    this[816] = 0;
    this[488] = this + 856;
    this[856] = this + 824;
    this[824] = 0;
    sub_100746E0(this + 776, 0, 0, 0, -1077936128, -1082130432, 0, 1);
    sub_100746E0(this + 792, 0, 0, 0, -1077936128, 1065353216, 0, 1);
    sub_100746E0(this + 784, 0, 0, 0, 1069547520, -1082130432, 0, 1);
    sub_100746E0(this + 800, 0, 0, 0, 1069547520, 1065353216, 0, 1);
    sub_100746E0(this + 832, 0, 0, 0, 0, 0, 0, 0);
    this[776] = this + 792;
    this[792] = this + 784;
    this[784] = this + 800;
    this[800] = this + 832;
    v2 = *((_BYTE *)this + 3728);
    this[832] = 0;
    *((_BYTE *)this + 3713) = 0;
    this[927] = 0;
    this[925] = 0;
    *((_BYTE *)this + 865) = v2;
    meth_DebugPrint(this + 832);
    meth_DebugPrint(v3);
    meth_DebugPrint(v4);
    meth_DebugPrint(v5);
  }
  *((_BYTE *)this + 3712) = 0;
  *((_BYTE *)this + 3704) = 0;
}
// 1006334A: variable 'v3' is possibly undefined
// 1006337B: variable 'v4' is possibly undefined
// 100633AC: variable 'v5' is possibly undefined

//----- (100633E0) --------------------------------------------------------
void **sub_100633E0() {
  void **result; // eax
  void **v1;     // edx
  void *v2;      // ecx

  result = (void **)off_100B3700;
  if (off_100B3700) {
    result = &off_100B3700;
    v1 = &off_100B3700;
    do {
      if (*result < (char *)v1[1] + (int)*result)
        memset(*result, 0, (unsigned int)v1[1]);
      v2 = v1[2];
      v1 += 2;
      result = v1;
    } while (v2);
  }
  return result;
}
// 100B3700: using guessed type void *off_100B3700;

//----- (10063420) --------------------------------------------------------
enum MACRO_GAME_MODE __thiscall meth_10063420(_DWORD *this) {
  enum MACRO_GAME_MODE v1;     // edx
  enum MACRO_GAME_MODE result; // eax
  int v3;                      // edi
  int i;                       // eax
  __int16 v5;                  // [esp+10h] [ebp-4h]

  v1 = *((unsigned __int8 *)dword_10ACED34 + 4);
  result = v1;
  if ((unsigned int)v1 > GAME_MODE_3)
    result = GAME_MODE_3;
  v3 = this[80];
  if (v3 < dword_100B4050) {
    result = gGameMode;
    if (gGameMode == GAME_MODE_0)
      result = meth_10076AE0(this, byte_100B381C[24 * v1]);
  } else if (gGameMode == GAME_MODE_1 || gGameMode == GAME_MODE_6) {
    this[2666] = dword_10AD0850[0];
  } else {
    v5 = word_100B381E[12 * result];
    for (i = 0; i < 16; ++i) {
      if ((v5 & 1) != 0)
        break;
      v5 >>= 1;
    }
    if (i == 16)
      i = 5;
    if (v3 <= dword_100B4050)
      result = meth_10076AE0(this, byte_100B381C[24 * v1 - dword_100B4050 + v3]);
    else
      result = meth_10076AE0(this, i);
  }
  return result;
}
// 100B381E: using guessed type __int16 word_100B381E[];
// 100B4050: using guessed type int dword_100B4050;
// 10AD0850: using guessed type int dword_10AD0850[];

//----- (100634F0) --------------------------------------------------------
enum MACRO_GAME_MODE __thiscall meth_100634F0(_DWORD *this) {
  int v2;                      // eax
  char v3;                     // cl
  char v4;                     // bl
  _DWORD *v5;                  // eax
  int v6;                      // ecx
  int v7;                      // eax
  enum MACRO_GAME_MODE result; // eax

  meth_10076C90((char *)this);
  v2 = ((char *)this - (char *)&stru_10ACDEA8) / 11112;
  this[80] = v2;
  if (gGameMode != GAME_MODE_6) {
    v3 = byte_100B37D2[3 * v2];
    v4 = byte_100B37D0[3 * v2];
    *((_BYTE *)this + 10669) = byte_100B37D1[3 * v2];
    *((_BYTE *)this + 10668) = v4;
    *((_BYTE *)this + 10670) = v3;
  }
  if (v2 >= 2) {
    this[931] = 0;
  } else {
    v5 = (_DWORD *)((char *)&unk_10AF9890 + 332 * v2);
    this[931] = v5;
    *v5 = 0;
    *(_BYTE *)(this[931] + 4) = 0;
    *(_BYTE *)(this[931] + 5) = 0;
    *(_WORD *)(this[931] + 240) = 258;
    *(_WORD *)(this[931] + 242) = 4;
    *(_WORD *)(this[931] + 244) = 1;
    *(_DWORD *)(this[931] + 252) = 1;
    *(_DWORD *)(this[931] + 248) = 0;
    *(_DWORD *)(this[931] + 260) = 1;
    *(_DWORD *)(this[931] + 256) = 2;
    *(_DWORD *)(this[931] + 264) = 0;
    v6 = 0;
    *(_DWORD *)(this[931] + 264) = 5;
    if (dword_100AAB18 > 0) {
      v7 = 268;
      do {
        ++v6;
        *(_DWORD *)(this[931] + v7 - 92) = 0;
        *(_DWORD *)(this[931] + v7) = 0;
        v7 += 4;
      } while (v6 < dword_100AAB18);
    }
  }
  result = meth_10063420(this);
  this[930] = 0;
  return result;
}
// 100AAB18: using guessed type int dword_100AAB18;

//----- (10063660) --------------------------------------------------------
void __thiscall meth_10063660(_DWORD *this) {
  int v2;   // ecx
  int v3;   // eax
  int v4;   // edx
  int v5;   // [esp+0h] [ebp-18h]
  int v6;   // [esp+8h] [ebp-10h]
  float v7; // [esp+8h] [ebp-10h]

  if ((int)this[215] < 0 || gUnk06594.field_4900 - 10.0 > *((float *)this + 14)) {
    meth_10065630(this);
    meth_10062C50(this);
    v2 = this[995];
    v3 = this[996];
    v4 = v2 + 40 * v3;
    *(float *)&v6 = *(float *)(v4 + 84) - -2.0;
    if (gGameMode == GAME_MODE_2) {
      meth_10076420((float *)this, *(_DWORD *)(v4 + 76), *(_DWORD *)(v2 + 40 * (v3 + 2)), v6);
    } else {
      *(float *)&v5 = *(float *)(v4 + 76) - (double)(int)this[80] * -0.0099999998;
      meth_10076420((float *)this, v5, *(_DWORD *)(v2 + 40 * (v3 + 2)), v6);
    }
    v7 = sub_1003B7B0(*((float *)this + 997), *((float *)this + 998));
    meth_100764C0((float *)this, v7);
    meth_100767A0(this, 0, 0, 0);
    meth_100769A0(this, 0, 0, 0);
    *(_DWORD *)(this[90] + 412) = 0;
    *(_DWORD *)(this[90] + 436) = 0;
    *(_BYTE *)(this[90] + 416) = 2;
    *(_DWORD *)(this[91] + 412) = 0;
    *(_DWORD *)(this[91] + 436) = 0;
    *(_BYTE *)(this[91] + 416) = 2;
    *(_DWORD *)(this[93] + 412) = 0;
    *(_DWORD *)(this[93] + 436) = 0;
    *(_BYTE *)(this[93] + 416) = 2;
    *(_DWORD *)(this[92] + 412) = 0;
    *(_DWORD *)(this[92] + 436) = 0;
    *(_BYTE *)(this[92] + 416) = 2;
    this[936] = 0;
    this[937] = 0;
    this[938] = 0;
    this[939] = -180;
    this[215] = 0;
    *((_BYTE *)this + 10671) = 2;
    this[2668] = 1036831949;
    meth_100015D0((#479 *)this, COERCE_FLOAT(this + 2528), 1.0);
    this[2619] = this[2540];
    this[2620] = this[2541];
    this[2621] = this[2542];
    this[990] = 1;
  }
}

//----- (10063FE0) --------------------------------------------------------
void __cdecl sub_10063FE0(int a1) {
  int v1;              // ecx
  double v3;           // st7
  unsigned __int8 v4;  // c0
  unsigned __int8 v5;  // c3
  double v6;           // st7
  int v7;              // eax
  int v8;              // eax
  int v9;              // eax
  int v10;             // edx
  float *v11;          // ecx
  double v12;          // st7
  double v13;          // st5
  double v14;          // rt2
  double v15;          // st5
  double v16;          // st6
  double v18;          // st5
  unsigned __int8 v19; // c0
  unsigned __int8 v20; // c3
  double v21;          // st7
  float v22;           // eax
  float v23;           // edx
  int *v24;            // ecx
  int *v25;            // ecx
  int *v26;            // ecx
  int *v27;            // ecx
  int v28;             // ecx
  double v30;          // st7
  unsigned __int8 v31; // c0
  unsigned __int8 v32; // c3
  double v33;          // st7
  int v34;             // eax
  int v35;             // edx
  int v36;             // ecx
  int v37;             // edx
  int *v38;            // eax
  int v39;             // ecx
  double v40;          // st7
  int v41;             // edx
  double v42;          // st7
  double v43;          // st7
  double v44;          // st6
  double v45;          // st7
  float v46;           // [esp+0h] [ebp-44h]
  int v47;             // [esp+0h] [ebp-44h]
  float v48;           // [esp+0h] [ebp-44h]
  float v49;           // [esp+0h] [ebp-44h]
  float v50;           // [esp+14h] [ebp-30h]
  float v51;           // [esp+18h] [ebp-2Ch]
  float v52;           // [esp+1Ch] [ebp-28h]
  float v53;           // [esp+1Ch] [ebp-28h]
  float v54;           // [esp+1Ch] [ebp-28h]
  int v55;             // [esp+20h] [ebp-24h] BYREF
  float v56;           // [esp+24h] [ebp-20h]
  float v57;           // [esp+28h] [ebp-1Ch]
  int v58;             // [esp+2Ch] [ebp-18h] BYREF
  int v59;             // [esp+30h] [ebp-14h]
  int v60;             // [esp+34h] [ebp-10h]
  float v61[3];        // [esp+38h] [ebp-Ch] BYREF

  if (dword_106C3364)
    *(float *)(*(_DWORD *)(a1 + 10688) + 32) = -*(float *)(*(_DWORD *)(a1 + 10688) + 32);
  v1 = *(_DWORD *)(a1 + 10688);
  v3 = *(float *)(v1 + 32);
  if (v4 | v5) {
    if (v3 >= -0.1) {
      *(_DWORD *)(a1 + 10016) = 0;
    } else {
      v6 = (*(float *)(v1 + 32) - -0.1) * 1.1111112;
      *(float *)(a1 + 10016) = v6 * v6;
    }
  } else {
    *(float *)(a1 + 10016) = -((v3 - 0.1) * 1.1111112 * ((v3 - 0.1) * 1.1111112));
  }
  if ((*(_BYTE *)(*(_DWORD *)(a1 + 3840) + 104) & 2) != 0) {
    v7 = *(_DWORD *)(a1 + 320);
    if (v7 == dword_106C1638 || dword_100AA8B4 > 1 && v7 == dword_106C1690) {
      if (dword_10AF9BB0)
        goto LABEL_47;
      goto LABEL_25;
    }
  }
  if (gGameMode == GAME_MODE_4 || gGameMode == GAME_MODE_5 || dword_106909E0) {
    v8 = *(_DWORD *)(a1 + 320);
    if (v8 == dword_106C1638 || dword_100AA8B4 > 1 && v8 == dword_106C1690) {
      if (dword_10AF9BB0) {
        --dword_10AF9BB0;
      LABEL_45:
        if ((**(_DWORD **)(a1 + 10688) & 0xF000000) != 0)
          dword_10AF9BB0 = 450;
        goto LABEL_47;
      }
    LABEL_25:
      v10 = *(_DWORD *)&gUnk06594.gap493C[20];
      v50 = 16777216.0;
      if (*(int *)&gUnk06594.gap493C[20] > 0) {
        v11 = (float *)(*(_DWORD *)&gUnk06594.gap493C[16] + 8);
        do {
          v13 = *(float *)(a1 + 48) - *(v11 - 2);
          v51 = v13;
          v14 = v13;
          v15 = *(float *)(a1 + 52) - *(v11 - 1);
          v52 = v15;
          v16 = v14 * v51;
          v18 = v15 * v52;
          if (v19 | v20) {
              v12 = *(float *)(a1 + 56) - *v11;
              v21 = v12 * v12 + v18 + v16;
              if (v21 < v50) {
                  v50 = v21;
                  v55 = *((int *)v11 - 2);
                  v56 = *(v11 - 1);
                  v57 = *v11;
              }
          }
          v11 += 3;
          --v10;
        } while (v10);
      }
      if (v50 >= 22500.0) {
        if (*(_DWORD *)(a1 + 10036) == a1 + 10248) {
          *(_DWORD *)(a1 + 3960) = 1;
          if (dword_10AF9BB8 || dword_10AF9BB4)
              *(_DWORD *)(a1 + 10036) = a1 + 10044;
          else
              *(_DWORD *)(a1 + 10036) = a1 + 10112;
          dword_10AF9BB0 = 60;
          dword_10AF9BB8 = dword_10AF9BB8 == 0;
        }
      } else {
        if (*(_DWORD *)(a1 + 10036) != a1 + 10248 || *(float *)(a1 + 10296) != *(float *)&v55 ||
            *(float *)(a1 + 10300) != v56 || *(float *)(a1 + 10304) != v57) {
          *(_DWORD *)(a1 + 3960) = 1;
        }
        v22 = v56;
        *(float *)(a1 + 10296) = *(float *)&v55;
        v23 = v57;
        *(float *)(a1 + 10300) = v22;
        *(float *)(a1 + 10304) = v23;
        *(_DWORD *)(a1 + 10036) = a1 + 10248;
      }
      goto LABEL_45;
    }
  }
  v9 = *(_DWORD *)(a1 + 320);
  if (v9 == dword_106C1638 || dword_100AA8B4 > 1 && v9 == dword_106C1690)
    dword_10AF9BB0 = 0;
LABEL_47:
  v24 = *(int **)(a1 + 10688);
  if ((*v24 & 0x1000000) != 0) {
    *(_DWORD *)(a1 + 10036) = a1 + 10044;
    *(_DWORD *)(a1 + 3960) = 1;
    meth_10035FA0(v24, 0x1000000);
  }
  if ((**(_DWORD **)(a1 + 10688) & 0x2000000) != 0) {
    meth_10001970((#481 *)a1);
    v25 = *(int **)(a1 + 10688);
    *(_DWORD *)(a1 + 3960) = 1;
    meth_10035FA0(v25, 0x2000000);
  }
  v26 = *(int **)(a1 + 10688);
  if ((*v26 & 0x4000000) != 0) {
    *(_DWORD *)(a1 + 10036) = a1 + 10112;
    *(_DWORD *)(a1 + 3960) = 1;
    meth_10035FA0(v26, 0x4000000);
  }
  if (dword_100AA8B4 == 1) {
    v27 = *(int **)(a1 + 10688);
    if ((*v27 & 0x8000000) != 0) {
      *(_DWORD *)(a1 + 10036) = a1 + 10180;
      *(_DWORD *)(a1 + 3960) = 1;
      meth_10035FA0(v27, 0x8000000);
    }
  }
  v28 = *(_DWORD *)(a1 + 10688);
  v30 = *(float *)(v28 + 28);
  if (v31 | v32) {
    if (v30 >= -0.25) {
      *(_DWORD *)(a1 + 10024) = 0;
    } else {
      v33 = (*(float *)(v28 + 28) - -0.25) * 1.3333334;
      *(float *)(a1 + 10024) = -(v33 * v33);
    }
  } else {
    *(float *)(a1 + 10024) = (v30 - 0.25) * 1.3333334 * ((v30 - 0.25) * 1.3333334);
  }
  v34 = *(_DWORD *)(a1 + 3964);
  if (v34)
    *(_DWORD *)(a1 + 10028) = 0;
  if ((BYTE1(*(_DWORD *)v28) & 0x80u) == 0) {
    if (v34) {
      v35 = *(_DWORD *)(a1 + 10024);
      *(_DWORD *)(a1 + 10024) = 0;
      *(_DWORD *)(a1 + 10020) = v35;
    }
  } else if (!v34) {
    *(_DWORD *)(a1 + 10024) = 1065353216;
  }
  if ((*(_BYTE *)v28 & 8) != 0)
    *(_DWORD *)(a1 + 10024) = 1065353216;
  if ((*(_BYTE *)v28 & 2) != 0)
    *(_DWORD *)(a1 + 10024) = -1082130432;
  if ((*(_BYTE *)v28 & 1) != 0) {
    if (v34)
      *(_DWORD *)(a1 + 10028) = 1065353216;
    else
      *(_DWORD *)(a1 + 10016) = -1082130432;
  }
  if ((*(_BYTE *)v28 & 4) != 0) {
    if (v34)
      *(_DWORD *)(a1 + 10028) = -1082130432;
    else
      *(_DWORD *)(a1 + 10016) = 1065353216;
  }
  if (gGameMode == GAME_MODE_5) {
    sub_1003B020(a1 + 48, a1, 15.0);
    meth_10064350((_DWORD *)a1);
    v36 = *(_DWORD *)(a1 + 3880);
    v37 = *(_DWORD *)(a1 + 3884);
    v58 = *(_DWORD *)(a1 + 3876);
    v59 = v36;
    v60 = v37;
    sub_1003B020(a1 + 48, a1, -15.0);
    meth_10064350((_DWORD *)a1);
    **(_DWORD **)(a1 + 10688) &= 0xF0C0FFFF;
    if (*(float *)(a1 + 4084) >= 114.5) {
      v46 = (168.5 - *(float *)(a1 + 4084)) * 0.5;
      sub_1003ACE0((int)&v55, a1 + 3876, v46);
      v38 = *(int **)(a1 + 10688);
      v39 = *v38;
      if (*(float *)(a1 + 4084) <= 167.5) {
        *v38 = v39 | 0x80000;
      } else {
        *v38 = v39 | 0x40000;
        if (*(float *)(a1 + 4084) > 168.39999) {
          v57 = 0.0;
          v56 = 0.0;
          *(float *)&v55 = 0.0;
        }
      }
    } else {
      sub_1003ACE0((int)&v55, a1 + 3876, 27.0);
    }
    v40 = sub_1003AC90((float *)&v58, (float *)(a1 + 16));
    v47 = LODWORD(v57);
    *(float *)(a1 + 3616) = v40 * 3.0;
    *(float *)&v55 = *(float *)&v55 - *(float *)(a1 + 3916) * 0.2;
    v56 = v56 - *(float *)(a1 + 3920) * 0.2;
    meth_100767A0((_DWORD *)a1, v55, SLODWORD(v56), v47);
  }
  if ((dword_118ABAD0 & 0x10000) != 0)
    *(_BYTE *)(a1 + 870) = 0x80;
  if ((dword_118ABAD0 & 0x20000) != 0)
    *(_BYTE *)(a1 + 871) = 0x80;
  if ((dword_118ABAD0 & 0x40000) != 0)
    *(_BYTE *)(a1 + 872) = 0x80;
  if ((dword_118ABAD0 & 0x80000) != 0)
    *(_BYTE *)(a1 + 873) = 0x80;
  if ((dword_118ABAD0 & 0x80u) != 0)
    *(_BYTE *)(a1 + 874) = 0x80;
  meth_10075F10(a1);
  if (!*(_DWORD *)(a1 + 3964)) {
    sub_1003AF40((float *)&v55, (float *)(a1 + 48), (float *)a1);
    sub_1003AF70((float *)&v55, (float *)(a1 + 16));
    sub_1003AF40(v61, (float *)(a1 + 4152), (float *)(a1 + 4164));
    v58 = *(_DWORD *)(a1 + 4176);
    v41 = *(_DWORD *)(a1 + 4184);
    v59 = *(_DWORD *)(a1 + 4180);
    v60 = v41;
    sub_1003AEE0((float *)(a1 + 4176), (float *)(a1 + 4152), (float *)&v55);
    v42 = sub_1003B170((float *)(a1 + 4176));
    if (v42 != 0.0) {
      v48 = v42 / (v42 - -1.0) / v42;
      sub_1003AD10(a1 + 4176, v48);
    }
    v53 = sub_1003B0E0((float *)(a1 + 4176), (float *)&v58);
    v54 = sqrt_(v53);
    v43 = v54 / (sub_1003B170((float *)(a1 + 4164)) - -1.0);
    if (v43 > 0.025) {
      v49 = v43 + v43;
      sub_100347BA(*(_DWORD *)(a1 + 320), v49);
    }
    v44 = v56;
    v45 = v57;
    *(float *)(a1 + 4152) = *(float *)&v55;
    *(float *)(a1 + 4156) = v44;
    *(float *)(a1 + 4160) = v45;
    sub_1003AEE0((float *)(a1 + 4164), (float *)(a1 + 4152), v61);
    *(float *)(a1 + 4172) = *(float *)(a1 + 4172) - 0.32666668;
  }
  if (dword_118ABDCC) {
    if ((*(_BYTE *)(*(_DWORD *)(a1 + 3840) + 104) & 3) == 0 && !dword_106909E0)
      *(_DWORD *)(a1 + 860) = -1;
    dword_118ABDCC = 0;
  }
  meth_10063660((_DWORD *)a1);
}
// 10063876: variable 'v4' is possibly undefined
// 10063876: variable 'v5' is possibly undefined
// 100639B7: variable 'v19' is possibly undefined
// 100639B7: variable 'v20' is possibly undefined
// 10063BBF: variable 'v31' is possibly undefined
// 10063BBF: variable 'v32' is possibly undefined
// 100AA8B4: using guessed type int dword_100AA8B4;
// 106909E0: using guessed type int dword_106909E0;
// 106C1638: using guessed type int dword_106C1638;
// 106C1690: using guessed type int dword_106C1690;
// 106C3364: using guessed type int dword_106C3364;
// 10AF9BB0: using guessed type int dword_10AF9BB0;
// 10AF9BB4: using guessed type int dword_10AF9BB4;
// 10AF9BB8: using guessed type int dword_10AF9BB8;
// 118ABAD0: using guessed type int dword_118ABAD0;
// 118ABDCC: using guessed type int dword_118ABDCC;

//----- (10063FF0) --------------------------------------------------------
int __thiscall meth_10063FF0(_DWORD *this, int a2, int a3, int a4) {
  int v4;          // esi
  int v5;          // ebx
  int v6;          // eax
  int v7;          // ebp
  unsigned int v8; // ebp
  int v9;          // esi
  int *v10;        // edi
  int v11;         // edx
  double v12;      // st7
  int v13;         // esi
  int i;           // eax
  int *v15;        // eax
  int v16;         // eax
  int v17;         // esi
  int v18;         // eax
  int v20;         // [esp+10h] [ebp-1Ch]
  int v22;         // [esp+18h] [ebp-14h]
  float v23[3];    // [esp+20h] [ebp-Ch] BYREF

  v4 = a4;
  v5 = 0;
  v20 = 0;
  if (a4) {
    v6 = a3;
  } else {
    a4 = gUnk06594.field_4938;
    v6 = 0;
    v4 = gUnk06594.field_4938;
    a3 = 0;
  }
  v7 = a2;
  if (a2) {
    if (a2 > 8 || (*(_BYTE *)(v4 + 22) & 1) != 0)
      return 0;
    v8 = 12 * a2;
    v9 = v4 + 40 * v6;
    sub_1003AFA0((int)&flt_10AF97DC[3 * a2], v9 + 64, v9 + 88, 0.2);
    v10 = (int *)((char *)&unk_10AF971C + 12 * a2);
    *v10 = *(_DWORD *)(v9 + 76);
    v10[1] = *(_DWORD *)(v9 + 80);
    v10[2] = *(_DWORD *)(v9 + 84);
    sub_1003AFA0((int)&unk_10AF977C + 12 * a2, v9 + 88, v9 + 64, 0.2);
    sub_1003B050((float *)((char *)&unk_10AF9584 + v8),
                 (float *)((char *)&unk_10AF977C + v8),
                 (float *)((char *)&unk_10AF971C + v8));
    sub_1003B050((float *)((char *)&unk_10AF9524 + v8),
                 &flt_10AF97DC[3 * a2],
                 (float *)((char *)&unk_10AF971C + v8));
    v11 = a2;
    v23[0] = (*(float *)(v9 + 64) + *(float *)(v9 + 88)) * 0.5;
    v12 = *(float *)(v9 + 92) + *(float *)(v9 + 68);
    v13 = 1;
    v23[1] = v12 * 0.5;
    if (a2 - 1 <= 1) {
    LABEL_14:
      if (v11 > dword_10AA34AC) {
        dword_10AA34AC = v11;
        dword_10AA3474 = a4;
        dword_10AF9528 = a3;
        if (v11 <= 2) {
          dword_10AF9888 = 0;
          dword_10AF9BA4 = 0;
        } else if (sub_1003BA70((float *)this + 12, flt_10AF9740, flt_10AF959C, flt_10AF9794)) {
          v11 = a2;
          dword_10AF9888 = 0;
          dword_10AF9BA4 = 1;
        } else {
          if (sub_1003BA70((float *)this + 12, flt_10AF9740, flt_10AF953C, flt_10AF97F4)) {
              v11 = a2;
              dword_10AF9888 = 1;
          } else {
              v11 = a2;
              dword_10AF9888 = 0;
          }
          dword_10AF9BA4 = 0;
        }
        dword_10AF9B28 = *v10;
        dword_10AF9B2C = v10[1];
        dword_10AF9B30 = v10[2];
        v20 = 1;
        v15 = &dword_10AF9728[3 * (v11 >> 1)];
        dword_10ACDE98 = *v15;
        dword_10ACDE9C = v15[1];
        dword_10ACDEA0 = v15[2];
        dword_10AF96BC = v11;
        qmemcpy(&unk_10AF9658, &unk_10AF9788, v8);
        qmemcpy(&unk_10AF96C8, dword_10AF9728, v8);
        qmemcpy(&unk_10AF95F8, &unk_10AF97E8, v8);
      }
    } else {
      v22 = 0;
      for (i = sub_1003BA70((float *)this + 12, v23, flt_10AF9794, flt_10AF97F4); i;
           i = sub_1003BA70((float *)this + 12, v23, &flt_10AF9794[v22], &flt_10AF97F4[v22])) {
        ++v13;
        v22 += 3;
        if (v13 >= a2 - 1) {
          v11 = a2;
          goto LABEL_14;
        }
      }
      dword_10AF9BAC = 1;
    }
    v7 = a2;
    v5 = v20;
    v4 = a4;
    v6 = a3;
  } else {
    dword_10AA34AC = 0;
    dword_10AF96B8 = 0;
    dword_10AF9BA8 = 0;
    dword_10AF9BAC = 0;
  }
  v16 = v6 + 1;
  if (v16 != *(unsigned __int16 *)(v4 + 20))
    return meth_10063FF0(this, v7 + 1, v16, v4) | v5;
  v17 = *(_DWORD *)v4;
  if (!v17) {
    v17 = gUnk06594.field_4938;
    if (!gUnk06594.field_4938)
      return v5;
  }
  do {
    v18 = meth_10063FF0(this, v7 + 1, 0, v17);
    v17 = *(_DWORD *)(v17 + 4);
    v5 |= v18;
  } while (v17);
  return v5;
}
// 10AA3474: using guessed type int dword_10AA3474;
// 10AA34AC: using guessed type int dword_10AA34AC;
// 10ACDE98: using guessed type int dword_10ACDE98;
// 10ACDE9C: using guessed type int dword_10ACDE9C;
// 10ACDEA0: using guessed type int dword_10ACDEA0;
// 10AF9528: using guessed type int dword_10AF9528;
// 10AF96B8: using guessed type int dword_10AF96B8;
// 10AF96BC: using guessed type int dword_10AF96BC;
// 10AF9728: using guessed type int dword_10AF9728[];
// 10AF9888: using guessed type int dword_10AF9888;
// 10AF9B28: using guessed type int dword_10AF9B28;
// 10AF9B2C: using guessed type int dword_10AF9B2C;
// 10AF9B30: using guessed type int dword_10AF9B30;
// 10AF9BA4: using guessed type int dword_10AF9BA4;
// 10AF9BA8: using guessed type int dword_10AF9BA8;
// 10AF9BAC: using guessed type int dword_10AF9BAC;

//----- (10064350) --------------------------------------------------------
void __thiscall meth_10064350(_DWORD *this) {
  int v2;       // eax
  int v3;       // ecx
  int v4;       // eax
  int v5;       // edx
  int v6;       // ecx
  double v7;    // st7
  int *v8;      // eax
  int v9;       // ecx
  int v10;      // edx
  int i;        // edi
  int *v12;     // eax
  float *v13;   // ebx
  float *v14;   // ebp
  int v15;      // eax
  float *v16;   // edi
  int v17;      // edx
  double v18;   // st7
  double v19;   // st7
  double v20;   // st6
  double v21;   // st7
  char v23;     // c0
  float v24;    // [esp+0h] [ebp-78h]
  float v25;    // [esp+0h] [ebp-78h]
  float v26;    // [esp+0h] [ebp-78h]
  float v27;    // [esp+0h] [ebp-78h]
  int v28;      // [esp+14h] [ebp-64h]
  float v29;    // [esp+14h] [ebp-64h]
  float v30;    // [esp+18h] [ebp-60h]
  float v31;    // [esp+18h] [ebp-60h]
  float v32;    // [esp+18h] [ebp-60h]
  float v33;    // [esp+1Ch] [ebp-5Ch]
  float v34;    // [esp+1Ch] [ebp-5Ch]
  float v35;    // [esp+1Ch] [ebp-5Ch]
  float *v36;   // [esp+20h] [ebp-58h]
  float v37;    // [esp+20h] [ebp-58h]
  float v38;    // [esp+20h] [ebp-58h]
  int v39[3];   // [esp+24h] [ebp-54h] BYREF
  int v40[3];   // [esp+30h] [ebp-48h] BYREF
  int v41[3];   // [esp+3Ch] [ebp-3Ch] BYREF
  int v42[3];   // [esp+48h] [ebp-30h] BYREF
  int v43[3];   // [esp+54h] [ebp-24h] BYREF
  float v44[3]; // [esp+60h] [ebp-18h] BYREF
  float v45[3]; // [esp+6Ch] [ebp-Ch] BYREF

  v2 = this[996];
  v3 = this[995];
  v2 *= 5;
  v30 = *(float *)(v3 + 8 * v2 + 100) - *(float *)(v3 + 8 * v2 + 140);
  sub_1003AEE0((float *)v40, (float *)(v3 + 8 * v2 + 64), (float *)(v3 + 8 * v2 + 76));
  v4 = this[995] + 40 * this[996];
  sub_1003AEE0((float *)v39, (float *)(v4 + 104), (float *)(v4 + 116));
  sub_1003B050((float *)v39, (float *)v40, (float *)v39);
  v5 = this[995];
  v40[1] = v39[0];
  v6 = 5 * this[996];
  *(float *)v40 = -*(float *)&v39[1];
  v40[2] = 0;
  sub_1003B050((float *)v39, (float *)(v5 + 8 * v6 + 76), (float *)(v5 + 8 * v6 + 116));
  sub_1003AEE0((float *)v39, (float *)this + 12, (float *)v39);
  v7 = sub_1003AC90((float *)v40, (float *)v39);
  v8 = (int *)this[995];
  if (v7 >= 0.0) {
    v10 = this[996];
    v9 = v10 - 1;
    goto LABEL_7;
  }
  v9 = this[996];
  v10 = v9 + 1;
  if (v9 + 1 != *((unsigned __int16 *)v8 + 10)) {
  LABEL_7:
    i = this[995];
    v28 = v10;
    goto LABEL_8;
  }
  for (i = *v8; (*(_BYTE *)(i + 22) & 1) != 0; i = *(_DWORD *)(i + 4))
    ;
  v28 = 0;
LABEL_8:
  v12 = &v8[10 * v9];
  v13 = (float *)(v12 + 29);
  v14 = (float *)(v12 + 19);
  sub_1003ADA0((float *)v40, (float *)v12 + 19, (float *)v12 + 29);
  v15 = i + 40 * v28;
  v16 = (float *)(v15 + 116);
  v36 = (float *)(v15 + 76);
  sub_1003ADA0((float *)v39, (float *)(v15 + 76), (float *)(v15 + 116));
  v33 = v30 * 0.5;
  sub_1003AD10((int)v40, v33);
  sub_1003AD10((int)v39, v33);
  sub_1003B050((float *)v42, v14, v13);
  sub_1003B050((float *)v43, v36, v16);
  v17 = this[13];
  v41[0] = this[12];
  v41[1] = v17;
  v41[2] = 0;
  sub_1003AEE0(v44, (float *)v41, (float *)v42);
  sub_1003AEE0(v45, (float *)v41, (float *)v43);
  v34 = sub_1003AC90(v44, (float *)v40);
  v37 = -sub_1003AC90(v45, (float *)v39);
  v31 = sub_1003B0E0((float *)v42, (float *)v43);
  v18 = v34 * v31 / (v37 + v34) / v31;
  v32 = v18;
  v19 = v18 * v32;
  v29 = v19;
  v20 = v19 * v32;
  v35 = v20;
  v38 = v20 * -2.0;
  v24 = 1.0 - (v38 - v29 * -3.0);
  sub_1003ACE0((int)(this + 966), (int)v42, v24);
  v25 = v38 - v29 * -3.0;
  sub_1003B020((int)(this + 966), (int)v43, v25);
  v26 = v35 - (v29 + v29) + v32;
  sub_1003B020((int)(this + 966), (int)v40, v26);
  v27 = v35 - v29;
  sub_1003B020((int)(this + 966), (int)v39, v27);
  sub_1003AFA0((int)(this + 969), (int)v39, (int)v40, v32);
  sub_1003AE50((float *)this + 969);
  sub_1003AC30((float *)this + 972, (float *)this + 975, (float *)this + 969);
  sub_1003AE50((float *)this + 972);
  sub_1003AC30((float *)this + 975, (float *)this + 969, (float *)this + 972);
  sub_1003AEE0((float *)this + 979, (float *)this + 12, (float *)this + 966);
  v21 = sub_1003AC90((float *)this + 972, (float *)this + 979);
  *((float *)this + 982) = v21;
  if (v23)
    v21 = -v21;
  *((float *)this + 978) = v21;
}
// 100646E7: variable 'v23' is possibly undefined

//----- (10064700) --------------------------------------------------------
void __thiscall meth_10064700(_DWORD *this) {
  _DWORD *v1;          // esi
  _DWORD *v2;          // ecx
  int *i;              // edi
  int v4;              // ebp
  double v5;           // st7
  int v6;              // ecx
  int v7;              // edx
  double v8;           // st7
  int v9;              // eax
  int *v10;            // edi
  double v11;          // st7
  _DWORD *v12;         // eax
  int v13;             // eax
  int v14;             // eax
  int v15;             // eax
  double v17;          // st7
  unsigned __int8 v18; // c0
  unsigned __int8 v19; // c3
  double v20;          // st7
  double v22;          // st6
  unsigned __int8 v23; // c0
  unsigned __int8 v24; // c3
  float *v25;          // ebx
  int v26;             // edi
  double v27;          // st7
  double v28;          // st7
  double v29;          // st7
  double v30;          // st6
  int v31;             // eax
  int v32;             // eax
  int v33;             // eax
  int v34;             // eax
  int v35;             // eax
  int v36;             // ebx
  int v37;             // edx
  int *v38;            // edi
  double v39;          // st7
  double v40;          // st6
  double v41;          // st7
  double v42;          // st7
  double v44;          // st7
  char v45;            // c0
  double v46;          // st7
  __int16 v47;         // ax
  double v48;          // st7
  double v49;          // st7
  int v50;             // edi
  double v51;          // st7
  int v52;             // ebx
  double v53;          // st7
  int v54;             // eax
  float v55;           // [esp+0h] [ebp-A0h]
  float v56;           // [esp+0h] [ebp-A0h]
  float v57;           // [esp+0h] [ebp-A0h]
  float v58;           // [esp+14h] [ebp-8Ch]
  float v59;           // [esp+14h] [ebp-8Ch]
  float v60;           // [esp+14h] [ebp-8Ch]
  float v61;           // [esp+18h] [ebp-88h]
  float v62;           // [esp+18h] [ebp-88h]
  float v63;           // [esp+18h] [ebp-88h]
  float v64;           // [esp+1Ch] [ebp-84h]
  float v65;           // [esp+1Ch] [ebp-84h]
  float v66;           // [esp+1Ch] [ebp-84h]
  float j;             // [esp+1Ch] [ebp-84h]
  float v68;           // [esp+20h] [ebp-80h]
  int v69;             // [esp+24h] [ebp-7Ch]
  float v70;           // [esp+24h] [ebp-7Ch]
  float k;             // [esp+24h] [ebp-7Ch]
  float v72;           // [esp+24h] [ebp-7Ch]
  float v73;           // [esp+24h] [ebp-7Ch]
  float v74;           // [esp+28h] [ebp-78h]
  float v75;           // [esp+2Ch] [ebp-74h]
  float v76;           // [esp+30h] [ebp-70h]
  int v77;             // [esp+34h] [ebp-6Ch] BYREF
  int v78;             // [esp+38h] [ebp-68h]
  int v79;             // [esp+3Ch] [ebp-64h]
  float v80[2];        // [esp+40h] [ebp-60h] BYREF
  float v81;           // [esp+48h] [ebp-58h]
  float v82[3];        // [esp+4Ch] [ebp-54h] BYREF
  float v83[3];        // [esp+58h] [ebp-48h] BYREF
  int v84[3];          // [esp+64h] [ebp-3Ch] BYREF
  float v85[3];        // [esp+70h] [ebp-30h] BYREF
  float v86[3];        // [esp+7Ch] [ebp-24h] BYREF
  float v87[3];        // [esp+88h] [ebp-18h] BYREF
  char v88[12];        // [esp+94h] [ebp-Ch] BYREF

  v1 = this;
  if ((*(_BYTE *)(this[960] + 104) & 1) != 0)
    goto LABEL_131;
  v2 = (_DWORD *)this[2672];
  if ((*v2 & 0x2000000) != 0) {
    v1[990] = 1;
    meth_10001970((#481 *)v1);
  }
  meth_DebugPrint(v2);
  i = (int *)v1[995];
  v4 = v1[996];
  v5 = sub_1003B170((float *)v1 + 1033);
  v6 = v1[996];
  v7 = v1[995];
  v8 = 20.0 - v5 * -3.0;
  v77 = *(_DWORD *)(v7 + 40 * v6 + 76);
  v78 = *(_DWORD *)(v7 + 40 * v6 + 80);
  v79 = *(_DWORD *)(v7 + 40 * v6 + 84);
  if (v8 > 80.0)
    v8 = 80.0;
  do {
    v9 = 5 * v4++;
    v8 = v8 - (*(float *)&i[2 * v9 + 25] - *(float *)&i[2 * v9 + 35]);
    if (v4 == *((unsigned __int16 *)i + 10)) {
      for (i = (int *)*i; (*((_BYTE *)i + 22) & 1) != 0; i = (int *)i[1])
        ;
      v4 = 0;
    }
  } while (v8 >= 0.0);
  v10 = &i[10 * v4 + 19];
  v77 = *v10;
  v78 = v10[1];
  v79 = v10[2];
  if (meth_10063FF0(v1, 0, v6, v7)) {
    sub_1003B050((float *)&dword_10AF9B28, (float *)&dword_10AF9B28, (float *)&dword_10ACDE98);
    if (*((float *)v1 + 963) == 0.0 && *((float *)v1 + 964) == 0.0 && *((float *)v1 + 965) == 0.0) {
      v1[963] = dword_10AF9B28;
      v1[964] = dword_10AF9B2C;
      v1[965] = dword_10AF9B30;
    } else {
      v55 = *(float *)&dword_106C2CFC - -0.5;
      sub_1003AFA0((int)(v1 + 963), (int)(v1 + 963), (int)&dword_10AF9B28, v55);
    }
  }
  sub_1003AFA0((int)(v1 + 963), (int)(v1 + 963), (int)&v77, 0.40000001);
  v76 = sub_1003AC90((float *)v1 + 1033, (float *)v1);
  sub_1003ADA0(v82, (float *)v1 + 12, (float *)v1 + 963);
  v84[0] = 0;
  v84[1] = 0;
  v84[2] = 1065353216;
  sub_1003AC30(v83, (float *)v84, v82);
  sub_1003AC30((float *)v88, v82, v83);
  v64 = sub_1003AC90((float *)v1 + 4, v82);
  v11 = sub_1003AC90((float *)v1, v82);
  v12 = (_DWORD *)v1[2672];
  *((float *)v1 + 2506) = v11;
  *v12 |= 0x10000u;
  v13 = v1[995] + 40 * v1[996];
  sub_1003ADA0((float *)v1 + 969, (float *)(v13 + 76), (float *)(v13 + 116));
  v14 = v1[995] + 40 * v1[996];
  sub_1003AEE0((float *)v1 + 972, (float *)(v14 + 64), (float *)(v14 + 88));
  sub_1003AC30((float *)v1 + 975, (float *)v1 + 969, (float *)v1 + 972);
  sub_1003AE50((float *)v1 + 975);
  sub_1003AC30((float *)v1 + 972, (float *)v1 + 975, (float *)v1 + 969);
  sub_1003AE50((float *)v1 + 972);
  sub_1003AEE0((float *)v1 + 979, (float *)v1 + 12, (float *)(v1[995] + 40 * v1[996] + 76));
  sub_1003B020((int)(v1 + 979), (int)(v1 + 1033), 0.40000001);
  v74 = sub_1003AC90((float *)v1 + 972, (float *)v1 + 979);
  v68 = 0.0;
  v58 = sub_1003AC90((float *)v1, (float *)v1 + 972);
  dword_10AF9888 = 0;
  dword_10AF9BA4 = 0;
  if (v74 >= 0.0)
    v61 = v74;
  else
    v61 = -v74;
  v15 = v1[995] + 40 * v1[996];
  sub_1003AEE0(v87, (float *)(v15 + 64), (float *)(v15 + 76));
  v75 = sub_1003AC90((float *)v1 + 972, v87);
  v17 = v75;
  if (v18 | v19)
    v20 = v17 * 0.40000001;
  else
    v20 = v17 - 3.0;
  if (v61 > v20) {
    v22 = v58;
    if (v23 | v24) {
      if (v22 >= 0.05) {
        if (v58 > 0.15) {
          dword_10AF9888 = 0;
          dword_10AF9BA4 = 1;
          v68 = (v61 - v20) / v61 * (v58 * 0.30000001) - -0.1;
        }
      } else {
        dword_10AF9888 = 1;
        dword_10AF9BA4 = 0;
        v68 = (v61 - v20) / v61 * (v58 * 0.2) - -0.029999999;
      }
    } else if (v22 <= -0.05) {
      if (v58 < -0.15) {
        dword_10AF9888 = 1;
        dword_10AF9BA4 = 0;
        v68 = (v61 - v20) / v61 * (v58 * -0.30000001) - -0.1;
      }
    } else {
      dword_10AF9888 = 0;
      dword_10AF9BA4 = 1;
      v68 = (v61 - v20) / v61 * (v58 * -0.2) - -0.029999999;
    }
    goto LABEL_27;
  }
  if (sub_1003B170((float *)v1 + 1033) <= 10.0)
    goto LABEL_27;
  v49 = sub_1003AC90((float *)v1 + 1033, (float *)v1 + 972);
  if (v49 <= 0.1)
    v50 = v49 >= -0.1 ? 0 : -1;
  else
    v50 = 1;
  v51 = sub_1003AC90((float *)v1 + 16, v83);
  if (v51 <= 0.1)
    v52 = v51 >= -0.1 ? 0 : -1;
  else
    v52 = 1;
  v53 = sub_1003AC90((float *)v1, v83);
  if (v53 <= 0.1)
    v54 = v53 >= -0.1 ? 0 : -1;
  else
    v54 = 1;
  if (!v50 && !v54)
    goto LABEL_27;
  if (!v50)
    goto LABEL_178;
  if (!(v54 + v50)) {
    if (v50 == 1 && v52 == 1) {
      dword_10AF9BA4 = 0;
      dword_10AF9888 = 1;
      v68 = 0.1;
    } else {
      if (v50 == -1 && v52 == -1) {
        dword_10AF9BA4 = 1;
        dword_10AF9888 = 0;
      }
      v68 = 0.1;
    }
    goto LABEL_27;
  }
  if (v50 != v54) {
  LABEL_178:
    if (v52)
      goto LABEL_179;
    if (!v54)
      goto LABEL_27;
    if (v50) {
    LABEL_179:
      if (v52 == v54) {
        if (v52 == 1) {
          dword_10AF9BA4 = 1;
          dword_10AF9888 = 0;
          v68 = 0.5;
        } else {
          if (v52 == -1) {
              dword_10AF9BA4 = 0;
              dword_10AF9888 = 1;
          }
          v68 = 0.5;
        }
      } else if (v52 && !(v50 + v52)) {
        goto LABEL_27;
      }
    }
    *(_DWORD *)v1[2672] &= 0xFFFEFFFF;
    goto LABEL_27;
  }
  if (v50 == 1 && v52 == 1) {
    dword_10AF9BA4 = 1;
    dword_10AF9888 = 0;
    v68 = 0.40000001;
  } else {
    if (v50 == -1 && v52 == -1) {
      dword_10AF9BA4 = 0;
      dword_10AF9888 = 1;
    }
    v68 = 0.40000001;
  }
LABEL_27:
  v62 = 1.0;
  if (dword_10AA34AC > 0) {
    v69 = 1;
    v25 = (float *)&unk_10AF96D4;
    v26 = 0;
    while (1) {
      sub_1003AEE0(
          v85, (float *)((char *)&unk_10AF9658 + v26), (float *)((char *)&unk_10AF96C8 + v26));
      sub_1003AEE0(v86, v25, (float *)((char *)&unk_10AF96C8 + v26));
      sub_1003AC30(v80, v86, v85);
      sub_1003AE50(v80);
      v59 = sub_1003AC90((float *)v1 + 1033, v80);
      v27 = sub_1003AC90((float *)v1 + 1033, v85) * 0.029999999;
      if (v27 <= v59) {
        if (v27 < -v59)
          v59 = -v27;
      } else {
        v59 = v27;
      }
      v28 = (double)v69;
      if (v59 > v28 * 6.0) {
        v62 = 2.0;
        *(_DWORD *)v1[2672] &= 0xFFFEFFFF;
        *(_DWORD *)v1[2672] |= 0x40000u;
        goto LABEL_41;
      }
      if (v28 * 4.5 < v59) {
        v62 = 2.0;
        *(_DWORD *)v1[2672] &= 0xFFFEFFFF;
        goto LABEL_41;
      }
      if (v28 * 3.0 < v59)
        break;
      v26 += 12;
      v25 += 3;
      if (v69++ >= dword_10AA34AC)
        goto LABEL_41;
    }
    v62 = 1.3;
  }
LABEL_41:
  if (sub_1003B170((float *)v1 + 1033) <= 10.0) {
    v29 = v64;
  } else {
    v29 = v62 * v64;
    if (v29 <= 1.0) {
      if (v29 >= -1.0)
        goto LABEL_48;
      v29 = -1.0;
    } else {
      v29 = 1.0;
    }
    *(_DWORD *)v1[2672] &= 0xFFFEFFFF;
  }
LABEL_48:
  if (v68 < 0.0099999998)
    v68 = 0.0099999998;
  v65 = 0.2 / v68;
  if (v29 >= 0.0) {
    if (dword_10AF9888) {
      if (v29 <= v65)
        v29 = v29 - -0.2;
      else
        v29 = v29 * (v68 - -1.0);
    } else if (dword_10AF9BA4) {
      if (v29 <= v65)
        v29 = v29 - 0.2;
      else
        v29 = v29 - v68 * v29;
    }
    v30 = 1.0 - (1.0 - v29) * (1.0 - v29) * (1.0 - v29) * (1.0 - v29);
  } else {
    if (dword_10AF9888) {
      if (v29 >= -v65)
        v29 = v29 - -0.2;
      else
        v29 = v29 - v68 * v29;
    } else if (dword_10AF9BA4) {
      if (v29 >= -v65)
        v29 = v29 - 0.2;
      else
        v29 = v29 * (v68 - -1.0);
    }
    v30 = (v29 - -1.0) * (v29 - -1.0) * (v29 - -1.0) * (v29 - -1.0) - 1.0;
  }
  v66 = v30;
  v70 = sub_1003B170((float *)v1 + 1033);
  if (*((float *)v1 + 2506) < 0.0) {
    v32 = v1[936];
    if (!v32) {
      if (v76 <= 1.0)
        goto LABEL_81;
      goto LABEL_80;
    }
    v1[936] = v32 - 1;
  LABEL_76:
    *(float *)(v1[2672] + 32) = -v66;
    v33 = v1[939] + 1;
    v1[939] = v33;
    if (v33 <= 30 || v70 >= 1.0)
      goto LABEL_92;
    v1[937] = 60;
    goto LABEL_91;
  }
  v31 = v1[937];
  if (v31) {
    v1[937] = v31 - 1;
  LABEL_81:
    *(_DWORD *)v1[2672] |= 0x10000u;
    if (v66 >= 0.0)
      *(_DWORD *)(v1[2672] + 32) = 1065353216;
    else
      *(_DWORD *)(v1[2672] + 32) = -1082130432;
    *(_DWORD *)v1[2672] |= 0x20000u;
    v34 = v1[938];
    if (v34 > 150) {
      if (v34 <= 270)
        *(float *)(v1[2672] + 32) = *(float *)(v1[2672] + 32) * -1.0;
      else
        v1[938] = 30;
    }
    v35 = v1[938] + 1;
    v1[938] = v35;
    if (v35 <= 30 || v70 >= 1.0)
      goto LABEL_92;
    v1[936] = 60;
  LABEL_91:
    v1[938] = 0;
    v1[939] = 0;
    goto LABEL_92;
  }
  if (v76 >= -1.0)
    goto LABEL_76;
LABEL_80:
  *(_DWORD *)v1[2672] |= 0x40000u;
LABEL_92:
  meth_10064350(v1);
  v36 = -1;
  v37 = 0;
  v63 = 90.0;
  v60 = 0.0;
  if (dword_100B36F8 > 0) {
    v38 = &dword_10ACD4F8;
    do {
      this = (_DWORD *)*v38;
      if (!*v38 || this == v1)
        goto LABEL_109;
      v39 = *((float *)this + 1021) - *((float *)v1 + 1021);
      for (j = *(float *)(gUnk06594.field_4938 + 100); v39 > j; v39 = v39 - j)
        ;
      for (k = -j; v39 < k; v39 = v39 + j)
        ;
      if (v39 <= 0.0 || v39 >= v63)
        goto LABEL_109;
      v40 = *((float *)this + 982) - v74;
      v63 = v39;
      if (v40 >= 3.0) {
        if (v40 > -3.0) {
          v42 = (1.0 - v39 * 0.011111111) * 10.0;
          v60 = v42;
          if (v42 > 5.0)
              v60 = 5.0;
        LABEL_108:
          v36 = v37;
          goto LABEL_109;
        }
      } else {
        v41 = (1.0 - v39 * 0.011111111) * -10.0;
        v60 = v41;
        if (v41 >= -5.0)
          goto LABEL_108;
        v60 = -5.0;
        v36 = v37;
      }
    LABEL_109:
      ++v37;
      v38 += 32;
    } while (v37 < dword_100B36F8);
  }
  if (v36 != -1) {
    v74 = v60 + v74;
    v44 = v74;
    if (v45)
      v44 = -v44;
    *((float *)v1 + 978) = v44;
  }
  if (v76 > 3.0) {
    if (*((float *)v1 + 978) < v75 - -1.0) {
      v46 = (v76 - 3.0) * 0.015625;
      if (v46 < 0.0)
        v46 = v46 * -0.25;
      if (v46 > 0.40000001)
        v46 = 0.40000001;
      v72 = v46 * v74;
      v80[0] = sub_1003AC90((float *)v1 + 122, (float *)v1 + 969);
      sub_1003AC90((float *)v1 + 122, (float *)v1 + 972);
      v81 = sub_1003AC90((float *)v1 + 122, (float *)v1 + 975);
      sub_1003ACE0((int)(v1 + 122), (int)(v1 + 969), v80[0]);
      v56 = -v72;
      sub_1003B020((int)(v1 + 122), (int)(v1 + 972), v56);
      sub_1003B020((int)(v1 + 122), (int)(v1 + 975), v81);
    }
    if (gGameMode) {
      if (gGameMode == GAME_MODE_1 || gGameMode == GAME_MODE_6) {
        v47 = gChosenWeather1 - 1;
        if ((__int16)(gChosenWeather1 - 1) > 2 || v47 < 0)
          v47 = 0;
        if (v47 == 2)
          sub_1003AD10((int)(v1 + 122), 0.99000001);
        else
          sub_1003AD10((int)(v1 + 122), 0.99900001);
      }
    } else {
      sub_1003AD10((int)(v1 + 122),
                   dword_100B38A0[8 * *((unsigned __int8 *)dword_10ACED34 + 4) +
                                  2 * *((unsigned __int8 *)dword_10ACED34 + 5) +
                                  *(_DWORD *)(v1[960] + 116)]);
    }
  }
LABEL_131:
  meth_DebugPrint(this);
  v48 = sub_1003B170((float *)v1 + 129);
  if (v48 > 1.0 && v1[329]) {
    v73 = v48;
    v57 = 1.0 / v73;
    sub_1003AD10((int)(v1 + 129), v57);
  }
  meth_10075F10((int)v1);
  meth_10063660(v1);
}
// 10065556: conditional instruction was optimized away because of 'edi.4 in (==1|==FFFFFFFF)'
// 100655B4: conditional instruction was optimized away because of 'ebx.4==0'
// 10064751: variable 'v2' is possibly undefined
// 10064AE5: variable 'v18' is possibly undefined
// 10064AE5: variable 'v19' is possibly undefined
// 10064B19: variable 'v23' is possibly undefined
// 10064B19: variable 'v24' is possibly undefined
// 10065153: variable 'v45' is possibly undefined
// 100652CD: variable 'this' is possibly undefined
// 100B36F8: using guessed type int dword_100B36F8;
// 104BBE08: using guessed type int gChosenWeather1;
// 106C2CFC: using guessed type int dword_106C2CFC;
// 10AA34AC: using guessed type int dword_10AA34AC;
// 10ACD4F8: using guessed type int dword_10ACD4F8;
// 10ACDE98: using guessed type int dword_10ACDE98;
// 10AF9888: using guessed type int dword_10AF9888;
// 10AF9B28: using guessed type int dword_10AF9B28;
// 10AF9B2C: using guessed type int dword_10AF9B2C;
// 10AF9B30: using guessed type int dword_10AF9B30;
// 10AF9BA4: using guessed type int dword_10AF9BA4;

//----- (10065620) --------------------------------------------------------
void __cdecl sub_10065620(int a1) {
  meth_10064700((_DWORD *)a1);
}

//----- (10065630) --------------------------------------------------------
int __thiscall meth_10065630(_DWORD *this) {
  float *v1;  // edx
  double v2;  // st7
  int v3;     // ebx
  _WORD *v4;  // edi
  _DWORD *v5; // eax
  double v6;  // st7
  int i;      // edx
  int result; // eax
  int v9;     // [esp+10h] [ebp-4h]

  v1 = (float *)(this + 1067);
  v2 = (double)(int)this[80] * 0.13699999;
  v3 = 0;
  v9 = 0;
  *((float *)this + 1067) = v2;
  v4 = this + 2248;
  v5 = this + 1096;
  *((float *)this + 1068) = v2 - -0.034000002;
  *((float *)this + 1069) = v2 - -0.034000002 - -0.034000002;
  *((float *)this + 1070) = v2 - -0.034000002 - -0.034000002 - -0.034000002;
  do {
    *((_DWORD *)v1 + 4) = 2;
    *v1 = 0.0;
    v1[12] = 0.0;
    v1[8] = 0.0;
    v6 = (double)v9 * 0.15000001;
    ++v3;
    ++v1;
    v9 = v3;
    *(v1 - 17) = v6;
  } while (v3 < 4);
  for (i = 0; i < 144; ++i) {
    v4[2] = 0;
    v4[1] = 0;
    *v4 = 0;
    *v5 = 0;
    v5[1] = 0;
    v5[2] = 0;
    v5[5] = 0;
    v5[6] = 0;
    v5[7] = 0;
    v4 += 3;
    v5 += 8;
  }
  result = 131074;
  memset32(this + 0x9A0, 131074, 0x12u);
  return result;
}

//----- (10065710) --------------------------------------------------------
int __thiscall meth_10065710(_DWORD *this) {
  int result; // eax

  result = 0;
  this[2674] = 0;
  this[2675] = 0;
  this[2676] = 0;
  this[2677] = 0;
  *((_WORD *)this + 5356) = 0;
  return result;
}

//----- (10065740) --------------------------------------------------------
int __thiscall meth_10065740(_DWORD *this) {
  int v2;         // eax
  long double v3; // st4
  double v4;      // st7
  __int16 v5;     // cx
  int v6;         // eax
  int v7;         // ecx
  int result;     // eax
  int v9;         // [esp+0h] [ebp-28h]
  int v10;        // [esp+4h] [ebp-24h]
  float v11;      // [esp+8h] [ebp-20h]
  float v12;      // [esp+8h] [ebp-20h]
  int v13;        // [esp+8h] [ebp-20h]
  float v14;      // [esp+14h] [ebp-14h]
  float v15;      // [esp+18h] [ebp-10h]
  float v16;      // [esp+18h] [ebp-10h]
  float v17;      // [esp+18h] [ebp-10h]
  float v18;      // [esp+1Ch] [ebp-Ch]
  float v19;      // [esp+20h] [ebp-8h]
  float v20;      // [esp+24h] [ebp-4h]

  meth_10076B20(this);
  if (gGameMode == GAME_MODE_2 || gGameMode == GAME_MODE_4 ||
      gGameMode == GAME_MODE_3 && dword_100B4050 == 1 || gGameMode == GAME_MODE_0) {
    meth_10076A40(this, this[80]);
    v14 = 0.0;
    v15 = 0.5;
  } else {
    meth_10076A40(this, this[80]);
    if (gNetworkPlay)
      v2 = this[81];
    else
      v2 = this[80];
    v14 = (float)(v2 >> 1);
    v15 = (float)((v2 & 1) == 0);
  }
  v20 = cos_(*(float *)&gUnk06594.field_4914);
  v18 = sin_(*(float *)&gUnk06594.field_4914);
  v11 = *(float *)&gUnk06594.field_4914 - -1.5707964;
  v19 = cos_(v11);
  v12 = *(float *)&gUnk06594.field_4914 - -1.5707964;
  v16 = v15 - 0.5;
  v3 = sin_(v12) * v16;
  v4 = v19 * v16;
  v17 = v14 - -1.0;
  *(float *)&v13 = *(float *)&gUnk06594.field_4910 - -0.1;
  *(float *)&v10 = *(float *)&gUnk06594.field_490C - v3 * 3.0 - v18 * v17 * 8.0;
  *(float *)&v9 = *(float *)&gUnk06594.field_4908 - v4 * 3.0 - v20 * v17 * 8.0;
  meth_10076420((float *)this, v9, v10, v13);
  *((float *)this + 1021) = (v14 - -0.5) * -8.0;
  meth_100764C0((float *)this, *(float *)&gUnk06594.field_4914);
  this[992] = this[12];
  this[993] = this[13];
  this[994] = this[14];
  this[983] = this[12];
  this[984] = this[13];
  this[985] = this[14];
  meth_10001FF0((#482 *)this);
  this[936] = 0;
  this[937] = 0;
  this[938] = 0;
  this[939] = -180;
  meth_100767A0(this, 0, 0, 0);
  if (gUnk06594.field_4938) {
    this[1004] = 0;
    this[1019] = 0;
    this[1017] = 0;
    v5 = gChosenWeather1 - 1;
    if ((__int16)(gChosenWeather1 - 1) > 2 || v5 < 0)
      v5 = 0;
    this[1020] = *(_DWORD *)&gTrackData[gChosenTrack]->last[84 * this[921] + 24 + 28 * v5];
    this[995] = gUnk06594.field_4938;
    this[996] = 0;
    sub_1003ADA0((float *)this + 997,
                 (float *)(gUnk06594.field_4938 + 76),
                 (float *)(gUnk06594.field_4938 + 116));
  } else {
    this[997] = 1065353216;
    this[998] = 0;
    this[999] = 0;
  }
  v6 = this[80];
  v7 = dword_100B36F8 - v6;
  this[1002] = 0;
  this[1018] = 0;
  this[1022] = v7 - 1;
  this[1000] = 0;
  if (v6 < dword_100B4050 || gGameMode == GAME_MODE_1 || gGameMode == GAME_MODE_2 ||
      gGameMode == GAME_MODE_4 || gGameMode == GAME_MODE_6) {
    this[1003] = -1;
    this[1001] = -1;
  } else {
    this[1003] = 0;
    this[1001] = 0;
  }
  this[2643] = 0;
  this[2660] = 0;
  this[2502] = 0;
  this[1037] = 0;
  this[1036] = 0;
  this[1038] = 0;
  this[1039] = 0;
  this[1040] = 0;
  this[1041] = 0;
  this[1042] = 0;
  this[1043] = 0;
  this[1044] = 0;
  this[1045] = 0;
  this[1046] = 0;
  this[1032] = 0;
  this[961] = 0;
  meth_10065630(this);
  result = meth_10065710(this);
  this[990] = 0;
  this[986] = 0;
  this[987] = 0;
  this[988] = 0;
  this[989] = 1065353216;
  return result;
}
// 100B36F8: using guessed type int dword_100B36F8;
// 100B380C: using guessed type int gChosenTrack;
// 100B4050: using guessed type int dword_100B4050;
// 1022AF18: using guessed type int gNetworkPlay;
// 104BBE08: using guessed type int gChosenWeather1;

//----- (10065B20) --------------------------------------------------------
__int16 __cdecl sub_10065B20(int a1, float a2) {
  int v3;    // eax
  int v4;    // ebx
  float *v5; // edi
  double v6; // st7
  int v7;    // esi
  int v8;    // eax
  float *v9; // edi
  int v10;   // esi
  float v12; // [esp+0h] [ebp-14h]

  LOWORD(v3) = 0;
  dword_10AF96C0 = 0;
  dword_10AF9B44 = 0;
  while (a1) {
    do {
      if ((*(_BYTE *)(a1 + 22) & 1) == 0)
        break;
      a1 = *(_DWORD *)(a1 + 4);
    } while (a1);
    if (!a1)
      break;
    v4 = 0;
    if (*(_WORD *)(a1 + 20)) {
      v5 = (float *)(a1 + 140);
      while (1) {
        v6 = *(v5 - 10) - *v5;
        if (a2 <= v6)
          break;
        a2 = a2 - v6;
        if (gUnk06594.field_4A28) {
          v7 = (dword_10AF96C0 + 1) % gUnk06594.field_4A28;
          if (sub_1003BA70((float *)&gUnk06594.gap4968[20 * v7],
                           (float *)&gUnk06594.gap4960[20 * v7],
                           v5 - 16,
                           v5 - 6)) {
              ++dword_10AF96C0;
              if (!v7)
                  ++dword_10AF9B44;
          }
        }
        ++v4;
        LOWORD(v3) = *(_WORD *)(a1 + 20);
        v5 += 10;
        if (v4 >= (unsigned __int16)v3)
          goto LABEL_14;
      }
      v8 = a1 + 40 * v4;
      v9 = (float *)(v8 + 76);
      v12 = a2 / v6;
      LOWORD(v3) = sub_1003AFA0((int)&dword_10AF9B38, v8 + 116, v8 + 76, v12);
      if (gUnk06594.field_4A28) {
        v10 = (dword_10AF96C0 + 1) % gUnk06594.field_4A28;
        v3 = sub_1003BA70((float *)&gUnk06594.gap4968[20 * v10],
                          (float *)&gUnk06594.gap4960[20 * v10],
                          v9,
                          (float *)&dword_10AF9B38);
        if (v3) {
          ++dword_10AF96C0;
          if (!v10)
              ++dword_10AF9B44;
        }
      }
      dword_10AF988C = a1;
      dword_10ACD490 = v4;
      return v3;
    }
  LABEL_14:
    a1 = *(_DWORD *)a1;
  }
  return v3;
}
// 10ACD490: using guessed type int dword_10ACD490;
// 10AF96C0: using guessed type int dword_10AF96C0;
// 10AF988C: using guessed type int dword_10AF988C;
// 10AF9B38: using guessed type int dword_10AF9B38;
// 10AF9B44: using guessed type int dword_10AF9B44;

//----- (10065C80) --------------------------------------------------------
void __cdecl sub_10065C80(int a1, int a2, float a3, float a4) {
  int v6;    // ecx
  float *v7; // edx
  int v8;    // eax
  int v9;    // ebx
  float v10; // [esp+0h] [ebp-10h]
  int v11;   // [esp+18h] [ebp+8h]

  while (a1) {
    do {
      if ((*(_BYTE *)(a1 + 22) & 1) == 0)
        break;
      a1 = *(_DWORD *)(a1 + 4);
    } while (a1);
    if (!a1)
      break;
    v6 = *(unsigned __int16 *)(a1 + 20);
    if (a2 < (unsigned __int16)v6) {
      v7 = (float *)(a1 + 40 * a2 + 140);
      while (1) {
        *(float *)&v11 = (*(v7 - 10) - *v7) * a3;
        if (a4 <= (double)*(float *)&v11)
          break;
        ++a2;
        v7 += 10;
        a3 = 1.0;
        a4 = a4 - *(float *)&v11;
        if (a2 >= v6)
          goto LABEL_9;
      }
      v8 = a1 + 40 * a2;
      v9 = v8 + 116;
      sub_1003AFA0((int)&dword_10AF9B38, v8 + 76, v8 + 116, a3);
      v10 = a4 / *(float *)&v11;
      sub_1003AFA0((int)&dword_10AF9B38, v9, (int)&dword_10AF9B38, v10);
      dword_10AF988C = a1;
      dword_10ACD490 = a2;
      return;
    }
  LABEL_9:
    a1 = *(_DWORD *)a1;
    a2 = 0;
  }
}
// 10ACD490: using guessed type int dword_10ACD490;
// 10AF988C: using guessed type int dword_10AF988C;
// 10AF9B38: using guessed type int dword_10AF9B38;

//----- (10065D50) --------------------------------------------------------
int __cdecl car_MakeEnemyCarColorPanels0(size_t size) {
  size_t size_1; // ebp
  char *v2;      // edi
  int v3;        // ebx
  int v4;        // edx
  int i;         // esi
  int v6;        // eax
  _WORD *v7;     // ecx
  char v8;       // al
  __int16 v9;    // bx
  int v10;       // esi
  int v11;       // ebx
  int result;    // eax
  _WORD *v13;    // ebx
  __int16 v14;   // ax
  __int16 v15;   // cx
  int v16;       // edi
  __int16 v17;   // dx
  __int16 v18;   // ax
  int v19;       // edi
  int v20;       // edi
  char *v21;     // [esp+10h] [ebp-Ch]
  __int16 v22;   // [esp+14h] [ebp-8h]
  int v23;       // [esp+18h] [ebp-4h]

  size_1 = size;
  v2 = &stru_10ACDEA8.gap0[11112 * dword_100B4050 + 11112 * *(_DWORD *)(size + 116)];
  v21 = v2;
  car_10061460(*(unsigned __int8 *)(size + 92),
               *(unsigned __int8 *)(size + 93),
               *(unsigned __int8 *)(size + 94));
  v3 = *(unsigned __int8 *)(size_1 + 93) >> 3;
  v4 = *(unsigned __int8 *)(size_1 + 92) >> 3;
  v22 = v3;
  v23 = *(unsigned __int8 *)(size_1 + 94) >> 3;
  for (i = 0; i < 12; ++i) {
    v6 = *(_DWORD *)(*((_DWORD *)v2 + 2673) + 32788) +
         36 * *(unsigned __int8 *)(i + *((_DWORD *)v2 + 2673) + 33040);
    v7 = *(_WORD **)(v6 + 4);
    if (v7 && (*(_DWORD *)(v6 + 32) & 0xF000000) == 0x1000000) {
      v8 = v7[i] & 1 | (2 * (v23 | (32 * (v3 | (32 * v4)))));
      LOBYTE(v9) = (unsigned __int16)(v23 | (32 * (v3 | (32 * v4)))) >> 7;
      HIBYTE(v9) = v8;
      *v7 = v9;
      LOBYTE(v9) = (unsigned __int16)((32 * (v4 & 0x1E)) | v22 & 0x1E) >> 3;
      HIBYTE(v9) = v7[i] & 1 | v23 & 0x1E | (32 * ((32 * (v4 & 0x1E)) | v22 & 0x1E));
      v7[1] = v9;
      LOWORD(v3) = v22;
    }
  }
  v10 = *(_DWORD *)(*((_DWORD *)v2 + 2673) + 124);
  *(_DWORD *)(size_1 + 124) = v10 + 4;
  v11 = 0;
  for (*(_DWORD *)(size_1 + 120) = CHK_AllocateMemory(4 * (v10 + 4), aMakeenemycarco); v11 < v10;
       v2 = v21) {
    v23 = dword_118AA0BC(*(_DWORD *)(*((_DWORD *)v2 + 2673) + 4 * v11 + 4), &size);
    *(_DWORD *)(*(_DWORD *)(size_1 + 120) + 4 * v11) = CHK_AllocateMemory(size, aMakeenemycarco_0);
    qmemcpy(*(void **)(*(_DWORD *)(size_1 + 120) + 4 * v11++), (const void *)v23, size);
  }
  result = *((_DWORD *)v2 + 2673);
  v13 = *(_WORD **)(*(_DWORD *)(result + 32788) + 36 * *(unsigned __int8 *)(result + 33051) + 4);
  if (v13 && !dword_100AC300) {
    if (*(_DWORD *)(result + 132)) {
      if (*(_DWORD *)&gUnk06594.gap1C8[12500] || *(_DWORD *)&gUnk06594.gap1C8[12508]) {
        v13[15] = 112;
        v13[10] = -32112;
      } else {
        v13[15] = 400;
        v13[10] = 416;
      }
      v14 = v13[15];
      v15 = v13[10];
      v13[14] = 400;
      v13[13] = v14;
      v13[9] = 416;
      v13[8] = v15;
      v13[12] = -32391;
      v13[7] = 16786;
      v13[11] = 27565;
      v13[6] = 12742;
      v23 = dword_118AA0BC(*(_DWORD *)(*((_DWORD *)v2 + 2673) + 132), &size);
      *(_DWORD *)(*(_DWORD *)(size_1 + 120) + 4 * v10) =
          CHK_AllocateMemory(size, aMakeenemycarco_1);
      qmemcpy(*(void **)(*(_DWORD *)(size_1 + 120) + 4 * v10), (const void *)v23, size);
      v2 = v21;
    }
    if (*(_DWORD *)(*((_DWORD *)v2 + 2673) + 136)) {
      v13[11] = 27565;
      v13[14] = 192;
      v13[13] = 192;
      v13[6] = 12742;
      v13[9] = 1273;
      v13[8] = 1273;
      dword_118AA0BC(*(_DWORD *)(*((_DWORD *)v2 + 2673) + 136), &size);
      v16 = 4 * v10 + 4;
      *(_DWORD *)(*(_DWORD *)(size_1 + 120) + v16) = CHK_AllocateMemory(size, aMakeenemycarco_2);
      qmemcpy(*(void **)(*(_DWORD *)(size_1 + 120) + v16), (const void *)v23, size);
      v2 = v21;
    }
    if (*(_DWORD *)(*((_DWORD *)v2 + 2673) + 140)) {
      v17 = v13[15];
      v18 = v13[10];
      v13[14] = 400;
      v13[13] = v17;
      v13[9] = 416;
      v13[8] = v18;
      v13[11] = 14567;
      v13[6] = -257;
      dword_118AA0BC(*(_DWORD *)(*((_DWORD *)v2 + 2673) + 140), &size);
      v19 = 4 * v10 + 8;
      *(_DWORD *)(*(_DWORD *)(size_1 + 120) + v19) = CHK_AllocateMemory(size, aMakeenemycarco_3);
      qmemcpy(*(void **)(*(_DWORD *)(size_1 + 120) + v19), (const void *)v23, size);
      v2 = v21;
    }
    result = *((_DWORD *)v2 + 2673);
    if (*(_DWORD *)(result + 144)) {
      v13[11] = 14567;
      v13[14] = 192;
      v13[13] = 192;
      v13[6] = -257;
      v13[9] = 1273;
      v13[8] = 1273;
      dword_118AA0BC(*(_DWORD *)(*((_DWORD *)v2 + 2673) + 144), &size);
      v20 = 4 * v10 + 12;
      *(_DWORD *)(*(_DWORD *)(size_1 + 120) + v20) = CHK_AllocateMemory(size, aMakeenemycarco_4);
      result = *(_DWORD *)(size_1 + 120);
      qmemcpy(*(void **)(result + v20), (const void *)v23, size);
    }
  }
  return result;
}
// 100AC300: using guessed type int dword_100AC300;
// 100B4050: using guessed type int dword_100B4050;
// 118AA0BC: using guessed type int (__cdecl *dword_118AA0BC)(_DWORD, _DWORD);

//----- (100661B0) --------------------------------------------------------
int __cdecl sub_100661B0(int a1, int a2) {
  int v2;     // esi
  int v3;     // edi
  int result; // eax
  int v5;     // eax
  int v6;     // eax
  int v7;     // eax

  v2 = 0;
  v3 = *(_DWORD *)(*(_DWORD *)(a1 + 10692) + 124);
  if (v3 > 0) {
    do {
      sub_10074F70(*(_DWORD *)(*(_DWORD *)(a1 + 10692) + 4 * v2 + 4),
                   *(_DWORD *)(*(_DWORD *)(a2 + 120) + 4 * v2));
      ++v2;
    } while (v2 < v3);
  }
  result = *(_DWORD *)(a1 + 10692);
  if (*(_DWORD *)(*(_DWORD *)(result + 32788) + 36 * *(unsigned __int8 *)(result + 33051) + 4) &&
      !dword_100AC300) {
    v5 = *(_DWORD *)(result + 132);
    if (v5)
      sub_10074F70(v5, *(_DWORD *)(*(_DWORD *)(a2 + 120) + 4 * v3));
    v6 = *(_DWORD *)(*(_DWORD *)(a1 + 10692) + 136);
    if (v6)
      sub_10074F70(v6, *(_DWORD *)(*(_DWORD *)(a2 + 120) + 4 * v3 + 4));
    v7 = *(_DWORD *)(*(_DWORD *)(a1 + 10692) + 140);
    if (v7)
      sub_10074F70(v7, *(_DWORD *)(*(_DWORD *)(a2 + 120) + 4 * v3 + 8));
    result = *(_DWORD *)(*(_DWORD *)(a1 + 10692) + 144);
    if (result)
      result = sub_10074F70(result, *(_DWORD *)(*(_DWORD *)(a2 + 120) + 4 * v3 + 12));
  }
  return result;
}
// 100AC300: using guessed type int dword_100AC300;

//----- (100662A0) --------------------------------------------------------
int __thiscall meth_100662A0(_DWORD *this) {
  int v2;     // ecx
  int v3;     // eax
  char *v4;   // eax
  int v5;     // ecx
  double v6;  // st7
  __int16 v7; // cx
  int result; // eax

  if (gGameMode) {
    if (gGameMode == GAME_MODE_1) {
      v2 = 2;
    } else if (gGameMode == GAME_MODE_6) {
      v2 = 9999;
    } else {
      v2 = dword_100B36FC;
    }
  } else {
    v2 = dword_100B4050;
  }
  v3 = ((char *)this - (char *)&unk_10ACD498) >> 7;
  this[25] = v3;
  *((_BYTE *)this + 92) = byte_100B37D0[3 * v3];
  *((_BYTE *)this + 93) = byte_100B37D1[3 * v3];
  *((_BYTE *)this + 94) = byte_100B37D2[3 * v3];
  this[26] = 0;
  this[29] = v3 >= dword_100B4050 + 13;
  if (v3 >= v2) {
    v5 = this[29];
    this[24] = 0;
    if (v5 == 1) {
      v6 = (double)(600 * (v3 - dword_100B4050) - 7760);
    } else if (gChosenTrack == 2 || gChosenTrack == 8) {
      v6 = (double)(520 * v3);
    } else {
      v6 = (double)(550 * v3);
    }
    *((float *)this + 20) = v6;
    sub_10065B20(gUnk06594.field_4938, *((float *)this + 20));
    *this = dword_10AF9B38;
    this[1] = dword_10AF9B3C;
    this[2] = dword_10AF9B40;
    this[10] = dword_10AF988C;
    this[11] = dword_10ACD490;
    this[19] = dword_10AF96C0;
    this[18] = dword_10AF96C0;
    this[17] = dword_10AF9B44;
    this[16] = dword_10AF9B44;
    meth_DebugPrint((void *)this[25]);
    this[3] = *this;
    this[4] = this[1];
    this[5] = this[2];
    this[12] = 0;
    this[14] = 0;
    this[13] = 0;
    v7 = gChosenWeather1 - 1;
    if ((__int16)(gChosenWeather1 - 1) > 2 || v7 < 0)
      v7 = 0;
    this[15] = *(_DWORD *)&gTrackData[gChosenTrack]->last[84 * dword_10ACED0C + 24 + 28 * v7];
    this[21] = dword_100B36F8 - this[25] - 1;
  } else {
    v4 = &stru_10ACDEA8.gap0[11112 * v3];
    this[24] = v4;
    *((_DWORD *)v4 + 960) = this;
  }
  result = dword_100B4050;
  if (this[25] >= dword_100B4050)
    return car_MakeEnemyCarColorPanels0((size_t)this);
  this[30] = 0;
  this[31] = 0;
  return result;
}
// 100B36F8: using guessed type int dword_100B36F8;
// 100B36FC: using guessed type int dword_100B36FC;
// 100B380C: using guessed type int gChosenTrack;
// 100B4050: using guessed type int dword_100B4050;
// 104BBE08: using guessed type int gChosenWeather1;
// 10ACD490: using guessed type int dword_10ACD490;
// 10ACED0C: using guessed type int dword_10ACED0C;
// 10AF96C0: using guessed type int dword_10AF96C0;
// 10AF988C: using guessed type int dword_10AF988C;
// 10AF9B38: using guessed type int dword_10AF9B38;
// 10AF9B3C: using guessed type int dword_10AF9B3C;
// 10AF9B40: using guessed type int dword_10AF9B40;
// 10AF9B44: using guessed type int dword_10AF9B44;

//----- (100664C0) --------------------------------------------------------
void __thiscall meth_100664C0(_DWORD *this) {
  int i; // edi

  for (i = 0; i < this[31]; ++i) {
    free(*(void **)(this[30] + 4 * i));
    *(_DWORD *)(this[30] + 4 * i) = 0;
  }
  free((void *)this[30]);
  this[30] = 0;
  this[31] = 0;
}

//----- (10066510) --------------------------------------------------------
void sub_10066510() {
  int v0;        // edi
  int *v1;       // esi
  int v2;        // ebx
  int v3;        // ebp
  int v4;        // edi
  char *v5;      // eax
  int *v6;       // edx
  char *v7;      // esi
  int v8;        // ecx
  int v9;        // ecx
  int v10;       // ecx
  char *v11;     // esi
  int v12;       // eax
  int v13;       // edx
  char Base[4];  // [esp+10h] [ebp-A0h] BYREF
  char v15[156]; // [esp+14h] [ebp-9Ch] BYREF

  if (gNetworkPlay) {
    v0 = 0;
    if (dword_100B36FC > 0) {
      v1 = &dword_10ACEEA0;
      do {
        *v1 = atomic_sub_10005E40(*(v1 - 941));
        ++v0;
        v1 += 2778;
      } while (v0 < dword_100B36FC);
    }
  } else {
    v2 = dword_100B36F8;
    v3 = 0;
    v4 = 0;
    if (dword_100B36F8 > 0) {
      v5 = Base;
      v6 = &dword_10ACD4F8;
      v7 = v15;
      do {
        if ((v6[2] & 2) == 0) {
          v8 = *v6;
          *(_DWORD *)v7 = v4;
          if (v8)
              v9 = *(_DWORD *)(v8 + 4084);
          else
              v9 = *(v6 - 4);
          *(_DWORD *)v5 = v9;
          ++v3;
          v7 += 8;
          v5 += 8;
        }
        ++v4;
        v6 += 32;
      } while (v4 < v2);
    }
    if (v3) {
      qsort(Base, v3, 8, sub_10066620);
      v2 = dword_100B36F8;
    }
    v10 = 0;
    if (v3 > 0) {
      v11 = v15;
      do {
        v12 = *(_DWORD *)v11 << 7;
        v13 = *(int *)((char *)&dword_10ACD4F8 + v12);
        if (v13) {
          *(_DWORD *)(v13 + 4088) = v2 - v10 - 1;
          v2 = dword_100B36F8;
        } else {
          *(int *)((char *)&dword_10ACD4EC + v12) = v2 - v10 - 1;
        }
        ++v10;
        v11 += 8;
      } while (v10 < v3);
    }
  }
}
// 1007E2A0: using guessed type int __cdecl qsort(_DWORD, _DWORD, _DWORD, _DWORD);
// 100B36F8: using guessed type int dword_100B36F8;
// 100B36FC: using guessed type int dword_100B36FC;
// 1022AF18: using guessed type int gNetworkPlay;
// 10ACD4EC: using guessed type int dword_10ACD4EC;
// 10ACD4F8: using guessed type int dword_10ACD4F8;
// 10ACEEA0: using guessed type int dword_10ACEEA0;

//----- (10066620) --------------------------------------------------------
int __cdecl sub_10066620(const void *a1, const void *a2) {
  if (*(float *)a1 > (double)*(float *)a2)
    return 1;
  if (*(float *)a1 >= (double)*(float *)a2)
    return 0;
  return -1;
}

//----- (10066650) --------------------------------------------------------
int *__thiscall meth_10066650(_DWORD *this) {
  int v2;         // ecx
  float *v3;      // esi
  float *v4;      // edi
  int v5;         // ecx
  double v6;      // st7
  double v7;      // st6
  double v8;      // st7
  double v9;      // st7
  double v10;     // st6
  double v11;     // st7
  int v12;        // eax
  int v13;        // ebp
  int v14;        // eax
  double v15;     // st7
  int v16;        // edx
  int *result;    // eax
  int v18;        // ebp
  float *v19;     // ecx
  char *v20;      // esi
  int v21;        // edi
  int v22;        // ecx
  int *v23;       // eax
  bool v24;       // cc
  int *v25;       // ecx
  char *v26;      // edi
  int v27;        // esi
  int v28;        // ecx
  char v29;       // al
  char v30;       // cl
  int v31;        // eax
  int v32;        // eax
  int v33;        // eax
  int v34;        // esi
  char *v35;      // edi
  int v36;        // [esp+0h] [ebp-F4h]
  int v37;        // [esp+4h] [ebp-F0h]
  int v38;        // [esp+8h] [ebp-ECh]
  int v39;        // [esp+8h] [ebp-ECh]
  float v40;      // [esp+1Ch] [ebp-D8h]
  int v41;        // [esp+1Ch] [ebp-D8h]
  int *v42;       // [esp+1Ch] [ebp-D8h]
  float v43;      // [esp+20h] [ebp-D4h]
  int v44;        // [esp+20h] [ebp-D4h]
  int v45;        // [esp+24h] [ebp-D0h]
  int v46;        // [esp+28h] [ebp-CCh] BYREF
  float *v47;     // [esp+2Ch] [ebp-C8h]
  int *v48;       // [esp+30h] [ebp-C4h]
  int v49;        // [esp+34h] [ebp-C0h]
  _DWORD *v50;    // [esp+38h] [ebp-BCh]
  float v51[3];   // [esp+3Ch] [ebp-B8h] BYREF
  float v52[3];   // [esp+48h] [ebp-ACh] BYREF
  float v53;      // [esp+54h] [ebp-A0h] BYREF
  int v54;        // [esp+58h] [ebp-9Ch] BYREF
  char Base[152]; // [esp+5Ch] [ebp-98h] BYREF

  v43 = *(float *)(gUnk06594.field_4938 + 100);
  v2 = dword_100B36F8;
  v50 = this;
  v45 = 0;
  if (dword_100B36F8 > 0) {
    v3 = &v53;
    v4 = (float *)&unk_10ACD4FC;
    do {
      v5 = *((_DWORD *)v4 - 1);
      if (v5) {
        if ((_DWORD *)v5 == this || *(_DWORD *)(v5 + 320) >= dword_100B4050) {
          if (gGameMode || *(_DWORD *)(v5 + 320) < dword_100B4050 ||
              (*(_BYTE *)(*(_DWORD *)(v5 + 3840) + 104) & 2) == 0 || *(_BYTE *)(v5 + 10671) != 2 ||
              *(float *)(v5 + 10672) != 0.0) {
              v6 = *((float *)this + 1021);
              v46 = *(_DWORD *)(v5 + 4012) - this[1003];
              v7 = (double)v46 * v43 + v6 - *(float *)(v5 + 4084);
              v40 = v7;
              if (v7 <= v43 * 0.5) {
                  if (v43 * -0.5 > v40)
                      v40 = v43 + v40;
                  v8 = sub_1003B0E0((float *)this + 12, (float *)(v5 + 48));
              } else {
                  v40 = v40 - v43;
                  v8 = sub_1003B0E0((float *)this + 12, (float *)(v5 + 48));
              }
              goto LABEL_28;
          }
          *v3 = 1000000000.0;
        } else {
          *v3 = 1.0e10;
        }
      } else {
        if (gGameMode || *(_DWORD *)v4 < dword_100B4050 || ((_BYTE)v4[1] & 2) == 0) {
          v9 = *((float *)this + 1021);
          v46 = *((_DWORD *)v4 - 8) - this[1003];
          v10 = (double)v46 * v43 + v9 - *(v4 - 5);
          v40 = v10;
          if (v10 > v43 * 0.5) {
              v11 = v40 - v43;
              goto LABEL_26;
          }
          if (v43 * -0.5 > v40) {
              v11 = v43 + v40;
          LABEL_26:
              v40 = v11;
          }
          v8 = sub_1003B0E0((float *)this + 12, v4 - 25);
        LABEL_28:
          *v3 = v8 + v40 * v40;
          goto LABEL_29;
        }
        *v3 = 1000000000.0;
      }
    LABEL_29:
      v12 = v45;
      v2 = dword_100B36F8;
      *((_DWORD *)v3 + 1) = v45;
      v4 += 32;
      v3 += 2;
      v45 = v12 + 1;
    } while (v12 + 1 < v2);
  }
  if (v2 > 1) {
    v13 = this[80];
    v14 = 8 * v13;
    v15 = *(&v53 + 2 * v13);
    *(float *)((char *)&v53 + v14) = v53;
    v54 = v13;
    v53 = v15;
    *(int *)((char *)&v54 + v14) = 0;
    qsort(Base, v2 - 1, 8, sub_10066620);
  }
  v16 = 0;
  v49 = 0;
  do {
    result = (int *)dword_100B36F8;
    v18 = 0;
    v41 = 1;
    v45 = 0;
    v44 = 0;
    if (dword_100B36F8 > 0) {
      v48 = &v46;
      v19 = &v53;
      v47 = &v53;
      do {
        v20 = (char *)&unk_10ACD498 + 128 * *((_DWORD *)v19 + 1);
        if (*((_DWORD *)v20 + 29) != v16 || *((_DWORD *)v20 + 25) < dword_100B4050)
          goto LABEL_47;
        if (v44 >= 1) {
          v21 = *((_DWORD *)v20 + 24);
          if (!v21)
              goto LABEL_47;
          v41 = 0;
          if (*(_DWORD *)(v21 + 3844) || *v19 <= 80000.0)
              goto LABEL_47;
        } else {
          ++v44;
          v21 = *((_DWORD *)v20 + 24);
          if (!v21)
              goto LABEL_47;
          v41 = 0;
          if ((v20[104] & 2) == 0 || *(_BYTE *)(v21 + 10671) != 2 || *(float *)(v21 + 10672) != 0.0)
              goto LABEL_47;
        }
        *(_DWORD *)v20 = *(_DWORD *)(v21 + 48);
        *((_DWORD *)v20 + 1) = *(_DWORD *)(v21 + 52);
        *((_DWORD *)v20 + 2) = *(_DWORD *)(v21 + 56);
        *((_DWORD *)v20 + 6) = *(_DWORD *)(v21 + 4132);
        *((_DWORD *)v20 + 7) = *(_DWORD *)(v21 + 4136);
        *((_DWORD *)v20 + 8) = *(_DWORD *)(v21 + 4140);
        *((_DWORD *)v20 + 9) = *(_DWORD *)(v21 + 4144);
        *((_DWORD *)v20 + 10) = *(_DWORD *)(v21 + 3980);
        *((_DWORD *)v20 + 11) = *(_DWORD *)(v21 + 3984);
        *((_DWORD *)v20 + 12) = *(_DWORD *)(v21 + 4016);
        *((_DWORD *)v20 + 13) = *(_DWORD *)(v21 + 4068);
        *((_DWORD *)v20 + 14) = *(_DWORD *)(v21 + 4076);
        *((_DWORD *)v20 + 15) = *(_DWORD *)(v21 + 4080);
        *((_DWORD *)v20 + 16) = *(_DWORD *)(v21 + 4008);
        *((_DWORD *)v20 + 17) = *(_DWORD *)(v21 + 4012);
        *((_DWORD *)v20 + 18) = *(_DWORD *)(v21 + 4000);
        *((_DWORD *)v20 + 19) = *(_DWORD *)(v21 + 4004);
        meth_DebugPrint(*((void **)v20 + 16));
        v22 = *((_DWORD *)v20 + 24);
        *((_DWORD *)v20 + 20) = *(_DWORD *)(v21 + 4084);
        v16 = v49;
        *((_DWORD *)v20 + 21) = *(_DWORD *)(v21 + 4088);
        v23 = v48;
        ++v18;
        *((_DWORD *)v20 + 24) = 0;
        *v23 = v22;
        v19 = v47;
        *(_DWORD *)(v21 + 3840) = 0;
        v48 = v23 + 1;
        *(_DWORD *)(v21 + 3844) = 60;
      LABEL_47:
        result = (int *)(v45 + 1);
        v19 += 2;
        v24 = ++v45 < dword_100B36F8;
        v47 = v19;
      } while (v24);
    }
    if (v41) {
      ++v18;
      result = (int *)((char *)&stru_10ACDEA8 + 11112 * v16 + 11112 * dword_100B4050);
      *(&v45 + v18) = (int)result;
    }
    v45 = 0;
    if (v18) {
      v25 = &v54;
      v48 = &v54;
      result = &v46 + v18;
      v47 = (float *)(v50 + 940);
      do {
        if (v45 >= dword_100B36F8)
          break;
        v26 = (char *)&unk_10ACD498 + 128 * *v25;
        if (*((_DWORD *)v26 + 29) == v16 && *((_DWORD *)v26 + 25) >= dword_100B4050 &&
            (v26[104] & 2) == 0 && !*((_DWORD *)v26 + 24)) {
          v27 = *(result - 1);
          v28 = *((_DWORD *)v26 + 9);
          *((_DWORD *)v26 + 24) = v27;
          *(_DWORD *)(v27 + 4144) = v28;
          v42 = result - 1;
          *(_DWORD *)(v27 + 3980) = *((_DWORD *)v26 + 10);
          *(_DWORD *)(v27 + 3984) = *((_DWORD *)v26 + 11);
          *(_DWORD *)(v27 + 4016) = *((_DWORD *)v26 + 12);
          *(_DWORD *)(v27 + 4068) = *((_DWORD *)v26 + 13);
          *(_DWORD *)(v27 + 4076) = *((_DWORD *)v26 + 14);
          *(_DWORD *)(v27 + 4080) = *((_DWORD *)v26 + 15);
          *(_DWORD *)(v27 + 4008) = *((_DWORD *)v26 + 16);
          *(_DWORD *)(v27 + 4012) = *((_DWORD *)v26 + 17);
          *(_DWORD *)(v27 + 4000) = *((_DWORD *)v26 + 18);
          *(_DWORD *)(v27 + 4004) = *((_DWORD *)v26 + 19);
          meth_DebugPrint(*(void **)(v27 + 4008));
          *(_DWORD *)(v27 + 4084) = *((_DWORD *)v26 + 20);
          *(_DWORD *)(v27 + 4088) = *((_DWORD *)v26 + 21);
          *(_DWORD *)(v27 + 3840) = v26;
          *(_BYTE *)(v27 + 10671) = 0;
          *(_DWORD *)(v27 + 10672) = 1065353216;
          *(_DWORD *)(v27 + 3960) = 1;
          meth_10062C50((_DWORD *)v27);
          meth_10065630((_DWORD *)v27);
          *(_DWORD *)(v27 + 3968) = *((_DWORD *)v26 + 3);
          *(_DWORD *)(v27 + 3972) = *((_DWORD *)v26 + 4);
          *(_DWORD *)(v27 + 3976) = *((_DWORD *)v26 + 5);
          *(float *)&v38 = *((float *)v26 + 2) - -0.1;
          meth_10076420((float *)v27, *(_DWORD *)v26, *((_DWORD *)v26 + 1), v38);
          *(_BYTE *)(v27 + 10671) = 0;
          *(_DWORD *)(v27 + 10672) = 1065353216;
          v29 = v26[94];
          v30 = v26[93];
          *(_BYTE *)(v27 + 10668) = v26[92];
          *(_BYTE *)(v27 + 10669) = v30;
          *(_BYTE *)(v27 + 10670) = v29;
          sub_100661B0(v27, (int)v26);
          v31 = *(_DWORD *)(v27 + 3980) + 40 * *(_DWORD *)(v27 + 3984);
          sub_1003AEE0(v51, (float *)(v31 + 64), (float *)(v31 + 76));
          v32 = *(_DWORD *)(v27 + 3980) + 40 * *(_DWORD *)(v27 + 3984);
          sub_1003AEE0(v52, (float *)(v32 + 104), (float *)(v32 + 116));
          v33 = *(_DWORD *)(v27 + 3980) + 40 * *(_DWORD *)(v27 + 3984);
          sub_1003ADA0((float *)v27, (float *)(v33 + 76), (float *)(v33 + 116));
          sub_1003B050((float *)(v27 + 16), v51, v52);
          sub_1003AC30((float *)(v27 + 32), (float *)v27, (float *)(v27 + 16));
          sub_1003AE50((float *)(v27 + 32));
          sub_1003AC30((float *)(v27 + 16), (float *)(v27 + 32), (float *)v27);
          sub_1003AE50((float *)(v27 + 16));
          *(_DWORD *)(v27 + 3988) = *(_DWORD *)v27;
          *(_DWORD *)(v27 + 3992) = *(_DWORD *)(v27 + 4);
          *(_DWORD *)(v27 + 3996) = *(_DWORD *)(v27 + 8);
          meth_10076700(v27, (void *)v27);
          if ((*(_BYTE *)(*(_DWORD *)(v27 + 3840) + 104) & 1) != 0) {
              meth_100767A0((_DWORD *)v27, 0, 0, 0);
          } else {
              *(float *)&v39 = *(float *)(v27 + 8) * 50.0;
              *(float *)&v37 = *(float *)(v27 + 4) * 50.0;
              *(float *)&v36 = *(float *)v27 * 50.0;
              meth_100767A0((_DWORD *)v27, v36, v37, v39);
          }
          --v18;
          *(_DWORD *)(*(_DWORD *)(v27 + 360) + 412) = 0;
          *(_DWORD *)(*(_DWORD *)(v27 + 360) + 436) = 0;
          *(_BYTE *)(*(_DWORD *)(v27 + 360) + 416) = 2;
          *(_DWORD *)(*(_DWORD *)(v27 + 364) + 412) = 0;
          *(_DWORD *)(*(_DWORD *)(v27 + 364) + 436) = 0;
          *(_BYTE *)(*(_DWORD *)(v27 + 364) + 416) = 2;
          *(_DWORD *)(*(_DWORD *)(v27 + 372) + 412) = 0;
          *(_DWORD *)(*(_DWORD *)(v27 + 372) + 436) = 0;
          *(_BYTE *)(*(_DWORD *)(v27 + 372) + 416) = 2;
          *(_DWORD *)(*(_DWORD *)(v27 + 368) + 412) = 0;
          result = v42;
          *(_DWORD *)(*(_DWORD *)(v27 + 368) + 436) = 0;
          v25 = v48;
          *(_BYTE *)(*(_DWORD *)(v27 + 368) + 416) = 2;
          v16 = v49;
          *(_DWORD *)(v27 + 3744) = 0;
          *(_DWORD *)(v27 + 3748) = 0;
          *(_DWORD *)(v27 + 3752) = 0;
          *(_DWORD *)(v27 + 3756) = -180;
          *(_DWORD *)(v27 + 860) = 40;
          *(_DWORD *)(v27 + 3616) = 0;
        }
        v34 = (int)v47;
        v35 = (char *)&unk_10ACD498 + 128 * *v25;
        v25 += 2;
        *(_DWORD *)v47 = v35;
        ++v45;
        v47 = (float *)(v34 + 4);
        v48 = v25;
      } while (v18);
    }
    v49 = ++v16;
  } while (v16 < 2);
  return result;
}
// 1007E2A0: using guessed type int __cdecl qsort(_DWORD, _DWORD, _DWORD, _DWORD);
// 100B36F8: using guessed type int dword_100B36F8;
// 100B4050: using guessed type int dword_100B4050;

//----- (10066E90) --------------------------------------------------------
void __thiscall meth_10066E90(_DWORD *this) {
  int v2;          // ecx
  int v3;          // ebx
  int v4;          // edx
  int v5;          // eax
  int v6;          // esi
  int v7;          // edi
  int v8;          // eax
  void *v9;        // ecx
  int v10;         // edx
  void *v11;       // ecx
  int v12;         // edx
# 505 * v13;       // ecx
  int v14;         // edx
  LPCSTR v15;      // eax
  double v16;      // st7
  int v17;         // edx
  int v18;         // edi
  int v19;         // eax
  int v20;         // esi
  int v21;         // eax
  const char *v22; // eax
  double v23;      // st7
  double v24;      // st7
  int v25;         // edx
  int *v26;        // eax
  int v27;         // esi
  double v28;      // st6
  int v29;         // ebx
  __int16 v30;     // cx
# 505 * v31;       // ecx
  int v32;         // eax
  int v33;         // eax
  LPCSTR v34;      // eax
  double v35;      // st7
  const char *v36; // eax
  void *v37;       // ecx
  int v38;         // edi
  int v39;         // eax
  int v40;         // esi
  float v41;       // [esp+4h] [ebp-28h]
  int v42;         // [esp+4h] [ebp-28h]
  const char *v43; // [esp+4h] [ebp-28h]
  int v44;         // [esp+4h] [ebp-28h]
  float v45;       // [esp+18h] [ebp-14h]
  int *v46;        // [esp+18h] [ebp-14h]
  LPCSTR v47;      // [esp+1Ch] [ebp-10h]
  float v48;       // [esp+1Ch] [ebp-10h]
  float v49;       // [esp+20h] [ebp-Ch]
  int v50;         // [esp+20h] [ebp-Ch]
  int v51;         // [esp+24h] [ebp-8h]
  int v52;         // [esp+28h] [ebp-4h]

  v2 = gUnk06594.field_4A28;
  if (gUnk06594.field_4A28) {
    v3 = this[24];
    v52 = v3;
    if (v3) {
      *this = *(_DWORD *)(v3 + 48);
      this[1] = *(_DWORD *)(v3 + 52);
      this[2] = *(_DWORD *)(v3 + 56);
      this[3] = *(_DWORD *)(v3 + 3968);
      this[4] = *(_DWORD *)(v3 + 3972);
      this[5] = *(_DWORD *)(v3 + 3976);
      this[18] = *(_DWORD *)(v3 + 4000);
      this[19] = *(_DWORD *)(v3 + 4004);
      this[16] = *(_DWORD *)(v3 + 4008);
      this[17] = *(_DWORD *)(v3 + 4012);
      this[12] = *(_DWORD *)(v3 + 4016);
      this[13] = *(_DWORD *)(v3 + 4068);
      this[20] = *(_DWORD *)(v3 + 4084);
      v2 = gUnk06594.field_4A28;
    }
    v4 = this[19];
    if (v4 >= 0)
      v5 = this[19];
    else
      v5 = v2 - (-1 - v4) % v2 - 1;
    v41 = *((float *)this + 12) * 100.0;
    v6 = v5 % v2;
    v7 = (v5 % v2 + 1) % v2;
    v51 = v7;
    LODWORD(v49) = sub_1002B920(v41);
    v45 = (double)SLODWORD(v49) * 0.0099999998;
    if (sub_1003BA70((float *)&gUnk06594.gap4968[20 * v6],
                     (float *)&gUnk06594.gap4960[20 * v6],
                     (float *)this + 3,
                     (float *)this)) {
      meth_DebugPrint((void *)(this[19] - 1));
      if (!v6)
        --this[17];
      meth_DebugPrint((void *)gUnk06594.field_4A28);
      if (v6 == this[18] % gUnk06594.field_4A28) {
        v8 = this[19];
        if (v8 < 0) {
          v9 = (void *)(v8 + gUnk06594.field_4A28);
          v10 = this[17] + 1;
          this[19] = v8 + gUnk06594.field_4A28;
          this[17] = v10;
          if (gUnk06594.field_4938)
              *((float *)this + 20) =
                  *(float *)(gUnk06594.field_4938 + 100) + *((float *)this + 20);
          meth_DebugPrint(v9);
        }
      }
      --this[19];
      goto LABEL_111;
    }
    if (!sub_1003BA70((float *)&gUnk06594.gap4968[20 * v7],
                      (float *)&gUnk06594.gap4960[20 * v7],
                      (float *)this + 3,
                      (float *)this))
      goto LABEL_111;
    meth_DebugPrint((void *)(this[19] + 1));
    v11 = (void *)this[18];
    v12 = this[19] + 1;
    this[19] = v12;
    if (v12 > (int)v11) {
      this[18] = v12;
      meth_DebugPrint(v11);
      if (v7)
        goto LABEL_52;
      v13 = (#505 *)this[16];
      if ((int)v13 >= dword_100BD3E0) {
      LABEL_41:
        if (this[16] == dword_100BD3E0) {
          this[26] |= 2u;
          if (v3) {
              v23 = *(float *)(v3 + 4076);
              *(_DWORD *)(v3 + 10672) = 1063675494;
              *(float *)(v3 + 4076) = v23 - *((float *)this + 12);
              this[12] = 0;
              *(_DWORD *)(v3 + 4088) = dword_118AB470;
              *(_DWORD *)(v3 + 4092) = gGameMode == GAME_MODE_6 ?
                                           String2 :
                                           GetStringWithIndex(dword_100B3960[dword_118AB470]);
              *(_DWORD *)(v3 + 4096) = 1084227584;
              if (this[25] < dword_100B4050 && dword_100BD3E0 == 3 &&
                  (*((float *)dword_10ACED34 + gChosenTrack + 67) == 0.0 ||
                   *(float *)(v3 + 4076) <
                       (double)*((float *)dword_10ACED34 + gChosenTrack + 67))) {
                  *((_DWORD *)dword_10ACED34 + gChosenTrack + 67) = *(_DWORD *)(v3 + 4076);
                  *(_DWORD *)(v3 + 4096) = 0x3FC00000;
                  *(_DWORD *)(v3 + 4100) = GetStringWithIndex(0x121u);
                  *(_DWORD *)(v3 + 4104) = 0x40600000;
              }
          }
          ++dword_118AB470;
          goto LABEL_111;
        }
      LABEL_52:
        if ((gGameMode == GAME_MODE_1 || gGameMode == GAME_MODE_6 || gGameMode == GAME_MODE_2) &&
            this[25] < dword_100B4050) {
          if (!dword_106909E0)
              sub_10067D80();
          if (gGameMode == GAME_MODE_1) {
              v24 = flt_10ACEE9C - flt_10AD1A04;
          } else {
              v25 = 255;
              if (dword_100B36FC <= 1) {
                  v24 = v49;
              } else {
                  v24 = v49;
                  v26 = (int *)&unk_10AD1A08;
                  v27 = dword_100B36FC - 1;
                  do {
                      if (v25 > *v26) {
                          v24 = flt_10ACEE9C - *((float *)v26 - 1);
                          v25 = *v26;
                      }
                      v26 += 2778;
                      --v27;
                  } while (v27);
              }
          }
          if (v24 < 0.0)
              v24 = -v24;
          v28 = *(float *)(this[24] + 4144) * 0.44642857;
          if (v28 == 0.0) {
              v48 = 1000.0;
          } else {
              if (v28 < 25.0)
                  v28 = 25.0;
              v48 = v24 / v28;
          }
          v50 = 0;
          if (dword_100B4050 > 0) {
              v46 = &dword_10ACD4F8;
              do {
                  v29 = *v46;
                  if (*(_DWORD *)(*v46 + 4092) == *v46 + 4108) {
                      strcpy((char *)(v29 + 10940), (const char *)(v29 + 4108));
                      *(_DWORD *)(v29 + 4092) = v29 + 10940;
                  } else {
                      *(_DWORD *)(v29 + 4092) = GetStringWithIndex(0x122u);
                      *(_DWORD *)(v29 + 4096) = 0x3ECCCCCD;
                  }
                  v30 = gChosenWeather1 - 1;
                  if ((__int16)(gChosenWeather1 - 1) > 2 || v30 < 0)
                      v30 = 0;
                  *(float *)(v29 + 4080) = *(float *)&gTrackData[gChosenTrack]
                                                ->last[84 * dword_10ACED0C + 28 * v30 + 4 * v51] +
                                           *(float *)(v29 + 4080);
                  if (*(float *)(v29 + 4076) != 0.0 && dword_100B36FC > 1) {
                      sprintf((char *const)(v29 + 4108), aRy);
                      CreateMinuteSecondsString((char *)(v29 + 4111), v48);
                      if (*(_DWORD *)(v29 + 4088)) {
                          if (v48 > 120.0)
                              *(_DWORD *)(v29 + 4100) = GetStringWithIndex(0x123u);
                          v43 = GetStringWithIndex(0x124u);
                          sprintf((char *const)(strlen((const char *)(v29 + 4108)) + v29 + 4108),
                                  v43);
                      }
                      *(_DWORD *)(v29 + 4100) = v29 + 4108;
                      *(_DWORD *)(v29 + 4104) = 1063675494;
                  }
                  *(_DWORD *)(v29 + 4000) = this[18];
                  ++v50;
                  v46 += 32;
              } while (v50 < dword_100B4050);
              v3 = v52;
          }
        }
        goto LABEL_111;
      }
      v47 = 0;
      if (*((float *)this + 13) == 0.0 || v45 < (double)*((float *)this + 13)) {
        v14 = this[25];
        *((float *)this + 13) = v45;
        if (v14 < dword_100B4050) {
          *(_DWORD *)(this[24] + 4072) = v13;
          v13 = dword_10ACED34;
          if (*((float *)dword_10ACED34 + gChosenTrack + 44) == 0.0 ||
              *((float *)this + 13) < (double)*((float *)dword_10ACED34 + gChosenTrack + 44)) {
              *((_DWORD *)dword_10ACED34 + gChosenTrack + 44) = this[13];
              v15 = GetStringWithIndex(0x109u);
              goto LABEL_28;
          }
          if (this[16]) {
              v15 = GetStringWithIndex(0x10Au);
          LABEL_28:
              v7 = (int)v15;
              v47 = v15;
              goto LABEL_29;
          }
        }
      }
    LABEL_29:
      if (v3) {
        meth_DebugPrint((void *)this[16]);
        *(float *)(v3 + 4 * this[16] + 4020) = v45;
      }
      v16 = *((float *)this + 12) - v45;
      v17 = this[16] + 1;
      this[16] = v17;
      this[17] = v17;
      *((float *)this + 12) = v16;
      if (gGameMode == GAME_MODE_3) {
        if (v17 == 1) {
          meth_DebugPrint(v13);
          v18 = this[18];
          v19 = this[17] - 1;
          v20 = this[19];
          --this[16];
          this[17] = v19;
          this[18] = v18 - gUnk06594.field_4A28;
          this[19] = v20 - gUnk06594.field_4A28;
          if (gUnk06594.field_4938)
              *((float *)this + 20) =
                  *((float *)this + 20) - *(float *)(gUnk06594.field_4938 + 100);
        }
      } else if (v3) {
        meth_DebugPrint(v13);
        v21 = this[16];
        if (v21 == dword_100BD3E0 - 1) {
          strcpy((char *)(v3 + 4108), GetStringWithIndex(0x10Bu));
          v7 = (int)v47;
        } else {
          v42 = v21 + 1;
          v22 = GetStringWithIndex(0x10Cu);
          sprintf((char *const)(v3 + 4108), v22, v42);
        }
        *(_DWORD *)(v3 + 4092) = v3 + 4108;
        *(_DWORD *)(v3 + 4096) = 1065353216;
        if (v7) {
          *(_DWORD *)(v3 + 4100) = v7;
          *(_DWORD *)(v3 + 4104) = 1065353216;
        }
      }
      goto LABEL_41;
    }
    if (v7) {
    LABEL_111:
      if (v3) {
        *(_DWORD *)(v3 + 4000) = this[18];
        *(_DWORD *)(v3 + 4004) = this[19];
        *(_DWORD *)(v3 + 4008) = this[16];
        *(_DWORD *)(v3 + 4012) = this[17];
        *(_DWORD *)(v3 + 4016) = this[12];
        *(_DWORD *)(v3 + 4068) = this[13];
        *(_DWORD *)(v3 + 4084) = this[20];
      }
      return;
    }
    v31 = (#505 *)this[16];
    v32 = this[17] + 1;
    this[17] = v32;
    if (v32 <= (int)v31) {
    LABEL_107:
      meth_DebugPrint((void *)this[16]);
      if (gGameMode == GAME_MODE_3 && this[16] == 1) {
        meth_DebugPrint(v37);
        v38 = this[18];
        v39 = this[17] - 1;
        v40 = this[19];
        --this[16];
        this[17] = v39;
        this[18] = v38 - gUnk06594.field_4A28;
        this[19] = v40 - gUnk06594.field_4A28;
        if (gUnk06594.field_4938)
          *((float *)this + 20) = *((float *)this + 20) - *(float *)(gUnk06594.field_4938 + 100);
      }
      goto LABEL_111;
    }
    if (*((float *)this + 13) == 0.0 || v45 < (double)*((float *)this + 13)) {
      v33 = this[25];
      *((float *)this + 13) = v45;
      if (v33 < dword_100B4050) {
        *(_DWORD *)(this[24] + 4072) = v31;
        v31 = dword_10ACED34;
        if (*((float *)dword_10ACED34 + gChosenTrack + 44) == 0.0 ||
            *((float *)this + 13) < (double)*((float *)dword_10ACED34 + gChosenTrack + 44)) {
          *((float *)dword_10ACED34 + gChosenTrack + 44) = v45;
          v34 = GetStringWithIndex(0x109u);
          goto LABEL_101;
        }
        if (this[16]) {
          v34 = GetStringWithIndex(0x10Au);
        LABEL_101:
          v7 = (int)v34;
          goto LABEL_102;
        }
      }
    }
  LABEL_102:
    if (v3) {
      meth_DebugPrint(v31);
      v31 = (#505 *)this[16];
      *(float *)(v3 + 4 * (_DWORD)v31 + 4020) = v45;
    }
    v35 = *((float *)this + 12) - v45;
    this[16] = this[17];
    *((float *)this + 12) = v35;
    if (v3) {
      meth_DebugPrint(v31);
      v44 = this[16] + 1;
      v36 = GetStringWithIndex(0x10Cu);
      sprintf((char *const)(v3 + 4108), v36, v44);
      *(_DWORD *)(v3 + 4092) = v3 + 4108;
      *(_DWORD *)(v3 + 4096) = 1065353216;
      if (v7) {
        *(_DWORD *)(v3 + 4100) = v7;
        *(_DWORD *)(v3 + 4104) = 1065353216;
      }
    }
    goto LABEL_107;
  }
}
// 100671DD: variable 'v13' is possibly undefined
// 1006773A: variable 'v31' is possibly undefined
// 100677E7: variable 'v37' is possibly undefined
// 100B36FC: using guessed type int dword_100B36FC;
// 100B380C: using guessed type int gChosenTrack;
// 100B4050: using guessed type int dword_100B4050;
// 104BBE08: using guessed type int gChosenWeather1;
// 106909E0: using guessed type int dword_106909E0;
// 10ACD4F8: using guessed type int dword_10ACD4F8;
// 10ACED0C: using guessed type int dword_10ACED0C;
// 10ACEE9C: using guessed type float flt_10ACEE9C;
// 10AD1A04: using guessed type float flt_10AD1A04;
// 118AB470: using guessed type int dword_118AB470;

//----- (10067880) --------------------------------------------------------
char *__cdecl sub_10067880(const void **a1, char *a2, int a3) {
  const void **v3; // edx
  char *v4;        // eax
  const void *v5;  // esi
  const void **v6; // ebx
  char *result;    // eax
  char Buffer[80]; // [esp+10h] [ebp-50h] BYREF

  v3 = a1;
  v4 = a2;
  v5 = *a1;
  if (*a1) {
    v6 = a1;
    do {
      v3 += 2;
      qmemcpy(v4, v5, (unsigned int)v6[1]);
      v5 = *v3;
      v4 = &v4[(_DWORD)v6[1]];
      v6 = v3;
    } while (*v3);
  }
  result = (char *)(v4 - a2);
  if ((int)result > a3) {
    sprintf(Buffer, "VAR SAVE OVERFLOW (%d avail, %d used)", a3, result);
    sub_10035BBA((int)Buffer);
  }
  return result;
}

//----- (10067900) --------------------------------------------------------
void **__cdecl sub_10067900(void **a1, char *a2) {
  void **result; // eax
  char *v3;      // edi
  void **v5;     // edx

  result = a1;
  v3 = (char *)*a1;
  if (*a1) {
    v5 = a1;
    do {
      result += 2;
      qmemcpy(v3, a2, (unsigned int)v5[1]);
      v3 = (char *)*result;
      a2 = &a2[(_DWORD)v5[1]];
      v5 = result;
    } while (*result);
  }
  return result;
}

//----- (10067940) --------------------------------------------------------
char *__cdecl sub_10067940(int a1) {
  return sub_10067880((const void **)&off_100B39B0, (char *)(a1 + 28800), 89992);
}
// 100B39B0: using guessed type int (*off_100B39B0)[81];

//----- (10067960) --------------------------------------------------------
void **__cdecl sub_10067960(int a1) {
  return sub_10067900((void **)&off_100B39B0, (char *)(a1 + 28800));
}
// 100B39B0: using guessed type int (*off_100B39B0)[81];

//----- (10067980) --------------------------------------------------------
char *sub_10067980() {
  return sub_10067880((const void **)&off_100B3A68, byte_10AF9848, 64);
}
// 100B3A68: using guessed type int *off_100B3A68;

//----- (100679A0) --------------------------------------------------------
void **sub_100679A0() {
  return sub_10067900((void **)&off_100B3A68, byte_10AF9848);
}
// 100B3A68: using guessed type int *off_100B3A68;

//----- (100679C0) --------------------------------------------------------
char *__thiscall meth_100679C0(_DWORD *this) {
  char *result; // eax
  void *v3;     // ecx
  int v4;       // edi
  int v5;       // edx
  void **v6;    // ecx
  _DWORD *v7;   // ebx

  result = (char *)dword_106909E0;
  if (!dword_106909E0) {
    result = (char *)gGameMode;
    if (gGameMode != GAME_MODE_2 && gGameMode != GAME_MODE_4) {
      result = (char *)this[80];
      if ((int)result < dword_100B4050) {
        result = (char *)dword_100BD3E0;
        if (this[1002] == dword_100BD3E0 - 1 || dword_100BD3E0 <= 1) {
          result = (char *)sub_1006AAA0();
          if (!result) {
              meth_DebugPrint(v3);
              __setargv_0();
              v4 = 0;
              if (dword_100B4050 > 0) {
                  v5 = 0;
                  v6 = &dword_10AD0868;
                  do {
                      v7 = *v6;
                      v6 += 2778;
                      v7[this[80] + 13] = 0;
                      *((_DWORD *)*(v6 - 2778) + this[80] + 15) = 14400;
                      ++v4;
                      *((_DWORD *)*(v6 - 2778) + this[80] + 11) =
                          (char *)&unk_1020AB98 + v5 + -89992 * this[80];
                      v5 += 14400;
                  } while (v4 < dword_100B4050);
              }
              result = sub_10067940((int)&unk_1020AB98 - 89992 * this[80]);
          }
        }
      }
    }
  }
  return result;
}
// 10067A2B: variable 'v3' is possibly undefined
// 100B4050: using guessed type int dword_100B4050;
// 106909E0: using guessed type int dword_106909E0;

//----- (10067AE0) --------------------------------------------------------
double __cdecl sub_10067AE0(int a1, int a2, float a3, int a4) {
  double v4;   // st7
  int v6[3];   // [esp+8h] [ebp-24h] BYREF
  float v7[3]; // [esp+14h] [ebp-18h] BYREF
  float v8[3]; // [esp+20h] [ebp-Ch] BYREF
  float v9;    // [esp+38h] [ebp+Ch]
  float v10;   // [esp+38h] [ebp+Ch]

  sub_1003AEE0((float *)v6, (float *)a1, (float *)LODWORD(a3));
  sub_1003AEE0(v8, (float *)LODWORD(a3), (float *)a4);
  sub_1003AEE0(v7, (float *)a1, (float *)a2);
  v4 = sub_1003B170((float *)v6);
  if (v4 != 0.0) {
    v9 = v4;
    sub_1003AD70((int)v6, v9);
  }
  v10 = -(sub_1003AC90(v7, (float *)v6) / *(float *)&dword_106C2CFC);
  return (1.0 - sub_1003AC90(v8, (float *)v6) / *(float *)&dword_106C2CFC * -0.002915452) /
         (1.0 - v10 * 0.002915452);
}
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (10067BC0) --------------------------------------------------------
__int64 __cdecl sub_10067BC0(float *a1, float *a2, float *a3, float *a4, _DWORD *a5, int a6) {
  double v6;           // st7
  double v8;           // st7
  unsigned __int8 v9;  // c0
  unsigned __int8 v10; // c3
  char v12;            // c0
  double v13;          // st7
  double v14;          // st7
  __int64 result;      // rax
  float v16[3];        // [esp+4h] [ebp-Ch] BYREF
  float v17;           // [esp+18h] [ebp+8h]
  float v18;           // [esp+18h] [ebp+8h]

  sub_1003AEE0(v16, a1, a2 + 12);
  v6 = a2[5] * v16[1] + a2[4] * v16[0] + a2[6] * v16[2];
  if (v6 <= 10.0) {
    if (v6 < -10.0)
      v6 = -10.0;
  } else {
    v6 = 10.0;
  }
  if (a6)
    v6 = v6 * 0.40000001;
  v17 = (v6 - -10.0) * 0.050000001;
  v8 = 1.0 - v17;
  if (v9 | v10 && v17 <= 0.50999999 && v8 >= 0.49000001 && v8 <= 0.50999999) {
    v8 = 0.5;
    v17 = 0.5;
  }
  if (v12) {
    v18 = v17 * 1.6;
    v13 = v8 - (1.0 - v8) * -0.60000002;
  } else {
    v13 = v8 * 1.6;
    v18 = v17 - (1.0 - v17) * -0.60000002;
  }
  *a3 = v18;
  *a4 = v13;
  v14 = sub_1003B170(v16);
  if (v14 < 32.0)
    v14 = 32.0;
  result = (__int64)(1024.0 / v14);
  *a5 = result;
  return result;
}
// 10067C61: variable 'v9' is possibly undefined
// 10067C61: variable 'v10' is possibly undefined
// 10067CB4: variable 'v12' is possibly undefined

//----- (10067D40) --------------------------------------------------------
int __cdecl sub_10067D40(int a1) {
  int result; // eax

  result = time_100752D0(3, *(&SizeInBytes + 6 * a1), (int)(&Format)[6 * a1], (int)*(&Tm + 6 * a1));
  dword_10AA3470 = a1;
  return result;
}
// 10AA3470: using guessed type int dword_10AA3470;

//----- (10067D80) --------------------------------------------------------
int sub_10067D80() {
  return sub_10067D40(13);
}

//----- (10067D90) --------------------------------------------------------
int sub_10067D90() {
  return sub_10067D40(14);
}

//----- (10067DA0) --------------------------------------------------------
int sub_10067DA0() {
  int result; // eax

  result = -1;
  dword_10AF9B94 = 1342177280;
  dword_10AF9B84 = -1;
  dword_10AF9B8C = -1;
  return result;
}
// 10AF9B84: using guessed type int dword_10AF9B84;
// 10AF9B8C: using guessed type int dword_10AF9B8C;
// 10AF9B94: using guessed type int dword_10AF9B94;

//----- (10067DC0) --------------------------------------------------------
int sub_10067DC0() {
  int result; // eax

  result = -1;
  dword_10AA3470 = -1;
  dword_10AF9B58 = 0;
  dword_10AF9B5C = 0;
  dword_10AF9B60 = 0;
  dword_10AF9B64 = 0;
  dword_10AF9B68 = 0;
  dword_10AF9B6C = 0;
  dword_10AF9B70 = 0;
  dword_10AF9B74 = 0;
  dword_10AF9B78 = 0;
  dword_10AF9B7C = 0;
  dword_10AF9B80 = 0;
  dword_10AF9B84 = -1;
  dword_10AF9B88 = -1;
  dword_10AF9B8C = -1;
  dword_10AF9B90 = -1;
  dword_10AF9B94 = 1342177280;
  dword_10AF9BA0 = 0;
  dword_10AF9B9C = 0;
  return result;
}
// 10AA3470: using guessed type int dword_10AA3470;
// 10AF9B58: using guessed type int dword_10AF9B58;
// 10AF9B5C: using guessed type int dword_10AF9B5C;
// 10AF9B60: using guessed type int dword_10AF9B60;
// 10AF9B64: using guessed type int dword_10AF9B64;
// 10AF9B68: using guessed type int dword_10AF9B68;
// 10AF9B6C: using guessed type int dword_10AF9B6C;
// 10AF9B70: using guessed type int dword_10AF9B70;
// 10AF9B74: using guessed type int dword_10AF9B74;
// 10AF9B78: using guessed type int dword_10AF9B78;
// 10AF9B7C: using guessed type int dword_10AF9B7C;
// 10AF9B80: using guessed type int dword_10AF9B80;
// 10AF9B84: using guessed type int dword_10AF9B84;
// 10AF9B88: using guessed type int dword_10AF9B88;
// 10AF9B8C: using guessed type int dword_10AF9B8C;
// 10AF9B90: using guessed type int dword_10AF9B90;
// 10AF9B94: using guessed type int dword_10AF9B94;
// 10AF9B9C: using guessed type int dword_10AF9B9C;
// 10AF9BA0: using guessed type int dword_10AF9BA0;

//----- (10067E50) --------------------------------------------------------
void __cdecl sub_10067E50(int a1, int a2, int a3, float a4, int *a5, int a6) {
  double v6; // st7
  int v7;    // eax

  v6 = sub_1003B0E0((float *)a5, (float *)(a6 + 48));
  if (v6 < *(float *)&dword_10AF9B94) {
    dword_10AF9B58 = *a5;
    dword_10AF9B5C = a5[1];
    v7 = a5[2];
    *(float *)&dword_10AF9B94 = v6;
    dword_10AF9B60 = v7;
    dword_10AF9B84 = a2;
    dword_10AF9B70 = a6;
    dword_10AF9B8C = a1;
    flt_10AF9B98 = a4;
    dword_10AF9B9C = a3;
  }
}
// 10AF9B58: using guessed type int dword_10AF9B58;
// 10AF9B5C: using guessed type int dword_10AF9B5C;
// 10AF9B60: using guessed type int dword_10AF9B60;
// 10AF9B70: using guessed type int dword_10AF9B70;
// 10AF9B84: using guessed type int dword_10AF9B84;
// 10AF9B8C: using guessed type int dword_10AF9B8C;
// 10AF9B94: using guessed type int dword_10AF9B94;
// 10AF9B98: using guessed type float flt_10AF9B98;
// 10AF9B9C: using guessed type int dword_10AF9B9C;

//----- (10067ED0) --------------------------------------------------------
int sub_10067ED0() {
  int result; // eax
  int v1;     // edx
  int v2;     // ecx
  int v3;     // eax
  int v4;     // [esp+8h] [ebp-10h] BYREF
  float v5;   // [esp+Ch] [ebp-Ch]
  float v6;   // [esp+10h] [ebp-8h] BYREF
  float v7;   // [esp+14h] [ebp-4h] BYREF

  result = dword_100B36FC;
  if (dword_100B36FC) {
    result = dword_10ACEDA8[0];
    if ((*(_BYTE *)(dword_10ACEDA8[0] + 104) & 1) == 0) {
      result = -1;
      if (dword_10AA3470 != -1) {
        if (qword_118AC770)
          return result;
        dword_10AA3470 = -1;
        dword_10AF9B90 = -1;
        dword_10AF9BA0 = 0;
      }
      v1 = dword_10AF9B8C;
      if (dword_10AF9B8C == -1) {
        v2 = dword_10AF9B70;
        dword_118AC77C = 0;
        dword_118AC778 = 0;
        qword_118AC770 = 0i64;
      } else {
        v2 = dword_10AF9B70;
        if (dword_10AF9B8C == dword_10AF9B90 && dword_10AF9B70 == dword_10AF9B74) {
          if (flt_10AF9B98 >= 0.0) {
              v5 = sub_10067AE0((int)&dword_10AF9B58,
                                (int)&dword_10AF9B64,
                                COERCE_FLOAT(dword_10AF9B70 + 48),
                                (int)&dword_10AF9B78) *
                   flt_10AF9B98;
              sub_10067BC0((float *)&dword_10AF9B58, (float *)dword_10AF9B70, &v7, &v6, &v4, 0);
          } else {
              v5 = -(sub_10067AE0((int)&dword_10AF9B58,
                                  (int)&dword_10AF9B58,
                                  COERCE_FLOAT(dword_10AF9B70 + 48),
                                  (int)&dword_10AF9B78) *
                     flt_10AF9B98);
              sub_10067BC0((float *)&dword_10AF9B58, (float *)dword_10AF9B70, &v7, &v6, &v4, 1);
          }
          v4 = (dword_10AF9B9C * v4) >> 8;
          if (!dword_10AF9BA0) {
              dword_10AF9BA0 = 1;
              strftime((char *)3,
                       *(&SizeInBytes + 6 * dword_10AF9B84),
                       (&Format)[6 * dword_10AF9B84],
                       *(&Tm + 6 * dword_10AF9B84));
          }
          if (!dword_10ACEE20[2778 * dword_106C1638] &&
              (dword_100AA8B4 == 1 || !dword_10ACEE20[2778 * dword_106C1690])) {
              qword_118AC770 = (__int64)(v5 * 0.000090909089 * 4294967296.0);
              v3 = (__int64)(v6 * (double)v4) + ((unsigned int)(__int64)(v7 * (double)v4) << 16);
              if (!dword_118AC77C)
                  v3 = (v3 >> 1) & 0x7FFF7FFF;
              dword_118AC77C = v3;
          }
          dword_10AF9B64 = dword_10AF9B58;
          v2 = dword_10AF9B70;
          dword_10AF9B68 = dword_10AF9B5C;
          dword_10AF9B6C = dword_10AF9B60;
          dword_10AF9B78 = *(_DWORD *)(dword_10AF9B70 + 48);
          dword_10AF9B7C = *(_DWORD *)(dword_10AF9B70 + 52);
          dword_10AF9B80 = *(_DWORD *)(dword_10AF9B70 + 56);
          v1 = dword_10AF9B8C;
        } else {
          dword_10AF9BA0 = 0;
          dword_118AC77C = ((unsigned int)dword_118AC77C >> 1) & 0x7FFF7FFF;
        }
      }
      result = dword_10AF9B84;
      dword_10AF9B90 = v1;
      dword_10AF9B88 = dword_10AF9B84;
      dword_10AF9B74 = v2;
    }
  }
  return result;
}
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100B36FC: using guessed type int dword_100B36FC;
// 106C1638: using guessed type int dword_106C1638;
// 106C1690: using guessed type int dword_106C1690;
// 10AA3470: using guessed type int dword_10AA3470;
// 10ACEDA8: using guessed type int dword_10ACEDA8[];
// 10ACEE20: using guessed type int dword_10ACEE20[];
// 10AF9B58: using guessed type int dword_10AF9B58;
// 10AF9B5C: using guessed type int dword_10AF9B5C;
// 10AF9B60: using guessed type int dword_10AF9B60;
// 10AF9B64: using guessed type int dword_10AF9B64;
// 10AF9B68: using guessed type int dword_10AF9B68;
// 10AF9B6C: using guessed type int dword_10AF9B6C;
// 10AF9B70: using guessed type int dword_10AF9B70;
// 10AF9B74: using guessed type int dword_10AF9B74;
// 10AF9B78: using guessed type int dword_10AF9B78;
// 10AF9B7C: using guessed type int dword_10AF9B7C;
// 10AF9B80: using guessed type int dword_10AF9B80;
// 10AF9B84: using guessed type int dword_10AF9B84;
// 10AF9B88: using guessed type int dword_10AF9B88;
// 10AF9B8C: using guessed type int dword_10AF9B8C;
// 10AF9B90: using guessed type int dword_10AF9B90;
// 10AF9B98: using guessed type float flt_10AF9B98;
// 10AF9B9C: using guessed type int dword_10AF9B9C;
// 10AF9BA0: using guessed type int dword_10AF9BA0;
// 118AC770: using guessed type __int64 qword_118AC770;
// 118AC778: using guessed type int dword_118AC778;
// 118AC77C: using guessed type int dword_118AC77C;

//----- (10068180) --------------------------------------------------------
void __cdecl sub_10068180(int a1, int *a2, int a3) {
  int v3; // eax
  int v4; // edx
  int v5; // [esp+0h] [ebp-4h]

  v3 = -1;
  v5 = 0x462BE000;
  v4 = 128;
  switch (gChosenTrack) {
  case 2:
  case 8:
    v3 = 0;
    v5 = 0x46ABE000;
    goto LABEL_4;
  case 4:
  case 10:
    v3 = 0;
    v5 = 0x462BE000;
  LABEL_4:
    v4 = 0xFF;
    break;
  default:
    break;
  }
  if (v3 != -1)
    sub_10067E50(a1, v3, v4, *(float *)&v5, a2, a3);
}
// 100B380C: using guessed type int gChosenTrack;

//----- (10068210) --------------------------------------------------------
void __cdecl sub_10068210(int a1, int *a2, int a3) {
  int v3; // eax
  int v4; // edx

  v3 = -1;
  v4 = 128;
  if (gChosenTrack == 4 || gChosenTrack == 10) {
    v3 = 15;
    v4 = 384;
  }
  if (v3 != -1)
    sub_10067E50(a1, v3, v4, 11000.0, a2, a3);
}
// 100B380C: using guessed type int gChosenTrack;

//----- (10068260) --------------------------------------------------------
size_t __cdecl sub_10068260(int a1, int a2) {
  sub_10073080(a1, a2);
  sub_100730A0(a1);
  return strftime((char *)(2 * a1), SizeInBytes, Format, Tm);
}

//----- (100682A0) --------------------------------------------------------
size_t car_MakeEnemyCarColorPanels() {
  size_t v0;     // ecx
  size_t *v1;    // eax
  int v2;        // esi
  int *v3;       // edi
  size_t result; // eax

  if (gConfigJoystickIndex == 1 || gConfigJoystickIndex == 2) {
    gConfigJoystickIndex = input_100791D0();
    switch (gConfigJoystickIndex) {
    case 1:
      gConfigJoystickPtr = &gConfig.joystick1;
      break;
    case 2:
      gConfigJoystickPtr = &gConfig.joystick2;
      break;
    case 3:
      gConfigJoystickPtr = &gConfig.joystick3;
      break;
    default:
      gConfigJoystickPtr = (BossRallyConfigJoystick *)&gConfig;
      break;
    }
  }
  v0 = 0;
  v1 = &SizeInBytes;
  do {
    *v1 = v0;
    v1 += 6;
    ++v0;
  } while ((int)v1 < (int)aMakeenemycarco_4);
  sub_10073060();
  v2 = 0;
  if (dword_100B36FC > 0) {
    v3 = dword_10AD0850;
    do {
      sub_10073080(v2++, *v3);
      v3 += 2778;
    } while (v2 < dword_100B36FC);
  }
  pm_sub_10073320(1);
  strftime(0, SizeInBytes, Format, Tm);
  result = dword_100B36FC;
  if (dword_100B36FC > 1)
    result = strftime((char *)2, SizeInBytes, Format, Tm);
  if (dword_100B36FC > 2)
    result = strftime((char *)4, SizeInBytes, Format, Tm);
  return result;
}
// 100B36FC: using guessed type int dword_100B36FC;
// 10AD0850: using guessed type int dword_10AD0850[];
// 10B4E1D0: using guessed type int gConfigJoystickIndex;

//----- (100683C0) --------------------------------------------------------
void __thiscall meth_100683C0(_DWORD *this) {
  this[990] = 0;
}

//----- (100683D0) --------------------------------------------------------
int sub_100683D0() {
  int result; // eax
  int i;      // esi

  result = dword_100B36FC;
  for (i = 0; i < dword_100B36FC; ++i) {
    sub_10072B80(24, i, 0);
    result = dword_100B36FC;
  }
  return result;
}
// 100B36FC: using guessed type int dword_100B36FC;

//----- (10068400) --------------------------------------------------------
int __thiscall meth_10068400(_DWORD *this) {
  int v2;              // edi
  float *v3;           // ebx
  double v5;           // st7
  unsigned __int8 v6;  // c0
  unsigned __int8 v7;  // c3
  double v8;           // st7
  double v9;           // st7
  __int64 v10;         // rax
  double v11;          // st7
  double v12;          // st6
  int v13;             // ecx
  int v14;             // edx
  int v15;             // edi
  unsigned int v16;    // edi
  unsigned __int8 v17; // al
  unsigned __int8 v18; // al
  unsigned int v19;    // edi
  unsigned __int8 v20; // al
  unsigned __int8 v21; // al
  unsigned __int8 v22; // al
  signed int v23;      // eax
  unsigned __int8 v24; // al
  signed int v25;      // eax
  unsigned __int8 v26; // al
  signed int v27;      // eax
  unsigned __int8 v28; // al
  signed int v29;      // eax
  unsigned __int8 v30; // al
  double v31;          // st7
  unsigned int v32;    // ecx
  void *v33;           // ecx
  int v34;             // eax
  int v35;             // ebx
  unsigned int v36;    // eax
  int v37;             // eax
  int v38;             // eax
  int v39;             // eax
  __int16 v40;         // ax
  int v41;             // eax
  __int64 v42;         // rax
  int v43;             // ecx
  double v44;          // st7
  _DWORD *v45;         // ecx
  _DWORD *v46;         // eax
  int result;          // eax
  _DWORD *v48;         // esi
  float v49;           // [esp+4h] [ebp-40h]
  int v50;             // [esp+18h] [ebp-2Ch]
  signed int v51;      // [esp+1Ch] [ebp-28h] BYREF
  int v52;             // [esp+20h] [ebp-24h]
  int v53;             // [esp+24h] [ebp-20h]
  int v54;             // [esp+28h] [ebp-1Ch] BYREF
  float v55;           // [esp+2Ch] [ebp-18h] BYREF
  float v56;           // [esp+30h] [ebp-14h] BYREF
  _DWORD *v57;         // [esp+34h] [ebp-10h]
  float v58;           // [esp+38h] [ebp-Ch] BYREF
  int v59;             // [esp+3Ch] [ebp-8h] BYREF
  unsigned int v60;    // [esp+40h] [ebp-4h]

  v2 = 2 * this[80];
  v50 = v2;
  v60 = 11112 * dword_106C1638;
  if (dword_106909B4 || !this[960]) {
    result = 24 * v2;
    *(int *)((char *)dword_118AC734 + result) = 0;
    *(int *)((char *)dword_118AC728 + result) = 0;
    *(int *)((char *)dword_118AC72C + result) = 0;
    return result;
  }
  v52 = 0;
  if (dword_100AA8B4 == 1) {
    v3 = (float *)dword_10AD05DC[2778 * dword_106C1638];
    if (!this[990] && !dword_10ACEE20[2778 * dword_106C1638])
      goto LABEL_11;
  } else {
    v3 = (float *)this[2509];
    if (!this[990] && !dword_10ACEE20[2778 * dword_106C1638] &&
        !dword_10ACEE20[2778 * dword_106C1690])
      goto LABEL_11;
  }
  v52 = 1;
LABEL_11:
  v57 = this + 983;
  *((float *)this + 989) =
      sub_10067AE0((int)(this + 12), (int)(this + 992), COERCE_FLOAT(v3 + 12), (int)(this + 983));
  sub_10067BC0((float *)this + 12, v3, &v55, &v56, &v54, 0);
  v5 = *((float *)this + 905);
  if (v6 | v7)
    v8 = v5 * -0.5;
  else
    v8 = v5 * 0.5;
  v9 = v8 * 15.714286 * *((float *)this + 989);
  if (v9 > 100000.0 || v9 < 0.0)
    v9 = 0.0;
  if (!this[80])
    dword_118290F4 = (*(_BYTE *)(*(_DWORD *)&gUnk06594.gap4918[16] +
                                 84 * *((unsigned __int16 *)this + 5254) + 76) &
                      0x10) != 0 ?
                         0x2AF8 :
                         0;
  if (!v52) {
    v53 = 24 * v2;
    v10 = (__int64)(v9 * 0.000090909089 * 4294967296.0);
    v11 = (double)v54;
    v12 = v56;
    dword_118AC728[6 * v2] = v10;
    dword_118AC72C[6 * v2] = HIDWORD(v10);
    *(int *)((char *)dword_118AC734 + v53) =
        ((unsigned int)(__int64)(v55 * v11) << 16) + (__int64)(v12 * v11);
  }
  v13 = this[986];
  v14 = 3 * v2;
  v15 = HIDWORD(qword_118AC740[3 * v2]);
  v53 = v13;
  if (!(v15 | LODWORD(qword_118AC740[v14])) || !*((_BYTE *)this + 877) && v13 >= 4 && v13 <= 7) {
    this[986] = 0;
    this[987] = 0;
    this[988] = 0;
  }
  if (*((_BYTE *)this + 866) > 0x7Fu) {
    sub_10067BC0((float *)this + 12, v3, (float *)&v59, &v58, &v51, 0);
    v16 = ((unsigned int)(__int64)(*(float *)&v59 * (double)v51) << 16) +
          (__int64)(v58 * (double)v51);
    v17 = *((_BYTE *)this + 866);
    v51 = v16;
    if (v17 >= 0xABu) {
      if (v17 >= 0xD5u)
        sub_10072AF0(1, v16);
      else
        sub_10072AF0(16, v16);
    } else {
      sub_10072AF0(17, v16);
    }
    input_10078E90();
    input_10078ED0();
  }
  v18 = *((_BYTE *)this + 867);
  *((_BYTE *)this + 866) = 0;
  if (v18 > 0x7Fu) {
    sub_10067BC0((float *)this + 12, v3, &v58, (float *)&v59, &v51, 0);
    v19 = ((unsigned int)(__int64)(v58 * (double)v51) << 16) +
          (__int64)(*(float *)&v59 * (double)v51);
    v20 = *((_BYTE *)this + 867);
    v51 = v19;
    if (v20 >= 0xABu) {
      if (v20 >= 0xD5u)
        sub_10072AF0(2, v19);
      else
        sub_10072AF0(18, v19);
    } else {
      sub_10072AF0(19, v19);
    }
    input_10078ED0();
    input_10078E90();
  }
  v21 = *((_BYTE *)this + 876);
  *((_BYTE *)this + 867) = 0;
  if (v21 > 0x7Fu) {
    sub_10067BC0((float *)this + 12, v3, &v58, (float *)&v59, &v51, 0);
    v51 = ((unsigned int)(__int64)(v58 * (double)v51) << 16) +
          (__int64)(*(float *)&v59 * (double)v51);
    sub_10072AF0(3, v51);
  }
  v22 = *((_BYTE *)this + 870);
  *((_BYTE *)this + 876) = 0;
  if (v22 > 0x7Fu) {
    sub_10067BC0((float *)this + 12, v3, &v58, (float *)&v59, &v51, 0);
    v23 = v51;
    if (v51 > 2)
      v23 = 32;
    v51 = 65537 * v23;
    sub_10072AF0(20, 65537 * v23);
  }
  v24 = *((_BYTE *)this + 871);
  *((_BYTE *)this + 870) = 0;
  if (v24 > 0x7Fu) {
    sub_10067BC0((float *)this + 12, v3, &v58, (float *)&v59, &v51, 0);
    v25 = v51;
    if (v51 > 2)
      v25 = 32;
    v51 = 65537 * v25;
    sub_10072AF0(21, 65537 * v25);
  }
  v26 = *((_BYTE *)this + 872);
  *((_BYTE *)this + 871) = 0;
  if (v26 > 0x7Fu) {
    sub_10067BC0((float *)this + 12, v3, &v58, (float *)&v59, &v51, 0);
    v27 = v51;
    if (v51 > 2)
      v27 = 32;
    v51 = 65537 * v27;
    sub_10072AF0(22, 65537 * v27);
  }
  v28 = *((_BYTE *)this + 873);
  *((_BYTE *)this + 872) = 0;
  if (v28 > 0x7Fu) {
    sub_10067BC0((float *)this + 12, v3, &v58, (float *)&v59, &v51, 0);
    v29 = v51;
    if (v51 > 2)
      v29 = 32;
    v51 = 65537 * v29;
    sub_10072AF0(23, 65537 * v29);
  }
  v30 = *((_BYTE *)this + 874);
  *((_BYTE *)this + 873) = 0;
  if (v30 <= 0x7Fu) {
    if (*((_BYTE *)this + 875) > 0x7Fu)
      sub_10072BA0(24, this[80]);
  } else {
    sub_10067BC0((float *)this + 12, v3, &v58, (float *)&v59, &v51, 0);
    v31 = *((float *)this + 989);
    v32 = 65537 * v51;
    v51 *= 65537;
    if (v31 >= 0.0) {
      v49 = *((float *)this + 989) * 22050.0;
      sub_10072750(24, this[80], v49);
      meth_DebugPrint(v33);
      v32 = v51;
    }
    if (*((_BYTE *)this + 875) > 0x7Fu)
      sub_10072B80(24, this[80], v32);
    else
      sub_10072B10(24, this[80], v32);
  }
  v34 = this[986];
  *((_BYTE *)this + 875) = *((_BYTE *)this + 874);
  *((_BYTE *)this + 874) = 0;
  if (v34 && (v34 < 4 || v34 > 7) && (v34 < 8 || v34 > 12))
    goto LABEL_122;
  v35 = -1;
  if (this[460])
    v35 = *((char *)this + 1820);
  v36 = *((unsigned __int8 *)this + 877);
  if ((signed int)v36 <= this[987] &&
      (!*((_BYTE *)this + 877) ||
       (int)this[988] >= 40 && (this[988] != 40 || v53 < 4 || v53 > 7))) {
    *((_WORD *)this + 177) = 0;
    goto LABEL_105;
  }
  this[987] = v36;
  if (gChosenWeather1 != 3) {
    switch (v35) {
    case 0:
    case 3:
      v37 = this[80];
      if (v37 < dword_100B4050 && !word_11782BA8[v37]) {
        word_11782BB8[v37] = 0;
        word_11782BAC[this[80]] = 0;
        word_11782BB0[this[80]] = 1;
        word_11782BB4[this[80]] = 9;
        word_11782BBC[this[80]] = 10;
        word_11782BA8[this[80]] = 1;
      }
      this[986] = 7;
      break;
    case 1:
      v38 = this[80];
      if (v38 < dword_100B4050 && !word_11782BA8[v38]) {
        word_11782BB8[v38] = 0;
        word_11782BAC[this[80]] = 0;
        word_11782BB0[this[80]] = 1;
        word_11782BB4[this[80]] = 14;
        word_11782BBC[this[80]] = 15;
        word_11782BA8[this[80]] = 1;
      }
      this[986] = 5;
      break;
    case 2:
      v39 = this[80];
      if (v39 < dword_100B4050 && !word_11782BA8[v39]) {
        word_11782BB8[v39] = 0;
        word_11782BAC[this[80]] = 0;
        word_11782BB0[this[80]] = 1;
        word_11782BB4[this[80]] = 12;
        word_11782BBC[this[80]] = 13;
        word_11782BA8[this[80]] = 1;
      }
      this[986] = 4;
      break;
    case 4:
      this[986] = 12;
      break;
    default:
      break;
    }
    v36 = *((unsigned __int8 *)this + 877);
  LABEL_101:
    this[987] = v36 >> 1;
    goto LABEL_102;
  }
  if (v35 >= 0) {
    if (v35 > 3) {
      if (v35 == 4) {
        this[986] = 7;
        this[987] = 0;
      }
      goto LABEL_102;
    }
    this[986] = 7;
    goto LABEL_101;
  }
LABEL_102:
  v40 = *((_WORD *)this + 177);
  this[988] = 40;
  *((_WORD *)this + 177) = v40 + 1;
  if (v40 > 16)
    *((_WORD *)this + 177) = 16;
  this[987] = this[987] * *((__int16 *)this + 177) / 12;
LABEL_105:
  v41 = this[986];
  if (!v41 || v41 >= 8 && v41 <= 12) {
    if (gChosenWeather1 != 3) {
      switch (v35) {
      case 0:
      case 3:
        this[986] = 10;
        break;
      case 1:
        this[986] = 8;
        break;
      case 2:
        this[986] = 9;
        break;
      case 4:
        this[986] = 12;
        break;
      default:
        goto LABEL_119;
      }
      goto LABEL_120;
    }
    if (v35 >= 0) {
      if (v35 <= 3) {
        this[986] = 11;
        goto LABEL_120;
      }
      if (v35 == 4) {
        this[986] = 10;
        goto LABEL_120;
      }
    }
  LABEL_119:
    this[986] = 0;
  LABEL_120:
    this[988] = 1;
    v42 = (__int64)(sub_1003B170((float *)this + 1033) * 2.3703704);
    this[987] = v42;
    if ((int)v42 > 64)
      this[987] = 64;
  }
LABEL_122:
  v43 = this[986];
  if (v43) {
    v44 = *((float *)this + 989) * 11000.0;
    *(float *)&v51 = v44;
    if (v44 > 20000.0 || *(float *)&v51 < 0.0)
      *(float *)&v51 = 0.0;
    if (v43 != v53 && !v50)
      strftime((char *)1, *(&SizeInBytes + 6 * v43), (&Format)[6 * v43], *(&Tm + 6 * v43));
    if (!v52 && !v50) {
      v59 = (v54 * this[987]) >> 7;
      qword_118AC740[0] = (__int64)(*(float *)&v51 * 0.000090909089 * 4294967296.0);
      dword_118AC74C =
          (__int64)(v56 * (double)v59) + ((unsigned int)(__int64)(v55 * (double)v59) << 16);
    }
  } else if (!v50) {
    dword_118AC74C = 0;
    qword_118AC740[0] = 0i64;
  }
  if (dword_100AA8B4 == 1) {
    v45 = v57;
    v46 = (_DWORD *)(dword_10AD05DC[v60 / 4] + 48);
    *v57 = *v46;
    v45[1] = v46[1];
    result = v46[2];
    v45[2] = result;
  } else {
    result = (int)v57;
    v48 = (_DWORD *)(this[2509] + 48);
    *v57 = *v48;
    *(_DWORD *)(result + 4) = v48[1];
    *(_DWORD *)(result + 8) = v48[2];
  }
  return result;
}
// 10068A2D: conditional instruction was optimized away because of 'cl.1!=0'
// 10068511: variable 'v6' is possibly undefined
// 10068511: variable 'v7' is possibly undefined
// 10068957: variable 'v33' is possibly undefined
// 100AA8B4: using guessed type int dword_100AA8B4;
// 100B4050: using guessed type int dword_100B4050;
// 104BBE08: using guessed type int gChosenWeather1;
// 106909B4: using guessed type int dword_106909B4;
// 106C1638: using guessed type int dword_106C1638;
// 106C1690: using guessed type int dword_106C1690;
// 10ACEE20: using guessed type int dword_10ACEE20[];
// 10AD05DC: using guessed type int dword_10AD05DC[];
// 11782BA8: using guessed type __int16 word_11782BA8[];
// 11782BAC: using guessed type __int16 word_11782BAC[];
// 11782BB0: using guessed type __int16 word_11782BB0[];
// 11782BB4: using guessed type __int16 word_11782BB4[];
// 11782BB8: using guessed type __int16 word_11782BB8[];
// 11782BBC: using guessed type __int16 word_11782BBC[];
// 118290F4: using guessed type int dword_118290F4;
// 118AC728: using guessed type int dword_118AC728[];
// 118AC72C: using guessed type int dword_118AC72C[];
// 118AC734: using guessed type int dword_118AC734[];
// 118AC740: using guessed type __int64 qword_118AC740[];
// 118AC74C: using guessed type int dword_118AC74C;

//----- (10068EF0) --------------------------------------------------------
void __thiscall meth_10068EF0(_DWORD *this) {
  int v2;                      // eax
  int v3;                      // eax
  int v4;                      // eax
  _DWORD *v5;                  // eax
  void(__cdecl * v6)(_DWORD);  // ecx
  bool v7;                     // zf
  int v8;                      // eax
  int v9;                      // ecx
  _DWORD *v10;                 // eax
  int v11;                     // esi
  void(__cdecl * v12)(int);    // eax
  int v13;                     // ecx
  int v14;                     // ecx
  _DWORD *v15;                 // eax
  void(__cdecl * v16)(_DWORD); // ecx
  int v17;                     // edx
  int v18;                     // ebp
  int v19;                     // eax
  double v20;                  // st7
  float v21;                   // [esp+0h] [ebp-18h]
  float v22;                   // [esp+0h] [ebp-18h]
  float v23;                   // [esp+14h] [ebp-4h]

  if (!gNetworkPlay || this[24]) {
    v2 = this[24];
    if (v2 && *(void(__cdecl **)(int))(v2 + 3848) == sub_10065620 && gGameMode != GAME_MODE_5) {
      **(_DWORD **)(v2 + 10688) &= 0xF000000u;
      *(_DWORD *)(*(_DWORD *)(this[24] + 10688) + 32) = 0;
    }
    if (dword_106909B4) {
      dword_118AC728[0] = 0;
      dword_118AC72C[0] = 0;
      dword_118AC734[0] = 0;
      qword_118AC740[0] = 0i64;
      dword_118AC74C = 0;
      dword_118AC758 = 0;
      dword_118AC75C = 0;
      dword_118AC764 = 0;
      qword_118AC770 = 0i64;
      dword_118AC77C = 0;
      dword_118AC788 = 0;
      dword_118AC78C = 0;
      dword_118AC794 = 0;
    } else {
      v3 = this[26];
      if ((v3 & 1) != 0) {
        v4 = this[24];
        if (v4) {
          **(_DWORD **)(v4 + 10688) |= 0x40000u;
          *(_DWORD *)(this[24] + 3696) = 0;
          v5 = (_DWORD *)this[24];
          v5[992] = v5[12];
          v5[993] = v5[13];
          v5[994] = v5[14];
          v6 = *(void(__cdecl **)(_DWORD))(this[24] + 3848);
          if (v6)
              v6(this[24]);
          *(_DWORD *)(this[24] + 3696) = 0;
        }
      } else {
        v7 = (v3 & 2) == 0;
        v8 = this[24];
        if (v7) {
          if (v8) {
              if (*(_BYTE *)(v8 + 10671) == 2) {
                  *(float *)(v8 + 10672) =
                      *(float *)(v8 + 10672) - *(float *)&dword_106C2CFC * -1.6;
                  if (gGameMode == GAME_MODE_2 && this[25]) {
                      v13 = this[24];
                      if (*(float *)(v13 + 10672) > 0.375)
                          *(_DWORD *)(v13 + 10672) = 1052770304;
                  } else {
                      v14 = this[24];
                      if (*(float *)(v14 + 10672) >= 1.0) {
                          *(_DWORD *)(v14 + 10672) = 1065353216;
                          *(_BYTE *)(this[24] + 10671) = 0;
                      }
                  }
              }
              v15 = (_DWORD *)this[24];
              v15[992] = v15[12];
              v15[993] = v15[13];
              v15[994] = v15[14];
              v16 = *(void(__cdecl **)(_DWORD))(this[24] + 3848);
              if (v16)
                  v16(this[24]);
              *(float *)(this[24] + 4148) =
                  *(float *)(this[24] + 4144) * *(float *)&dword_106C2CFC +
                  *(float *)(this[24] + 4148);
          } else {
              this[3] = *this;
              this[4] = this[1];
              this[5] = this[2];
              v17 = this[11];
              v18 = this[10];
              v19 = 2778 * (this[29] + dword_100B4050);
              v23 = ((double)(this[17] + 1) * *(float *)(gUnk06594.field_4938 + 100) -
                     *((float *)this + 20) - *(float *)(v18 + 40 * v17 + 140)) /
                    (*(float *)(v18 + 40 * v17 + 100) - *(float *)(v18 + 40 * v17 + 140));
              if (dword_10ACEDA8[v19]) {
                  v21 = sub_1003B170((float *)((char *)&unk_10ACEECC + v19 * 4)) *
                        *(float *)&dword_106C2CFC;
                  sub_10065C80(this[10], this[11], v23, v21);
                  v20 = sub_1003B170((float *)&unk_10ACEECC + 2778 * this[29] +
                                     2778 * dword_100B4050) *
                            *(float *)&dword_106C2CFC +
                        *((float *)this + 20);
              } else {
                  sub_10065C80(v18, v17, v23, 2.22);
                  v20 = *((float *)this + 20) - -2.22;
              }
              *((float *)this + 20) = v20;
              this[10] = dword_10AF988C;
              this[11] = dword_10ACD490;
              *this = dword_10AF9B38;
              this[1] = dword_10AF9B3C;
              this[2] = dword_10AF9B40;
              sub_1003AEE0((float *)this + 6, (float *)this, (float *)this + 3);
              v22 = 1.0 / *(float *)&dword_106C2CFC;
              sub_1003AD10((int)(this + 6), v22);
              meth_10066E90(this);
          }
        } else if (v8) {
          if (gGameMode || this[25] < dword_100B4050) {
              **(_DWORD **)(v8 + 10688) = 786432;
              *(_BYTE *)(*(_DWORD *)(this[24] + 10688) + 36) = -127;
              *(_DWORD *)(*(_DWORD *)(this[24] + 10688) + 32) = -1082130432;
          }
          if (gGameMode == GAME_MODE_0 && this[25] >= dword_100B4050) {
              *(_BYTE *)(this[24] + 10671) = 2;
              *(float *)(this[24] + 10672) =
                  *(float *)(this[24] + 10672) - *(float *)&dword_106C2CFC;
              v9 = this[24];
              if (*(float *)(v9 + 10672) < 0.0)
                  *(_DWORD *)(v9 + 10672) = 0;
          }
          v10 = (_DWORD *)this[24];
          v10[992] = v10[12];
          v10[993] = v10[13];
          v10[994] = v10[14];
          v11 = this[24];
          v12 = *(void(__cdecl **)(int))(v11 + 3848);
          if (v12)
              v12(v11);
        }
      }
    }
  }
}
// 100B4050: using guessed type int dword_100B4050;
// 1022AF18: using guessed type int gNetworkPlay;
// 106909B4: using guessed type int dword_106909B4;
// 106C2CFC: using guessed type int dword_106C2CFC;
// 10ACD490: using guessed type int dword_10ACD490;
// 10ACEDA8: using guessed type int dword_10ACEDA8[];
// 10AF988C: using guessed type int dword_10AF988C;
// 10AF9B38: using guessed type int dword_10AF9B38;
// 10AF9B3C: using guessed type int dword_10AF9B3C;
// 10AF9B40: using guessed type int dword_10AF9B40;
// 118AC728: using guessed type int dword_118AC728[];
// 118AC72C: using guessed type int dword_118AC72C[];
// 118AC734: using guessed type int dword_118AC734[];
// 118AC740: using guessed type __int64 qword_118AC740[];
// 118AC74C: using guessed type int dword_118AC74C;
// 118AC758: using guessed type int dword_118AC758;
// 118AC75C: using guessed type int dword_118AC75C;
// 118AC764: using guessed type int dword_118AC764;
// 118AC770: using guessed type __int64 qword_118AC770;
// 118AC77C: using guessed type int dword_118AC77C;
// 118AC788: using guessed type int dword_118AC788;
// 118AC78C: using guessed type int dword_118AC78C;
// 118AC794: using guessed type int dword_118AC794;

//----- (10069330) --------------------------------------------------------
int __usercall sub_10069330 @<eax>(int a1 @<ecx>, double a2 @<st0>) {
  int result; // eax

  result = *(_DWORD *)(a1 + 96);
  if (result) {
    if (!gNetworkPlay || (result = sub_10060CC0(a2, result, *(_DWORD *)(result + 324))) != 0) {
      sub_10061C60(*(_DWORD *)(a1 + 96), a2);
      result = meth_100019D0(*(#479 **)(a1 + 96));
    }
  }
  return result;
}
// 1022AF18: using guessed type int gNetworkPlay;

//----- (10069370) --------------------------------------------------------
int __thiscall meth_10069370(_DWORD *this) {
  int result; // eax
  int v3;     // eax
  int v4;     // ecx
  int v5;     // esi
  float v6;   // [esp+0h] [ebp-8h]

  result = dword_106909B4;
  if (!dword_106909B4) {
    result = this[24];
    if (result) {
      if (*(_BYTE *)(result + 864)) {
        if ((int)(__int64)(sub_1003B7B0(*(float *)(result + 848), *(float *)(result + 852)) *
                           57.295776) > 180)
          v3 = input_10078E10(1);
        else
          v3 = input_10078E10(-1);
        v4 = this[24];
        LOBYTE(v3) = *(_BYTE *)(v4 + 864);
        if ((unsigned __int8)v3 >= 0xAu) {
          LOWORD(v3) = (unsigned __int8)v3;
          sub_1000EF80(v4, v4 + 848, (float *)(v4 + 848), v3);
        }
        *(_BYTE *)(this[24] + 864) = 0;
      }
      meth_10075780(this[24]);
      meth_10075810(this[24]);
      meth_100758A0((_DWORD *)this[24]);
      meth_10066E90(this);
      meth_10075960(this[24]);
      sub_1003AEE0(
          (float *)(this[24] + 4132), (float *)(this[24] + 48), (float *)(this[24] + 3968));
      v6 = 1.0 / *(float *)&dword_106C2CFC;
      sub_1003AD10(this[24] + 4132, v6);
      *(float *)(this[24] + 10008) = sub_1003B7B0(**(float **)(this[24] + 10036),
                                                  *(float *)(*(_DWORD *)(this[24] + 10036) + 4));
      v5 = this[24];
      result = *(_DWORD *)(v5 + 3844);
      if (result)
        *(_DWORD *)(v5 + 3844) = --result;
    }
  }
  return result;
}
// 106909B4: using guessed type int dword_106909B4;
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (10069490) --------------------------------------------------------
char *sub_10069490() {
  if (dword_10B01C40 < 256)
    return (char *)&unk_10AF9BC0 + 64 * ((*(_DWORD *)&gUnk06594.gap1C8[12452] << 8) +
                                         dword_10B01C40++ + *(_DWORD *)&gUnk06594.gap1C8[12452]);
  ++dword_10B01C40;
  return (char *)&unk_10AFDBC0 + 16448 * *(_DWORD *)&gUnk06594.gap1C8[12452];
}
// 10B01C40: using guessed type int dword_10B01C40;

//----- (100694E0) --------------------------------------------------------
char *sub_100694E0() {
  if (dword_10B01C48 < 20)
    return (char *)&unk_10B02190 + 224 * *(_DWORD *)&gUnk06594.gap1C8[12452] +
           112 * *(_DWORD *)&gUnk06594.gap1C8[12452] + 16 * dword_10B01C48++;
  ++dword_10B01C48;
  return (char *)&unk_10B022D0 + 336 * *(_DWORD *)&gUnk06594.gap1C8[12452];
}
// 10B01C48: using guessed type int dword_10B01C48;

//----- (10069530) --------------------------------------------------------
char *sub_10069530() {
  if (dword_10B01C44 < 20)
    return (char *)&unk_10B01C50 + 448 * *(_DWORD *)&gUnk06594.gap1C8[12452] +
           224 * *(_DWORD *)&gUnk06594.gap1C8[12452] + 32 * dword_10B01C44++;
  ++dword_10B01C44;
  return (char *)&unk_10B01ED0 + 672 * *(_DWORD *)&gUnk06594.gap1C8[12452];
}
// 10B01C44: using guessed type int dword_10B01C44;

//----- (10069580) --------------------------------------------------------
int sub_10069580() {
  int result; // eax

  result = 0;
  dword_10B01C40 = 0;
  dword_10B01C48 = 0;
  dword_10B01C44 = 0;
  return result;
}
// 10B01C40: using guessed type int dword_10B01C40;
// 10B01C44: using guessed type int dword_10B01C44;
// 10B01C48: using guessed type int dword_10B01C48;

//----- (100695A0) --------------------------------------------------------
int __cdecl sub_100695A0(int a1, int a2) {
  int result; // eax

  math_100765E0((float *)a2, (float *)a1);
  result = *(_DWORD *)(a2 + 48);
  *(_DWORD *)(a1 + 16) = result;
  *(_DWORD *)(a1 + 20) = *(_DWORD *)(a2 + 52);
  *(_DWORD *)(a1 + 24) = *(_DWORD *)(a2 + 56);
  return result;
}

//----- (100695D0) --------------------------------------------------------
int __cdecl sub_100695D0(int a1, int a2) {
  double v3;  // st7
  double v4;  // st6
  double v5;  // st4
  double v6;  // st3
  int result; // eax
  double v8;  // st7
  double v9;  // st6
  double v10; // st4
  double v11; // st5
  double v12; // st3
  double v13; // st5
  double v14; // st5
  double v15; // st7
  float v16;  // [esp+Ch] [ebp+8h]
  float v17;  // [esp+Ch] [ebp+8h]
  float v18;  // [esp+Ch] [ebp+8h]
  float v19;  // [esp+Ch] [ebp+8h]
  float v20;  // [esp+Ch] [ebp+8h]

  v3 = *(float *)(a2 + 12) * *(float *)(a2 + 12);
  v4 = *(float *)(a2 + 8) * *(float *)(a2 + 8);
  v5 = *(float *)(a2 + 4) * *(float *)(a2 + 4);
  v6 = *(float *)a2 * *(float *)a2 + v3 + v4 + v5;
  if (v6 == 0.0)
    v16 = 0.0;
  else
    v16 = 2.0 / v6;
  result = a1;
  *(float *)a1 = 1.0 - v16 * (v3 + v4);
  *(float *)(a1 + 20) = 1.0 - (v3 + v5) * v16;
  *(float *)(a1 + 40) = 1.0 - (v4 + v5) * v16;
  v8 = *(float *)(a2 + 4) * v16;
  v9 = *(float *)(a2 + 8) * v16;
  v10 = *(float *)(a2 + 8) * v8;
  v11 = *(float *)(a2 + 12) * v16 * *(float *)a2;
  v17 = v10;
  v12 = v11;
  v13 = v17;
  v18 = v12;
  *(float *)(a1 + 16) = v10 - v18;
  *(float *)(a1 + 4) = v13 + v18;
  v19 = *(float *)a2 * v9;
  v14 = *(float *)(a2 + 12) * v8 - v19;
  *(float *)(a1 + 32) = *(float *)(a2 + 12) * v8 + v19;
  *(float *)(a1 + 8) = v14;
  v20 = *(float *)a2 * v8;
  v15 = *(float *)(a2 + 12) * v9 + v20;
  *(float *)(a1 + 36) = *(float *)(a2 + 12) * v9 - v20;
  *(float *)(a1 + 24) = v15;
  *(_DWORD *)(a1 + 48) = *(_DWORD *)(a2 + 16);
  *(_DWORD *)(a1 + 52) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(a1 + 56) = *(_DWORD *)(a2 + 24);
  *(_DWORD *)(a1 + 12) = 0;
  *(_DWORD *)(a1 + 28) = 0;
  *(_DWORD *)(a1 + 44) = 0;
  *(_DWORD *)(a1 + 60) = 1065353216;
  return result;
}

//----- (10069740) --------------------------------------------------------
int __cdecl sub_10069740(int a1) {
  int result; // eax

  result = a1;
  *(_DWORD *)&gUnk06594.gap1C8[12504] = 0;
  *(_DWORD *)&gUnk06594.gap1C8[12508] = 0;
  *(_DWORD *)&gUnk06594.gap1C8[12500] = 0;
  switch (a1) {
  case 0:
    *(_DWORD *)&gUnk06594.gap1C8[12496] = 0;
    break;
  case 1:
    *(_DWORD *)&gUnk06594.gap1C8[12496] = 1;
    break;
  case 2:
    result = 1;
    *(_DWORD *)&gUnk06594.gap1C8[12496] = 1;
    *(_DWORD *)&gUnk06594.gap1C8[12508] = 1;
    break;
  case 3:
    result = 1;
    *(_DWORD *)&gUnk06594.gap1C8[12496] = 1;
    *(_DWORD *)&gUnk06594.gap1C8[12504] = 1;
    break;
  case 4:
    result = 1;
    *(_DWORD *)&gUnk06594.gap1C8[12496] = 1;
    *(_DWORD *)&gUnk06594.gap1C8[12500] = 1;
    break;
  default:
    return result;
  }
  return result;
}

//----- (100697C0) --------------------------------------------------------
int __cdecl sub_100697C0(int a1) {
  sub_10069740(a1);
  return sub_100344D7();
}

//----- (100697E0) --------------------------------------------------------
int __cdecl sub_100697E0(int a1) {
  dword_100B4050 = a1;
  return sub_10034C66((int)meth_DebugPrint);
}
// 100B4050: using guessed type int dword_100B4050;

//----- (10069800) --------------------------------------------------------
char *sub_10069800() {
  char *v0;     // edi
  unk00144 *v1; // esi
  char *result; // eax

  v0 = &gUnk06594.gap1C8[12592];
  v1 = &stru_10ACDEA8;
  do {
    meth_100634F0(v1);
    result = meth_10035FE0(v0);
    v1 = (unk00144 *)((char *)v1 + 11112);
    v0 += 348;
  } while ((int)v1 < (int)&dword_10AF9528);
  return result;
}
// 10AF9528: using guessed type int dword_10AF9528;

//----- (10069840) --------------------------------------------------------
void sub_10069840() {
  void *v0;             // ecx
  void *v1;             // ecx
  void *v2;             // ecx
  void *v3;             // ecx
  void *ultraCarHeader; // ecx
  void *vehicle;        // ecx
  void *enemy;          // ecx

  *(_DWORD *)&gUnk06594.gap1C8[8584] = dword_10B4E708;
  dword_106C29A4 = dword_10B4E70C;
  sub_100770C0();
  gIsGameMode4 = gGameMode == GAME_MODE_4;
  dword_118ABDC0 = 0;
  dword_106909D8 = 0;
  meth_CreateMutexWrapper(v0);
  sub_10034C83();
  sub_10034C32();
  sub_10069800();
  sub_10034A85();
  sub_1002B280(0);
  if (gGameMode == GAME_MODE_1 || gGameMode == GAME_MODE_6) {
    *((_WORD *)dword_10ACED34 + 121) = -1;
    *((_WORD *)dword_10ACED34 + 120) = -1;
    *((_WORD *)dword_10ACED34 + 122) = -1;
  }
  sub_100697E0(1);
  sub_10034C66((int)meth_DebugPrint);
  *(_DWORD *)&gUnk06594.gap1C8[12548] = 0;
  dword_10B4DF28 = 0;
  dword_100B36FC = 2;
  dword_100B4050 = 1;
  gChosenWeather1 = 1;
  dword_104B0338 = 0;
  dword_104B033C = 0;
  sub_10034C66((int)sub_1002C500);
  ElementCount = 8;
  sub_10036020();
  meth_DebugPrint(v1);
  while (!sub_10071130(UNK10071130_0, (FILE *)1))
    ;
  sub_10036020();
  meth_DebugPrint(v2);
  while (!sub_10071130(UNK10071130_2, (FILE *)1))
    ;
  sub_10060D90();
  if (gGameMode == GAME_MODE_0) {
    sub_1002F460();
  LABEL_11:
    dword_100B4050 = 1;
    goto LABEL_12;
  }
  if (gGameMode == GAME_MODE_2)
    goto LABEL_11;
LABEL_12:
  gChosenWeather1 = gChosenWeather0;
  *((_DWORD *)dword_10ACED34 + 62) = gHandlingType;
  *((_DWORD *)dword_10ACED34 + 63) = gTransmissionType;
  *((_DWORD *)dword_10ACED34 + 65) = gSuspensionType;
  v3 = (void *)gTireType;
  *((_DWORD *)dword_10ACED34 + 64) = gTireType;
  meth_DebugPrint(v3);
  meth_DebugPrint(ultraCarHeader);
  meth_DebugPrint(vehicle);
  meth_DebugPrint(enemy);
  sub_10034C7E();
}
// 1006987E: variable 'v0' is possibly undefined
// 10069943: variable 'v1' is possibly undefined
// 10069969: variable 'v2' is possibly undefined
// 10069A19: variable 'ultraCarHeader' is possibly undefined
// 10069A2B: variable 'vehicle' is possibly undefined
// 10069A3D: variable 'enemy' is possibly undefined
// 10094350: using guessed type int gHandlingType;
// 10094354: using guessed type int gTransmissionType;
// 10094358: using guessed type int gSuspensionType;
// 100B36FC: using guessed type int dword_100B36FC;
// 100B4050: using guessed type int dword_100B4050;
// 1022AF14: using guessed type int gIsGameMode4;
// 1022B350: using guessed type int gChosenWeather0;
// 104B0338: using guessed type int dword_104B0338;
// 104B033C: using guessed type int dword_104B033C;
// 104BBE08: using guessed type int gChosenWeather1;
// 106909D8: using guessed type int dword_106909D8;
// 106C29A4: using guessed type int dword_106C29A4;
// 10B4DF28: using guessed type int dword_10B4DF28;
// 10B4E708: using guessed type int dword_10B4E708;
// 10B4E70C: using guessed type int dword_10B4E70C;
// 118ABDC0: using guessed type int dword_118ABDC0;

//----- (10069A50) --------------------------------------------------------
int sub_10069A50() {
  sub_10069A60();
  return atexit(debug_10069A80);
}

//----- (10069A60) --------------------------------------------------------
BossRallyConfig *sub_10069A60() {
  return meth_BossRallyConfig_10069A90(&gConfig);
}

//----- (10069A90) --------------------------------------------------------
BossRallyConfig *__thiscall meth_BossRallyConfig_10069A90(BossRallyConfig *this) {
  meth_BossRallyConfig_10069C90(this);
  return this;
}

//----- (10069AA0) --------------------------------------------------------
int __thiscall meth_BossRallyConfig_10069AA0(BossRallyConfig *this, int nPlayers) {
  int result; // eax

  result = nPlayers - 1;
  if (nPlayers == 1) {
    qmemcpy(&this->joystick1, gJoystick1Data, sizeof(this->joystick1));
  } else {
    result = nPlayers - 2;
    if (nPlayers == 2) {
      qmemcpy(&this->joystick2, gJoystick2Data, sizeof(this->joystick2));
    } else {
      result = nPlayers - 3;
      if (nPlayers == 3)
        qmemcpy(&this->joystick3, gJoystick3Data, sizeof(this->joystick3));
      else
        qmemcpy(this, aE, 0xA8u);
    }
  }
  return result;
}

//----- (10069B10) --------------------------------------------------------
int __thiscall meth_BossRallyConfig_10069B10(
    BossRallyConfig *this, int a2, int a3, __int16 a4, char a5) {
  BossRallyConfig *v5;  // ebp
  char *v6;             // edi
  _WORD *v7;            // eax
  int v8;               // edi
  _WORD *v9;            // esi
  int v10;              // ebx
  __int16 v11;          // dx
  int v12;              // eax
  BossRallyConfig *v13; // ecx
  int result;           // eax
  int v15;              // [esp+14h] [ebp+4h]

  switch (a2) {
  case 1:
    v5 = (BossRallyConfig *)&this->joystick1;
    v6 = gJoystick1Data;
    break;
  case 2:
    v5 = (BossRallyConfig *)&this->joystick2;
    v6 = gJoystick2Data;
    break;
  case 3:
    v5 = (BossRallyConfig *)&this->joystick3;
    v6 = gJoystick3Data;
    break;
  default:
    v5 = this;
    v6 = aE;
    break;
  }
  v15 = 2;
  v7 = (_WORD *)((char *)v5 + 6 * a3);
  v8 = v6 - (char *)v5;
  *v7 = a4 ^ (unsigned __int8)(a4 ^ a5);
  v9 = v7 + 1;
  do {
    v10 = 28;
    do {
      v11 = *(_WORD *)((char *)v9 + v8);
      v12 = 0;
      *v9 = v11;
      v13 = v5;
      while (LOWORD(v13->joystick0.field_0) != v11) {
        ++v12;
        v13 = (BossRallyConfig *)((char *)v13 + 6);
        if (v12 >= 28)
          goto LABEL_15;
      }
      *v9 = 0;
    LABEL_15:
      --v10;
    } while (v10);
    ++v9;
    result = --v15;
  } while (v15);
  return result;
}

//----- (10069BC0) --------------------------------------------------------
int __thiscall meth_BossRallyConfig_10069BC0(BossRallyConfig *this, int a2, int a3) {
  switch (a2) {
  case 1:
    return *((_WORD *)&this->joystick1.field_0 + 3 * a3) & 0xFF00;
  case 2:
    return *((_WORD *)&this->joystick2.field_0 + 3 * a3) & 0xFF00;
  case 3:
    return *((_WORD *)&this->joystick3.field_0 + 3 * a3) & 0xFF00;
  }
  return *((_WORD *)&this->joystick0.field_0 + 3 * a3) & 0xFF00;
}

//----- (10069C30) --------------------------------------------------------
char __thiscall meth_BossRallyConfig_10069C30(BossRallyConfig *this, int a2, int a3) {
  unsigned int v3; // eax
  int v4;          // eax

  if (a2 == 1) {
    v3 = 3 * (a3 + 28);
    LOWORD(v3) = *((_WORD *)&this->joystick1.field_0 + 3 * a3);
    if ((unsigned __int16)v3 >= 0x8000u)
      v3 >>= 8;
  } else {
    if (a2 == 2) {
      v4 = a3 + 56;
    } else {
      if (a2 != 3) {
        LOBYTE(v3) = *((_BYTE *)&this->joystick0.field_0 + 6 * a3);
        return v3;
      }
      v4 = a3 + 84;
    }
    v3 = 3 * v4;
    LOWORD(v3) = *((_WORD *)&this->joystick0.field_0 + v3);
    if ((unsigned __int16)v3 >= 0x8000u)
      v3 >>= 8;
  }
  return v3;
}

//----- (10069C90) --------------------------------------------------------
int __thiscall meth_BossRallyConfig_10069C90(BossRallyConfig *this) {
  int result; // eax

  qmemcpy(this, aE, 0xA8u);
  qmemcpy(&this->joystick1, gJoystick1Data, sizeof(this->joystick1));
  qmemcpy(&this->joystick2, gJoystick2Data, sizeof(this->joystick2));
  qmemcpy(&this->joystick3, gJoystick3Data, sizeof(this->joystick3));
  this->field_2A0 = 0;
  this->field_2A4 = (int)this;
  this->field_2A8 = 1;
  this->field_2AC = 1;
  this->field_2B0 = 1;
  memset(this->field_2B4, 0, sizeof(this->field_2B4));
  memset(this->field_3B8, 0, sizeof(this->field_3B8));
  this->videoWidth = 640;
  this->videoHeight = 480;
  this->videoBitDepth = 16;
  this->field_7C4 = 0;
  *(_DWORD *)this->field_7C8 = 0;
  *(_DWORD *)&this->field_7C8[4] = 0;
  *(_DWORD *)&this->field_7C8[8] = 0;
  *(_DWORD *)&this->field_7C8[12] = 0;
  this->field_7D8 = 9;
  this->field_7DC = 9;
  result = 0;
  this->field_7E0 = 2;
  this->field_7E4 = 0;
  this->field_7E8 = 0;
  this->field_7EC = 1;
  this->field_7F0 = 1;
  this->field_7F4 = 1;
  this->field_7F8 = 0;
  this->field_7FC = 3;
  this->field_800 = 0;
  this->field_804 = 0;
  this->field_808 = 4;
  this->field_80C = 0;
  memset(this->field_810, 0, sizeof(this->field_810));
  memset(this->field_830, 0, sizeof(this->field_830));
  this->field_870 = 1;
  return result;
}

//----- (10069DE0) --------------------------------------------------------
BossRallyConfig *__thiscall meth_BossRallyConfig_10069DE0(BossRallyConfig *this,
                                                          BossRallyConfig *otherConfig) {
  BossRallyConfig *result;     // eax
  BossRallyConfigJoystick *v3; // ebx
  BossRallyConfigJoystick *v4; // ebp
  int old_field_2a0;           // ecx
  int v6;                      // ecx
  int v7;                      // ecx

  result = this;
  v3 = &this->joystick1;
  qmemcpy(this, otherConfig, 0xA8u);
  v4 = &this->joystick2;
  qmemcpy(&this->joystick1, &otherConfig->joystick1, sizeof(this->joystick1));
  qmemcpy(&this->joystick2, &otherConfig->joystick2, sizeof(this->joystick2));
  qmemcpy(&this->joystick3, &otherConfig->joystick3, sizeof(this->joystick3));
  old_field_2a0 = otherConfig->field_2A0;
  result->field_2A0 = old_field_2a0;
  v6 = old_field_2a0 - 1;
  if (v6) {
    v7 = v6 - 1;
    if (v7) {
      if (v7 == 1)
        result->field_2A4 = (int)&result->joystick3;
      else
        result->field_2A4 = (int)result;
    } else {
      result->field_2A4 = (int)v4;
    }
  } else {
    result->field_2A4 = (int)v3;
  }
  result->field_2A8 = otherConfig->field_2A8;
  result->field_2AC = otherConfig->field_2AC;
  result->field_2B0 = otherConfig->field_2B0;
  qmemcpy(result->field_2B4, otherConfig->field_2B4, sizeof(result->field_2B4));
  qmemcpy(result->field_3B8, otherConfig->field_3B8, 0x458u);
  qmemcpy(result->field_810, otherConfig->field_810, sizeof(result->field_810));
  qmemcpy(result->field_830, otherConfig->field_830, 0x44u);
  return result;
}

//----- (10069FF0) --------------------------------------------------------
int __thiscall meth_BossRallyConfig_ReadCfg(BossRallyConfig *this, const char *cfgFilename) {
  int res;                     // eax
  FILE *fp_1;                  // esi
  int expectedToBe2;           // [esp+Ch] [ebp-888h] BYREF
  char fourCC[4];              // [esp+10h] [ebp-884h] BYREF
  BossRallyConfig otherConfig; // [esp+14h] [ebp-880h] BYREF
  int unk;                     // [esp+890h] [ebp-4h]

  res = (int)fopen(cfgFilename, kFileModeReadBinary);
  fp_1 = (FILE *)res;
  if (res) {
    meth_BossRallyConfig_10069A90(&otherConfig);
    unk = 0;
    meth_BossRallyConfig_10069DE0(&otherConfig, this);
    if (filesystem_freadLock(fourCC, 4u, 1u, fp_1) == 1 && !strncmp(fourCC, aRcfg, strlen(aRcfg)) &&
        filesystem_freadLock(&expectedToBe2, 4u, 1u, fp_1) == 1 && expectedToBe2 == 2 &&
        filesystem_freadLock(&this->field_2A8, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_2AC, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_2B0, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(this->field_2B4, 0x104u, 1u, fp_1) == 1 &&
        filesystem_freadLock(this->field_3B8, 0x400u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->videoWidth, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->videoHeight, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->videoBitDepth, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7C4, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(this->field_7C8, 0x10u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7D8, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7DC, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7E0, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7E4, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7E8, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7EC, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7F0, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7F4, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7F8, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_7FC, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_800, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_804, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_808, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_80C, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(this->field_810, 0x20u, 1u, fp_1) == 1 &&
        filesystem_freadLock(this->field_830, 0x40u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_870, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->field_2A0, 4u, 1u, fp_1) == 1 &&
        filesystem_freadLock(this, 0xA8u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->joystick1, 0xA8u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->joystick2, 0xA8u, 1u, fp_1) == 1 &&
        filesystem_freadLock(&this->joystick3, 0xA8u, 1u, fp_1) == 1) {
      fclose(fp_1);
      unk = -1;
      meth_DebugPrint(&otherConfig);
      res = 1;
    } else {
      meth_BossRallyConfig_10069DE0(this, &otherConfig);
      fclose(fp_1);
      meth_BossRallyConfig_10069C90(this);
      unk = -1;
      meth_DebugPrint(&otherConfig);
      res = 0;
    }
  }
  return res;
}

//----- (1006A4A0) --------------------------------------------------------
FILE *__thiscall meth_BossRallyConfig_WriteConfigFile(BossRallyConfig *this, char *FileName) {
  FILE *result; // eax
  FILE *fp;     // esi

  result = fopen(FileName, kFileModeWriteBinary);
  fp = result;
  if (result) {
    if (filesystem_fwriteLock(aRcfg, strlen(aRcfg), 1u, result) == 1 &&
        filesystem_fwriteLock(&unk_1008FA64, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_2A8, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_2AC, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_2B0, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(this->field_2B4, 0x104u, 1u, fp) == 1 &&
        filesystem_fwriteLock(this->field_3B8, 0x400u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->videoWidth, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->videoHeight, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->videoBitDepth, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7C4, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(this->field_7C8, 0x10u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7D8, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7DC, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7E0, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7E4, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7E8, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7EC, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7F0, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7F4, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7F8, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_7FC, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_800, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_804, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_808, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_80C, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(this->field_810, 0x20u, 1u, fp) == 1 &&
        filesystem_fwriteLock(this->field_830, 0x40u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_870, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->field_2A0, 4u, 1u, fp) == 1 &&
        filesystem_fwriteLock(this, 0xA8u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->joystick1, 0xA8u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->joystick2, 0xA8u, 1u, fp) == 1 &&
        filesystem_fwriteLock(&this->joystick3, 0xA8u, 1u, fp) == 1) {
      fclose(fp);
      result = (FILE *)1;
    } else {
      fclose(fp);
      result = 0;
    }
  }
  return result;
}

//----- (1006A8A0) --------------------------------------------------------
unsigned int ReadInstallDirectory() {
  int ls;           // esi
  unsigned int ret; // eax
  HKEY pHKResult;   // [esp+8h] [ebp-8h] BYREF
  DWORD bufSize;    // [esp+Ch] [ebp-4h] BYREF

  if (RegOpenKeyExA(
          -2147483646, "SOFTWARE\\SouthPeak Interactive\\Boss Rally", 0, KEY_READ, &pHKResult) ||
      (bufSize = 0x104,
       ls = RegQueryValueExA(pHKResult, "Directory", 0, 0, gInstallPath, &bufSize),
       RegCloseKey(pHKResult),
       ls)) {
    ret = strlen("c:\\") + 1;
    qmemcpy(gInstallPath, "c:\\", ret);
  } else {
    ret = 0;
    if (byte_10B501DF[strlen(gInstallPath)] != 92) // != '\\'
    {
      ret = 0;
      strcat(gInstallPath, kBackslash);
    }
  }
  return ret;
}
// 118AE3D0: using guessed type int __stdcall RegCloseKey(_DWORD);
// 118AE3D4: using guessed type int __stdcall RegQueryValueExA(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 118AE3DC: using guessed type int __stdcall RegOpenKeyExA(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (1006A980) --------------------------------------------------------
int sub_1006A980() {
  return dword_10B502E4;
}
// 10B502E4: using guessed type int dword_10B502E4;

//----- (1006A990) --------------------------------------------------------
int __cdecl sub_1006A990(int a1) {
  int result; // eax

  dword_10B502E4 = a1;
  result = a1 - 1;
  if (a1 == 1) {
    dword_10690A20 = graphics_1001BAE0;
    dword_10B501C8 = (int (*)(void))sub_10024460;
    off_100B8C94 = (int (*)(void))sub_1002A640;
  }
  return result;
}
// 100B8C94: using guessed type int (*off_100B8C94)(void);
// 10690A20: using guessed type int (*dword_10690A20)(void);
// 10B501C8: using guessed type int (*dword_10B501C8)(void);
// 10B502E4: using guessed type int dword_10B502E4;

//----- (1006A9C0) --------------------------------------------------------
void __cdecl sub_1006A9C0(int a1, int a2, int a3, int a4, int a5) {
  void *v5; // ecx

  if (dword_10B502E4) {
    meth_DebugPrint(v5);
    dword_10B501CC();
    dword_118AA0D0();
    dword_10690A28();
  }
  sub_1006A990(a1);
  graphics_1001BB00(a2, a3, a4, a5);
  off_100B8C94();
  dword_10B501C8();
  sub_1002B950();
}
// 1006A9C9: variable 'v5' is possibly undefined
// 100B8C94: using guessed type int (*off_100B8C94)(void);
// 10690A28: using guessed type int (*dword_10690A28)(void);
// 10B501C8: using guessed type int (*dword_10B501C8)(void);
// 10B501CC: using guessed type int (*dword_10B501CC)(void);
// 10B502E4: using guessed type int dword_10B502E4;
// 118AA0D0: using guessed type int (*dword_118AA0D0)(void);

//----- (1006AA20) --------------------------------------------------------
void __cdecl sub_1006AA20(int a1) {
  sub_1006A990(a1);
  dword_10690A20();
  off_100B8C94();
  dword_10B501C8();
  sub_1002B950();
}
// 100B8C94: using guessed type int (*off_100B8C94)(void);
// 10690A20: using guessed type int (*dword_10690A20)(void);
// 10B501C8: using guessed type int (*dword_10B501C8)(void);

//----- (1006AA50) --------------------------------------------------------
int sub_1006AA50() {
  int v0;     // ecx
  int result; // eax

  v0 = 8;
  if (gGameMode == GAME_MODE_2 || gGameMode == GAME_MODE_4)
    v0 = 1;
  result = 0;
  memset(dword_10B502E8, 0, 4 * v0);
  dword_11750308 = 0;
  return result;
}
// 1006AA6C: conditional instruction was optimized away because of 'ecx.4 in (==1|==8)'
// 10B502E8: using guessed type int dword_10B502E8[];
// 11750308: using guessed type int dword_11750308;

//----- (1006AAA0) --------------------------------------------------------
int sub_1006AAA0() {
  return dword_11750308;
}
// 11750308: using guessed type int dword_11750308;

//----- (1006AAB0) --------------------------------------------------------
char __cdecl sub_1006AAB0(int a1) {
  int v1;       // eax
  int v2;       // ecx
  char *v3;     // esi
  float v5[40]; // [esp+0h] [ebp-A0h] BYREF

  v1 = *(_DWORD *)(a1 + 320);
  if (dword_11750308) {
    if (!dword_106909B4) {
      v2 = dword_10B502E8[v1];
      if (v2 < 0x10000) {
        v3 = (char *)&dword_10B50308 + 1572864 * v1 + 24 * v2;
        sub_100607B0((int)v5, a1);
        LOBYTE(v1) = math_10006BD0((int)v3, v5);
      }
    }
  }
  return v1;
}
// 106909B4: using guessed type int dword_106909B4;
// 10B502E8: using guessed type int dword_10B502E8[];
// 11750308: using guessed type int dword_11750308;

//----- (1006AB20) --------------------------------------------------------
int *sub_1006AB20() {
  int *result; // eax
  int v1;      // esi
  int v2;      // ecx
  int v3;      // edx

  result = (int *)dword_11750308;
  if (dword_11750308) {
    result = (int *)dword_106909B4;
    if (!dword_106909B4) {
      v1 = gGameMode;
      v2 = 8;
      if (gGameMode == 2 || gGameMode == 4)
        v2 = 1;
      result = dword_10B502E8;
      v3 = v2;
      do {
        if (*result < 0x10000)
          ++*result;
        ++result;
        --v3;
      } while (v3);
      if (v1 == 2 || v1 == 4) {
        result = (int *)(dword_10B502EC - 1);
        if (dword_11750314 < dword_10B502EC - 1)
          result = (int *)++dword_11750314;
      }
    }
  }
  return result;
}
// 1006AB4F: conditional instruction was optimized away because of 'ecx.4 in (==1|==8)'
// 100AA010: using guessed type int g_GameMode;
// 106909B4: using guessed type int dword_106909B4;
// 10B502E8: using guessed type int dword_10B502E8[];
// 10B502EC: using guessed type int dword_10B502EC;
// 11750308: using guessed type int dword_11750308;
// 11750314: using guessed type int dword_11750314;

//----- (1006AB90) --------------------------------------------------------
void *sub_1006AB90() {
  return &dword_10B50308;
}

//----- (1006ABA0) --------------------------------------------------------
int sub_1006ABA0() {
  return 24 * dword_10B502E8[0];
}
// 10B502E8: using guessed type int dword_10B502E8[];

//----- (1006ABB0) --------------------------------------------------------
int sub_1006ABB0() {
  int result; // eax

  result = 0;
  memset(dword_11750310, 0, 0x20u);
  return result;
}
// 11750310: using guessed type int dword_11750310[];

//----- (1006ABD0) --------------------------------------------------------
int __cdecl sub_1006ABD0(int a1, int a2) {
  char *v2;    // ebx
  int result;  // eax
  double v4;   // st6
  double v5;   // st7
  char v6[16]; // [esp+Ch] [ebp-A0h] BYREF
  float v7;    // [esp+1Ch] [ebp-90h]
  float v8;    // [esp+20h] [ebp-8Ch]
  float v9;    // [esp+24h] [ebp-88h]
  int v10;     // [esp+84h] [ebp-28h]

  v2 = (char *)&dword_10B50308 + 1572864 * a2 + 24 * dword_11750310[a2];
  math_10007730((int)v6, (int)v2);
  v10 = *(_DWORD *)(a1 + 4084);
  sub_10060A10(a1, (int)v6);
  if (dword_106909E0 == 2) {
    *(_BYTE *)(a1 + 866) = 0;
    *(_BYTE *)(a1 + 867) = 0;
    *(_BYTE *)(a1 + 876) = 0;
    *(_BYTE *)(a1 + 870) = 0;
    *(_BYTE *)(a1 + 871) = 0;
    *(_BYTE *)(a1 + 872) = 0;
    *(_BYTE *)(a1 + 873) = 0;
    *(_BYTE *)(a1 + 874) = 0;
    *(_BYTE *)(a1 + 875) = 0;
  }
  result = dword_11750310[a2];
  if (result < dword_10B502E8[a2] - 2) {
    result = math_10007730((int)v6, (int)(v2 + 24));
    v4 = (v8 - *(float *)(a1 + 480)) * 30.0;
    v5 = (v9 - *(float *)(a1 + 484)) * 30.0;
    *(float *)(a1 + 488) = (v7 - *(float *)(a1 + 476)) * 30.0;
    *(float *)(a1 + 492) = v4;
    *(float *)(a1 + 496) = v5;
  }
  return result;
}
// 106909E0: using guessed type int dword_106909E0;
// 10B502E8: using guessed type int dword_10B502E8[];
// 11750310: using guessed type int dword_11750310[];

//----- (1006ACF0) --------------------------------------------------------
int __cdecl sub_1006ACF0(int a1) {
  return sub_1006ABD0(a1, *(_DWORD *)(a1 + 320));
}

//----- (1006AD10) --------------------------------------------------------
int sub_1006AD10() {
  int v0;     // esi
  int v1;     // eax
  int result; // eax
  int v3;     // ecx
  int v4;     // edx

  v0 = 0;
  if ((dword_118ABAD0 & 0x200000) != 0) {
    v1 = 3;
    v0 = 1;
    dword_106909E0 = 3;
  } else if ((dword_118ABAD0 & 0x400000) != 0) {
    v1 = 3;
    v0 = -1;
    dword_106909E0 = 3;
  } else {
    v1 = dword_106909E0;
  }
  if ((dword_118ABAD0 & 0x800000) != 0) {
    v1 = 3;
    v0 = 10;
    dword_106909E0 = 3;
  } else if ((dword_118ABAD0 & 0x1000000) != 0) {
    v1 = 3;
    v0 = -10;
    dword_106909E0 = 3;
  }
  if ((dword_118ABAD0 & 0x100000) != 0) {
    v1 = 1;
    dword_106909E0 = 1;
  }
  if (v1 == 1) {
    v0 = 1;
  } else if (v1 == 3 && !v0) {
    dword_106909E0 = 2;
  }
  for (result = 0; result < 8; ++result) {
    v3 = v0 + dword_11750310[result];
    dword_11750310[result] = v3;
    if (v3 >= 0) {
      v4 = dword_10B502E8[result] - 1;
      if (v3 > v4)
        dword_11750310[result] = v4;
    } else {
      dword_11750310[result] = 0;
    }
  }
  return result * 4;
}
// 106909E0: using guessed type int dword_106909E0;
// 10B502E8: using guessed type int dword_10B502E8[];
// 11750310: using guessed type int dword_11750310[];
// 118ABAD0: using guessed type int dword_118ABAD0;

//----- (1006ADF0) --------------------------------------------------------
void *sub_1006ADF0() {
  return &unk_10CD0308;
}

//----- (1006AE00) --------------------------------------------------------
unsigned int __cdecl sub_1006AE00(unsigned int a1) {
  unsigned int result; // eax

  result = a1 / 0x18;
  dword_10B502EC = a1 / 0x18;
  return result;
}
// 10B502EC: using guessed type int dword_10B502EC;

//----- (1006AE20) --------------------------------------------------------
_DWORD *sub_1006AE20() {
  _DWORD *v0;     // eax
  int v1;         // edx
  _DWORD *result; // eax

  dword_117554C8[0] = 0;
  dword_117554A0 = 0;
  dword_117554CC = 0;
  dword_117554A4 = 0;
  dword_117554D0 = 0;
  dword_117554D8 = 0;
  v0 = &unk_1175033C;
  dword_117554D4 = 0;
  dword_117554DC = 0;
  do {
    v1 = 150;
    do {
      *(v0 - 1) = 0;
      *v0 = 0;
      v0[1] = 0;
      v0[2] = 0;
      v0[3] = 0;
      v0[4] = 0;
      v0[5] = 0;
      v0 += 8;
      --v1;
    } while (v1);
  } while ((int)v0 < (int)&dword_11754E3C);
  result = &unk_11754E54;
  do {
    *(result - 1) = 0;
    *result = 0;
    result += 2;
  } while ((int)result < (int)&dword_11755494);
  dword_11754E38 = 0;
  dword_117554E4 = 0;
  dword_117554E0 = 0;
  return result;
}
// 11754E38: using guessed type int dword_11754E38;
// 11755494: using guessed type int dword_11755494;
// 117554A0: using guessed type int dword_117554A0;
// 117554A4: using guessed type int dword_117554A4;
// 117554C8: using guessed type int dword_117554C8[];
// 117554CC: using guessed type int dword_117554CC;
// 117554D0: using guessed type int dword_117554D0;
// 117554D4: using guessed type int dword_117554D4;
// 117554D8: using guessed type int dword_117554D8;
// 117554DC: using guessed type int dword_117554DC;
// 117554E0: using guessed type int dword_117554E0;
// 117554E4: using guessed type int dword_117554E4;

//----- (1006AEB0) --------------------------------------------------------
void __cdecl sub_1006AEB0(int a1) {
  float *i;  // edi
  int v2;    // eax
  double v3; // st7
  double v4; // st6
  int v5;    // eax
  double v6; // st7
  double v7; // st6
  float v8;  // [esp+8h] [ebp-18h] BYREF
  float v9;  // [esp+Ch] [ebp-14h]
  float v10; // [esp+10h] [ebp-10h]
  float v11; // [esp+14h] [ebp-Ch] BYREF
  float v12; // [esp+18h] [ebp-8h]
  float v13; // [esp+1Ch] [ebp-4h]

  for (i = *(float **)(a1 + 24); i; i = *(float **)i) {
    v2 = *((_DWORD *)i + 1);
    if (v2) {
      if (v2 == 1)
        sub_10074770(&v8, a1 + 188, i + 2);
    } else {
      v8 = i[2];
      v9 = i[3];
      v10 = i[4];
    }
    v3 = v9 + *(float *)(a1 + 256);
    v4 = v10 + *(float *)(a1 + 260);
    *(float *)(a1 + 252) = v8 + *(float *)(a1 + 252);
    v5 = *(_DWORD *)(a1 + 28);
    *(float *)(a1 + 256) = v3;
    *(float *)(a1 + 260) = v4;
    if (v5 != 2) {
      sub_10074770(&v11, a1 + 188, i + 5);
      v6 = v13 * v8 - v11 * v10 + *(float *)(a1 + 268);
      v7 = v11 * v9 - v12 * v8 + *(float *)(a1 + 272);
      *(float *)(a1 + 264) = v12 * v10 - v13 * v9 + *(float *)(a1 + 264);
      *(float *)(a1 + 268) = v6;
      *(float *)(a1 + 272) = v7;
    }
  }
}

//----- (1006AFF0) --------------------------------------------------------
float *__cdecl sub_1006AFF0(float *a1, int a2) {
  float *v2;     // edi
  float *v3;     // ebp
  double v4;     // st7
  double v5;     // st6
  float *result; // eax
  int v7;        // ecx
  int v8;        // edx
  double v9;     // st7
  double v10;    // st6
  float v11;     // [esp+8h] [ebp-3Ch] BYREF
  float v12;     // [esp+Ch] [ebp-38h]
  float v13;     // [esp+10h] [ebp-34h]
  float v14;     // [esp+14h] [ebp-30h] BYREF
  float v15;     // [esp+18h] [ebp-2Ch]
  float v16;     // [esp+1Ch] [ebp-28h]
  float v17;     // [esp+20h] [ebp-24h] BYREF
  float v18;     // [esp+24h] [ebp-20h]
  float v19;     // [esp+28h] [ebp-1Ch]
  int v20[3];    // [esp+2Ch] [ebp-18h] BYREF
  int v21[3];    // [esp+38h] [ebp-Ch] BYREF

  v2 = *(float **)(a2 + 24);
  if (v2) {
    v3 = a1 + 47;
    do {
      if (!*((_DWORD *)v2 + 1))
        sub_10074720(&v11, v3, v2 + 2);
      if (*((_DWORD *)v2 + 1) == 1) {
        v11 = v2[2];
        v12 = v2[3];
        v13 = v2[4];
      }
      *(float *)v20 = v11;
      *(float *)&v20[1] = v12;
      v20[2] = 0;
      sub_10074770(&v17, (int)v3, (float *)v20);
      v4 = v12 + *(float *)(a2 + 256);
      v5 = v13 + *(float *)(a2 + 260);
      *(float *)(a2 + 252) = v11 + *(float *)(a2 + 252);
      result = *(float **)(a2 + 436);
      *(float *)(a2 + 256) = v4;
      *(float *)(a2 + 260) = v5;
      if (result) {
        v7 = *(_DWORD *)(a2 + 240);
        v8 = *(_DWORD *)(a2 + 244);
        v21[0] = *(_DWORD *)(a2 + 236);
        v21[1] = v7;
        v21[2] = v8;
        result = sub_10074770(&v14, (int)v3, (float *)v21);
        v9 = v16 * v17 - v14 * v19 + a1[67];
        v10 = v14 * v18 - v15 * v17 + a1[68];
        a1[66] = v15 * v19 - v16 * v18 + a1[66];
        a1[67] = v9;
        a1[68] = v10;
      }
      v2 = *(float **)v2;
    } while (v2);
  }
  return result;
}

//----- (1006B170) --------------------------------------------------------
float *__cdecl sub_1006B170(int a1) {
  float v1;     // ecx
  float v2;     // edx
  int v3;       // eax
  int v4;       // ecx
  int v5;       // edx
  int v6;       // ebp
  float v8;     // [esp+10h] [ebp-24h] BYREF
  float v9;     // [esp+14h] [ebp-20h]
  float v10;    // [esp+18h] [ebp-1Ch]
  float v11[3]; // [esp+1Ch] [ebp-18h] BYREF
  float v12[3]; // [esp+28h] [ebp-Ch] BYREF

  sub_10074720(&v8, (float *)(a1 + 188), (float *)(a1 + 252));
  v1 = v8;
  v2 = v9;
  *(float *)(a1 + 260) = v10;
  v3 = *(_DWORD *)(a1 + 12);
  *(float *)(a1 + 252) = v1;
  v4 = *(_DWORD *)(a1 + 8);
  *(float *)(a1 + 256) = v2;
  v5 = *(_DWORD *)(a1 + 4);
  v6 = *(_DWORD *)(a1 + 16);
  v8 = (*(float *)(v3 + 252) + *(float *)(v4 + 252) + *(float *)(v5 + 252) + *(float *)(v6 + 252) +
        v8) /
       *(float *)(a1 + 44);
  v9 = (*(float *)(v6 + 256) + *(float *)(v5 + 256) + *(float *)(v4 + 256) + *(float *)(v3 + 256) +
        v9) /
       *(float *)(a1 + 44);
  v10 = v10 / *(float *)(a1 + 44);
  sub_10074770((float *)(a1 + 252), a1 + 188, &v8);
  sub_10074720(v11, (float *)(a1 + 188), (float *)(a1 + 264));
  sub_10074830(v12, (float *)(a1 + 84), v11);
  return sub_10074770((float *)(a1 + 264), a1 + 188, v12);
}

//----- (1006B260) --------------------------------------------------------
float *__cdecl sub_1006B260(int a1) {
  int v2; // ecx

  v2 = *(_DWORD *)(a1 + 4);
  *(_DWORD *)(a1 + 252) = 0;
  *(_DWORD *)(a1 + 256) = 0;
  *(_DWORD *)(a1 + 260) = 0;
  *(_DWORD *)(a1 + 264) = 0;
  *(_DWORD *)(a1 + 268) = 0;
  *(_DWORD *)(a1 + 272) = 0;
  *(_DWORD *)(v2 + 252) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 4) + 256) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 4) + 260) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 8) + 252) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 8) + 256) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 8) + 260) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 12) + 252) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 12) + 256) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 12) + 260) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 16) + 252) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 16) + 256) = 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 16) + 260) = 0;
  sub_1006AEB0(a1);
  sub_1006AFF0((float *)a1, *(_DWORD *)(a1 + 4));
  sub_1006AFF0((float *)a1, *(_DWORD *)(a1 + 8));
  sub_1006AFF0((float *)a1, *(_DWORD *)(a1 + 12));
  sub_1006AFF0((float *)a1, *(_DWORD *)(a1 + 16));
  return sub_1006B170(a1);
}

//----- (1006B340) --------------------------------------------------------
float *__cdecl sub_1006B340(int a1, int a2, int a3) {
  float v3;   // edx
  double v4;  // st7
  double v5;  // st6
  double v6;  // st4
  double v7;  // st3
  double v8;  // st2
  double v9;  // st1
  double v10; // st5
  double v11; // rt0
  double v12; // rt2
  double v13; // st3
  double v14; // rtt
  float v16;  // [esp+8h] [ebp-18h] BYREF
  float v17;  // [esp+Ch] [ebp-14h]
  float v18;  // [esp+10h] [ebp-10h]
  float v19;  // [esp+14h] [ebp-Ch] BYREF
  float v20;  // [esp+18h] [ebp-8h]
  float v21;  // [esp+1Ch] [ebp-4h]

  v3 = *(float *)(a3 + 124);
  v16 = *(float *)(a3 + 120);
  v17 = v3;
  v18 = 0.0;
  sub_10074770(&v19, a2 + 188, &v16);
  *(_DWORD *)a1 = *(_DWORD *)(a2 + 132);
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(a2 + 136);
  v4 = *(float *)(a2 + 140);
  v5 = v21;
  v6 = v20;
  v7 = v19;
  v8 = v21;
  v9 = v20;
  v10 = v19;
  *(float *)(a1 + 8) = *(float *)(a2 + 140);
  v11 = v7 * *(float *)(a2 + 168);
  v12 = v9 * *(float *)(a2 + 160);
  v13 = v10 * *(float *)(a2 + 164);
  v14 = v11 - v8 * *(float *)(a2 + 160) + *(float *)(a1 + 4);
  v16 = v5 * *(float *)(a2 + 164) - v6 * *(float *)(a2 + 168) + *(float *)a1;
  v17 = v14;
  v18 = v12 - v13 + v4;
  return sub_10074720((float *)a1, (float *)(a2 + 188), &v16);
}

//----- (1006B430) --------------------------------------------------------
float *__cdecl sub_1006B430(float *a1, float *a2, float *a3) {
  int v4;        // edx
  float v5;      // eax
  double v6;     // st6
  float *result; // eax
  double v8;     // st5
  double v9;     // st4
  double v10;    // st3
  double v11;    // st2
  double v12;    // st7
  double v13;    // st6
  double v14;    // st5
  double v15;    // st4
  double v16;    // st7
  double v17;    // st4
  double v18;    // st4
  double v19;    // st7
  double v20;    // rt1
  float v21;     // [esp+4h] [ebp-18h] BYREF
  float v22;     // [esp+8h] [ebp-14h]
  float v23;     // [esp+Ch] [ebp-10h]
  int v24[2];    // [esp+10h] [ebp-Ch] BYREF
  float v25;     // [esp+18h] [ebp-4h]

  v4 = *((_DWORD *)a3 + 31);
  v5 = a3[32];
  v24[0] = (int)a3[30];
  v24[1] = v4;
  v25 = v5;
  sub_10074770(&v21, (int)(a2 + 47), (float *)v24);
  v6 = v23;
  result = a1;
  v8 = v22;
  v9 = v21;
  v10 = v23;
  v11 = v21;
  v12 = v22;
  *a1 = a2[33];
  a1[1] = a2[34];
  a1[2] = a2[35];
  v13 = v11 * a2[42] - v6 * a2[40];
  v14 = v8 * a2[40] - v9 * a2[41];
  v15 = v12;
  v16 = v10 * a2[41];
  v17 = v15 * a2[42];
  v25 = v14;
  v18 = v16 - v17;
  v19 = v14 + a1[2];
  v20 = v18 + *a1;
  a1[1] = v13 + a1[1];
  a1[2] = v19;
  *a1 = v20;
  return result;
}

//----- (1006B510) --------------------------------------------------------
float *__cdecl sub_1006B510(float *a1, float *a2, int *a3) {
  int v4;        // edx
  int v5;        // eax
  double v6;     // st6
  float *result; // eax
  double v8;     // st5
  double v9;     // st4
  double v10;    // st3
  double v11;    // st2
  double v12;    // st7
  double v13;    // st6
  double v14;    // st5
  double v15;    // st4
  double v16;    // st7
  double v17;    // st4
  double v18;    // st4
  double v19;    // st7
  double v20;    // rt1
  float v21;     // [esp+4h] [ebp-18h] BYREF
  float v22;     // [esp+8h] [ebp-14h]
  float v23;     // [esp+Ch] [ebp-10h]
  int v24[2];    // [esp+10h] [ebp-Ch] BYREF
  float v25;     // [esp+18h] [ebp-4h]

  v4 = a3[1];
  v5 = a3[2];
  v24[0] = *a3;
  v24[1] = v4;
  v25 = *(float *)&v5;
  sub_10074770(&v21, (int)(a2 + 47), (float *)v24);
  v6 = v23;
  result = a1;
  v8 = v22;
  v9 = v21;
  v10 = v23;
  v11 = v21;
  v12 = v22;
  *a1 = a2[33];
  a1[1] = a2[34];
  a1[2] = a2[35];
  v13 = v11 * a2[42] - v6 * a2[40];
  v14 = v8 * a2[40] - v9 * a2[41];
  v15 = v12;
  v16 = v10 * a2[41];
  v17 = v15 * a2[42];
  v25 = v14;
  v18 = v16 - v17;
  v19 = v14 + a1[2];
  v20 = v18 + *a1;
  a1[1] = v13 + a1[1];
  a1[2] = v19;
  *a1 = v20;
  return result;
}

//----- (1006B5F0) --------------------------------------------------------
void __cdecl sub_1006B5F0(int a1, float a2, int a3, int a4, int a5, int a6) {
  int v6;               // eax
  int v7;               // eax
  int v8;               // eax
  int v9;               // eax
  float *v10;           // edx
  double v12;           // st7
  char v13;             // c0
  double v14;           // st6
  float *v15;           // ecx
  double v16;           // st7
  double v18;           // st6
  char v19;             // c0
  double v20;           // st5
  double v22;           // st7
  char v23;             // c0
  double v24;           // st7
  double v26;           // st7
  char v27;             // c0
  double v28;           // st7
  int v29;              // ecx
  int v30;              // edi
  int v31;              // ebp
  int v32;              // edx
  int v33;              // eax
  double v35;           // st7
  char v36;             // c0
  double v38;           // st6
  char v39;             // c0
  double v40;           // rt2
  double v41;           // st6
  double v42;           // st7
  unsigned __int8 v44;  // c0
  unsigned __int8 v45;  // c3
  double v46;           // st6
  double v47;           // st6
  double v48;           // st6
  double v49;           // st7
  double v50;           // st6
  int v51;              // ecx
  double v52;           // st5
  int v53;              // eax
  int v54;              // eax
  int v55;              // edx
  int v56;              // eax
  float v57;            // ecx
  double v59;           // st5
  char v60;             // c3
  double v61;           // st7
  long double v62;      // st7
  long double v63;      // st7
  double v64;           // st6
  double v66;           // st6
  char v67;             // c0
  double v68;           // st7
  double v69;           // st7
  double v71;           // st7
  char v72;             // c0
  double v73;           // st7
  double v74;           // st6
  int v75;              // eax
  long double v76;      // st7
  int v77;              // eax
  double v78;           // st6
  double v79;           // st5
  double v80;           // st4
  double v81;           // st5
  char v83;             // c0
  long double v84;      // st7
  long double v86;      // st6
  double v87;           // st7
  double v88;           // st6
  char v89;             // c0
  double v90;           // st7
  int v91;              // eax
  int v92;              // edx
  int v93;              // eax
  float v94;            // ecx
  double v96;           // st7
  char v97;             // c3
  long double v98;      // st7
  long double v99;      // st7
  double v100;          // st6
  double v101;          // st7
  int v102;             // eax
  int v103;             // ecx
  double v104;          // st7
  double v105;          // st7
  double v107;          // st6
  char v108;            // c0
  double v109;          // st7
  double v110;          // st7
  double v111;          // st6
  double v113;          // st7
  unsigned __int8 v114; // c0
  unsigned __int8 v115; // c3
  float v116;           // [esp+0h] [ebp-A0h]
  float v117;           // [esp+0h] [ebp-A0h]
  float v118;           // [esp+0h] [ebp-A0h]
  float v119;           // [esp+0h] [ebp-A0h]
  float v120;           // [esp+14h] [ebp-8Ch]
  float v121;           // [esp+14h] [ebp-8Ch]
  float v122;           // [esp+14h] [ebp-8Ch]
  float v123;           // [esp+14h] [ebp-8Ch]
  float v124;           // [esp+14h] [ebp-8Ch]
  float v125;           // [esp+14h] [ebp-8Ch]
  float v126;           // [esp+18h] [ebp-88h]
  float v127;           // [esp+1Ch] [ebp-84h]
  unsigned __int8 v128; // [esp+20h] [ebp-80h]
  float v129;           // [esp+20h] [ebp-80h]
  float v130;           // [esp+20h] [ebp-80h]
  float v131;           // [esp+24h] [ebp-7Ch]
  float v132;           // [esp+28h] [ebp-78h] BYREF
  float v133;           // [esp+2Ch] [ebp-74h]
  float v134;           // [esp+34h] [ebp-6Ch]
  float v135;           // [esp+38h] [ebp-68h] BYREF
  float v136;           // [esp+3Ch] [ebp-64h]
  float v137;           // [esp+40h] [ebp-60h]
  float v138;           // [esp+44h] [ebp-5Ch]
  float v139;           // [esp+48h] [ebp-58h]
  float v140;           // [esp+4Ch] [ebp-54h]
  float v141;           // [esp+50h] [ebp-50h] BYREF
  float v142;           // [esp+54h] [ebp-4Ch]
  int v143;             // [esp+58h] [ebp-48h]
  float v144;           // [esp+5Ch] [ebp-44h]
  int v145;             // [esp+60h] [ebp-40h]
  float v146;           // [esp+64h] [ebp-3Ch]
  float v147;           // [esp+68h] [ebp-38h]
  float v148;           // [esp+6Ch] [ebp-34h]
  float v149;           // [esp+70h] [ebp-30h]
  float v150;           // [esp+74h] [ebp-2Ch]
  int v151[3];          // [esp+78h] [ebp-28h] BYREF
  int v152;             // [esp+84h] [ebp-1Ch]
  float v153[3];        // [esp+88h] [ebp-18h] BYREF
  float v154[3];        // [esp+94h] [ebp-Ch] BYREF

  v6 = *(_DWORD *)(a1 + 4);
  v144 = 0.0;
  v145 = 0;
  if (!*(_DWORD *)(v6 + 412))
    *(_DWORD *)(v6 + 436) = 0;
  v7 = *(_DWORD *)(a1 + 8);
  if (!*(_DWORD *)(v7 + 412))
    *(_DWORD *)(v7 + 436) = 0;
  v8 = *(_DWORD *)(a1 + 12);
  if (!*(_DWORD *)(v8 + 412))
    *(_DWORD *)(v8 + 436) = 0;
  v9 = *(_DWORD *)(a1 + 16);
  if (!*(_DWORD *)(v9 + 412))
    *(_DWORD *)(v9 + 436) = 0;
  v10 = *(float **)(a1 + 12);
  v12 = v10[116];
  if (v13)
    v12 = -v12;
  if (v10[113] == 0.0) {
    v14 = 0.0;
  } else if (v10[113] <= 0.0) {
    v14 = -1.0;
  } else {
    v14 = 1.0;
  }
  v15 = *(float **)(a1 + 4);
  v16 = v12 * v14 * -2.0 / v10[114];
  v18 = v15[116];
  if (v19)
    v18 = -v18;
  if (v15[113] == 0.0) {
    v20 = 0.0;
  } else if (v15[113] <= 0.0) {
    v20 = -1.0;
  } else {
    v20 = 1.0;
  }
  v127 = *(float *)(a1 + 44) * 0.25;
  v126 = v16 / v127 * a2 * a2;
  v120 = v20 * v18 * -2.0 / v15[114] / v127 * a2 * a2;
  v22 = v126;
  if (v23)
    v22 = -v22;
  if (v22 > 1.0) {
    if (v126 == 0.0) {
      v24 = 0.0;
    } else if (v126 <= 0.0) {
      v24 = -1.0;
    } else {
      v24 = 1.0;
    }
    v126 = v24 * 1.5;
  }
  v26 = v120;
  if (v27)
    v26 = -v26;
  if (v26 > 1.0) {
    if (v120 == 0.0) {
      v28 = 0.0;
    } else if (v120 <= 0.0) {
      v28 = -1.0;
    } else {
      v28 = 1.0;
    }
    v120 = v28 * 1.5;
  }
  v143 = 0;
  v142 = 0.0;
  v141 = v15[30];
  sub_1006B510(v153, (float *)a1, (int *)&v141);
  sub_10074720(&v132, (float *)(a1 + 188), v153);
  v29 = *(_DWORD *)(a1 + 4);
  v30 = *(_DWORD *)(a1 + 12);
  v31 = *(_DWORD *)(a1 + 16);
  v128 = *(_BYTE *)(v29 + 416);
  v32 = *(_DWORD *)(a1 + 8);
  LOBYTE(v146) = *(_BYTE *)(v32 + 416);
  LOBYTE(v152) = *(_BYTE *)(v30 + 416);
  LOBYTE(v147) = *(_BYTE *)(v31 + 416);
  v33 = gChosenWeather1 - 1;
  if ((__int16)(gChosenWeather1 - 1) > 2 || (v33 & 0x8000u) != 0)
    v33 = 0;
  LODWORD(v134) = 8 * v33;
  *(_BYTE *)(a1 + 521) = 0;
  if ((*(_DWORD *)(v29 + 436) || *(_DWORD *)(v32 + 436)) &&
      (*(_DWORD *)(v30 + 436) || *(_DWORD *)(v31 + 436))) {
    v35 = v133;
    if (v36)
      v35 = -v35;
    v38 = *(float *)a3;
    if (v39)
      v38 = -v38;
    v40 = v38;
    v41 = v35 * *(float *)(a1 + 44);
    v145 = 1;
    v42 = v41 / a2 + v40;
    if (v44 | v45) {
      v48 = v120;
      if (v120 < 0.0)
        v48 = -v48;
      v47 = (double)(v48 > 0.0001) * -100000.0;
    } else {
      v46 = v120;
      if (v120 < 0.0)
        v46 = -v46;
      v47 = (double)(v46 > 0.0001) * -10000.0;
    }
    v49 = v42 - v47;
    if (*(_BYTE *)a5)
      v50 = 5600.0;
    else
      v50 = 8000.0;
    v51 = SLOWORD(v134);
    v52 = v49;
    v53 = LOBYTE(v146);
    *(_BYTE *)a5 = 0;
    v54 = (v128 + v53 + 1) >> 1;
    v55 = v54 + v51 + 24 * *(unsigned __int8 *)(a1 + 509);
    v56 = v51 + v54;
    v57 = *(float *)&dword_100B5970[v56];
    v146 = *(float *)(dword_117554A8 + 4 * v55);
    v131 = *(float *)(dword_117554C0 + v56 * 4);
    if (v49 > v131)
      v52 = v131;
    if (v52 < v57)
      v52 = v57;
    v59 = v57 / v52 * v146 * 20.0;
    v129 = v59;
    if (v60) {
      v59 = v59 * 1.5;
      v129 = v59;
    }
    if (v59 < 0.0)
      v59 = -v59;
    if (v59 > 1.0)
      v129 = 1.0;
    if (v49 >= v50) {
      v116 = *(float *)(a1 + 132) * *(float *)(a1 + 132) +
             *(float *)(a1 + 136) * *(float *)(a1 + 136) +
             *(float *)(a1 + 140) * *(float *)(a1 + 140);
      v62 = sqrt_(v116);
      if (v62 < 27.0) {
        v63 = (27.0 - v62) * 0.0037037039;
        if (v129 < v63)
          v129 = v63;
      }
      v64 = v133 - v129 * v133;
      *(_BYTE *)a5 = 1;
      v133 = v64;
      v61 = v64;
      v144 = v129 * v64;
    } else {
      v61 = 0.0;
      v144 = 0.0;
      v133 = 0.0;
    }
    v66 = v132;
    if (v67)
      v66 = -v66;
    if (v66 <= 1.0) {
      if (v61 < 0.0)
        v61 = -v61;
      if (v61 <= 1.0)
        *(_BYTE *)(a1 + 521) = 0;
      else
        *(_BYTE *)(a1 + 521) = 0x80;
    } else {
      v68 = v61 / v132;
      if (v68 < 0.0)
        v68 = -v68;
      if (v68 > 0.25)
        *(_BYTE *)(a1 + 521) = 0x80;
    }
    v69 = v132 - v120;
    v121 = v132;
    v132 = v69;
    v71 = v132;
    if (v72)
      v71 = -v71;
    if (v71 > 0.0000099999997) {
      if (v132 == 0.0)
        v73 = 0.0;
      else
        v73 = v132 <= 0.0 ? -1.0 : 1.0;
      if (v121 == 0.0)
        v74 = 0.0;
      else
        v74 = v121 <= 0.0 ? -1.0 : 1.0;
      if (v73 != v74)
        v132 = 0.0;
    }
  } else {
    *(_BYTE *)a5 = 0;
  }
  v141 = *(float *)(*(_DWORD *)(a1 + 12) + 120);
  sub_1006B510(v154, (float *)a1, (int *)&v141);
  sub_10074720(&v135, (float *)(a1 + 188), v154);
  v75 = *(_DWORD *)(a1 + 12);
  if ((*(_DWORD *)(v75 + 436) || *(_DWORD *)(*(_DWORD *)(a1 + 16) + 436)) &&
      (*(_DWORD *)(*(_DWORD *)(a1 + 4) + 436) || *(_DWORD *)(*(_DWORD *)(a1 + 8) + 436))) {
    v117 = *(float *)(v75 + 448);
    v145 = 1;
    v76 = cos_(v117);
    v77 = *(_DWORD *)(a1 + 12);
    v141 = v76;
    v142 = sin_(*(float *)(v77 + 448));
    v140 = v137;
    v138 = v135;
    v78 = v135 * v141 + v136 * v142;
    v122 = v78;
    v79 = v135;
    v139 = v136;
    v137 = 0.0;
    v135 = v78 * v141;
    v80 = v79;
    v81 = v136;
    v136 = v122 * v142;
    v143 = 0;
    v148 = v80 - v135;
    v149 = v81 - v136;
    v150 = v140 - 0.0;
    if (v83)
      v123 = -*(float *)a4;
    else
      v123 = *(float *)a4;
    v118 = v148 * v148 + v149 * v149 + v150 * v150;
    v84 = sqrt_(v118);
    v86 = v84 * *(float *)(a1 + 44) / a2 + v123;
    v87 = 8000.0;
    v124 = v86;
    v88 = v126;
    if (v89)
      v88 = -v88;
    v125 = v124 - (double)(v88 > 0.0001) * -10000.0;
    if (*(_BYTE *)a6)
      v87 = 5600.0;
    *(_BYTE *)a6 = 0;
    if (v125 <= v87) {
      *(_BYTE *)a6 = 0;
    } else {
      v90 = v125;
      v91 = ((unsigned __int8)v152 + LOBYTE(v147) + 1) >> 1;
      v92 = v91 + 24 * *(unsigned __int8 *)(a1 + 509);
      v93 = SLOWORD(v134) + v91;
      v94 = *(float *)&dword_100B5970[v93];
      v147 = *(float *)(dword_117554A8 + 4 * (SLOWORD(v134) + v92));
      v134 = *(float *)(dword_117554C0 + v93 * 4);
      if (v125 > (double)v134)
        v90 = v134;
      if (v90 < v94)
        v90 = v94;
      v96 = v94 / v90 * v147 * 20.0;
      v130 = v96;
      if (v97) {
        v96 = v96 * 1.5;
        v130 = v96;
      }
      if (v96 < 0.0)
        v96 = -v96;
      if (v96 > 1.0)
        v130 = 1.0;
      v119 = *(float *)(a1 + 132) * *(float *)(a1 + 132) +
             *(float *)(a1 + 136) * *(float *)(a1 + 136) +
             *(float *)(a1 + 140) * *(float *)(a1 + 140);
      v98 = sqrt_(v119);
      if (v98 < 27.0) {
        v99 = (27.0 - v98) * 0.0037037039;
        if (v130 < v99)
          v130 = v99;
      }
      v100 = v139 - v149 * v130;
      v101 = v140 - v150 * v130;
      v135 = v138 - v148 * v130;
      *(_BYTE *)a6 = 1;
      v136 = v100;
      v137 = v101;
    }
  }
  if (v145) {
    v102 = *(_DWORD *)(a1 + 4);
    v103 = *(_DWORD *)(a1 + 12);
    v138 = (v132 + v135) * 0.5;
    v104 = (v133 - v136) / (*(float *)(v102 + 120) - *(float *)(v103 + 120));
    v140 = v104;
    v139 = v133 - v104 * *(float *)(v102 + 120);
    sub_10074720((float *)v151, (float *)(a1 + 188), (float *)(a1 + 160));
    *(float *)&v151[2] = v140;
    sub_10074770((float *)(a1 + 160), a1 + 188, (float *)v151);
    sub_10074720((float *)v151, (float *)(a1 + 188), (float *)(a1 + 132));
    *(float *)v151 = v138;
    *(float *)&v151[1] = v139;
    sub_10074770((float *)(a1 + 132), a1 + 188, (float *)v151);
  }
  v105 = v144;
  v107 = v144;
  if (v108)
    v107 = -v107;
  if (v107 > 0.5) {
    if (v105 == 0.0) {
      v109 = 0.0;
    } else if (v105 <= 0.0) {
      v109 = -1.0;
    } else {
      v109 = 1.0;
    }
    v105 = v109 * 0.5;
  }
  v110 = (v105 + v105) * -4.0;
  v111 = *(float *)(a1 + 468) - v110;
  if (v111 < 0.0)
    v111 = -v111;
  if (v111 >= 0.26666668) {
    v113 = *(float *)(a1 + 468);
    if (!(v114 | v115)) {
      *(float *)(a1 + 468) = v113 - -0.26666668;
      return;
    }
    v110 = v113 - 0.26666668;
  }
  *(float *)(a1 + 468) = v110;
}
// 1006B66D: variable 'v13' is possibly undefined
// 1006B6D9: variable 'v19' is possibly undefined
// 1006B789: variable 'v23' is possibly undefined
// 1006B7EF: variable 'v27' is possibly undefined
// 1006B92D: variable 'v36' is possibly undefined
// 1006B947: variable 'v39' is possibly undefined
// 1006B998: variable 'v44' is possibly undefined
// 1006B998: variable 'v45' is possibly undefined
// 1006BABE: variable 'v60' is possibly undefined
// 1006BBBC: variable 'v67' is possibly undefined
// 1006BC45: variable 'v72' is possibly undefined
// 1006BE21: variable 'v83' is possibly undefined
// 1006BE90: variable 'v89' is possibly undefined
// 1006BF94: variable 'v97' is possibly undefined
// 1006C134: variable 'v108' is possibly undefined
// 1006C1BB: variable 'v114' is possibly undefined
// 1006C1BB: variable 'v115' is possibly undefined
// 100B5970: using guessed type int dword_100B5970[];
// 104BBE08: using guessed type int dword_104BBE08;
// 117554A8: using guessed type int dword_117554A8;
// 117554C0: using guessed type int dword_117554C0;

//----- (1006C1F0) --------------------------------------------------------
void __cdecl sub_1006C1F0(int a1, int a2, int a3, int a4, float a5) {
  int v6;              // eax
  float *v8;           // ebx
  double v9;           // st5
  double v10;          // st4
  double v11;          // st7
  double v12;          // rt1
  double v13;          // rtt
  float v14;           // edx
  double v15;          // st3
  double v16;          // st7
  double v17;          // st4
  double v18;          // st5
  double v19;          // st5
  double v20;          // st6
  long double v21;     // st4
  double v22;          // st7
  double v23;          // st7
  double v24;          // st3
  double v25;          // st7
  double v26;          // st7
  double v27;          // st6
  __int16 v28;         // ax
  double v30;          // st6
  char v31;            // c0
  double v33;          // st5
  char v34;            // c0
  double v35;          // st7
  double v36;          // st6
  double v37;          // rt2
  double v38;          // st7
  double v40;          // st6
  char v41;            // c0
  double X;            // st7
  unsigned __int8 v44; // c0
  unsigned __int8 v45; // c3
  double v46;          // st7
  float v47;           // [esp+14h] [ebp-48h]
  float v48;           // [esp+14h] [ebp-48h]
  float v49;           // [esp+14h] [ebp-48h]
  float v50;           // [esp+18h] [ebp-44h]
  float v51;           // [esp+18h] [ebp-44h]
  float v52;           // [esp+18h] [ebp-44h]
  float v53;           // [esp+1Ch] [ebp-40h]
  float v54;           // [esp+1Ch] [ebp-40h]
  float v55;           // [esp+1Ch] [ebp-40h]
  float v56;           // [esp+20h] [ebp-3Ch] BYREF
  float v57;           // [esp+24h] [ebp-38h]
  float v58;           // [esp+28h] [ebp-34h]
  float v59;           // [esp+2Ch] [ebp-30h]
  float v60;           // [esp+30h] [ebp-2Ch]
  float v61;           // [esp+34h] [ebp-28h]
  int v62[3];          // [esp+38h] [ebp-24h] BYREF
  float v63[3];        // [esp+44h] [ebp-18h] BYREF
  float v64[3];        // [esp+50h] [ebp-Ch] BYREF
  int v65;             // [esp+60h] [ebp+4h]
  float v66;           // [esp+64h] [ebp+8h]
  float v67;           // [esp+64h] [ebp+8h]
  int v68;             // [esp+64h] [ebp+8h]
  int v69;             // [esp+68h] [ebp+Ch]

  v62[0] = 0;
  v62[1] = 1065353216;
  v6 = *(_DWORD *)(a2 + 412);
  v62[2] = 0;
  if (v6 && *(float *)(a2 + 428) >= 0.7) {
    v8 = (float *)(a1 + 188);
    sub_10074770(&v56, a1 + 188, (float *)v62);
    v9 = v58 * *(float *)(a2 + 420) - v56 * *(float *)(a2 + 428);
    v10 = v57 * *(float *)(a2 + 428) - v58 * *(float *)(a2 + 424);
    v47 = v10;
    v11 = v56 * *(float *)(a2 + 424) - v57 * *(float *)(a2 + 420);
    v50 = v9;
    v53 = v11;
    v12 = v11 * *(float *)(a2 + 424);
    v13 = v10 * *(float *)(a2 + 428);
    v14 = *(float *)(a2 + 448);
    v15 = v53 * *(float *)(a2 + 420);
    v16 = v50 * *(float *)(a2 + 420);
    v17 = v12 - v9 * *(float *)(a2 + 428);
    v18 = v47 * *(float *)(a2 + 424);
    v59 = v17;
    v60 = v13 - v15;
    v61 = v16 - v18;
    v66 = cos_(v14);
    v19 = v66;
    v20 = v66;
    v21 = sin_(*(float *)(a2 + 448));
    v22 = v66 * v47;
    v67 = v21;
    v48 = v22;
    v51 = v19 * v50;
    v54 = v20 * v53;
    v49 = v67 * v59 + v48;
    v52 = v67 * v60 + v51;
    v55 = v67 * v61 + v54;
    if (*(_DWORD *)(*(_DWORD *)(a1 + 4) + 436) && *(_DWORD *)(*(_DWORD *)(a1 + 12) + 436) &&
        *(_DWORD *)(*(_DWORD *)(a1 + 8) + 436) && *(_DWORD *)(*(_DWORD *)(a1 + 16) + 436)) {
      sub_1006B430(v63, (float *)a1, (float *)a2);
      v65 = *(int *)(a2 + 460);
      v23 = *(float *)&v65 / *(float *)(a2 + 456);
      v56 = 0.0;
      v57 = 0.0;
      v24 = v23;
      v25 = (*(float *)(a1 + 44) - *(float *)(a2 + 44) * -4.0) * 2.9430003;
      *(float *)&v68 = v24;
      v58 = v25;
      v26 = v25 * *(float *)(a2 + 428) * 3.5;
      v27 = v63[0] * v49 + v63[1] * v52 + v63[2] * v55;
      *(float *)a3 = *(float *)a3 - *(float *)&v68 * -0.5;
      *(float *)&v69 = v27;
      if (*(_BYTE *)a4) {
        v28 = gChosenWeather1 - 1;
        if ((__int16)(gChosenWeather1 - 1) > 2 || v28 < 0)
          v28 = 0;
        *(float *)&v68 =
            *(float *)(dword_11750330 +
                       4 * (((2 * *(unsigned __int8 *)(a2 + 416) + 1) >> 1) + (__int16)(8 * v28) +
                            24 * *(unsigned __int8 *)(a1 + 509))) *
            *(float *)&v68;
      }
      v30 = *(float *)&v68;
      if (v31)
        v30 = -v30;
      v33 = v26;
      if (v34)
        v33 = -v26;
      if (v30 > v33) {
        v35 = v26 / *(float *)&v68;
        if (v35 < 0.0)
          v35 = -v35;
        *(float *)&v68 = v35 * *(float *)&v68 * 0.1;
      }
      v36 = -*(float *)&v68;
      v64[0] = v49 * v36;
      v64[1] = v52 * v36;
      v64[2] = v55 * v36;
      sub_10074720(&v56, v8, v64);
      *(float *)(*(_DWORD *)(a2 + 24) + 8) = v56 + *(float *)(*(_DWORD *)(a2 + 24) + 8);
      *(float *)(*(_DWORD *)(a2 + 24) + 12) = v57 + *(float *)(*(_DWORD *)(a2 + 24) + 12);
      *(float *)(*(_DWORD *)(a2 + 24) + 16) = v58 + *(float *)(*(_DWORD *)(a2 + 24) + 16);
      v37 = (*(float *)&v65 - *(float *)&v68 * *(float *)(a2 + 456)) * a5 + *(float *)(a2 + 452);
      v38 = v37 - (*(float *)(a2 + 456) * v37 + *(float *)&v69) * 0.40000001;
    } else {
      v38 = *(float *)(a2 + 460) * a5 + *(float *)(a2 + 452);
    }
    *(float *)(a2 + 452) = v38;
    v40 = v38;
    if (v41)
      v40 = -v38;
    if (v40 > 300.0) {
      if (v38 == 0.0) {
        *(float *)(a2 + 452) = 0.0 * 300.0;
      } else if (v38 <= 0.0) {
        *(float *)(a2 + 452) = -1.0 * 300.0;
      } else {
        *(float *)(a2 + 452) = 1.0 * 300.0;
      }
    }
    X = *(float *)(a2 + 468) - *(float *)(a2 + 452) * 57.295776 * a5;
    *(float *)(a2 + 468) = X;
    if (_finite(X) && *(float *)(a2 + 468) >= -36000.0 && *(float *)(a2 + 468) < 36000.0) {
      if (*(float *)(a2 + 468) > 360.0) {
        do
          *(float *)(a2 + 468) = *(float *)(a2 + 468) - 360.0;
        while (!(v44 | v45));
      }
      if (*(float *)(a2 + 468) < 0.0) {
        v46 = *(float *)(a2 + 468);
        do
          v46 = v46 - -360.0;
        while (v46 < 0.0);
        *(float *)(a2 + 468) = v46;
      }
    } else {
      *(_DWORD *)(a2 + 468) = 0;
    }
  }
}
// 1006C4ED: variable 'v31' is possibly undefined
// 1006C500: variable 'v34' is possibly undefined
// 1006C5FB: variable 'v41' is possibly undefined
// 1006C6EB: variable 'v44' is possibly undefined
// 1006C6EB: variable 'v45' is possibly undefined
// 104BBE08: using guessed type int dword_104BBE08;
// 11750330: using guessed type int dword_11750330;

//----- (1006C740) --------------------------------------------------------
__int16 __cdecl sub_1006C740(int a1, int a2) {
  double v3;  // st7
  char v4;    // c0
  double v6;  // st6
  char v7;    // c0
  double v9;  // st7
  char v10;   // c0
  double v12; // st6
  char v13;   // c0
  int v14;    // ecx
  double v16; // st7
  char v17;   // c0
  double v19; // st6
  char v20;   // c0
  int v21;    // edi
  int v22;    // edx
  int v23;    // ecx
  int v24;    // eax
  int v25;    // edi
  int v26;    // esi
  double v27; // st7
  double v28; // st7
  double v30; // st7
  double v31; // st7
  float v32;  // [esp+Ch] [ebp-14h]
  float v33;  // [esp+10h] [ebp-10h]
  float v34;  // [esp+14h] [ebp-Ch]
  float v35;  // [esp+18h] [ebp-8h]
  float v36;  // [esp+1Ch] [ebp-4h]
  float v37;  // [esp+24h] [ebp+4h]
  float v38;  // [esp+24h] [ebp+4h]
  float v39;  // [esp+28h] [ebp+8h]

  v3 = *(float *)a1;
  if (v4)
    v3 = -v3;
  v6 = *(float *)(a1 + 4);
  if (v7)
    v6 = -v6;
  if (v3 <= v6) {
    v16 = *(float *)(a1 + 4);
    if (v17)
      v16 = -v16;
    v19 = *(float *)(a1 + 8);
    if (v20)
      v19 = -v19;
    if (v16 > v19) {
      v14 = 1;
      goto LABEL_19;
    }
  } else {
    v9 = *(float *)a1;
    if (v10)
      v9 = -v9;
    v12 = *(float *)(a1 + 8);
    if (v13)
      v12 = -v12;
    if (v9 > v12) {
      v14 = 0;
      goto LABEL_19;
    }
  }
  v14 = 2;
LABEL_19:
  v21 = (v14 + 1) % 3;
  v22 = (v14 + 2) % 3;
  v23 = *(_DWORD *)(a1 + 16);
  v24 = 4 * v21;
  v34 = *(float *)(a2 + v24) - *(float *)(v23 + v24);
  v22 *= 4;
  v25 = *(_DWORD *)(a1 + 20);
  v26 = *(_DWORD *)(a1 + 24);
  v35 = *(float *)(a2 + v22) - *(float *)(v22 + v23);
  v39 = *(float *)(v25 + v24) - *(float *)(v23 + v24);
  v32 = *(float *)(v25 + v22) - *(float *)(v22 + v23);
  v33 = *(float *)(v26 + v24) - *(float *)(v23 + v24);
  v36 = *(float *)(v26 + v22) - *(float *)(v22 + v23);
  if (v39 == 0.0) {
    v27 = v34 / v33;
    v37 = v27;
    if (v27 >= 0.0 && v37 <= 1.0) {
      v28 = (v35 - v37 * v36) / v32;
      if (v28 >= 0.0 && v37 + v28 <= 1.0)
        return 1;
    }
  } else {
    v30 = (v35 * v39 - v32 * v34) / (v36 * v39 - v32 * v33);
    v38 = v30;
    if (v30 >= 0.0 && v38 <= 1.0) {
      v31 = (v34 - v38 * v33) / v39;
      if (v31 >= 0.0 && v38 + v31 <= 1.0)
        return 1;
    }
  }
  return 0;
}
// 1006C759: variable 'v4' is possibly undefined
// 1006C76E: variable 'v7' is possibly undefined
// 1006C78E: variable 'v10' is possibly undefined
// 1006C7A3: variable 'v13' is possibly undefined
// 1006C7C9: variable 'v17' is possibly undefined
// 1006C7DE: variable 'v20' is possibly undefined

//----- (1006C9A0) --------------------------------------------------------
double __cdecl sub_1006C9A0(int a1, float a2, int a3) {
  return *(float *)(a3 + 4) * *(float *)(a1 + 4) + *(float *)(a3 + 8) * *(float *)(a1 + 8) +
         *(float *)a1 * *(float *)a3 + a2;
}

//----- (1006C9D0) --------------------------------------------------------
int __cdecl sub_1006C9D0(int a1, float *a2, int a3, int a4) {
  double v5;           // st7
  double v7;           // st5
  double v8;           // st4
  double v9;           // st6
  double v10;          // st2
  double v11;          // st3
  double v12;          // st1
  double v13;          // st6
  double v14;          // rt2
  double v15;          // rt1
  unsigned __int8 v16; // al
  double v17;          // st7
  double v18;          // st3
  double v19;          // st4
  double v20;          // st5
  double v21;          // st4
  __int64 v22;         // rax
  double v23;          // st7
  double v24;          // st6
  float v25;           // edx
  float v26;           // eax
  double v27;          // st6
  double v28;          // st6
  double v29;          // st7
  double v30;          // st4
  double v31;          // st5
  double v32;          // rt2
  double v33;          // st4
  double v34;          // st6
  double v35;          // rt2
  double v36;          // st3
  double v37;          // st6
  double v38;          // st7
  int v39;             // edx
  int v40;             // ecx
  int v41;             // eax
  float v42;           // [esp+8h] [ebp-58h] BYREF
  float v43;           // [esp+Ch] [ebp-54h]
  float v44;           // [esp+10h] [ebp-50h]
  float v45;           // [esp+14h] [ebp-4Ch] BYREF
  float v46;           // [esp+18h] [ebp-48h]
  float v47;           // [esp+1Ch] [ebp-44h]
  int v48[4];          // [esp+20h] [ebp-40h] BYREF
  float v49;           // [esp+30h] [ebp-30h]
  float v50;           // [esp+34h] [ebp-2Ch]
  float v51;           // [esp+38h] [ebp-28h]
  float v52;           // [esp+40h] [ebp-20h]
  float v53;           // [esp+44h] [ebp-1Ch]
  float v54;           // [esp+48h] [ebp-18h]
  float v55;           // [esp+68h] [ebp+8h]

  v5 = *a2 * *(float *)(a1 + 356) + a2[2] * *(float *)(a1 + 364) + a2[1] * *(float *)(a1 + 360);
  v55 = v5;
  if (v5 >= 0.0)
    return 0;
  v7 = *(float *)(a1 + 356);
  v8 = *(float *)(a1 + 360);
  v9 = v55 * 1.05;
  v10 = *a2 * v9;
  v11 = *(float *)(a1 + 364);
  v12 = v9;
  v13 = v9 * a2[1];
  v14 = v12 * a2[2];
  v42 = v10;
  v43 = v13;
  v15 = v11;
  v44 = v14;
  v16 = *(_BYTE *)(a1 + 512);
  v17 = v7 - v42;
  v18 = v8 - v43;
  v19 = v15 - v44;
  *(float *)(a1 + 356) = v17;
  *(float *)(a1 + 360) = v18;
  *(float *)(a1 + 364) = v19;
  v20 = v19;
  if (v16 >= 0xAu) {
    v21 = -v55;
    if (v21 > 27.0)
      v21 = 27.0;
    *(_BYTE *)(a1 + 508) = (__int64)v21;
    *(float *)(a1 + 492) = *(float *)&dword_11755490;
    *(float *)(a1 + 496) = *(float *)&dword_11755494;
    *(_DWORD *)(a1 + 500) = dword_11755498;
    v22 = (__int64)(128.0 - v21 * -4.7037039);
    if ((unsigned __int8)v22 <= *(_BYTE *)(a1 + 511))
      LOBYTE(v22) = *(_BYTE *)(a1 + 511);
    *(float *)(a1 + 356) = v17 * 0.89999998;
    *(float *)(a1 + 360) = v18 * 0.89999998;
    *(_BYTE *)(a1 + 511) = v22;
    *(float *)(a1 + 364) = v20 * 0.89999998;
  }
  if (a3) {
    v23 = *(float *)(a1 + 360) * 0.89999998;
    v24 = *(float *)(a1 + 364) * 0.89999998;
    *(float *)(a1 + 356) = *(float *)(a1 + 356) * 0.89999998;
    *(float *)(a1 + 360) = v23;
    *(float *)(a1 + 364) = v24;
  }
  if (a4) {
    v25 = a2[2];
    v42 = a2[1];
    v26 = *a2;
    v27 = v42 * a2[2];
    v43 = v25;
    v44 = v26;
    v28 = v27 - v26 * *a2;
    v29 = v25 * *a2;
    v30 = v26 * a2[1] - v25 * a2[2];
    v31 = v42 * a2[1];
    v49 = v30;
    v32 = v30;
    v33 = v28;
    v34 = v32 * a2[2];
    v50 = v33;
    v35 = v33 * a2[2];
    v36 = v29 - v31;
    v51 = v36;
    v37 = v34 - v51 * *a2;
    v38 = v50 * *a2 - v49 * a2[1];
    v52 = v36 * a2[1] - v35;
    v39 = *((_DWORD *)a2 + 1);
    v40 = LODWORD(v26);
    v53 = v37;
    v41 = *((_DWORD *)a2 + 2);
    v48[0] = v40;
    v54 = v38;
    v48[1] = v39;
    v48[2] = v41;
    sub_10074770(&v42, (int)v48, a2);
    sub_10074770(&v45, (int)v48, (float *)(a1 + 384));
    v45 = v45 * v42;
    v46 = v46 * v43;
    v47 = v47 * v44;
    sub_10074720((float *)(a1 + 384), (float *)v48, &v45);
  }
  return 1;
}
// 11755490: using guessed type int dword_11755490;
// 11755494: using guessed type int dword_11755494;
// 11755498: using guessed type int dword_11755498;

//----- (1006CCD0) --------------------------------------------------------
int __cdecl sub_1006CCD0(int a1, int a2, int a3, int a4, float a5) {
  float v6;            // edx
  float v7;            // eax
  double v8;           // st5
  double v9;           // st6
  double v10;          // st7
  double v11;          // rt1
  double v12;          // st5
  double v13;          // st7
  double v14;          // st6
  int result;          // eax
  int v16;             // edx
  int v17;             // ecx
  int v18;             // eax
  int v19;             // ebp
  double v20;          // rt2
  double v21;          // st7
  double v23;          // st6
  double v24;          // st7
  char v25;            // c0
  unsigned __int8 v26; // al
  __int64 v27;         // rax
  double v28;          // st5
  double v29;          // st6
  double v30;          // st3
  double v31;          // st2
  double v32;          // st1
  double v33;          // st7
  double v34;          // rt0
  double v35;          // st1
  double v36;          // st6
  double v37;          // st6
  double v38;          // st4
  double v39;          // st5
  double v40;          // st7
  double v41;          // st5
  double v42;          // st6
  double v43;          // st4
  double v44;          // st3
  float v45;           // [esp+4h] [ebp-13Ch]
  float v46;           // [esp+4h] [ebp-13Ch]
  float v47;           // [esp+8h] [ebp-138h] BYREF
  float v48;           // [esp+Ch] [ebp-134h]
  float v49;           // [esp+10h] [ebp-130h]
  float v50;           // [esp+14h] [ebp-12Ch]
  float v51;           // [esp+18h] [ebp-128h]
  float v52;           // [esp+1Ch] [ebp-124h]
  float v53;           // [esp+20h] [ebp-120h] BYREF
  float v54;           // [esp+24h] [ebp-11Ch]
  float v55;           // [esp+28h] [ebp-118h]
  float v56;           // [esp+2Ch] [ebp-114h] BYREF
  float v57;           // [esp+30h] [ebp-110h]
  float v58;           // [esp+34h] [ebp-10Ch]
  float v59[3];        // [esp+38h] [ebp-108h] BYREF
  int v60[8];          // [esp+44h] [ebp-FCh] BYREF
  float v61;           // [esp+64h] [ebp-DCh]
  float v62[9];        // [esp+68h] [ebp-D8h] BYREF
  float v63[9];        // [esp+8Ch] [ebp-B4h] BYREF
  float v64[9];        // [esp+B0h] [ebp-90h] BYREF
  float v65[9];        // [esp+D4h] [ebp-6Ch] BYREF
  char v66[36];        // [esp+F8h] [ebp-48h] BYREF
  char v67[36];        // [esp+11Ch] [ebp-24h] BYREF

  v6 = *(float *)(a2 + 4);
  v7 = *(float *)(a2 + 8);
  v47 = *(float *)a2;
  v48 = v6;
  v49 = v7;
  sub_10074A10(v64, (int)v67, (float *)(a1 + 188));
  sub_10074830(&v53, v64, &v47);
  v8 = v53 * *(float *)(a1 + 392) - v55 * *(float *)(a1 + 384) + *(float *)(a1 + 360);
  v9 = v54 * *(float *)(a1 + 384) - v53 * *(float *)(a1 + 388) + *(float *)(a1 + 364);
  v10 = v55 * *(float *)(a1 + 388) - v54 * *(float *)(a1 + 392);
  v48 = v8;
  v49 = v9;
  v11 = v10 + *(float *)(a1 + 356);
  v12 = v8 * *(float *)(a3 + 4);
  v13 = *(float *)a3;
  v14 = v9 * *(float *)(a3 + 8);
  v47 = v11;
  if (v12 + v14 + v13 * v47 >= 0.0)
    return 0;
  sub_100749D0((int)v66, (int)&v53);
  sub_10074AC0((int)v62, a1 + 84, (int)v67);
  sub_10074AC0((int)v65, (int)v64, (int)v62);
  sub_10074AC0((int)v63, (int)v65, (int)v66);
  sub_10074AC0((int)v62, (int)v66, (int)v63);
  v16 = 0;
  v17 = 0;
  do {
    v18 = 0;
    do {
      v19 = v18 + v17;
      if (v16 == v18)
        v60[v19] = 1065353216;
      else
        v60[v19] = 0;
      ++v18;
    } while (v18 < 3);
    v17 += 3;
    ++v16;
  } while (v17 < 9);
  v61 = 1.0 / *(float *)(a1 + 44);
  *(float *)&v60[4] = v61;
  *(float *)v60 = v61;
  sub_10074B20((int)v63, (int)v60, v62);
  v45 = v48 * *(float *)(a3 + 4) + v49 * *(float *)(a3 + 8) + *(float *)a3 * v47;
  v20 = *(float *)a3 * v45;
  v21 = v45 * *(float *)(a3 + 8);
  v51 = v45 * *(float *)(a3 + 4);
  v23 = v21;
  v24 = v20;
  v52 = v23;
  if (v25)
    v45 = -v45;
  if (v45 > 27.0)
    v45 = 27.0;
  *(_BYTE *)(a1 + 508) = (__int64)v45;
  *(_DWORD *)(a1 + 492) = dword_11755490;
  *(_DWORD *)(a1 + 496) = dword_11755494;
  v26 = *(_BYTE *)(a1 + 512);
  *(_DWORD *)(a1 + 500) = dword_11755498;
  if (v26 > 0xAu && a5 < 0.000099999997) {
    v27 = (__int64)(128.0 - v45 * -4.7037039);
    if ((unsigned __int8)v27 <= *(_BYTE *)(a1 + 511))
      LOBYTE(v27) = *(_BYTE *)(a1 + 511);
    *(_BYTE *)(a1 + 511) = v27;
    v28 = v51;
    v29 = v52;
    *(float *)(a1 + 356) = *(float *)&dword_100B5968 * *(float *)(a1 + 356);
    v30 = v47;
    v31 = v48;
    v32 = v24;
    v33 = v49;
    v34 = v32 * 0.89999998;
    *(float *)(a1 + 360) = *(float *)&dword_100B5968 * *(float *)(a1 + 360);
    v35 = v33;
    v24 = v34;
    v51 = v28 * 0.89999998;
    v52 = v29 * 0.89999998;
    v47 = v30 * 0.89999998;
    v36 = *(float *)&dword_100B5968 * *(float *)(a1 + 364);
    v48 = v31 * 0.89999998;
    v49 = v35 * 0.89999998;
    *(float *)(a1 + 364) = v36;
  }
  if (a4) {
    v37 = (v47 - v24) * 0.2;
    v38 = (v49 - v52) * 0.2;
    v39 = (v48 - v51) * 0.2;
  } else {
    v37 = 0.0;
    v39 = 0.0;
    v38 = 0.0;
  }
  v47 = v24 + v37;
  v48 = v51 + v39;
  v49 = v52 + v38;
  sub_10074C10(&v56, v63, &v47);
  v46 = 1.0 / *(float *)(a1 + 44);
  v47 = v54 * v58 - v55 * v57;
  v50 = v56 * v46;
  v51 = v57 * v46;
  v48 = v55 * v56 - v53 * v58;
  v52 = v58 * v46;
  v49 = v53 * v57 - v54 * v56;
  sub_10074830(v59, v65, &v47);
  v40 = a5 - -1.05;
  v41 = *(float *)(a1 + 360) - v51 * v40;
  v42 = *(float *)(a1 + 364) - v52 * v40;
  v43 = *(float *)(a1 + 384) - v59[0] * v40;
  v44 = *(float *)(a1 + 388) - v59[1] * v40;
  *(float *)(a1 + 356) = *(float *)(a1 + 356) - v50 * v40;
  *(float *)(a1 + 360) = v41;
  *(float *)(a1 + 364) = v42;
  *(float *)(a1 + 384) = v43;
  result = 1;
  *(float *)(a1 + 388) = v44;
  *(float *)(a1 + 392) = *(float *)(a1 + 392) - v59[2] * v40;
  return result;
}
// 1006CF2B: variable 'v25' is possibly undefined
// 100B5968: using guessed type int dword_100B5968;
// 11755490: using guessed type int dword_11755490;
// 11755494: using guessed type int dword_11755494;
// 11755498: using guessed type int dword_11755498;

//----- (1006D280) --------------------------------------------------------
_DWORD *__cdecl sub_1006D280(int a1) {
  _DWORD *result; // eax

  result = (_DWORD *)dword_117554E4;
  dword_117554E4 += 8;
  *result = a1;
  result[1] = dword_11754E38;
  dword_11754E38 = (int)result;
  return result;
}
// 11754E38: using guessed type int dword_11754E38;
// 117554E4: using guessed type int dword_117554E4;

//----- (1006D2B0) --------------------------------------------------------
int __cdecl sub_1006D2B0(int a1) {
  int v1;      // ebx
  float *v2;   // edx
  int v3;      // edi
  float *v4;   // esi
  double v5;   // st7
  int v6;      // ecx
  double v7;   // st7
  double v8;   // st7
  __int16 v10; // cx
  int v11;     // edi
  int v12;     // esi
  double v13;  // st7
  double v14;  // st7
  double v15;  // st7
  double v16;  // st7
  double v17;  // st7
  double v18;  // st7
  int v19;     // eax
  int v20;     // edi
  float *v21;  // esi

  v1 = -1;
  v2 = (float *)(a1 + 8);
  v3 = 0;
  v4 = (float *)(a1 + 8);
  do {
    v5 = *(v4 - 2);
    v6 = 0;
    if (v5 <= 0.5) {
      if (v5 < -0.5)
        v6 = 2;
    } else {
      v6 = 1;
    }
    v7 = *(v4 - 1);
    if (v7 <= 0.5) {
      if (v7 < -0.5)
        v6 |= 8u;
    } else {
      v6 |= 4u;
    }
    v8 = *v4;
    if (v8 <= 0.5) {
      if (v8 < -0.5)
        v6 |= 0x20u;
    } else {
      v6 |= 0x10u;
    }
    if (!v6)
      return 1;
    v1 &= v6;
    ++v3;
    v4 += 3;
  } while (v3 < 3);
  if (v1)
    return 0;
  v10 = -1;
  v11 = 0;
  while (1) {
    v12 = 0;
    if ((v10 & 3) != 0) {
      v13 = *(v2 - 2) + *(v2 - 1);
      if ((v10 & 1) != 0 && v13 > 1.0) {
        v12 = 1;
      } else if ((v10 & 2) != 0 && v13 < -1.0) {
        v12 = 2;
      }
    }
    if ((v10 & 0xC) != 0) {
      v14 = *(v2 - 2) - *(v2 - 1);
      if ((v10 & 4) != 0 && v14 > 1.0) {
        v12 |= 4u;
      } else if ((v10 & 8) != 0 && v14 < -1.0) {
        v12 |= 8u;
      }
    }
    if ((v10 & 0x30) != 0) {
      v15 = *(v2 - 2) + *v2;
      if ((v10 & 0x10) != 0 && v15 > 1.0) {
        v12 |= 0x10u;
      } else if ((v10 & 0x20) != 0 && v15 < -1.0) {
        v12 |= 0x20u;
      }
    }
    if ((v10 & 0xC0) != 0) {
      v16 = *(v2 - 2) - *v2;
      if ((v10 & 0x40) != 0 && v16 > 1.0) {
        v12 |= 0x40u;
      } else if ((v10 & 0x80u) != 0 && v16 < -1.0) {
        v12 |= 0x80u;
      }
    }
    if ((v10 & 0x300) != 0) {
      v17 = *(v2 - 1) + *v2;
      if ((v10 & 0x100) != 0 && v17 > 1.0) {
        v12 |= 0x100u;
      } else if ((v10 & 0x200) != 0 && v17 < -1.0) {
        v12 |= 0x200u;
      }
    }
    if ((v10 & 0xC00) != 0) {
      v18 = *(v2 - 1) - *v2;
      if ((v10 & 0x400) != 0 && v18 > 1.0) {
        v12 |= 0x400u;
      } else if ((v10 & 0x800) != 0 && v18 < -1.0) {
        v12 |= 0x800u;
      }
    }
    v10 = v12;
    if (!v12)
      break;
    ++v11;
    v2 += 3;
    if (v11 >= 3)
      return 0;
  }
  LOBYTE(v19) = -1;
  v20 = 0;
  v21 = (float *)a1;
  do {
    v19 = sub_1006D540(v21, v19);
    if (!v19)
      break;
    ++v20;
    v21 += 3;
  } while (v20 < 3);
  return (v19 != 0) - 1;
}
// 1006D4F7: conditional instruction was optimized away because of 'esi.4 in (1..2|>=4u)'

//----- (1006D540) --------------------------------------------------------
int __cdecl sub_1006D540(float *a1, char a2) {
  int v2;     // esi
  double v3;  // st7
  double v4;  // st7
  double v5;  // st7
  double v6;  // st7
  int result; // eax

  v2 = 0;
  if ((a2 & 3) != 0) {
    v3 = a1[1] + a1[2] + *a1;
    if ((a2 & 1) != 0 && v3 > 1.5) {
      v2 = 1;
    } else if ((a2 & 2) != 0 && v3 < -1.5) {
      v2 = 2;
    }
  }
  if ((a2 & 0xC) != 0) {
    v4 = a1[1] + *a1 - a1[2];
    if ((a2 & 4) != 0 && v4 > 1.5) {
      v2 |= 4u;
    } else if ((a2 & 8) != 0 && v4 < -1.5) {
      v2 |= 8u;
    }
  }
  if ((a2 & 0x30) != 0) {
    v5 = *a1 - a1[1] + a1[2];
    if ((a2 & 0x10) != 0 && v5 > 1.5) {
      v2 |= 0x10u;
    } else if ((a2 & 0x20) != 0 && v5 < -1.5) {
      v2 |= 0x20u;
    }
  }
  if ((a2 & 0xC0) == 0)
    goto LABEL_29;
  v6 = *a1 - a1[1] - a1[2];
  if ((a2 & 0x40) != 0 && v6 > 1.5)
    return v2 | 0x40;
  if (a2 < 0 && v6 < -1.5)
    result = v2 | 0x80;
  else
  LABEL_29:
    result = v2;
  return result;
}

//----- (1006D660) --------------------------------------------------------
int __cdecl sub_1006D660(int a1, float *a2, int a3) {
  int v3;    // esi
  float *v4; // ecx
  double v6; // st7
  char v7;   // c0
  int v8;    // ecx
  int v9;    // eax
  int v10;   // esi
  int v12;   // edx
  int v13;   // eax
  int v14;   // ecx
  int v15;   // esi
  int v16;   // ebp
  int v17;   // edx
  int v19;   // [esp+10h] [ebp-10h]
  float v20; // [esp+14h] [ebp-Ch] BYREF
  float v21; // [esp+18h] [ebp-8h]
  float v22; // [esp+1Ch] [ebp-4h]
  int v23;   // [esp+28h] [ebp+8h]
  int v24;   // [esp+2Ch] [ebp+Ch]

  v3 = 3;
  v4 = a2;
  do {
    v6 = *v4;
    if (v7)
      v6 = -v6;
    *(float *)((char *)v4++ + (char *)&v20 - (char *)a2) = v6;
    --v3;
  } while (v3);
  if (v20 <= (double)v22)
    v8 = (v21 <= (double)v22) + 1;
  else
    v8 = v20 <= (double)v21;
  if (a2[v8] >= 0.0) {
    v9 = v8 + 2;
    v10 = (v8 + 1) % 3;
  } else {
    v9 = v8 + 1;
    v10 = (v8 + 2) % 3;
  }
  v12 = v9 % 3;
  v13 = 0;
  v14 = 4 * v10;
  v15 = a1;
  v19 = 0;
  v23 = v12;
  do {
    v16 = v13 + 1;
    v17 = a1 + 12 * ((v13 + 1) % 3);
    v24 = (*(float *)(a3 + v14) < (double)*(float *)(v17 + v14)) -
          (*(float *)(a3 + v14) < (double)*(float *)(v15 + v14));
    if (v24) {
      if (*(float *)(a3 + 4 * v23) < (double)*(float *)(v17 + 4 * v23) ==
          *(float *)(a3 + 4 * v23) < (double)*(float *)(v15 + 4 * v23)) {
        if (*(float *)(v15 + 4 * v23) <= (double)*(float *)(a3 + 4 * v23))
          v19 += v24;
      } else if ((*(float *)(v17 + v14) - *(float *)(v15 + v14)) *
                     (*(float *)(a3 + 4 * v23) - *(float *)(v15 + 4 * v23)) * (double)v24 >=
                 (*(float *)(a3 + v14) - *(float *)(v15 + v14)) *
                     (*(float *)(v17 + 4 * v23) - *(float *)(v15 + 4 * v23)) * (double)v24) {
        v19 += v24;
      }
    }
    ++v13;
    v15 += 12;
  } while (v16 < 3);
  return v19;
}
// 1006D687: variable 'v7' is possibly undefined

//----- (1006D850) --------------------------------------------------------
int __cdecl sub_1006D850(float *a1, float *a2) {
  int v2;       // ecx
  double v3;    // st7
  double v4;    // st6
  int v5;       // eax
  int v6;       // edx
  int *v7;      // ecx
  double v8;    // st7
  int v9;       // esi
  int v10;      // eax
  double v11;   // st6
  float *v12;   // ecx
  int v13;      // eax
  double v14;   // st6
  double v15;   // st7
  int v17[3];   // [esp+Ch] [ebp-18h] BYREF
  float v18[3]; // [esp+18h] [ebp-Ch] BYREF
  float v19;    // [esp+2Ch] [ebp+8h]

  v2 = 0;
  v3 = a2[1] - a1[1];
  v4 = a2[2] - a1[2];
  v18[0] = *a2 - *a1;
  v18[1] = v3;
  v18[2] = v4;
  do {
    if (v18[v2] >= 0.0)
      v5 = 1;
    else
      v5 = -1;
    v17[v2++] = v5;
  } while (v2 < 3);
  v6 = 0;
  v7 = v17;
  while (1) {
    v8 = (double)*v7;
    if (*(float *)((char *)v7 + (char *)a1 - (char *)v17) * v8 > 0.5)
      break;
    if (*(float *)((char *)v7 + (char *)a2 - (char *)v17) * v8 < -0.5)
      return 0;
    ++v6;
    ++v7;
    if (v6 >= 3) {
      v9 = 2;
      while (1) {
        v10 = (v9 - 1) % 3;
        v11 = a1[v10];
        v12 = &v18[v10];
        v13 = v9 % 3;
        v14 = v11 * v18[v13] - a1[v13] * *v12;
        v15 = ((double)v17[v13] * *v12 + (double)v17[(v9 - 1) % 3] * v18[v13]) * 0.5;
        v19 = v14;
        if (v15 * v15 < v14 * v19)
          break;
        if (++v9 - 2 >= 3)
          return 1;
      }
      return 0;
    }
  }
  return 0;
}

//----- (1006D9A0) --------------------------------------------------------
int __cdecl sub_1006D9A0(float *a1, float *a2) {
  float *v2;    // ebx
  int v3;       // esi
  float *v4;    // edi
  int *v6;      // ecx
  int v7;       // edx
  int v8;       // eax
  double v9;    // st7
  double v10;   // st6
  float v12;    // [esp+Ch] [ebp-1Ch]
  int v13[3];   // [esp+10h] [ebp-18h] BYREF
  float v14[3]; // [esp+1Ch] [ebp-Ch] BYREF
  float v15;    // [esp+2Ch] [ebp+4h]
  float v16;    // [esp+30h] [ebp+8h]

  v2 = a1;
  v3 = 0;
  v4 = a1;
  do {
    if (sub_1006D850(v4, &a1[3 * (++v3 % 3)]))
      return 1;
    v4 += 3;
  } while (v3 < 3);
  v6 = v13;
  v7 = 3;
  do {
    if (*(float *)((char *)v6 + (char *)a2 - (char *)v13) >= 0.0)
      v8 = 1;
    else
      v8 = -1;
    *v6++ = v8;
    --v7;
  } while (v7);
  v9 = (double)v13[0];
  v16 = (float)v13[1];
  v12 = (float)v13[2];
  v10 = (a1[2] * a2[2] + a1[1] * a2[1] + *a2 * *a1) / (*a2 * v9 + a2[1] * v16 + a2[2] * v12);
  v15 = v10;
  if ((v10 - -0.5) * (v15 - 0.5) > 0.0)
    return 0;
  v14[0] = v15 * v9;
  v14[1] = v15 * v16;
  v14[2] = v15 * v12;
  return sub_1006D660((int)v2, a2, (int)v14);
}

//----- (1006DAF0) --------------------------------------------------------
int __cdecl sub_1006DAF0(float *a1, float *a2) {
  int result; // eax

  result = sub_1006D2B0((int)a1);
  if (result == -1)
    result = sub_1006D9A0(a1, a2);
  return result;
}

//----- (1006DB20) --------------------------------------------------------
int __cdecl sub_1006DB20(int a1, float *a2) {
  int v2;      // ebp
  int v3;      // ecx
  int v4;      // eax
  int v5;      // ecx
  int v6;      // edx
  int v7;      // eax
  float **v8;  // esi
  int v9;      // ebx
  double v10;  // st2
  double v11;  // st1
  double v12;  // st0
  float **v14; // esi
  int v15;     // ebx
  double v16;  // st2
  double v17;  // st1
  double v18;  // st0
  float v19;   // [esp+10h] [ebp-48h]
  float v20;   // [esp+10h] [ebp-48h]
  float v21;   // [esp+14h] [ebp-44h]
  float v22;   // [esp+14h] [ebp-44h]
  float v23;   // [esp+18h] [ebp-40h]
  float v24;   // [esp+18h] [ebp-40h]
  float v25;   // [esp+1Ch] [ebp-3Ch]
  float v26;   // [esp+1Ch] [ebp-3Ch]
  float v27;   // [esp+20h] [ebp-38h]
  float v28;   // [esp+20h] [ebp-38h]
  float v29;   // [esp+24h] [ebp-34h]
  float v30;   // [esp+24h] [ebp-34h]
  float v31;   // [esp+28h] [ebp-30h] BYREF
  float v32;   // [esp+2Ch] [ebp-2Ch]
  float v33;   // [esp+30h] [ebp-28h]
  float v34;   // [esp+34h] [ebp-24h] BYREF
  float v35;   // [esp+38h] [ebp-20h]
  float v36;   // [esp+3Ch] [ebp-1Ch]
  float v37;   // [esp+40h] [ebp-18h] BYREF
  float v38;   // [esp+44h] [ebp-14h]
  float v39;   // [esp+48h] [ebp-10h]
  float v40;   // [esp+4Ch] [ebp-Ch] BYREF
  float v41;   // [esp+50h] [ebp-8h]
  float v42;   // [esp+54h] [ebp-4h]

  v2 = 0;
  v3 = sub_1006F720(*(float *)(a1 + 236), *(float *)(a1 + 240));
  v4 = *((unsigned __int16 *)&dword_117554A0 + v3);
  v5 = 15 * v3;
  if (!dword_117554E8) {
    v14 = (float **)((char *)&unk_11750338 + 320 * v5);
    if (v4 > 0) {
      v15 = v4;
      do {
        sub_100747C0(&v34, a2, v14[4]);
        sub_100747C0(&v37, a2, v14[5]);
        sub_100747C0(&v40, a2, v14[6]);
        v16 = v40 - v34;
        v20 = v16;
        v17 = v41 - v35;
        v22 = v17;
        v18 = v42 - v36;
        v24 = v18;
        v26 = v37 - v34;
        v28 = v38 - v35;
        v30 = v39 - v36;
        v31 = v18 * v28 - v17 * v30;
        v32 = v16 * v30 - v24 * v26;
        v33 = v22 * v26 - v20 * v28;
        if (sub_1006DAF0(&v34, &v31)) {
          sub_1006D280((int)v14);
          ++v2;
        }
        v14 += 8;
        --v15;
      } while (v15);
    }
    return v2;
  }
  v6 = 32 * (v4 + 10 * v5);
  v7 = v4 - 1;
  v8 = (float **)((char *)&unk_11750318 + v6);
  if (v7 < 0)
    return v2;
  v9 = v7 + 1;
  do {
    sub_100747C0(&v34, a2, v8[4]);
    sub_100747C0(&v37, a2, v8[5]);
    sub_100747C0(&v40, a2, v8[6]);
    v10 = v40 - v34;
    v19 = v10;
    v11 = v41 - v35;
    v21 = v11;
    v12 = v42 - v36;
    v23 = v12;
    v25 = v37 - v34;
    v27 = v38 - v35;
    v29 = v39 - v36;
    v31 = v12 * v27 - v11 * v29;
    v32 = v10 * v29 - v23 * v25;
    v33 = v21 * v25 - v19 * v27;
    if (sub_1006DAF0(&v34, &v31)) {
      sub_1006D280((int)v8);
      ++v2;
    }
    v8 -= 8;
    --v9;
  } while (v9);
  return v2;
}
// 117554A0: using guessed type int dword_117554A0;
// 117554E8: using guessed type int dword_117554E8;

//----- (1006DDC0) --------------------------------------------------------
int __cdecl sub_1006DDC0(int a1) {
  float *v2;  // ebp
  int v3;     // edi
  double v4;  // st7
  double v5;  // st7
  double v6;  // st7
  int v7;     // eax
  double v8;  // st7
  double v9;  // st7
  double v10; // st7
  int v11;    // eax
  double v12; // st7
  double v13; // st7
  double v14; // st7
  int v15;    // eax
  void *v16;  // ecx
  double v17; // st7
  double v18; // st7
  double v19; // st7
  void *v20;  // ecx
  void *v21;  // ecx
  double v23; // st7
  char v24;   // c0
  double v25; // st6
  double v26; // st7
  int v28;    // [esp+18h] [ebp-20h]
  float *v29; // [esp+1Ch] [ebp-1Ch]
  float v30;  // [esp+20h] [ebp-18h] BYREF
  float v31;  // [esp+24h] [ebp-14h]
  float v32;  // [esp+28h] [ebp-10h]
  int v33;    // [esp+2Ch] [ebp-Ch] BYREF
  float v34;  // [esp+30h] [ebp-8h]
  float v35;  // [esp+34h] [ebp-4h]
  float v36;  // [esp+3Ch] [ebp+4h]
  float v37;  // [esp+3Ch] [ebp+4h]

  v2 = (float *)(a1 + 188);
  v29 = (float *)(a1 + 276);
  math_10074450((float *)(a1 + 188), (float *)(a1 + 276));
  v3 = *(_DWORD *)(a1 + 4);
  v28 = 0;
  v36 = 100.0;
  if (*(_DWORD *)(v3 + 436)) {
    v28 = 1;
    if (*(float *)(v3 + 120) == 0.0) {
      v4 = 0.0;
    } else if (*(float *)(v3 + 120) <= 0.0) {
      v4 = -1.0;
    } else {
      v4 = 1.0;
    }
    v30 = *(float *)(a1 + 476) * 0.5 * v4;
    if (*(float *)(v3 + 124) == 0.0) {
      v5 = 0.0;
    } else if (*(float *)(v3 + 124) <= 0.0) {
      v5 = -1.0;
    } else {
      v5 = 1.0;
    }
    v31 = *(float *)(a1 + 480) * 0.5 * v5;
    v32 = *(float *)(a1 + 488) - *(float *)(a1 + 484) * 0.5;
    sub_100747C0((float *)&v33, v2, &v30);
    if (sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33) >= 0.0)
      v6 = sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33);
    else
      v6 = -sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33);
    if (v6 <= 100.0)
      v36 = v6;
  } else {
    v3 = 1120403456;
  }
  v7 = *(_DWORD *)(a1 + 8);
  if (*(_DWORD *)(v7 + 436)) {
    v3 = *(_DWORD *)(a1 + 8);
    ++v28;
    if (*(float *)(v7 + 120) == 0.0)
      v8 = 0.0;
    else
      v8 = *(float *)(v3 + 120) <= 0.0 ? -1.0 : 1.0;
    v30 = *(float *)(a1 + 476) * 0.5 * v8;
    if (*(float *)(v3 + 124) == 0.0)
      v9 = 0.0;
    else
      v9 = *(float *)(v3 + 124) <= 0.0 ? -1.0 : 1.0;
    v31 = *(float *)(a1 + 480) * 0.5 * v9;
    v32 = *(float *)(a1 + 488) - *(float *)(a1 + 484) * 0.5;
    sub_100747C0((float *)&v33, v2, &v30);
    v10 = sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33) >= 0.0 ?
              sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33) :
              -sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33);
    if (v36 >= v10)
      v36 = v10;
  }
  v11 = *(_DWORD *)(a1 + 12);
  if (*(_DWORD *)(v11 + 436)) {
    v3 = *(_DWORD *)(a1 + 12);
    ++v28;
    if (*(float *)(v11 + 120) == 0.0)
      v12 = 0.0;
    else
      v12 = *(float *)(v3 + 120) <= 0.0 ? -1.0 : 1.0;
    v30 = *(float *)(a1 + 476) * 0.5 * v12;
    if (*(float *)(v3 + 124) == 0.0)
      v13 = 0.0;
    else
      v13 = *(float *)(v3 + 124) <= 0.0 ? -1.0 : 1.0;
    v31 = *(float *)(a1 + 480) * 0.5 * v13;
    v32 = *(float *)(a1 + 488) - *(float *)(a1 + 484) * 0.5;
    sub_100747C0((float *)&v33, v2, &v30);
    v14 = sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33) >= 0.0 ?
              sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33) :
              -sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33);
    if (v36 >= v14)
      v36 = v14;
  }
  v15 = *(_DWORD *)(a1 + 16);
  v16 = *(void **)(v15 + 436);
  if (v16) {
    v3 = *(_DWORD *)(a1 + 16);
    ++v28;
    if (*(float *)(v15 + 120) == 0.0)
      v17 = 0.0;
    else
      v17 = *(float *)(v3 + 120) <= 0.0 ? -1.0 : 1.0;
    v30 = *(float *)(a1 + 476) * 0.5 * v17;
    if (*(float *)(v3 + 124) == 0.0)
      v18 = 0.0;
    else
      v18 = *(float *)(v3 + 124) <= 0.0 ? -1.0 : 1.0;
    v31 = *(float *)(a1 + 480) * 0.5 * v18;
    v32 = *(float *)(a1 + 488) - *(float *)(a1 + 484) * 0.5;
    sub_100747C0((float *)&v33, v2, &v30);
    v19 = sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33) >= 0.0 ?
              sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33) :
              -sub_1006C9A0(v3 + 420, *(float *)(v3 + 432), (int)&v33);
    if (v36 >= v19)
      v36 = v19;
  }
  if (v28 > 2)
    return 0;
  if (v28 < 1)
    return 0;
  meth_DebugPrint(v16);
  if (v36 > 0.6)
    return 0;
  sub_1006B510((float *)&v33, (float *)a1, (int *)&v30);
  v37 = *(float *)(v3 + 428) * v35 + *(float *)(v3 + 424) * v34 +
        *(float *)(v3 + 420) * *(float *)&v33;
  meth_DebugPrint(v20);
  v23 = v37;
  if (v24)
    v23 = -v23;
  if (v23 > 0.1)
    return 0;
  v25 = *(float *)(a1 + 420) * *v2;
  v26 = *(float *)(a1 + 424) * *(float *)(a1 + 192) + *(float *)(a1 + 428) * *(float *)(a1 + 196);
  v30 = 0.0;
  v31 = 0.1;
  if (v26 + v25 <= 0.0)
    v31 = -0.1;
  v32 = 0.0;
  meth_DebugPrint(v21);
  sub_10074770((float *)&v33, (int)v2, &v30);
  *(float *)(a1 + 316) = *(float *)(a1 + 316) - *(float *)&v33 * -2.0;
  *(float *)(a1 + 320) = *(float *)(a1 + 320) - v34 * -2.0;
  *(float *)(a1 + 324) = *(float *)(a1 + 324) - v35 * -2.0;
  math_100742D0(v29);
  return 1;
}
// 1006E337: variable 'v16' is possibly undefined
// 1006E3A0: variable 'v20' is possibly undefined
// 1006E3BB: variable 'v24' is possibly undefined
// 1006E435: variable 'v21' is possibly undefined

//----- (1006E4C0) --------------------------------------------------------
int __cdecl sub_1006E4C0(int a1, int a2, float a3, int a4, int a5) {
  int result; // eax
  double v6;  // st7
  double v7;  // st7
  double v8;  // st6
  double v9;  // st5
  float *v10; // ecx
  int v11;    // eax
  int v12;    // edx
  double v13; // st7
  double v14; // st7
  double v16; // st6
  char v17;   // c0
  double v19; // st5
  char v20;   // c0
  double v22; // st6
  char v23;   // c0
  double v25; // st5
  char v26;   // c0
  double v28; // st6
  char v29;   // c0
  double v31; // st5
  char v32;   // c0
  double v33; // st6
  double v34; // st7
  double v35; // st6
  double v36; // st7
  float v37;  // [esp+0h] [ebp-Ch] BYREF
  float v38;  // [esp+4h] [ebp-8h]
  float v39;  // [esp+8h] [ebp-4h]
  float v40;  // [esp+14h] [ebp+8h]
  float v41;  // [esp+14h] [ebp+8h]
  int v42;    // [esp+1Ch] [ebp+10h]
  int v43;    // [esp+1Ch] [ebp+10h]
  int v44;    // [esp+1Ch] [ebp+10h]

  if (dword_1175549C == 2) {
    v10 = &v37;
    v11 = a5 + 24;
    v12 = 3;
    do {
      v13 = *(float *)(v11 - 12) + *(float *)(v11 - 24);
      v11 += 4;
      ++v10;
      --v12;
      *(v10 - 1) = (v13 + *(float *)(v11 - 4)) * 0.33333334;
    } while (v12);
    v14 = v37;
    v16 = v37;
    if (v17)
      v16 = -v16;
    v19 = v38;
    if (v20)
      v19 = -v19;
    if (v16 >= v19) {
      v28 = v38;
      if (v29)
        v28 = -v28;
      v31 = v39;
      if (v32)
        v31 = -v31;
      if (v28 < v31) {
        dword_11755498 = 0;
        dword_11755490 = 0;
        v43 = -1;
        if (v14 >= 0.0)
          v43 = 1;
        *(float *)&dword_11755494 = (double)v43 * 0.5;
        goto LABEL_29;
      }
    } else {
      v22 = v37;
      if (v23)
        v22 = -v14;
      v25 = v39;
      if (v26)
        v25 = -v25;
      if (v22 < v25) {
        dword_11755498 = 0;
        dword_11755494 = 0;
        v42 = -1;
        if (v14 >= 0.0)
          v42 = 1;
        *(float *)&dword_11755490 = (double)v42 * 0.5;
      LABEL_29:
        result = a2;
        v33 = *(float *)&dword_11755498 * *(float *)(a2 + 8) +
              *(float *)&dword_11755494 * *(float *)(a2 + 4);
        v34 = *(float *)a2 * *(float *)&dword_11755490;
        *(float *)&dword_11755490 = *(float *)(a1 + 476) * *(float *)&dword_11755490;
        *(float *)&dword_11755490 = *(float *)(a1 + 480) * *(float *)&dword_11755490;
        *(float *)&dword_1175549C = *(float *)(a1 + 484) * *(float *)&dword_1175549C;
        v35 = -(v33 + v34 - a3);
        v36 = *(float *)a2;
        v41 = v35;
        v7 = v36 * v41;
        v8 = v41;
        v9 = v41;
        goto LABEL_30;
      }
    }
    dword_11755494 = 0;
    dword_11755490 = 0;
    v44 = -1;
    if (v14 >= 0.0)
      v44 = 1;
    *(float *)&dword_11755498 = (double)v44 * 0.5;
    goto LABEL_29;
  }
  result = a2;
  v6 = *(float *)a2;
  v40 = -(*(float *)(a4 + 4) * *(float *)(a2 + 4) + *(float *)(a4 + 8) * *(float *)(a2 + 8) +
          v6 * *(float *)a4 - a3);
  v7 = v6 * v40;
  v8 = v40;
  v9 = v40;
LABEL_30:
  *(float *)&dword_11754E40 = v7;
  *(float *)&dword_11754E44 = v8 * *(float *)(result + 4);
  *(float *)&dword_11754E48 = v9 * *(float *)(result + 8);
  return result;
}
// 1006E54C: variable 'v17' is possibly undefined
// 1006E563: variable 'v20' is possibly undefined
// 1006E581: variable 'v23' is possibly undefined
// 1006E598: variable 'v26' is possibly undefined
// 1006E606: variable 'v29' is possibly undefined
// 1006E61D: variable 'v32' is possibly undefined
// 11754E40: using guessed type int dword_11754E40;
// 11754E44: using guessed type int dword_11754E44;
// 11754E48: using guessed type int dword_11754E48;
// 11755490: using guessed type int dword_11755490;
// 11755494: using guessed type int dword_11755494;
// 11755498: using guessed type int dword_11755498;
// 1175549C: using guessed type int dword_1175549C;

//----- (1006E760) --------------------------------------------------------
int __cdecl sub_1006E760(int a1, float *a2) {
  int *v2;             // ebx
  int v3;              // ebp
  double v4;           // st2
  double v5;           // st1
  double v6;           // st0
  void *v7;            // ecx
  double v9;           // st7
  char v10;            // c0
  double v12;          // st7
  char v13;            // c0
  double v15;          // st7
  char v16;            // c0
  double v18;          // st7
  char v19;            // c0
  int v20;             // edi
  char v22;            // c0
  double v23;          // st7
  char v25;            // c0
  double v26;          // st7
  char v28;            // c0
  double v29;          // st7
  double v30;          // st7
  void *v31;           // ecx
  int v32;             // eax
  int v33;             // edx
  double v34;          // st7
  double v35;          // st6
  double v36;          // st5
  int v37;             // eax
  int v38;             // ecx
  double v39;          // st4
  double v40;          // st3
  double v41;          // rt1
  double v42;          // st7
  unsigned __int8 v43; // al
  float v45;           // [esp+18h] [ebp-78h]
  int v46;             // [esp+1Ch] [ebp-74h]
  int v47;             // [esp+20h] [ebp-70h]
  int v48;             // [esp+20h] [ebp-70h]
  int v49;             // [esp+20h] [ebp-70h]
  int v50;             // [esp+24h] [ebp-6Ch]
  int v51;             // [esp+28h] [ebp-68h]
  int v52;             // [esp+2Ch] [ebp-64h]
  int v53;             // [esp+30h] [ebp-60h] BYREF
  float v54;           // [esp+34h] [ebp-5Ch]
  float v55;           // [esp+38h] [ebp-58h]
  float v56;           // [esp+3Ch] [ebp-54h]
  float v57;           // [esp+40h] [ebp-50h]
  float v58;           // [esp+44h] [ebp-4Ch]
  float v59;           // [esp+48h] [ebp-48h]
  float v60;           // [esp+4Ch] [ebp-44h]
  float v61;           // [esp+50h] [ebp-40h]
  int v62;             // [esp+54h] [ebp-3Ch] BYREF
  float v63;           // [esp+58h] [ebp-38h]
  float v64;           // [esp+5Ch] [ebp-34h]
  float v65;           // [esp+64h] [ebp-2Ch]
  float v66;           // [esp+68h] [ebp-28h]
  int v67;             // [esp+6Ch] [ebp-24h] BYREF
  float v68;           // [esp+70h] [ebp-20h]
  float v69;           // [esp+74h] [ebp-1Ch]
  float v70[3];        // [esp+78h] [ebp-18h] BYREF
  float v71[3];        // [esp+84h] [ebp-Ch] BYREF

  v2 = (int *)dword_11754E38;
  v52 = 0;
  v46 = 0;
  v51 = dword_11754E38;
  if (dword_11754E38) {
    while (1) {
      v3 = *v2;
      sub_100747C0((float *)&v67, a2, *(float **)(*v2 + 16));
      sub_100747C0(v70, a2, *(float **)(v3 + 20));
      sub_100747C0(v71, a2, *(float **)(v3 + 24));
      v4 = v71[0] - *(float *)&v67;
      v59 = v4;
      v5 = v71[1] - v68;
      v60 = v5;
      v6 = v71[2] - v69;
      v61 = v6;
      v56 = v70[0] - *(float *)&v67;
      v57 = v70[1] - v68;
      v58 = v70[2] - v69;
      *(float *)&v53 = v6 * v57 - v5 * v58;
      v54 = v4 * v58 - v61 * v56;
      v55 = v60 * v56 - v59 * v57;
      if (sub_1006DAF0((float *)&v67, (float *)&v53))
        break;
    LABEL_34:
      v2 = (int *)v2[1];
      v51 = (int)v2;
      if (!v2)
        goto LABEL_35;
    }
    math_10074250((float *)&v53);
    v7 = (void *)++v46;
    dword_1175549C = 0;
    v45 = *(float *)&v53 * *(float *)&v67 + v54 * v68 + v55 * v69;
    if (gGameMode == 4) {
      v9 = *(float *)&v53;
      if (v10)
        v9 = -v9;
      if (v9 > 0.99900001)
        goto LABEL_40;
      v12 = v54;
      if (v13)
        v12 = -v12;
      if (v12 > 0.99900001)
        goto LABEL_40;
      v15 = v55;
      if (v16)
        v15 = -v15;
      if (v15 > 0.99900001) {
      LABEL_40:
        v20 = 1;
        dword_1175549C = 1;
        meth_DebugPrint(v7);
        v50 = 1;
        goto LABEL_18;
      }
      v18 = v45;
      if (v19)
        v18 = -v18;
      if (v18 < 0.5) {
        meth_DebugPrint(v7);
        v50 = 0;
        dword_1175549C = 2;
      }
    }
    v20 = 1;
  LABEL_18:
    meth_DebugPrint(v7);
    v58 = v45 * v55;
    if (v22)
      v47 = -1;
    else
      v47 = 1;
    v23 = (double)v47;
    v48 = -1;
    *(float *)&v62 = v23 * 0.5;
    if (!v25)
      v48 = 1;
    v26 = (double)v48;
    v49 = -1;
    v63 = v26 * 0.5;
    if (!v28)
      v49 = 1;
    *(float *)&dword_11755490 = *(float *)(a1 + 476) * *(float *)&v62;
    v29 = *(float *)(a1 + 480) * v63;
    v64 = (double)v49 * 0.5;
    *(float *)&dword_11755494 = v29;
    v30 = *(float *)(a1 + 484) * v64 + *(float *)(a1 + 488);
    dword_11754E3C = v3;
    *(float *)&dword_11755498 = v30;
    sub_1006E4C0(a1, (int)&v53, v45, (int)&v62, (int)&v67);
    if (*(float *)(a1 + 228) > 0.5)
      v20 = 0;
    if (v20)
      meth_DebugPrint(v31);
    if (dword_1175549C == 1)
      v32 = sub_1006C9D0(a1, (float *)dword_11754E3C, v20, v50);
    else
      v32 = sub_1006CCD0(a1, (int)&dword_11755490, dword_11754E3C, v20, 0.0);
    if (v32) {
      v33 = *(_DWORD *)(a1 + 300);
      v34 = *(float *)(a1 + 352);
      v35 = *(float *)(a1 + 348);
      v36 = ((v35 - *(float *)(a1 + 280)) * *(float *)(v3 + 4) +
             (v34 - *(float *)(a1 + 284)) * *(float *)(v3 + 8) +
             (*(float *)(a1 + 344) - *(float *)(a1 + 276)) * *(float *)v3) *
            1.1;
      v37 = *(_DWORD *)(a1 + 304);
      v38 = *(_DWORD *)(a1 + 308);
      v52 = 1;
      v39 = v36 * *(float *)(v3 + 8);
      v40 = v36 * *(float *)v3;
      v65 = v36 * *(float *)(v3 + 4);
      v66 = v39;
      v41 = v34 - v66;
      v42 = *(float *)(a1 + 344) - v40;
      *(float *)(a1 + 348) = v35 - v65;
      *(float *)(a1 + 352) = v41;
      *(float *)(a1 + 344) = v42;
      *(_DWORD *)(a1 + 368) = v33;
      *(_DWORD *)(a1 + 372) = v37;
      *(_DWORD *)(a1 + 376) = v38;
      math_100742D0((float *)(a1 + 344));
      math_10074450((float *)(a1 + 188), (float *)(a1 + 344));
      v2 = (int *)v51;
    }
    goto LABEL_34;
  }
LABEL_35:
  if ((_WORD)v46) {
    *(_BYTE *)(a1 + 512) = 0;
  } else {
    v43 = *(_BYTE *)(a1 + 512);
    if (v43 < 0x28u) {
      *(_BYTE *)(a1 + 512) = v43 + 1;
      return v52;
    }
  }
  return v52;
}
// 1006E902: variable 'v10' is possibly undefined
// 1006E92A: variable 'v13' is possibly undefined
// 1006E952: variable 'v16' is possibly undefined
// 1006E97A: variable 'v19' is possibly undefined
// 1006E9B0: variable 'v7' is possibly undefined
// 1006E9E3: variable 'v22' is possibly undefined
// 1006EA12: variable 'v25' is possibly undefined
// 1006EA39: variable 'v28' is possibly undefined
// 1006EADC: variable 'v31' is possibly undefined
// 1006EB15: variable 'v50' is possibly undefined
// 100AA010: using guessed type int g_GameMode;
// 11754E38: using guessed type int dword_11754E38;
// 11755490: using guessed type int dword_11755490;
// 11755494: using guessed type int dword_11755494;
// 11755498: using guessed type int dword_11755498;
// 1175549C: using guessed type int dword_1175549C;

//----- (1006EC80) --------------------------------------------------------
int __cdecl sub_1006EC80(int a1, int a2) {
  void *v2;       // ecx
  void *v4;       // ecx
  const void *v5; // ebp
  void *v6;       // ecx
  double v7;      // st7
  void *v8;       // ecx
  double v9;      // st7
  double v10;     // st6
  double v11;     // st5
  double v12;     // st7
  double v13;     // rtt
  int result;     // eax
  float v15;      // [esp+10h] [ebp-4Ch] BYREF
  float v16;      // [esp+14h] [ebp-48h]
  float v17;      // [esp+18h] [ebp-44h]
  float v18[14];  // [esp+1Ch] [ebp-40h] BYREF
  float v19;      // [esp+54h] [ebp-8h]
  float v20;      // [esp+64h] [ebp+8h]
  float v21;      // [esp+64h] [ebp+8h]
  float v22;      // [esp+64h] [ebp+8h]

  dword_11754E38 = 0;
  dword_117554E4 = (int)&unk_11754E50;
  dword_11755490 = 0;
  dword_11755494 = 0;
  dword_11755498 = 0;
  dword_11754E40 = 0;
  dword_11754E44 = 0;
  dword_11754E48 = 0;
  dword_1175549C = 0;
  dword_11754E3C = 0;
  meth_DebugPrint(v2);
  v17 = 0.1;
  v16 = 0.1;
  v15 = 0.1;
  sub_10074B70((float *)(a2 + 188), (int)v18, (int)&v15);
  sub_1006DB20(a2, v18);
  meth_DebugPrint(v4);
  v20 = 0.033333335;
  v5 = (const void *)(a2 + 344);
  v15 = 1.0 / *(float *)(a2 + 476);
  v16 = 1.0 / *(float *)(a2 + 480);
  v17 = 1.0 / *(float *)(a2 + 484);
  do {
    if (sub_1006DDC0(a2))
      meth_DebugPrint(v6);
    sub_1006FFD0();
    math_100745F0(a2 + 344, a2 + 276, 0.0083333338);
    math_10074450((float *)(a2 + 188), (float *)(a2 + 344));
    sub_10074B70((float *)(a2 + 188), (int)v18, (int)&v15);
    v19 = v19 - *(float *)(a2 + 488);
    if (sub_1006E760(a2, v18)) {
      math_100742D0((float *)(a2 + 344));
      math_10074450((float *)(a2 + 188), (float *)(a2 + 344));
    }
    v7 = v20 - 0.0083333338;
    qmemcpy((void *)(a2 + 276), v5, 0x44u);
    v20 = v7;
  } while (v7 > 0.0020000001);
  math_10074450((float *)(a2 + 188), (float *)(a2 + 344));
  meth_DebugPrint(v8);
  v9 = *(float *)(a2 + 228);
  qmemcpy((void *)(a2 + 276), v5, 0x44u);
  if (*(void(__cdecl **)(int))(a1 + 3848) == sub_10065620) {
    if (v9 >= 0.5) {
      *(_DWORD *)(a2 + 504) = 35;
      goto LABEL_18;
    }
    if (*(int *)(a2 + 504) < 0) {
      *(_DWORD *)(a2 + 504) = -1;
      --*(_DWORD *)(a2 + 504);
      goto LABEL_18;
    }
  LABEL_16:
    --*(_DWORD *)(a2 + 504);
    goto LABEL_18;
  }
  if (v9 >= 0.5) {
    *(_DWORD *)(a2 + 504) = 120;
    goto LABEL_18;
  }
  if (*(int *)(a2 + 504) < 0)
    *(_DWORD *)(a2 + 504) = -1;
  v10 = *(float *)(a2 + 240) - *(float *)(a1 + 10932);
  v11 = *(float *)(a2 + 236) - *(float *)(a1 + 10928);
  v12 = *(float *)(a2 + 244) - *(float *)(a1 + 10936);
  v21 = v11;
  v13 = v11 * v21;
  v22 = v12;
  if (v13 + v10 * v10 + v12 * v22 < 1.0)
    goto LABEL_16;
LABEL_18:
  *(_DWORD *)(a1 + 10928) = *(_DWORD *)(a2 + 236);
  result = *(_DWORD *)(a2 + 240);
  *(_DWORD *)(a1 + 10932) = result;
  *(_DWORD *)(a1 + 10936) = *(_DWORD *)(a2 + 244);
  return result;
}
// 1006ECDE: variable 'v2' is possibly undefined
// 1006ED3A: variable 'v4' is possibly undefined
// 1006ED92: variable 'v6' is possibly undefined
// 1006EE55: variable 'v8' is possibly undefined
// 11754E38: using guessed type int dword_11754E38;
// 11754E40: using guessed type int dword_11754E40;
// 11754E44: using guessed type int dword_11754E44;
// 11754E48: using guessed type int dword_11754E48;
// 11755490: using guessed type int dword_11755490;
// 11755494: using guessed type int dword_11755494;
// 11755498: using guessed type int dword_11755498;
// 1175549C: using guessed type int dword_1175549C;
// 117554E4: using guessed type int dword_117554E4;

//----- (1006EF80) --------------------------------------------------------
void __cdecl sub_1006EF80(int a1, float *a2) {
  int v4;    // ebp
  int v5;    // ecx
  int v6;    // ebx
  double v7; // st7
  double v8; // rt0
  float v9;  // [esp+0h] [ebp-20h]
  int v10;   // [esp+24h] [ebp+4h]
  int v11;   // [esp+28h] [ebp+8h]

  a2[2] = *(float *)(a1 + 132) * -110.0;
  a2[3] = *(float *)(a1 + 136) * -110.0;
  a2[4] = *(float *)(a1 + 140) * -110.0;
  v4 = *(char *)(*(_DWORD *)(a1 + 8) + 416);
  v9 = *(float *)(a1 + 132) * *(float *)(a1 + 132) + *(float *)(a1 + 136) * *(float *)(a1 + 136) +
       *(float *)(a1 + 140) * *(float *)(a1 + 140);
  v5 = *(char *)(*(_DWORD *)(a1 + 16) + 416);
  v6 = *(char *)(*(_DWORD *)(a1 + 4) + 416);
  v10 = *(char *)(*(_DWORD *)(a1 + 12) + 416);
  v11 = v5;
  if (sqrt_(v9) > 4.0 && gChosenWeather1 != 3 && (v6 == 4 || v4 == 4 || v10 == 4 || v11 == 4)) {
    v7 = *(float *)(a1 + 140) * -220.0 + a2[4];
    v8 = *(float *)(a1 + 132) * -220.0 + a2[2];
    a2[3] = *(float *)(a1 + 136) * -220.0 + a2[3];
    a2[4] = v7;
    a2[2] = v8;
  }
}
// 104BBE08: using guessed type int dword_104BBE08;

//----- (1006F0C0) --------------------------------------------------------
double __cdecl sub_1006F0C0(int a2, int a3) {
  float v4;            // ecx
  float v5;            // ecx
  float v6;            // edx
  __int16 v7;          // ax
  int v8;              // esi
  int v9;              // eax
  float *v10;          // esi
  int v11;             // ebx
  double v12;          // st7
  double v13;          // st7
  double v15;          // st6
  char v16;            // c0
  unsigned __int8 v18; // c0
  unsigned __int8 v19; // c3
  float v21;           // [esp+8h] [ebp-34h]
  float v22;           // [esp+Ch] [ebp-30h] BYREF
  float v23;           // [esp+10h] [ebp-2Ch]
  float v24;           // [esp+14h] [ebp-28h]
  float v25;           // [esp+18h] [ebp-24h] BYREF
  float v26;           // [esp+1Ch] [ebp-20h]
  float v27;           // [esp+20h] [ebp-1Ch]
  float v28;           // [esp+24h] [ebp-18h] BYREF
  float v29;           // [esp+28h] [ebp-14h]
  float v30;           // [esp+2Ch] [ebp-10h]
  int v31[3];          // [esp+30h] [ebp-Ch] BYREF
  float v32;           // [esp+44h] [ebp+8h]

  v21 = 100.0;
  v4 = *(float *)(a3 + 124);
  v25 = *(float *)(a3 + 120);
  v26 = v4;
  v31[0] = 0;
  v31[1] = 0;
  v31[2] = -1082130432;
  v27 = 0.0;
  sub_100747C0(&v22, (float *)(a2 + 188), &v25);
  sub_10074770(&v28, a2 + 188, (float *)v31);
  v5 = v23;
  v6 = v22;
  *(_DWORD *)(a3 + 412) = 0;
  v7 = sub_1006F720(v6, v5);
  v8 = 75 * v7;
  v9 = (unsigned __int16)v7;
  LOWORD(v9) = *((_WORD *)&dword_117554A0 + v7);
  v10 = (float *)((char *)&unk_11750338 + 64 * v8);
  if ((_WORD)v9) {
    v11 = v9;
    do {
      v12 = sub_1006C9A0((int)v10, v10[3], (int)&v22);
      if (v12 > -2.0 && v12 < 2.0) {
        v13 = v29 * v10[1] + v30 * v10[2] + v28 * *v10;
        v15 = v13;
        if (v16)
          v15 = -v13;
        if (v15 > 0.001) {
          v32 = -((v23 * v10[1] + v24 * v10[2] + v22 * *v10 + v10[3]) / v13);
          v25 = v32 * v28 + v22;
          v26 = v32 * v29 + v23;
          v27 = v32 * v30 + v24;
          if (!(v18 | v19) && v32 < 2.0 && v32 < (double)v21 && v10[2] > 0.2 &&
              sub_1006C740((int)v10, (int)&v25)) {
              *(_DWORD *)(a3 + 412) = v10;
              v21 = v32;
              *(_BYTE *)(a3 + 416) = *((_BYTE *)v10 + 30);
              *(float *)(a3 + 420) = *v10;
              *(float *)(a3 + 424) = v10[1];
              *(float *)(a3 + 428) = v10[2];
              *(float *)(a3 + 432) = v10[3];
          }
        }
      }
      v10 += 8;
      --v11;
    } while (v11);
  }
  return v21;
}
// 1006F1D6: variable 'v16' is possibly undefined
// 1006F266: variable 'v18' is possibly undefined
// 1006F266: variable 'v19' is possibly undefined
// 117554A0: using guessed type int dword_117554A0;

//----- (1006F310) --------------------------------------------------------
double __cdecl sub_1006F310(float *a2) {
  __int16 v3;          // ax
  int v4;              // esi
  int v5;              // eax
  float *v6;           // esi
  int v7;              // ebx
  double v8;           // st7
  double v9;           // st7
  char v11;            // c0
  double v12;          // st6
  double v13;          // st7
  double v14;          // st5
  double v15;          // rt2
  unsigned __int8 v17; // c0
  unsigned __int8 v18; // c3
  float v20;           // [esp+8h] [ebp-10h]
  float v21[3];        // [esp+Ch] [ebp-Ch] BYREF
  int v22;             // [esp+1Ch] [ebp+4h]
  int v23;             // [esp+1Ch] [ebp+4h]

  v20 = 100.0;
  v3 = sub_1006F720(*a2, a2[1]);
  v4 = 75 * v3;
  v5 = (unsigned __int16)v3;
  LOWORD(v5) = *((_WORD *)&dword_117554A0 + v3);
  v6 = (float *)((char *)&unk_11750338 + 64 * v4);
  if ((_WORD)v5) {
    v7 = v5;
    do {
      v8 = sub_1006C9A0((int)v6, v6[3], (int)a2);
      if (v8 > -2.0 && v8 < 2.0) {
        v9 = v6[2] * -1.0;
        *(float *)&v22 = v9;
        if (v11)
          v9 = -v9;
        if (v9 > 0.001) {
          v12 = *a2 * *v6 + v6[2] * a2[2] + v6[1] * a2[1] + v6[3];
          v13 = a2[1] + 0.0;
          v21[0] = 0.0;
          v14 = -(v12 / *(float *)&v22);
          *(float *)&v23 = v14;
          v15 = v14 * -1.0 + a2[2];
          v21[0] = (float)0.0 + *a2;
          v21[1] = v13;
          v21[2] = v15;
          if (!(v17 | v18) && *(float *)&v23 < 2.0 && *(float *)&v23 < (double)v20 && v6[2] > 0.2 &&
              sub_1006C740((int)v6, (int)v21)) {
              v20 = v14;
          }
        }
      }
      v6 += 8;
      --v7;
    } while (v7);
  }
  return v20;
}
// 1006F3A2: variable 'v11' is possibly undefined
// 1006F42A: variable 'v17' is possibly undefined
// 1006F42A: variable 'v18' is possibly undefined
// 117554A0: using guessed type int dword_117554A0;

//----- (1006F4A0) --------------------------------------------------------
void __usercall sub_1006F4A0(double a1 @<st0>, _DWORD *a2) {
  int v2;             // esi
  int i;              // ebx
  unsigned __int8 v5; // c0
  unsigned __int8 v6; // c3

  v2 = (int)a2;
  for (i = 0; i < 4; ++i) {
    switch (i) {
    case 0:
      v2 = a2[1];
      break;
    case 1:
      v2 = a2[2];
      break;
    case 2:
      v2 = a2[3];
      break;
    case 3:
      v2 = a2[4];
      break;
    default:
      break;
    }
    a1 = -sub_1006F0C0(a1, (int)a2, v2);
    *(float *)(v2 + 472) = a1;
    if (!(v5 | v6))
      a1 = 0.0;
    if (a1 >= -0.40000001)
      *(float *)(v2 + 128) = a1;
    else
      *(_DWORD *)(v2 + 128) = -1093874483;
  }
}
// 1006F4D3: inconsistent fpu stack
// 1006F4F1: variable 'v5' is possibly undefined
// 1006F4F1: variable 'v6' is possibly undefined

//----- (1006F540) --------------------------------------------------------
int __cdecl sub_1006F540(int a1) {
  float *v1;  // edx
  int i;      // ebp
  int v3;     // ecx
  int v4;     // eax
  __int16 v5; // di
  double v6;  // st7
  double v7;  // st7
  double v8;  // st6
  int result; // eax

  v1 = *(float **)(a1 + 24);
  for (i = 0; i < 4; ++i) {
    v1[3] = 0.0;
    v1[2] = 0.0;
    if (i) {
      if (i == 1) {
        v3 = *(_DWORD *)(a1 + 8);
      } else if (i == 2) {
        v3 = *(_DWORD *)(a1 + 12);
      } else {
        v3 = *(_DWORD *)(a1 + 16);
      }
    } else {
      v3 = *(_DWORD *)(a1 + 4);
    }
    v4 = *(_DWORD *)(v3 + 436);
    v5 = *(_WORD *)(v3 + 436);
    v6 = *(float *)(v3 + 472);
    if (v4 < 100)
      *(_DWORD *)(v3 + 436) = v4 + 1;
    if (v6 <= -0.3999000134110451) {
      v6 = -0.30000001;
      *(_DWORD *)(v3 + 436) = 0;
    }
    if (v6 > 0.0)
      v6 = 0.0;
    v7 = v6 - -0.30000001;
    if (v7 < 0.0)
      v7 = 0.0;
    if (v7 == 0.0) {
      v8 = 0.0;
    } else if (v7 <= 0.0) {
      v8 = -1.0;
    } else {
      v8 = 1.0;
    }
    v1[4] = v7 * v7 * v8 * *(float *)(a1 + 440);
    result = *(_DWORD *)(v3 + 436);
    v1 = *(float **)v1;
    if (result) {
      if (!v5)
        *(_BYTE *)(a1 + 520) = 0x80;
    }
  }
  return result;
}

//----- (1006F650) --------------------------------------------------------
void __cdecl sub_1006F650(int a1) {
  float *v1;  // edi
  int i;      // ebx
  int v3;     // eax
  double v4;  // st7
  char v5[8]; // [esp+10h] [ebp-Ch] BYREF
  float v6;   // [esp+18h] [ebp-4h]

  v1 = *(float **)(a1 + 24);
  for (i = 0; i < 4; ++i) {
    v1[3] = 0.0;
    v1[2] = 0.0;
    if (i) {
      if (i == 1) {
        sub_1006B340((int)v5, a1, *(_DWORD *)(a1 + 8));
        v3 = *(_DWORD *)(a1 + 8);
      } else if (i == 2) {
        sub_1006B340((int)v5, a1, *(_DWORD *)(a1 + 12));
        v3 = *(_DWORD *)(a1 + 12);
      } else {
        sub_1006B340((int)v5, a1, *(_DWORD *)(a1 + 16));
        v3 = *(_DWORD *)(a1 + 16);
      }
    } else {
      sub_1006B340((int)v5, a1, *(_DWORD *)(a1 + 4));
      v3 = *(_DWORD *)(a1 + 4);
    }
    if (*(_DWORD *)(v3 + 436)) {
      if (v6 >= 0.0)
        v4 = *(float *)(a1 + 444) * v6;
      else
        v4 = 0.0;
    } else {
      v4 = 0.0;
    }
    v1[4] = v4;
    v1 = *(float **)v1;
  }
}

//----- (1006F720) --------------------------------------------------------
__int16 __cdecl sub_1006F720(float a1, float a2) {
  unsigned int v2;    // ebx
  int *v3;            // esi
  int v4;             // edi
  int v5;             // eax
  int *v6;            // ecx
  int v7;             // ebp
  int v8;             // edx
  __int16 v9;         // di
  char *v10;          // esi
  unsigned __int16 i; // ax
  float *v12;         // ecx
  char v13;           // dl
  float *v14;         // eax
  double v15;         // st7
  double v16;         // st6
  double v17;         // st5
  float *v18;         // ecx
  double v19;         // st5
  double v20;         // st4
  float *v21;         // eax
  double v22;         // rt0
  double v23;         // st6
  int v25;            // [esp+0h] [ebp-10h]
  float v26;          // [esp+4h] [ebp-Ch]
  float v27;          // [esp+8h] [ebp-8h]

  ++dword_117554E0;
  v2 = 0x40000000;
  v3 = dword_117554C8;
  v4 = (((__int64)a2 / 32) << 6) + (__int64)a1 / 32;
  v5 = 0;
  v6 = &dword_117554D8;
  do {
    if (*(unsigned __int16 *)v6 == (__int16)v4) {
      dword_117554C8[v5] = dword_117554E0;
      return v5;
    }
    if (*v3 >= v2) {
      v7 = v25;
    } else {
      v7 = v5;
      v2 = *v3;
      v25 = v5;
    }
    v6 = (int *)((char *)v6 + 2);
    ++v5;
    ++v3;
  } while ((int)v6 < (int)&dword_117554E0);
  v8 = dword_117554E0;
  *((_WORD *)&dword_117554D8 + v7) = v4;
  dword_117554C8[v7] = v8;
  v9 = 0;
  v10 = (char *)&unk_11750338 + 4800 * v7;
  a2 = COERCE_FLOAT(sub_10002DE0(a1, a2));
  if (a2 != 0.0) {
    for (i = sub_10002EF0((unsigned __int16 *)&a2); i; i = sub_10002EF0((unsigned __int16 *)&a2)) {
      *((_DWORD *)v10 + 4) =
          *(_DWORD *)&gUnk06594.gap1C8[18196] +
          12 * *(unsigned __int16 *)(*(_DWORD *)&gUnk06594.gap1C8[18188] + 8 * i);
      *((_DWORD *)v10 + 5) =
          *(_DWORD *)&gUnk06594.gap1C8[18196] +
          12 * *(unsigned __int16 *)(*(_DWORD *)&gUnk06594.gap1C8[18188] + 8 * i + 2);
      *((_DWORD *)v10 + 6) =
          *(_DWORD *)&gUnk06594.gap1C8[18196] +
          12 * *(unsigned __int16 *)(*(_DWORD *)&gUnk06594.gap1C8[18188] + 8 * i + 4);
      v12 = (float *)*((_DWORD *)v10 + 5);
      v13 = *(_BYTE *)(gUnk06594.field_495C + i) & 7;
      *((_WORD *)v10 + 14) = i;
      v14 = (float *)*((_DWORD *)v10 + 4);
      v10[30] = v13;
      v15 = *v12 - *v14;
      v16 = v12[1] - v14[1];
      v17 = v12[2];
      v18 = (float *)*((_DWORD *)v10 + 6);
      v19 = v17 - v14[2];
      v26 = *v18 - *v14;
      v27 = v18[1] - v14[1];
      v20 = v18[2] - v14[2];
      *(float *)v10 = v20 * v16 - v27 * v19;
      *((float *)v10 + 1) = v26 * v19 - v20 * v15;
      *((float *)v10 + 2) = v27 * v15 - v26 * v16;
      math_10074250((float *)v10);
      v21 = (float *)*((_DWORD *)v10 + 4);
      ++v9;
      v22 = *(float *)v10 * *v21 + v21[1] * *((float *)v10 + 1);
      v23 = v21[2] * *((float *)v10 + 2);
      v10 += 32;
      *((float *)v10 - 5) = -(v22 + v23);
    }
  }
  *((_WORD *)&dword_117554A0 + v7) = v9;
  LOWORD(v5) = v7;
  return v5;
}
// 1006F789: variable 'v25' is possibly undefined
// 117554A0: using guessed type int dword_117554A0;
// 117554C8: using guessed type int dword_117554C8[];
// 117554D8: using guessed type int dword_117554D8;
// 117554E0: using guessed type int dword_117554E0;

//----- (1006F950) --------------------------------------------------------
int __cdecl sub_1006F950(float *a1, float *a2, float *a3, float *a4) {
  double v5;  // st7
  char v6;    // c0
  double v8;  // st7
  char v9;    // c0
  double v11; // st7
  char v12;   // c0
  double v14; // st7
  char v15;   // c0
  double v17; // st7
  char v18;   // c0
  double v20; // st7
  char v21;   // c0
  double v23; // st6
  char v24;   // c0
  double v26; // st5
  char v27;   // c0
  double v29; // st4
  char v30;   // c0
  bool v31;   // si
  double v32; // st4
  bool v33;   // al
  double v35; // st4
  bool v36;   // si
  char v37;   // c0
  bool v38;   // al
  double v40; // st4
  bool v41;   // si
  char v42;   // c0
  bool v43;   // si
  double v44; // st4
  bool v45;   // si
  double v46; // st4
  bool v47;   // si
  double v48; // st4
  bool v49;   // si
  double v50; // st4
  bool v51;   // si
  double v52; // st4
  bool v53;   // si
  double v54; // st4
  bool v55;   // si
  double v56; // st4
  char v57;   // si
  double v58; // st4
  char v59;   // si
  double v60; // st4
  char v61;   // si
  double v62; // st4
  char v63;   // si
  double v64; // st5
  int result; // eax
  float v66;  // [esp+Ch] [ebp-24h]
  float v67;  // [esp+10h] [ebp-20h]
  float v68;  // [esp+14h] [ebp-1Ch]
  float v69;  // [esp+18h] [ebp-18h]
  float v70;  // [esp+1Ch] [ebp-14h]
  float v71;  // [esp+20h] [ebp-10h]

  if (*a1 >= 0.0)
    v66 = *a1;
  else
    v66 = -*a1;
  v5 = a1[1];
  if (v6)
    v5 = -v5;
  v67 = v5;
  v8 = a1[2];
  if (v9)
    v8 = -v8;
  v68 = v8;
  v11 = a1[3];
  if (v12)
    v11 = -v11;
  v69 = v11;
  v14 = a1[4];
  if (v15)
    v14 = -v14;
  v70 = v14;
  v17 = a1[5];
  if (v18)
    v17 = -v17;
  v71 = v17;
  v20 = a1[6];
  if (v21)
    v20 = -v20;
  v23 = a1[7];
  if (v24)
    v23 = -v23;
  v26 = a1[8];
  if (v27)
    v26 = -v26;
  v29 = *a2;
  if (v30)
    v29 = -v29;
  v31 = v29 <= v68 * a4[2] + v67 * a4[1] + *a4 * v66 + *a3;
  v32 = a1[6] * a2[2] + *a2 * *a1 + a2[1] * a1[3];
  if (v32 < 0.0)
    v32 = -v32;
  v33 = v32 <= v69 * a3[1] + v20 * a3[2] + *a3 * v66 + *a4;
  v35 = a2[1];
  v36 = v33 && v31;
  if (v37)
    v35 = -v35;
  v38 = v35 <= v71 * a4[2] + v70 * a4[1] + *a4 * v69 + a3[1];
  v40 = a2[2];
  v41 = v38 && v36;
  if (v42)
    v40 = -v40;
  v43 = v40 <= v26 * a4[2] + v23 * a4[1] + *a4 * v20 + a3[2] && v41;
  v44 = *a2 * a1[1] + a1[7] * a2[2] + a2[1] * a1[4];
  if (v44 < 0.0)
    v44 = -v44;
  v45 = v44 <= v70 * a3[1] + v23 * a3[2] + *a3 * v67 + a4[1] && v43;
  v46 = *a2 * a1[2] + a1[8] * a2[2] + a2[1] * a1[5];
  if (v46 < 0.0)
    v46 = -v46;
  v47 = v46 <= v71 * a3[1] + v26 * a3[2] + *a3 * v68 + a4[2] && v45;
  v48 = a2[2] * a1[3] - a1[6] * a2[1];
  if (v48 < 0.0)
    v48 = -v48;
  v49 = v48 <= v20 * a3[1] + v69 * a3[2] + v67 * a4[2] + v68 * a4[1] && v47;
  v50 = a2[2] * a1[4] - a1[7] * a2[1];
  if (v50 < 0.0)
    v50 = -v50;
  v51 = v50 <= v23 * a3[1] + v70 * a3[2] + v66 * a4[2] + *a4 * v68 && v49;
  v52 = a2[2] * a1[5] - a1[8] * a2[1];
  if (v52 < 0.0)
    v52 = -v52;
  v53 = v52 <= v26 * a3[1] + v71 * a3[2] + v66 * a4[1] + *a4 * v67 && v51;
  v54 = *a2 * a1[6] - *a1 * a2[2];
  if (v54 < 0.0)
    v54 = -v54;
  v55 = v54 <= v66 * a3[2] + v70 * a4[2] + v71 * a4[1] + *a3 * v20 && v53;
  v56 = *a2 * a1[7] - a2[2] * a1[1];
  if (v56 < 0.0)
    v56 = -v56;
  v57 = (v56 <= v67 * a3[2] + v69 * a4[2] + *a4 * v71 + *a3 * v23) & v55;
  v58 = *a2 * a1[8] - a2[2] * a1[2];
  if (v58 < 0.0)
    v58 = -v58;
  v59 = (v58 <= v68 * a3[2] + v69 * a4[1] + *a4 * v70 + *a3 * v26) & v57;
  v60 = *a1 * a2[1] - *a2 * a1[3];
  if (v60 < 0.0)
    v60 = -v60;
  v61 = (v60 <= v66 * a3[1] + v23 * a4[2] + v26 * a4[1] + *a3 * v69) & v59;
  v62 = a2[1] * a1[1] - *a2 * a1[4];
  if (v62 < 0.0)
    v62 = -v62;
  v63 = (v62 <= v67 * a3[1] + v20 * a4[2] + *a4 * v26 + *a3 * v70) & v61;
  v64 = a2[1] * a1[2] - *a2 * a1[5];
  if (v64 < 0.0)
    v64 = -v64;
  if (v64 > v68 * a3[1] + v20 * a4[1] + *a4 * v23 + *a3 * v71)
    result = 0;
  else
    result = v63 & 1;
  return result;
}
// 1006F950: too many cbuild loops
// 1006F98A: variable 'v6' is possibly undefined
// 1006F9A3: variable 'v9' is possibly undefined
// 1006F9BC: variable 'v12' is possibly undefined
// 1006F9D5: variable 'v15' is possibly undefined
// 1006F9EE: variable 'v18' is possibly undefined
// 1006FA07: variable 'v21' is possibly undefined
// 1006FA1C: variable 'v24' is possibly undefined
// 1006FA31: variable 'v27' is possibly undefined
// 1006FA48: variable 'v30' is possibly undefined
// 1006FB01: variable 'v37' is possibly undefined
// 1006FB4F: variable 'v42' is possibly undefined

//----- (1006FFD0) --------------------------------------------------------
void sub_1006FFD0() {
  int v0;        // ecx
  int v1;        // edx
  int *v2;       // esi
  int v3;        // eax
  float *v4;     // ebp
  int v5;        // edi
  int v6;        // ebx
  double v7;     // st7
  float *v8;     // ebx
  double v9;     // st5
  int *v10;      // eax
  double v11;    // st7
  double v12;    // st6
  double v13;    // st7
  char v15;      // c0
  __int64 v16;   // rax
  int v17;       // esi
  double v18;    // st7
  int *v19;      // eax
  double v20;    // st7
  int v21;       // esi
  int v22;       // esi
  double v23;    // st7
  int v24;       // eax
  double v25;    // st7
  int *v26;      // eax
  bool v27;      // cc
  float *v28;    // [esp-4h] [ebp-DCh]
  float *v29;    // [esp-4h] [ebp-DCh]
  float v30;     // [esp+0h] [ebp-D8h]
  int v31;       // [esp+14h] [ebp-C4h] BYREF
  float v32;     // [esp+18h] [ebp-C0h]
  float v33;     // [esp+1Ch] [ebp-BCh]
  int *v34;      // [esp+20h] [ebp-B8h]
  _DWORD *v35;   // [esp+24h] [ebp-B4h]
  float v36;     // [esp+28h] [ebp-B0h]
  float v37;     // [esp+2Ch] [ebp-ACh]
  float v38;     // [esp+30h] [ebp-A8h]
  float v39;     // [esp+34h] [ebp-A4h] BYREF
  float v40;     // [esp+38h] [ebp-A0h]
  float v41;     // [esp+3Ch] [ebp-9Ch]
  int v42;       // [esp+40h] [ebp-98h]
  int v43;       // [esp+44h] [ebp-94h]
  int v44[3];    // [esp+48h] [ebp-90h] BYREF
  int v45;       // [esp+54h] [ebp-84h] BYREF
  float v46;     // [esp+58h] [ebp-80h]
  float v47;     // [esp+5Ch] [ebp-7Ch]
  int v48[3];    // [esp+60h] [ebp-78h] BYREF
  float v49[9];  // [esp+6Ch] [ebp-6Ch] BYREF
  _DWORD v50[9]; // [esp+90h] [ebp-48h] BYREF
  float v51[9];  // [esp+B4h] [ebp-24h] BYREF

  v0 = dword_100B36F8;
  v1 = 0;
  v43 = 0;
  if (dword_100B36F8 > 0) {
    v2 = &dword_10ACD4F8;
    v34 = &dword_10ACD4F8;
    do {
      v3 = *v2;
      if (*v2) {
        if (*(_BYTE *)(v3 + 10671) != 2) {
          ++*(_BYTE *)(v3 + 869);
          v0 = dword_100B36F8;
          v4 = (float *)(*v2 + 476);
          v42 = v1 + 1;
          if (v1 + 1 < dword_100B36F8) {
              v5 = (int)(v2 + 32);
              v35 = v2 + 32;
              do {
                  v6 = *(_DWORD *)v5;
                  if (*(_DWORD *)v5) {
                      if (*(_BYTE *)(v6 + 10671) != 2) {
                          v7 = *v4 - *(float *)(v6 + 476);
                          v8 = (float *)(v6 + 476);
                          *(float *)&v31 = v7;
                          v32 = v4[1] - v8[1];
                          v9 = v4[2] - v8[2];
                          v33 = v9;
                          v30 = *(float *)&v31 * *(float *)&v31 + v32 * v32 + v9 * v33;
                          if (sqrt_(v30) < 5.0) {
                              v10 = (int *)(*(_DWORD *)v5 + 544);
                              v48[0] = 1075838976;
                              v48[1] = 1065353216;
                              v48[2] = 1065353216;
                              sub_10074A50(v50, v10);
                              sub_10074A90(v49, (int *)(*v2 + 544));
                              sub_10074AC0((int)v51, (int)v50, (int)v49);
                              *(float *)v44 = *v4 - *v8;
                              *(float *)&v44[1] = v4[1] - v8[1];
                              *(float *)&v44[2] = v4[2] - v8[2];
                              sub_10074830(&v39, v49, (float *)v44);
                              if (!sub_1006F950(v51, &v39, (float *)v48, (float *)v48))
                                  return;
                              math_10074250((float *)&v31);
                              v11 = *(float *)&v31 * v4[3] + v32 * v4[4] + v33 * v4[5];
                              v12 =
                                  (*(float *)&v31 * v8[3] + v33 * v8[5] + v32 * v8[4] + v11) * 0.5;
                              v13 = v12 - v11;
                              v36 = v12 * *(float *)&v31;
                              v37 = v12 * v32;
                              v38 = v12 * v33;
                              if (v15)
                                  v13 = -v13;
                              if (v13 > 27.0)
                                  v13 = 27.0;
                              if (*(_BYTE *)(*v2 + 869) > 0x28u) {
                                  v16 = (__int64)(128.0 - v13 * -4.7037039);
                                  *(_BYTE *)(*v2 + 866) = v16;
                                  *(_BYTE *)(*(_DWORD *)v5 + 866) = v16;
                              }
                              *(_BYTE *)(*v2 + 869) = 0;
                              v28 = (float *)(*v2 + 544);
                              *(float *)&v45 = *(float *)&v31 * -1.0;
                              v46 = v32 * -1.0;
                              v47 = v33 * -1.0;
                              v39 = *(float *)&v45 * 2.5;
                              v40 = v46 * 2.5;
                              v41 = v47 * 2.5;
                              sub_10074720((float *)v44, v28, &v39);
                              v4[3] = v4[3] - v36;
                              v4[4] = v4[4] - v37;
                              v4[5] = v4[5] - v38;
                              qmemcpy((void *)(*v2 + 700), (const void *)(*v2 + 476), 0x44u);
                              v17 = (int)v34;
                              sub_1006CCD0(*v34 + 356, (int)v44, (int)&v31, 0, 0.44999999);
                              v18 = v36;
                              v19 = v34;
                              qmemcpy((void *)(*(_DWORD *)v17 + 476),
                                      (const void *)(*(_DWORD *)v17 + 700),
                                      0x44u);
                              *(float *)(*v19 + 712) = v18 + *(float *)(*v19 + 712);
                              *(float *)(*v19 + 716) = v37 + *(float *)(*v19 + 716);
                              *(float *)(*v19 + 720) = v38 + *(float *)(*v19 + 720);
                              *(_DWORD *)(*v19 + 644) = *(_DWORD *)(*v19 + 712);
                              *(_DWORD *)(*v19 + 648) = *(_DWORD *)(*v19 + 716);
                              v20 = v36;
                              *(_DWORD *)(*v19 + 652) = *(_DWORD *)(*v19 + 720);
                              v21 = (int)v35;
                              v4[3] = v20 + v4[3];
                              v4[4] = v37 + v4[4];
                              v4[5] = v38 + v4[5];
                              v29 = (float *)(*(_DWORD *)v21 + 544);
                              v39 = *(float *)&v31 * 2.5;
                              v40 = v32 * 2.5;
                              v41 = v33 * 2.5;
                              sub_10074720((float *)v44, v29, &v39);
                              v8[3] = v8[3] - v36;
                              v8[4] = v8[4] - v37;
                              v8[5] = v8[5] - v38;
                              qmemcpy((void *)(*(_DWORD *)v21 + 700),
                                      (const void *)(*(_DWORD *)v21 + 476),
                                      0x44u);
                              v22 = (int)v35;
                              sub_1006CCD0(*v35 + 356, (int)v44, (int)&v45, 0, 0.44999999);
                              v23 = v36;
                              v24 = (int)v35;
                              qmemcpy((void *)(*(_DWORD *)v22 + 476),
                                      (const void *)(*(_DWORD *)v22 + 700),
                                      0x44u);
                              *(float *)(*(_DWORD *)v24 + 712) =
                                  v23 + *(float *)(*(_DWORD *)v24 + 712);
                              *(float *)(*(_DWORD *)v24 + 716) =
                                  v37 + *(float *)(*(_DWORD *)v24 + 716);
                              *(float *)(*(_DWORD *)v24 + 720) =
                                  v38 + *(float *)(*(_DWORD *)v24 + 720);
                              *(_DWORD *)(*(_DWORD *)v24 + 644) = *(_DWORD *)(*(_DWORD *)v24 + 712);
                              *(_DWORD *)(*(_DWORD *)v24 + 648) = *(_DWORD *)(*(_DWORD *)v24 + 716);
                              v25 = v36;
                              *(_DWORD *)(*(_DWORD *)v24 + 652) = *(_DWORD *)(*(_DWORD *)v24 + 720);
                              v8[3] = v25 + v8[3];
                              v8[4] = v37 + v8[4];
                              v8[5] = v38 + v8[5];
                              if (gNetworkPlay) {
                                  v26 = v34;
                                  *(float *)(*v34 + 644) = v4[3];
                                  *(float *)(*v26 + 648) = v4[4];
                                  *(float *)(*v26 + 652) = v4[5];
                              }
                              v2 = v34;
                              v5 = (int)v35;
                          }
                      }
                  }
                  v0 = dword_100B36F8;
                  v5 += 128;
                  v27 = ++v42 < dword_100B36F8;
                  v35 = (_DWORD *)v5;
              } while (v27);
              v1 = v43;
          }
        }
      }
      ++v1;
      v2 += 32;
      v43 = v1;
      v34 = v2;
    } while (v1 < v0);
  }
}
// 1007020E: variable 'v15' is possibly undefined
// 100B36F8: using guessed type int dword_100B36F8;
// 1022AF18: using guessed type int g_NetworkPlay;
// 10ACD4F8: using guessed type int dword_10ACD4F8;

//----- (10070580) --------------------------------------------------------
int __cdecl sub_10070580(int trackIndex) {
  int result; // eax

  result = trackIndex;
  switch (trackIndex) {
  case 0:
  case 1:
  case 2:
  case 3:
  case 4:
  case 6:
  case 7:
  case 8:
  case 9:
  case 10:
  case 12:
    dword_117554A8 = (int)&unk_100B5428;
    dword_117554C0 = (int)&unk_100B5668;
    dword_11750330 = (int)&unk_100B5728;
    dword_100B5968 = 1065353216;
    break;
  default:
    dword_117554A8 = (int)&unk_100B5548;
    dword_117554C0 = (int)&unk_100B56C8;
    dword_11750330 = (int)&unk_100B5848;
    dword_100B5968 = 1063675494;
    break;
  }
  return result;
}
// 100B5968: using guessed type int dword_100B5968;
// 11750330: using guessed type int dword_11750330;
// 117554A8: using guessed type int dword_117554A8;
// 117554C0: using guessed type int dword_117554C0;

//----- (10070610) --------------------------------------------------------
char __cdecl sub_10070610(enum MACRO_UNK10071130 a1, FILE *Stream) {
  enum MACRO_UNK10071130 v2; // ebp
  FILE *v3;                  // ebx
  int v5;                    // eax
  int v6;                    // eax
  _DWORD *v7;                // eax
  int v8;                    // edx
  int v9;                    // ebp
  int v10;                   // ecx
  int v11;                   // eax
  FILE *v12;                 // eax
  int v13;                   // eax
  size_t v14;                // eax
  unsigned int v15;          // eax
  unsigned int v16;          // eax
  FILE *v17;                 // [esp-4h] [ebp-2Ch]
  int Buffer[3];             // [esp+10h] [ebp-18h] BYREF
  int v19;                   // [esp+1Ch] [ebp-Ch]
  int v20;                   // [esp+20h] [ebp-8h]
  int v21;                   // [esp+24h] [ebp-4h]

  v2 = a1;
  if (a1) {
    v12 = fopen(aCRallyseasonDatFilepath_ptr, kFileModeReadBinary);
    v3 = v12;
    if (!v12)
      return (_BYTE)Stream != 0;
    if (filesystem_freadLock(gBuffer0, 1u, 4u, v12) == 4) {
      v13 = strncmp(gBuffer0, aRsea, 4u);
      v17 = v3;
      if (v13)
        goto LABEL_22;
      v14 = filesystem_freadLock(Buffer, 1u, 4u, v3);
      v17 = v3;
      if (v14 != 4)
        goto LABEL_22;
      if (filesystem_freadLock(gBuffer0, 1u, 0x200u, v3) == 512) {
        v15 = CalculateChecksum(0, 0, 0);
        v16 = CalculateChecksum(v15, (unsigned __int8 *)gBuffer0, 0x200u);
        if (Buffer[0] == v16)
          goto LABEL_3;
      }
    }
    v17 = v3;
  LABEL_22:
    fclose(v17);
    return (_BYTE)Stream != 0;
  }
  v3 = Stream;
  qmemcpy(gBuffer0, &dword_10AA26F0, 0x14Cu);
LABEL_3:
  if (a1 == UNK10071130_4) {
    if (!sub_1003E1D0())
      return 0;
    if (!dword_10ACED34 || !dword_10AD189C)
      return 0;
    qmemcpy(dword_10ACED34, gBuffer0, 0x14Cu);
    qmemcpy((void *)dword_10AD189C, gBuffer0, 0x14Cu);
    fseek(v3, 0, 2);
    v5 = ftell(v3);
    fseek(v3, v5 - 148, 0);
    filesystem_freadLock(&dword_10AD0978, 4u, 1u, v3);
    filesystem_freadLock(&dword_10AD097C, 4u, 1u, v3);
    filesystem_freadLock(&dword_10AD0980, 4u, 1u, v3);
    filesystem_freadLock(&dword_10AD0984, 4u, 1u, v3);
    filesystem_freadLock(&dword_10AD0988, 4u, 1u, v3);
    fseek(v3, 0, 2);
    v6 = ftell(v3);
    fseek(v3, v6 - 128, 0);
    filesystem_freadLock(gBuffer1, 1u, 0x80u, v3);
    qmemcpy(byte_10AD34F8, gBuffer1, sizeof(byte_10AD34F8));
  } else {
    v7 = *(&dword_10ACED34 + 2778 * (dword_10690A18 ^ 1));
    v8 = v7[62];
    v9 = v7[63];
    v19 = v7[64];
    v10 = v7[65];
    v11 = v7[66];
    v20 = v10;
    qmemcpy(dword_10ACED34, gBuffer0, 0x14Cu);
    v21 = v11;
    qmemcpy((void *)dword_10AD189C, gBuffer0, 0x14Cu);
    *((_DWORD *)*(&dword_10ACED34 + 2778 * (dword_10690A18 ^ 1)) + 62) = v8;
    *((_DWORD *)*(&dword_10ACED34 + 2778 * (dword_10690A18 ^ 1)) + 63) = v9;
    *((_DWORD *)*(&dword_10ACED34 + 2778 * (dword_10690A18 ^ 1)) + 64) = v19;
    *((_DWORD *)*(&dword_10ACED34 + 2778 * (dword_10690A18 ^ 1)) + 65) = v20;
    v2 = a1;
    *((_DWORD *)*(&dword_10ACED34 + 2778 * (dword_10690A18 ^ 1)) + 66) = v21;
  }
  if (v2)
    fclose(v3);
  return 1;
}
// 10690A18: using guessed type int dword_10690A18;
// 10AA26F0: using guessed type int dword_10AA26F0;
// 10AD0978: using guessed type int dword_10AD0978;
// 10AD097C: using guessed type int dword_10AD097C;
// 10AD0980: using guessed type int dword_10AD0980;
// 10AD0984: using guessed type int dword_10AD0984;
// 10AD0988: using guessed type int dword_10AD0988;
// 10AD189C: using guessed type int dword_10AD189C;

//----- (100709A0) --------------------------------------------------------
char sub_100709A0() {
  unsigned int v0;     // eax
  FILE *v1;            // eax
  FILE *v2;            // esi
  char result;         // al
  size_t v4;           // eax
  size_t v5;           // eax
  size_t v6;           // eax
  FILE *v7;            // [esp-4h] [ebp-Ch]
  unsigned int Buffer; // [esp+4h] [ebp-4h] BYREF

  v0 = CalculateChecksum(0, 0, 0);
  Buffer = CalculateChecksum(v0, (unsigned __int8 *)dword_10ACED34, 0x200u);
  v1 = fopen(aCRallyseasonDatFilepath_ptr, kFileModeWriteBinary);
  v2 = v1;
  if (!v1)
    return 0;
  if (filesystem_fwriteLock(aRsea, 1u, 4u, v1) == 4) {
    v4 = filesystem_fwriteLock(&Buffer, 1u, 4u, v2);
    v7 = v2;
    if (v4 != 4)
      goto LABEL_9;
    v5 = filesystem_fwriteLock(dword_10ACED34, 1u, 0x200u, v2);
    v7 = v2;
    if (v5 != 512)
      goto LABEL_9;
    filesystem_fwriteLock(&dword_10AA2A08, 4u, 1u, v2);
    filesystem_fwriteLock(&dword_100AC64C, 4u, 1u, v2);
    filesystem_fwriteLock(&dword_100AC650, 4u, 1u, v2);
    filesystem_fwriteLock(&dword_100AC654, 4u, 1u, v2);
    filesystem_fwriteLock(&dword_100AC65C, 4u, 1u, v2);
    v6 = filesystem_fwriteLock(gBuffer1, 1u, 0x80u, v2);
    v7 = v2;
    if (v6 == 128) {
      fclose(v2);
      result = 1;
    } else {
    LABEL_9:
      fclose(v7);
      result = 0;
    }
  } else {
    fclose(v2);
    result = 0;
  }
  return result;
}
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC65C: using guessed type int dword_100AC65C;
// 10AA2A08: using guessed type int dword_10AA2A08;

//----- (10070AF0) --------------------------------------------------------
bool __cdecl sub_10070AF0(char *filename, BOOL b) {
  FILE *fp0;            // eax
  FILE *fp1;            // ebx
  int strcmpResult;     // eax
  size_t size;          // eax
  void *v6;             // eax
  char *v7;             // eax
  unsigned int seed0;   // eax
  unsigned int seed1;   // eax
  unsigned int seed2;   // esi
  unsigned __int8 *v11; // eax
  unsigned int v12;     // eax
  unsigned int v14;     // eax
  int v15;              // eax
  int v16;              // eax
  char *v17;            // [esp-8h] [ebp-1Ch]
  FILE *fp2;            // [esp-4h] [ebp-18h]
  char *filename0;      // [esp-4h] [ebp-18h]
  char *buffer;         // [esp+Ch] [ebp-8h] BYREF
  int v21;              // [esp+10h] [ebp-4h] BYREF

  fp0 = fopen(filename, kFileModeReadBinary);
  fp1 = fp0;
  if (!fp0)
    goto LABEL_20;
  if (filesystem_freadLock(gBuffer0, 1u, 4u, fp0) != 4)
    goto LABEL_18;
  strcmpResult = strncmp(gBuffer0, aRgho, 4u);
  fp2 = fp1;
  if (strcmpResult)
    goto LABEL_19;
  if (filesystem_freadLock(&buffer, 4u, 1u, fp1) != 1)
    goto LABEL_18;
  if ((unsigned int)buffer < 0xC) {
    fp2 = fp1;
    if (!buffer) {
      if (filesystem_freadLock(&filename, 1u, 4u, fp1) == 4)
        goto LABEL_9;
    LABEL_18:
      fp2 = fp1;
    }
  LABEL_19:
    fclose(fp2);
  LABEL_20:
    *(_DWORD *)&dword_10AA28C8 = 0;
    dword_10680738[0] = (int *)-1;
    *(_DWORD *)&dword_10AA28CC = 0;
    dword_1068073C = -1;
    dword_10680740 = -1;
    dword_10680744 = -1;
    return b;
  }
  filename = buffer;
LABEL_9:
  filename -= 4;
  if (filesystem_freadLock(&v21, 1u, 4u, fp1) != 4)
    goto LABEL_18;
  if ((unsigned int)buffer < 0xC) {
    filename -= 4;
    if (filesystem_freadLock(&dword_10AA28CC, 1u, 4u, fp1) != 4)
      goto LABEL_18;
    filename -= 4;
    if (filesystem_freadLock(&dword_10AA28C8, 1u, 4u, fp1) != 4)
      goto LABEL_18;
  }
  filename -= 16;
  size = filesystem_freadLock(dword_10680738, 1u, 0x10u, fp1);
  fp2 = fp1;
  if (size != 16)
    goto LABEL_19;
  v17 = filename;
  v6 = sub_1006ADF0();
  v7 = (char *)filesystem_freadLock(v6, 1u, (size_t)v17, fp1);
  if (v7 != filename)
    goto LABEL_18;
  seed0 = CalculateChecksum(0, 0, 0);
  if ((unsigned int)buffer < 0xC) {
    seed1 = CalculateChecksum(seed0, &dword_10AA28CC, 4u);
    seed0 = CalculateChecksum(seed1, &dword_10AA28C8, 4u);
  }
  seed2 = CalculateChecksum(seed0, (unsigned __int8 *)dword_10680738, 0x10u);
  filename0 = filename;
  v11 = (unsigned __int8 *)sub_1006ADF0();
  v12 = CalculateChecksum(seed2, v11, (unsigned int)filename0);
  if (v21 != v12)
    goto LABEL_18;
  ElementCount = 16;
  v14 = sub_1006AE00((unsigned int)filename);
  if ((unsigned int)buffer >= 0xC) {
    *(_DWORD *)&dword_10AA28CC = 0;
    b = v14 - 204;
    *(float *)&dword_10AA28C8 = (double)(int)(v14 - 204) * 0.033333335;
  }
  *((_WORD *)dword_10ACED34 + 121) |= 1 << SLOBYTE(dword_10680738[0]);
  *((_WORD *)dword_10ACED34 + 120) |= 1 << SBYTE1(dword_10680738[0]);
  fseek(fp1, 0, 2);
  v15 = ftell(fp1);
  fseek(fp1, v15 - 152, 0);
  filesystem_freadLock(&dword_10AD0978, 4u, 1u, fp1);
  filesystem_freadLock(&dword_10AD097C, 4u, 1u, fp1);
  filesystem_freadLock(&dword_10AD0980, 4u, 1u, fp1);
  filesystem_freadLock(&dword_10AD0984, 4u, 1u, fp1);
  filesystem_freadLock(&dword_10AD0988, 4u, 1u, fp1);
  filesystem_freadLock(&dword_10AD098C, 4u, 1u, fp1);
  fseek(fp1, 0, 2);
  v16 = ftell(fp1);
  fseek(fp1, v16 - 128, 0);
  filesystem_freadLock(gBuffer1, 1u, 0x80u, fp1);
  qmemcpy(byte_10AD34F8, gBuffer1, sizeof(byte_10AD34F8));
  fclose(fp1);
  return 1;
}
// 1068073C: using guessed type int dword_1068073C;
// 10680740: using guessed type int dword_10680740;
// 10680744: using guessed type int dword_10680744;
// 10AD0978: using guessed type int dword_10AD0978;
// 10AD097C: using guessed type int dword_10AD097C;
// 10AD0980: using guessed type int dword_10AD0980;
// 10AD0984: using guessed type int dword_10AD0984;
// 10AD0988: using guessed type int dword_10AD0988;
// 10AD098C: using guessed type int dword_10AD098C;

//----- (10070E60) --------------------------------------------------------
bool __cdecl sub_10070E60(int a1) {
  return sub_10070AF0(aCRallyghostDatFilepath, a1);
}

//----- (10070E80) --------------------------------------------------------
char sub_10070E80() {
  unsigned int v0;     // eax
  unsigned int v1;     // eax
  unsigned int v2;     // eax
  unsigned __int8 *v3; // eax
  FILE *v4;            // eax
  FILE *v5;            // esi
  char result;         // al
  size_t v7;           // eax
  size_t v8;           // eax
  size_t v9;           // eax
  size_t v10;          // eax
  size_t v11;          // eax
  size_t v12;          // eax
  void *v13;           // eax
  size_t v14;          // edi
  size_t v15;          // eax
  int v16;             // [esp-8h] [ebp-18h]
  int v17;             // [esp-4h] [ebp-14h]
  FILE *v18;           // [esp-4h] [ebp-14h]
  FILE *v19;           // [esp-4h] [ebp-14h]
  unsigned int v20;    // [esp+8h] [ebp-8h] BYREF
  size_t Buffer;       // [esp+Ch] [ebp-4h] BYREF

  v0 = CalculateChecksum(0, 0, 0);
  v1 = CalculateChecksum(v0, (unsigned __int8 *)&dword_10AA28CC, 4u);
  v2 = CalculateChecksum(v1, (unsigned __int8 *)&dword_10AA28C8, 4u);
  v20 = CalculateChecksum(v2, (unsigned __int8 *)&dword_10680738, 0x10u);
  v17 = sub_1006ABA0();
  v3 = (unsigned __int8 *)sub_1006AB90();
  v20 = CalculateChecksum(v20, v3, v17);
  Buffer = sub_1006ABA0() + ElementCount + 12;
  v4 = fopen(aCRallyghostDatFilepath, kFileModeWriteBinary);
  v5 = v4;
  if (!v4)
    return 0;
  v7 = filesystem_fwriteLock(aRgho, 1u, 4u, v4);
  v18 = v5;
  if (v7 == 4 && (v8 = filesystem_fwriteLock(&unk_1008FC1C, 4u, 1u, v5), v18 = v5, v8 == 1)) {
    if (filesystem_fwriteLock(&Buffer, 1u, 4u, v5) == 4) {
      v9 = filesystem_fwriteLock(&v20, 1u, 4u, v5);
      v19 = v5;
      if (v9 != 4)
        goto LABEL_16;
      v10 = filesystem_fwriteLock(&dword_10AA28CC, 4u, 1u, v5);
      v19 = v5;
      if (v10 != 1)
        goto LABEL_16;
      v11 = filesystem_fwriteLock(&dword_10AA28C8, 4u, 1u, v5);
      v19 = v5;
      if (v11 != 1)
        goto LABEL_16;
      v12 = filesystem_fwriteLock(&dword_10680738, 1u, ElementCount, v5);
      v19 = v5;
      if (v12 != ElementCount)
        goto LABEL_16;
      v16 = sub_1006ABA0();
      v13 = sub_1006AB90();
      v14 = filesystem_fwriteLock(v13, 1u, v16, v5);
      v19 = v5;
      if (v14 != sub_1006ABA0())
        goto LABEL_16;
      filesystem_fwriteLock(&dword_10AA2A08, 4u, 1u, v5);
      filesystem_fwriteLock(&dword_100AC64C, 4u, 1u, v5);
      filesystem_fwriteLock(&dword_100AC650, 4u, 1u, v5);
      filesystem_fwriteLock(&dword_100AC654, 4u, 1u, v5);
      filesystem_fwriteLock(&dword_100AC65C, 4u, 1u, v5);
      filesystem_fwriteLock(&dword_100AC658, 4u, 1u, v5);
      v15 = filesystem_fwriteLock(gBuffer1, 1u, 0x80u, v5);
      v19 = v5;
      if (v15 == 128) {
        fclose(v5);
        result = 1;
      } else {
      LABEL_16:
        fclose(v19);
        result = 0;
      }
    } else {
      fclose(v5);
      result = 0;
    }
  } else {
    fclose(v18);
    result = 0;
  }
  return result;
}
// 100AC64C: using guessed type int dword_100AC64C;
// 100AC650: using guessed type int dword_100AC650;
// 100AC654: using guessed type int dword_100AC654;
// 100AC658: using guessed type int dword_100AC658;
// 100AC65C: using guessed type int dword_100AC65C;
// 10680738: using guessed type int dword_10680738;
// 10AA28C8: using guessed type int dword_10AA28C8;
// 10AA28CC: using guessed type int dword_10AA28CC;
// 10AA2A08: using guessed type int dword_10AA2A08;

//----- (10071120) --------------------------------------------------------
CarPart *sub_10071120() {
  gGameMode1 = 5;
  return sub_10035BD1();
}
// 10220B20: using guessed type int dword_10220B20;

//----- (10071130) --------------------------------------------------------
char __cdecl sub_10071130(enum MACRO_UNK10071130 a1, FILE *Stream) {
  int v2;                 // eax
  char *filename;         // eax
  size_t size;            // esi
  FILE *fp0;              // eax
  FILE *fp;               // ebx
  BOOL bufferSizeMatches; // eax
  _DWORD *v8;             // ecx
  int v10[5];             // [esp+Ch] [ebp-14h] BYREF

  if (a1 == UNK10071130_4) {
    LOBYTE(v2) = sub_10070610(UNK10071130_4, Stream);
  } else if (a1) {
    if (a1 == UNK10071130_1) {
      LOBYTE(v2) = sub_10070E60((int)Stream);
    } else {
      if (a1 == UNK10071130_2 || a1 == UNK10071130_3) {
        filename = aCRallyconfigDa;
        size = 256;
      } else {
        filename = (char *)Stream;
        size = (size_t)Stream;
      }
      fp0 = fopen(filename, kFileModeReadBinary);
      fp = fp0;
      if (fp0) {
        if (a1 == UNK10071130_2)
          bufferSizeMatches = filesystem_freadLock(gBuffer0, 1u, 0x80u, fp0) == 0x80;
        else
          bufferSizeMatches = filesystem_freadLock(gBuffer0, 1u, size, fp0) == size;
        if (!bufferSizeMatches)
          goto LABEL_17;
        if (a1 != UNK10071130_2) {
          fclose(fp);
          LOBYTE(v2) = 1;
          return v2;
        }
        dword_100ADF58 = *(_DWORD *)gBuffer0;
        dword_100ADF5C = (int)dword_11782E2C;
        dword_100ADF60 = dword_11782E30;
        meth_DebugPrint(dword_11782E2C);
        if (filesystem_freadLock(gBuffer0, 1u, 0x80u, fp) == 128) {
          qmemcpy(v10, gBuffer0, sizeof(v10));
          *((_DWORD *)*(&dword_10ACED34 + 2778 * dword_10690A18) + 62) = v10[0];
          *((_DWORD *)*(&dword_10ACED34 + 2778 * dword_10690A18) + 63) = v10[1];
          *((_DWORD *)*(&dword_10ACED34 + 2778 * dword_10690A18) + 64) = v10[2];
          *((_DWORD *)*(&dword_10ACED34 + 2778 * dword_10690A18) + 65) = v10[3];
          v8 = *(&dword_10ACED34 + 2778 * dword_10690A18);
          v8[66] = v10[4];
          meth_DebugPrint(v8);
          fclose(fp);
          LOBYTE(v2) = 1;
        } else {
        LABEL_17:
          fclose(fp);
          LOBYTE(v2) = 0;
        }
      } else {
        v2 = (_BYTE)Stream != NULL;
      }
    }
  } else {
    LOBYTE(v2) = sub_10070610(UNK10071130_0, Stream);
  }
  return v2;
}
// 100ADF58: using guessed type int dword_100ADF58;
// 100ADF5C: using guessed type int dword_100ADF5C;
// 100ADF60: using guessed type int dword_100ADF60;
// 10690A18: using guessed type int dword_10690A18;
// 11782E30: using guessed type int dword_11782E30;

//----- (100713A0) --------------------------------------------------------
DWORD sub_100713A0() {
  return getTicks() - dword_1178FEE8;
}
// 1178FEE8: using guessed type int dword_1178FEE8;

//----- (100713C0) --------------------------------------------------------
BOOL sub_100713C0() {
  int i;       // edi
  _DWORD *v1;  // esi
  int v2;      // ebp
  BOOL result; // eax

  dword_1178FEF0 = 0;
  dword_11826AF8 = 0;
  for (i = 0; i < 9648; i += 603) {
    WaitForSingleObject(*(HANDLE *)((char *)&dword_11786828 + i * 4), 0xFFFFFFFF);
    dword_11787184[i] = 0;
    dword_11787188[i] = 0;
    dword_1178718C[i] = 0;
    dword_11787190[i] = 0;
    dword_11786854[i] = 0;
    ReleaseMutex(*(HANDLE *)((char *)&dword_11786828 + i * 4));
    v1 = (_DWORD *)((char *)&unk_11790854 + i * 4);
    v2 = 16;
    do {
      WaitForSingleObject((HANDLE) * (v1 - 599), 0xFFFFFFFF);
      *(v1 - 597) = dword_1178FEEC;
      *v1 = 0;
      v1[1] = 0;
      v1[2] = 0;
      v1[3] = 0;
      *(v1 - 588) = 0;
      result = ReleaseMutex((HANDLE) * (v1 - 599));
      v1 += 9648;
      --v2;
    } while (v2);
  }
  return result;
}
// 11786854: using guessed type int dword_11786854[];
// 11787184: using guessed type int dword_11787184[];
// 11787188: using guessed type int dword_11787188[];
// 1178718C: using guessed type int dword_1178718C[];
// 11787190: using guessed type int dword_11787190[];
// 1178FEEC: using guessed type int dword_1178FEEC;
// 1178FEF0: using guessed type int dword_1178FEF0;
// 11826AF8: using guessed type int dword_11826AF8;

//----- (10071480) --------------------------------------------------------
BOOL __cdecl sub_10071480(int a1) {
  int *v1;     // esi
  BOOL result; // eax

  v1 = dword_11786854;
  do {
    WaitForSingleObject((HANDLE) * (v1 - 11), 0xFFFFFFFF);
    if (*(v1 - 10) == a1 && (*(_BYTE *)v1 & 0x3Fu) < 5)
      *v1 = 0;
    result = ReleaseMutex((HANDLE) * (v1 - 11));
    v1 += 603;
  } while ((int)v1 < (int)&unk_1178FF14);
  return result;
}
// 11786854: using guessed type int dword_11786854[];

//----- (100714D0) --------------------------------------------------------
int __cdecl sub_100714D0(int a1) {
  int v1; // edi

  WaitForSingleObject(*(&dword_11786828 + 603 * a1), 0xFFFFFFFF);
  v1 = dword_11786854[603 * a1];
  ReleaseMutex(*(&dword_11786828 + 603 * a1));
  return v1;
}
// 11786854: using guessed type int dword_11786854[];

//----- (10071510) --------------------------------------------------------
int __cdecl sub_10071510(int a1) {
  int v1; // edi

  WaitForSingleObject((HANDLE)dword_1178FEF8[10251 * a1], 0xFFFFFFFF);
  v1 = dword_1178FF24[10251 * a1];
  ReleaseMutex((HANDLE)dword_1178FEF8[10251 * a1]);
  return v1;
}
// 1178FEF8: using guessed type int dword_1178FEF8[];
// 1178FF24: using guessed type int dword_1178FF24[];

//----- (10071550) --------------------------------------------------------
int sub_10071550() {
  sub_10071560();
  sub_10071630();
  return 1;
}

//----- (10071560) --------------------------------------------------------
BOOL sub_10071560() {
  int i;   // ebp
  int *v1; // esi
  int v2;  // edi

  dword_1178FEE8 = getTicks();
  dword_1178FEEC = sub_100713A0();
  for (i = 0; i < 9648; i += 603) {
    *(HANDLE *)((char *)&dword_11786828 + i * 4) = CreateMutexA(0, 0, 0);
    v1 = &dword_1178FEF8[i];
    v2 = 16;
    do {
      *v1 = (int)CreateMutexA(0, 0, 0);
      v1 += 9648;
      --v2;
    } while (v2);
  }
  return sub_100713C0();
}
// 100713A0: using guessed type int sub_100713A0(void);
// 1178FEE8: using guessed type int dword_1178FEE8;
// 1178FEEC: using guessed type int dword_1178FEEC;
// 1178FEF8: using guessed type int dword_1178FEF8[];

//----- (100715D0) --------------------------------------------------------
int sub_100715D0() {
  sub_100715E0();
  return atexit(sub_10071610);
}

//----- (100715E0) --------------------------------------------------------
void sub_100715E0() {
  `eh vector constructor iterator'(
    dword_11826BD0,
    0x214u,
    16,
    (void (__thiscall *)(void *))meth_unk00214_10073B40_init,
    meth_DebugPrint);
}

//----- (10071610) --------------------------------------------------------
void __cdecl sub_10071610(){
  `eh vector destructor iterator'(&dword_11826BD0, 0x214u, 16, meth_DebugPrint); }

//----- (10071630) --------------------------------------------------------
HANDLE sub_10071630() {
  HANDLE result; // eax

  dword_11826B00 = CreateEventA(0, 0, 0, 0);
  result = CreateThread(0, 0, (LPTHREAD_START_ROUTINE)sub_10071680, 0, 0, &dword_11826B04);
  dword_11828D1C = result;
  dword_11826B48 = 1000;
  dword_11828D18 = 1;
  return result;
}
// 11826B48: using guessed type int dword_11826B48;
// 11828D18: using guessed type int dword_11828D18;

//----- (10071680) --------------------------------------------------------
void __stdcall __noreturn sub_10071680(LPVOID lpThreadParameter) {
  DWORD v1; // eax

  while (1) {
    v1 = sub_100713A0();
    dword_11828D10 = v1;
    if (v1 < dword_11826B48) {
      Sleep(dword_11826B48 - v1);
    } else {
      sub_100716E0();
      sub_10071870();
      sub_10071B80();
      sub_10071C10();
      sub_10072170(&unk);
      dword_11826B48 += 1000;
    }
  }
}
// 11826B48: using guessed type int dword_11826B48;
// 11828D10: using guessed type int dword_11828D10;

//----- (100716E0) --------------------------------------------------------
BOOL sub_100716E0() {
  HANDLE *v0;     // esi
  HANDLE v1;      // ecx
  bool v2;        // bl
  BOOL result;    // eax
  int *v4;        // edi
  HANDLE *v5;     // esi
  HANDLE v6;      // edx
  bool v7;        // bl
  HANDLE v8;      // ecx
  bool v9;        // bl
  HANDLE *v10;    // esi
  HANDLE v11;     // eax
  int v12;        // eax
  HANDLE Handles; // [esp+10h] [ebp-10h] BYREF
  HANDLE v14;     // [esp+14h] [ebp-Ch]
  HANDLE v15;     // [esp+18h] [ebp-8h] BYREF
  HANDLE v16;     // [esp+1Ch] [ebp-4h]

  v0 = &dword_11786828;
  while (1) {
    v1 = *v0;
    Handles = dword_11826B00;
    v14 = v1;
    if (!WaitForMultipleObjects(2u, &Handles, 0, 0xFFFFFFFF))
      ExitThread(0);
    v2 = ((unsigned int)v0[11] & 0x3F) >= 2 && ((unsigned int)v0[11] & 0x3F) != 3;
    result = ReleaseMutex(*v0);
    if (v2)
      break;
    v0 += 603;
    if ((int)v0 >= (int)&dword_1178FEE8) {
      v4 = dword_1178FEF8;
      v5 = &dword_11786828;
      while (1) {
        v6 = *v5;
        Handles = dword_11826B00;
        v14 = v6;
        if (!WaitForMultipleObjects(2u, &Handles, 0, 0xFFFFFFFF))
          ExitThread(0);
        v7 = ((_BYTE)v5[11] & 0x3F) == 3;
        ReleaseMutex(*v5);
        if (v7) {
          v8 = (HANDLE)*v4;
          v15 = dword_11826B00;
          v16 = v8;
          if (!WaitForMultipleObjects(2u, &v15, 0, 0xFFFFFFFF))
              ExitThread(0);
          v9 = (v4[11] & 0x3F) != 3;
          result = ReleaseMutex((HANDLE)*v4);
          if (v9)
              break;
        }
        v5 += 603;
        v4 += 10251;
        if ((int)v5 >= (int)&dword_1178FEE8) {
          v10 = &dword_11786828;
          do {
              v11 = *v10;
              v15 = dword_11826B00;
              v16 = v11;
              if (!WaitForMultipleObjects(2u, &v15, 0, 0xFFFFFFFF))
                  ExitThread(0);
              if (((_BYTE)v10[11] & 0x3F) == 3) {
                  v12 = dword_11828D10;
                  v10[11] = (HANDLE)4;
                  dword_1178FEF0 = 1;
                  dword_11828D14 = v12 + 3000;
              }
              result = ReleaseMutex(*v10);
              v10 += 603;
          } while ((int)v10 < (int)&dword_1178FEE8);
          return result;
        }
      }
      return result;
    }
  }
  return result;
}
// 1178FEE8: using guessed type int dword_1178FEE8;
// 1178FEF0: using guessed type int dword_1178FEF0;
// 1178FEF8: using guessed type int dword_1178FEF8[];
// 11828D10: using guessed type int dword_11828D10;
// 11828D14: using guessed type int dword_11828D14;

//----- (10071870) --------------------------------------------------------
int *sub_10071870() {
  _DWORD ebp1;          // ebp
  _DWORD ebx1;          // ebx
  _DWORD edi1;          // edi
  _DWORD esi1;          // esi
  _DWORD ecx2;          // ecx
  _DWORD eax6;          // eax
  _DWORD edi11;         // edi
  _DWORD ebx11;         // ebx
  _DWORD edx12;         // edx
  _DWORD esi12;         // esi
  _DWORD edi19;         // edi
  _DWORD ebp19;         // ebp
  _DWORD ebx19;         // ebx
  _DWORD esi19;         // esi
  _DWORD eax20;         // eax
  _DWORD eax25;         // eax
  double st7_27;        // st7
  _DWORD eax29;         // eax
  _DWORD ecx32;         // ecx
  int *result;          // eax
  _DWORD edx33;         // edx
  _DWORD NumOfElements; // [esp+10h] [ebp-20h]
  _DWORD var1C;         // [esp+14h] [ebp-1Ch]
  _DWORD var18;         // [esp+18h] [ebp-18h]
  HANDLE Handles;       // [esp+20h] [ebp-10h]
  int varC;             // [esp+24h] [ebp-Ch]
  HANDLE var8[2];       // [esp+28h] [ebp-8h]

  ebp1 = 0;
  ebx1 = 15;
  edi1 = (float *)&unk_11826B54;
  esi1 = (unsigned int *)&unk_1178FEE4;
  do {
    ecx2 = (HANDLE) * (esi1 - 602);
    Handles = dword_11826B00;
    varC = ecx2;
    if (!WaitForMultipleObjects(2u, &Handles, 0, 0xFFFFFFFF))
      ExitThread(0);
    if ((*(esi1 - 591) & 0x3F) >= 2 && (*(esi1 - 591) & 0x3F) < 5) {
      eax6 = *esi1;
      if (*esi1) {
        *((_DWORD *)edi1 - 1) = ebx1;
        ++ebp1;
        *edi1 = (float)eax6;
        edi1 += 2;
      }
    }
    ReleaseMutex((HANDLE) * (esi1 - 602));
    esi1 -= 603;
    --ebx1;
  } while ((int)esi1 >= (int)dword_11787190);
  if (ebp1) {
    qsort(&unk_11826B50, ebp1, 8u, sub_10071B60);
    if ((int)(ebp1 - 1) >= 0) {
      edi11 = (_DWORD *)((char *)&unk_11826B50 + 8 * ebp1 - 8);
      ebx11 = ebp1;
      do {
        edx12 = 603 * *edi11;
        Handles = dword_11826B00;
        esi12 = &dword_11786828 + edx12;
        varC = *esi12;
        if (!WaitForMultipleObjects(2u, &Handles, 0, 0xFFFFFFFF))
          ExitThread(0);
        if (((unsigned int)esi12[11] & 0x3F) >= 2 && ((unsigned int)esi12[11] & 0x3F) < 5 &&
            esi12[602]) {
          sub_1003DB50((_DWORD *)dword_10A9D008, (int)esi12[1], dword_11826AF8);
          esi12[11] = (HANDLE)(dword_11826AF8 + 5);
          ++dword_11826AF8;
        }
        ReleaseMutex(*esi12);
        edi11 -= 2;
        --ebx11;
      } while (ebx11);
    }
  }
  edi19 = 15;
  NumOfElements = 0;
  var18 = 15;
  var1C = (char *)&unk_11826BCC;
  ebp19 = (float *)&unk_11826B54;
  ebx19 = (int *)&unk_11826B50;
  esi19 = (char *)&unk_1178F5A8;
  do {
    eax20 = (void *)*((_DWORD *)esi19 - 11);
    var8[0] = dword_11826B00;
    var8[1] = eax20;
    if (!WaitForMultipleObjects(2u, var8, 0, 0xFFFFFFFF))
      ExitThread(0);
    if ((*(_DWORD *)esi19 & 0x3Fu) >= 2 && (*(_DWORD *)esi19 & 0x3Fu) < 5 &&
        *(float *)&esi19[160 * *((_DWORD *)esi19 + 331) + 164] >= 4188888.0) {
      sub_1003DB50((_DWORD *)dword_10A9D008, *((_DWORD *)esi19 - 10), dword_11826AF8);
      eax25 = dword_11826AF8 + 1;
      *(_DWORD *)esi19 = dword_11826AF8 + 5;
      dword_11826AF8 = eax25;
    }
    Handles = *(HANDLE *)esi19;
    if (((unsigned __int8)Handles & 0x3Fu) < 5) {
      if (((unsigned __int8)Handles & 0x3Fu) < 2) {
        *((_DWORD *)var1C - 1) = edi19;
        var1C -= 8;
        *((float *)var1C + 2) = -10000000.0 - (double)var18;
      } else {
        eax29 = *((_DWORD *)esi19 + 331);
        *ebx19 = edi19;
        ebx19 += 2;
        *ebp19 = *(float *)&esi19[160 * eax29 + 164];
        ++NumOfElements;
        ebp19 += 2;
      }
    } else {
      st7_27 = (double)(int)Handles;
      *ebx19 = edi19;
      ebx19 += 2;
      ++NumOfElements;
      ebp19 += 2;
      *(ebp19 - 2) = 10000000.0 - st7_27;
    }
    ReleaseMutex(*((HANDLE *)esi19 - 11));
    esi19 -= 2412;
    var18 = --edi19;
  } while ((int)esi19 >= (int)dword_11786854);
  qsort(&unk_11826B50, NumOfElements, 8u, sub_10071B60);
  ecx32 = 0;
  result = (int *)&unk_11826B50;
  do {
    edx33 = *result;
    result += 2;
    dword_11826B08[edx33] = ecx32++;
  } while ((int)result < (int)&dword_11826BD0);
  return result;
}
// 1007E2A0: using guessed type int __cdecl qsort(_DWORD, _DWORD, _DWORD, _DWORD);
// 11826AF8: using guessed type int dword_11826AF8;

//----- (10071B60) --------------------------------------------------------
BOOL __cdecl sub_10071B60(const void *a1, const void *a2) {
  return *((float *)a1 + 1) < (double)*((float *)a2 + 1);
}

//----- (10071B80) --------------------------------------------------------
BOOL sub_10071B80() {
  HANDLE *v0;        // esi
  char *v1;          // edi
  HANDLE v2;         // ecx
  BOOL result;       // eax
  HANDLE Handles[2]; // [esp+10h] [ebp-8h] BYREF

  v0 = &dword_11786828;
  v1 = (char *)&dword_11826BD0;
  do {
    v2 = *v0;
    Handles[0] = dword_11826B00;
    Handles[1] = v2;
    if (!WaitForMultipleObjects(2u, Handles, 0, 0xFFFFFFFF))
      ExitThread(0);
    sub_10071BF0(v1);
    result = ReleaseMutex(*v0);
    v1 += 532;
    v0 += 603;
  } while ((int)v1 < (int)&dword_11828D10);
  return result;
}
// 10071BF0: using guessed type _DWORD __cdecl sub_10071BF0(_DWORD);
// 11828D10: using guessed type int dword_11828D10;

//----- (10071BF0) --------------------------------------------------------
int __cdecl sub_10071BF0(_DWORD *a1) {
  meth_unk00214_10073B80(a1);
  return meth_unk00214_10073DC0(a1, dword_11828D10);
}
// 11828D10: using guessed type int dword_11828D10;

//----- (10071C10) --------------------------------------------------------
int sub_10071C10() {
  int v0;                                                    // esi
  _DWORD *v1;                                                // edi
  int *v2;                                                   // ebp
  void *v3;                                                  // ecx
  DWORD(__stdcall * v4)(DWORD, const HANDLE *, BOOL, DWORD); // ebx
  int *v5;                                                   // ebp
  int v6;                                                    // edx
  char v7;                                                   // al
  char v8;                                                   // cl
  char v9;                                                   // al
  int v10;                                                   // edx
  bool v11;                                                  // bl
  int v12;                                                   // edi
  bool v13;                                                  // cc
  int result;                                                // eax
  _DWORD *v15;                                               // [esp+10h] [ebp-448h]
  int v16;                                                   // [esp+14h] [ebp-444h]
  int v17;                                                   // [esp+18h] [ebp-440h]
  int *v18;                                                  // [esp+1Ch] [ebp-43Ch]
  int *v19;                                                  // [esp+20h] [ebp-438h]
  int *v20;                                                  // [esp+24h] [ebp-434h]
  int v21;                                                   // [esp+28h] [ebp-430h]
  HANDLE v22;                                                // [esp+2Ch] [ebp-42Ch] BYREF
  int v23;                                                   // [esp+30h] [ebp-428h]
  int v24;                                                   // [esp+34h] [ebp-424h]
  int v25;                                                   // [esp+38h] [ebp-420h]
  int v26;                                                   // [esp+3Ch] [ebp-41Ch]
  HANDLE v27;                                                // [esp+40h] [ebp-418h] BYREF
  HANDLE hMutex;                                             // [esp+44h] [ebp-414h]
  int v29;                                                   // [esp+48h] [ebp-410h]
  int v30;                                                   // [esp+4Ch] [ebp-40Ch]
  HANDLE Handles[2];                                         // [esp+50h] [ebp-408h] BYREF
  char v32[1024];                                            // [esp+58h] [ebp-400h] BYREF

  v0 = 0;
  v1 = &dword_11826BD0;
  v2 = dword_11786854;
  v21 = 0;
  v17 = 0;
  v15 = &dword_11826BD0;
  v19 = dword_1178FEF8;
  v20 = dword_11786854;
  do {
    v3 = (void *)*(v2 - 11);
    v4 = WaitForMultipleObjects;
    Handles[0] = dword_11826B00;
    Handles[1] = v3;
    if (!WaitForMultipleObjects(2u, Handles, 0, 0xFFFFFFFF))
      ExitThread(0);
    if ((*v2 & 0x3F) != 0) {
      v21 = 1;
      if ((*v2 & 0x3F) == 1) {
        sub_10072080(v1, v0);
      } else {
        v16 = 0;
        v18 = v19;
        v5 = dword_11786858;
        do {
          v6 = *(v5 - 12);
          v22 = dword_11826B00;
          v23 = v6;
          if (!v4(2u, &v22, 0, 0xFFFFFFFF))
              ExitThread(0);
          v23 = *v18;
          if (!v4(2u, &v22, 0, 0xFFFFFFFF))
              ExitThread(0);
          v7 = *((_BYTE *)v5 + 4);
          v30 = *v5;
          v8 = *((_BYTE *)v5 + 5);
          LOBYTE(v26) = v7;
          v9 = *((_BYTE *)v5 + 6);
          LOBYTE(v25) = v8;
          LOBYTE(v24) = v9;
          v10 = *(v5 - 1);
          strcpy(v32, (const char *)v5 + 1324);
          v29 = v10;
          v11 = v18[11] != v10;
          if (v18[11] != v10 && (v10 & 0x3F) == 2 && v17 == v16) {
              v18[11] = v10;
              v11 = 0;
          }
          ReleaseMutex((HANDLE)*v18);
          if (v11)
              sub_10071F40(v15, v16, v29, v30, v26, v25, v24, (int)v32, *(v5 - 11));
          ReleaseMutex((HANDLE) * (v5 - 12));
          v4 = WaitForMultipleObjects;
          v5 += 603;
          ++v16;
          v18 += 603;
        } while ((int)v5 < (int)&unk_1178FF18);
        v2 = v20;
        v0 = v17;
        v1 = v15;
      }
      sub_10072110(v1, v0);
      if (dword_11828D10 > (unsigned int)(v2[588] + 1000) && !dword_1178FEF0 &&
          sub_10072030(v1, v0, v2[589], *((_WORD *)v2 + 1180))) {
        v12 = 0;
        v2[588] = dword_11828D10;
        do {
          if (v0 != v12) {
              v27 = dword_11826B00;
              hMutex = *(&dword_11786828 + 603 * v12);
              if (!v4(2u, &v27, 0, 0xFFFFFFFF))
                  ExitThread(0);
              if ((dword_11786854[603 * v12] & 0x3F) != 0 &&
                  !sub_10072030(v15, v12, dword_11787188[603 * v12], dword_1178718C[603 * v12])) {
                  v12 = 16;
              }
              ReleaseMutex(hMutex);
              v0 = v17;
          }
          ++v12;
        } while (v12 < 16);
        v1 = v15;
      }
    }
    ReleaseMutex((HANDLE) * (v2 - 11));
    ++v0;
    v1 += 133;
    v2 += 603;
    v13 = (int)(v19 + 9648) < (int)&dword_11826AF8;
    v17 = v0;
    v19 += 9648;
    v15 = v1;
    v20 = v2;
  } while (v13);
  result = v21;
  if (!v21)
    dword_1178FEF0 = 0;
  return result;
}
// 11786854: using guessed type int dword_11786854[];
// 11786858: using guessed type int dword_11786858[];
// 11787188: using guessed type int dword_11787188[];
// 1178718C: using guessed type int dword_1178718C[];
// 1178FEF0: using guessed type int dword_1178FEF0;
// 1178FEF8: using guessed type int dword_1178FEF8[];
// 11826AF8: using guessed type int dword_11826AF8;
// 11828D10: using guessed type int dword_11828D10;

//----- (10071F40) --------------------------------------------------------
int __cdecl sub_10071F40(
    _DWORD *a1, char a2, char a3, char a4, char a5, char a6, char a7, int a8, int a9) {
  int v9;           // eax
  unsigned int v10; // ebx
  int v11;          // ebp
  int i;            // edi

  v9 = meth_unk00214_10073F40(a1) + 10;
  v10 = a3 & 0x3F;
  if (v10 <= 2)
    v9 += 24;
  if (v10 == 4)
    v9 += 3;
  if (v9 > 256)
    return 0;
  meth_unk00214_10073D60(a1, a2);
  meth_unk00214_10073D60(a1, a3);
  meth_unk00214_10073D60(a1, a4);
  meth_unk00214_10073D60(a1, a5);
  meth_unk00214_10073D60(a1, a6);
  meth_unk00214_10073D60(a1, a7);
  meth_unk00214_10073E10(a1, a9);
  if ((a3 & 0x3Fu) <= 2) {
    v11 = 0;
    for (i = 0; i < 24; ++i) {
      if (v11) {
        meth_unk00214_10073D60(a1, 0);
      } else {
        meth_unk00214_10073D60(a1, *(_BYTE *)(i + a8));
        if (!*(_BYTE *)(i + a8))
          v11 = 1;
      }
    }
    v10 = a3 & 0x3F;
  }
  if (v10 == 4)
    meth_unk00214_10073DC0(a1, dword_11828D14);
  return 1;
}
// 11828D14: using guessed type int dword_11828D14;

//----- (10072030) --------------------------------------------------------
int __cdecl sub_10072030(_DWORD *a1, char a2, int a3, __int16 a4) {
  if (meth_unk00214_10073F40(a1) + 6 > 256)
    return 0;
  meth_unk00214_10073D60(a1, a2 | 0xC0);
  meth_unk00214_10073DC0(a1, a3);
  meth_unk00214_10073D80(a1, a4);
  return 1;
}

//----- (10072080) --------------------------------------------------------
int __cdecl sub_10072080(_DWORD *a1, char a2) {
  if (meth_unk00214_10073F40(a1) + 9 > 256)
    return 0;
  meth_unk00214_10073D60(a1, a2 | 0xE0);
  meth_unk00214_10073D60(a1, gCPlayers);
  meth_unk00214_10073D60(a1, gChosenTrack);
  meth_unk00214_10073D60(a1, gChosenWeather0);
  meth_unk00214_10073D80(a1, gBcar);
  meth_unk00214_10073D60(a1, dword_10221280);
  meth_unk00214_10073D60(a1, gBtire);
  meth_unk00214_10073D60(a1, gBsuspension);
  return 1;
}
// 100B380C: using guessed type int g_chosenTrack;
// 10221280: using guessed type int dword_10221280;
// 102212C8: using guessed type int g_cPlayers;
// 10221320: using guessed type int g_bcar;
// 1022AF0C: using guessed type int g_bsuspension;
// 1022AF10: using guessed type int g_btire;
// 1022B350: using guessed type int g_ChosenWeather;

//----- (10072110) --------------------------------------------------------
int __cdecl sub_10072110(_DWORD *a1, char a2) {
  _BYTE *v2; // esi

  if (meth_unk00214_10073F40(a1) + 9 > 256)
    return 0;
  meth_unk00214_10073D60(a1, a2 | 0x20);
  v2 = &unk_11826B0C;
  do {
    meth_unk00214_10073D60(a1, (16 * *v2) | *(v2 - 4));
    v2 += 8;
  } while ((int)v2 < (int)&unk_11826B4C);
  return 1;
}

//----- (10072170) --------------------------------------------------------
int __cdecl sub_10072170(_DWORD *a1) {
  int v1;            // edi
  int v2;            // eax
  int v3;            // eax
  int v5;            // [esp-Ch] [ebp-28h]
  int v6;            // [esp-4h] [ebp-20h]
  int v7;            // [esp+10h] [ebp-Ch]
  HANDLE Handles[2]; // [esp+14h] [ebp-8h] BYREF

  v1 = 0;
  v7 = 0;
  do {
    Handles[0] = dword_11826B00;
    Handles[1] = *(&dword_11786828 + 603 * v1);
    if (!WaitForMultipleObjects(2u, Handles, 0, 0xFFFFFFFF))
      ExitThread(0);
    if ((dword_11786854[603 * v1] & 0x3F) != 0 &&
        meth_unk00214_10073F40(&dword_11826BD0[133 * v1]) > 3) {
      if (v1) {
        v6 = meth_unk00214_10073F40(&dword_11826BD0[133 * v1]);
        v3 = meth_unk00214_GetField10(&dword_11826BD0[133 * v1]);
        if (sub_1000C4D0(*a1, 1, dword_1178682C[603 * v1], 0, v3, v6))
          v7 = -1;
      } else {
        v5 = meth_unk00214_10073F40(dword_11826BD0);
        v2 = meth_unk00214_GetField10(dword_11826BD0);
        np_sub_10003580((int)a1, v2, v5, 1);
      }
    }
    ReleaseMutex(*(&dword_11786828 + 603 * v1++));
  } while (v1 < 16);
  return v7;
}
// 1178682C: using guessed type int dword_1178682C[];
// 11786854: using guessed type int dword_11786854[];

//----- (10072270) --------------------------------------------------------
int sub_10072270() {
  int result; // eax

  result = dword_11828D18;
  if (dword_11828D18) {
    SetEvent(dword_11826B00);
    WaitForSingleObject(dword_11828D1C, 0xFFFFFFFF);
    CloseHandle(dword_11828D1C);
    dword_11828D1C = 0;
    result = CloseHandle(dword_11826B00);
    dword_11826B00 = 0;
    dword_11828D18 = 0;
  }
  return result;
}
// 11828D18: using guessed type int dword_11828D18;

//----- (100722D0) --------------------------------------------------------
int __cdecl sub_100722D0(int *a1) {
  int *v1;     // ebp
  int v2;      // eax
  int v3;      // ecx
  int *v4;     // ebx
  int v5;      // esi
  int v6;      // eax
  int result;  // eax
  void *v8;    // [esp+70h] [ebp-34h] BYREF
  int v9;      // [esp+74h] [ebp-30h] BYREF
  char v10[4]; // [esp+78h] [ebp-2Ch] BYREF
  int v11;     // [esp+7Ch] [ebp-28h] BYREF
  int v12;     // [esp+80h] [ebp-24h]
  int v13;     // [esp+84h] [ebp-20h]
  int v14;     // [esp+88h] [ebp-1Ch]
  int v15;     // [esp+8Ch] [ebp-18h]
  int v16;     // [esp+90h] [ebp-14h] BYREF
  char v17;    // [esp+94h] [ebp-10h]

  v11 = 0;
  v1 = a1;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v2 = a1[10];
  v11 = 20;
  v8 = 0;
  v9 = 0;
  v12 = 65762;
  if (v2)
    v12 = 82146;
  v3 = a1[1];
  v15 = a1[2];
  v4 = a1 + 39;
  v13 = v3;
  v5 = g_DSound->lpVtbl->CreateSoundBuffer(
      g_DSound, (LPCDSBUFFERDESC)&v11, (LPDIRECTSOUNDBUFFER *)(a1 + 39), 0);
  if (v5)
    goto LABEL_9;
  v5 = (*(int(__stdcall **)(int, _DWORD, int, void **, char *, int *, int **, _DWORD))(
      *(_DWORD *)*v4 + 44))(*v4, 0, v1[1], &v8, v10, &v9, &a1, 0);
  if (v5)
    goto LABEL_9;
  qmemcpy(v8, (const void *)*v1, v1[1]);
  v5 = (*(int(__stdcall **)(int, void *, int, _DWORD, _DWORD))(*(_DWORD *)*v4 + 76))(
      *v4, v8, v1[1], 0, 0);
  if (v5 ||
      (v8 = 0, (v5 = (*(int(__stdcall **)(int, _DWORD))(*(_DWORD *)*v4 + 60))(*v4, 0)) != 0) ||
      (v5 = (*(int(__stdcall **)(int, _DWORD))(*(_DWORD *)*v4 + 64))(*v4, 0)) != 0 ||
      (v6 = *v4,
       v16 = 20,
       result = (*(int(__stdcall **)(int, int *))(*(_DWORD *)v6 + 12))(v6, &v16),
       (v5 = result) != 0)) {
  LABEL_9:
    if (v8) {
      v5 = (*(int(__stdcall **)(int, void *, int, _DWORD, _DWORD))(*(_DWORD *)*v4 + 76))(
          *v4, v8, v1[1], 0, 0);
      v8 = 0;
    }
    if (*v4) {
      (*(void(__stdcall **)(int))(*(_DWORD *)*v4 + 8))(*v4);
      *v4 = 0;
      return v5;
    }
  } else {
    if ((v17 & 4) != 0) {
      v1[9] = 1;
      return result;
    }
    v1[9] = 0;
  }
  return v5;
}

//----- (10072450) --------------------------------------------------------
int __cdecl sub_10072450(int a1, int a2) {
  int v2; // ecx
  int i;  // eax

  v2 = a1;
  *(_DWORD *)(a2 + 424) = 0;
  *(_DWORD *)(a2 + 28) = 0;
  for (i = *(_DWORD *)(a1 + 424); i; i = *(_DWORD *)(i + 424))
    v2 = i;
  *(_DWORD *)(v2 + 424) = a2;
  return 0;
}

//----- (10072490) --------------------------------------------------------
int __cdecl sub_10072490(int a1) {
  return (*(int(__stdcall **)(_DWORD, int))(**(_DWORD **)(a1 + 156) + 64))(
      *(_DWORD *)(a1 + 156), 10 * (*(_DWORD *)(a1 + 16) - 400));
}

//----- (100724B0) --------------------------------------------------------
int __cdecl sub_100724B0(int a1) {
  return (*(int(__stdcall **)(_DWORD, _DWORD))(**(_DWORD **)(a1 + 156) + 68))(*(_DWORD *)(a1 + 156),
                                                                              *(_DWORD *)(a1 + 12));
}

//----- (100724D0) --------------------------------------------------------
int __cdecl sub_100724D0(int a1) {
  int result; // eax

  if (byte_100BBAE0)
    result = (*(int(__stdcall **)(_DWORD, unsigned int))(**(_DWORD **)(a1 + 156) + 60))(
        *(_DWORD *)(a1 + 156),
        10 * ((unsigned int)(unsigned __int8)byte_100BBAE0 * *(_DWORD *)(a1 + 20) / 0xFF - 400));
  else
    result = (*(int(__stdcall **)(_DWORD, int))(**(_DWORD **)(a1 + 156) + 60))(
        *(_DWORD *)(a1 + 156), -10000);
  return result;
}
// 100BBAE0: using guessed type char byte_100BBAE0;

//----- (10072520) --------------------------------------------------------
int __cdecl sub_10072520(int a1) {
  int v1; // eax

  v1 = *(_DWORD *)(a1 + 156);
  if (v1) {
    (*(void(__stdcall **)(_DWORD))(*(_DWORD *)v1 + 8))(*(_DWORD *)(a1 + 156));
    *(_DWORD *)(a1 + 156) = 0;
  }
  return 0;
}

//----- (10072550) --------------------------------------------------------
int __cdecl sub_10072550(int a1) {
  int result; // eax

  if (!*(_DWORD *)(a1 + 28))
    return 0;
  result = (*(int(__stdcall **)(_DWORD))(**(_DWORD **)(a1 + 156) + 72))(*(_DWORD *)(a1 + 156));
  if (!result)
    *(_DWORD *)(a1 + 28) = 0;
  return result;
}

//----- (10072580) --------------------------------------------------------
BOOL __cdecl sub_10072580(int a1) {
  BOOL result; // eax

  if (gPlaysfx && g_DSound && dword_118290FC && dword_11828F08[a1])
    result = sub_10072550(dword_11828F08[a1]) == 0;
  else
    result = 1;
  return result;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (100725C0) --------------------------------------------------------
BOOL __cdecl sub_100725C0(int a1, int a2) {
  int v2; // eax
  int v3; // eax

  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  LODWORD(dbl_11828E88[a2]) = dword_100B5E30[18 * a1];
  v2 = dword_11828F08[a2];
  HIDWORD(dbl_11828E88[a2]) = dword_100B5E34[18 * a1];
  if (v2)
    sub_10072580(a2);
  v3 = dword_100B5DF0[18 * a1 + a2];
  dword_11828F08[a2] = v3;
  return v3 != 0;
}
// 10072580: using guessed type _DWORD __cdecl sub_10072580(_DWORD);
// 100B5DE8: using guessed type int g_Playsfx;
// 100B5E30: using guessed type int dword_100B5E30[];
// 11828E88: using guessed type double dbl_11828E88[];
// 118290FC: using guessed type int dword_118290FC;

//----- (10072640) --------------------------------------------------------
int __cdecl sub_10072640(int a1, int a2) {
  int v2; // eax

  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  v2 = dword_11828F08[a1];
  if (!v2)
    return 0;
  *(_DWORD *)(v2 + 24) = a2;
  return 1;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10072680) --------------------------------------------------------
int __cdecl sub_10072680(int a1, __int64 a2) {
  int v2; // ecx

  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  if (!sub_10072700(dword_11828F08[a1],
                    (__int64)((double)a2 * dbl_11828E88[a1] * 2.328306436538696e-10)))
    return 0;
  v2 = 3 * a1;
  dword_11828D28[2 * v2] = a2;
  dword_11828D2C[2 * v2] = HIDWORD(a2);
  return 1;
}
// 10072700: using guessed type _DWORD __cdecl sub_10072700(_DWORD, _DWORD);
// 100B5DE8: using guessed type int g_Playsfx;
// 11828D28: using guessed type int dword_11828D28[];
// 11828D2C: using guessed type int dword_11828D2C[];
// 11828E88: using guessed type double dbl_11828E88[];
// 118290FC: using guessed type int dword_118290FC;

//----- (10072700) --------------------------------------------------------
int __cdecl sub_10072700(int a1, int a2) {
  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  if (!a1)
    return 0;
  *(_DWORD *)(a1 + 12) = a2;
  sub_100724B0(a1);
  return 1;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10072750) --------------------------------------------------------
BOOL __cdecl sub_10072750(int a1, int a2, float a3) {
  return sub_10072770(a1, 2 * a2, (__int64)a3);
}

//----- (10072770) --------------------------------------------------------
BOOL __cdecl sub_10072770(int a1, int a2, int a3) {
  BOOL result; // eax

  if (gPlaysfx && g_DSound && dword_118290FC)
    result = sub_10072700(dword_100B5DF0[18 * a1 + a2], a3) != 0;
  else
    result = 1;
  return result;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (100727C0) --------------------------------------------------------
int __cdecl sub_100727C0(int a1, unsigned int a2) {
  int result; // eax

  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  if (!sub_10072820(dword_11828F08[a1], a2))
    return 0;
  result = 1;
  dword_11828D34[6 * a1] = a2;
  return result;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10072820) --------------------------------------------------------
int __cdecl sub_10072820(int a1, unsigned int a2) {
  int v2;        // ecx
  signed int v3; // esi
  int v4;        // eax

  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  if (!a1)
    return 0;
  v2 = (unsigned __int16)a2;
  v3 = HIWORD(a2);
  if (HIWORD(a2) > 0x20u)
    v3 = 32;
  if ((unsigned __int16)a2 > 0x20u)
    v2 = 32;
  if (v3 <= v2) {
    *(_DWORD *)(a1 + 16) = 400;
    *(_DWORD *)(a1 + 20) = 400 * v2 / 32;
    if (v2) {
      v4 = 400 * (v2 - v3) / v2;
      goto LABEL_14;
    }
  } else {
    *(_DWORD *)(a1 + 16) = 400;
    *(_DWORD *)(a1 + 20) = 400 * v3 / 32;
    if (v3) {
      v4 = 400 * (v2 - v3) / v3;
    LABEL_14:
      *(_DWORD *)(a1 + 16) = v4 + 400;
      return !sub_100724D0(a1) && !sub_10072490(a1);
    }
  }
  return !sub_100724D0(a1) && !sub_10072490(a1);
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10072910) --------------------------------------------------------
int __cdecl sub_10072910(int a1, int a2, int a3) {
  int v3;     // ebx
  __int64 v4; // rax
  int v5;     // ecx

  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  v3 = dword_100B5DF0[18 * a1 + a2];
  if (!v3 || sub_100729E0(v3, a3))
    return 0;
  v4 = (__int64)((double)*(unsigned int *)(v3 + 12) * 4294967296.0 / dbl_11828E88[a2]);
  dword_118AC728[6 * a2] = v4;
  dword_118AC72C[6 * a2] = HIDWORD(v4);
  v5 = dword_118AC728[6 * a2];
  dword_11828F08[a2] = v3;
  dword_11828D28[6 * a2] = v5;
  dword_11828D2C[6 * a2] = HIDWORD(v4);
  return 1;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 11828D28: using guessed type int dword_11828D28[];
// 11828D2C: using guessed type int dword_11828D2C[];
// 11828E88: using guessed type double dbl_11828E88[];
// 118290FC: using guessed type int dword_118290FC;
// 118AC728: using guessed type int dword_118AC728[];
// 118AC72C: using guessed type int dword_118AC72C[];

//----- (100729E0) --------------------------------------------------------
int __cdecl sub_100729E0(int a1, int a2) {
  *(_DWORD *)(a1 + 24) = a2;
  return sub_10072A00(a1);
}

//----- (10072A00) --------------------------------------------------------
int __cdecl sub_10072A00(int a1) {
  int v1;     // edi
  int v2;     // eax
  int result; // eax
  int v4;     // [esp+8h] [ebp-4h] BYREF

  v1 = 0;
  v2 = *(_DWORD *)(a1 + 24);
  v4 = 0;
  if (v2)
    v1 = 1;
  if (!(*(int(__stdcall **)(_DWORD, int *))(**(_DWORD **)(a1 + 156) + 36))(*(_DWORD *)(a1 + 156),
                                                                           &v4) &&
      (v4 & 1) == 1) {
    return (*(int(__stdcall **)(_DWORD, _DWORD))(**(_DWORD **)(a1 + 156) + 52))(
        *(_DWORD *)(a1 + 156), 0);
  }
  result = (*(int(__stdcall **)(_DWORD, _DWORD, _DWORD, int))(**(_DWORD **)(a1 + 156) + 48))(
      *(_DWORD *)(a1 + 156), 0, 0, v1);
  if (!result)
    *(_DWORD *)(a1 + 28) = 1;
  return result;
}

//----- (10072A70) --------------------------------------------------------
BOOL __cdecl sub_10072A70(int a1, unsigned int a2, int a3) {
  return sub_10072A90(a1, 1, a2, a3);
}

//----- (10072A90) --------------------------------------------------------
BOOL __cdecl sub_10072A90(int a1, int a2, unsigned int a3, int a4) {
  int v4;      // esi
  BOOL result; // eax

  result = 1;
  if (gPlaysfx) {
    if (g_DSound) {
      if (dword_118290FC) {
        v4 = dword_100B5DF0[18 * a1 + a2];
        if (!sub_10072820(v4, a3) || sub_100729E0(v4, a4))
          result = 0;
      }
    }
  }
  return result;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10072AF0) --------------------------------------------------------
BOOL __cdecl sub_10072AF0(int a1, unsigned int a2) {
  return sub_10072A70(a1, a2, 0);
}

//----- (10072B10) --------------------------------------------------------
BOOL __cdecl sub_10072B10(int a1, int a2, unsigned int a3) {
  return sub_10072A90(a1, 2 * a2, a3, 1);
}

//----- (10072B30) --------------------------------------------------------
BOOL __cdecl sub_10072B30(int a1, int a2, unsigned int a3) {
  BOOL result; // eax

  if (gPlaysfx && g_DSound && dword_118290FC)
    result = sub_10072820(dword_100B5DF0[18 * a1 + a2], a3) != 0;
  else
    result = 1;
  return result;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10072B80) --------------------------------------------------------
BOOL __cdecl sub_10072B80(int a1, int a2, unsigned int a3) {
  return sub_10072B30(a1, 2 * a2, a3);
}

//----- (10072BA0) --------------------------------------------------------
BOOL __cdecl sub_10072BA0(int a1, int a2) {
  int v2;      // edx
  BOOL result; // eax

  if (gPlaysfx && g_DSound && dword_118290FC && (v2 = a2 + 8 * a1, dword_100B5DF0[2 * v2 + 2 * a1]))
    result = sub_10072550(dword_100B5DF0[2 * v2 + 2 * a1]) == 0;
  else
    result = 1;
  return result;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10072BF0) --------------------------------------------------------
int __cdecl sub_10072BF0(int a1) {
  int *v1; // esi
  int v2;  // eax

  v1 = (int *)(a1 + 424);
  v2 = *(_DWORD *)(a1 + 424);
  if (v2) {
    do {
      sub_10072550(v2);
      v1 = (int *)(*v1 + 424);
      v2 = *v1;
    } while (*v1);
  }
  return 0;
}

//----- (10072C20) --------------------------------------------------------
int __cdecl sub_10072C20(int a1) {
  int v1;     // esi
  HGLOBAL v2; // eax
  HGLOBAL v3; // eax
  HGLOBAL v4; // eax
  HGLOBAL v5; // eax
  int v6;     // ebx
  HGLOBAL v7; // eax
  HGLOBAL v8; // eax

  v1 = *(_DWORD *)(a1 + 424);
  *(_DWORD *)(a1 + 424) = 0;
  if (v1) {
    do {
      sub_10072520(v1);
      v2 = GlobalHandle(*(LPCVOID *)(v1 + 8));
      GlobalUnlock(v2);
      v3 = GlobalHandle(*(LPCVOID *)(v1 + 8));
      GlobalFree(v3);
      v4 = GlobalHandle(*(LPCVOID *)v1);
      GlobalUnlock(v4);
      v5 = GlobalHandle(*(LPCVOID *)v1);
      GlobalFree(v5);
      v6 = *(_DWORD *)(v1 + 424);
      v7 = GlobalHandle((LPCVOID)v1);
      GlobalUnlock(v7);
      v8 = GlobalHandle((LPCVOID)v1);
      GlobalFree(v8);
      v1 = v6;
    } while (v6);
  }
  return 0;
}
// 10072520: using guessed type _DWORD __cdecl sub_10072520(_DWORD);

//----- (10072CA0) --------------------------------------------------------
HMMIO __cdecl sub_10072CA0(LPSTR pszFileName) {
  HGLOBAL v1; // eax
  HMMIO v2;   // ebx
  HGLOBAL v3; // eax
  HGLOBAL v4; // eax
  HGLOBAL v5; // eax
  HGLOBAL v6; // eax
  HGLOBAL v7; // eax
  HGLOBAL v8; // eax
  int v10;    // [esp+10h] [ebp-4h] BYREF

  v1 = GlobalAlloc(0x40u, 0x1ACu);
  v2 = (HMMIO)GlobalLock(v1);
  if (v2) {
    *(_DWORD *)v2 = 0;
    *((_DWORD *)v2 + 2) = 0;
    *((_DWORD *)v2 + 39) = 0;
    *((_DWORD *)v2 + 10) = 0;
    strcpy((char *)v2 + 164, pszFileName);
    if (!mm_10076FA0(pszFileName, (int)(v2 + 1), (int)&v10, (int)(v2 + 2), v2) &&
        !sub_100722D0((int *)v2) && !sub_10072450((int)&dword_11828F48, (int)v2)) {
      if (strrchr((const char *)v2 + 164, 92))
        *((_DWORD *)v2 + 40) = &strrchr((const char *)v2 + 164, 92)[-163 - (_DWORD)v2];
      else
        *((_DWORD *)v2 + 40) = 0;
      *(_DWORD *)(v2 + 3) = *(_DWORD *)(HMMIO)(*((_DWORD *)v2 + 2) + 4);
      *((_DWORD *)v2 + 4) = 400;
      *((_DWORD *)v2 + 5) = 400;
      sub_100724D0((int)v2);
      sub_100724B0((int)v2);
      sub_10072490((int)v2);
      return v2;
    }
  }
  if (!v2)
    return v2;
  sub_10072520((int)v2);
  if (*((_DWORD *)v2 + 2)) {
    v3 = GlobalHandle(*((LPCVOID *)v2 + 2));
    GlobalUnlock(v3);
    v4 = GlobalHandle(*((LPCVOID *)v2 + 2));
    GlobalFree(v4);
  }
  if (*(_DWORD *)v2) {
    v5 = GlobalHandle(*(LPCVOID *)v2);
    GlobalUnlock(v5);
    v6 = GlobalHandle(*(LPCVOID *)v2);
    GlobalFree(v6);
  }
  v7 = GlobalHandle(v2);
  GlobalUnlock(v7);
  v8 = GlobalHandle(v2);
  GlobalFree(v8);
  return 0;
}

//----- (10072E00) --------------------------------------------------------
int sub_10072E00() {
  int *v0; // edi
  int v1;  // esi

  if (gPlaysfx && g_DSound && dword_118290FC) {
    v0 = dword_11828F08;
    do {
      v1 = *v0;
      if (*v0) {
        (*(void(__stdcall **)(_DWORD, int))(**(_DWORD **)(v1 + 156) + 60))(*(_DWORD *)(v1 + 156),
                                                                           -10000);
        (*(void(__stdcall **)(_DWORD, _DWORD))(**(_DWORD **)(v1 + 156) + 64))(*(_DWORD *)(v1 + 156),
                                                                              0);
      }
      ++v0;
    } while ((int)v0 < (int)&unk_11828F44);
  }
  return 1;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10072E60) --------------------------------------------------------
int sub_10072E60() {
  int v0;     // esi
  int *v1;    // ebx
  int v2;     // edi
  int v3;     // eax
  int v4;     // eax
  __int64 v6; // [esp-8h] [ebp-18h]
  __int64 v7; // [esp-8h] [ebp-18h]
  __int64 v8; // [esp-8h] [ebp-18h]

  v0 = 0;
  v1 = dword_100B64F8;
  v2 = 0;
  do {
    if (dword_118290F4) {
      v3 = dword_100B5DF0[v0];
      if (v3 && v3 == dword_11828F08[v0]) {
        sub_100725C0(25, v0);
        sub_10072640(v0, 1);
        HIDWORD(v6) = dword_118AC72C[v2];
        LODWORD(v6) = dword_118AC728[v2];
        sub_10072680(v0, v6);
        sub_100727C0(v0, dword_118AC734[v2]);
        sub_10072910(25, v0, 1);
      }
    } else if (*v1 && *v1 == dword_11828F08[v0]) {
      sub_100725C0(0, v0);
      sub_10072640(v0, 1);
      HIDWORD(v7) = dword_118AC72C[v2];
      LODWORD(v7) = dword_118AC728[v2];
      sub_10072680(v0, v7);
      sub_100727C0(v0, dword_118AC734[v2]);
      sub_10072910(0, v0, 1);
    }
    v4 = dword_118AC720[v2];
    if (dword_11828D20[v2] != v4)
      dword_11828D20[v2] = v4;
    if (dword_11828D28[v2] != dword_118AC728[v2] || dword_11828D2C[v2] != dword_118AC72C[v2]) {
      HIDWORD(v8) = dword_118AC72C[v2];
      LODWORD(v8) = dword_118AC728[v2];
      sub_10072680(v0, v8);
    }
    if (dword_11828D34[v2] != dword_118AC734[v2])
      sub_100727C0(v0, dword_118AC734[v2]);
    if (dword_118AC72C[v2] | dword_118AC728[v2] && !pm_sub_10072FE0(v0)) {
      dword_118AC728[v2] = 0;
      dword_11828D28[v2] = 0;
      dword_118AC72C[v2] = 0;
      dword_11828D2C[v2] = 0;
    }
    ++v1;
    ++v0;
    v2 += 6;
  } while ((int)v1 < (int)&unk_100B6534);
  return 1;
}
// 11828D20: using guessed type int dword_11828D20[];
// 11828D28: using guessed type int dword_11828D28[];
// 11828D2C: using guessed type int dword_11828D2C[];
// 118290F4: using guessed type int dword_118290F4;
// 118AC720: using guessed type int dword_118AC720[];
// 118AC728: using guessed type int dword_118AC728[];
// 118AC72C: using guessed type int dword_118AC72C[];
// 118AC734: using guessed type int dword_118AC734[];

//----- (10072FE0) --------------------------------------------------------
BOOL __cdecl pm_sub_10072FE0(int a1) {
  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  if (dword_11828F08[a1])
    return sub_10073020(dword_11828F08[a1]);
  return 0;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 118290FC: using guessed type int dword_118290FC;

//----- (10073020) --------------------------------------------------------
BOOL __cdecl sub_10073020(int a1) {
  BOOL result; // eax
  int v2;      // [esp+8h] [ebp-4h] BYREF

  v2 = 0;
  if ((*(int(__stdcall **)(_DWORD, int *))(**(_DWORD **)(a1 + 156) + 36))(*(_DWORD *)(a1 + 156),
                                                                          &v2))
    result = 0;
  else
    result = (v2 & 1) == 1;
  return result;
}

//----- (10073060) --------------------------------------------------------
int *sub_10073060() {
  int *result; // eax

  result = dword_100B6C00;
  do {
    *(result - 432) = 0;
    *result = 0;
    result[18] = 0;
    ++result;
  } while ((int)result < (int)&unk_100B6C3C);
  return result;
}

//----- (10073080) --------------------------------------------------------
int __cdecl sub_10073080(int a1, int a2) {
  int result; // eax

  result = a2 + 1;
  dword_100B6540[2 * a1] = a2 + 1;
  dword_100B6C00[2 * a1] = a2 + 1;
  dword_100B6C48[2 * a1] = a2 + 1;
  return result;
}

//----- (100730A0) --------------------------------------------------------
int __cdecl sub_100730A0(int a1) {
  int v1;                 // edx
  HMMIO v2;               // eax
  HMMIO v3;               // eax
  HMMIO v4;               // eax
  int v6;                 // [esp+10h] [ebp-408h]
  CHAR pszFileName[1024]; // [esp+18h] [ebp-400h] BYREF

  v6 = 1;
  if (gPlaysfx && g_DSound && dword_118290FC && (v1 = dword_100B6540[2 * a1]) != 0) {
    strcpy(pszFileName, kSfxSlash);
    strcat(pszFileName, (const char *)dword_100B84F4[v1]);
    strcat(pszFileName, aWav);
    v2 = sub_10072CA0(pszFileName);
    dword_100B5DF0[2 * a1] = (int)v2;
    if (!v2)
      v6 = 0;
    strcpy(pszFileName, kSfxSlash);
    strcat(pszFileName, (const char *)dword_100B84F4[dword_100B6C00[2 * a1]]);
    strcat(pszFileName, aHWav);
    v3 = sub_10072CA0(pszFileName);
    dword_100B64B0[2 * a1] = (int)v3;
    if (!v3)
      v6 = 0;
    strcpy(pszFileName, kSfxSlash);
    strcat(pszFileName, (const char *)dword_100B84F4[dword_100B6C48[2 * a1]]);
    strcat(pszFileName, aRWav);
    v4 = sub_10072CA0(pszFileName);
    dword_100B64F8[2 * a1] = (int)v4;
    if (!v4)
      return 0;
  } else {
    dword_100B5DF0[2 * a1] = 0;
    dword_100B64B0[2 * a1] = 0;
    dword_100B64F8[2 * a1] = 0;
  }
  return v6;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 100B84F4: using guessed type int dword_100B84F4[];
// 118290FC: using guessed type int dword_118290FC;

//----- (10073320) --------------------------------------------------------
int __cdecl pm_sub_10073320(int a1) {
  char *v1;               // ebp
  int v2;                 // edi
  int *v3;                // ebx
  int *v4;                // esi
  int v5;                 // ebx
  const char **v6;        // ebp
  HMMIO v7;               // eax
  char *v9;               // [esp+10h] [ebp-410h]
  int v10;                // [esp+10h] [ebp-410h]
  int v11;                // [esp+14h] [ebp-40Ch]
  int v12;                // [esp+18h] [ebp-408h]
  int v13;                // [esp+1Ch] [ebp-404h]
  CHAR pszFileName[1024]; // [esp+20h] [ebp-400h] BYREF

  v11 = 1;
  if (!gPlaysfx || !g_DSound || !dword_118290FC)
    return 1;
  if (a1) {
    if (a1 == 1) {
      v1 = (char *)&unk_100B8938;
      dword_11828F00 = 25;
      v2 = 0;
      v3 = dword_100B64F8;
      v4 = dword_100B64B0;
      do {
        if (dword_100B6540[v2]) {
          if (!sub_100730A0(v2 / 2))
              v11 = 0;
        } else {
          dword_100B5DF0[v2] = 0;
          *v4 = 0;
          *v3 = 0;
        }
        ++v4;
        ++v2;
        ++v3;
      } while ((int)v4 < (int)&unk_100B64EC);
    } else {
      v1 = v9;
    }
  } else {
    v1 = (char *)&unk_100B89A0;
    dword_11828F00 = 9;
  }
  v12 = 1;
  if (dword_11828F00 - 1 > 1) {
    v5 = 72;
    v6 = (const char **)(v1 + 4);
    v10 = 72;
    do {
      v13 = 15;
      do {
        if (*(int *)((char *)dword_100B6540 + v5)) {
          strcpy(pszFileName, kSfxSlash);
          strcat(pszFileName, *v6);
          v7 = sub_10072CA0(pszFileName);
          *(int *)((char *)dword_100B5DF0 + v5) = (int)v7;
          if (!v7)
              v11 = 0;
        } else {
          *(int *)((char *)dword_100B5DF0 + v5) = 0;
        }
        v5 += 4;
        --v13;
      } while (v13);
      v5 = v10 + 72;
      ++v6;
      ++v12;
      v10 += 72;
    } while (v12 < dword_11828F00 - 1);
  }
  return v11;
}
// 100733E2: variable 'v9' is possibly undefined
// 100B5DE8: using guessed type int gPlaysfx;
// 11828F00: using guessed type int dword_11828F00;
// 118290FC: using guessed type int dword_118290FC;

//----- (100734F0) --------------------------------------------------------
int sub_100734F0() {
  int v0;  // esi
  int *v1; // edx
  int *v2; // edi

  if (gPlaysfx && g_DSound && dword_118290FC) {
    sub_10072BF0((int)&dword_11828F48);
    sub_10072C20((int)&dword_11828F48);
    v0 = dword_11828F00;
    if (dword_11828F00 > 0) {
      v1 = dword_100B5DF0;
      do {
        v2 = v1;
        v1 += 18;
        --v0;
        memset(v2, 0, 0x3Cu);
      } while (v0);
    }
    memset(dword_11828F08, 0, sizeof(dword_11828F08));
  }
  return 1;
}
// 100B5DE8: using guessed type int g_Playsfx;
// 11828F00: using guessed type int dword_11828F00;
// 118290FC: using guessed type int dword_118290FC;

//----- (10073730) --------------------------------------------------------
int ReleaseDirectSound() {
  HGLOBAL v1; // eax
  HGLOBAL v2; // eax
  HGLOBAL v3; // eax
  HGLOBAL v4; // eax

  if (--dword_118290FC)
    return 1;
  sub_100734F0();
  if (g_dSoundBuffer) {
    g_dSoundBuffer->lpVtbl->Stop(g_dSoundBuffer);
    g_dSoundBuffer->lpVtbl->Release(g_dSoundBuffer);
    g_dSoundBuffer = 0;
  }
  if (g_DSound) {
    g_DSound->lpVtbl->Release(g_DSound);
    g_DSound = 0;
  }
  if (pMem) {
    v1 = GlobalHandle(pMem);
    GlobalUnlock(v1);
    v2 = GlobalHandle(pMem);
    GlobalFree(v2);
    pMem = 0;
  }
  if (dword_11828F48) {
    v3 = GlobalHandle(dword_11828F48);
    GlobalUnlock(v3);
    v4 = GlobalHandle(dword_11828F48);
    GlobalFree(v4);
    dword_11828F48 = 0;
  }
  return 1;
}
// 118290FC: using guessed type int dword_118290FC;

//----- (100737E0) --------------------------------------------------------
int sub_100737E0() {
  int result; // eax

  dword_11829110 = dword_118AA0B0(&unk_100BAAC8, 0, 64, 64, 1, 4, 0, 0, 1, 1, 15, 15, 1, 0);
  result = sub_10024AE0(dword_11829110);
  dword_1182931C = result;
  return result;
}
// 11829110: using guessed type int dword_11829110;
// 1182931C: using guessed type int dword_1182931C;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10073820) --------------------------------------------------------
int sub_10073820() {
  int i;      // esi
  int j;      // esi
  int k;      // esi
  int l;      // esi
  int result; // eax

  if (dword_100B8C90 <= 1) {
    for (i = 0; i < 27; ++i)
      dword_11829238[i] = graphics_dword_118AA0AC(
          (char *)&unk_1009B4C8 + dword_100A6070[i], 0, 64, 64, 704, 1, 3, 0, 0, 0, 0, 0, 0, 1, 0);
    for (j = 0; j < 26; ++j)
      dword_118292A8[j] = graphics_dword_118AA0AC(
          (char *)&unk_100946C8 + dword_100A60E0[j], 0, 64, 64, 704, 1, 3, 0, 0, 0, 0, 0, 0, 1, 0);
  }
  for (k = 0; k < 27; ++k)
    dword_11829158[k] = graphics_dword_118AA0AC(
        (char *)&unk_100A4170 + dword_100A6150[k], 0, 32, 32, 392, 1, 3, 0, 0, 0, 0, 0, 0, 1, 0);
  for (l = 0; l < 26; ++l) {
    result = graphics_dword_118AA0AC(
        (char *)&unk_100A22D0 + dword_100A61C0[l], 0, 32, 32, 392, 1, 3, 0, 0, 0, 0, 0, 0, 1, 0);
    dword_118291C8[l] = result;
  }
  return result;
}
// 100A6070: using guessed type int dword_100A6070[];
// 100A60E0: using guessed type int dword_100A60E0[];
// 100A6150: using guessed type int dword_100A6150[];
// 100A61C0: using guessed type int dword_100A61C0[];
// 100B8C90: using guessed type int dword_100B8C90;
// 11829158: using guessed type int dword_11829158[];
// 118291C8: using guessed type int dword_118291C8[];
// 11829238: using guessed type int dword_11829238[];
// 118292A8: using guessed type int dword_118292A8[];
// 118AA0AC: using guessed type int (__cdecl *tex_sub_dword_118AA0AC)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10073950) --------------------------------------------------------
int sub_10073950() {
  int result; // eax

  result = dword_118AA0B0(&unk_100B6CA8, 0, 64, 64, 1, 4, 0, 0, 1, 1, 0, 0, 1, 0);
  dword_11829328 = result;
  return result;
}
// 11829328: using guessed type int dword_11829328;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10073980) --------------------------------------------------------
int sub_10073980() {
  int result; // eax

  result = dword_118AA0B0(&unk_100B9CB0, 0, 32, 64, 0, 4, 0, 0, 0, 0, 0, 0, 1, 0);
  dword_11829108 = result;
  return result;
}
// 11829108: using guessed type int dword_11829108;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (100739B0) --------------------------------------------------------
int sub_100739B0() {
  int result; // eax

  result = dword_118AA0B0(&unk_100B94A8, 0, 64, 64, 0, 4, 0, 0, 0, 0, 0, 0, 1, 0);
  dword_11829314 = result;
  return result;
}
// 11829314: using guessed type int dword_11829314;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (100739E0) --------------------------------------------------------
int sub_100739E0() {
  int result; // eax

  result = dword_118AA0B0(&unk_100B8CA0, 0, 64, 64, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0);
  dword_11829324 = result;
  return result;
}
// 11829324: using guessed type int dword_11829324;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10073AC0) --------------------------------------------------------
void *sub_10073AC0() {
  void *result; // eax

  result = (void *)dword_118AA0B0(&lutBuffer_0, &lutBuffer, 32, 128, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0);
  off_100A6498 = result;
  return result;
}
// 100A6498: using guessed type void *off_100A6498;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10073B00) --------------------------------------------------------
void *sub_10073B00() {
  void *result; // eax

  result = (void *)dword_118AA0B0(&ciBuffer_0, &ciBuffer, 32, 128, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0);
  off_100A64A0 = result;
  off_100A649C = result;
  return result;
}
// 100A649C: using guessed type void *off_100A649C;
// 100A64A0: using guessed type void *off_100A64A0;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10073B40) --------------------------------------------------------
void __thiscall meth_unk00214_10073B40_init(unk00214 *this) {
  this->field_8 = 0;
  this->field_C = 0;
  this->field_0 = 0;
  this->field_4 = 0;
  this->field_10 = &this->field_14;
}

//----- (10073B60) --------------------------------------------------------
_DWORD *__thiscall meth_10073B60(_DWORD *this, int a2, int a3) {
  _DWORD *result; // eax

  result = this;
  this[2] = 0;
  *this = 0;
  this[1] = 0;
  this[3] = a3;
  this[4] = a2;
  return result;
}

//----- (10073B80) --------------------------------------------------------
int __thiscall meth_unk00214_10073B80(unk00214 *this) {
  int result; // eax

  result = 0;
  this->field_8 = 0;
  this->field_C = 0;
  this->field_0 = 0;
  this->field_4 = 0;
  return result;
}

//----- (10073BA0) --------------------------------------------------------
int __thiscall meth_10073BA0(_DWORD *this, int a2) {
  int result; // eax

  meth_10073D20(this);
  result = a2;
  this[1] += a2;
  return result;
}

//----- (10073BC0) --------------------------------------------------------
char __thiscall meth_10073BC0(_DWORD *this) {
  int v2;      // ecx
  char result; // al

  meth_10073D20(this);
  v2 = this[1];
  result = *(_BYTE *)(this[4] + v2);
  this[1] = v2 + 1;
  return result;
}

//----- (10073BE0) --------------------------------------------------------
int __thiscall meth_10073BE0(_DWORD *this) {
  int v2;              // ecx
  _BYTE *v3;           // eax
  unsigned __int16 v4; // dx

  meth_10073D20(this);
  v2 = this[1];
  v3 = (_BYTE *)(v2 + this[4]);
  HIBYTE(v4) = *v3;
  LOBYTE(v4) = v3[1];
  this[1] = v2 + 2;
  return v4;
}

//----- (10073C10) --------------------------------------------------------
int __thiscall meth_10073C10(_DWORD *this) {
  int v2;              // ecx
  _BYTE *v3;           // eax
  unsigned __int16 v4; // dx
  int v5;              // eax

  meth_10073D20(this);
  v2 = this[1];
  v3 = (_BYTE *)(v2 + this[4]);
  LOBYTE(v4) = v3[1];
  HIBYTE(v4) = *v3;
  v5 = (unsigned __int8)v3[2];
  this[1] = v2 + 3;
  return (v4 << 8) | v5;
}

//----- (10073C40) --------------------------------------------------------
int __thiscall meth_10073C40(_DWORD *this) {
  int v2;              // edi
  unsigned __int8 *v3; // ecx
  int v4;              // eax
  int v5;              // edx
  int v6;              // ecx

  meth_10073D20(this);
  v2 = this[1];
  v3 = (unsigned __int8 *)(this[4] + v2);
  v4 = v3[1] | ((char)*v3 << 8);
  v5 = v3[2];
  v6 = v3[3];
  this[1] = v2 + 4;
  return v6 | ((v5 | (v4 << 8)) << 8);
}

//----- (10073C90) --------------------------------------------------------
unsigned int __thiscall meth_10073C90(int *this, int a2) {
  int v3;              // ecx
  unsigned int result; // eax
  int v5;              // edx
  char v6;             // di
  int v7;              // ebx
  unsigned int v8;     // ebp
  int v9;              // ecx
  int i;               // [esp+4h] [ebp-4h]

  v3 = a2;
  result = 0;
  for (i = 0; a2; a2 -= v5) {
    v5 = 8 - *this;
    if (v5 <= v3) {
      v6 = 0;
    } else {
      v5 = v3;
      v6 = 8 - *(_BYTE *)this - v3;
    }
    v7 = this[1];
    v8 = (*(char *)(this[4] + v7) & (unsigned int)(((1 << v5) - 1) << v6)) >> v6;
    v9 = v5 + *this;
    *this = v9;
    result = v8 | (result << v5);
    i += v5;
    if (v9 >= 8) {
      *this = 0;
      this[1] = v7 + 1;
    }
    v3 = a2 - v5;
  }
  return result;
}

//----- (10073D20) --------------------------------------------------------
int __thiscall meth_10073D20(_DWORD *this) {
  int v1;     // eax
  int result; // eax

  if (*this) {
    v1 = this[1];
    *this = 0;
    result = v1 + 1;
    this[1] = result;
  }
  return result;
}

//----- (10073D40) --------------------------------------------------------
BOOL __thiscall meth_10073D40(_DWORD *this) {
  int v1; // eax

  v1 = this[1];
  if (*this)
    ++v1;
  return v1 >= this[3];
}

//----- (10073D60) --------------------------------------------------------
int __thiscall meth_unk00214_10073D60(unk00214 *this, char a2) {
  int result; // eax

  meth_unk00214_10073F20(this);
  *((_BYTE *)this->field_10 + this->field_C) = a2;
  result = this->field_C + 1;
  this->field_C = result;
  return result;
}

//----- (10073D80) --------------------------------------------------------
int __thiscall meth_unk00214_10073D80(unk00214 *this, __int16 a2) {
  int *v3;    // edx
  int v4;     // ecx
  int result; // eax

  meth_unk00214_10073F20(this);
  *((_BYTE *)this->field_10 + this->field_C) = HIBYTE(a2);
  v3 = this->field_10;
  v4 = this->field_C + 1;
  this->field_C = v4;
  *((_BYTE *)v3 + v4) = a2;
  result = this->field_C + 1;
  this->field_C = result;
  return result;
}

//----- (10073DC0) --------------------------------------------------------
int __thiscall meth_unk00214_10073DC0(unk00214 *this, int a2) {
  int *v3;    // edi
  int v4;     // ecx
  int *v5;    // edx
  int v6;     // ecx
  int result; // eax

  meth_unk00214_10073F20(this);
  *((_BYTE *)this->field_10 + this->field_C) = BYTE2(a2);
  v3 = this->field_10;
  v4 = this->field_C + 1;
  this->field_C = v4;
  *((_BYTE *)v3 + v4) = BYTE1(a2);
  v5 = this->field_10;
  v6 = this->field_C + 1;
  this->field_C = v6;
  *((_BYTE *)v5 + v6) = a2;
  result = this->field_C + 1;
  this->field_C = result;
  return result;
}

//----- (10073E10) --------------------------------------------------------
int __thiscall meth_unk00214_10073E10(unk00214 *this, int a2) {
  int *v3;    // edi
  int v4;     // ecx
  int *v5;    // edi
  int v6;     // ecx
  int *v7;    // edx
  int v8;     // ecx
  int result; // eax

  meth_unk00214_10073F20(this);
  *((_BYTE *)this->field_10 + this->field_C) = HIBYTE(a2);
  v3 = this->field_10;
  v4 = this->field_C + 1;
  this->field_C = v4;
  *((_BYTE *)v3 + v4) = BYTE2(a2);
  v5 = this->field_10;
  v6 = this->field_C + 1;
  this->field_C = v6;
  *((_BYTE *)v5 + v6) = BYTE1(a2);
  v7 = this->field_10;
  v8 = this->field_C + 1;
  this->field_C = v8;
  *((_BYTE *)v7 + v8) = a2;
  result = this->field_C + 1;
  this->field_C = result;
  return result;
}

//----- (10073E70) --------------------------------------------------------
int __thiscall meth_unk00214_10073E70(_DWORD *this, int a2, int a3) {
  int v3;     // ebp
  int v4;     // edi
  _BYTE *v5;  // edx
  int result; // eax
  int v7;     // eax
  char v8;    // [esp+10h] [ebp+8h]

  v3 = a3;
  while (v3) {
    v4 = 8 - this[2];
    if (v4 <= v3) {
      v8 = 0;
    } else {
      v8 = v4 - v3;
      v4 = v3;
    }
    v3 -= v4;
    v5 = (_BYTE *)(this[4] + this[3]);
    *v5 = (((1 << this[2]) - 1) << (8 - this[2])) & *v5 |
          ((unsigned __int8)((a2 & (unsigned int)(((1 << v4) - 1) << v3)) >> v3) << v8);
    result = v4 + this[2];
    this[2] = result;
    if (result >= 8) {
      v7 = this[3];
      this[2] = 0;
      result = v7 + 1;
      this[3] = result;
    }
  }
  return result;
}

//----- (10073F20) --------------------------------------------------------
int __thiscall meth_unk00214_10073F20(unk00214 *this) {
  int result; // eax
  int v2;     // eax

  result = this->field_8;
  if (result) {
    v2 = this->field_C;
    this->field_8 = 0;
    result = v2 + 1;
    this->field_C = result;
  }
  return result;
}

//----- (10073F40) --------------------------------------------------------
int __thiscall meth_unk00214_10073F40(unk00214 *this) {
  int result; // eax

  result = this->field_C;
  if (this->field_8)
    ++result;
  return result;
}

//----- (10073F50) --------------------------------------------------------
int *__thiscall meth_unk00214_GetField10(unk00214 *this) {
  return this->field_10;
}

//----- (10073F60) --------------------------------------------------------
HMODULE LoadBrstringDll() {
  HMODULE hMod;      // eax
  CHK_File *cFile;   // esi
  HINSTANCE hInst;   // ebx
  LPSTR brStringMem; // edx
  int offset;        // eax
  UINT id;           // edi
  char **brStrPtr;   // esi
  int loadStringRes; // eax
  void *_unused;     // [esp+0h] [ebp-Ch]

  memset(gBrStrings, 0, sizeof(gBrStrings));
  hMod = (HMODULE)gBrstringModule;
  if (!gBrstringModule) {
    cFile = CHK_FReadOpen(kBrStringDll);
    gBrStringFileSize = CHK_GetFileSize(cFile, _unused);
    CHK_FClose(cFile);
    hMod = LoadLibraryA(kBrStringDll);
    hInst = hMod;
    if (hMod) {
      brStringMem = (LPSTR)malloc(gBrStringFileSize);
      gBrstringModule = brStringMem;
      if (brStringMem) {
        offset = gBrStringOffset;
        id = 1;
        brStrPtr = (char **)gBrStrings;
        do {
          loadStringRes = LoadStringA(hInst, id, &brStringMem[offset], gBrStringFileSize - offset);
          brStringMem = gBrstringModule;
          if (loadStringRes) {
              offset = gBrStringOffset + loadStringRes + 1;
              *brStrPtr = &gBrstringModule[gBrStringOffset];
              gBrStringOffset = offset;
          } else {
              offset = gBrStringOffset;
          }
          ++brStrPtr;
          ++id;
        } while ((int)brStrPtr < (int)&gBrstringModule);
      }
      hMod = (HMODULE)FreeLibrary(hInst);
    }
  }
  return hMod;
}
// 10073F8E: variable '_unused' is possibly undefined
// 11829830: using guessed type int gBrStringOffset;

//----- (10074030) --------------------------------------------------------
LPCSTR __cdecl GetStringWithIndex(unsigned int index) {
  LPCSTR result; // eax

  if (index && index < 0x12F)
    result = dword_11829370[index];
  else
    result = NULL;
  return result;
}

//----- (10074050) --------------------------------------------------------
void ReleaseBRString() {
  if (gBrstringModule) {
    free(gBrstringModule);
    gBrstringModule = 0;
    gBrStringOffset = 0;
    gBrStringFileSize = 0;
  }
}
// 11829830: using guessed type int gBrStringOffset;

//----- (10074090) --------------------------------------------------------
float *__cdecl math_10074090(float *a1, float *a2, float *a3) {
  double v4;     // st2
  double v5;     // st4
  double v6;     // st5
  double v7;     // st7
  float *result; // eax
  float v9;      // [esp+0h] [ebp-14h]
  float v10;     // [esp+4h] [ebp-10h]
  float v11;     // [esp+8h] [ebp-Ch]
  float v12;     // [esp+Ch] [ebp-8h]
  float v13;     // [esp+10h] [ebp-4h]
  float v14;     // [esp+1Ch] [ebp+8h]
  float v15;     // [esp+1Ch] [ebp+8h]
  float v16;     // [esp+20h] [ebp+Ch]

  v13 = *a2;
  v10 = a2[1];
  v11 = a2[2];
  v12 = a2[3];
  v14 = *a3;
  v16 = a3[1];
  v4 = v10 * v14;
  v9 = a3[2];
  v5 = v13 * v14 - v10 * v16;
  v6 = v12 * v14 - v11 * v16;
  v7 = v12 * v16 + v11 * v14 + v13 * v9;
  v15 = a3[3];
  result = a1;
  a1[3] = v6 + v10 * v9 + v13 * v15;
  a1[2] = v7 - v10 * v15;
  a1[1] = v4 + v13 * v16 - v12 * v9 + v11 * v15;
  *a1 = v5 - v11 * v9 - v12 * v15;
  return result;
}

//----- (100741B0) --------------------------------------------------------
void __cdecl math_100741B0(float *a1) {
  long double v2; // st6
  long double v3; // st5
  double v4;      // st7
  double v5;      // st6
  float v6;       // [esp+0h] [ebp-Ch]
  float v7;       // [esp+10h] [ebp+4h]

  v6 = a1[1] * a1[1] + a1[2] * a1[2] + a1[3] * a1[3] + *a1 * *a1;
  v2 = 1.0 / sqrt_(v6);
  v7 = v2;
  v3 = v2 * a1[1];
  v4 = v7 * a1[2];
  v5 = v7 * a1[3];
  *a1 = *a1 * v7;
  a1[1] = v3;
  a1[2] = v4;
  a1[3] = v5;
}

//----- (10074250) --------------------------------------------------------
void __cdecl math_10074250(float *a1) {
  long double v2; // st6
  long double v3; // rt1
  double v4;      // st6
  float v5;       // [esp+0h] [ebp-Ch]
  float v6;       // [esp+10h] [ebp+4h]

  v5 = a1[1] * a1[1] + a1[2] * a1[2] + *a1 * *a1;
  v2 = 1.0 / sqrt_(v5);
  v6 = v2;
  v3 = v2 * a1[1];
  v4 = v6 * a1[2];
  *a1 = *a1 * v6;
  a1[1] = v3;
  a1[2] = v4;
}

//----- (100742D0) --------------------------------------------------------
float *__cdecl math_100742D0(float *a1) {
  float *result; // eax
  double v2;     // st7
  double v3;     // st1
  double v4;     // st5
  double v5;     // st4
  double v6;     // st6
  double v7;     // st3
  double v8;     // st7
  float v9;      // [esp+0h] [ebp-Ch]
  float v10;     // [esp+4h] [ebp-8h]
  float v11;     // [esp+8h] [ebp-4h]

  result = a1;
  v2 = a1[11] * 0.5;
  v9 = a1[10] * 0.5;
  v10 = v2;
  v3 = a1[12] * 0.5;
  v11 = v3;
  v4 = v9 * a1[8] + v11 * a1[6];
  v5 = v10 * a1[7];
  v6 = v3 * a1[7] + v10 * a1[6] - v9 * a1[9];
  v7 = -(v9 * a1[7]) - v2 * a1[8] - v11 * a1[9];
  v8 = v10 * a1[9] + v9 * a1[6] - v11 * a1[8];
  a1[13] = v7;
  a1[14] = v8;
  a1[15] = v6;
  a1[16] = v4 - v5;
  return result;
}

//----- (100743A0) --------------------------------------------------------
int __cdecl math_100743A0(int a1, int a2, float a3) {
  int result; // eax
  double v4;  // st7
  double v5;  // rt1
  double v6;  // st6
  double v7;  // rtt
  double v8;  // rt0
  float v9;   // [esp+8h] [ebp-4h]

  v9 = *(float *)(a2 + 260) * a3;
  result = a1;
  v4 = v9 + *(float *)(a1 + 20);
  v5 = *(float *)(a2 + 264) * a3 + *(float *)(a1 + 40);
  v6 = *(float *)(a2 + 268) * a3 + *(float *)(a1 + 44);
  v7 = *(float *)(a2 + 272) * a3 + *(float *)(a1 + 48);
  v8 = *(float *)(a2 + 252) * a3 + *(float *)(a1 + 12);
  *(float *)(a1 + 16) = *(float *)(a2 + 256) * a3 + *(float *)(a1 + 16);
  *(float *)(a1 + 20) = v4;
  *(float *)(a1 + 40) = v5;
  *(float *)(a1 + 12) = v8;
  *(float *)(a1 + 44) = v6;
  *(float *)(a1 + 48) = v7;
  return result;
}

//----- (10074450) --------------------------------------------------------
void __cdecl math_10074450(float *a1, float *a2) {
  double v3;  // st6
  double v4;  // st1
  double v5;  // st3
  double v6;  // rt2
  double v7;  // rt0
  double v8;  // st5
  double v9;  // rt1
  double v10; // st2
  double v11; // st0
  double v12; // st6
  double v13; // rt2
  double v14; // st1
  double v15; // st0
  double v16; // rt0
  double v17; // st0
  double v18; // st3
  float v19;  // [esp+0h] [ebp-1Ch]
  float v20;  // [esp+0h] [ebp-1Ch]
  float v21;  // [esp+0h] [ebp-1Ch]
  float v22;  // [esp+4h] [ebp-18h]
  float v23;  // [esp+4h] [ebp-18h]
  float v24;  // [esp+8h] [ebp-14h]
  float v25;  // [esp+Ch] [ebp-10h]
  float v26;  // [esp+10h] [ebp-Ch]
  float v27;  // [esp+14h] [ebp-8h]
  float v28;  // [esp+18h] [ebp-4h]
  float v29;  // [esp+24h] [ebp+8h]

  v22 = a2[6] * a2[6];
  v3 = a2[8] * a2[7];
  v19 = a2[7] * a2[7];
  v4 = a2[9];
  v5 = v4 * a2[6];
  v6 = a2[8] * a2[6];
  v7 = v4 * a2[8];
  v29 = a2[8] * a2[8];
  v8 = v4 * a2[7];
  v9 = v5 + v5;
  v28 = v22 - v19;
  v10 = v19 + v22 - v29;
  v11 = v3 + v3;
  v12 = v6 + v6;
  v23 = v11;
  v13 = a2[7] * a2[6];
  v14 = v7 + v7;
  v20 = v9;
  v15 = v8 + v8;
  v25 = v15;
  v16 = v15;
  v24 = v12;
  v26 = v14;
  v17 = v13 + v13;
  v27 = v17;
  v18 = v23 - v20;
  v21 = a2[9] * a2[9];
  a1[1] = v9 + v23;
  *a1 = v10 - v21;
  a1[2] = v16 - v24;
  a1[3] = 0.0;
  a1[7] = 0.0;
  a1[4] = v18;
  a1[5] = v29 + v28 - v21;
  a1[6] = v17 + v26;
  a1[8] = v24 + v25;
  a1[11] = 0.0;
  a1[9] = v26 - v27;
  a1[10] = v28 - v29 + v21;
  a1[12] = *a2;
  a1[13] = a2[1];
  a1[14] = a2[2];
  a1[15] = 1.0;
  meth_DebugPrint(a1);
}

//----- (100745F0) --------------------------------------------------------
int __cdecl math_100745F0(int a1, int a2, float a3) {
  double v3;  // st6
  double v4;  // st7
  double v5;  // st7
  double v6;  // st5
  int result; // eax
  float v8;   // [esp+4h] [ebp-Ch]
  float v9;   // [esp+8h] [ebp-8h]
  float v10;  // [esp+Ch] [ebp-4h]

  v3 = a3 * *(float *)(a2 + 16);
  v4 = a3 * *(float *)(a2 + 20);
  *(float *)a1 = a3 * *(float *)(a2 + 12) + *(float *)a2;
  v9 = v4;
  *(float *)(a1 + 4) = *(float *)(a2 + 4) + v3;
  *(float *)(a1 + 8) = *(float *)(a2 + 8) + v9;
  *(_DWORD *)(a1 + 12) = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(a1 + 16) = *(_DWORD *)(a2 + 16);
  *(_DWORD *)(a1 + 20) = *(_DWORD *)(a2 + 20);
  v5 = a3 * *(float *)(a2 + 60);
  v8 = a3 * *(float *)(a2 + 56);
  v6 = a3 * *(float *)(a2 + 64);
  *(float *)(a1 + 24) = a3 * *(float *)(a2 + 52) + *(float *)(a2 + 24);
  v10 = v6;
  *(float *)(a1 + 28) = *(float *)(a2 + 28) + v8;
  *(float *)(a1 + 32) = *(float *)(a2 + 32) + v5;
  *(float *)(a1 + 36) = *(float *)(a2 + 36) + v10;
  math_100741B0((float *)(a1 + 24));
  *(_DWORD *)(a1 + 40) = *(_DWORD *)(a2 + 40);
  *(_DWORD *)(a1 + 44) = *(_DWORD *)(a2 + 44);
  *(_DWORD *)(a1 + 48) = *(_DWORD *)(a2 + 48);
  *(_DWORD *)(a1 + 52) = *(_DWORD *)(a2 + 52);
  *(_DWORD *)(a1 + 56) = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(a1 + 60) = *(_DWORD *)(a2 + 60);
  result = *(_DWORD *)(a2 + 64);
  *(_DWORD *)(a1 + 64) = result;
  return result;
}

//----- (100746E0) --------------------------------------------------------
_DWORD *__cdecl sub_100746E0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8) {
  _DWORD *result; // eax

  result = a1;
  a1[1] = a8;
  a1[2] = a2;
  a1[3] = a3;
  a1[4] = a4;
  a1[5] = a5;
  a1[6] = a6;
  a1[7] = a7;
  return result;
}

//----- (10074720) --------------------------------------------------------
float *__cdecl sub_10074720(float *a1, float *a2, float *a3) {
  float *result; // eax
  int v5;        // ebp
  float *v6;     // edx
  float *v7;     // ecx
  int v8;        // esi
  double v9;     // st7

  result = a1;
  v5 = 3;
  do {
    *result = 0.0;
    v6 = a3;
    v7 = a2;
    v8 = 3;
    do {
      v9 = *v7++ * *v6++;
      --v8;
      *result = v9 + *result;
    } while (v8);
    ++result;
    a2 += 4;
    --v5;
  } while (v5);
  return result;
}

//----- (10074770) --------------------------------------------------------
float *__cdecl sub_10074770(float *a1, int a2, float *a3) {
  float *result; // eax
  int v4;        // ebp
  float *v5;     // edx
  float *v6;     // ecx
  int v7;        // esi
  double v8;     // st7

  result = a1;
  v4 = 3;
  do {
    *result = 0.0;
    v5 = a3;
    v6 = (float *)((char *)result + a2 - (_DWORD)a1);
    v7 = 3;
    do {
      v8 = *v6 * *v5;
      v6 += 4;
      ++v5;
      --v7;
      *result = v8 + *result;
    } while (v7);
    ++result;
    --v4;
  } while (v4);
  return result;
}

//----- (100747C0) --------------------------------------------------------
float *__cdecl sub_100747C0(float *a1, float *a2, float *a3) {
  float *v3;     // eax
  int v4;        // ebp
  float *v5;     // edx
  float *v6;     // ecx
  int v7;        // esi
  double v8;     // st7
  float *result; // eax

  v3 = a1;
  v4 = 3;
  do {
    *v3 = 0.0;
    v5 = a3;
    v6 = (float *)((char *)v3 + (char *)a2 - (char *)a1);
    v7 = 3;
    do {
      v8 = *v5 * *v6;
      v6 += 4;
      ++v5;
      --v7;
      *v3 = v8 + *v3;
    } while (v7);
    ++v3;
    --v4;
  } while (v4);
  result = a1;
  *a1 = a2[12] + *a1;
  a1[1] = a2[13] + a1[1];
  a1[2] = a2[14] + a1[2];
  return result;
}

//----- (10074830) --------------------------------------------------------
float *__cdecl sub_10074830(float *a1, float *a2, float *a3) {
  float *result; // eax
  int v5;        // ebx
  float *v6;     // edx
  int v7;        // esi
  double v8;     // st7

  result = a1;
  v5 = 3;
  do {
    *result = 0.0;
    v6 = a3;
    v7 = 3;
    do {
      v8 = *a2++ * *v6++;
      --v7;
      *result = v8 + *result;
    } while (v7);
    ++result;
    --v5;
  } while (v5);
  return result;
}

//----- (10074870) --------------------------------------------------------
void __cdecl sub_10074870(int a1) {
  int v1;     // ecx
  int v3;     // edx
  int i;      // eax
  int v5;     // ebx
  int v6;     // eax
  double v7;  // st7
  double v8;  // st6
  double v9;  // st5
  double v10; // rt1
  double v11; // st5
  double v12; // st6
  double v13; // st7
  float v14;  // [esp+18h] [ebp+4h]
  float v15;  // [esp+18h] [ebp+4h]

  v1 = 12;
  v3 = 0;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 12) = 0;
  *(_DWORD *)(a1 + 16) = 0;
  *(_DWORD *)(a1 + 20) = 0;
  *(_DWORD *)(a1 + 436) = 0;
  *(_DWORD *)(a1 + 412) = 0;
  *(_DWORD *)(a1 + 452) = 0;
  *(_DWORD *)(a1 + 448) = 1043475726;
  *(_DWORD *)(a1 + 460) = 0;
  *(_DWORD *)(a1 + 464) = 0;
  *(_DWORD *)(a1 + 456) = 1056964608;
  do {
    for (i = 0; i < 3; ++i) {
      v5 = i + v1;
      if (v3 == i)
        *(_DWORD *)(a1 + 4 * v5) = 1065353216;
      else
        *(_DWORD *)(a1 + 4 * v5) = 0;
    }
    v1 += 3;
    ++v3;
  } while (v1 < 21);
  v6 = *(_DWORD *)(a1 + 28);
  if (v6 >= 0 && v6 <= 1) {
    v7 = *(float *)(a1 + 32) * *(float *)(a1 + 32);
    v14 = *(float *)(a1 + 40) * *(float *)(a1 + 40);
    v8 = v14;
    v9 = v7 + v14;
    v15 = *(float *)(a1 + 36) * *(float *)(a1 + 36);
    v10 = v9;
    v11 = (v8 + v15) * *(float *)(a1 + 44);
    v12 = v10 * *(float *)(a1 + 44) * 0.083333336;
    v13 = (v7 + v15) * *(float *)(a1 + 44) * 0.083333336;
    *(float *)(a1 + 48) = v11 * 0.083333336;
    *(float *)(a1 + 64) = v12;
    *(float *)(a1 + 80) = v13;
    nullsub_2();
  }
  if (*(_DWORD *)(a1 + 28) != 2) {
    *(float *)(a1 + 84) = 1.0 / *(float *)(a1 + 48);
    *(float *)(a1 + 100) = 1.0 / *(float *)(a1 + 64);
    *(float *)(a1 + 116) = 1.0 / *(float *)(a1 + 80);
  }
  *(_DWORD *)(a1 + 468) = 0;
  *(_DWORD *)(a1 + 472) = 0;
}

//----- (100749D0) --------------------------------------------------------
int __cdecl sub_100749D0(int a1, int a2) {
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 32) = 0;
  *(_DWORD *)(a1 + 16) = 0;
  *(_DWORD *)a1 = 0;
  *(float *)(a1 + 4) = -*(float *)(a2 + 8);
  *(_DWORD *)(a1 + 8) = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a1 + 12) = *(_DWORD *)(a2 + 8);
  *(float *)(a1 + 20) = -*(float *)a2;
  *(float *)(a1 + 24) = -*(float *)(a2 + 4);
  *(_DWORD *)(a1 + 28) = *(_DWORD *)a2;
  return result;
}

//----- (10074A10) --------------------------------------------------------
int __cdecl sub_10074A10(float *a1, int a2, float *a3) {
  int result; // eax
  int v6;     // ebp
  float *v7;  // ecx
  float *v8;  // edx
  int v9;     // esi
  double v10; // st7

  result = a2;
  v6 = 3;
  do {
    v7 = a3;
    v8 = a1;
    v9 = 3;
    do {
      v10 = *v7++;
      result += 4;
      *v8 = v10;
      *(float *)(result - 4) = v10;
      v8 += 3;
      --v9;
    } while (v9);
    a3 += 4;
    ++a1;
    --v6;
  } while (v6);
  return result;
}

//----- (10074A50) --------------------------------------------------------
int *__cdecl sub_10074A50(_DWORD *a1, int *a2) {
  int v4;      // ebx
  int *result; // eax
  _DWORD *v6;  // ecx
  int v7;      // edx
  int v8;      // ebp

  v4 = 3;
  do {
    result = a2;
    v6 = a1;
    v7 = 3;
    do {
      v8 = *result++;
      *v6 = v8;
      v6 += 3;
      --v7;
    } while (v7);
    a2 += 4;
    ++a1;
    --v4;
  } while (v4);
  return result;
}

//----- (10074A90) --------------------------------------------------------
_DWORD *__cdecl sub_10074A90(_DWORD *a1, int *a2) {
  _DWORD *result; // eax
  int v4;         // edi
  int *v5;        // ecx
  int v6;         // edx
  int v7;         // ebx

  result = a1;
  v4 = 3;
  do {
    v5 = a2;
    v6 = 3;
    do {
      v7 = *v5++;
      *result++ = v7;
      --v6;
    } while (v6);
    a2 += 4;
    --v4;
  } while (v4);
  return result;
}

//----- (10074AC0) --------------------------------------------------------
float *__cdecl sub_10074AC0(int a1, int a2, int a3) {
  float *v4;     // ecx
  int v5;        // ebx
  float *result; // eax
  int v7;        // esi
  double v8;     // st6
  double v9;     // st7

  v4 = (float *)(a2 + 4);
  v5 = 3;
  do {
    result = (float *)(a3 + 12);
    v7 = 3;
    do {
      v8 = result[3] * v4[1];
      v9 = *v4 * *result + *(result - 3) * *(v4 - 1);
      ++result;
      a1 += 4;
      --v7;
      *(float *)(a1 - 4) = v9 + v8;
    } while (v7);
    v4 += 3;
    --v5;
  } while (v5);
  return result;
}

//----- (10074B20) --------------------------------------------------------
float *__cdecl sub_10074B20(int a1, int a2, float *a3) {
  float *result; // eax
  int v5;        // esi
  double v6;     // st7
  int v7;        // [esp+1Ch] [ebp+Ch]

  v7 = 3;
  result = a3;
  do {
    v5 = 3;
    do {
      v6 = *(float *)((char *)result + a2 - (_DWORD)a3) - *result;
      ++result;
      --v5;
      *(float *)((char *)result + a1 - (_DWORD)a3 - 4) = v6;
    } while (v5);
    --v7;
  } while (v7);
  return result;
}

//----- (10074B70) --------------------------------------------------------
float *__cdecl sub_10074B70(float *a1, int a2, int a3) {
  float *v3;    // ebx
  int v4;       // edi
  int v5;       // edx
  float *v6;    // eax
  float *v7;    // ecx
  int v8;       // esi
  double v9;    // st7
  int v11;      // [esp+10h] [ebp-10h]
  float v12[3]; // [esp+14h] [ebp-Ch] BYREF

  v3 = a1;
  v4 = a2;
  v11 = 3;
  do {
    v5 = a3;
    v6 = (float *)v4;
    v7 = v3;
    v8 = 3;
    do {
      v9 = *v7;
      v7 += 4;
      v5 += 4;
      *v6++ = v9;
      --v8;
      *(v6 - 1) = *(float *)(v5 - 4) * v9;
    } while (v8);
    *(_DWORD *)(v4 + 12) = 0;
    ++v3;
    v4 += 16;
    --v11;
  } while (v11);
  *(_DWORD *)(a2 + 60) = 1065353216;
  v12[0] = -a1[12];
  v12[1] = -a1[13];
  v12[2] = -a1[14];
  return sub_10074770((float *)(a2 + 48), a2, v12);
}

//----- (10074C10) --------------------------------------------------------
float *__cdecl sub_10074C10(float *a1, float *a2, float *a3) {
  float *result; // eax
  double v4;     // st7
  double v5;     // st6
  double v6;     // st5
  double v7;     // rt0
  double v8;     // st3
  double v9;     // st4
  double v10;    // st7
  float v11;     // [esp+0h] [ebp-10h]
  float v12;     // [esp+4h] [ebp-Ch]
  float v13;     // [esp+8h] [ebp-8h]
  float v14;     // [esp+Ch] [ebp-4h]
  float v15;     // [esp+18h] [ebp+8h]
  float v16;     // [esp+18h] [ebp+8h]

  result = a2;
  v4 = a2[7] * a2[5];
  v5 = a2[1] * a2[8];
  v6 = a2[2];
  v15 = a2[4] * a2[8];
  v7 = v4 - v15;
  v16 = v5;
  v11 = v7;
  v8 = v6 * result[7];
  v12 = v8;
  v13 = result[1] * result[5];
  v9 = result[2] * result[4];
  v14 = v9;
  v10 = 1.0 / (v5 * result[3] + *result * v11 - v8 * result[3] - v13 * result[6] + v9 * result[6]);
  *a1 = (*a3 * v11 + v16 * a3[1] - v12 * a3[1] - v13 * a3[2] + v14 * a3[2]) * v10;
  a1[1] = -(((result[6] * result[5] - result[3] * result[8]) * *a3 + *result * result[8] * a3[1] -
             result[6] * result[2] * a3[1] - *result * result[5] * a3[2] +
             result[3] * result[2] * a3[2]) *
            v10);
  a1[2] = ((result[6] * result[4] - result[3] * result[7]) * *a3 + *result * result[7] * a3[1] -
           result[6] * result[1] * a3[1] - *result * result[4] * a3[2] +
           result[3] * result[1] * a3[2]) *
          v10;
  return result;
}

//----- (10074DC0) --------------------------------------------------------
int __cdecl sub_10074DC0(int a1) {
  int result; // eax

  result = a1;
  dword_118AA088 = a1;
  return result;
}
// 118AA088: using guessed type int dword_118AA088;

//----- (10074DD0) --------------------------------------------------------
int sub_10074DD0() {
  int v0;     // ecx
  _BYTE *v1;  // eax
  int result; // eax

  sub_100737E0();
  sub_10073820();
  sub_10073950();
  sub_10073980();
  sub_100739B0();
  sub_100739E0();
  dword_11829100[0] = dword_118AA0B0(&unk_104B3DE8, 0, 64, 64, 1, 4, 0, 0, 1, 1, 0, 0, 1, 0);
  dword_11829104 = dword_118AA0B0(&unk_104B7DE8, 0, 64, 64, 1, 4, 0, 0, 1, 1, 0, 0, 1, 0);
  v0 = 0;
  v1 = &unk_11829331;
  do {
    *(v1 - 1) = -1;
    *v1 = -1;
    v1[1] = -1;
    v1[2] = v0 | (16 * v0);
    v1 += 4;
    ++v0;
  } while ((int)v1 < (int)dword_11829370 + 1);
  result = (int)graphics_100098A0(byte_11829118, (unsigned __int8 *)&unk_11829330, 64, 2) / 16;
  dword_11829318 = result;
  return result;
}
// 11829100: using guessed type int dword_11829100[];
// 11829104: using guessed type int dword_11829104;
// 11829318: using guessed type int dword_11829318;
// 118AA0B0: using guessed type int (__cdecl *dword_118AA0B0)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10074E00) --------------------------------------------------------
int sub_10074E00() {
  int result; // eax

  result = 0;
  memset(dword_11829850, 0, sizeof(dword_11829850));
  return result;
}

//----- (10074E20) --------------------------------------------------------
_DWORD *__cdecl sub_10074E20(_DWORD *a1) {
  _DWORD *result; // eax
  int v2;         // edx

  result = a1;
  v2 = 8;
  do {
    *result = *(_DWORD *)((char *)result + (char *)dword_11829850 - (char *)a1);
    ++result;
    --v2;
  } while (v2);
  return result;
}

//----- (10074E40) --------------------------------------------------------
int __cdecl sub_10074E40(int a1, int a2, int a3) {
  int result; // eax
  int v4;     // esi
  int v5;     // ecx
  int v6;     // eax
  int v7[3];  // [esp+8h] [ebp-Ch]

  result = a1;
  if (a1 >= 0 && a1 < 8) {
    v4 = 0;
    if (*(int *)(a3 + 4 * a1) < 3) {
      v7[0] = a1;
      v4 = 1;
    }
    v5 = a1 - 1 + (a1 - 1 < 0 ? 8 : 0);
    if (*(int *)(a3 + 4 * v5) < 3)
      v7[v4++] = v5;
    result = a1 + 1;
    if (a1 + 1 >= 8)
      result = a1 - 7;
    if (*(int *)(a3 + 4 * result) < 3)
      v7[v4++] = result;
    if (v4) {
      v6 = rand();
      result = sub_10074ED0(v7[v4 * v6 / 0x8000], a2, a3);
    }
  }
  return result;
}

//----- (10074ED0) --------------------------------------------------------
int __cdecl sub_10074ED0(int a1, int a2, int a3) {
  int result; // eax
  int v4;     // eax

  result = a1;
  if (a1 >= 0 && a1 < 8) {
    result = *(_DWORD *)(a3 + 4 * a1);
    if (result < 3) {
      v4 = result + 1;
      *(_DWORD *)(a3 + 4 * a1) = v4;
      sub_10025800(*(_DWORD *)(a2 + 4 * a1), v4);
      result = dword_118AA0C0(*(_DWORD *)(a2 + 4 * a1));
    }
  }
  return result;
}
// 118AA0C0: using guessed type int (__cdecl *dword_118AA0C0)(_DWORD);

//----- (10074F20) --------------------------------------------------------
HANDLE sub_10074F20() {
  HANDLE result; // eax

  dword_118A9878 = 0;
  dword_118AA098 = 0;
  result = CreateMutexA(0, 0, 0);
  dword_118AA0A0 = result;
  return result;
}
// 118A9878: using guessed type int dword_118A9878;
// 118AA098: using guessed type int dword_118AA098;

//----- (10074F40) --------------------------------------------------------
BOOL sub_10074F40() {
  BOOL result; // eax

  dword_118A9878 = 0;
  dword_118AA098 = 0;
  result = CloseHandle(dword_118AA0A0);
  dword_118AA0A0 = 0;
  return result;
}
// 118A9878: using guessed type int dword_118A9878;
// 118AA098: using guessed type int dword_118AA098;

//----- (10074F70) --------------------------------------------------------
BOOL __cdecl sub_10074F70(int a1, int a2) {
  int v2; // eax

  WaitForSingleObject(dword_118AA0A0, 0xFFFFFFFF);
  v2 = dword_118A9878;
  *(&dword_118A9880 + 2 * dword_118A9878) = a1;
  dword_118A9884[2 * v2] = a2;
  dword_118A9878 = v2 + 1;
  if (v2 + 1 >= 256)
    dword_118A9878 = 0;
  return ReleaseMutex(dword_118AA0A0);
}
// 118A9878: using guessed type int dword_118A9878;

//----- (10074FC0) --------------------------------------------------------
BOOL sub_10074FC0() {
  WaitForSingleObject(dword_118AA0A0, 0xFFFFFFFF);
  if (dword_118AA098 != dword_118A9878) {
    dword_118AA0B8(*(&dword_118A9880 + 2 * dword_118AA098), dword_118A9884[2 * dword_118AA098]);
    if (++dword_118AA098 >= 256)
      dword_118AA098 = 0;
  }
  return ReleaseMutex(dword_118AA0A0);
}
// 118A9878: using guessed type int dword_118A9878;
// 118AA098: using guessed type int dword_118AA098;
// 118AA0B8: using guessed type int (__cdecl *dword_118AA0B8)(_DWORD, _DWORD);

//----- (10075020) --------------------------------------------------------
DWORD getTicks() {
  DWORD result;                   // eax
  LARGE_INTEGER PerformanceCount; // [esp+4h] [ebp-8h] BYREF

  if (needToCheckSupportHRPC) {
    supportsHRPerformanceCounter = QueryPerformanceFrequency(&Frequency);
    QueryPerformanceCounter(&PerformanceCount);
    performanceSomething = (1000 * PerformanceCount.QuadPart + 500) / Frequency.QuadPart;
    needToCheckSupportHRPC = 0;
  }
  if (supportsHRPerformanceCounter && QueryPerformanceCounter(&PerformanceCount))
    result = (1000 * PerformanceCount.QuadPart + 500) / Frequency.QuadPart - performanceSomething;
  else
    result = timeGetTime();
  return result;
}
// 100BBAD4: using guessed type int needToCheckSupportHRPC;
// 118AB128: using guessed type int supportsHRPerformanceCounter;
// 118AB130: using guessed type int performanceSomething;

//----- (100750F0) --------------------------------------------------------
int sub_100750F0() {
  return dword_118AB118;
}
// 118AB118: using guessed type int dword_118AB118;

//----- (10075100) --------------------------------------------------------
DWORD sub_10075100() {
  DWORD v0;        // eax
  unsigned int v1; // esi
  DWORD result;    // eax

  v0 = getTicks();
  dword_118AB12C = 0;
  dword_118AB118 = v0;
  v1 = v0 % 0x64 / 0x21;
  result = 3 * (v0 / 0x64);
  dword_118AB134 = result + v1;
  return result;
}
// 118AB118: using guessed type int dword_118AB118;
// 118AB12C: using guessed type int dword_118AB12C;
// 118AB134: using guessed type int dword_118AB134;

//----- (10075150) --------------------------------------------------------
int sub_10075150() {
  int v0;     // eax
  int v1;     // ecx
  int result; // eax

  v0 = ++dword_118AB12C;
  if (dword_118AB12C > 2) {
    v0 = 0;
    dword_118AB12C = 0;
  }
  v1 = dword_100BBAC8[v0] + dword_118AB118;
  result = dword_118AB134 + 1;
  dword_118AB118 = v1;
  ++dword_118AB134;
  return result;
}
// 118AB118: using guessed type int dword_118AB118;
// 118AB12C: using guessed type int dword_118AB12C;
// 118AB134: using guessed type int dword_118AB134;

//----- (10075190) --------------------------------------------------------
DWORD __thiscall meth_10075190(int this) {
  DWORD result; // eax
  int v3;       // edx

  if (dword_118AB144) {
    result = QueryPerformanceCounter((LARGE_INTEGER *)(this + 8));
    v3 = *(_DWORD *)(this + 4);
    *(_DWORD *)(this + 16) = *(_DWORD *)this;
    *(_DWORD *)(this + 20) = v3;
  } else {
    *(_DWORD *)(this + 28) = getTicks();
    result = *(_DWORD *)(this + 24);
    *(_DWORD *)(this + 32) = result;
  }
  return result;
}
// 118AB144: using guessed type int dword_118AB144;

//----- (10075260) --------------------------------------------------------
int __cdecl time_10075260(__int16 a1, int a2, int a3, int a4, int a5) {
  int v5;     // eax
  int result; // eax

  v5 = 6 * a1;
  dword_118AC720[v5] = a2;
  dword_118AC730[v5] = 0;
  dword_118AC734[v5] = a5;
  result = sub_100725C0(a2, a1);
  if (result) {
    sub_10072640(a1, a4);
    sub_100727C0(a1, a5);
    result = sub_10072910(a2, a1, a4);
  }
  return result;
}
// 118AC720: using guessed type int dword_118AC720[];
// 118AC730: using guessed type int dword_118AC730[];
// 118AC734: using guessed type int dword_118AC734[];

//----- (100752D0) --------------------------------------------------------
int __cdecl time_100752D0(__int16 a1, int a2, int a3, int a4) {
  return time_10075260(a1, a2, a3, a4, 2097184);
}

//----- (10075340) --------------------------------------------------------
int __thiscall meth_10075340(_DWORD *this) {
  int result; // eax

  result = 0;
  this[15] = 1065353216;
  this[11] = 0;
  this[7] = 0;
  this[3] = 0;
  return result;
}

//----- (10075360) --------------------------------------------------------
int __thiscall meth_10075360(int this) {
  int v1;              // edi
  float *v2;           // ebx
  unsigned __int8 v3;  // cl
  unsigned __int8 v4;  // dl
  int v5;              // eax
  int v6;              // eax
  int v7;              // ebp
  int v8;              // edi
  int v9;              // ebx
  int v10;             // edx
  int v11;             // ecx
  int v12;             // edi
  int v13;             // ebp
  float *v14;          // esi
  double v15;          // st6
  double v16;          // st4
  double v17;          // rt2
  double v18;          // st4
  double v19;          // rtt
  double v20;          // rt0
  double v21;          // st6
  double v22;          // st7
  float *v23;          // esi
  double v24;          // st7
  float v25;           // edx
  unsigned __int8 v27; // [esp+12h] [ebp-46h]
  unsigned __int8 v28; // [esp+13h] [ebp-45h]
  float v29;           // [esp+14h] [ebp-44h]
  float v30;           // [esp+14h] [ebp-44h]
  float v31;           // [esp+14h] [ebp-44h]
  float v32;           // [esp+14h] [ebp-44h]
  int v33;             // [esp+18h] [ebp-40h]
  int v34;             // [esp+1Ch] [ebp-3Ch]
  float v35;           // [esp+1Ch] [ebp-3Ch]
  float v36;           // [esp+20h] [ebp-38h]
  float v37;           // [esp+24h] [ebp-34h]
  int v38;             // [esp+28h] [ebp-30h]
  float *v39;          // [esp+2Ch] [ebp-2Ch]
  float v41;           // [esp+34h] [ebp-24h]
  float v42;           // [esp+38h] [ebp-20h]
  float v43;           // [esp+3Ch] [ebp-1Ch]
  float v44;           // [esp+40h] [ebp-18h] BYREF
  float v45;           // [esp+44h] [ebp-14h]
  int v46;             // [esp+48h] [ebp-10h]
  float v47[3];        // [esp+4Ch] [ebp-Ch] BYREF

  v1 = this;
  v34 = -1;
  v2 = (float *)(this + 48);
  v41 = *(float *)(this + 48);
  v42 = *(float *)(this + 52);
  v3 = *(_BYTE *)(this + 10684);
  v43 = *(float *)(this + 56);
  v4 = *(_BYTE *)(this + 10685);
  v38 = 0;
  v39 = (float *)(this + 48);
  v33 = 1;
  v27 = v3;
  v28 = v4;
  if ((gChosenTrack == 3 || gChosenTrack == 9) && v3 >= 0x38u && v3 <= 0x3Au && v4 >= 0x17u &&
      v4 <= 0x1Bu) {
    v27 = 57;
    v28 = 25;
    v33 = 0;
  }
  v36 = *(float *)(v1 + 4084) - (double)*(int *)(v1 + 4012) * *(float *)(MEMORY[0x106C7CB8] + 100);
  if (!v33 ||
      (v5 = *(_DWORD *)(v1 + 3980) + 40 * *(_DWORD *)(v1 + 3984),
       sub_1003BC90(
           (float *)(v5 + 64), (float *)(v5 + 88), (float *)(v1 + 3968), (float *)(this + 48))) ||
      (v6 = *(_DWORD *)(v1 + 3980) + 40 * *(_DWORD *)(v1 + 3984),
       sub_1003BC90((float *)(v6 + 104), (float *)(v6 + 128), (float *)(v1 + 3968), v2)) ||
      sub_1003B0E0(v2, (float *)(*(_DWORD *)(v1 + 3980) + 40 * *(_DWORD *)(v1 + 3984) + 76)) >=
          64.0) {
    v9 = 0;
    v37 = (MEMORY[0x106C7C74] - MEMORY[0x106C7C70]) * (MEMORY[0x106C7C74] - MEMORY[0x106C7C70]);
    if (MEMORY[0x106C7CC4] > 0) {
      v10 = MEMORY[0x106C7CB8];
      do {
        if (*(_DWORD *)(v1 + 320) < dword_100B4050 || gGameMode == GAME_MODE_2 ||
            (*(_BYTE *)(*(_DWORD *)(MEMORY[0x106C7CC0] + 4 * v9) + 22) & 1) == 0) {
          v11 = *(_DWORD *)(MEMORY[0x106C7CC0] + 4 * v9);
          if (v27 >= *(_BYTE *)(v11 + 16) && v27 <= *(_BYTE *)(v11 + 18) &&
              v28 >= *(_BYTE *)(v11 + 17) && v28 <= *(_BYTE *)(v11 + 19) &&
              (!v33 || *(float *)(v10 + 100) - *(float *)(v11 + 100) - v36 <= 1000.0 &&
                           v36 - (*(float *)(v10 + 100) -
                                  *(float *)(v11 + 40 * *(unsigned __int16 *)(v11 + 20) + 100)) <=
                               1000.0)) {
              v12 = 0;
              v13 = *(unsigned __int16 *)(v11 + 20);
              if ((_WORD)v13) {
                  v14 = (float *)(v11 + 84);
                  do {
                      v15 = *v14 - v43;
                      v16 = *(v14 - 2) - v41;
                      v17 = v16 * v16;
                      v18 = *(v14 - 1) - v42;
                      v29 = v18;
                      v19 = v18 * v29;
                      v30 = v15;
                      v20 = v15 * v30;
                      v31 = v19 + v17;
                      v21 = v20 + v31;
                      if (v21 < v37) {
                          v22 = *(v14 - 4) - v14[2];
                          v46 = 0;
                          v44 = v22;
                          v45 = v14[1] - *(v14 - 5);
                          sub_1003AEE0(v47, v39, v14 - 2);
                          if (sub_1003AC90(&v44, v47) >= 0.0) {
                              v34 = v12;
                              v32 = v21;
                              v37 = v32;
                              v38 = v9;
                          }
                      }
                      ++v12;
                      v14 += 10;
                  } while (v12 < v13);
                  v10 = MEMORY[0x106C7CB8];
              }
              v1 = this;
          }
        }
        ++v9;
      } while (v9 < MEMORY[0x106C7CC4]);
    }
    if (v34 == -1)
      return 0;
    v8 = v34;
    v7 = *(_DWORD *)(MEMORY[0x106C7CC0] + 4 * v38);
  } else {
    v7 = *(_DWORD *)(v1 + 3980);
    v8 = *(_DWORD *)(v1 + 3984);
  }
  v23 = (float *)(v7 + 40 * v8);
  v44 = v23[17] - v23[23];
  v24 = v23[22] - v23[16];
  v46 = 0;
  v45 = v24;
  sub_1003AE50(&v44);
  sub_1003AEE0(v47, v39, v23 + 19);
  v35 = (double)(*(_DWORD *)(this + 4012) + 1) * *(float *)(MEMORY[0x106C7CB8] + 100) - v23[25] +
        sub_1003AC90(&v44, v47) - *(float *)(this + 4084);
  if (!v33 || v35 > -1000.0 && v35 < 1000.0)
    *(float *)(this + 4084) = v35 + *(float *)(this + 4084);
  v25 = v45;
  *(float *)(this + 3988) = v44;
  *(_DWORD *)(this + 3996) = v46;
  *(_DWORD *)(this + 3980) = v7;
  *(_DWORD *)(this + 3984) = v8;
  *(float *)(this + 3992) = v25;
  return 1;
}
// 100B380C: using guessed type int gChosenTrack;
// 100B4050: using guessed type int dword_100B4050;
// 106C7C70: using guessed type float flt_106C7C70;
// 106C7C74: using guessed type float flt_106C7C74;
// 106C7CC0: using guessed type int dword_106C7CC0;
// 106C7CC4: using guessed type int dword_106C7CC4;

//----- (10075780) --------------------------------------------------------
void __thiscall meth_10075780(int this) {
  double v1; // st7
  char v3;   // c0

  if ((*(_BYTE *)(*(_DWORD *)(this + 3840) + 104) & 3) == 0) {
    v1 = *(float *)&dword_106C2CFC;
    if (gGameMode == GAME_MODE_3) {
      *(float *)(this + 4016) = v1 + *(float *)(this + 4016);
    } else {
      *(float *)(this + 4076) = v1 + *(float *)(this + 4076);
      *(float *)(this + 4016) = *(float *)&dword_106C2CFC + *(float *)(this + 4016);
      if (gGameMode == GAME_MODE_1 || gGameMode == GAME_MODE_6) {
        *(float *)(this + 4080) = *(float *)(this + 4080) - *(float *)&dword_106C2CFC;
        if (v3)
          *(_DWORD *)(this + 4080) = 0;
      }
    }
  }
}
// 100757F7: variable 'v3' is possibly undefined
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (10075810) --------------------------------------------------------
void __thiscall meth_10075810(int this) {
  unsigned __int8 v2; // c0
  unsigned __int8 v3; // c3
  unsigned __int8 v5; // c0
  unsigned __int8 v6; // c3

  if (*(float *)(this + 4096) == 0.0) {
    if (*(float *)(this + 4104) != 0.0) {
      *(float *)(this + 4104) = *(float *)(this + 4104) - *(float *)&dword_106C2CFC;
      if (v5 | v6) {
        *(_DWORD *)(this + 4104) = 0;
        *(_DWORD *)(this + 4100) = 0;
      }
    }
  } else {
    *(float *)(this + 4096) = *(float *)(this + 4096) - *(float *)&dword_106C2CFC;
    if (v2 | v3) {
      *(_DWORD *)(this + 4096) = 0;
      *(_DWORD *)(this + 4092) = 0;
    }
  }
}
// 1007583D: variable 'v2' is possibly undefined
// 1007583D: variable 'v3' is possibly undefined
// 1007587E: variable 'v5' is possibly undefined
// 1007587E: variable 'v6' is possibly undefined
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (100758A0) --------------------------------------------------------
void __thiscall meth_100758A0(_DWORD *this) {
  LPCSTR v2; // eax
  int v3;    // ecx
  bool v4;   // sf

  if (MEMORY[0x106C7CB8]) {
    if (this[1002] >= dword_100BD3E0 || this[991] ||
        sub_1003AC90((float *)this + 997, (float *)this) >= 0.0) {
      this[2670] = 0;
    } else {
      v2 = GetStringWithIndex(0xF3u);
      v3 = this[2670] + 1;
      v4 = this[2670] - 30 < 0;
      this[2670] = v3;
      if (v4 ^ __OFSUB__(v3, 31) | (v3 == 31) || (v3 & 0x10) != 16) {
        if ((LPCSTR)this[1023] == v2) {
          this[1025] = 0;
          this[1023] = 0;
        }
      } else if (!this[1023]) {
        this[1023] = v2;
        this[1025] = 0;
        this[1024] = 1048576000;
      }
    }
  }
}

//----- (10075960) --------------------------------------------------------
int __thiscall meth_10075960(int this) {
  int result;         // eax
  char v3;            // al
  double v4;          // st7
  unsigned __int8 v5; // al
  unsigned __int8 v6; // dl
  float v7;           // [esp+0h] [ebp-8h]
  float v8;           // [esp+0h] [ebp-8h]

  result = MEMORY[0x106C7CB8];
  if (MEMORY[0x106C7CB8]) {
    v7 = *(float *)(this + 48) * 0.03125;
    v3 = sub_1002B920(v7);
    v4 = *(float *)(this + 52) * 0.03125;
    *(_BYTE *)(this + 10684) = v3;
    v8 = v4;
    v5 = sub_1002B920(v8);
    v6 = *(_BYTE *)(this + 10684);
    *(_BYTE *)(this + 10685) = v5;
    if (v6 >= 0x40u)
      *(_BYTE *)(this + 10684) = 63;
    if (v5 >= 0x40u)
      *(_BYTE *)(this + 10685) = 63;
    result = meth_10075360(this);
  }
  return result;
}

//----- (100759D0) --------------------------------------------------------
int __cdecl sub_100759D0(int a1, int a2, int a3, int a4, int a5, float a6, int a7, int a8, int a9) {
  double v9;            // st6
  double v10;           // st5
  double v11;           // st7
  int v12;              // edi
  float v13;            // ecx
  __int16 v14;          // ax
  char *v16;            // esi
  char *i;              // ebp
  double v18;           // st7
  double v19;           // st7
  int j;                // eax
  int v21;              // edx
  int v22;              // eax
  _WORD *v23;           // ecx
  double v24;           // st7
  int v25;              // eax
  int v26;              // ecx
  int v27;              // eax
  int v28;              // esi
  _WORD *v29;           // ecx
  float v31;            // [esp-14h] [ebp-80h]
  float v32;            // [esp-10h] [ebp-7Ch]
  int v33;              // [esp+4h] [ebp-68h]
  int v34;              // [esp+8h] [ebp-64h]
  float v35;            // [esp+Ch] [ebp-60h]
  float v36;            // [esp+10h] [ebp-5Ch]
  __int16 v37;          // [esp+10h] [ebp-5Ch]
  float v38;            // [esp+14h] [ebp-58h]
  float v39;            // [esp+18h] [ebp-54h]
  unsigned __int16 v40; // [esp+1Ch] [ebp-50h]
  float v41;            // [esp+20h] [ebp-4Ch]
  float v42;            // [esp+24h] [ebp-48h] BYREF
  int v43;              // [esp+28h] [ebp-44h]
  int v44;              // [esp+2Ch] [ebp-40h]
  float v45;            // [esp+30h] [ebp-3Ch] BYREF
  int v46;              // [esp+34h] [ebp-38h]
  int v47;              // [esp+38h] [ebp-34h]
  float v48;            // [esp+3Ch] [ebp-30h] BYREF
  float v49;            // [esp+40h] [ebp-2Ch]
  int v50;              // [esp+44h] [ebp-28h]
  int v51[3];           // [esp+48h] [ebp-24h] BYREF
  int v52[2];           // [esp+54h] [ebp-18h] BYREF
  float v53;            // [esp+5Ch] [ebp-10h]
  float v54[3];         // [esp+60h] [ebp-Ch] BYREF
  float v55;            // [esp+84h] [ebp+18h]
  float v56;            // [esp+84h] [ebp+18h]
  float v57;            // [esp+84h] [ebp+18h]
  float v58;            // [esp+84h] [ebp+18h]

  v9 = *(float *)(a3 + 4);
  v10 = *(float *)gUnk06594.gap4904 - gUnk06594.field_4900;
  v11 = *(float *)a3;
  v36 = v10;
  v12 = 0;
  v45 = 0.0;
  v46 = 0;
  v47 = 1065353216;
  v42 = 0.0;
  v35 = v10 * v36 - -1.0;
  v43 = 0;
  v49 = v9;
  v38 = v35;
  v13 = *(float *)(a3 + 8);
  v32 = v49;
  v48 = v11;
  v41 = v13;
  v39 = v13;
  v31 = v48;
  v37 = 0;
  v44 = 1065353216;
  v51[0] = 0;
  v51[1] = 0;
  v51[2] = 1065353216;
  v50 = 1065353216;
  v40 = 0;
  v34 = 0;
  *(_DWORD *)a9 = 0;
  v33 = 0;
  v14 = sub_1006F720(v31, v32);
  v16 = (char *)&unk_11750338 + 4800 * v14;
  for (i = &v16[32 * *((unsigned __int16 *)&dword_117554A0 + v14)]; v16 != i; v16 += 32) {
    if (*((float *)v16 + 2) >= 0.0) {
      v18 = sub_1003AC90((float *)v51, (float *)v16);
      if (v18 != 0.0) {
        sub_1003AEE0(v54, *((float **)v16 + 4), &v48);
        v55 = v18;
        v56 = sub_1003AC90(v54, (float *)v16) / v55;
        sub_1003AFE0((int)v52, (int)&v48, (int)v51, v56);
        if (sub_1003B940((float *)v52,
                         *((float **)v16 + 4),
                         *((float **)v16 + 5),
                         *((float **)v16 + 6),
                         (int)v16)) {
          v19 = *(float *)(a3 + 8) - -1.5 - v53;
          v57 = v19;
          if (v19 >= 0.0) {
              ++v34;
              if (v57 >= (double)v35) {
                  if (v33 < 32) {
                      *(_WORD *)(a4 + 2 * v33++) = *(_WORD *)(*(_DWORD *)&gUnk06594.gap1C8[18188] +
                                                              8 * *((__int16 *)v16 + 14) + 6) +
                                                   1;
                      if (v57 < 5.0) {
                          v21 = *(_DWORD *)&gUnk06594.gap493C[24];
                          v22 = 2 * *(unsigned __int16 *)(*(_DWORD *)&gUnk06594.gap493C[28] +
                                                          2 * *((__int16 *)v16 + 14));
                          if (*(_WORD *)(*(_DWORD *)&gUnk06594.gap493C[24] + v22)) {
                              v23 = (_WORD *)(LODWORD(a6) + 2 * v12);
                              do {
                                  if (v12 < 32) {
                                      ++v12;
                                      *v23 = *(_WORD *)(v21 + v22);
                                      v21 = *(_DWORD *)&gUnk06594.gap493C[24];
                                      ++v23;
                                  }
                                  v22 += 2;
                              } while (*(_WORD *)(v21 + v22));
                          }
                      }
                  }
              } else {
                  v35 = v19;
                  v39 = v53;
                  *(_DWORD *)a9 = *((__int16 *)v16 + 14);
                  if (*((float *)v16 + 2) >= 0.0) {
                      v42 = *(float *)v16;
                      v43 = *((_DWORD *)v16 + 1);
                      v44 = *((_DWORD *)v16 + 2);
                  } else {
                      sub_1003ACC0(&v42, (float *)v16);
                  }
                  if (v33 < 32)
                      *(_WORD *)(a4 + 2 * v33++) = *(_WORD *)a4;
                  *(_WORD *)a4 = *(_WORD *)(*(_DWORD *)&gUnk06594.gap1C8[18188] +
                                            8 * *((__int16 *)v16 + 14) + 6) +
                                 1;
                  if (v57 < 5.0) {
                      for (j = 2 * *(unsigned __int16 *)(*(_DWORD *)&gUnk06594.gap493C[28] +
                                                         2 * *((__int16 *)v16 + 14));
                           *(_WORD *)(*(_DWORD *)&gUnk06594.gap493C[24] + j);
                           *(_WORD *)LODWORD(a6) =
                               *(_WORD *)(*(_DWORD *)&gUnk06594.gap493C[24] + j - 2)) {
                          if (v12 < 32)
                              *(_WORD *)(LODWORD(a6) + 2 * v12++) = *(_WORD *)LODWORD(a6);
                          j += 2;
                      }
                  }
              }
          }
          v24 = v57 - 1.5;
          v58 = v24;
          if (v24 <= 0.0 && v58 < (double)v38) {
              v37 =
                  *(_WORD *)(*(_DWORD *)&gUnk06594.gap1C8[18188] + 8 * *((__int16 *)v16 + 14) + 6) +
                  1;
              if (v58 > -1.0) {
                  v38 = v24;
                  v41 = v53;
                  v40 = *((_WORD *)v16 + 14);
                  if (*((float *)v16 + 2) >= 0.0) {
                      v45 = *(float *)v16;
                      v46 = *((_DWORD *)v16 + 1);
                      v47 = *((_DWORD *)v16 + 2);
                  } else {
                      sub_1003ACC0(&v45, (float *)v16);
                  }
              }
          }
        }
      }
    }
  }
  if (v34) {
    if (a1) {
      *(float *)(a1 + 8) = v39;
      *(float *)a8 = v35 - 1.5;
    }
    v25 = a2;
    if (a2) {
      *(float *)a2 = v42;
      *(_DWORD *)(a2 + 4) = v43;
      v26 = v44;
    LABEL_50:
      *(_DWORD *)(v25 + 8) = v26;
      goto LABEL_51;
    }
  } else {
    v27 = *(unsigned __int16 *)(*(_DWORD *)&gUnk06594.gap493C[28] + 2 * v40);
    v28 = *(_DWORD *)&gUnk06594.gap493C[24];
    if (*(_WORD *)(*(_DWORD *)&gUnk06594.gap493C[24] + 2 * (unsigned __int16)v27)) {
      v29 = (_WORD *)(LODWORD(a6) + 2 * v12);
      while (v12 < 32) {
        ++v12;
        *v29 = *(_WORD *)(v28 + 2 * v27);
        v28 = *(_DWORD *)&gUnk06594.gap493C[24];
        ++v29;
        ++v27;
        if (!*(_WORD *)(*(_DWORD *)&gUnk06594.gap493C[24] + 2 * v27))
          goto LABEL_43;
      }
      *(_WORD *)(LODWORD(a6) + 62) = *(_WORD *)(v28 + 2 * v27);
    }
  LABEL_43:
    if (v33 >= 32)
      *(_WORD *)(a4 + 62) = v37;
    else
      *(_WORD *)(a4 + 2 * v33) = v37;
    if (a1)
      *(float *)(a1 + 8) = v41;
    v25 = a2;
    if (a2) {
      *(float *)a2 = v45;
      *(_DWORD *)(a2 + 4) = v46;
      v26 = v47;
      goto LABEL_50;
    }
  }
LABEL_51:
  *(_DWORD *)a5 = 1;
  *(_DWORD *)a7 = v12;
  return v34;
}
// 117554A0: using guessed type int dword_117554A0;

//----- (10075F10) --------------------------------------------------------
void __thiscall meth_10075F10(int this) {
  double v2;  // st7
  double v3;  // st7
  int v4;     // eax
  int v5;     // edx
  double v6;  // st7
  int v7;     // ecx
  char v9;    // c0
  int v10;    // eax
  int *i;     // ecx
  float v12;  // [esp+0h] [ebp-30h]
  float v13;  // [esp+4h] [ebp-2Ch]
  float v14;  // [esp+8h] [ebp-28h]
  float v15;  // [esp+8h] [ebp-28h]
  float v16;  // [esp+8h] [ebp-28h]
  int v17[3]; // [esp+24h] [ebp-Ch] BYREF

  if (*(_DWORD *)(this + 3964)) {
    v14 = *(float *)(this + 10024) * *(float *)&dword_106C2CFC * 100.0;
    sub_1003ACE0((int)v17, this, v14);
    sub_1003AF70((float *)(this + 48), (float *)v17);
    meth_10076420(
        (float *)this, *(_DWORD *)(this + 48), *(_DWORD *)(this + 52), *(_DWORD *)(this + 56));
    meth_100767A0((_DWORD *)this, 0, 0, 0);
    meth_100769A0((_DWORD *)this, 0, 0, 0);
    v2 = *(float *)(this + 10028);
    *(_DWORD *)(this + 3620) = 0;
    v15 = v2 * *(float *)&dword_106C2CFC * 1.2566371;
    v13 = *(float *)(this + 10020) * *(float *)&dword_106C2CFC * 1.2566371;
    v3 = *(float *)(this + 10016) * *(float *)&dword_106C2CFC * 1.2566371;
    v12 = v3;
    meth_10076820((_DWORD *)this, v12, v13, v15);
    if ((**(_BYTE **)(this + 10688) & 0x10) != 0) {
      *(_DWORD *)(this + 32) = 0;
      *(_DWORD *)(this + 36) = 0;
      *(_DWORD *)(this + 40) = 1065353216;
      sub_1003AC30((float *)(this + 16), (float *)(this + 32), (float *)this);
      sub_1003AC30((float *)(this + 32), (float *)this, (float *)(this + 16));
      meth_10035FA0(*(int **)(this + 10688), 16);
    }
  } else {
    v4 = sub_100759D0(this + 48,
                      this + 32,
                      this + 48,
                      this + 10508,
                      this + 10572,
                      COERCE_FLOAT(this + 10576),
                      this + 10640,
                      this + 10644,
                      this + 10648);
    v5 = *(_DWORD *)(this + 364);
    *(_DWORD *)(this + 4128) = v4;
    *(_DWORD *)(v5 + 448) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 360) + 448) = 0;
    meth_10061F70((_DWORD *)this);
    *(_DWORD *)(*(_DWORD *)(this + 372) + 448) = *(_DWORD *)(this + 3616);
    *(_DWORD *)(*(_DWORD *)(this + 368) + 448) = *(_DWORD *)(*(_DWORD *)(this + 372) + 448);
    *(_DWORD *)(*(_DWORD *)(this + 360) + 460) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 364) + 460) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 368) + 460) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 372) + 460) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 360) + 464) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 364) + 464) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 368) + 464) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 372) + 464) = 0;
    if (*(float *)(this + 3688) > 0.0) {
      if ((**(_DWORD **)(this + 10688) & 0x20000) != 0)
        *(float *)(this + 3688) = -*(float *)(this + 3688);
      if (*(_BYTE *)(*(_DWORD *)(this + 10692) + 217)) {
        v6 = *(float *)(this + 3688);
        if (*(_BYTE *)(*(_DWORD *)(this + 10692) + 217) == 1) {
          *(float *)(*(_DWORD *)(this + 360) + 460) = v6 * -2.0;
          *(float *)(*(_DWORD *)(this + 364) + 460) = *(float *)(this + 3688) * -2.0;
          *(_DWORD *)(*(_DWORD *)(this + 368) + 460) = 0;
          *(_DWORD *)(*(_DWORD *)(this + 372) + 460) = 0;
        } else {
          *(float *)(*(_DWORD *)(this + 360) + 460) = -v6;
          *(float *)(*(_DWORD *)(this + 364) + 460) = -*(float *)(this + 3688);
          *(float *)(*(_DWORD *)(this + 368) + 460) = -*(float *)(this + 3688);
          *(float *)(*(_DWORD *)(this + 372) + 460) = -*(float *)(this + 3688);
        }
      } else {
        *(float *)(*(_DWORD *)(this + 360) + 460) = *(float *)(this + 3688) * 0.1;
        *(float *)(*(_DWORD *)(this + 364) + 460) = *(float *)(this + 3688) * 0.1;
        *(float *)(*(_DWORD *)(this + 368) + 460) = *(float *)(this + 3688) * -2.0999999;
        *(float *)(*(_DWORD *)(this + 372) + 460) = *(float *)(this + 3688) * -2.0999999;
      }
    }
    v3 = *(float *)(this + 3692);
    if (v3 < 0.0) {
      *(float *)(*(_DWORD *)(this + 360) + 464) = -*(float *)(this + 3692);
      *(float *)(*(_DWORD *)(this + 364) + 464) = -*(float *)(this + 3692);
      *(_DWORD *)(*(_DWORD *)(this + 360) + 460) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 364) + 460) = 0;
      v7 = *(_DWORD *)(this + 368);
      v3 = *(float *)(v7 + 460);
      if (v9)
        v3 = -v3;
      if (v3 < 0.000099999997) {
        *(float *)(v7 + 464) = -*(float *)(this + 3692);
        v3 = -*(float *)(this + 3692);
        *(float *)(*(_DWORD *)(this + 372) + 464) = v3;
      }
    }
    if (!dword_106909E0 && (gGameMode != GAME_MODE_2 || *(_DWORD *)(this + 320) != 1 ||
                            !*(_DWORD *)(*(_DWORD *)(this + 10688) + 68))) {
      if (gGameMode != GAME_MODE_4)
        goto LABEL_27;
      if (!*(_DWORD *)(this + 320) && *(_DWORD *)(*(_DWORD *)(this + 10688) + 68))
        goto LABEL_29;
      if (gGameMode != GAME_MODE_4) {
      LABEL_27:
        if (gGameMode != GAME_MODE_5 && !gIsGameMode4 && *(int *)(this + 1840) > 90)
          goto LABEL_29;
      }
      meth_10061720((_DWORD *)this);
      goto LABEL_29;
    }
  }
LABEL_29:
  if (gNetworkPlay) {
    if (*(void(__cdecl **)(int))(this + 0xF08) == sub_10063FE0 && !dword_106909E0)
      sub_100609E0(this);
  } else if (!dword_106909E0) {
    sub_10061C60(this, v3);
  }
  if (*(_DWORD *)(this + 1840)) {
    v16 = *(float *)(this + 488) * *(float *)(this + 488) +
          *(float *)(this + 492) * *(float *)(this + 492) +
          *(float *)(this + 496) * *(float *)(this + 496);
    *(float *)(this + 4144) = sqrt_(v16) * 2.24;
  }
  if (!gNetworkPlay) {
    v10 = 0;
    if (dword_100AA8B4 > 0) {
      for (i = &dword_106C1638; *(_DWORD *)(this + 320) != *i; i += 22) {
        if (++v10 >= dword_100AA8B4)
          return;
      }
      meth_100019D0((#479 *)this);
    }
  }
}
// 100762BC: variable 'v9' is possibly undefined
// 100AA8B4: using guessed type int dword_100AA8B4;
// 1022AF14: using guessed type int gIsGameMode4;
// 1022AF18: using guessed type int gNetworkPlay;
// 106909E0: using guessed type int dword_106909E0;
// 106C1638: using guessed type int dword_106C1638;
// 106C2CFC: using guessed type int dword_106C2CFC;

//----- (10076420) --------------------------------------------------------
void __thiscall meth_10076420(float *this, int a2, int a3, int a4) {
  float *v4; // eax
  float *v5; // ecx

  *((_DWORD *)this + 12) = a2;
  *((_DWORD *)this + 13) = a3;
  *((_DWORD *)this + 14) = a4;
  *((_DWORD *)this + 2482) = a2;
  *((_DWORD *)this + 2483) = a3;
  *((_DWORD *)this + 2484) = a4;
  v4 = this + 119;
  v5 = this + 136;
  *(_DWORD *)v4 = a2;
  *((_DWORD *)v5 - 16) = a3;
  *((_DWORD *)v5 - 15) = a4;
  *((_DWORD *)v5 + 39) = a2;
  *((_DWORD *)v5 + 40) = a3;
  *((_DWORD *)v5 + 41) = a4;
  *((_DWORD *)v5 + 22) = a2;
  *((_DWORD *)v5 + 23) = a3;
  *((_DWORD *)v5 + 24) = a4;
  math_10074450(v5, v4);
}

//----- (100764C0) --------------------------------------------------------
void __thiscall meth_100764C0(float *this, float a2) {
  float v3;       // edi
  long double v4; // st7
  long double v5; // st7
  int v6;         // eax
  int v7;         // ecx
  int v8;         // edx
  float v9;       // [esp+Ch] [ebp-Ch]
  float v10;      // [esp+Ch] [ebp-Ch]
  float v11;      // [esp+10h] [ebp-8h]
  float v12;      // [esp+14h] [ebp-4h]
  float v13;      // [esp+1Ch] [ebp+4h]

  v11 = cos_(a2);
  v12 = sin_(a2);
  v9 = a2 - -1.5707964;
  v3 = v9;
  v10 = cos_(v9);
  v4 = sin_(v3);
  *this = v11;
  this[1] = v12;
  this[2] = 0.0;
  this[5] = v4;
  this[4] = v10;
  this[6] = 0.0;
  this[8] = 0.0;
  this[9] = 0.0;
  v13 = a2 * 0.5;
  this[10] = 1.0;
  this[125] = cos_(v13);
  this[126] = 0.0;
  this[127] = 0.0;
  v5 = sin_(v13);
  v6 = *((_DWORD *)this + 125);
  v7 = *((_DWORD *)this + 126);
  v8 = *((_DWORD *)this + 127);
  this[128] = v5;
  this[184] = v5;
  this[167] = v5;
  *((_DWORD *)this + 181) = v6;
  *((_DWORD *)this + 164) = v6;
  *((_DWORD *)this + 182) = v7;
  *((_DWORD *)this + 183) = v8;
  *((_DWORD *)this + 165) = v7;
  *((_DWORD *)this + 166) = v8;
  math_10074450(this + 136, this + 119);
}

//----- (100765E0) --------------------------------------------------------
void __cdecl math_100765E0(float *a1, float *a2) {
  double v3; // st7
  char v4;   // c0
  double v5; // st7

  v3 = a1[5];
  if (v4) {
    if (v3 - a1[10] < 0.0) {
      *a2 = a1[1] - a1[4];
      a2[1] = a1[8] + a1[2];
      a2[2] = a1[9] + a1[6];
      a2[3] = a1[10] - (*a1 + a1[5] - 1.0);
    } else {
      *a2 = a1[8] - a1[2];
      a2[1] = a1[1] + a1[4];
      a2[2] = a1[5] - (*a1 - 1.0) - a1[10];
      a2[3] = a1[9] + a1[6];
    }
  } else {
    v5 = v3 + a1[10];
    if (v5 < 0.0) {
      *a2 = a1[6] - a1[9];
      a2[1] = *a1 - -1.0 - a1[5] - a1[10];
      a2[2] = a1[1] + a1[4];
      a2[3] = a1[8] + a1[2];
    } else {
      *a2 = *a1 + v5 - -1.0;
      a2[1] = a1[6] - a1[9];
      a2[2] = a1[8] - a1[2];
      a2[3] = a1[1] - a1[4];
    }
  }
  math_100741B0(a2);
}
// 100765F4: variable 'v4' is possibly undefined

//----- (10076700) --------------------------------------------------------
void __thiscall meth_10076700(int this, void *a2) {
  _DWORD *v3; // esi
  int v4;     // ecx
  int v5;     // edx
  int v6;     // eax
  int v7;     // ecx
  int v8;     // edx
  int v9;     // eax
  int v10;    // ecx

  qmemcpy((void *)this, a2, 0x40u);
  v3 = (_DWORD *)(this + 500);
  math_100765E0((float *)a2, (float *)(this + 500));
  v4 = *(_DWORD *)(this + 504);
  v5 = *(_DWORD *)(this + 508);
  *(_DWORD *)(this + 724) = *v3;
  v6 = *(_DWORD *)(this + 512);
  *(_DWORD *)(this + 728) = v4;
  v7 = *v3;
  *(_DWORD *)(this + 732) = v5;
  v8 = *(_DWORD *)(this + 504);
  *(_DWORD *)(this + 736) = v6;
  v9 = *(_DWORD *)(this + 508);
  *(_DWORD *)(this + 656) = v7;
  v10 = *(_DWORD *)(this + 512);
  *(_DWORD *)(this + 660) = v8;
  *(_DWORD *)(this + 664) = v9;
  *(_DWORD *)(this + 668) = v10;
  math_10074450((float *)(this + 544), (float *)(this + 476));
}

//----- (100767A0) --------------------------------------------------------
int __thiscall meth_100767A0(_DWORD *this, int a2, int a3, int a4) {
  int result; // eax

  this[122] = a2;
  this[123] = a3;
  this[124] = a4;
  this[178] = a2;
  this[179] = a3;
  this[180] = a4;
  this[161] = a2;
  this[162] = a3;
  this[163] = a4;
  result = a3;
  this[1033] = a2;
  this[1034] = a3;
  this[1035] = a4;
  return result;
}

//----- (10076820) --------------------------------------------------------
int __thiscall meth_10076820(_DWORD *this, float a2, float a3, float a4) {
  float v5;   // edi
  int v6;     // ecx
  int v7;     // edx
  int v8;     // eax
  int v9;     // ecx
  int v10;    // edx
  int result; // eax
  int v12;    // ecx
  float v13;  // [esp+0h] [ebp-10h] BYREF
  float v14;  // [esp+4h] [ebp-Ch]
  float v15;  // [esp+8h] [ebp-8h]
  float v16;  // [esp+Ch] [ebp-4h]
  float v17;  // [esp+14h] [ebp+4h]
  float v18;  // [esp+14h] [ebp+4h]
  float v19;  // [esp+14h] [ebp+4h]
  float v20;  // [esp+14h] [ebp+4h]
  float v21;  // [esp+18h] [ebp+8h]
  float v22;  // [esp+1Ch] [ebp+Ch]

  v17 = a2 * 0.5;
  v5 = v17;
  v21 = a3 * 0.5;
  v22 = a4 * 0.5;
  v18 = sin_(v17);
  v13 = cos_(v5);
  v14 = 0.0;
  v15 = 0.0;
  v16 = v18;
  math_10074090((float *)this + 125, (float *)this + 125, &v13);
  v19 = sin_(v21);
  v13 = cos_(v21);
  v14 = 0.0;
  v15 = v19;
  v16 = 0.0;
  math_10074090((float *)this + 125, (float *)this + 125, &v13);
  v20 = sin_(v22);
  v13 = cos_(v22);
  v14 = v20;
  v15 = 0.0;
  v16 = 0.0;
  math_10074090((float *)this + 125, (float *)this + 125, &v13);
  math_100741B0((float *)this + 125);
  v6 = this[126];
  v7 = this[127];
  this[181] = this[125];
  v8 = this[128];
  this[182] = v6;
  this[183] = v7;
  v9 = this[125];
  v10 = this[126];
  this[184] = v8;
  result = this[127];
  this[164] = v9;
  v12 = this[128];
  this[165] = v10;
  this[166] = result;
  this[167] = v12;
  return result;
}

//----- (100769A0) --------------------------------------------------------
int __thiscall meth_100769A0(_DWORD *this, int a2, int a3, int a4) {
  int result; // eax

  this[129] = a2;
  this[130] = a3;
  this[131] = a4;
  this[185] = a2;
  this[186] = a3;
  this[187] = a4;
  this[168] = a2;
  result = a4;
  this[169] = a3;
  this[170] = a4;
  return result;
}

//----- (10076A00) --------------------------------------------------------
void __thiscall meth_10076A00(int this) {
  sub_100350EE(*(_WORD **)(this + 10692),
               *(_DWORD *)(this + 10692),
               *(unsigned __int8 *)(this + 10668) >> 3,
               *(unsigned __int8 *)(this + 10669) >> 3,
               *(unsigned __int8 *)(this + 10670) >> 3);
  meth_10062C50((_DWORD *)this);
}

//----- (10076A40) --------------------------------------------------------
void __thiscall meth_10076A40(_DWORD *this, int index) {
  this[2673] = &byte_100C12A0[0x15F88 * index];
  meth_10076A00((int)this);
}

//----- (10076A70) --------------------------------------------------------
void __thiscall meth_10076A70(unsigned __int8 *this, int a2, int a3) {
  car_10061460(this[10668], this[10669], this[10670]);
  LoadCar(a2, a3, 0);
  sub_10074E20((_DWORD *)this + 2716);
  memset(this + 10896, 0, 0x20u);
  meth_10076A40(this, a2);
}

//----- (10076AE0) --------------------------------------------------------
int __thiscall meth_10076AE0(_DWORD *this, int carIndex) {
  int result; // eax

  result = carIndex;
  if (carIndex < 16) {
    this[0xA6D] = 0;
  } else {
    result = carIndex - 16;
    this[0xA6D] = 1;
  }
  this[0xA6A] = result;
  return result;
}

//----- (10076B20) --------------------------------------------------------
int __thiscall meth_10076B20(_DWORD *this) {
  int v2;     // eax
  int v3;     // ecx
  int result; // eax

  meth_10075340(this);
  meth_10075340(this + 2511);
  this[2527] = 0x3F060A92;
  meth_10075340(this + 2528);
  this[2544] = 0x3F060A92;
  meth_10075340(this + 2545);
  this[2561] = 0x3F060A92;
  meth_10075340(this + 2562);
  this[2578] = 0x3F060A92;
  meth_10075340(this + 2596);
  this[2612] = 0x3F060A92;
  this[2509] = this + 2511;
  meth_10075340(this + 16);
  meth_10075340(this + 32);
  meth_10075340(this + 48);
  meth_10075340(this + 64);
  meth_100767A0(this, 0, 0, 0);
  v2 = this[2673];
  this[995] = 0;
  this[996] = 0;
  this[2510] = 0;
  qmemcpy(this + 906, (const void *)(v2 + 152), 0x30u);
  v3 = this[935];
  this[918] = *(char *)(v2 + 216);
  this[920] = v3;
  this[919] = *(char *)(v2 + 150);
  this[208] = *(_DWORD *)(v2 + 200);
  this[209] = *(_DWORD *)(v2 + 204);
  this[210] = *(_DWORD *)(v2 + 208);
  this[211] = *(_DWORD *)(v2 + 212);
  result = *(char *)(v2 + 151);
  this[2673] = 0;
  this[921] = result;
  return result;
}

//----- (10076C90) --------------------------------------------------------
_DWORD *__thiscall meth_10076C90(char *this) {
  *((_DWORD *)this + 2672) =
      &gUnk06594.gap1C8[348 * ((this - (char *)stru_10ACDEA8) / 11112) + 12592];
  return sub_100307D0((_DWORD *)this + 2485);
}

//----- (10076CE0) --------------------------------------------------------
MMRESULT __cdecl mm_10076CE0(LPSTR pszFileName, int a2, int a3, LPMMCKINFO pmmcki) {
  CHAR *v4;             // ecx
  HMMIO v5;             // eax
  HMMIO v6;             // edi
  MMRESULT v7;          // esi
  LPMMCKINFO v8;        // ebx
  unsigned __int16 v9;  // ax
  _DWORD *v10;          // eax
  int v11;              // ecx
  LONG v12;             // eax
  _DWORD *v14;          // ebx
  char pch[4];          // [esp+10h] [ebp-24h] BYREF
  int v16;              // [esp+14h] [ebp-20h]
  int v17;              // [esp+18h] [ebp-1Ch]
  int v18;              // [esp+1Ch] [ebp-18h]
  struct _MMCKINFO v19; // [esp+20h] [ebp-14h] BYREF

  v4 = pszFileName;
  *(_DWORD *)a3 = 0;
  v5 = mmioOpenA(v4, 0, 0x10000u);
  v6 = v5;
  if (v5) {
    v8 = pmmcki;
    v7 = mmioDescend(v5, pmmcki, 0, 0);
    if (!v7) {
      if (v8->ckid != 1179011410 || v8->fccType != 1163280727)
        goto LABEL_21;
      v19.ckid = 544501094;
      v7 = mmioDescend(v6, &v19, v8, 0x10u);
      if (v7)
        goto LABEL_22;
      if (v19.cksize < 0x10)
        goto LABEL_21;
      if (mmioRead(v6, pch, 16) != 16) {
        v7 = 57602;
        goto LABEL_22;
      }
      if (*(_WORD *)pch == 1) {
        v9 = 0;
        pszFileName = 0;
      } else {
        if (mmioRead(v6, (HPSTR)&pszFileName, 2) != 2) {
          v7 = 57602;
          goto LABEL_22;
        }
        v9 = (unsigned __int16)pszFileName;
      }
      v10 = GlobalAlloc(0, v9 + 18);
      v11 = a3;
      *(_DWORD *)a3 = v10;
      if (!v10) {
        v7 = 57344;
        goto LABEL_22;
      }
      *v10 = *(_DWORD *)pch;
      v10[1] = v16;
      v10[2] = v17;
      v10[3] = v18;
      *(_WORD *)(*(_DWORD *)v11 + 16) = (_WORD)pszFileName;
      if ((_WORD)pszFileName) {
        v12 = mmioRead(v6, (HPSTR)(*(_DWORD *)v11 + 18), (unsigned __int16)pszFileName);
        if (v12 != (unsigned __int16)pszFileName) {
        LABEL_21:
          v7 = 57601;
          goto LABEL_22;
        }
      }
      v7 = mmioAscend(v6, &v19, 0);
      if (!v7) {
        *(_DWORD *)a2 = v6;
        return 0;
      }
    }
  } else {
    v7 = 57600;
  }
LABEL_22:
  v14 = (_DWORD *)a3;
  if (*(_DWORD *)a3) {
    GlobalFree(*(HGLOBAL *)a3);
    *v14 = 0;
  }
  if (v6) {
    mmioClose(v6, 0);
    v6 = 0;
  }
  *(_DWORD *)a2 = v6;
  return v7;
}

//----- (10076E90) --------------------------------------------------------
MMRESULT __cdecl mm_10076E90(int a1, LPMMCKINFO pmmcki, MMCKINFO *pmmckiParent) {
  mmioSeek(*(HMMIO *)a1, pmmckiParent->dwDataOffset + 4, 0);
  pmmcki->ckid = 1635017060;
  return mmioDescend(*(HMMIO *)a1, pmmcki, pmmckiParent, 0x10u);
}

//----- (10076ED0) --------------------------------------------------------
int __cdecl mm_10076ED0(HMMIO hmmio, int a2, int a3, int a4, int a5) {
  int result;                 // eax
  unsigned int v6;            // edi
  unsigned int v7;            // eax
  unsigned int v8;            // esi
  HPSTR v9;                   // ecx
  char *v10;                  // eax
  char v11;                   // dl
  struct _MMIOINFO pmmioinfo; // [esp+10h] [ebp-48h] BYREF

  result = mmioGetInfo(hmmio, &pmmioinfo, 0) != 0;
  if (result)
    goto LABEL_11;
  v6 = a2;
  v7 = *(_DWORD *)(a4 + 4);
  if (a2 > v7)
    v6 = *(_DWORD *)(a4 + 4);
  v8 = 0;
  *(_DWORD *)(a4 + 4) = v7 - v6;
  if (!v6) {
  LABEL_10:
    result = mmioSetInfo(hmmio, &pmmioinfo, 0);
    if (!result) {
      *(_DWORD *)a5 = v6;
      return result;
    }
  LABEL_11:
    *(_DWORD *)a5 = 0;
    return result;
  }
  v9 = pmmioinfo.pchEndRead;
  v10 = pmmioinfo.pchNext;
  while (1) {
    if (v10 == v9) {
      result = mmioAdvance(hmmio, &pmmioinfo, 0);
      if (result)
        goto LABEL_11;
      v10 = pmmioinfo.pchNext;
      v9 = pmmioinfo.pchEndRead;
      if (pmmioinfo.pchNext == pmmioinfo.pchEndRead)
        break;
    }
    v11 = *v10++;
    *(_BYTE *)(v8 + a3) = v11;
    ++v8;
    pmmioinfo.pchNext = v10;
    if (v8 >= v6)
      goto LABEL_10;
  }
  result = 57603;
  *(_DWORD *)a5 = 0;
  return result;
}

//----- (10076FA0) --------------------------------------------------------
MMRESULT __cdecl mm_10076FA0(LPSTR pszFileName, int a2, int a3, int a4, HMMIO hmmio) {
  HGLOBAL *v5;             // ebx
  HGLOBAL *v6;             // esi
  MMRESULT v7;             // edi
  HGLOBAL v8;              // eax
  int v10;                 // [esp-8h] [ebp-40h]
  struct _MMCKINFO v11;    // [esp+10h] [ebp-28h] BYREF
  struct _MMCKINFO pmmcki; // [esp+24h] [ebp-14h] BYREF

  v5 = (HGLOBAL *)a4;
  v6 = (HGLOBAL *)hmmio;
  v10 = a4;
  *(_DWORD *)hmmio = 0;
  *v5 = 0;
  *(_DWORD *)a2 = 0;
  v7 = mm_10076CE0(pszFileName, (int)&hmmio, v10, &pmmcki);
  if (!v7) {
    v7 = mm_10076E90((int)&hmmio, &v11, &pmmcki);
    if (!v7) {
      v8 = GlobalAlloc(0, v11.cksize);
      *v6 = v8;
      if (v8) {
        v7 = mm_10076ED0(hmmio, v11.cksize, (int)v8, (int)&v11, (int)&a4);
        if (!v7) {
          *(_DWORD *)a2 = a4;
          goto LABEL_11;
        }
      } else {
        v7 = 57344;
      }
    }
  }
  if (*v6) {
    GlobalFree(*v6);
    *v6 = 0;
  }
  if (*v5) {
    GlobalFree(*v5);
    *v5 = 0;
  }
LABEL_11:
  if (hmmio)
    mmioClose(hmmio, 0);
  return v7;
}

//----- (10077090) --------------------------------------------------------
void __cdecl sub_10077090(unsigned int a1) {
  dword_10680598 = a1;
  dword_1068059C = (unsigned __int16)a1;
  dword_106805A0 = HIWORD(a1);
  if (!(_WORD)a1 || HIWORD(a1))
    meth_DebugPrint((void *)(unsigned __int16)a1);
}
// 10680598: using guessed type int dword_10680598;
// 1068059C: using guessed type int dword_1068059C;
// 106805A0: using guessed type int dword_106805A0;

//----- (100770C0) --------------------------------------------------------
int sub_100770C0() {
  int result; // eax

  result = 0;
  memset(dword_118ABD38, 0, 0x38u);
  dword_118ABAD4 = 0;
  dword_118ABD80 = 1;
  return result;
}
// 118ABAD4: using guessed type int dword_118ABAD4;
// 118ABD38: using guessed type int dword_118ABD38[];
// 118ABD80: using guessed type int dword_118ABD80;

//----- (100770F0) --------------------------------------------------------
int input_100770F0() {
  int v0; // eax

  v0 = ++dword_118ABDD8;
  if (dword_118ABDD8 == 1) {
    dword_118ABAD8 = v0;
    memset(byte_118AB8B8, 0, 0x200u);
    memset(dword_118ABAE0, 0, 0x220u);
    gDIEffectSpring.dwStartDelay = 0;
    dword_118ABD7C = 0;
    dword_118ABAB8 = 1;
    sub_100770C0();
    if (g_DirectInputA->lpVtbl->CreateDevice(
            g_DirectInputA, &CLSID_GUID_SysKeyboard, &g_lpDirectInputDeviceA, 0) < 0)
      return 0;
    if (g_lpDirectInputDeviceA->lpVtbl->SetDataFormat(g_lpDirectInputDeviceA, &g_lpcDiDataFormat) <
        0)
      return 0;
    if (g_lpDirectInputDeviceA->lpVtbl->SetCooperativeLevel(g_lpDirectInputDeviceA, gHwnd, 6) < 0)
      return 0;
    if (g_lpDirectInputDeviceA)
      g_lpDirectInputDeviceA->lpVtbl->Acquire(g_lpDirectInputDeviceA);
  }
  return 1;
}
// 118ABAB8: using guessed type int dword_118ABAB8;
// 118ABAD8: using guessed type int dword_118ABAD8;
// 118ABAE0: using guessed type int dword_118ABAE0[];
// 118ABD7C: using guessed type int dword_118ABD7C;
// 118ABDD8: using guessed type int dword_118ABDD8;

//----- (100771B0) --------------------------------------------------------
HRESULT __cdecl input_100771B0(void *a1) {
  HRESULT result; // eax

  if (!g_lpDirectInputDeviceA)
    return 1;
  result = g_lpDirectInputDeviceA->lpVtbl->GetDeviceState(g_lpDirectInputDeviceA, 256, a1);
  if (result < 0 && result == -2147024866) {
    result = g_lpDirectInputDeviceA->lpVtbl->Acquire(g_lpDirectInputDeviceA);
    if (result >= 0)
      result = g_lpDirectInputDeviceA->lpVtbl->GetDeviceState(g_lpDirectInputDeviceA, 256, a1);
  }
  return result;
}

//----- (10077200) --------------------------------------------------------
int __cdecl input_10077200(_DWORD *a1) {
  IDirectInputDevice2A *v1; // eax
  int result;               // eax
  HRESULT v3;               // eax
  int v4;                   // [esp+10h] [ebp-110h] BYREF
  int v5;                   // [esp+14h] [ebp-10Ch]
  char v6[224];             // [esp+40h] [ebp-E0h]

  v1 = gDirectInputDevice2A;
  if (!gDirectInputDevice2A) {
    gConfigJoystickIndex = 2;
    gConfigJoystickPtr = &gConfig.joystick2;
    input_100791D0();
    v1 = gDirectInputDevice2A;
    if (!gDirectInputDevice2A)
      return 1;
  }
  v1->lpVtbl->Poll(v1);
  v3 = gDirectInputDevice2A->lpVtbl->GetDeviceState(gDirectInputDevice2A, 272, &v4);
  if (v3 && v3 == -2147024866)
    input_100773D0();
  for (result = 0; result < 128; ++result) {
    if ((v6[result] & 0x80) != 0) {
      *a1 = 256;
      return result;
    }
  }
  if (v4 >= -50) {
    if (v4 <= 50) {
      if (v5 >= -50) {
        if (v5 <= 50) {
          result = -1;
        } else {
          *a1 = 33536;
          result = 0;
        }
      } else {
        result = 0;
        *a1 = 33280;
      }
    } else {
      result = 0;
      *a1 = 33024;
    }
  } else {
    *a1 = 0x8000;
    result = 0;
  }
  return result;
}
// 10B4E1D0: using guessed type int gConfigJoystickIndex;

//----- (10077310) --------------------------------------------------------
int input_10077310() {
  HRESULT v0;  // eax
  int result;  // eax
  int *v2;     // ecx
  char v3[16]; // [esp+4h] [ebp-10h] BYREF

  if (!gUnk54Ptr || !gUnk54Ptr->lpDIDeviceA)
    return -1;
  dword_10AA33C0[0] = 0;
  dword_10AA33C4 = 0;
  dword_10AA33C8 = 0;
  dword_10AA33CC = 0;
  v0 = gUnk54Ptr->lpDIDeviceA->lpVtbl->GetDeviceState(gUnk54Ptr->lpDIDeviceA, 16, v3);
  if (v0 && v0 == -2147024866)
    gUnk54Ptr->lpDIDeviceA->lpVtbl->Acquire(gUnk54Ptr->lpDIDeviceA);
  if (v3[12] < 0)
    dword_10AA33C0[0] = 1;
  if ((v3[13] & 0x80) != 0)
    dword_10AA33C4 = 1;
  if ((v3[14] & 0x80) != 0)
    dword_10AA33C8 = 1;
  if ((v3[15] & 0x80) != 0)
    dword_10AA33CC = 1;
  sub_1005FFF0();
  result = 0;
  v2 = dword_10AA33D0;
  while (!*v2) {
    ++v2;
    ++result;
    if ((int)v2 >= (int)&dword_10AA33E0)
      return -1;
  }
  return result;
}
// 10AA33C0: using guessed type int dword_10AA33C0[];
// 10AA33C4: using guessed type int dword_10AA33C4;
// 10AA33C8: using guessed type int dword_10AA33C8;
// 10AA33CC: using guessed type int dword_10AA33CC;
// 10AA33D0: using guessed type int dword_10AA33D0[];
// 10AA33E0: using guessed type int dword_10AA33E0;

//----- (100773D0) --------------------------------------------------------
BOOL input_100773D0() {
  BOOL result; // eax

  if (gDirectInputDevice2A)
    result = gDirectInputDevice2A->lpVtbl->Acquire(gDirectInputDevice2A) >= 0;
  else
    result = 0;
  return result;
}

//----- (100773F0) --------------------------------------------------------
int __cdecl input_100773F0(int *a1, int *a2) {
  int v2;                      // ebp
  IDirectInputDeviceAVtbl *v3; // edx
  int v4;                      // eax
  int result;                  // eax
  int v6;                      // eax
  bool v7;                     // zf
  HRESULT v8;                  // eax
  int v9;                      // edx
  LPDIRECTINPUTDEVICEA v10;    // ecx
  int v11;                     // eax
  int *v12;                    // eax
  int v13;                     // ecx
  int v14;                     // esi
  int v15;                     // eax
  bool v16;                    // sf
  int v17;                     // esi
  int v18;                     // eax
  int v19;                     // eax
  int v20;                     // eax
  __int16 v21;                 // kr18_2
  char v22;                    // al
  DWORD v23;                   // esi
  int v24;                     // ecx
  unsigned int v25;            // eax
  int v26;                     // eax
  int v27;                     // ecx
  int v28;                     // eax
  int v29;                     // ecx
  int v30;                     // ecx
  int v31;                     // ecx
  int v32;                     // ecx
  int v33;                     // eax
  int v34;                     // edx
  int v35;                     // eax
  int v36;                     // edx
  int v37;                     // edx
  int v38;                     // eax
  __int16 v39;                 // dx
  int v40;                     // edx
  int v41;                     // ecx
  int v42;                     // eax
  int v43;                     // eax
  int v44;                     // eax
  int v45;                     // eax
  int v46;                     // eax
  int v47;                     // eax
  int v48;                     // eax
  __int16 v49;                 // ax
  int v50;                     // eax
  int v51;                     // ecx
  int v52;                     // eax
  int v53;                     // eax
  int v54;                     // eax
  int v55;                     // eax
  int v56;                     // eax
  int v57;                     // eax
  int v58;                     // eax
  DWORD v59;                   // eax
  int v60;                     // esi
  int v61;                     // eax
  int v62;                     // [esp+34h] [ebp-110h] BYREF
  int v63;                     // [esp+38h] [ebp-10Ch]
  int v64;                     // [esp+3Ch] [ebp-108h]
  int v65;                     // [esp+40h] [ebp-104h]
  char Buffer[256];            // [esp+44h] [ebp-100h] BYREF

  if (dword_118ABDDC < 0x7FFF)
    ++dword_118ABDDC;
  v2 = 0;
  gDIEffectSpring.dwStartDelay = dword_118ABAD8;
  v3 = g_lpDirectInputDeviceA->lpVtbl;
  dword_118ABAD8 = ((_BYTE)dword_118ABAD8 - 1) & 1;
  v4 = v3->GetDeviceState(g_lpDirectInputDeviceA, 256, &byte_118AB8B8[256 * dword_118ABAD8]);
  if (v4 < 0) {
    if (v4 != -2147024866) {
      dword_118ABAD0 = 0;
      return 0;
    }
    if (g_lpDirectInputDeviceA->lpVtbl->Acquire(g_lpDirectInputDeviceA) < 0) {
      dword_118ABAD0 = 0;
      return 0;
    }
    if (g_lpDirectInputDeviceA->lpVtbl->GetDeviceState(
            g_lpDirectInputDeviceA, 256, &byte_118AB8B8[256 * dword_118ABAD8]) < 0) {
      dword_118ABAD0 = 0;
      return 0;
    }
  }
  v6 = gConfigJoystickIndex;
  v7 = gConfigJoystickIndex == 1;
  byte_118AB8B8[256 * dword_118ABAD8] = 0;
  if (v7 || v6 == 2) {
    dword_118ABD7C = dword_118ABAB8;
    dword_118ABAB8 = ((_BYTE)dword_118ABAB8 - 1) & 1;
    gDirectInputDevice2A->lpVtbl->Poll(gDirectInputDevice2A);
    v8 = gDirectInputDevice2A->lpVtbl->GetDeviceState(
        gDirectInputDevice2A, 272, &dword_118ABAE0[68 * dword_118ABAB8]);
    if (v8) {
      if (v8 == -2147024866)
        input_100773D0();
      memset(&byte_118ABB10[272 * dword_118ABAB8], 0, 0x80u);
    }
  }
  dword_118ABAD4 = dword_118ABD80;
  v9 = ((_BYTE)dword_118ABD80 - 1) & 1;
  dword_118ABD80 = v9;
  if (gUnk54Ptr && (v10 = gUnk54Ptr->lpDIDeviceA) != 0) {
    v11 = v10->lpVtbl->GetDeviceState(gUnk54Ptr->lpDIDeviceA, 16, &v62);
    if (!v11) {
      v12 = &dword_118ABD44[7 * dword_118ABAD4];
      v13 = 7 * dword_118ABD80;
      dword_118ABD44[v13] = *v12 + v62;
      dword_118ABD48[v13] = *v12 + v63;
      v14 = *v12;
      v15 = dword_10ACED40;
      v16 = dword_10ACED40 < 0;
      dword_118ABD4C[v13] = v14 + v64;
      if (v16) {
        v15 = 0;
      } else if (v15 > 7) {
        v15 = 7;
      }
      v17 = dword_100BD400[v15];
      dword_118ABD38[v13] = (dword_118ABD44[v13] << 7) / v17;
      dword_118ABD3C[v13] = (dword_118ABD48[v13] << 7) / v17;
      dword_118ABD40[v13] = (dword_118ABD4C[v13] << 7) / v17;
      v18 = dword_118ABD38[v13];
      if (v18 >= -128) {
        if (v18 > 128) {
          dword_118ABD38[v13] = 128;
          dword_118ABD44[v13] = v17;
        }
      } else {
        dword_118ABD38[v13] = -128;
        dword_118ABD44[v13] = -v17;
      }
      v19 = dword_118ABD3C[v13];
      if (v19 >= -128) {
        if (v19 > 128) {
          dword_118ABD3C[v13] = 128;
          dword_118ABD48[v13] = v17;
        }
      } else {
        dword_118ABD3C[v13] = -128;
        dword_118ABD48[v13] = -v17;
      }
      v20 = dword_118ABD40[v13];
      if (v20 >= -128) {
        if (v20 <= 128) {
        LABEL_36:
          v21 = *(_WORD *)((char *)&v65 + 1);
          byte_118ABD50[v13 * 4] = v65;
          v22 = HIBYTE(v65);
          byte_118ABD51[v13 * 4] = v21;
          byte_118ABD52[v13 * 4] = HIBYTE(v21);
          byte_118ABD53[v13 * 4] = v22;
          goto LABEL_41;
        }
        dword_118ABD40[v13] = 128;
      } else {
        dword_118ABD40[v13] = -128;
        v17 = -v17;
      }
      dword_118ABD4C[v13] = v17;
      goto LABEL_36;
    }
    if (v11 == -2147024866)
      gUnk54Ptr->lpDIDeviceA->lpVtbl->Acquire(gUnk54Ptr->lpDIDeviceA);
    *(_DWORD *)&byte_118ABD50[28 * dword_118ABD80] = 0;
  } else {
    memset(&dword_118ABD38[7 * v9], 0, 0x1Cu);
  }
LABEL_41:
  if (!input_100786E0(15)) {
  LABEL_47:
    v23 = gDIEffectSpring.dwStartDelay;
    v24 = dword_118ABAD8;
    if (byte_118AB8F7[256 * gDIEffectSpring.dwStartDelay] >= 0 &&
        byte_118AB8F7[256 * dword_118ABAD8] < 0)
      dword_100BD3E8 = dword_100BD3E8 == 0;
    if (byte_118AB8F8[256 * gDIEffectSpring.dwStartDelay] >= 0 &&
        byte_118AB8F8[256 * dword_118ABAD8] < 0)
      dword_100BD3EC = dword_100BD3EC == 0;
    if (byte_118AB8F9[256 * gDIEffectSpring.dwStartDelay] >= 0 &&
        byte_118AB8F9[256 * dword_118ABAD8] < 0)
      dword_100BD3F0 = dword_100BD3F0 == 0;
    if (byte_118AB8FA[256 * gDIEffectSpring.dwStartDelay] >= 0 &&
        byte_118AB8FA[256 * dword_118ABAD8] < 0)
      dword_100BD3F4 = dword_100BD3F4 == 0;
    if (byte_118AB8FB[256 * gDIEffectSpring.dwStartDelay] >= 0 &&
        byte_118AB8FB[256 * dword_118ABAD8] < 0)
      dword_100BD3F8 = dword_100BD3F8 == 0;
    if (byte_118AB8FC[256 * gDIEffectSpring.dwStartDelay] >= 0 &&
        byte_118AB8FC[256 * dword_118ABAD8] < 0)
      dword_100BD3FC = dword_100BD3FC == 0;
    if (byte_118AB90F[256 * gDIEffectSpring.dwStartDelay] >= 0 &&
        byte_118AB90F[256 * dword_118ABAD8] < 0) {
      pm_sub_10002930();
      v23 = gDIEffectSpring.dwStartDelay;
      v24 = dword_118ABAD8;
    }
    if (byte_118AB910[256 * v23] >= 0 && byte_118AB910[256 * v24] < 0)
      pm_sub_10002970();
    if ((GetAsyncKeyState(70) & 1) != 0 && dword_118ABDDC > 15)
      dword_10B501D8 = dword_10B501D8 == 0;
    if ((GetAsyncKeyState(80) & 1) != 0 && dword_118ABDDC > 15)
      dword_118ABDC8 = dword_118ABDC8 == 0;
    if (dword_106909E0) {
      if (dword_106909E0 == 2) {
        if (input_100786E0(8))
          v2 = 256;
        if (input_100786E0(9))
          v2 |= 0x200u;
        if (input_100786E0(10))
          v2 |= 0x400u;
      }
      if (input_100786E0(11))
        v2 |= 0x800u;
      if (input_100786E0(21))
        v2 |= 0x100400u;
      if (input_10078420(22))
        v2 |= 0x200000u;
      if (input_10078420(23))
        v2 |= 0x400000u;
      if (input_10078420(24))
        v2 |= 0x800000u;
      if (input_10078420(25))
        v2 |= 0x1000000u;
      if (input_100786E0(26))
        v2 |= 0x200000u;
      if (input_100786E0(27)) {
        dword_118ABAD0 = v2 | 0x400000;
        return v2 | 0x400000;
      }
    LABEL_298:
      dword_118ABAD0 = v2;
      return v2;
    }
    if (input_100786E0(16)) {
      if (!dword_106909B4 && gGameMode != GAME_MODE_4 && gGameMode != GAME_MODE_5)
        dword_118ABDCC = 1;
      if (gNetworkPlay) {
        if (!dword_118ABDC0) {
          atomic_sub_10004BB0();
          dword_118ABDC0 = 1;
        }
      } else {
        gIsGameMode4 = 1;
        if (gGameMode == GAME_MODE_2)
          __setargv_0();
      }
    }
    if (input_100786E0(14))
      v2 = 0x8000;
    *a1 = 0;
    if (gGameMode == GAME_MODE_4 || gGameMode == GAME_MODE_5)
      goto LABEL_203;
    if ((HIBYTE(LOWORD(gConfigJoystickPtr->field_0)) & 0x80u) == 0)
      goto LABEL_158;
    v25 = gConfigJoystickPtr->field_0 & 0xFF00;
    if (v25 <= 0x8100) {
      if (v25 != 33024) {
        if (v25 == 0x8000) {
          v26 = dword_118ABAB8;
          v27 = dword_118ABAE0[68 * dword_118ABAB8];
          if (v27 < 0) {
              v28 = 5 * v27;
          LABEL_154:
              *a1 = 16 * v28 / 128;
              v26 = dword_118ABAB8;
              v32 = dword_118ABD80;
              goto LABEL_160;
          }
          goto LABEL_157;
        }
        goto LABEL_158;
      }
      v26 = dword_118ABAB8;
      v29 = dword_118ABAE0[68 * dword_118ABAB8];
      goto LABEL_134;
    }
    if ((gConfigJoystickPtr->field_0 & 0xFF00u) <= 0x8300) {
      if (v25 != 33536) {
        if (v25 == 33280) {
          v26 = dword_118ABAB8;
          v30 = dword_118ABAE4[68 * dword_118ABAB8];
          if (v30 < 0) {
              v28 = 5 * v30;
              goto LABEL_154;
          }
          goto LABEL_157;
        }
        goto LABEL_158;
      }
      v26 = dword_118ABAB8;
      v29 = dword_118ABAE4[68 * dword_118ABAB8];
    LABEL_134:
      if (v29 > 0) {
        v28 = -5 * v29;
        goto LABEL_154;
      }
      goto LABEL_157;
    }
    if ((gConfigJoystickPtr->field_0 & 0xFF00u) <= 0x8500) {
      if (v25 == 34048) {
        v26 = dword_118ABAB8;
        v29 = dword_118ABAE8[68 * dword_118ABAB8];
        goto LABEL_134;
      }
      if (v25 == 33792) {
        v26 = dword_118ABAB8;
        v31 = dword_118ABAE8[68 * dword_118ABAB8];
        if (v31 < 0) {
          v28 = 5 * v31;
          goto LABEL_154;
        }
        goto LABEL_157;
      }
    LABEL_158:
      v26 = dword_118ABAB8;
      v32 = dword_118ABD80;
      goto LABEL_160;
    }
    if ((gConfigJoystickPtr->field_0 & 0xFF00u) > 0x8700) {
      if ((gConfigJoystickPtr->field_0 & 0xFF00u) > 0x8900) {
        if (v25 == 35328) {
          v32 = dword_118ABD80;
          v38 = dword_118ABD40[7 * dword_118ABD80];
          if (v38 < 0) {
              *a1 = 80 * v38 / 128;
              v26 = dword_118ABAB8;
          LABEL_157:
              v32 = dword_118ABD80;
              goto LABEL_160;
          }
        } else {
          if (v25 != 35584)
              goto LABEL_158;
          v32 = dword_118ABD80;
          v37 = dword_118ABD40[7 * dword_118ABD80];
          if (v37 > 0) {
              v28 = -5 * v37;
              goto LABEL_154;
          }
        }
      } else if (v25 == 35072) {
        v32 = dword_118ABD80;
        v36 = dword_118ABD3C[7 * dword_118ABD80];
        if (v36 > 0) {
          *a1 = -80 * v36 / 128;
          v26 = dword_118ABAB8;
          v32 = dword_118ABD80;
          goto LABEL_160;
        }
      } else {
        if (v25 != 34816)
          goto LABEL_158;
        v32 = dword_118ABD80;
        v35 = dword_118ABD3C[7 * dword_118ABD80];
        if (v35 < 0) {
          v28 = 5 * v35;
          goto LABEL_154;
        }
      }
    } else if (v25 == 34560) {
      v32 = dword_118ABD80;
      v34 = dword_118ABD38[7 * dword_118ABD80];
      if (v34 > 0) {
        *a1 = -80 * v34 / 128;
        v26 = dword_118ABAB8;
        v32 = dword_118ABD80;
        goto LABEL_160;
      }
    } else {
      if (v25 != 34304)
        goto LABEL_158;
      v32 = dword_118ABD80;
      v33 = dword_118ABD38[7 * dword_118ABD80];
      if (v33 < 0) {
        v28 = 5 * v33;
        goto LABEL_154;
      }
    }
    v26 = dword_118ABAB8;
  LABEL_160:
    v39 = *(_WORD *)&gConfigJoystickPtr->gap4[2];
    if (v39 >= 0)
      goto LABEL_203;
    v40 = v39 & 0xFF00;
    if (v40 <= 33024) {
      if (v40 == 33024) {
        v42 = dword_118ABAE0[68 * v26];
        if (v42 <= 0)
          goto LABEL_203;
        v43 = 5 * v42;
        goto LABEL_202;
      }
      if (v40 == 0x8000) {
        v41 = dword_118ABAE0[68 * v26];
        if (v41 < 0)
          goto LABEL_201;
      }
    LABEL_203:
      if (dword_106909B4) {
        if (input_100786E0(12))
          v2 |= 0x1000u;
        if (input_100786E0(13))
          v2 |= 0x2000u;
        if (input_100786E0(0))
          v2 |= 1u;
        if (input_100786E0(1))
          v2 |= 2u;
        if (input_100786E0(2)) {
          dword_118ABAD0 = v2 | 4;
          return v2 | 4;
        }
        goto LABEL_298;
      }
      *a2 = 0;
      if (input_10078420(2)) {
        v2 |= 4u;
        if ((char)gConfigJoystickPtr->gap8[5] >= 0)
          *a2 = 80;
      }
      v49 = *(_WORD *)&gConfigJoystickPtr->gap8[4];
      if (v49 >= 0)
        goto LABEL_260;
      v50 = v49 & 0xFF00;
      if (v50 <= 33024) {
        if (v50 == 33024) {
          v52 = dword_118ABAE0[68 * dword_118ABAB8];
          if (v52 <= 0)
              goto LABEL_260;
          v53 = 5 * v52;
          goto LABEL_259;
        }
        if (v50 == 0x8000) {
          v51 = dword_118ABAE0[68 * dword_118ABAB8];
          if (v51 < 0)
              goto LABEL_258;
        }
      LABEL_260:
        if (input_10078420(3))
          v2 |= 8u;
        if (input_10078420(4)) {
          v2 |= 0x10u;
          *a2 = -80;
        }
        if (gGameMode != GAME_MODE_4 && gGameMode != GAME_MODE_5) {
          if (input_10078420(0))
              v2 |= 1u;
          if (input_10078420(1))
              v2 |= 2u;
        }
        if (input_10078420(5))
          v2 |= 0x20u;
        if (input_10078420(6))
          v2 |= 0x40u;
        if (input_100786E0(8))
          v2 |= 0x100u;
        if (input_100786E0(9))
          v2 |= 0x200u;
        if (input_100786E0(10))
          v2 |= 0x400u;
        if (input_100786E0(17))
          v2 |= 0x10000u;
        if (input_100786E0(18))
          v2 |= 0x20000u;
        if (input_100786E0(19))
          v2 |= 0x40000u;
        if (input_100786E0(20))
          v2 |= 0x80000u;
        if (input_10078420(7))
          v2 |= 0x80u;
        if (gRunBenchmark) {
          if (dword_118ABDDC == 1) {
              dword_118ABD00 = getTicks();
              dword_118ABD74 = sub_10016A50();
          }
          if (dword_118ABDDC == 441) {
              v59 = getTicks();
              v60 = v59 - dword_118ABD00;
              dword_118ABD00 = v59;
              v61 = sub_10016A50();
              v63 = 0;
              v62 = v60;
              sprintf(Buffer, "fps = %0.2f", (double)(v61 - dword_118ABD74) * 1000.0 / (double)v60);
              exit(1);
          }
          GetAsyncKeyState(27);
          if (dword_118ABDDC == 1) {
              dword_10B501D8 = 1;
              dword_118ABAD0 = 1024;
              return 1024;
          }
          v2 = dword_118ABDDC >= 60 ? 4 : 0;
        }
        goto LABEL_298;
      }
      if (v50 > 33536) {
        if (v50 > 34048) {
          if (v50 > 34560) {
              if (v50 > 35072) {
                  if (v50 != 35328) {
                      if (v50 == 35584) {
                          v58 = dword_118ABD40[7 * dword_118ABD80];
                          if (v58 > 0) {
                              v53 = 5 * v58;
                          LABEL_259:
                              *a2 = 16 * v53 / 128;
                              goto LABEL_260;
                          }
                      }
                      goto LABEL_260;
                  }
                  v51 = dword_118ABD40[7 * dword_118ABD80];
                  if (v51 >= 0)
                      goto LABEL_260;
              } else {
                  if (v50 == 35072) {
                      v57 = dword_118ABD3C[7 * dword_118ABD80];
                      if (v57 <= 0)
                          goto LABEL_260;
                      v53 = 5 * v57;
                      goto LABEL_259;
                  }
                  if (v50 != 34816)
                      goto LABEL_260;
                  v51 = dword_118ABD3C[7 * dword_118ABD80];
                  if (v51 >= 0)
                      goto LABEL_260;
              }
          } else {
              if (v50 == 34560) {
                  v56 = dword_118ABD38[7 * dword_118ABD80];
                  if (v56 <= 0)
                      goto LABEL_260;
                  v53 = 5 * v56;
                  goto LABEL_259;
              }
              if (v50 != 34304)
                  goto LABEL_260;
              v51 = dword_118ABD38[7 * dword_118ABD80];
              if (v51 >= 0)
                  goto LABEL_260;
          }
        } else {
          if (v50 == 34048) {
              v55 = dword_118ABAE8[68 * dword_118ABAB8];
              if (v55 <= 0)
                  goto LABEL_260;
              v53 = 5 * v55;
              goto LABEL_259;
          }
          if (v50 != 33792)
              goto LABEL_260;
          v51 = dword_118ABAE8[68 * dword_118ABAB8];
          if (v51 >= 0)
              goto LABEL_260;
        }
      } else {
        if (v50 == 33536) {
          v54 = dword_118ABAE4[68 * dword_118ABAB8];
          if (v54 <= 0)
              goto LABEL_260;
          v53 = 5 * v54;
          goto LABEL_259;
        }
        if (v50 != 33280)
          goto LABEL_260;
        v51 = dword_118ABAE4[68 * dword_118ABAB8];
        if (v51 >= 0)
          goto LABEL_260;
      }
    LABEL_258:
      v53 = -5 * v51;
      goto LABEL_259;
    }
    if (v40 > 33536) {
      if (v40 > 34048) {
        if (v40 > 34560) {
          if (v40 > 35072) {
              if (v40 != 35328) {
                  if (v40 == 35584) {
                      v48 = dword_118ABD40[7 * v32];
                      if (v48 > 0) {
                          v43 = 5 * v48;
                      LABEL_202:
                          *a1 = 16 * v43 / 128;
                          goto LABEL_203;
                      }
                  }
                  goto LABEL_203;
              }
              v41 = dword_118ABD40[7 * v32];
              if (v41 >= 0)
                  goto LABEL_203;
          } else {
              if (v40 == 35072) {
                  v47 = dword_118ABD3C[7 * v32];
                  if (v47 <= 0)
                      goto LABEL_203;
                  v43 = 5 * v47;
                  goto LABEL_202;
              }
              if (v40 != 34816)
                  goto LABEL_203;
              v41 = dword_118ABD3C[7 * v32];
              if (v41 >= 0)
                  goto LABEL_203;
          }
        } else {
          if (v40 == 34560) {
              v46 = dword_118ABD38[7 * v32];
              if (v46 <= 0)
                  goto LABEL_203;
              v43 = 5 * v46;
              goto LABEL_202;
          }
          if (v40 != 34304)
              goto LABEL_203;
          v41 = dword_118ABD38[7 * v32];
          if (v41 >= 0)
              goto LABEL_203;
        }
      } else {
        if (v40 == 34048) {
          v45 = dword_118ABAE8[68 * v26];
          if (v45 <= 0)
              goto LABEL_203;
          v43 = 5 * v45;
          goto LABEL_202;
        }
        if (v40 != 33792)
          goto LABEL_203;
        v41 = dword_118ABAE8[68 * v26];
        if (v41 >= 0)
          goto LABEL_203;
      }
    } else {
      if (v40 == 33536) {
        v44 = dword_118ABAE4[68 * v26];
        if (v44 <= 0)
          goto LABEL_203;
        v43 = 5 * v44;
        goto LABEL_202;
      }
      if (v40 != 33280)
        goto LABEL_203;
      v41 = dword_118ABAE4[68 * v26];
      if (v41 >= 0)
        goto LABEL_203;
    }
  LABEL_201:
    v43 = -5 * v41;
    goto LABEL_202;
  }
  if (gNetworkPlay && gIsGameMode4 && !dword_106909E0 && dword_10ACEE50 < dword_100BD3E0) {
    atomic_sub_10004BE0();
    goto LABEL_47;
  }
  result = 0x4000;
  dword_1022AF20 = 1;
  dword_118ABAD0 = 0x4000;
  return result;
}
// 100BD3E8: using guessed type int dword_100BD3E8;
// 100BD3EC: using guessed type int dword_100BD3EC;
// 100BD3F0: using guessed type int dword_100BD3F0;
// 100BD3F4: using guessed type int dword_100BD3F4;
// 100BD3F8: using guessed type int dword_100BD3F8;
// 100BD3FC: using guessed type int dword_100BD3FC;
// 1022AF14: using guessed type int gIsGameMode4;
// 1022AF18: using guessed type int gNetworkPlay;
// 1022AF20: using guessed type int dword_1022AF20;
// 106909B4: using guessed type int dword_106909B4;
// 106909E0: using guessed type int dword_106909E0;
// 10ACED40: using guessed type int dword_10ACED40;
// 10ACEE50: using guessed type int dword_10ACEE50;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B501D8: using guessed type int dword_10B501D8;
// 118ABAB8: using guessed type int dword_118ABAB8;
// 118ABAD0: using guessed type int dword_118ABAD0;
// 118ABAD4: using guessed type int dword_118ABAD4;
// 118ABAD8: using guessed type int dword_118ABAD8;
// 118ABAE0: using guessed type int dword_118ABAE0[];
// 118ABAE4: using guessed type int dword_118ABAE4[];
// 118ABAE8: using guessed type int dword_118ABAE8[];
// 118ABD00: using guessed type int dword_118ABD00;
// 118ABD38: using guessed type int dword_118ABD38[];
// 118ABD3C: using guessed type int dword_118ABD3C[];
// 118ABD40: using guessed type int dword_118ABD40[];
// 118ABD44: using guessed type int dword_118ABD44[];
// 118ABD48: using guessed type int dword_118ABD48[];
// 118ABD4C: using guessed type int dword_118ABD4C[];
// 118ABD74: using guessed type int dword_118ABD74;
// 118ABD7C: using guessed type int dword_118ABD7C;
// 118ABD80: using guessed type int dword_118ABD80;
// 118ABDC0: using guessed type int dword_118ABDC0;
// 118ABDC4: using guessed type int gRunBenchmark;
// 118ABDC8: using guessed type int dword_118ABDC8;
// 118ABDCC: using guessed type int dword_118ABDCC;
// 118ABDDC: using guessed type int dword_118ABDDC;

//----- (10078420) --------------------------------------------------------
char __cdecl input_10078420(int a1) {
  char result;         // al
  unsigned __int8 *v2; // edx
  unsigned int v3;     // ecx

  result = 0;
  v2 = (unsigned __int8 *)gConfigJoystickPtr + 6 * a1;
  v3 = *(_WORD *)v2 & 0xFF00;
  if (v3 <= 0x100) {
    if (v3 == 256) {
      result = byte_118ABB10[272 * dword_118ABAB8 + *v2] & 0x80;
    } else if ((*(_WORD *)v2 & 0xFF00) == 0) {
      result = byte_118AB8B8[256 * dword_118ABAD8 + *v2] & 0x80;
    }
    goto LABEL_49;
  }
  if ((*(_WORD *)v2 & 0xFF00u) > 0x8000) {
    if ((*(_WORD *)v2 & 0xFF00u) > 0x8200) {
      if ((*(_WORD *)v2 & 0xFF00u) > 0x8400) {
        if ((*(_WORD *)v2 & 0xFF00u) > 0x8600) {
          if ((*(_WORD *)v2 & 0xFF00u) > 0x8800) {
              if (v3 == 35072) {
                  if (dword_118ABD3C[7 * dword_118ABD80] <= 50)
                      goto LABEL_49;
              } else if (v3 == 35328) {
                  if (dword_118ABD40[7 * dword_118ABD80] >= -50)
                      goto LABEL_49;
              } else if (v3 != 35584 || dword_118ABD40[7 * dword_118ABD80] <= 50) {
                  goto LABEL_49;
              }
          } else if (v3 == 34816) {
              if (dword_118ABD3C[7 * dword_118ABD80] >= -50)
                  goto LABEL_49;
          } else if (v3 != 34560 || dword_118ABD38[7 * dword_118ABD80] <= 50) {
              goto LABEL_49;
          }
        } else if (v3 == 34304) {
          if (dword_118ABD38[7 * dword_118ABD80] >= -50)
              goto LABEL_49;
        } else if (v3 != 34048 || dword_118ABAE8[68 * dword_118ABAB8] <= 50) {
          goto LABEL_49;
        }
      } else if (v3 == 33792) {
        if (dword_118ABAE8[68 * dword_118ABAB8] >= -50)
          goto LABEL_49;
      } else if (v3 != 33536 || dword_118ABAE4[68 * dword_118ABAB8] <= 50) {
        goto LABEL_49;
      }
    } else if (v3 == 33280) {
      if (dword_118ABAE4[68 * dword_118ABAB8] >= -50)
        goto LABEL_49;
    } else if (v3 != 33024 || dword_118ABAE0[68 * dword_118ABAB8] <= 50) {
      goto LABEL_49;
    }
  LABEL_48:
    result = 0x80;
    goto LABEL_49;
  }
  if (v3 == 0x8000) {
    if (dword_118ABAE0[68 * dword_118ABAB8] >= -50)
      goto LABEL_49;
    goto LABEL_48;
  }
  if (v3 == 768)
    result = byte_118ABD50[28 * dword_118ABD80 + *v2] & 0x80;
LABEL_49:
  if (!v2[3])
    result |= byte_118AB8B8[256 * dword_118ABAD8 + v2[2]] & 0x80;
  if (!v2[5])
    result |= byte_118AB8B8[256 * dword_118ABAD8 + v2[4]] & 0x80;
  return result;
}
// 118ABAB8: using guessed type int dword_118ABAB8;
// 118ABAD8: using guessed type int dword_118ABAD8;
// 118ABAE0: using guessed type int dword_118ABAE0[];
// 118ABAE4: using guessed type int dword_118ABAE4[];
// 118ABAE8: using guessed type int dword_118ABAE8[];
// 118ABD38: using guessed type int dword_118ABD38[];
// 118ABD3C: using guessed type int dword_118ABD3C[];
// 118ABD40: using guessed type int dword_118ABD40[];
// 118ABD80: using guessed type int dword_118ABD80;

//----- (100786E0) --------------------------------------------------------
char __cdecl input_100786E0(int a1) {
  char result;         // al
  unsigned __int8 *v2; // esi
  unsigned int v3;     // ecx
  int v4;              // eax
  bool v5;             // zf
  int v6;              // ecx
  int v7;              // ecx
  int v8;              // ebp
  int v9;              // ecx
  int v10;             // ecx

  result = 0;
  v2 = (unsigned __int8 *)gConfigJoystickPtr + 6 * a1;
  v3 = *(_WORD *)v2 & 0xFF00;
  if (v3 <= 0x100) {
    if (v3 == 256) {
      v6 = *v2;
      if ((byte_118ABB10[272 * dword_118ABD7C + v6] & 0x80) == 0 &&
          (byte_118ABB10[272 * dword_118ABAB8 + v6] & 0x80) != 0) {
        result = 1;
        goto LABEL_68;
      }
    } else {
      if ((*(_WORD *)v2 & 0xFF00) != 0)
        goto LABEL_68;
      v4 = *v2;
      if ((byte_118AB8B8[256 * gDIEffectSpring.dwStartDelay + v4] & 0x80) == 0) {
        v5 = byte_118AB8B8[256 * dword_118ABAD8 + v4] >= 0;
        goto LABEL_14;
      }
    }
    goto LABEL_16;
  }
  if ((*(_WORD *)v2 & 0xFF00u) > 0x8000) {
    if ((*(_WORD *)v2 & 0xFF00u) > 0x8200) {
      if ((*(_WORD *)v2 & 0xFF00u) > 0x8400) {
        if ((*(_WORD *)v2 & 0xFF00u) > 0x8600) {
          if ((*(_WORD *)v2 & 0xFF00u) > 0x8800) {
              if (v3 == 35072) {
                  if (dword_118ABD3C[7 * dword_118ABAD4] > 50 ||
                      dword_118ABD3C[7 * dword_118ABD80] <= 50)
                      goto LABEL_68;
              } else if (v3 == 35328) {
                  if (dword_118ABD40[7 * dword_118ABAD4] < -50 ||
                      dword_118ABD40[7 * dword_118ABD80] >= -50)
                      goto LABEL_68;
              } else if (v3 != 35584 || dword_118ABD40[7 * dword_118ABAD4] > 50 ||
                         dword_118ABD40[7 * dword_118ABD80] <= 50) {
                  goto LABEL_68;
              }
          } else if (v3 == 34816) {
              if (dword_118ABD3C[7 * dword_118ABAD4] < -50 ||
                  dword_118ABD3C[7 * dword_118ABD80] >= -50)
                  goto LABEL_68;
          } else if (v3 != 34560 || dword_118ABD38[7 * dword_118ABAD4] > 50 ||
                     dword_118ABD38[7 * dword_118ABD80] <= 50) {
              goto LABEL_68;
          }
        } else if (v3 == 34304) {
          if (dword_118ABD38[7 * dword_118ABAD4] < -50 || dword_118ABD38[7 * dword_118ABD80] >= -50)
              goto LABEL_68;
        } else if (v3 != 34048 || dword_118ABAE8[68 * dword_118ABD7C] > 50 ||
                   dword_118ABAE8[68 * dword_118ABAB8] <= 50) {
          goto LABEL_68;
        }
      } else if (v3 == 33792) {
        if (dword_118ABAE8[68 * dword_118ABD7C] < -50 || dword_118ABAE8[68 * dword_118ABAB8] >= -50)
          goto LABEL_68;
      } else if (v3 != 33536 || dword_118ABAE4[68 * dword_118ABD7C] > 50 ||
                 dword_118ABAE4[68 * dword_118ABAB8] <= 50) {
        goto LABEL_68;
      }
    } else if (v3 == 33280) {
      if (dword_118ABAE4[68 * dword_118ABD7C] < -50 || dword_118ABAE4[68 * dword_118ABAB8] >= -50)
        goto LABEL_68;
    } else if (v3 != 33024 || dword_118ABAE0[68 * dword_118ABD7C] > 50 ||
               dword_118ABAE0[68 * dword_118ABAB8] <= 50) {
      goto LABEL_68;
    }
  LABEL_67:
    result = 0x80;
    goto LABEL_68;
  }
  if (v3 != 0x8000) {
    if (v3 != 768)
      goto LABEL_68;
    v7 = *v2;
    if ((byte_118ABD50[28 * dword_118ABAD4 + v7] & 0x80) == 0) {
      v5 = byte_118ABD50[28 * dword_118ABD80 + v7] >= 0;
    LABEL_14:
      if (!v5) {
        result = 1;
        goto LABEL_68;
      }
    }
  LABEL_16:
    result = 0;
    goto LABEL_68;
  }
  if (dword_118ABAE0[68 * dword_118ABD7C] >= -50 && dword_118ABAE0[68 * dword_118ABAB8] < -50)
    goto LABEL_67;
LABEL_68:
  if (v2[3]) {
    v8 = dword_118ABAD8;
  } else {
    v8 = dword_118ABAD8;
    v9 = v2[2];
    if ((byte_118AB8B8[256 * gDIEffectSpring.dwStartDelay + v9] & 0x80) == 0 &&
        (byte_118AB8B8[256 * dword_118ABAD8 + v9] & 0x80) != 0) {
      result |= 1u;
    }
  }
  if (!v2[5]) {
    v10 = v2[4];
    if ((byte_118AB8B8[256 * gDIEffectSpring.dwStartDelay + v10] & 0x80) == 0 &&
        (byte_118AB8B8[256 * v8 + v10] & 0x80) != 0) {
      result |= 1u;
    }
  }
  return result;
}
// 118ABAB8: using guessed type int dword_118ABAB8;
// 118ABAD4: using guessed type int dword_118ABAD4;
// 118ABAD8: using guessed type int dword_118ABAD8;
// 118ABAE0: using guessed type int dword_118ABAE0[];
// 118ABAE4: using guessed type int dword_118ABAE4[];
// 118ABAE8: using guessed type int dword_118ABAE8[];
// 118ABD38: using guessed type int dword_118ABD38[];
// 118ABD3C: using guessed type int dword_118ABD3C[];
// 118ABD40: using guessed type int dword_118ABD40[];
// 118ABD7C: using guessed type int dword_118ABD7C;
// 118ABD80: using guessed type int dword_118ABD80;

//----- (10078BC0) --------------------------------------------------------
LPDIRECTINPUTDEVICEA input_10078BC0() {
  LPDIRECTINPUTDEVICEA result; // eax

  result = (LPDIRECTINPUTDEVICEA)--dword_118ABDD8;
  if (dword_118ABDD8 >= 0) {
    result = (LPDIRECTINPUTDEVICEA)dword_118ABDD8;
    if (!dword_118ABDD8) {
      result = g_lpDirectInputDeviceA;
      if (g_lpDirectInputDeviceA) {
        g_lpDirectInputDeviceA->lpVtbl->Unacquire(g_lpDirectInputDeviceA);
        result =
            (LPDIRECTINPUTDEVICEA)g_lpDirectInputDeviceA->lpVtbl->Release(g_lpDirectInputDeviceA);
        g_lpDirectInputDeviceA = 0;
      }
    }
  } else {
    dword_118ABDD8 = 0;
  }
  return result;
}
// 118ABDD8: using guessed type int dword_118ABDD8;

//----- (10078C10) --------------------------------------------------------
__int64 sub_10078C10() {
  __int64 result; // rax

  result = qword_118ABDE0 + 1562500;
  qword_118ABDE0 += 1562500i64;
  return result;
}
// 118ABDE0: using guessed type __int64 qword_118ABDE0;

//----- (10078C30) --------------------------------------------------------
int __cdecl input_DISetProperty2(IDirectInputDevice2A *diDevice2A,
                                 GUID *guid,
                                 int dwObj,
                                 int dwHow,
                                 int unusedA5,
                                 int unusedA6) {
  IDirectInputDevice2AVtbl *idevLPVtbl; // ecx
  DIPROPHEADER diPropHeader;            // [esp+0h] [ebp-18h] BYREF
  int unusedV9;                         // [esp+10h] [ebp-8h]
  int unusedV10;                        // [esp+14h] [ebp-4h]

  diPropHeader.dwObj = dwObj;
  unusedV9 = unusedA5;
  unusedV10 = unusedA6;
  diPropHeader.dwHow = dwHow;
  idevLPVtbl = diDevice2A->lpVtbl;
  diPropHeader.dwSize = 24;
  diPropHeader.dwHeaderSize = 16;
  return idevLPVtbl->SetProperty(diDevice2A, guid, &diPropHeader);
}

//----- (10078C80) --------------------------------------------------------
HRESULT __cdecl input_DISetProperty(
    IDirectInputDevice2A *dev2a, GUID *guid, DWORD dwObj, DWORD dwHow, int unusedA5) {
  IDirectInputDevice2AVtbl *dev2aVtbl; // ecx
  DIPROPHEADER diPropHeader;           // [esp+0h] [ebp-14h] BYREF
  int unusedV8;                        // [esp+10h] [ebp-4h]

  unusedV8 = unusedA5;
  diPropHeader.dwObj = dwObj;
  diPropHeader.dwHow = dwHow;
  dev2aVtbl = dev2a->lpVtbl;
  diPropHeader.dwSize = 20;
  diPropHeader.dwHeaderSize = 16;
  return dev2aVtbl->SetProperty(dev2a, guid, &diPropHeader);
}

//----- (10078CD0) --------------------------------------------------------
int input_10078CD0() {
  const CHAR *text;    // eax
  unk00054 *u54_1;     // eax
  unk00054 *u54;       // eax
  const CHAR *caption; // [esp-8h] [ebp-18h]

  if (++mouseCreated == 1) {
    if (DirectInputCreateA(hInstance, DIRECTINPUT_VERSION, &g_DirectInputA, 0) < 0) {
      caption = GetStringWithIndex(0x126u);
      text = GetStringWithIndex(0x127u);
      MessageBoxA(gHwnd, text, caption, MB_ICONERROR);
      return 0;
    }
    u54_1 = (unk00054 *)operator new(0x54u);
    if (u54_1)
      u54 = meth_unk00054_init(u54_1);
    else
      u54 = 0;
    gUnk54Ptr = u54;
    meth_unk00054_DICreateMouseDevice(u54, gHwnd);
  }
  return 1;
}
// 118ABDE8: using guessed type int mouseCreated;

//----- (10078DB0) --------------------------------------------------------
int input_10078DB0() {
  LPDIRECTINPUTA dida;         // eax
  void *v1;                    // esi
  IDirectInputAVtbl *didaVtbl; // ecx

  if (!--mouseCreated) {
    dida = g_DirectInputA;
    if (g_DirectInputA) {
      v1 = gUnk54Ptr;
      if (gUnk54Ptr) {
        meth_unk00054_100602B0(gUnk54Ptr);
        operator delete(v1);
        dida = g_DirectInputA;
      }
      didaVtbl = dida->lpVtbl;
      gUnk54Ptr = 0;
      didaVtbl->Release(dida);
      g_DirectInputA = 0;
    }
  }
  return 1;
}
// 100602B0: using guessed type int __thiscall sub_100602B0(_DWORD);
// 118ABDE8: using guessed type int mouseCreated;

//----- (10078E10) --------------------------------------------------------
int __cdecl input_10078E10(int a1) {
  int result; // eax

  result = gConfigJoystickIndex;
  if (gConfigJoystickIndex == 1 || gConfigJoystickIndex == 2) {
    result = dword_10B4E1E0;
    if (dword_10B4E1E0) {
      result = gDIEffectSquare.dwStartDelay;
      if (gDIEffectSquare.dwStartDelay) {
        result = dword_106909E0;
        if (!dword_106909E0) {
          result = a1;
          diEffectRglDirection_0 = a1;
        }
      }
    }
  }
  return result;
}
// 106909E0: using guessed type int dword_106909E0;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E1E0: using guessed type int dword_10B4E1E0;

//----- (10078E50) --------------------------------------------------------
DWORD input_10078E50() {
  DWORD result; // eax

  result = gConfigJoystickIndex;
  if (gConfigJoystickIndex == 1 || gConfigJoystickIndex == 2) {
    result = dword_10B4E1E0;
    if (dword_10B4E1E0) {
      result = gDIEffectSquare.dwStartDelay;
      if (gDIEffectSquare.dwStartDelay) {
        result = dword_106909E0;
        if (!dword_106909E0)
          gDIEffectSquareDuration = 250000;
      }
    }
  }
  return result;
}
// 100BD438: using guessed type int gDIEffectSquareDuration;
// 106909E0: using guessed type int dword_106909E0;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E1E0: using guessed type int dword_10B4E1E0;

//----- (10078E90) --------------------------------------------------------
DWORD input_10078E90() {
  DWORD result; // eax

  result = gConfigJoystickIndex;
  if (gConfigJoystickIndex == 1 || gConfigJoystickIndex == 2) {
    result = dword_10B4E1E0;
    if (dword_10B4E1E0) {
      result = gDIEffectSquare.dwStartDelay;
      if (gDIEffectSquare.dwStartDelay) {
        result = dword_106909E0;
        if (!dword_106909E0)
          gDIEffectSquareDuration = 125000;
      }
    }
  }
  return result;
}
// 100BD438: using guessed type int gDIEffectSquareDuration;
// 106909E0: using guessed type int dword_106909E0;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E1E0: using guessed type int dword_10B4E1E0;

//----- (10078ED0) --------------------------------------------------------
HRESULT input_10078ED0() {
  HRESULT result; // eax

  result = gConfigJoystickIndex;
  if (gConfigJoystickIndex == 1 || gConfigJoystickIndex == 2) {
    result = dword_10B4E1E0;
    if (dword_10B4E1E0) {
      result = gDIEffectSquare.dwStartDelay;
      if (gDIEffectSquare.dwStartDelay) {
        result = dword_106909E0;
        if (!dword_106909E0) {
          gDIEffectSquare.dwDuration = gDIEffectSquareDuration;
          result = (HRESULT)gDirectInputEffect;
          if (gDirectInputEffect)
              result = gDirectInputEffect->lpVtbl->SetParameters(
                  gDirectInputEffect, &gDIEffectSquare, 0x20000041);
        }
      }
    }
  }
  return result;
}
// 100BD438: using guessed type int gDIEffectSquareDuration;
// 106909E0: using guessed type int dword_106909E0;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E1E0: using guessed type int dword_10B4E1E0;

//----- (10078F20) --------------------------------------------------------
int __cdecl input_10078F20(int a1, int a2, int a3) {
  int result; // eax
  int v4;     // ecx
  int v5;     // edi
  int v6;     // ebx
  int v7;     // esi
  int v8;     // edx

  result = gConfigJoystickIndex;
  if (gConfigJoystickIndex != 1 && gConfigJoystickIndex != 2)
    return result;
  result = dword_10B4E1E0;
  if (!dword_10B4E1E0)
    return result;
  result = gDIEffectSquare.dwStartDelay;
  if (!gDIEffectSquare.dwStartDelay)
    return result;
  result = dword_106909E0;
  if (dword_106909E0)
    return result;
  v4 = dword_100BD424;
  v5 = 1000 * dword_100BD424 * (a3 + 8) / 10000;
  result = gDirectInputEffect0Stopped;
  dword_100BD42C = v5;
  if (!a2) {
    if (!gDirectInputEffect0Stopped) {
      result = (int)gDirectInputEffect0;
      if (gDirectInputEffect0)
        result = gDirectInputEffect0->lpVtbl->Stop(gDirectInputEffect0);
      gDirectInputEffect0Stopped = 1;
    }
    return result;
  }
  if (gDirectInputEffect0Stopped) {
    if (gDirectInputEffect0)
      gDirectInputEffect0->lpVtbl->Start(gDirectInputEffect0, 1, 0);
    input_10078E50();
    v5 = dword_100BD42C;
    v4 = dword_100BD424;
    gDirectInputEffect0Stopped = 0;
  }
  v6 = dword_118ABD78;
  if (a1) {
    v7 = -1000 * v4 / 10000 + dword_118ABD78;
    result = 1759218605 * v4 * dword_100BD428;
    dword_118ABD78 = v7;
    v8 = v4 * dword_100BD428 / 10000;
    if (v7 >= v8)
      goto LABEL_20;
  } else {
    v7 = 1000 * v4 / 10000 + dword_118ABD78;
    result = 1759218605 * v4 * v5;
    dword_118ABD78 = v7;
    v8 = v4 * v5 / 10000;
    if (v7 <= v8)
      goto LABEL_20;
  }
  v7 = v8;
  dword_118ABD78 = v8;
LABEL_20:
  if (v7 != v6)
    result = (int)input_100790B0(v7);
  return result;
}
// 100BD424: using guessed type int dword_100BD424;
// 100BD428: using guessed type int dword_100BD428;
// 100BD42C: using guessed type int dword_100BD42C;
// 106909E0: using guessed type int dword_106909E0;
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E1E0: using guessed type int dword_10B4E1E0;
// 118ABD78: using guessed type int dword_118ABD78;
// 118ABDF8: using guessed type int gDirectInputEffect0Stopped;

//----- (100790B0) --------------------------------------------------------
HRESULT __cdecl input_100790B0(int a1) {
  HRESULT result; // eax

  gUnused118ABD0C = a1;
  gUnused118ABD10 = a1;
  result = (HRESULT)gDirectInputEffect0;
  if (gDirectInputEffect0)
    result =
        gDirectInputEffect0->lpVtbl->SetParameters(gDirectInputEffect0, &gDIEffectSpring, 0x100);
  return result;
}
// 118ABD0C: using guessed type int gUnused118ABD0C;
// 118ABD10: using guessed type int gUnused118ABD10;

//----- (100790E0) --------------------------------------------------------
HRESULT __stdcall input_diEnumDevicesCallback(LPDIRECTINPUTDEVICEA deviceInstance,
                                              LPVOID userData) {
  int HRESULT; // esi
  GUID guid;   // [esp+8h] [ebp-10h] BYREF
      // The real type passed in is LPDIDEVICEINSTANCEA, and guid is assigned to deviceInstance->guidInstance. The pointer is then overwritten below with CreateDevice
  guid.Data1 = (unsigned int)deviceInstance[1].lpVtbl;
  *(IDirectInputDeviceA *)&guid.Data2 = deviceInstance[2];
  *(IDirectInputDeviceA *)guid.Data4 = deviceInstance[3];
  *(IDirectInputDeviceA *)&guid.Data4[4] = deviceInstance[4];
  if (g_DirectInputA->lpVtbl->CreateDevice(g_DirectInputA, &guid, &deviceInstance, 0) < 0) {
    OutputDebugStringA(aErrorFailedToC_0);
  } else {
    HRESULT = deviceInstance->lpVtbl->QueryInterface(
        deviceInstance, &CLSID_IDirectInputDevice2A, (LPVOID *)&gDirectInputDevice2A);
    deviceInstance->lpVtbl->Release(deviceInstance);
    if (HRESULT < 0) {
      OutputDebugStringA(aErrorFailedToO);
      return 0;
    }
    if (gDirectInputDevice2A->lpVtbl->SetCooperativeLevel(
            gDirectInputDevice2A, gHwnd, (DWORD)userData) < 0) {
      OutputDebugStringA(aErrorFailedToS);
    LABEL_8:
      gDirectInputDevice2A->lpVtbl->Release(gDirectInputDevice2A);
      gDirectInputDevice2A = 0;
      return 0;
    }
    if (gDirectInputDevice2A->lpVtbl->SetDataFormat(gDirectInputDevice2A, &g_diDataFormat) < 0) {
      OutputDebugStringA(aErrorFailedToS_0);
      goto LABEL_8;
    }
  }
  return 0;
}

//----- (100791D0) --------------------------------------------------------
int input_100791D0() {
  int result;                               // eax
  IDirectInputDevice2AVtbl *diDevice2AVtbl; // edx
  DIPROPHEADER v2;                          // [esp+14h] [ebp-14h] BYREF
  int v3;                                   // [esp+24h] [ebp-4h]

  result = gConfigJoystickIndex;
  if (gConfigJoystickIndex) {
    if (++dword_118ABE00 == 1) {
      if (dword_10B4E1E0 &&
          !g_DirectInputA->lpVtbl->EnumDevices(
              g_DirectInputA,
              4,
              (LPDIENUMDEVICESCALLBACKA)input_diEnumDevicesCallback,
              (LPVOID)5,
              257) &&
          gDirectInputDevice2A) {
        diDevice2AVtbl = gDirectInputDevice2A->lpVtbl;
        gDIEffectSquare.dwStartDelay = 1;
        v2.dwSize = 20;
        v2.dwHeaderSize = 16;
        v2.dwObj = 0;
        v2.dwHow = 0;
        v3 = 0;
        if (diDevice2AVtbl->SetProperty(gDirectInputDevice2A, (const GUID *const)9, &v2) < 0)
          OutputDebugStringA(OutputString);
        input_100773D0();
        input_DICreateEffects(1000, 8000);
      } else {
        g_DirectInputA->lpVtbl->EnumDevices(
            g_DirectInputA, 4, (LPDIENUMDEVICESCALLBACKA)input_diEnumDevicesCallback, (LPVOID)6, 1);
        input_100773D0();
        gDIEffectSquare.dwStartDelay = 0;
      }
      if (!gDirectInputDevice2A)
        return 0;
      if (input_DISetProperty2(gDirectInputDevice2A, (GUID *)4, 0, 1, -128, 128) < 0)
        goto LABEL_15;
      if (input_DISetProperty(gDirectInputDevice2A, (GUID *)5, 0, 1u, 0) < 0)
        goto LABEL_17;
      if (input_DISetProperty2(gDirectInputDevice2A, (GUID *)4, 4, 1, -128, 128) < 0) {
      LABEL_15:
        OutputDebugStringA(aErrorIdirectin);
        gDirectInputDevice2A->lpVtbl->Unacquire(gDirectInputDevice2A);
        gDirectInputDevice2A->lpVtbl->Release(gDirectInputDevice2A);
        gDirectInputDevice2A = 0;
        return 0;
      }
      if (input_DISetProperty(gDirectInputDevice2A, (GUID *)5, 4u, 1u, 0) >= 0) {
        result = gConfigJoystickIndex;
      } else {
      LABEL_17:
        OutputDebugStringA(aErrorIdirectin_0);
        gDirectInputDevice2A->lpVtbl->Unacquire(gDirectInputDevice2A);
        gDirectInputDevice2A->lpVtbl->Release(gDirectInputDevice2A);
        gDirectInputDevice2A = 0;
        result = 0;
      }
    }
  }
  return result;
}
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E1E0: using guessed type int dword_10B4E1E0;
// 118ABE00: using guessed type int dword_118ABE00;

//----- (10079390) --------------------------------------------------------
HRESULT __cdecl input_DICreateEffects(int a1, int unusedA2) {
  IDirectInputDevice2AVtbl *diDevice2AVtbl_1; // ecx
  IDirectInputDevice2AVtbl *diDevice2AVtbl;   // ecx
  DWORD rgdwAxes[2];                          // [esp+14h] [ebp-8h] BYREF

  gUnused118ABD24 = unusedA2;
  gUnused118ABD28 = unusedA2;
  gDIEffectSpring.rgdwAxes = rgdwAxes;
  diDevice2AVtbl_1 = gDirectInputDevice2A->lpVtbl;
  rgdwAxes[0] = 0;
  rgdwAxes[1] = 4;
  gDIEffectTypeSpecificParams = 0;
  gUnused118ABD0C = a1;
  gUnused118ABD10 = a1;
  gUnused118ABD14 = 10000;
  gUnused118ABD18 = 10000;
  gUnused118ABD1C = 0;
  gUnused118ABD20 = 0;
  gUnused118ABD2C = 10000;
  gUnused118ABD30 = 10000;
  gUnused118ABD34 = 0;
  gDIEffectSpring.dwSize = 52;
  gDIEffectSpring.dwFlags = 18;
  gDIEffectSpring.dwDuration = -1;
  gDIEffectSpring.dwSamplePeriod = 0;
  gDIEffectSpring.dwGain = 10000;
  gDIEffectSpring.dwTriggerButton = -1;
  gDIEffectSpring.dwTriggerRepeatInterval = 0;
  gDIEffectSpring.cAxes = 2;
  gDIEffectSpring.rglDirection = &gDIEffectRglDirection;
  gDIEffectSpring.lpEnvelope = 0;
  gDIEffectSpring.cbTypeSpecificParams = 48;
  gDIEffectSpring.lpvTypeSpecificParams = &gDIEffectTypeSpecificParams;
  if (!diDevice2AVtbl_1->CreateEffect(
          gDirectInputDevice2A, &CLSID_GUID_Spring, &gDIEffectSpring, &gDirectInputEffect0, 0)) {
    dword_118ABD78 = a1;
    gDirectInputEffect0Stopped = 1;
  }
  gDIEffectSquare.rgdwAxes = rgdwAxes;
  diDevice2AVtbl = gDirectInputDevice2A->lpVtbl;
  gDIEffectTypeSpecificParams0 = 10000;
  gUnused118ABAC4 = 0;
  gUnused118ABAC8 = 0;
  gUnused118ABACC = 250000;
  gDIEffectSquare.dwSize = 52;
  gDIEffectSquare.dwFlags = 18;
  gDIEffectSquare.dwDuration = gDIEffectSquareDuration;
  gDIEffectSquare.dwSamplePeriod = 0;
  gDIEffectSquare.dwGain = 10000;
  gDIEffectSquare.dwTriggerButton = -1;
  gDIEffectSquare.dwTriggerRepeatInterval = 0;
  gDIEffectSquare.cAxes = 2;
  gDIEffectSquare.rglDirection = &diEffectRglDirection_0;
  gDIEffectSquare.lpEnvelope = 0;
  gDIEffectSquare.cbTypeSpecificParams = 16;
  gDIEffectSquare.lpvTypeSpecificParams = &gDIEffectTypeSpecificParams0;
  return diDevice2AVtbl->CreateEffect(
      gDirectInputDevice2A, &CLSID_GUID_Square, &gDIEffectSquare, &gDirectInputEffect, 0);
}
// 100BD438: using guessed type int gDIEffectSquareDuration;
// 118ABAC0: using guessed type int gDIEffectTypeSpecificParams0;
// 118ABAC4: using guessed type int gUnused118ABAC4;
// 118ABAC8: using guessed type int gUnused118ABAC8;
// 118ABACC: using guessed type int gUnused118ABACC;
// 118ABD08: using guessed type int gDIEffectTypeSpecificParams;
// 118ABD0C: using guessed type int gUnused118ABD0C;
// 118ABD10: using guessed type int gUnused118ABD10;
// 118ABD14: using guessed type int gUnused118ABD14;
// 118ABD18: using guessed type int gUnused118ABD18;
// 118ABD1C: using guessed type int gUnused118ABD1C;
// 118ABD20: using guessed type int gUnused118ABD20;
// 118ABD24: using guessed type int gUnused118ABD24;
// 118ABD28: using guessed type int gUnused118ABD28;
// 118ABD2C: using guessed type int gUnused118ABD2C;
// 118ABD30: using guessed type int gUnused118ABD30;
// 118ABD34: using guessed type int gUnused118ABD34;
// 118ABD78: using guessed type int dword_118ABD78;
// 118ABDF8: using guessed type int gDirectInputEffect0Stopped;

//----- (10079550) --------------------------------------------------------
int input_10079550() {
  int result; // eax

  result = --dword_118ABE00;
  if (dword_118ABE00 >= 0) {
    result = dword_118ABE00;
    if (!dword_118ABE00) {
      if (gDirectInputEffect) {
        gDirectInputEffect->lpVtbl->Release(gDirectInputEffect);
        gDirectInputEffect = 0;
      }
      if (gDirectInputEffect0) {
        gDirectInputEffect0->lpVtbl->Release(gDirectInputEffect0);
        gDirectInputEffect0 = 0;
      }
      result = (int)gDirectInputDevice2A;
      if (gDirectInputDevice2A) {
        gDirectInputDevice2A->lpVtbl->Unacquire(gDirectInputDevice2A);
        result = gDirectInputDevice2A->lpVtbl->Release(gDirectInputDevice2A);
        gDirectInputDevice2A = 0;
      }
    }
  } else {
    dword_118ABE00 = 0;
  }
  return result;
}
// 118ABE00: using guessed type int dword_118ABE00;

//----- (100795D0) --------------------------------------------------------
int input_100795D0() {
  int configJoystickIndex; // esi
  int v1;                  // edi
  int result;              // eax
  int v3;                  // esi
  int v4;                  // esi

  configJoystickIndex = gConfigJoystickIndex;
  v1 = dword_10B4E1E0;
  gConfigJoystickIndex = 2;
  gConfigJoystickPtr = &gConfig.joystick2;
  dword_10B4E1E0 = 1;
  input_100791D0();
  result = input_10079550();
  gConfigJoystickIndex = configJoystickIndex;
  v3 = configJoystickIndex - 1;
  if (v3) {
    v4 = v3 - 1;
    if (v4) {
      if (v4 == 1)
        gConfigJoystickPtr = &gConfig.joystick3;
      else
        gConfigJoystickPtr = (BossRallyConfigJoystick *)&gConfig;
      dword_10B4E1E0 = v1;
    } else {
      gConfigJoystickPtr = &gConfig.joystick2;
      dword_10B4E1E0 = v1;
    }
  } else {
    dword_10B4E1E0 = v1;
    gConfigJoystickPtr = &gConfig.joystick1;
  }
  return result;
}
// 10B4E1D0: using guessed type int gConfigJoystickIndex;
// 10B4E1E0: using guessed type int dword_10B4E1E0;

//----- (10079670) --------------------------------------------------------
int input_10079670() {
  unknown_libname_11();
  return atexit(unknown_libname_12);
}

//----- (100796B0) --------------------------------------------------------
HINSTANCE main_100796B0() {
  HINSTANCE result;       // eax
  unsigned int dxVersion; // [esp+0h] [ebp-8h] BYREF
  char unk[4];            // [esp+4h] [ebp-4h] BYREF

  result = GetModuleHandleA(0);
  hInstance = result;
  if (result) {
    GetDirectXVersion(&dxVersion, unk);
    if (dxVersion >= 0x600) {
      result = (HINSTANCE)CheckPreviousApp();
      if (result)
        result = (HINSTANCE)(main_100798F0() != 0);
    } else {
      MessageBoxA(0, gMessageBoxText, gMessageBoxCaption, MB_ICONHAND);
      result = 0;
    }
  }
  return result;
}

//----- (10079720) --------------------------------------------------------
BOOL main_UnregisterClass() {
  main_DestroyWindow_gUnk8C();
  return UnregisterClassA(lpClassName, hInstance);
}

//----- (10079740) --------------------------------------------------------
int __cdecl main_10079740(int argc, const char **argv, const char **envp) {
  int result;        // eax
  void *v4;          // ecx
  struct tagMSG Msg; // [esp+0h] [ebp-1Ch] BYREF

  result = (int)hInstance;
  if (hInstance && gHwnd) {
    hAccTable = LoadAcceleratorsA(hInstance, (LPCSTR)0x71);
    while (1) {
      while (1) {
        result = PeekMessageA(&Msg, 0, 0, 0, 1u);
        if (result)
          break;
        if (dword_10680598 && dword_1068059C && !dword_106805A0) {
          sub_1002F8F0();
          meth_DebugPrint(v4);
        }
      }
      if (Msg.message == 18)
        break;
      if (!hAccTable || !TranslateAcceleratorA(gHwnd, hAccTable, &Msg)) {
        TranslateMessage(&Msg);
        DispatchMessageA(&Msg);
      }
    }
    gExitCode = Msg.wParam;
  }
  return result;
}
// 100797FE: variable 'v4' is possibly undefined
// 10680598: using guessed type int dword_10680598;
// 1068059C: using guessed type int dword_1068059C;
// 106805A0: using guessed type int dword_106805A0;
// 118ABE2C: using guessed type int gExitCode;

//----- (10079820) --------------------------------------------------------
#error "100798D3: call analysis failed (funcsize=63)"

//----- (100798F0) --------------------------------------------------------
int main_100798F0() {
  int result;         // eax
  _DWORD *dw;         // eax
  HWND wnd;           // [esp+0h] [ebp-3Ch] BYREF
  _DWORD *dw1;        // [esp+4h] [ebp-38h]
  WNDCLASSA WndClass; // [esp+8h] [ebp-34h] BYREF
  int v5;             // [esp+38h] [ebp-4h]

  hCursor = LoadCursorA(0, (LPCSTR)0x7F00); // MAKEINTRESOURCE(...)
  WndClass.style = CS_DBLCLKS;
  WndClass.lpfnWndProc = main_windowProc;
  WndClass.cbClsExtra = 0;
  WndClass.cbWndExtra = 4; // for storing a pointer after this
  WndClass.hInstance = hInstance;
  WndClass.hIcon = LoadIconA(hInstance, (LPCSTR)0x65); // MAKEINTRESOURCE(...)
  WndClass.hCursor = hCursor;
  WndClass.hbrBackground = (HBRUSH)GetStockObject(0);
  WndClass.lpszMenuName = (LPCSTR)102; // MAKEINTRESOURCE(...)
  WndClass.lpszClassName = lpClassName;
  if (!RegisterClassA(&WndClass))
    return 0;
  if (main_RallyCreateWindow(
          WS_EX_APPWINDOW,
          lpClassName,
          lpWindowName,
          0x80C20000, // dwStyle, WS_EX_STATICEDGE | WS_EX_NOACTIVATE | WS_CAPTION
          0,
          0,
          640,
          480,
          0,
          0,
          hInstance,
          0,
          (int)&gGUID,
          1,
          &wnd,
          (unk00334 *)&gUnk8C) < 0)
    return 0;
  gHwnd = wnd;
  dw = (_DWORD *)operator new(4u);
  dw1 = dw;
  v5 = 0;
  if (dw)
    result = (int)unknown_libname_1(dw);
  else
    result = 0;
  v5 = -1;
  gUnk334 = (unk00334 *)result;
  if (result) {
    ShowStaticImage(gUnk8C, aSplashImg, 0x2AC7E58B);
    result = meth_unk0008C_1000B280(gUnk8C, gUnk334) >= 0;
  }
  return result;
}

//----- (10079A90) --------------------------------------------------------
HRESULT __cdecl main_RallyCreateWindow(DWORD dwExStyle,
                                       LPCSTR lpClassName,
                                       LPCSTR lpWindowName,
                                       DWORD dwStyle,
                                       int X,
                                       int Y,
                                       int nWidth,
                                       int nHeight,
                                       HWND hWndParent,
                                       HMENU hMenu,
                                       HINSTANCE hInstance,
                                       LPVOID lpParam,
                                       int a3,
                                       int a14,
                                       HWND *wnd2,
                                       unk00334 *a16) {
  unk0008C *unk8C_0; // edi
  HRESULT result;    // eax
  HINSTANCE hInst;   // ebx
  HWND wnd1;         // esi
  unk0008C *unk8C_1; // eax
  HWND wnd;          // eax
  HWND wnd0;         // esi
  HRESULT v23;       // ebx

  unk8C_0 = 0;
  if (!lpClassName)
    return -2147024809;
  hInst = hInstance;
  if (!hInstance)
    hInst = GetModuleHandleA(0);
  wnd1 = hWndParent;
  if (!hWndParent)
    wnd1 = GetDesktopWindow();
  unk8C_1 = (unk0008C *)operator new(0x8Cu);
  if (unk8C_1)
    unk8C_0 = meth_unk0008C_init(unk8C_1);
  if (!unk8C_0)
    return -2147024882;
  wnd = CreateWindowExA(dwExStyle,
                        lpClassName,
                        lpWindowName,
                        dwStyle,
                        X,
                        Y,
                        nWidth,
                        nHeight,
                        wnd1,
                        hMenu,
                        hInst,
                        lpParam);
  wnd0 = wnd;
  if (wnd) {
    ShowWindow(wnd, WM_ENABLE);
    UpdateWindow(wnd0);
    if (gPlayMusic == PLAYMUSIC_EAR)
      pm_setupEAR(wnd0);
    v23 = meth_unk0008C_np_1000A1E0(unk8C_0, wnd0, a3, 0, 0, 0, 0, 0, 1);
    if (v23 >= 0) {
      if (wnd2)
        *wnd2 = wnd0;
      if (a16)
        a16->ddCapsFlags = (DWORD)unk8C_0;
      result = 0;
    } else {
      meth_unk0008C_Release(unk8C_0);
      operator delete(unk8C_0);
      MessageBoxA(wnd0, aUnableToInitia, gMessageBoxCaption, MB_ICONSTOP);
      DestroyWindow(wnd0);
      result = v23;
    }
  } else {
    meth_unk0008C_Release(unk8C_0);
    operator delete(unk8C_0);
    result = 0x80004005;
  }
  return result;
}
// 100940A4: using guessed type int gPlayMusic;

//----- (10079C40) --------------------------------------------------------
int main_DestroyWindow_gUnk8C() {
  unk0008C *v0; // esi

  if (gHwnd && IsWindow(gHwnd)) {
    DestroyWindow(gHwnd);
    gHwnd = 0;
  }
  v0 = gUnk8C;
  if (gUnk8C) {
    meth_unk0008C_Release(gUnk8C);
    operator delete(v0);
    gUnk8C = 0;
  }
  return 0;
}

//----- (10079CA0) --------------------------------------------------------
LONG __stdcall main_windowProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam) {
  LONG result; // eax
  LONG v5;     // eax

  if (gUnkC8Ptr1) {
    if (gUnkC8Ptr1->field_68) {
      s_IostreamInit_10060060(gIostreamInit, hWnd, Msg, wParam, lParam);
      if (dword_10A9CFFC)
        sub_1003C3A0(hWnd, Msg, wParam, (char *)lParam);
    }
  }
  if (gPlayMusic == 2) {
    if (Msg == aEarInteractiveMessageID) {
      if (lParam == gPlayMusic && wParam == getWPARAM()) {
        pm_sub_100029B0();
        return 0;
      }
      return 0;
    }
    if (Msg == WM_DEVICECHANGE) {
      if (wParam == DBT_DEVICEARRIVAL) {
        pm_sub_10002260();
        pm_sub_100027C0(1);
      }
      if (wParam == DBT_DEVICEQUERYREMOVE || wParam == DBT_DEVICEREMOVEPENDING ||
          wParam == DBT_DEVICEREMOVECOMPLETE) {
        pm_sub_10002C30();
        pm_sub_10002440();
      }
      return 1;
    }
  }
  if (Msg <= WM_CLOSE) {
    if (Msg != WM_CLOSE) {
      switch (Msg) {
      case WM_CREATE:
        goto exit0;
      case WM_DESTROY:
        noreturn_1007A1D0(); // WM_DESTROY
      case WM_MOVE:          // WM_MOVE
        return events_handle_WM_MOVE(hWnd, wParam, lParam);
      case WM_SIZE: // WM_SIZE
        return events_handle_WM_SIZE(hWnd, wParam, lParam);
      case WM_ACTIVATE: // WM_ACTIVATE
        sub_10077090(wParam);
        return events_handle_WM_ACTIVATE(hWnd, wParam, lParam);
      default:
        return DefWindowProcA(hWnd, Msg, wParam, lParam);
      }
    }
    return main_DestroyWindowWrapper(hWnd);
  }
  if (Msg <= WM_ACTIVATEAPP) // <= WM_ACTIVATEAPP
  {
    if (Msg == WM_ACTIVATEAPP) // // WM_ACTIVATEAPP
      return events_handle_WM_ACTIVATEAPP(hWnd, wParam, lParam);
    if (Msg == WM_ERASEBKGND) // WM_ERASEBKGND
      return events_handle_WM_ERASEBKGND(hWnd, wParam, lParam);
    return DefWindowProcA(hWnd, Msg, wParam, lParam);
  }
  if (Msg <= WM_GETMINMAXINFO) // <= WM_GETMINMAXINFO
  {
    if (Msg == WM_GETMINMAXINFO) // WM_GETMINMAXINFO
      return events_handle_WM_GETMINMAXINFO(hWnd, wParam, lParam);
    if (Msg == WM_SETCURSOR) // WM_SETCURSOR
      return events_handle_WM_SETCURSOR(hWnd, wParam, lParam);
    return DefWindowProcA(hWnd, Msg, wParam, lParam);
  }
  if (Msg <= WM_DISPLAYCHANGE) // <= WM_DISPLAYCHANGE
  {
    if (Msg == WM_DISPLAYCHANGE) // WM_DISPLAYCHANGE
      return events_handle_WM_DISPLAYCHANGE(hWnd);
    if (Msg == WM_WINDOWPOSCHANGING) // WM_WINDOWPOSCHANGING
      return events_handle_WM_WINDOWPOSCHANGING(hWnd, wParam, lParam);
    return DefWindowProcA(hWnd, Msg, wParam, lParam);
  }
  if (Msg <= WM_COMMAND) // <= WM_COMMAND
  {
    if (Msg == WM_COMMAND) // WM_COMMAND
      return events_handle_WM_COMMAND(hWnd, wParam, lParam);
    if (Msg == WM_NCPAINT) // WM_NCPAINT
      return events_handle_WM_NCPAINT(hWnd, wParam, lParam);
    return DefWindowProcA(hWnd, Msg, wParam, lParam);
  }
  if (Msg <= WM_ENTERMENULOOP) // <= WM_ENTERMENULOOP
  {
    if (Msg == WM_ENTERMENULOOP) // WM_ENTERMENULOOP
      return events_handle_WM_ENTERMENULOOP(hWnd, wParam, lParam);
    if (Msg == WM_SYSCOMMAND) // WM_SYSCOMMAND
      return events_handle_WM_SYSCOMMAND(hWnd, wParam, lParam);
    return DefWindowProcA(hWnd, Msg, wParam, lParam);
  }
  if (Msg <= 0x3B9) {
    if (Msg == 0x3B9) {
      if (gPlayMusic == 1) {
        if (lParam == mciId && wParam == 1 && !dword_106909B4) {
          pm_sub_10002510();
          return 0;
        }
        return 0;
      }
    } else if (Msg == WM_EXITMENULOOP) // WM_EXITMENULOOP
    {
      return events_handle_WM_EXITMENULOOP(hWnd, wParam, lParam);
    }
    return DefWindowProcA(hWnd, Msg, wParam, lParam);
  }
  if (Msg > 0xBD0) {
    switch (Msg) {
    case 0xBD1u:
      result = main_ResetWindowLong_USERDATA(hWnd);
      break;
    case 0xBD2u:
    case 0xBD3u:
    case 0xBD4u:
    exit0:
      result = ReturnZero();
      break;
    default:
      return DefWindowProcA(hWnd, Msg, wParam, lParam);
    }
  } else {
    switch (Msg) {
    case 0xBD0u:
      return main_1007A6A0(hWnd, lParam);
    case 0x7E8u: // UM_GETUSERSELA
      v5 = GetWindowLongA(hWnd, GWL_USERDATA);
      if (!v5)
        return 0;
      result = (*(_BYTE *)(v5 + 28) & 0x1F) == 31;
      break;
    case 0x7E9u: // UM_GETUSERSELA
      return GetWindowLongA(hWnd, GWL_USERDATA);
    case 0x7EAu: // UM_GETUSERSELW
      result = GetWindowLongA(hWnd, GWL_USERDATA);
      if (result)
        result = *(_DWORD *)(result + 88);
      break;
    default:
      return DefWindowProcA(hWnd, Msg, wParam, lParam);
    }
  }
  return result;
}
// 100940A4: using guessed type int gPlayMusic;
// 10575478: using guessed type int aEarInteractiveMessageID;
// 106909B4: using guessed type int dword_106909B4;
// 10A9CFFC: using guessed type int dword_10A9CFFC;

//----- (1007A070) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_ACTIVATE(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  return DefWindowProcA(hWnd, 6u, wParam, lParam);
}

//----- (1007A090) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_ACTIVATEAPP(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  void *v3;     // ecx
  void *v4;     // ecx
  unk0008C *v5; // esi
  int v6;       // eax
  int v7;       // eax

  dword_10680598 = wParam;
  if (!wParam) {
    if (!dword_106909B4 && !dword_106909E0) {
      sub_10067980();
      pm_sub_10002B70();
      sub_10072E00();
      dword_10680734 = 0;
      if (gNetworkPlay && gIsGameMode4 && !dword_106909E0 &&
          (v3 = (void *)dword_100BD3E0, dword_10ACEE50 < dword_100BD3E0)) {
        atomic_sub_10004BE0();
        np_sub_10004FC0();
      } else {
        dword_106909B4 = 1;
      }
    }
    meth_DebugPrint(v3);
  }
  if (sub_1006A980() == 1) {
    v5 = (unk0008C *)GetWindowLongA(hWnd, GWL_USERDATA);
    if (dword_10680598) {
      if (v5) {
        v6 = v5->? ;
        LOBYTE(v6) = v6 | 8;
        v5->? = v6;
        meth_unk0008C_1000B2C0(v5);
        meth_unk0008C_1000B150(v5);
      }
    } else if (v5) {
      v7 = v5->? ;
      LOBYTE(v7) = v7 & 0xF7;
      v5->? = v7;
      InvalidateRect(hWnd, 0, 0);
    }
  }
  if (dword_10680598) {
    meth_DebugPrint(v4);
    sub_1002C4D0();
  }
  return DefWindowProcA(hWnd, 0x1Cu, wParam, lParam);
}
// 1007A108: variable 'v3' is possibly undefined
// 1007A16B: variable 'v4' is possibly undefined
// 1022AF14: using guessed type int gIsGameMode4;
// 1022AF18: using guessed type int gNetworkPlay;
// 10680598: using guessed type int dword_10680598;
// 10680734: using guessed type int dword_10680734;
// 106909B4: using guessed type int dword_106909B4;
// 106909E0: using guessed type int dword_106909E0;
// 10ACEE50: using guessed type int dword_10ACEE50;

//----- (1007A190) --------------------------------------------------------
int __cdecl main_DestroyWindowWrapper(HWND hWnd) {
  DestroyWindow(hWnd);
  return 0;
}

//----- (1007A1A0) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_COMMAND(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  return DefWindowProcA(hWnd, 0x111u, wParam, lParam);
}

//----- (1007A1C0) --------------------------------------------------------
int ReturnZero() {
  return 0;
}

//----- (1007A1D0) --------------------------------------------------------
void __noreturn noreturn_1007A1D0() {
  cleanUpAndExitWithCode(0);
}

//----- (1007A1F0) --------------------------------------------------------
int __cdecl events_handle_WM_DISPLAYCHANGE(HWND hWnd) {
  if (GetWindowLongA(hWnd, GWL_USERDATA))
    ReturnZero();
  return 0;
}

//----- (1007A210) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_ERASEBKGND(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  LONG v3;        // eax
  LRESULT result; // eax

  v3 = GetWindowLongA(hWnd, -21);
  if (v3 && (*(_BYTE *)(v3 + 28) & 0x1F) == 31 && (*(_BYTE *)(v3 + 20) & 8) != 0 &&
      !*(_DWORD *)(v3 + 36))
    result = 1;
  else
    result = DefWindowProcA(hWnd, WM_ERASEBKGND, wParam, lParam);
  return result;
}

//----- (1007A260) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_ENTERMENULOOP(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  unk00334 *v3; // eax

  v3 = (unk00334 *)GetWindowLongA(hWnd, GWL_USERDATA);
  if (v3 && (v3->ddCaps1 & 0x1F) == 31) {
    meth_unk00334_1000B220(v3, 1);
    SetCursor(hCursor);
  }
  return DefWindowProcA(hWnd, WM_ENTERMENULOOP, wParam, lParam);
}

//----- (1007A2B0) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_EXITMENULOOP(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  LONG v3;      // eax
  unk00334 *v4; // esi

  v3 = GetWindowLongA(hWnd, -21);
  v4 = (unk00334 *)v3;
  if (v3 && (*(_BYTE *)(v3 + 28) & 0x1F) == 31) {
    SetCursor(0);
    meth_unk00334_1000B220(v4, 0);
  }
  return DefWindowProcA(hWnd, 0x212u, wParam, lParam);
}

//----- (1007A300) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_GETMINMAXINFO(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  LONG v3;         // eax
  unsigned int v4; // ecx
  unsigned int v5; // eax
  int v7[4];       // [esp+4h] [ebp-10h] BYREF

  v3 = GetWindowLongA(hWnd, -21);
  if (!v3 || (*(_BYTE *)(v3 + 28) & 2) == 0 || dword_118AC230)
    return DefWindowProcA(hWnd, 0x24u, wParam, lParam);
  meth_unk00334_1000B350((unk00334 *)v3, v7);
  v4 = abs32(v7[2] - v7[0]);
  v5 = abs32(v7[3] - v7[1]);
  *(_DWORD *)(lParam + 36) = v5;
  *(_DWORD *)(lParam + 28) = v5;
  *(_DWORD *)(lParam + 32) = v4;
  *(_DWORD *)(lParam + 24) = v4;
  return 0;
}
// 118AC230: using guessed type int dword_118AC230;

//----- (1007A380) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_MOVE(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  return DefWindowProcA(hWnd, 3u, wParam, lParam);
}

//----- (1007A3A0) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_NCPAINT(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  LONG v3;        // eax
  LRESULT result; // eax

  v3 = GetWindowLongA(hWnd, -21);
  if (v3 && (*(_BYTE *)(v3 + 28) & 0x1F) == 31 && (*(_BYTE *)(v3 + 20) & 8) != 0 &&
      !*(_DWORD *)(v3 + 36) && !dword_118AC230) {
    result = 0;
  } else {
    result = DefWindowProcA(hWnd, 0x85u, wParam, lParam);
  }
  return result;
}
// 118AC230: using guessed type int dword_118AC230;

//----- (1007A3F0) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_SETCURSOR(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  LONG v3;        // eax
  LRESULT result; // eax

  v3 = GetWindowLongA(hWnd, -21);
  if (!v3 || (*(_BYTE *)(v3 + 28) & 2) == 0)
    return DefWindowProcA(hWnd, 0x20u, wParam, lParam);
  if (*(_DWORD *)(v3 + 36) || (*(_BYTE *)(v3 + 20) & 8) == 0) {
    SetCursor(hCursor);
    result = 1;
  } else {
    SetCursor(0);
    result = 1;
  }
  return result;
}

//----- (1007A450) --------------------------------------------------------
int __cdecl events_handle_WM_SIZE(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  unk0008C *v3; // eax
  int result;   // eax

  v3 = (unk0008C *)GetWindowLongA(hWnd, GWL_USERDATA);
  if (wParam) {
    if (wParam == 1) {
      dword_118AC230 = 1;
      dword_118AC234 = 0;
    } else if (wParam == 2) {
      dword_118AC234 = 1;
      dword_118AC230 = 0;
      return DefWindowProcA(hWnd, WM_SIZE, 2u, lParam);
    }
    result = DefWindowProcA(hWnd, WM_SIZE, wParam, lParam);
  } else {
    if (dword_118AC230) {
      if (v3)
        meth_unk0008C_1000B2C0(v3);
      dword_118AC234 = 0;
      dword_118AC230 = 0;
    }
    result = 0;
  }
  return result;
}
// 118AC230: using guessed type int dword_118AC230;
// 118AC234: using guessed type int dword_118AC234;

//----- (1007A4E0) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_SYSCOMMAND(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  unk00334 *v3; // eax

  v3 = (unk00334 *)GetWindowLongA(hWnd, -21);
  if (wParam <= 0xF010) {
    if (wParam != 61456) {
      if (wParam == 61440)
        return 0;
      return DefWindowProcA(hWnd, 0x112u, wParam, lParam);
    }
    return 0;
  }
  switch (wParam) {
  case 0xF020u:
    dword_118AC230 = 1;
  LABEL_15:
    dword_118AC234 = 0;
    return DefWindowProcA(hWnd, 0x112u, wParam, lParam);
  case 0xF030u:
    dword_118AC234 = 1;
    dword_118AC230 = 0;
    return 0;
  case 0xF120u:
    if (dword_118AC230) {
      if (v3)
        meth_unk0008C_1000B2C0(v3);
    }
    dword_118AC230 = 0;
    goto LABEL_15;
  }
  return DefWindowProcA(hWnd, 0x112u, wParam, lParam);
}
// 118AC230: using guessed type int dword_118AC230;
// 118AC234: using guessed type int dword_118AC234;

//----- (1007A590) --------------------------------------------------------
LRESULT __cdecl events_handle_WM_WINDOWPOSCHANGING(HWND hWnd, WPARAM wParam, LPARAM lParam) {
  HWND v3;             // esi
  LONG v4;             // eax
  unk00334 *v5;        // ebp
  unsigned int v6;     // esi
  unsigned int v7;     // edi
  int v8;              // ebp
  unsigned int v9;     // ecx
  unsigned int v10;    // eax
  int v11;             // eax
  int v12;             // edx
  int v14;             // [esp+10h] [ebp-20h] BYREF
  int v15;             // [esp+14h] [ebp-1Ch]
  int v16;             // [esp+18h] [ebp-18h]
  int v17;             // [esp+1Ch] [ebp-14h]
  struct tagRECT Rect; // [esp+20h] [ebp-10h] BYREF

  v3 = hWnd;
  v4 = GetWindowLongA(hWnd, GWL_USERDATA);
  v5 = (unk00334 *)v4;
  if (v4 && (*(_BYTE *)(v4 + 28) & 2) != 0 && !dword_118AC230 && lParam) {
    if (IsIconic(hWnd)) {
      dword_118AC230 = 1;
    } else {
      GetWindowRect(hWnd, &Rect);
      v6 = abs32(Rect.right - Rect.left);
      v7 = abs32(Rect.bottom - Rect.top);
      meth_unk00334_1000B350(v5, &v14);
      v8 = v14;
      v9 = abs32(v16 - v14);
      v10 = abs32(v17 - v15);
      if (v9 < 0x140)
        v9 = 320;
      if (v10 < 0xC8)
        v10 = 200;
      if (v9 == v6 && v10 == v7) {
        v11 = *(_DWORD *)(lParam + 24);
        LOBYTE(v11) = v11 | 3;
      } else {
        v12 = v15;
        *(_DWORD *)(lParam + 20) = v10;
        v11 = *(_DWORD *)(lParam + 24);
        *(_DWORD *)(lParam + 8) = v8;
        *(_DWORD *)(lParam + 12) = v12;
        *(_DWORD *)(lParam + 16) = v9;
        LOBYTE(v11) = v11 & 0xFC;
      }
      v3 = hWnd;
      *(_DWORD *)(lParam + 24) = v11;
    }
  }
  return DefWindowProcA(v3, 0x46u, wParam, lParam);
}
// 118AC230: using guessed type int dword_118AC230;

//----- (1007A6A0) --------------------------------------------------------
int __cdecl main_1007A6A0(HWND hWnd, intptr_t dwNewLong) {
  bool isActiveWindow; // zf
  LONG v3;             // eax

  if (dwNewLong && (*(_BYTE *)(dwNewLong + 28) & 0x1F) == 31) {
    SetWindowLongA(hWnd, -21, dwNewLong); // GWL_USERDATA
    isActiveWindow = GetActiveWindow() == hWnd;
    v3 = *(_DWORD *)(dwNewLong + 20);
    if (isActiveWindow) {
      LOBYTE(v3) = v3 | 8;
      *(_DWORD *)(dwNewLong + 20) = v3;
      return 0;
    }
    LOBYTE(v3) = v3 & 0xF7;
    *(_DWORD *)(dwNewLong + 20) = v3;
  }
  return 0;
}

//----- (1007A6F0) --------------------------------------------------------
int __cdecl main_ResetWindowLong_USERDATA(HWND hWnd) {
  SetWindowLongA(hWnd, -21, 0);
  return 0;
}

//----- (1007A710) --------------------------------------------------------
int __cdecl s_unk00334_QSortCompareFn(unk00334 *u334aOrBitDepth, unk00334 **u334OrBitDepth) {
  unk00334 *v2; // esi
  int v3;       // edi
  int width;    // [esp+8h] [ebp-18h] BYREF
  int width1;   // [esp+Ch] [ebp-14h] BYREF
  int height;   // [esp+10h] [ebp-10h] BYREF
  int height1;  // [esp+14h] [ebp-Ch] BYREF
  char v9[4];   // [esp+18h] [ebp-8h] BYREF
  char v10[4];  // [esp+1Ch] [ebp-4h] BYREF

  v2 = *u334OrBitDepth;
  v3 = 0;
  if (u334aOrBitDepth->ddCapsFlags) {
    if (!v2)
      return -1;
  } else if (!v2) {
    return 0;
  }
  meth_unk00334_1001AC80((unk00334 *)u334aOrBitDepth->ddCapsFlags,
                         &width,
                         &height,
                         (int *)&u334aOrBitDepth,
                         (int *)v9);
  meth_unk00334_1001AC80(v2, &width1, &height1, (int *)&u334OrBitDepth, (int *)v10);
  if (u334aOrBitDepth < (unk00334 *)u334OrBitDepth)
    return -1;
  if (u334aOrBitDepth > (unk00334 *)u334OrBitDepth)
    return 1;
  if (width < (unsigned int)width1)
    return -1;
  if (width > (unsigned int)width1)
    return 1;
  if (height < (unsigned int)height1)
    return -1;
  if (height > (unsigned int)height1)
    return 1;
  return v3;
}
// 1007A735: conditional instruction was optimized away because of 'ecx.4==0'

//----- (1007A7D0) --------------------------------------------------------
unk00334 *__cdecl s_CLSID_1007A7D0(CLSID *a1) {
  unk00334 *v1; // ebx
  int v2;       // ebp
  unk00334 *v3; // edx

  v1 = gUnk334Ptr1;
  v2 = 0;
  if (!gUnk334Ptr1)
    return gUnk334Ptr1;
  while (1) {
    v3 = v1->last;
    if (!memcmp(a1, &v1->lpGUID, 0x10u))
      break;
    ++v2;
    v1 = v1->last;
    if (!v3)
      return gUnk334Ptr1;
  }
  gUnk00334Ptr1 = sub_1001A550(a1);
  if (!gUnk00334Ptr1)
    return gUnk334Ptr1;
  dword_10AA2860 = v2;
  dword_10AA2A2C = v2;
  return v1;
}
// 10AA2860: using guessed type int dword_10AA2860;
// 10AA2A2C: using guessed type int dword_10AA2A2C;

//----- (1007A840) --------------------------------------------------------
int __stdcall graphics_1007A840() {
  GUID *v0;        // eax
  int result;      // eax
  unk00334 *v2;    // esi
  int v3;          // edi
  unk00334 *v4;    // ebx
  CHAR buffer[80]; // [esp+10h] [ebp-50h] BYREF

  if (gUnk00334Ptr1)
    v0 = meth_unk00334_GetDirectDrawGUID(gUnk00334Ptr1);
  else
    v0 = 0;
  result = (int)sub_1001A550(v0);
  gUnk00334Ptr1 = (unk00334 *)result;
  if (result) {
    v2 = gUnk334Ptr1;
    v3 = 0;
    if (gUnk334Ptr1) {
      do {
        v4 = v2->last;
        if (((int)v2->ddCapsFlags & 2) != 0) {
          wsprintfA(buffer, "%s (Primary)", v2->field_14);
          dword_10AA2860 = v3;
          dword_10AA2A2C = v3;
        } else {
          wsprintfA(buffer, "%s", v2->field_14);
        }
        if (gUnk1E214Ptr0) {
          gUnk1E214Ptr0->field_3838.lpVtbl->meth4(
              &gUnk1E214Ptr0->field_3838, buffer, 0, 1, (int)&dword_100AB528, 1);
          gUnk1E214Ptr0->field_3838.lpVtbl->meth10(&gUnk1E214Ptr0->field_3838, &v2->lpGUID, 16, v3);
        }
        ++v3;
        v2 = v4;
      } while (v4);
    }
    gUnk00334Ptr1 = s_CLSID_1007A7D0((CLSID *)&gGUID);
    result = 1;
  }
  return result;
}
// 10AA2860: using guessed type int dword_10AA2860;
// 10AA2A2C: using guessed type int dword_10AA2A2C;

//----- (1007A940) --------------------------------------------------------
int graphics_1007A940() {
  unk00334 *u334;   // ecx
  int v1;           // edi
  CLSID *v3;        // eax
  unk00334 *v4;     // esi
  unsigned int v5;  // ebp
  void *v6;         // eax
  unk00334 *v7;     // ecx
  unk00334 *v8;     // edx
  int v9;           // esi
  unsigned int v10; // eax
  unk00334 *v11;    // ecx
  int v12;          // eax
  unsigned int i;   // [esp+20h] [ebp-64h] BYREF
  int height;       // [esp+24h] [ebp-60h] BYREF
  int bitDepth;     // [esp+28h] [ebp-5Ch] BYREF
  int width;        // [esp+2Ch] [ebp-58h] BYREF
  int a5;           // [esp+30h] [ebp-54h] BYREF
  CHAR v18[80];     // [esp+34h] [ebp-50h] BYREF

  u334 = gUnk00334Ptr1;
  v1 = 0;
  if (!gUnk00334Ptr1)
    return 0;
  v3 = dword_118AC23C;
  if (!dword_118AC23C) {
    v3 = sub_1001A5D0(gUnk00334Ptr1, 0, 0);
    dword_118AC23C = v3;
    if (!v3)
      return 0;
    u334 = gUnk00334Ptr1;
  }
  v4 = u334->field_318;
  if (!v4)
    return 0;
  v5 = u334->field_314;
  if (!v5)
    return 0;
  if (!gUnk00334Ptr0)
    gUnk00334Ptr0 = meth_unk00334_1001A570(u334, 640, 480, 16, 0, (unk00228 *)v3);
  if (Base) {
    operator delete(Base);
    Base = 0;
  }
  v6 = (void *)operator new(4 * v5);
  Base = v6;
  if (!v6)
    return 0;
  i = 0;
  v7 = v4;
  while (1) {
    v8 = v7->? ;
    *((_DWORD *)v6 + i++) = v7;
    v7 = v8;
    if (!v8)
      break;
    v6 = Base;
  }
  qsort(Base, v5, 4, s_unk00334_QSortCompareFn);
  v9 = 0;
  v10 = 0;
  for (i = 0; i < v5; ++i) {
    v11 = (unk00334 *)*((_DWORD *)Base + v10);
    if (!v11 || !meth_unk00334_1001ACF0(v11, (unk00228 *)dword_118AC23C))
      goto LABEL_41;
    meth_unk00334_1001AC80(*((unk00334 **)Base + i), &width, &height, &bitDepth, &a5);
    if (a5) {
      wsprintfA(v18, "%4d x %4d x %2d (%4d Hz)", width, height, bitDepth, a5);
      v12 = width;
      if (gWidth1 != width || gHeight1 != height || gBitDepth != bitDepth || dword_10B4E6F4 != a5)
        goto LABEL_33;
    } else {
      wsprintfA(v18, "%4d x %4d x %2d", width, height, bitDepth);
      v12 = width;
      if (gWidth1 != width || gHeight1 != height || gBitDepth != bitDepth)
        goto LABEL_33;
    }
    dword_10AA2864 = v9;
    dword_10AA2A30 = v9;
    v1 = 1;
  LABEL_33:
    if (!v1 && v12 == 640 && height == 480 && bitDepth == 16) {
      dword_10AA2864 = v9;
      dword_10AA2A30 = v9;
    }
    if (dword_10AA29EC) {
      (*(void(__thiscall **)(int, CHAR *, _DWORD, int, void *, int))(
          *(_DWORD *)(dword_10AA29EC + 14392) + 16))(
          dword_10AA29EC + 14392, v18, 0, 1, &dword_100AB528, 1);
      (*(void(__thiscall **)(int, unsigned int *, int, int))(
          *(_DWORD *)(dword_10AA29EC + 14392) + 40))(dword_10AA29EC + 14392, &i, 4, v9);
    }
    ++v9;
  LABEL_41:
    v10 = i + 1;
  }
  return 1;
}
// 1007AA5D: conditional instruction was optimized away because of 'ebp.4!=0'
// 1007E2A0: using guessed type int __cdecl qsort(_DWORD, _DWORD, _DWORD, _DWORD);
// 10AA2864: using guessed type int dword_10AA2864;
// 10AA29EC: using guessed type int dword_10AA29EC;
// 10AA2A30: using guessed type int dword_10AA2A30;
// 10B4E6E8: using guessed type int gWidth1;
// 10B4E6EC: using guessed type int gHeight1;
// 10B4E6F0: using guessed type int gBitDepth;
// 10B4E6F4: using guessed type int dword_10B4E6F4;

//----- (1007AC00) --------------------------------------------------------
int graphics_1007AC00() {
  int result; // eax

  result = graphics_1007A840();
  if (result)
    result = graphics_1007A940() != 0;
  return result;
}

//----- (1007AC20) --------------------------------------------------------
BOOL __cdecl graphics_1007AC20(int width, int height, int bitDepth, unk00334 *a5) {
  unk0008C *u8c;   // eax
  unk0008C *u8c_1; // edi
  D3DVALUE v6;     // esi
  unk00334 *u334;  // eax
  unk00334 *v8;    // esi
  unk00334 *v9;    // eax
  BOOL result;     // eax

  u8c = (unk0008C *)GetWindowLongA(gHwnd, GWL_USERDATA);
  u8c_1 = u8c;
  result = 0;
  if (u8c) {
    v6 = u8c->field_8.specular.r;
    u334 = s_CLSID_1007A7D0((CLSID *)&gGUID);
    if ((unk00334 *)LODWORD(v6) != u334) {
      if (u334) {
        v8 = (unk00334 *)LODWORD(u8c_1->field_8.specular.b);
        if (v8) {
          v9 = meth_unk00334_1001A570(
              u334, width, height, bitDepth, a5, (unk00228 *)LODWORD(u8c_1->field_8.specular.b));
          if (!meth_unk0008C_1000B390(u8c_1, (CLSID *)&gGUID, v8, (int)v9))
              result = 1;
        }
      }
    }
  }
  return result;
}

//----- (1007CF10) --------------------------------------------------------
size_t __cdecl filesystem_freadLock(void *buffer,
                                    size_t elementSize,
                                    size_t elementCount,
                                    FILE *fp) {
  size_t v4; // edi

  _lock_file(fp);
  v4 = fread(buffer, elementSize, elementCount, fp);
  _unlock_file(fp);
  return v4;
}

//----- (1007D150) --------------------------------------------------------
size_t __cdecl filesystem_fwriteLock(void *Buffer,
                                     size_t ElementSize,
                                     size_t ElementCount,
                                     FILE *Stream) {
  size_t v4; // edi

  _lock_file(Stream);
  v4 = fwrite(Buffer, ElementSize, ElementCount, Stream);
  _unlock_file(Stream);
  return v4;
}

//----- (1007E54D) --------------------------------------------------------
#error "1007E5D7: call analysis failed (funcsize=60)"

//----- (1007E5FD) --------------------------------------------------------
#error "1007E687: call analysis failed (funcsize=60)"

//----- (1007E6AD) --------------------------------------------------------
#error "1007E743: call analysis failed (funcsize=60)"

//----- (1007F3C0) --------------------------------------------------------
char *__cdecl getcwd(char *buffer, int maxlen) {
  char *fullPath; // esi

  _lock(_ENV_LOCK);
  fullPath = _getdcwd_lk(0, buffer, maxlen);
  _unlock(_ENV_LOCK);
  return fullPath;
}

//----- (10083B50) --------------------------------------------------------
void __noreturn noreturn_10083B50() {
  if (off_100BFC00)
    off_100BFC00();
  terminate();
}
// 100BFC00: using guessed type int (*off_100BFC00)(void);

//----- (10086B80) --------------------------------------------------------
int __cdecl sub_10086B80(int a1) {
  int result; // eax

  result = a1;
  dword_118AC2D0 = a1;
  return result;
}
// 118AC2D0: using guessed type int dword_118AC2D0;

//----- (10087540) --------------------------------------------------------
int __cdecl sub_10087540(int a1, int a2) {
  return _ld12cvt(a1, a2, dword_100C0378);
}
// 10087370: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (10087560) --------------------------------------------------------
int __cdecl ld12cvt_(int a1, int a2) {
  return _ld12cvt(a1, a2, &unk_100C0390);
}
// 10087370: using guessed type _DWORD __cdecl _ld12cvt(_DWORD, _DWORD, _DWORD);

//----- (10087580) --------------------------------------------------------
int __cdecl sub_10087580(int a1, int a2) {
  char v3[12]; // [esp+0h] [ebp-Ch] BYREF

  __strgtold12((int)v3, (char **)&a2, (char *)a2, 0, 0, 0, 0);
  return sub_10087540((int)v3, a1);
}

//----- (100875C0) --------------------------------------------------------
int __cdecl sub_100875C0(int a1, int a2) {
  char v3[12]; // [esp+0h] [ebp-Ch] BYREF

  __strgtold12((int)v3, (char **)&a2, (char *)a2, 0, 0, 0, 0);
  return ld12cvt_((int)v3, a1);
}

//----- (10089B40) --------------------------------------------------------
BOOL __cdecl time_10089B40(_DWORD *a1) {
  BOOL result; // eax
  int v2;      // eax
  int v3;      // ecx
  int v4;      // eax
  int v5;      // [esp-24h] [ebp-2Ch]
  int v6;      // [esp-20h] [ebp-28h]
  int v7;      // [esp-1Ch] [ebp-24h]
  int v8;      // [esp-18h] [ebp-20h]
  int v9;      // [esp-10h] [ebp-18h]
  int v10;     // [esp-Ch] [ebp-14h]
  int v11;     // [esp-8h] [ebp-10h]
  int v12;     // [esp-4h] [ebp-Ch]

  if (!dword_100C0C44)
    return 0;
  v2 = a1[5];
  if (v2 != dword_100C0CD8 || v2 != dword_100C0CE8) {
    if (dword_118AC608) {
      if (TimeZoneInformation.DaylightDate.wYear)
        cvtdate(1,
                0,
                v2,
                TimeZoneInformation.DaylightDate.wMonth,
                0,
                0,
                TimeZoneInformation.DaylightDate.wDay,
                TimeZoneInformation.DaylightDate.wHour,
                TimeZoneInformation.DaylightDate.wMinute,
                TimeZoneInformation.DaylightDate.wSecond,
                TimeZoneInformation.DaylightDate.wMilliseconds);
      else
        cvtdate(1,
                1,
                v2,
                TimeZoneInformation.DaylightDate.wMonth,
                TimeZoneInformation.DaylightDate.wDay,
                TimeZoneInformation.DaylightDate.wDayOfWeek,
                0,
                TimeZoneInformation.DaylightDate.wHour,
                TimeZoneInformation.DaylightDate.wMinute,
                TimeZoneInformation.DaylightDate.wSecond,
                TimeZoneInformation.DaylightDate.wMilliseconds);
      if (TimeZoneInformation.StandardDate.wYear) {
        cvtdate(0,
                0,
                a1[5],
                TimeZoneInformation.StandardDate.wMonth,
                0,
                0,
                TimeZoneInformation.StandardDate.wDay,
                TimeZoneInformation.StandardDate.wHour,
                TimeZoneInformation.StandardDate.wMinute,
                TimeZoneInformation.StandardDate.wSecond,
                TimeZoneInformation.StandardDate.wMilliseconds);
        goto LABEL_14;
      }
      v12 = TimeZoneInformation.StandardDate.wMilliseconds;
      v11 = TimeZoneInformation.StandardDate.wSecond;
      v10 = TimeZoneInformation.StandardDate.wMinute;
      v9 = TimeZoneInformation.StandardDate.wHour;
      v8 = TimeZoneInformation.StandardDate.wDayOfWeek;
      v7 = TimeZoneInformation.StandardDate.wDay;
      v6 = TimeZoneInformation.StandardDate.wMonth;
      v5 = a1[5];
    } else {
      cvtdate(1, 1, v2, 4, 1, 0, 0, 2, 0, 0, 0);
      v12 = 0;
      v11 = 0;
      v10 = 0;
      v9 = 2;
      v8 = 0;
      v7 = 5;
      v6 = 10;
      v5 = a1[5];
    }
    cvtdate(0, 1, v5, v6, v7, v8, 0, v9, v10, v11, v12);
  }
LABEL_14:
  v3 = a1[7];
  if (dword_100C0CDC < dword_100C0CEC) {
    if (v3 >= dword_100C0CDC && v3 <= dword_100C0CEC) {
      if (v3 > dword_100C0CDC && v3 < dword_100C0CEC)
        return 1;
      goto LABEL_25;
    }
    return 0;
  }
  if (v3 < dword_100C0CEC || v3 > dword_100C0CDC)
    return 1;
  if (v3 > dword_100C0CEC && v3 < dword_100C0CDC)
    return 0;
LABEL_25:
  v4 = 1000 * (*a1 + 60 * (a1[1] + 60 * a1[2]));
  if (v3 == dword_100C0CDC)
    result = v4 >= dword_100C0CE0;
  else
    result = v4 < dword_100C0CF0;
  return result;
}
// 10089DB0: using guessed type _DWORD __cdecl cvtdate(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 100C0C44: using guessed type int dword_100C0C44;
// 100C0CD8: using guessed type int dword_100C0CD8;
// 100C0CDC: using guessed type int dword_100C0CDC;
// 100C0CE0: using guessed type int dword_100C0CE0;
// 100C0CE8: using guessed type int dword_100C0CE8;
// 100C0CEC: using guessed type int dword_100C0CEC;
// 100C0CF0: using guessed type int dword_100C0CF0;
// 118AC608: using guessed type int dword_118AC608;

// nfuncs=1971 queued=1562 decompiled=1562 lumina nreq=0 worse=0 better=0
#error "There were 4 decompilation failure(s) on 1562 function(s)"
